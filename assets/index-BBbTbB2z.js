function KA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function qb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gb={exports:{}},Zd={},Kb={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=Symbol.for("react.element"),QA=Symbol.for("react.portal"),YA=Symbol.for("react.fragment"),XA=Symbol.for("react.strict_mode"),JA=Symbol.for("react.profiler"),ZA=Symbol.for("react.provider"),e2=Symbol.for("react.context"),t2=Symbol.for("react.forward_ref"),n2=Symbol.for("react.suspense"),r2=Symbol.for("react.memo"),s2=Symbol.for("react.lazy"),Gx=Symbol.iterator;function i2(t){return t===null||typeof t!="object"?null:(t=Gx&&t[Gx]||t["@@iterator"],typeof t=="function"?t:null)}var Qb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yb=Object.assign,Xb={};function ma(t,e,n){this.props=t,this.context=e,this.refs=Xb,this.updater=n||Qb}ma.prototype.isReactComponent={};ma.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ma.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jb(){}Jb.prototype=ma.prototype;function Ng(t,e,n){this.props=t,this.context=e,this.refs=Xb,this.updater=n||Qb}var Tg=Ng.prototype=new Jb;Tg.constructor=Ng;Yb(Tg,ma.prototype);Tg.isPureReactComponent=!0;var Kx=Array.isArray,Zb=Object.prototype.hasOwnProperty,Sg={current:null},e1={key:!0,ref:!0,__self:!0,__source:!0};function t1(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Zb.call(e,r)&&!e1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:hc,type:t,key:i,ref:a,props:s,_owner:Sg.current}}function o2(t,e){return{$$typeof:hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cg(t){return typeof t=="object"&&t!==null&&t.$$typeof===hc}function a2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qx=/\/+/g;function Af(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a2(""+t.key):e.toString(36)}function Eu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case hc:case QA:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Af(a,0):r,Kx(s)?(n="",t!=null&&(n=t.replace(Qx,"$&/")+"/"),Eu(s,e,n,"",function(d){return d})):s!=null&&(Cg(s)&&(s=o2(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Qx,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Kx(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Af(i,l);a+=Eu(i,e,n,c,s)}else if(c=i2(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Af(i,l++),a+=Eu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function qc(t,e,n){if(t==null)return t;var r=[],s=0;return Eu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function l2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Nu={transition:null},c2={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Nu,ReactCurrentOwner:Sg};function n1(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:qc,forEach:function(t,e,n){qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qc(t,function(){e++}),e},toArray:function(t){return qc(t,function(e){return e})||[]},only:function(t){if(!Cg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=ma;_e.Fragment=YA;_e.Profiler=JA;_e.PureComponent=Ng;_e.StrictMode=XA;_e.Suspense=n2;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c2;_e.act=n1;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yb({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Sg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Zb.call(e,c)&&!e1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:hc,type:t.type,key:s,ref:i,props:r,_owner:a}};_e.createContext=function(t){return t={$$typeof:e2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZA,_context:t},t.Consumer=t};_e.createElement=t1;_e.createFactory=function(t){var e=t1.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:t2,render:t}};_e.isValidElement=Cg;_e.lazy=function(t){return{$$typeof:s2,_payload:{_status:-1,_result:t},_init:l2}};_e.memo=function(t,e){return{$$typeof:r2,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Nu.transition;Nu.transition={};try{t()}finally{Nu.transition=e}};_e.unstable_act=n1;_e.useCallback=function(t,e){return rn.current.useCallback(t,e)};_e.useContext=function(t){return rn.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};_e.useEffect=function(t,e){return rn.current.useEffect(t,e)};_e.useId=function(){return rn.current.useId()};_e.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return rn.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};_e.useRef=function(t){return rn.current.useRef(t)};_e.useState=function(t){return rn.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return rn.current.useTransition()};_e.version="18.3.1";Kb.exports=_e;var g=Kb.exports;const gs=qb(g),eh=KA({__proto__:null,default:gs},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2=g,d2=Symbol.for("react.element"),h2=Symbol.for("react.fragment"),f2=Object.prototype.hasOwnProperty,m2=u2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p2={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)f2.call(e,r)&&!p2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:d2,type:t,key:i,ref:a,props:s,_owner:m2.current}}Zd.Fragment=h2;Zd.jsx=r1;Zd.jsxs=r1;Gb.exports=Zd;var o=Gb.exports,s1={exports:{}},jn={},i1={exports:{}},o1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,G){var se=O.length;O.push(G);e:for(;0<se;){var V=se-1>>>1,W=O[V];if(0<s(W,G))O[V]=G,O[se]=W,se=V;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var G=O[0],se=O.pop();if(se!==G){O[0]=se;e:for(var V=0,W=O.length,me=W>>>1;V<me;){var ve=2*(V+1)-1,J=O[ve],ee=ve+1,q=O[ee];if(0>s(J,se))ee<W&&0>s(q,J)?(O[V]=q,O[ee]=se,V=ee):(O[V]=J,O[ve]=se,V=ve);else if(ee<W&&0>s(q,se))O[V]=q,O[ee]=se,V=ee;else break e}}return G}function s(O,G){var se=O.sortIndex-G.sortIndex;return se!==0?se:O.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,w=!1,C=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=O)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function k(O){if(v=!1,S(O),!C)if(n(c)!==null)C=!0,Q(L);else{var G=n(d);G!==null&&te(k,G.startTime-O)}}function L(O,G){C=!1,v&&(v=!1,T(y),y=-1),w=!0;var se=m;try{for(S(G),f=n(c);f!==null&&(!(f.expirationTime>G)||O&&!R());){var V=f.callback;if(typeof V=="function"){f.callback=null,m=f.priorityLevel;var W=V(f.expirationTime<=G);G=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(c)&&r(c),S(G)}else r(c);f=n(c)}if(f!==null)var me=!0;else{var ve=n(d);ve!==null&&te(k,ve.startTime-G),me=!1}return me}finally{f=null,m=se,w=!1}}var A=!1,E=null,y=-1,I=5,N=-1;function R(){return!(t.unstable_now()-N<I)}function j(){if(E!==null){var O=t.unstable_now();N=O;var G=!0;try{G=E(!0,O)}finally{G?P():(A=!1,E=null)}}else A=!1}var P;if(typeof _=="function")P=function(){_(j)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,K=U.port2;U.port1.onmessage=j,P=function(){K.postMessage(null)}}else P=function(){x(j,0)};function Q(O){E=O,A||(A=!0,P())}function te(O,G){y=x(function(){O(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){C||w||(C=!0,Q(L))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var se=m;m=G;try{return O()}finally{m=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var se=m;m=O;try{return G()}finally{m=se}},t.unstable_scheduleCallback=function(O,G,se){var V=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?V+se:V):se=V,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=se+W,O={id:h++,callback:G,priorityLevel:O,startTime:se,expirationTime:W,sortIndex:-1},se>V?(O.sortIndex=se,e(d,O),n(c)===null&&O===n(d)&&(v?(T(y),y=-1):v=!0,te(k,se-V))):(O.sortIndex=W,e(c,O),C||w||(C=!0,Q(L))),O},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(O){var G=m;return function(){var se=m;m=G;try{return O.apply(this,arguments)}finally{m=se}}}})(o1);i1.exports=o1;var g2=i1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=g,In=g2;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a1=new Set,Pl={};function Ji(t,e){Ho(t,e),Ho(t+"Capture",e)}function Ho(t,e){for(Pl[t]=e,t=0;t<e.length;t++)a1.add(e[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mm=Object.prototype.hasOwnProperty,v2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yx={},Xx={};function x2(t){return Mm.call(Xx,t)?!0:Mm.call(Yx,t)?!1:v2.test(t)?Xx[t]=!0:(Yx[t]=!0,!1)}function w2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _2(t,e,n,r){if(e===null||typeof e>"u"||w2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ig=/[\-:]([a-z])/g;function jg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ig,jg);Lt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ig,jg);Lt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ig,jg);Lt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ag(t,e,n,r){var s=Lt.hasOwnProperty(e)?Lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_2(e,n,s,r)&&(n=null),r||s===null?x2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gc=Symbol.for("react.element"),vo=Symbol.for("react.portal"),xo=Symbol.for("react.fragment"),kg=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),Fm=Symbol.for("react.suspense"),Um=Symbol.for("react.suspense_list"),Pg=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),u1=Symbol.for("react.offscreen"),Jx=Symbol.iterator;function Ga(t){return t===null||typeof t!="object"?null:(t=Jx&&t[Jx]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,kf;function il(t){if(kf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kf=e&&e[1]||""}return`
`+kf+t}var Rf=!1;function Pf(t,e){if(!t||Rf)return"";Rf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Rf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?il(t):""}function b2(t){switch(t.tag){case 5:return il(t.type);case 16:return il("Lazy");case 13:return il("Suspense");case 19:return il("SuspenseList");case 0:case 2:case 15:return t=Pf(t.type,!1),t;case 11:return t=Pf(t.type.render,!1),t;case 1:return t=Pf(t.type,!0),t;default:return""}}function Bm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xo:return"Fragment";case vo:return"Portal";case Vm:return"Profiler";case kg:return"StrictMode";case Fm:return"Suspense";case Um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c1:return(t.displayName||"Context")+".Consumer";case l1:return(t._context.displayName||"Context")+".Provider";case Rg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pg:return e=t.displayName||null,e!==null?e:Bm(t.type)||"Memo";case vs:e=t._payload,t=t._init;try{return Bm(t(e))}catch{}}return null}function E2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bm(e);case 8:return e===kg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function d1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N2(t){var e=d1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kc(t){t._valueTracker||(t._valueTracker=N2(t))}function h1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=d1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $m(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f1(t,e){e=e.checked,e!=null&&Ag(t,"checked",e,!1)}function zm(t,e){f1(t,e);var n=Hs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hm(t,e.type,Hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ew(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hm(t,e,n){(e!=="number"||Xu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ol=Array.isArray;function Ao(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(ol(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hs(n)}}function m1(t,e){var n=Hs(e.value),r=Hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function p1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?p1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qc,g1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qc=Qc||document.createElement("div"),Qc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T2=["Webkit","ms","Moz","O"];Object.keys(gl).forEach(function(t){T2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gl[e]=gl[t]})});function y1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gl.hasOwnProperty(t)&&gl[t]?(""+e).trim():e+"px"}function v1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=y1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var S2=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gm(t,e){if(e){if(S2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Km(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qm=null;function Dg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ym=null,ko=null,Ro=null;function rw(t){if(t=pc(t)){if(typeof Ym!="function")throw Error(H(280));var e=t.stateNode;e&&(e=ih(e),Ym(t.stateNode,t.type,e))}}function x1(t){ko?Ro?Ro.push(t):Ro=[t]:ko=t}function w1(){if(ko){var t=ko,e=Ro;if(Ro=ko=null,rw(t),e)for(t=0;t<e.length;t++)rw(e[t])}}function _1(t,e){return t(e)}function b1(){}var Df=!1;function E1(t,e,n){if(Df)return t(e,n);Df=!0;try{return _1(t,e,n)}finally{Df=!1,(ko!==null||Ro!==null)&&(b1(),w1())}}function Ll(t,e){var n=t.stateNode;if(n===null)return null;var r=ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Xm=!1;if(Hr)try{var Ka={};Object.defineProperty(Ka,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",Ka,Ka),window.removeEventListener("test",Ka,Ka)}catch{Xm=!1}function C2(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var yl=!1,Ju=null,Zu=!1,Jm=null,I2={onError:function(t){yl=!0,Ju=t}};function j2(t,e,n,r,s,i,a,l,c){yl=!1,Ju=null,C2.apply(I2,arguments)}function A2(t,e,n,r,s,i,a,l,c){if(j2.apply(this,arguments),yl){if(yl){var d=Ju;yl=!1,Ju=null}else throw Error(H(198));Zu||(Zu=!0,Jm=d)}}function Zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sw(t){if(Zi(t)!==t)throw Error(H(188))}function k2(t){var e=t.alternate;if(!e){if(e=Zi(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sw(s),t;if(i===r)return sw(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function T1(t){return t=k2(t),t!==null?S1(t):null}function S1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S1(t);if(e!==null)return e;t=t.sibling}return null}var C1=In.unstable_scheduleCallback,iw=In.unstable_cancelCallback,R2=In.unstable_shouldYield,P2=In.unstable_requestPaint,ut=In.unstable_now,D2=In.unstable_getCurrentPriorityLevel,Lg=In.unstable_ImmediatePriority,I1=In.unstable_UserBlockingPriority,ed=In.unstable_NormalPriority,L2=In.unstable_LowPriority,j1=In.unstable_IdlePriority,th=null,yr=null;function O2(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(th,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:F2,M2=Math.log,V2=Math.LN2;function F2(t){return t>>>=0,t===0?32:31-(M2(t)/V2|0)|0}var Yc=64,Xc=4194304;function al(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function td(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=al(l):(i&=a,i!==0&&(r=al(i)))}else a=n&~s,a!==0?r=al(a):i!==0&&(r=al(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),s=1<<n,r|=t[n],e&=~s;return r}function U2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-er(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=U2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Zm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function A1(){var t=Yc;return Yc<<=1,!(Yc&4194240)&&(Yc=64),t}function Lf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function $2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-er(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Og(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ve=0;function k1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var R1,Mg,P1,D1,L1,ep=!1,Jc=[],ks=null,Rs=null,Ps=null,Ol=new Map,Ml=new Map,ws=[],z2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ow(t,e){switch(t){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":Ol.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(e.pointerId)}}function Qa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pc(e),e!==null&&Mg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function H2(t,e,n,r,s){switch(e){case"focusin":return ks=Qa(ks,t,e,n,r,s),!0;case"dragenter":return Rs=Qa(Rs,t,e,n,r,s),!0;case"mouseover":return Ps=Qa(Ps,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ol.set(i,Qa(Ol.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ml.set(i,Qa(Ml.get(i)||null,t,e,n,r,s)),!0}return!1}function O1(t){var e=Ni(t.target);if(e!==null){var n=Zi(e);if(n!==null){if(e=n.tag,e===13){if(e=N1(n),e!==null){t.blockedOn=e,L1(t.priority,function(){P1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qm=r,n.target.dispatchEvent(r),Qm=null}else return e=pc(n),e!==null&&Mg(e),t.blockedOn=n,!1;e.shift()}return!0}function aw(t,e,n){Tu(t)&&n.delete(e)}function W2(){ep=!1,ks!==null&&Tu(ks)&&(ks=null),Rs!==null&&Tu(Rs)&&(Rs=null),Ps!==null&&Tu(Ps)&&(Ps=null),Ol.forEach(aw),Ml.forEach(aw)}function Ya(t,e){t.blockedOn===e&&(t.blockedOn=null,ep||(ep=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,W2)))}function Vl(t){function e(s){return Ya(s,t)}if(0<Jc.length){Ya(Jc[0],t);for(var n=1;n<Jc.length;n++){var r=Jc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ks!==null&&Ya(ks,t),Rs!==null&&Ya(Rs,t),Ps!==null&&Ya(Ps,t),Ol.forEach(e),Ml.forEach(e),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)O1(n),n.blockedOn===null&&ws.shift()}var Po=ns.ReactCurrentBatchConfig,nd=!0;function q2(t,e,n,r){var s=Ve,i=Po.transition;Po.transition=null;try{Ve=1,Vg(t,e,n,r)}finally{Ve=s,Po.transition=i}}function G2(t,e,n,r){var s=Ve,i=Po.transition;Po.transition=null;try{Ve=4,Vg(t,e,n,r)}finally{Ve=s,Po.transition=i}}function Vg(t,e,n,r){if(nd){var s=tp(t,e,n,r);if(s===null)Wf(t,e,r,rd,n),ow(t,r);else if(H2(s,t,e,n,r))r.stopPropagation();else if(ow(t,r),e&4&&-1<z2.indexOf(t)){for(;s!==null;){var i=pc(s);if(i!==null&&R1(i),i=tp(t,e,n,r),i===null&&Wf(t,e,r,rd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wf(t,e,r,null,n)}}var rd=null;function tp(t,e,n,r){if(rd=null,t=Dg(r),t=Ni(t),t!==null)if(e=Zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=N1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rd=t,null}function M1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D2()){case Lg:return 1;case I1:return 4;case ed:case L2:return 16;case j1:return 536870912;default:return 16}default:return 16}}var Cs=null,Fg=null,Su=null;function V1(){if(Su)return Su;var t,e=Fg,n=e.length,r,s="value"in Cs?Cs.value:Cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Su=s.slice(t,1<r?1-r:void 0)}function Cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zc(){return!0}function lw(){return!1}function An(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zc:lw,this.isPropagationStopped=lw,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),e}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ug=An(pa),mc=tt({},pa,{view:0,detail:0}),K2=An(mc),Of,Mf,Xa,nh=tt({},mc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xa&&(Xa&&t.type==="mousemove"?(Of=t.screenX-Xa.screenX,Mf=t.screenY-Xa.screenY):Mf=Of=0,Xa=t),Of)},movementY:function(t){return"movementY"in t?t.movementY:Mf}}),cw=An(nh),Q2=tt({},nh,{dataTransfer:0}),Y2=An(Q2),X2=tt({},mc,{relatedTarget:0}),Vf=An(X2),J2=tt({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Z2=An(J2),ek=tt({},pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tk=An(ek),nk=tt({},pa,{data:0}),uw=An(nk),rk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ik={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ok(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ik[t])?!!e[t]:!1}function Bg(){return ok}var ak=tt({},mc,{key:function(t){if(t.key){var e=rk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bg,charCode:function(t){return t.type==="keypress"?Cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lk=An(ak),ck=tt({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dw=An(ck),uk=tt({},mc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bg}),dk=An(uk),hk=tt({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),fk=An(hk),mk=tt({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pk=An(mk),gk=[9,13,27,32],$g=Hr&&"CompositionEvent"in window,vl=null;Hr&&"documentMode"in document&&(vl=document.documentMode);var yk=Hr&&"TextEvent"in window&&!vl,F1=Hr&&(!$g||vl&&8<vl&&11>=vl),hw=" ",fw=!1;function U1(t,e){switch(t){case"keyup":return gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function vk(t,e){switch(t){case"compositionend":return B1(e);case"keypress":return e.which!==32?null:(fw=!0,hw);case"textInput":return t=e.data,t===hw&&fw?null:t;default:return null}}function xk(t,e){if(wo)return t==="compositionend"||!$g&&U1(t,e)?(t=V1(),Su=Fg=Cs=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return F1&&e.locale!=="ko"?null:e.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wk[t.type]:e==="textarea"}function $1(t,e,n,r){x1(r),e=sd(e,"onChange"),0<e.length&&(n=new Ug("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xl=null,Fl=null;function _k(t){Z1(t,0)}function rh(t){var e=Eo(t);if(h1(e))return t}function bk(t,e){if(t==="change")return e}var z1=!1;if(Hr){var Ff;if(Hr){var Uf="oninput"in document;if(!Uf){var pw=document.createElement("div");pw.setAttribute("oninput","return;"),Uf=typeof pw.oninput=="function"}Ff=Uf}else Ff=!1;z1=Ff&&(!document.documentMode||9<document.documentMode)}function gw(){xl&&(xl.detachEvent("onpropertychange",H1),Fl=xl=null)}function H1(t){if(t.propertyName==="value"&&rh(Fl)){var e=[];$1(e,Fl,t,Dg(t)),E1(_k,e)}}function Ek(t,e,n){t==="focusin"?(gw(),xl=e,Fl=n,xl.attachEvent("onpropertychange",H1)):t==="focusout"&&gw()}function Nk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rh(Fl)}function Tk(t,e){if(t==="click")return rh(e)}function Sk(t,e){if(t==="input"||t==="change")return rh(e)}function Ck(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:Ck;function Ul(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Mm.call(e,s)||!rr(t[s],e[s]))return!1}return!0}function yw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vw(t,e){var n=yw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yw(n)}}function W1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?W1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q1(){for(var t=window,e=Xu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xu(t.document)}return e}function zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ik(t){var e=q1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&W1(n.ownerDocument.documentElement,n)){if(r!==null&&zg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vw(n,i);var a=vw(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jk=Hr&&"documentMode"in document&&11>=document.documentMode,_o=null,np=null,wl=null,rp=!1;function xw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rp||_o==null||_o!==Xu(r)||(r=_o,"selectionStart"in r&&zg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wl&&Ul(wl,r)||(wl=r,r=sd(np,"onSelect"),0<r.length&&(e=new Ug("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_o)))}function eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Bf={},G1={};Hr&&(G1=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function sh(t){if(Bf[t])return Bf[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in G1)return Bf[t]=e[n];return t}var K1=sh("animationend"),Q1=sh("animationiteration"),Y1=sh("animationstart"),X1=sh("transitionend"),J1=new Map,ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(t,e){J1.set(t,e),Ji(e,[t])}for(var $f=0;$f<ww.length;$f++){var zf=ww[$f],Ak=zf.toLowerCase(),kk=zf[0].toUpperCase()+zf.slice(1);ti(Ak,"on"+kk)}ti(K1,"onAnimationEnd");ti(Q1,"onAnimationIteration");ti(Y1,"onAnimationStart");ti("dblclick","onDoubleClick");ti("focusin","onFocus");ti("focusout","onBlur");ti(X1,"onTransitionEnd");Ho("onMouseEnter",["mouseout","mouseover"]);Ho("onMouseLeave",["mouseout","mouseover"]);Ho("onPointerEnter",["pointerout","pointerover"]);Ho("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ll));function _w(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,A2(r,e,void 0,t),t.currentTarget=null}function Z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;_w(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;_w(s,l,d),i=c}}}if(Zu)throw t=Jm,Zu=!1,Jm=null,t}function Ge(t,e){var n=e[lp];n===void 0&&(n=e[lp]=new Set);var r=t+"__bubble";n.has(r)||(eE(e,t,2,!1),n.add(r))}function Hf(t,e,n){var r=0;e&&(r|=4),eE(n,t,r,e)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Bl(t){if(!t[tu]){t[tu]=!0,a1.forEach(function(n){n!=="selectionchange"&&(Rk.has(n)||Hf(n,!1,t),Hf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tu]||(e[tu]=!0,Hf("selectionchange",!1,e))}}function eE(t,e,n,r){switch(M1(e)){case 1:var s=q2;break;case 4:s=G2;break;default:s=Vg}n=s.bind(null,e,n,t),s=void 0,!Xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ni(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}E1(function(){var d=i,h=Dg(n),f=[];e:{var m=J1.get(t);if(m!==void 0){var w=Ug,C=t;switch(t){case"keypress":if(Cu(n)===0)break e;case"keydown":case"keyup":w=lk;break;case"focusin":C="focus",w=Vf;break;case"focusout":C="blur",w=Vf;break;case"beforeblur":case"afterblur":w=Vf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=cw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Y2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=dk;break;case K1:case Q1:case Y1:w=Z2;break;case X1:w=fk;break;case"scroll":w=K2;break;case"wheel":w=pk;break;case"copy":case"cut":case"paste":w=tk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=dw}var v=(e&4)!==0,x=!v&&t==="scroll",T=v?m!==null?m+"Capture":null:m;v=[];for(var _=d,S;_!==null;){S=_;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,T!==null&&(k=Ll(_,T),k!=null&&v.push($l(_,k,S)))),x)break;_=_.return}0<v.length&&(m=new w(m,C,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==Qm&&(C=n.relatedTarget||n.fromElement)&&(Ni(C)||C[Wr]))break e;if((w||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,w?(C=n.relatedTarget||n.toElement,w=d,C=C?Ni(C):null,C!==null&&(x=Zi(C),C!==x||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=d),w!==C)){if(v=cw,k="onMouseLeave",T="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=dw,k="onPointerLeave",T="onPointerEnter",_="pointer"),x=w==null?m:Eo(w),S=C==null?m:Eo(C),m=new v(k,_+"leave",w,n,h),m.target=x,m.relatedTarget=S,k=null,Ni(h)===d&&(v=new v(T,_+"enter",C,n,h),v.target=S,v.relatedTarget=x,k=v),x=k,w&&C)t:{for(v=w,T=C,_=0,S=v;S;S=co(S))_++;for(S=0,k=T;k;k=co(k))S++;for(;0<_-S;)v=co(v),_--;for(;0<S-_;)T=co(T),S--;for(;_--;){if(v===T||T!==null&&v===T.alternate)break t;v=co(v),T=co(T)}v=null}else v=null;w!==null&&bw(f,m,w,v,!1),C!==null&&x!==null&&bw(f,x,C,v,!0)}}e:{if(m=d?Eo(d):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var L=bk;else if(mw(m))if(z1)L=Sk;else{L=Nk;var A=Ek}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=Tk);if(L&&(L=L(t,d))){$1(f,L,n,h);break e}A&&A(t,m,d),t==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&Hm(m,"number",m.value)}switch(A=d?Eo(d):window,t){case"focusin":(mw(A)||A.contentEditable==="true")&&(_o=A,np=d,wl=null);break;case"focusout":wl=np=_o=null;break;case"mousedown":rp=!0;break;case"contextmenu":case"mouseup":case"dragend":rp=!1,xw(f,n,h);break;case"selectionchange":if(jk)break;case"keydown":case"keyup":xw(f,n,h)}var E;if($g)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else wo?U1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(F1&&n.locale!=="ko"&&(wo||y!=="onCompositionStart"?y==="onCompositionEnd"&&wo&&(E=V1()):(Cs=h,Fg="value"in Cs?Cs.value:Cs.textContent,wo=!0)),A=sd(d,y),0<A.length&&(y=new uw(y,t,null,n,h),f.push({event:y,listeners:A}),E?y.data=E:(E=B1(n),E!==null&&(y.data=E)))),(E=yk?vk(t,n):xk(t,n))&&(d=sd(d,"onBeforeInput"),0<d.length&&(h=new uw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=E))}Z1(f,e)})}function $l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ll(t,n),i!=null&&r.unshift($l(t,i,s)),i=Ll(t,e),i!=null&&r.push($l(t,i,s))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function bw(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ll(n,i),c!=null&&a.unshift($l(n,c,l))):s||(c=Ll(n,i),c!=null&&a.push($l(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Pk=/\r\n?/g,Dk=/\u0000|\uFFFD/g;function Ew(t){return(typeof t=="string"?t:""+t).replace(Pk,`
`).replace(Dk,"")}function nu(t,e,n){if(e=Ew(e),Ew(t)!==e&&n)throw Error(H(425))}function id(){}var sp=null,ip=null;function op(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ap=typeof setTimeout=="function"?setTimeout:void 0,Lk=typeof clearTimeout=="function"?clearTimeout:void 0,Nw=typeof Promise=="function"?Promise:void 0,Ok=typeof queueMicrotask=="function"?queueMicrotask:typeof Nw<"u"?function(t){return Nw.resolve(null).then(t).catch(Mk)}:ap;function Mk(t){setTimeout(function(){throw t})}function qf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vl(e)}function Ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ga=Math.random().toString(36).slice(2),fr="__reactFiber$"+ga,zl="__reactProps$"+ga,Wr="__reactContainer$"+ga,lp="__reactEvents$"+ga,Vk="__reactListeners$"+ga,Fk="__reactHandles$"+ga;function Ni(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tw(t);t!==null;){if(n=t[fr])return n;t=Tw(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[fr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function ih(t){return t[zl]||null}var cp=[],No=-1;function ni(t){return{current:t}}function Qe(t){0>No||(t.current=cp[No],cp[No]=null,No--)}function He(t,e){No++,cp[No]=t.current,t.current=e}var Ws={},qt=ni(Ws),fn=ni(!1),Li=Ws;function Wo(t,e){var n=t.type.contextTypes;if(!n)return Ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function od(){Qe(fn),Qe(qt)}function Sw(t,e,n){if(qt.current!==Ws)throw Error(H(168));He(qt,e),He(fn,n)}function tE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,E2(t)||"Unknown",s));return tt({},n,r)}function ad(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ws,Li=qt.current,He(qt,t),He(fn,fn.current),!0}function Cw(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=tE(t,e,Li),r.__reactInternalMemoizedMergedChildContext=t,Qe(fn),Qe(qt),He(qt,t)):Qe(fn),He(fn,n)}var Dr=null,oh=!1,Gf=!1;function nE(t){Dr===null?Dr=[t]:Dr.push(t)}function Uk(t){oh=!0,nE(t)}function ri(){if(!Gf&&Dr!==null){Gf=!0;var t=0,e=Ve;try{var n=Dr;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,oh=!1}catch(s){throw Dr!==null&&(Dr=Dr.slice(t+1)),C1(Lg,ri),s}finally{Ve=e,Gf=!1}}return null}var To=[],So=0,ld=null,cd=0,kn=[],Rn=0,Oi=null,Mr=1,Vr="";function wi(t,e){To[So++]=cd,To[So++]=ld,ld=t,cd=e}function rE(t,e,n){kn[Rn++]=Mr,kn[Rn++]=Vr,kn[Rn++]=Oi,Oi=t;var r=Mr;t=Vr;var s=32-er(r)-1;r&=~(1<<s),n+=1;var i=32-er(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Mr=1<<32-er(e)+s|n<<s|r,Vr=i+t}else Mr=1<<i|n<<s|r,Vr=t}function Hg(t){t.return!==null&&(wi(t,1),rE(t,1,0))}function Wg(t){for(;t===ld;)ld=To[--So],To[So]=null,cd=To[--So],To[So]=null;for(;t===Oi;)Oi=kn[--Rn],kn[Rn]=null,Vr=kn[--Rn],kn[Rn]=null,Mr=kn[--Rn],kn[Rn]=null}var Nn=null,_n=null,Ye=!1,Yn=null;function sE(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Iw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nn=t,_n=Ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oi!==null?{id:Mr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nn=t,_n=null,!0):!1;default:return!1}}function up(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dp(t){if(Ye){var e=_n;if(e){var n=e;if(!Iw(t,e)){if(up(t))throw Error(H(418));e=Ds(n.nextSibling);var r=Nn;e&&Iw(t,e)?sE(r,n):(t.flags=t.flags&-4097|2,Ye=!1,Nn=t)}}else{if(up(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ye=!1,Nn=t}}}function jw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nn=t}function ru(t){if(t!==Nn)return!1;if(!Ye)return jw(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!op(t.type,t.memoizedProps)),e&&(e=_n)){if(up(t))throw iE(),Error(H(418));for(;e;)sE(t,e),e=Ds(e.nextSibling)}if(jw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=Ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=Nn?Ds(t.stateNode.nextSibling):null;return!0}function iE(){for(var t=_n;t;)t=Ds(t.nextSibling)}function qo(){_n=Nn=null,Ye=!1}function qg(t){Yn===null?Yn=[t]:Yn.push(t)}var Bk=ns.ReactCurrentBatchConfig;function Ja(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function su(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Aw(t){var e=t._init;return e(t._payload)}function oE(t){function e(T,_){if(t){var S=T.deletions;S===null?(T.deletions=[_],T.flags|=16):S.push(_)}}function n(T,_){if(!t)return null;for(;_!==null;)e(T,_),_=_.sibling;return null}function r(T,_){for(T=new Map;_!==null;)_.key!==null?T.set(_.key,_):T.set(_.index,_),_=_.sibling;return T}function s(T,_){return T=Vs(T,_),T.index=0,T.sibling=null,T}function i(T,_,S){return T.index=S,t?(S=T.alternate,S!==null?(S=S.index,S<_?(T.flags|=2,_):S):(T.flags|=2,_)):(T.flags|=1048576,_)}function a(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,_,S,k){return _===null||_.tag!==6?(_=em(S,T.mode,k),_.return=T,_):(_=s(_,S),_.return=T,_)}function c(T,_,S,k){var L=S.type;return L===xo?h(T,_,S.props.children,k,S.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vs&&Aw(L)===_.type)?(k=s(_,S.props),k.ref=Ja(T,_,S),k.return=T,k):(k=Du(S.type,S.key,S.props,null,T.mode,k),k.ref=Ja(T,_,S),k.return=T,k)}function d(T,_,S,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=tm(S,T.mode,k),_.return=T,_):(_=s(_,S.children||[]),_.return=T,_)}function h(T,_,S,k,L){return _===null||_.tag!==7?(_=ki(S,T.mode,k,L),_.return=T,_):(_=s(_,S),_.return=T,_)}function f(T,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=em(""+_,T.mode,S),_.return=T,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gc:return S=Du(_.type,_.key,_.props,null,T.mode,S),S.ref=Ja(T,null,_),S.return=T,S;case vo:return _=tm(_,T.mode,S),_.return=T,_;case vs:var k=_._init;return f(T,k(_._payload),S)}if(ol(_)||Ga(_))return _=ki(_,T.mode,S,null),_.return=T,_;su(T,_)}return null}function m(T,_,S,k){var L=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(T,_,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Gc:return S.key===L?c(T,_,S,k):null;case vo:return S.key===L?d(T,_,S,k):null;case vs:return L=S._init,m(T,_,L(S._payload),k)}if(ol(S)||Ga(S))return L!==null?null:h(T,_,S,k,null);su(T,S)}return null}function w(T,_,S,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return T=T.get(S)||null,l(_,T,""+k,L);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Gc:return T=T.get(k.key===null?S:k.key)||null,c(_,T,k,L);case vo:return T=T.get(k.key===null?S:k.key)||null,d(_,T,k,L);case vs:var A=k._init;return w(T,_,S,A(k._payload),L)}if(ol(k)||Ga(k))return T=T.get(S)||null,h(_,T,k,L,null);su(_,k)}return null}function C(T,_,S,k){for(var L=null,A=null,E=_,y=_=0,I=null;E!==null&&y<S.length;y++){E.index>y?(I=E,E=null):I=E.sibling;var N=m(T,E,S[y],k);if(N===null){E===null&&(E=I);break}t&&E&&N.alternate===null&&e(T,E),_=i(N,_,y),A===null?L=N:A.sibling=N,A=N,E=I}if(y===S.length)return n(T,E),Ye&&wi(T,y),L;if(E===null){for(;y<S.length;y++)E=f(T,S[y],k),E!==null&&(_=i(E,_,y),A===null?L=E:A.sibling=E,A=E);return Ye&&wi(T,y),L}for(E=r(T,E);y<S.length;y++)I=w(E,T,y,S[y],k),I!==null&&(t&&I.alternate!==null&&E.delete(I.key===null?y:I.key),_=i(I,_,y),A===null?L=I:A.sibling=I,A=I);return t&&E.forEach(function(R){return e(T,R)}),Ye&&wi(T,y),L}function v(T,_,S,k){var L=Ga(S);if(typeof L!="function")throw Error(H(150));if(S=L.call(S),S==null)throw Error(H(151));for(var A=L=null,E=_,y=_=0,I=null,N=S.next();E!==null&&!N.done;y++,N=S.next()){E.index>y?(I=E,E=null):I=E.sibling;var R=m(T,E,N.value,k);if(R===null){E===null&&(E=I);break}t&&E&&R.alternate===null&&e(T,E),_=i(R,_,y),A===null?L=R:A.sibling=R,A=R,E=I}if(N.done)return n(T,E),Ye&&wi(T,y),L;if(E===null){for(;!N.done;y++,N=S.next())N=f(T,N.value,k),N!==null&&(_=i(N,_,y),A===null?L=N:A.sibling=N,A=N);return Ye&&wi(T,y),L}for(E=r(T,E);!N.done;y++,N=S.next())N=w(E,T,y,N.value,k),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?y:N.key),_=i(N,_,y),A===null?L=N:A.sibling=N,A=N);return t&&E.forEach(function(j){return e(T,j)}),Ye&&wi(T,y),L}function x(T,_,S,k){if(typeof S=="object"&&S!==null&&S.type===xo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Gc:e:{for(var L=S.key,A=_;A!==null;){if(A.key===L){if(L=S.type,L===xo){if(A.tag===7){n(T,A.sibling),_=s(A,S.props.children),_.return=T,T=_;break e}}else if(A.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vs&&Aw(L)===A.type){n(T,A.sibling),_=s(A,S.props),_.ref=Ja(T,A,S),_.return=T,T=_;break e}n(T,A);break}else e(T,A);A=A.sibling}S.type===xo?(_=ki(S.props.children,T.mode,k,S.key),_.return=T,T=_):(k=Du(S.type,S.key,S.props,null,T.mode,k),k.ref=Ja(T,_,S),k.return=T,T=k)}return a(T);case vo:e:{for(A=S.key;_!==null;){if(_.key===A)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(T,_.sibling),_=s(_,S.children||[]),_.return=T,T=_;break e}else{n(T,_);break}else e(T,_);_=_.sibling}_=tm(S,T.mode,k),_.return=T,T=_}return a(T);case vs:return A=S._init,x(T,_,A(S._payload),k)}if(ol(S))return C(T,_,S,k);if(Ga(S))return v(T,_,S,k);su(T,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(T,_.sibling),_=s(_,S),_.return=T,T=_):(n(T,_),_=em(S,T.mode,k),_.return=T,T=_),a(T)):n(T,_)}return x}var Go=oE(!0),aE=oE(!1),ud=ni(null),dd=null,Co=null,Gg=null;function Kg(){Gg=Co=dd=null}function Qg(t){var e=ud.current;Qe(ud),t._currentValue=e}function hp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){dd=t,Gg=Co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Gg!==t)if(t={context:t,memoizedValue:e,next:null},Co===null){if(dd===null)throw Error(H(308));Co=t,dd.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return e}var Ti=null;function Yg(t){Ti===null?Ti=[t]:Ti.push(t)}function lE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yg(e)):(n.next=s.next,s.next=n),e.interleaved=n,qr(t,r)}function qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xs=!1;function Xg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ls(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qr(t,n)}return s=r.interleaved,s===null?(e.next=e,Yg(r)):(e.next=s.next,s.next=e),r.interleaved=e,qr(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Og(t,n)}}function kw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hd(t,e,n,r){var s=t.updateQueue;xs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,w=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,v=l;switch(m=e,w=n,v.tag){case 1:if(C=v.payload,typeof C=="function"){f=C.call(w,f,m);break e}f=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=v.payload,m=typeof C=="function"?C.call(w,f,m):C,m==null)break e;f=tt({},f,m);break e;case 2:xs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else w={eventTime:w,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=w,c=f):h=h.next=w,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vi|=a,t.lanes=a,t.memoizedState=f}}function Rw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var gc={},vr=ni(gc),Hl=ni(gc),Wl=ni(gc);function Si(t){if(t===gc)throw Error(H(174));return t}function Jg(t,e){switch(He(Wl,e),He(Hl,t),He(vr,gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qm(e,t)}Qe(vr),He(vr,e)}function Ko(){Qe(vr),Qe(Hl),Qe(Wl)}function uE(t){Si(Wl.current);var e=Si(vr.current),n=qm(e,t.type);e!==n&&(He(Hl,t),He(vr,n))}function Zg(t){Hl.current===t&&(Qe(vr),Qe(Hl))}var Ze=ni(0);function fd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kf=[];function ey(){for(var t=0;t<Kf.length;t++)Kf[t]._workInProgressVersionPrimary=null;Kf.length=0}var ju=ns.ReactCurrentDispatcher,Qf=ns.ReactCurrentBatchConfig,Mi=0,et=null,xt=null,Tt=null,md=!1,_l=!1,ql=0,$k=0;function Mt(){throw Error(H(321))}function ty(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function ny(t,e,n,r,s,i){if(Mi=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ju.current=t===null||t.memoizedState===null?qk:Gk,t=n(r,s),_l){i=0;do{if(_l=!1,ql=0,25<=i)throw Error(H(301));i+=1,Tt=xt=null,e.updateQueue=null,ju.current=Kk,t=n(r,s)}while(_l)}if(ju.current=pd,e=xt!==null&&xt.next!==null,Mi=0,Tt=xt=et=null,md=!1,e)throw Error(H(300));return t}function ry(){var t=ql!==0;return ql=0,t}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?et.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Un(){if(xt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Tt===null?et.memoizedState:Tt.next;if(e!==null)Tt=e,xt=t;else{if(t===null)throw Error(H(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Tt===null?et.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Gl(t,e){return typeof e=="function"?e(t):e}function Yf(t){var e=Un(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=xt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Mi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,et.lanes|=h,Vi|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,rr(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,et.lanes|=i,Vi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xf(t){var e=Un(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);rr(i,e.memoizedState)||(hn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function dE(){}function hE(t,e){var n=et,r=Un(),s=e(),i=!rr(r.memoizedState,s);if(i&&(r.memoizedState=s,hn=!0),r=r.queue,sy(pE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Kl(9,mE.bind(null,n,r,s,e),void 0,null),St===null)throw Error(H(349));Mi&30||fE(n,e,s)}return s}function fE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mE(t,e,n,r){e.value=n,e.getSnapshot=r,gE(e)&&yE(t)}function pE(t,e,n){return n(function(){gE(e)&&yE(t)})}function gE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function yE(t){var e=qr(t,1);e!==null&&tr(e,t,1,-1)}function Pw(t){var e=dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:t},e.queue=t,t=t.dispatch=Wk.bind(null,et,t),[e.memoizedState,t]}function Kl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vE(){return Un().memoizedState}function Au(t,e,n,r){var s=dr();et.flags|=t,s.memoizedState=Kl(1|e,n,void 0,r===void 0?null:r)}function ah(t,e,n,r){var s=Un();r=r===void 0?null:r;var i=void 0;if(xt!==null){var a=xt.memoizedState;if(i=a.destroy,r!==null&&ty(r,a.deps)){s.memoizedState=Kl(e,n,i,r);return}}et.flags|=t,s.memoizedState=Kl(1|e,n,i,r)}function Dw(t,e){return Au(8390656,8,t,e)}function sy(t,e){return ah(2048,8,t,e)}function xE(t,e){return ah(4,2,t,e)}function wE(t,e){return ah(4,4,t,e)}function _E(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bE(t,e,n){return n=n!=null?n.concat([t]):null,ah(4,4,_E.bind(null,e,t),n)}function iy(){}function EE(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ty(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NE(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ty(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function TE(t,e,n){return Mi&21?(rr(n,e)||(n=A1(),et.lanes|=n,Vi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function zk(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Qf.transition;Qf.transition={};try{t(!1),e()}finally{Ve=n,Qf.transition=r}}function SE(){return Un().memoizedState}function Hk(t,e,n){var r=Ms(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CE(t))IE(e,n);else if(n=lE(t,e,n,r),n!==null){var s=en();tr(n,t,r,s),jE(n,e,r)}}function Wk(t,e,n){var r=Ms(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CE(t))IE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,rr(l,a)){var c=e.interleaved;c===null?(s.next=s,Yg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=lE(t,e,s,r),n!==null&&(s=en(),tr(n,t,r,s),jE(n,e,r))}}function CE(t){var e=t.alternate;return t===et||e!==null&&e===et}function IE(t,e){_l=md=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Og(t,n)}}var pd={readContext:Fn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},qk={readContext:Fn,useCallback:function(t,e){return dr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:Dw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Au(4194308,4,_E.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Au(4194308,4,t,e)},useInsertionEffect:function(t,e){return Au(4,2,t,e)},useMemo:function(t,e){var n=dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Hk.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=dr();return t={current:t},e.memoizedState=t},useState:Pw,useDebugValue:iy,useDeferredValue:function(t){return dr().memoizedState=t},useTransition:function(){var t=Pw(!1),e=t[0];return t=zk.bind(null,t[1]),dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,s=dr();if(Ye){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),St===null)throw Error(H(349));Mi&30||fE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Dw(pE.bind(null,r,i,t),[t]),r.flags|=2048,Kl(9,mE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dr(),e=St.identifierPrefix;if(Ye){var n=Vr,r=Mr;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ql++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$k++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gk={readContext:Fn,useCallback:EE,useContext:Fn,useEffect:sy,useImperativeHandle:bE,useInsertionEffect:xE,useLayoutEffect:wE,useMemo:NE,useReducer:Yf,useRef:vE,useState:function(){return Yf(Gl)},useDebugValue:iy,useDeferredValue:function(t){var e=Un();return TE(e,xt.memoizedState,t)},useTransition:function(){var t=Yf(Gl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:dE,useSyncExternalStore:hE,useId:SE,unstable_isNewReconciler:!1},Kk={readContext:Fn,useCallback:EE,useContext:Fn,useEffect:sy,useImperativeHandle:bE,useInsertionEffect:xE,useLayoutEffect:wE,useMemo:NE,useReducer:Xf,useRef:vE,useState:function(){return Xf(Gl)},useDebugValue:iy,useDeferredValue:function(t){var e=Un();return xt===null?e.memoizedState=t:TE(e,xt.memoizedState,t)},useTransition:function(){var t=Xf(Gl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:dE,useSyncExternalStore:hE,useId:SE,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lh={isMounted:function(t){return(t=t._reactInternals)?Zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),s=Ms(t),i=$r(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ls(t,i,s),e!==null&&(tr(e,t,s,r),Iu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),s=Ms(t),i=$r(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ls(t,i,s),e!==null&&(tr(e,t,s,r),Iu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=Ms(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ls(t,s,r),e!==null&&(tr(e,t,r,n),Iu(e,t,r))}};function Lw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ul(n,r)||!Ul(s,i):!0}function AE(t,e,n){var r=!1,s=Ws,i=e.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=mn(e)?Li:qt.current,r=e.contextTypes,i=(r=r!=null)?Wo(t,s):Ws),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ow(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lh.enqueueReplaceState(e,e.state,null)}function mp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=mn(e)?Li:qt.current,s.context=Wo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(fp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lh.enqueueReplaceState(s,s.state,null),hd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Qo(t,e){try{var n="",r=e;do n+=b2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qk=typeof WeakMap=="function"?WeakMap:Map;function kE(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yd||(yd=!0,Tp=r),pp(t,e)},n}function RE(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){pp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){pp(t,e),typeof r!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Mw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Qk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cR.bind(null,t,e,n),e.then(t,t))}function Vw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,Ls(n,e,1))),n.lanes|=1),t)}var Yk=ns.ReactCurrentOwner,hn=!1;function Xt(t,e,n,r){e.child=t===null?aE(e,null,n,r):Go(e,t.child,n,r)}function Uw(t,e,n,r,s){n=n.render;var i=e.ref;return Do(e,s),r=ny(t,e,n,r,i,s),n=ry(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Ye&&n&&Hg(e),e.flags|=1,Xt(t,e,r,s),e.child)}function Bw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!fy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,PE(t,e,i,r,s)):(t=Du(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ul,n(a,r)&&t.ref===e.ref)return Gr(t,e,s)}return e.flags|=1,t=Vs(i,r),t.ref=e.ref,t.return=e,e.child=t}function PE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ul(i,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,Gr(t,e,s)}return gp(t,e,n,r,s)}function DE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(jo,xn),xn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(jo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He(jo,xn),xn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,He(jo,xn),xn|=r;return Xt(t,e,s,n),e.child}function LE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gp(t,e,n,r,s){var i=mn(n)?Li:qt.current;return i=Wo(e,i),Do(e,s),n=ny(t,e,n,r,i,s),r=ry(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Ye&&r&&Hg(e),e.flags|=1,Xt(t,e,n,s),e.child)}function $w(t,e,n,r,s){if(mn(n)){var i=!0;ad(e)}else i=!1;if(Do(e,s),e.stateNode===null)ku(t,e),AE(e,n,r),mp(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Fn(d):(d=mn(n)?Li:qt.current,d=Wo(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Ow(e,a,r,d),xs=!1;var m=e.memoizedState;a.state=m,hd(e,r,a,s),c=e.memoizedState,l!==r||m!==c||fn.current||xs?(typeof h=="function"&&(fp(e,n,h,r),c=e.memoizedState),(l=xs||Lw(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,cE(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Kn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Fn(c):(c=mn(n)?Li:qt.current,c=Wo(e,c));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Ow(e,a,r,c),xs=!1,m=e.memoizedState,a.state=m,hd(e,r,a,s);var C=e.memoizedState;l!==f||m!==C||fn.current||xs?(typeof w=="function"&&(fp(e,n,w,r),C=e.memoizedState),(d=xs||Lw(e,n,d,r,m,C,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return yp(t,e,n,r,i,s)}function yp(t,e,n,r,s,i){LE(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Cw(e,n,!1),Gr(t,e,i);r=e.stateNode,Yk.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Go(e,t.child,null,i),e.child=Go(e,null,l,i)):Xt(t,e,l,i),e.memoizedState=r.state,s&&Cw(e,n,!0),e.child}function OE(t){var e=t.stateNode;e.pendingContext?Sw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sw(t,e.context,!1),Jg(t,e.containerInfo)}function zw(t,e,n,r,s){return qo(),qg(s),e.flags|=256,Xt(t,e,n,r),e.child}var vp={dehydrated:null,treeContext:null,retryLane:0};function xp(t){return{baseLanes:t,cachePool:null,transitions:null}}function ME(t,e,n){var r=e.pendingProps,s=Ze.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(Ze,s&1),t===null)return dp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=dh(a,r,0,null),t=ki(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=xp(n),e.memoizedState=vp,t):oy(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Xk(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Vs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Vs(l,i):(i=ki(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?xp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=vp,r}return i=t.child,t=i.sibling,r=Vs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function oy(t,e){return e=dh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function iu(t,e,n,r){return r!==null&&qg(r),Go(e,t.child,null,n),t=oy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xk(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Jf(Error(H(422))),iu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=dh({mode:"visible",children:r.children},s,0,null),i=ki(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Go(e,t.child,null,a),e.child.memoizedState=xp(a),e.memoizedState=vp,i);if(!(e.mode&1))return iu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=Jf(i,r,void 0),iu(t,e,a,r)}if(l=(a&t.childLanes)!==0,hn||l){if(r=St,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qr(t,s),tr(r,t,s,-1))}return hy(),r=Jf(Error(H(421))),iu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=uR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,_n=Ds(s.nextSibling),Nn=e,Ye=!0,Yn=null,t!==null&&(kn[Rn++]=Mr,kn[Rn++]=Vr,kn[Rn++]=Oi,Mr=t.id,Vr=t.overflow,Oi=e),e=oy(e,r.children),e.flags|=4096,e)}function Hw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hp(t.return,e,n)}function Zf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function VE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Xt(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hw(t,n,e);else if(t.tag===19)Hw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zf(e,!0,n,null,i);break;case"together":Zf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ku(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Jk(t,e,n){switch(e.tag){case 3:OE(e),qo();break;case 5:uE(e);break;case 1:mn(e.type)&&ad(e);break;case 4:Jg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;He(ud,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?ME(t,e,n):(He(Ze,Ze.current&1),t=Gr(t,e,n),t!==null?t.sibling:null);He(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return VE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,DE(t,e,n)}return Gr(t,e,n)}var FE,wp,UE,BE;FE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wp=function(){};UE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Si(vr.current);var i=null;switch(n){case"input":s=$m(t,s),r=$m(t,r),i=[];break;case"select":s=tt({},s,{value:void 0}),r=tt({},r,{value:void 0}),i=[];break;case"textarea":s=Wm(t,s),r=Wm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=id)}Gm(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Pl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Pl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ge("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};BE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Za(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zk(t,e,n){var r=e.pendingProps;switch(Wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return mn(e.type)&&od(),Vt(e),null;case 3:return r=e.stateNode,Ko(),Qe(fn),Qe(qt),ey(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(Ip(Yn),Yn=null))),wp(t,e),Vt(e),null;case 5:Zg(e);var s=Si(Wl.current);if(n=e.type,t!==null&&e.stateNode!=null)UE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Vt(e),null}if(t=Si(vr.current),ru(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fr]=e,r[zl]=i,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(s=0;s<ll.length;s++)Ge(ll[s],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Zx(r,i),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",r);break;case"textarea":tw(r,i),Ge("invalid",r)}Gm(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),s=["children",""+l]):Pl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Kc(r),ew(r,i,!0);break;case"textarea":Kc(r),nw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=id)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=p1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[fr]=e,t[zl]=r,FE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Km(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),s=r;break;case"iframe":case"object":case"embed":Ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<ll.length;s++)Ge(ll[s],t);s=r;break;case"source":Ge("error",t),s=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=r;break;case"details":Ge("toggle",t),s=r;break;case"input":Zx(t,r),s=$m(t,r),Ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=tt({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":tw(t,r),s=Wm(t,r),Ge("invalid",t);break;default:s=r}Gm(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?v1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&g1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Dl(t,c):typeof c=="number"&&Dl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",t):c!=null&&Ag(t,i,c,a))}switch(n){case"input":Kc(t),ew(t,r,!1);break;case"textarea":Kc(t),nw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ao(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ao(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=id)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)BE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Si(Wl.current),Si(vr.current),ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[fr]=e,(i=r.nodeValue!==n)&&(t=Nn,t!==null))switch(t.tag){case 3:nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fr]=e,e.stateNode=r}return Vt(e),null;case 13:if(Qe(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&_n!==null&&e.mode&1&&!(e.flags&128))iE(),qo(),e.flags|=98560,i=!1;else if(i=ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[fr]=e}else qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),i=!1}else Yn!==null&&(Ip(Yn),Yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?wt===0&&(wt=3):hy())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Ko(),wp(t,e),t===null&&Bl(e.stateNode.containerInfo),Vt(e),null;case 10:return Qg(e.type._context),Vt(e),null;case 17:return mn(e.type)&&od(),Vt(e),null;case 19:if(Qe(Ze),i=e.memoizedState,i===null)return Vt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Za(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=fd(t),a!==null){for(e.flags|=128,Za(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Ze,Ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&ut()>Yo&&(e.flags|=128,r=!0,Za(i,!1),e.lanes=4194304)}else{if(!r)if(t=fd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Za(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ye)return Vt(e),null}else 2*ut()-i.renderingStartTime>Yo&&n!==1073741824&&(e.flags|=128,r=!0,Za(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ut(),e.sibling=null,n=Ze.current,He(Ze,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return dy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function eR(t,e){switch(Wg(e),e.tag){case 1:return mn(e.type)&&od(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ko(),Qe(fn),Qe(qt),ey(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zg(e),null;case 13:if(Qe(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(Ze),null;case 4:return Ko(),null;case 10:return Qg(e.type._context),null;case 22:case 23:return dy(),null;case 24:return null;default:return null}}var ou=!1,Bt=!1,tR=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function _p(t,e,n){try{n()}catch(r){st(t,e,r)}}var Ww=!1;function nR(t,e){if(sp=nd,t=q1(),zg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var w;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(w=f.firstChild)!==null;)m=f,f=w;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(w=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=w}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ip={focusedElem:t,selectionRange:n},nd=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var v=C.memoizedProps,x=C.memoizedState,T=e.stateNode,_=T.getSnapshotBeforeUpdate(e.elementType===e.type?v:Kn(e.type,v),x);T.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(k){st(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return C=Ww,Ww=!1,C}function bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&_p(e,n,i)}s=s.next}while(s!==r)}}function ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $E(t){var e=t.alternate;e!==null&&(t.alternate=null,$E(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[zl],delete e[lp],delete e[Vk],delete e[Fk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zE(t){return t.tag===5||t.tag===3||t.tag===4}function qw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ep(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=id));else if(r!==4&&(t=t.child,t!==null))for(Ep(t,e,n),t=t.sibling;t!==null;)Ep(t,e,n),t=t.sibling}function Np(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Np(t,e,n),t=t.sibling;t!==null;)Np(t,e,n),t=t.sibling}var jt=null,Qn=!1;function hs(t,e,n){for(n=n.child;n!==null;)HE(t,e,n),n=n.sibling}function HE(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(th,n)}catch{}switch(n.tag){case 5:Bt||Io(n,e);case 6:var r=jt,s=Qn;jt=null,hs(t,e,n),jt=r,Qn=s,jt!==null&&(Qn?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Qn?(t=jt,n=n.stateNode,t.nodeType===8?qf(t.parentNode,n):t.nodeType===1&&qf(t,n),Vl(t)):qf(jt,n.stateNode));break;case 4:r=jt,s=Qn,jt=n.stateNode.containerInfo,Qn=!0,hs(t,e,n),jt=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&_p(n,e,a),s=s.next}while(s!==r)}hs(t,e,n);break;case 1:if(!Bt&&(Io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){st(n,e,l)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,hs(t,e,n),Bt=r):hs(t,e,n);break;default:hs(t,e,n)}}function Gw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tR),e.forEach(function(r){var s=dR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,Qn=!1;break e;case 3:jt=l.stateNode.containerInfo,Qn=!0;break e;case 4:jt=l.stateNode.containerInfo,Qn=!0;break e}l=l.return}if(jt===null)throw Error(H(160));HE(i,a,s),jt=null,Qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){st(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)WE(e,t),e=e.sibling}function WE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),ur(t),r&4){try{bl(3,t,t.return),ch(3,t)}catch(v){st(t,t.return,v)}try{bl(5,t,t.return)}catch(v){st(t,t.return,v)}}break;case 1:qn(e,t),ur(t),r&512&&n!==null&&Io(n,n.return);break;case 5:if(qn(e,t),ur(t),r&512&&n!==null&&Io(n,n.return),t.flags&32){var s=t.stateNode;try{Dl(s,"")}catch(v){st(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&f1(s,i),Km(l,a);var d=Km(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?v1(s,f):h==="dangerouslySetInnerHTML"?g1(s,f):h==="children"?Dl(s,f):Ag(s,h,f,d)}switch(l){case"input":zm(s,i);break;case"textarea":m1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Ao(s,!!i.multiple,w,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ao(s,!!i.multiple,i.defaultValue,!0):Ao(s,!!i.multiple,i.multiple?[]:"",!1))}s[zl]=i}catch(v){st(t,t.return,v)}}break;case 6:if(qn(e,t),ur(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){st(t,t.return,v)}}break;case 3:if(qn(e,t),ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vl(e.containerInfo)}catch(v){st(t,t.return,v)}break;case 4:qn(e,t),ur(t);break;case 13:qn(e,t),ur(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cy=ut())),r&4&&Gw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(d=Bt)||h,qn(e,t),Bt=d):qn(e,t),ur(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ie=t,h=t.child;h!==null;){for(f=ie=h;ie!==null;){switch(m=ie,w=m.child,m.tag){case 0:case 11:case 14:case 15:bl(4,m,m.return);break;case 1:Io(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(v){st(r,n,v)}}break;case 5:Io(m,m.return);break;case 22:if(m.memoizedState!==null){Qw(f);continue}}w!==null?(w.return=m,ie=w):Qw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=y1("display",a))}catch(v){st(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){st(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),ur(t),r&4&&Gw(t);break;case 21:break;default:qn(e,t),ur(t)}}function ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zE(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Dl(s,""),r.flags&=-33);var i=qw(t);Np(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=qw(t);Ep(t,l,a);break;default:throw Error(H(161))}}catch(c){st(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rR(t,e,n){ie=t,qE(t)}function qE(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ou;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Bt;l=ou;var d=Bt;if(ou=a,(Bt=c)&&!d)for(ie=s;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?Yw(s):c!==null?(c.return=a,ie=c):Yw(s);for(;i!==null;)ie=i,qE(i),i=i.sibling;ie=s,ou=l,Bt=d}Kw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):Kw(t)}}function Kw(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||ch(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Rw(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rw(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Vl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Bt||e.flags&512&&bp(e)}catch(m){st(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Qw(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Yw(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ch(4,e)}catch(c){st(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){st(e,s,c)}}var i=e.return;try{bp(e)}catch(c){st(e,i,c)}break;case 5:var a=e.return;try{bp(e)}catch(c){st(e,a,c)}}}catch(c){st(e,e.return,c)}if(e===t){ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ie=l;break}ie=e.return}}var sR=Math.ceil,gd=ns.ReactCurrentDispatcher,ay=ns.ReactCurrentOwner,Ln=ns.ReactCurrentBatchConfig,ke=0,St=null,mt=null,Pt=0,xn=0,jo=ni(0),wt=0,Ql=null,Vi=0,uh=0,ly=0,El=null,ln=null,cy=0,Yo=1/0,Pr=null,yd=!1,Tp=null,Os=null,au=!1,Is=null,vd=0,Nl=0,Sp=null,Ru=-1,Pu=0;function en(){return ke&6?ut():Ru!==-1?Ru:Ru=ut()}function Ms(t){return t.mode&1?ke&2&&Pt!==0?Pt&-Pt:Bk.transition!==null?(Pu===0&&(Pu=A1()),Pu):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:M1(t.type)),t):1}function tr(t,e,n,r){if(50<Nl)throw Nl=0,Sp=null,Error(H(185));fc(t,n,r),(!(ke&2)||t!==St)&&(t===St&&(!(ke&2)&&(uh|=n),wt===4&&_s(t,Pt)),pn(t,r),n===1&&ke===0&&!(e.mode&1)&&(Yo=ut()+500,oh&&ri()))}function pn(t,e){var n=t.callbackNode;B2(t,e);var r=td(t,t===St?Pt:0);if(r===0)n!==null&&iw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iw(n),e===1)t.tag===0?Uk(Xw.bind(null,t)):nE(Xw.bind(null,t)),Ok(function(){!(ke&6)&&ri()}),n=null;else{switch(k1(r)){case 1:n=Lg;break;case 4:n=I1;break;case 16:n=ed;break;case 536870912:n=j1;break;default:n=ed}n=eN(n,GE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function GE(t,e){if(Ru=-1,Pu=0,ke&6)throw Error(H(327));var n=t.callbackNode;if(Lo()&&t.callbackNode!==n)return null;var r=td(t,t===St?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xd(t,r);else{e=r;var s=ke;ke|=2;var i=QE();(St!==t||Pt!==e)&&(Pr=null,Yo=ut()+500,Ai(t,e));do try{aR();break}catch(l){KE(t,l)}while(!0);Kg(),gd.current=i,ke=s,mt!==null?e=0:(St=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=Zm(t),s!==0&&(r=s,e=Cp(t,s))),e===1)throw n=Ql,Ai(t,0),_s(t,r),pn(t,ut()),n;if(e===6)_s(t,r);else{if(s=t.current.alternate,!(r&30)&&!iR(s)&&(e=xd(t,r),e===2&&(i=Zm(t),i!==0&&(r=i,e=Cp(t,i))),e===1))throw n=Ql,Ai(t,0),_s(t,r),pn(t,ut()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:_i(t,ln,Pr);break;case 3:if(_s(t,r),(r&130023424)===r&&(e=cy+500-ut(),10<e)){if(td(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ap(_i.bind(null,t,ln,Pr),e);break}_i(t,ln,Pr);break;case 4:if(_s(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-er(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sR(r/1960))-r,10<r){t.timeoutHandle=ap(_i.bind(null,t,ln,Pr),r);break}_i(t,ln,Pr);break;case 5:_i(t,ln,Pr);break;default:throw Error(H(329))}}}return pn(t,ut()),t.callbackNode===n?GE.bind(null,t):null}function Cp(t,e){var n=El;return t.current.memoizedState.isDehydrated&&(Ai(t,e).flags|=256),t=xd(t,e),t!==2&&(e=ln,ln=n,e!==null&&Ip(e)),t}function Ip(t){ln===null?ln=t:ln.push.apply(ln,t)}function iR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _s(t,e){for(e&=~ly,e&=~uh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function Xw(t){if(ke&6)throw Error(H(327));Lo();var e=td(t,0);if(!(e&1))return pn(t,ut()),null;var n=xd(t,e);if(t.tag!==0&&n===2){var r=Zm(t);r!==0&&(e=r,n=Cp(t,r))}if(n===1)throw n=Ql,Ai(t,0),_s(t,e),pn(t,ut()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_i(t,ln,Pr),pn(t,ut()),null}function uy(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Yo=ut()+500,oh&&ri())}}function Fi(t){Is!==null&&Is.tag===0&&!(ke&6)&&Lo();var e=ke;ke|=1;var n=Ln.transition,r=Ve;try{if(Ln.transition=null,Ve=1,t)return t()}finally{Ve=r,Ln.transition=n,ke=e,!(ke&6)&&ri()}}function dy(){xn=jo.current,Qe(jo)}function Ai(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Lk(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(Wg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&od();break;case 3:Ko(),Qe(fn),Qe(qt),ey();break;case 5:Zg(r);break;case 4:Ko();break;case 13:Qe(Ze);break;case 19:Qe(Ze);break;case 10:Qg(r.type._context);break;case 22:case 23:dy()}n=n.return}if(St=t,mt=t=Vs(t.current,null),Pt=xn=e,wt=0,Ql=null,ly=uh=Vi=0,ln=El=null,Ti!==null){for(e=0;e<Ti.length;e++)if(n=Ti[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ti=null}return t}function KE(t,e){do{var n=mt;try{if(Kg(),ju.current=pd,md){for(var r=et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}md=!1}if(Mi=0,Tt=xt=et=null,_l=!1,ql=0,ay.current=null,n===null||n.return===null){wt=1,Ql=e,mt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=Vw(a);if(w!==null){w.flags&=-257,Fw(w,a,l,i,e),w.mode&1&&Mw(i,d,e),e=w,c=d;var C=e.updateQueue;if(C===null){var v=new Set;v.add(c),e.updateQueue=v}else C.add(c);break e}else{if(!(e&1)){Mw(i,d,e),hy();break e}c=Error(H(426))}}else if(Ye&&l.mode&1){var x=Vw(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Fw(x,a,l,i,e),qg(Qo(c,l));break e}}i=c=Qo(c,l),wt!==4&&(wt=2),El===null?El=[i]:El.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=kE(i,c,e);kw(i,T);break e;case 1:l=c;var _=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Os===null||!Os.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=RE(i,l,e);kw(i,k);break e}}i=i.return}while(i!==null)}XE(n)}catch(L){e=L,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function QE(){var t=gd.current;return gd.current=pd,t===null?pd:t}function hy(){(wt===0||wt===3||wt===2)&&(wt=4),St===null||!(Vi&268435455)&&!(uh&268435455)||_s(St,Pt)}function xd(t,e){var n=ke;ke|=2;var r=QE();(St!==t||Pt!==e)&&(Pr=null,Ai(t,e));do try{oR();break}catch(s){KE(t,s)}while(!0);if(Kg(),ke=n,gd.current=r,mt!==null)throw Error(H(261));return St=null,Pt=0,wt}function oR(){for(;mt!==null;)YE(mt)}function aR(){for(;mt!==null&&!R2();)YE(mt)}function YE(t){var e=ZE(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?XE(t):mt=e,ay.current=null}function XE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=eR(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,mt=null;return}}else if(n=Zk(n,e,xn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);wt===0&&(wt=5)}function _i(t,e,n){var r=Ve,s=Ln.transition;try{Ln.transition=null,Ve=1,lR(t,e,n,r)}finally{Ln.transition=s,Ve=r}return null}function lR(t,e,n,r){do Lo();while(Is!==null);if(ke&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($2(t,i),t===St&&(mt=St=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||au||(au=!0,eN(ed,function(){return Lo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var a=Ve;Ve=1;var l=ke;ke|=4,ay.current=null,nR(t,n),WE(n,t),Ik(ip),nd=!!sp,ip=sp=null,t.current=n,rR(n),P2(),ke=l,Ve=a,Ln.transition=i}else t.current=n;if(au&&(au=!1,Is=t,vd=s),i=t.pendingLanes,i===0&&(Os=null),O2(n.stateNode),pn(t,ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(yd)throw yd=!1,t=Tp,Tp=null,t;return vd&1&&t.tag!==0&&Lo(),i=t.pendingLanes,i&1?t===Sp?Nl++:(Nl=0,Sp=t):Nl=0,ri(),null}function Lo(){if(Is!==null){var t=k1(vd),e=Ln.transition,n=Ve;try{if(Ln.transition=null,Ve=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,vd=0,ke&6)throw Error(H(331));var s=ke;for(ke|=4,ie=t.current;ie!==null;){var i=ie,a=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ie=d;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:bl(8,h,i)}var f=h.child;if(f!==null)f.return=h,ie=f;else for(;ie!==null;){h=ie;var m=h.sibling,w=h.return;if($E(h),h===d){ie=null;break}if(m!==null){m.return=w,ie=m;break}ie=w}}}var C=i.alternate;if(C!==null){var v=C.child;if(v!==null){C.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ie=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ie=a;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bl(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,ie=T;break e}ie=i.return}}var _=t.current;for(ie=_;ie!==null;){a=ie;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ie=S;else e:for(a=_;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ch(9,l)}}catch(L){st(l,l.return,L)}if(l===a){ie=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ie=k;break e}ie=l.return}}if(ke=s,ri(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(th,t)}catch{}r=!0}return r}finally{Ve=n,Ln.transition=e}}return!1}function Jw(t,e,n){e=Qo(n,e),e=kE(t,e,1),t=Ls(t,e,1),e=en(),t!==null&&(fc(t,1,e),pn(t,e))}function st(t,e,n){if(t.tag===3)Jw(t,t,n);else for(;e!==null;){if(e.tag===3){Jw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Os===null||!Os.has(r))){t=Qo(n,t),t=RE(e,t,1),e=Ls(e,t,1),t=en(),e!==null&&(fc(e,1,t),pn(e,t));break}}e=e.return}}function cR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>ut()-cy?Ai(t,0):ly|=n),pn(t,e)}function JE(t,e){e===0&&(t.mode&1?(e=Xc,Xc<<=1,!(Xc&130023424)&&(Xc=4194304)):e=1);var n=en();t=qr(t,e),t!==null&&(fc(t,e,n),pn(t,n))}function uR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JE(t,n)}function dR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),JE(t,n)}var ZE;ZE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,Jk(t,e,n);hn=!!(t.flags&131072)}else hn=!1,Ye&&e.flags&1048576&&rE(e,cd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ku(t,e),t=e.pendingProps;var s=Wo(e,qt.current);Do(e,n),s=ny(null,e,r,t,s,n);var i=ry();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,ad(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xg(e),s.updater=lh,e.stateNode=s,s._reactInternals=e,mp(e,r,t,n),e=yp(null,e,r,!0,i,n)):(e.tag=0,Ye&&i&&Hg(e),Xt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ku(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fR(r),t=Kn(r,t),s){case 0:e=gp(null,e,r,t,n);break e;case 1:e=$w(null,e,r,t,n);break e;case 11:e=Uw(null,e,r,t,n);break e;case 14:e=Bw(null,e,r,Kn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),gp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),$w(t,e,r,s,n);case 3:e:{if(OE(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,cE(t,e),hd(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Qo(Error(H(423)),e),e=zw(t,e,r,n,s);break e}else if(r!==s){s=Qo(Error(H(424)),e),e=zw(t,e,r,n,s);break e}else for(_n=Ds(e.stateNode.containerInfo.firstChild),Nn=e,Ye=!0,Yn=null,n=aE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qo(),r===s){e=Gr(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return uE(e),t===null&&dp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,op(r,s)?a=null:i!==null&&op(r,i)&&(e.flags|=32),LE(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&dp(e),null;case 13:return ME(t,e,n);case 4:return Jg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Go(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Uw(t,e,r,s,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,He(ud,r._currentValue),r._currentValue=a,i!==null)if(rr(i.value,a)){if(i.children===s.children&&!fn.current){e=Gr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$r(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),hp(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),hp(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Xt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Do(e,n),s=Fn(s),r=r(s),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),Bw(t,e,r,s,n);case 15:return PE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),ku(t,e),e.tag=1,mn(r)?(t=!0,ad(e)):t=!1,Do(e,n),AE(e,r,s),mp(e,r,s,n),yp(null,e,r,!0,t,n);case 19:return VE(t,e,n);case 22:return DE(t,e,n)}throw Error(H(156,e.tag))};function eN(t,e){return C1(t,e)}function hR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new hR(t,e,n,r)}function fy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fR(t){if(typeof t=="function")return fy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rg)return 11;if(t===Pg)return 14}return 2}function Vs(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Du(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")fy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xo:return ki(n.children,s,i,e);case kg:a=8,s|=8;break;case Vm:return t=Dn(12,n,e,s|2),t.elementType=Vm,t.lanes=i,t;case Fm:return t=Dn(13,n,e,s),t.elementType=Fm,t.lanes=i,t;case Um:return t=Dn(19,n,e,s),t.elementType=Um,t.lanes=i,t;case u1:return dh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l1:a=10;break e;case c1:a=9;break e;case Rg:a=11;break e;case Pg:a=14;break e;case vs:a=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Dn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ki(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function dh(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=u1,t.lanes=n,t.stateNode={isHidden:!1},t}function em(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function tm(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lf(0),this.expirationTimes=Lf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function my(t,e,n,r,s,i,a,l,c){return t=new mR(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xg(i),t}function pR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tN(t){if(!t)return Ws;t=t._reactInternals;e:{if(Zi(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(mn(n))return tE(t,n,e)}return e}function nN(t,e,n,r,s,i,a,l,c){return t=my(n,r,!0,t,s,i,a,l,c),t.context=tN(null),n=t.current,r=en(),s=Ms(n),i=$r(r,s),i.callback=e??null,Ls(n,i,s),t.current.lanes=s,fc(t,s,r),pn(t,r),t}function hh(t,e,n,r){var s=e.current,i=en(),a=Ms(s);return n=tN(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ls(s,e,a),t!==null&&(tr(t,s,a,i),Iu(t,s,a)),a}function wd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function py(t,e){Zw(t,e),(t=t.alternate)&&Zw(t,e)}function gR(){return null}var rN=typeof reportError=="function"?reportError:function(t){console.error(t)};function gy(t){this._internalRoot=t}fh.prototype.render=gy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));hh(t,e,null,null)};fh.prototype.unmount=gy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fi(function(){hh(null,t,null,null)}),e[Wr]=null}};function fh(t){this._internalRoot=t}fh.prototype.unstable_scheduleHydration=function(t){if(t){var e=D1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ws.length&&e!==0&&e<ws[n].priority;n++);ws.splice(n,0,t),n===0&&O1(t)}};function yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function e0(){}function yR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=wd(a);i.call(d)}}var a=nN(e,r,t,0,null,!1,!1,"",e0);return t._reactRootContainer=a,t[Wr]=a.current,Bl(t.nodeType===8?t.parentNode:t),Fi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=wd(c);l.call(d)}}var c=my(t,0,!1,null,null,!1,!1,"",e0);return t._reactRootContainer=c,t[Wr]=c.current,Bl(t.nodeType===8?t.parentNode:t),Fi(function(){hh(e,c,n,r)}),c}function ph(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=wd(a);l.call(c)}}hh(e,a,t,s)}else a=yR(n,e,t,s,r);return wd(a)}R1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=al(e.pendingLanes);n!==0&&(Og(e,n|1),pn(e,ut()),!(ke&6)&&(Yo=ut()+500,ri()))}break;case 13:Fi(function(){var r=qr(t,1);if(r!==null){var s=en();tr(r,t,1,s)}}),py(t,1)}};Mg=function(t){if(t.tag===13){var e=qr(t,134217728);if(e!==null){var n=en();tr(e,t,134217728,n)}py(t,134217728)}};P1=function(t){if(t.tag===13){var e=Ms(t),n=qr(t,e);if(n!==null){var r=en();tr(n,t,e,r)}py(t,e)}};D1=function(){return Ve};L1=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Ym=function(t,e,n){switch(e){case"input":if(zm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ih(r);if(!s)throw Error(H(90));h1(r),zm(r,s)}}}break;case"textarea":m1(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};_1=uy;b1=Fi;var vR={usingClientEntryPoint:!1,Events:[pc,Eo,ih,x1,w1,uy]},el={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xR={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T1(t),t===null?null:t.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||gR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{th=lu.inject(xR),yr=lu}catch{}}jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vR;jn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(e))throw Error(H(200));return pR(t,e,null,n)};jn.createRoot=function(t,e){if(!yy(t))throw Error(H(299));var n=!1,r="",s=rN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=my(t,1,!1,null,null,n,!1,r,s),t[Wr]=e.current,Bl(t.nodeType===8?t.parentNode:t),new gy(e)};jn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=T1(e),t=t===null?null:t.stateNode,t};jn.flushSync=function(t){return Fi(t)};jn.hydrate=function(t,e,n){if(!mh(e))throw Error(H(200));return ph(null,t,e,!0,n)};jn.hydrateRoot=function(t,e,n){if(!yy(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=rN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=nN(e,null,t,1,n??null,s,!1,i,a),t[Wr]=e.current,Bl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new fh(e)};jn.render=function(t,e,n){if(!mh(e))throw Error(H(200));return ph(null,t,e,!1,n)};jn.unmountComponentAtNode=function(t){if(!mh(t))throw Error(H(40));return t._reactRootContainer?(Fi(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};jn.unstable_batchedUpdates=uy;jn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mh(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return ph(t,e,n,!1,r)};jn.version="18.3.1-next-f1338f8080-20240426";function sN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sN)}catch(t){console.error(t)}}sN(),s1.exports=jn;var ya=s1.exports;const wR=qb(ya);var iN,t0=ya;iN=t0.createRoot,t0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yl.apply(this,arguments)}var js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(js||(js={}));const n0="popstate";function _R(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:l="",hash:c=""}=eo(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),jp("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:_d(i))}function r(s,i){gh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return ER(e,n,r,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bR(){return Math.random().toString(36).substr(2,8)}function r0(t,e){return{usr:t.state,key:t.key,idx:e}}function jp(t,e,n,r){return n===void 0&&(n=null),Yl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:n,key:e&&e.key||r||bR()})}function _d(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ER(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=js.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Yl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=js.Pop;let x=h(),T=x==null?null:x-d;d=x,c&&c({action:l,location:v.location,delta:T})}function m(x,T){l=js.Push;let _=jp(v.location,x,T);n&&n(_,x),d=h()+1;let S=r0(_,d),k=v.createHref(_);try{a.pushState(S,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(k)}i&&c&&c({action:l,location:v.location,delta:1})}function w(x,T){l=js.Replace;let _=jp(v.location,x,T);n&&n(_,x),d=h();let S=r0(_,d),k=v.createHref(_);a.replaceState(S,"",k),i&&c&&c({action:l,location:v.location,delta:0})}function C(x){let T=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof x=="string"?x:_d(x);return _=_.replace(/ $/,"%20"),dt(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let v={get action(){return l},get location(){return t(s,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(n0,f),c=x,()=>{s.removeEventListener(n0,f),c=null}},createHref(x){return e(s,x)},createURL:C,encodeLocation(x){let T=C(x);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:m,replace:w,go(x){return a.go(x)}};return v}var s0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(s0||(s0={}));function NR(t,e,n){return n===void 0&&(n="/"),TR(t,e,n)}function TR(t,e,n,r){let s=typeof e=="string"?eo(e):e,i=vy(s.pathname||"/",n);if(i==null)return null;let a=oN(t);SR(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=VR(i);l=LR(a[c],d)}return l}function oN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(dt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Fs([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(dt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),oN(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:PR(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of aN(i.path))s(i,a,c)}),e}function aN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=aN(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function SR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CR=/^:[\w-]+$/,IR=3,jR=2,AR=1,kR=10,RR=-2,i0=t=>t==="*";function PR(t,e){let n=t.split("/"),r=n.length;return n.some(i0)&&(r+=RR),e&&(r+=jR),n.filter(s=>!i0(s)).reduce((s,i)=>s+(CR.test(i)?IR:i===""?AR:kR),r)}function DR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function LR(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=OR({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Fs([i,f.pathname]),pathnameBase:zR(Fs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Fs([i,f.pathnameBase]))}return a}function OR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:m,isOptional:w}=h;if(m==="*"){let v=l[f]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const C=l[f];return w&&!C?d[m]=void 0:d[m]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function MR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function VR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const FR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UR=t=>FR.test(t);function BR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?eo(t):t,i;if(n)if(UR(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),gh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=o0(n.substring(1),"/"):i=o0(n,e)}else i=e;return{pathname:i,search:HR(r),hash:WR(s)}}function o0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $R(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xy(t,e){let n=$R(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function wy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=eo(t):(s=Yl({},t),dt(!s.pathname||!s.pathname.includes("?"),nm("?","pathname","search",s)),dt(!s.pathname||!s.pathname.includes("#"),nm("#","pathname","hash",s)),dt(!s.search||!s.search.includes("#"),nm("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=BR(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Fs=t=>t.join("/").replace(/\/\/+/g,"/"),zR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lN=["post","put","patch","delete"];new Set(lN);const GR=["get",...lN];new Set(GR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xl.apply(this,arguments)}const _y=g.createContext(null),KR=g.createContext(null),si=g.createContext(null),yh=g.createContext(null),rs=g.createContext({outlet:null,matches:[],isDataRoute:!1}),cN=g.createContext(null);function QR(t,e){let{relative:n}=e===void 0?{}:e;va()||dt(!1);let{basename:r,navigator:s}=g.useContext(si),{hash:i,pathname:a,search:l}=dN(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Fs([r,a])),s.createHref({pathname:c,search:l,hash:i})}function va(){return g.useContext(yh)!=null}function to(){return va()||dt(!1),g.useContext(yh).location}function uN(t){g.useContext(si).static||g.useLayoutEffect(t)}function zn(){let{isDataRoute:t}=g.useContext(rs);return t?cP():YR()}function YR(){va()||dt(!1);let t=g.useContext(_y),{basename:e,future:n,navigator:r}=g.useContext(si),{matches:s}=g.useContext(rs),{pathname:i}=to(),a=JSON.stringify(xy(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return uN(()=>{l.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=wy(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fs([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}function XR(){let{matches:t}=g.useContext(rs),e=t[t.length-1];return e?e.params:{}}function dN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(si),{matches:s}=g.useContext(rs),{pathname:i}=to(),a=JSON.stringify(xy(s,r.v7_relativeSplatPath));return g.useMemo(()=>wy(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function JR(t,e){return ZR(t,e)}function ZR(t,e,n,r){va()||dt(!1);let{navigator:s}=g.useContext(si),{matches:i}=g.useContext(rs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=to(),h;if(e){var f;let x=typeof e=="string"?eo(e):e;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||dt(!1),h=x}else h=d;let m=h.pathname||"/",w=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let C=NR(t,{pathname:w}),v=sP(C&&C.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Fs([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Fs([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&v?g.createElement(yh.Provider,{value:{location:Xl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:js.Pop}},v):v}function eP(){let t=lP(),e=qR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const tP=g.createElement(eP,null);class nP extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(rs.Provider,{value:this.props.routeContext},g.createElement(cN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rP(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(_y);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(rs.Provider,{value:e},r)}function sP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||dt(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:w}=n,C=f.route.loader&&m[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||C){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let w,C=!1,v=null,x=null;n&&(w=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||tP,c&&(d<0&&m===0?(uP("route-fallback"),C=!0,x=null):d===m&&(C=!0,x=f.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,m+1)),_=()=>{let S;return w?S=v:C?S=x:f.route.Component?S=g.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,g.createElement(rP,{match:f,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?g.createElement(nP,{location:n.location,revalidation:n.revalidation,component:v,error:w,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var hN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hN||{}),fN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fN||{});function iP(t){let e=g.useContext(_y);return e||dt(!1),e}function oP(t){let e=g.useContext(KR);return e||dt(!1),e}function aP(t){let e=g.useContext(rs);return e||dt(!1),e}function mN(t){let e=aP(),n=e.matches[e.matches.length-1];return n.route.id||dt(!1),n.route.id}function lP(){var t;let e=g.useContext(cN),n=oP(),r=mN();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cP(){let{router:t}=iP(hN.UseNavigateStable),e=mN(fN.UseNavigateStable),n=g.useRef(!1);return uN(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xl({fromRouteId:e},i)))},[t,e])}const a0={};function uP(t,e,n){a0[t]||(a0[t]=!0)}function dP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function by(t){let{to:e,replace:n,state:r,relative:s}=t;va()||dt(!1);let{future:i,static:a}=g.useContext(si),{matches:l}=g.useContext(rs),{pathname:c}=to(),d=zn(),h=wy(e,xy(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function on(t){dt(!1)}function hP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=js.Pop,navigator:i,static:a=!1,future:l}=t;va()&&dt(!1);let c=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:a,future:Xl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=eo(r));let{pathname:h="/",search:f="",hash:m="",state:w=null,key:C="default"}=r,v=g.useMemo(()=>{let x=vy(h,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:w,key:C},navigationType:s}},[c,h,f,m,w,C,s]);return v==null?null:g.createElement(si.Provider,{value:d},g.createElement(yh.Provider,{children:n,value:v}))}function fP(t){let{children:e,location:n}=t;return JR(Ap(e),n)}new Promise(()=>{});function Ap(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,Ap(r.props.children,i));return}r.type!==on&&dt(!1),!r.props.index||!r.props.children||dt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Ap(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kp(){return kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kp.apply(this,arguments)}function mP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function pP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gP(t,e){return t.button===0&&(!e||e==="_self")&&!pP(t)}const yP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vP="6";try{window.__reactRouterVersion=vP}catch{}const xP="startTransition",l0=eh[xP];function wP(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=_R({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=g.useCallback(f=>{d&&l0?l0(()=>c(f)):c(f)},[c,d]);return g.useLayoutEffect(()=>a.listen(h),[a,h]),g.useEffect(()=>dP(r),[r]),g.createElement(hP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const _P=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=mP(e,yP),{basename:w}=g.useContext(si),C,v=!1;if(typeof d=="string"&&bP.test(d)&&(C=d,_P))try{let S=new URL(window.location.href),k=d.startsWith("//")?new URL(S.protocol+d):new URL(d),L=vy(k.pathname,w);k.origin===S.origin&&L!=null?d=L+k.search+k.hash:v=!0}catch{}let x=QR(d,{relative:s}),T=EP(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function _(S){r&&r(S),S.defaultPrevented||T(S)}return g.createElement("a",kp({},m,{href:C||x,onClick:v||i?r:_,ref:n,target:c}))});var c0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(c0||(c0={}));var u0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(u0||(u0={}));function EP(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=zn(),d=to(),h=dN(t,{relative:a});return g.useCallback(f=>{if(gP(f,n)){f.preventDefault();let m=r!==void 0?r:_d(d)===_d(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}const NP=()=>{};var d0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},TP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},gN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,w=d&63;c||(w=64,a||(m=64)),r.push(n[h],n[f],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new SP;const m=i<<2|l>>4;if(r.push(m),d!==64){const w=l<<4&240|d>>2;if(r.push(w),f!==64){const C=d<<6&192|f;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CP=function(t){const e=pN(t);return gN.encodeByteArray(e,!0)},bd=function(t){return CP(t).replace(/\./g,"")},yN=function(t){try{return gN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=()=>IP().__FIREBASE_DEFAULTS__,AP=()=>{if(typeof process>"u"||typeof d0>"u")return;const t=d0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yN(t[1]);return e&&JSON.parse(e)},vh=()=>{try{return NP()||jP()||AP()||kP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vN=t=>{var e,n;return(n=(e=vh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},xN=t=>{const e=vN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wN=()=>{var t;return(t=vh())==null?void 0:t.config},_N=t=>{var e;return(e=vh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ey(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bd(JSON.stringify(n)),bd(JSON.stringify(a)),""].join(".")}const Tl={};function PP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Tl))Tl[e]?t.emulator.push(e):t.prod.push(e);return t}function DP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let h0=!1;function Ny(t,e){if(typeof window>"u"||typeof document>"u"||!ii(window.location.host)||Tl[t]===e||Tl[t]||h0)return;Tl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=PP().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,w){m.setAttribute("width","24"),m.setAttribute("id",w),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{h0=!0,a()},m}function h(m,w){m.setAttribute("id",w),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=DP(r),w=n("text"),C=document.getElementById(w)||document.createElement("span"),v=n("learnmore"),x=document.getElementById(v)||document.createElement("a"),T=n("preprendIcon"),_=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),h(x,v);const k=d();c(_,T),S.append(_,C,x,k),document.body.appendChild(S)}i?(C.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function OP(){var e;const t=(e=vh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FP(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UP(){return!OP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NN(){try{return typeof indexedDB=="object"}catch{return!1}}function TN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function BP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$P,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,no.prototype.create)}}class no{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?zP(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Hn(s,l,r)}}function zP(t,e){return t.replace(HP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HP=/\{\$([^}]+)}/g;function WP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(f0(i)&&f0(a)){if(!Kr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function f0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ul(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qP(t,e){const n=new GP(t,e);return n.subscribe.bind(n)}class GP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");KP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=rm),s.error===void 0&&(s.error=rm),s.complete===void 0&&(s.complete=rm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=1e3,YP=2,XP=4*60*60*1e3,JP=.5;function m0(t,e=QP,n=YP){const r=e*Math.pow(n,t),s=Math.round(JP*r*(Math.random()-.5)*2);return Math.min(XP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t4(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:e4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e4(t){return t===bi?void 0:t}function t4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const r4={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},s4=Ee.INFO,i4={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},o4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=i4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xh{constructor(e){this.name=e,this._logLevel=s4,this._logHandler=o4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const a4=(t,e)=>e.some(n=>t instanceof n);let p0,g0;function l4(){return p0||(p0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c4(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SN=new WeakMap,Rp=new WeakMap,CN=new WeakMap,sm=new WeakMap,Ty=new WeakMap;function u4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Us(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&SN.set(n,t)}).catch(()=>{}),Ty.set(e,t),e}function d4(t){if(Rp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Rp.set(t,e)}let Pp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function h4(t){Pp=t(Pp)}function f4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(im(this),e,...n);return CN.set(r,e.sort?e.sort():[e]),Us(r)}:c4().includes(t)?function(...e){return t.apply(im(this),e),Us(SN.get(this))}:function(...e){return Us(t.apply(im(this),e))}}function m4(t){return typeof t=="function"?f4(t):(t instanceof IDBTransaction&&d4(t),a4(t,l4())?new Proxy(t,Pp):t)}function Us(t){if(t instanceof IDBRequest)return u4(t);if(sm.has(t))return sm.get(t);const e=m4(t);return e!==t&&(sm.set(t,e),Ty.set(e,t)),e}const im=t=>Ty.get(t);function IN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Us(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Us(a.result),c.oldVersion,c.newVersion,Us(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const p4=["get","getKey","getAll","getAllKeys","count"],g4=["put","add","delete","clear"],om=new Map;function y0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(om.get(e))return om.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=g4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||p4.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return om.set(e,i),i}h4(t=>({...t,get:(e,n,r)=>y0(e,n)||t.get(e,n,r),has:(e,n)=>!!y0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function v4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dp="@firebase/app",v0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new xh("@firebase/app"),x4="@firebase/app-compat",w4="@firebase/analytics-compat",_4="@firebase/analytics",b4="@firebase/app-check-compat",E4="@firebase/app-check",N4="@firebase/auth",T4="@firebase/auth-compat",S4="@firebase/database",C4="@firebase/data-connect",I4="@firebase/database-compat",j4="@firebase/functions",A4="@firebase/functions-compat",k4="@firebase/installations",R4="@firebase/installations-compat",P4="@firebase/messaging",D4="@firebase/messaging-compat",L4="@firebase/performance",O4="@firebase/performance-compat",M4="@firebase/remote-config",V4="@firebase/remote-config-compat",F4="@firebase/storage",U4="@firebase/storage-compat",B4="@firebase/firestore",$4="@firebase/ai",z4="@firebase/firestore-compat",H4="firebase",W4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="[DEFAULT]",q4={[Dp]:"fire-core",[x4]:"fire-core-compat",[_4]:"fire-analytics",[w4]:"fire-analytics-compat",[E4]:"fire-app-check",[b4]:"fire-app-check-compat",[N4]:"fire-auth",[T4]:"fire-auth-compat",[S4]:"fire-rtdb",[C4]:"fire-data-connect",[I4]:"fire-rtdb-compat",[j4]:"fire-fn",[A4]:"fire-fn-compat",[k4]:"fire-iid",[R4]:"fire-iid-compat",[P4]:"fire-fcm",[D4]:"fire-fcm-compat",[L4]:"fire-perf",[O4]:"fire-perf-compat",[M4]:"fire-rc",[V4]:"fire-rc-compat",[F4]:"fire-gcs",[U4]:"fire-gcs-compat",[B4]:"fire-fst",[z4]:"fire-fst-compat",[$4]:"fire-vertex","fire-js":"fire-js",[H4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map,G4=new Map,Op=new Map;function x0(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sr(t){const e=t.name;if(Op.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;Op.set(e,t);for(const n of Ed.values())x0(n,t);for(const n of G4.values())x0(n,t);return!0}function oi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new no("app","Firebase",K4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=W4;function jN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Lp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Bs.create("bad-app-name",{appName:String(s)});if(n||(n=wN()),!n)throw Bs.create("no-options");const i=Ed.get(s);if(i){if(Kr(n,i.options)&&Kr(r,i.config))return i;throw Bs.create("duplicate-app",{appName:s})}const a=new n4(s);for(const c of Op.values())a.addComponent(c);const l=new Q4(n,r,a);return Ed.set(s,l),l}function wh(t=Lp){const e=Ed.get(t);if(!e&&t===Lp&&wN())return jN();if(!e)throw Bs.create("no-app",{appName:t});return e}function gn(t,e,n){let r=q4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(a.join(" "));return}sr(new Bn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="firebase-heartbeat-database",X4=1,Jl="firebase-heartbeat-store";let am=null;function AN(){return am||(am=IN(Y4,X4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bs.create("idb-open",{originalErrorMessage:t.message})})),am}async function J4(t){try{const n=(await AN()).transaction(Jl),r=await n.objectStore(Jl).get(kN(t));return await n.done,r}catch(e){if(e instanceof Hn)Qr.warn(e.message);else{const n=Bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(n.message)}}}async function w0(t,e){try{const r=(await AN()).transaction(Jl,"readwrite");await r.objectStore(Jl).put(e,kN(t)),await r.done}catch(n){if(n instanceof Hn)Qr.warn(n.message);else{const r=Bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qr.warn(r.message)}}}function kN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=1024,eD=30;class tD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>eD){const a=sD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_0(),{heartbeatsToSend:r,unsentEntries:s}=nD(this._heartbeatsCache.heartbeats),i=bd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qr.warn(n),""}}}function _0(){return new Date().toISOString().substring(0,10)}function nD(t,e=Z4){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),b0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),b0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NN()?TN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await J4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return w0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return w0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function b0(t){return bd(JSON.stringify({version:2,heartbeats:t})).length}function sD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){sr(new Bn("platform-logger",e=>new y4(e),"PRIVATE")),sr(new Bn("heartbeat",e=>new tD(e),"PRIVATE")),gn(Dp,v0,t),gn(Dp,v0,"esm2020"),gn("fire-js","")}iD("");function RN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oD=RN,PN=new no("auth","Firebase",RN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new xh("@firebase/auth");function aD(t,...e){Nd.logLevel<=Ee.WARN&&Nd.warn(`Auth (${ro}): ${t}`,...e)}function Lu(t,...e){Nd.logLevel<=Ee.ERROR&&Nd.error(`Auth (${ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw Cy(t,...e)}function nr(t,...e){return Cy(t,...e)}function Sy(t,e,n){const r={...oD(),[e]:n};return new no("auth","Firebase",r).create(e,{appName:t.name})}function zr(t){return Sy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lD(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$n(t,"argument-error"),Sy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PN.create(t,...e)}function he(t,e,...n){if(!t)throw Cy(e,...n)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lu(e),new Error(e)}function Yr(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function cD(){return E0()==="http:"||E0()==="https:"}function E0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cD()||EN()||"connection"in navigator)?navigator.onLine:!0}function dD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=LP()||VP()}get(){return uD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mD=new vc(3e4,6e4);function ai(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ss(t,e,n,r,s={}){return LN(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=yc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return MP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ii(t.emulatorConfig.host)&&(d.credentials="include"),DN.fetch()(await ON(t,t.config.apiHost,n,l),d)})}async function LN(t,e,n){t._canInitEmulator=!1;const r={...hD,...e};try{const s=new gD(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw cu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw cu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw cu(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Sy(t,h,d);$n(t,h)}}catch(s){if(s instanceof Hn)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function xc(t,e,n,r,s={}){const i=await ss(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function ON(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Iy(t.config,s):`${t.config.apiScheme}://${s}`;return fD.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function pD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),mD.get())})}}function cu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nr(t,e,r);return s.customData._tokenResponse=n,s}function N0(t){return t!==void 0&&t.enterprise!==void 0}class yD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vD(t,e){return ss(t,"GET","/v2/recaptchaConfig",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t,e){return ss(t,"POST","/v1/accounts:delete",e)}async function Td(t,e){return ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wD(t,e=!1){const n=$e(t),r=await n.getIdToken(e),s=jy(r);he(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Sl(lm(s.auth_time)),issuedAtTime:Sl(lm(s.iat)),expirationTime:Sl(lm(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function lm(t){return Number(t)*1e3}function jy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const s=yN(n);return s?JSON.parse(s):(Lu("Failed to decode base64 JWT payload"),null)}catch(s){return Lu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function T0(t){const e=jy(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&_D(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _D({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Xo(t,Td(e,{idToken:n}));he(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?MN(s.providerUserInfo):[],a=ND(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function ED(t){const e=$e(t);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ND(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function MN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){const n=await LN(t,{},async()=>{const r=yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await ON(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ii(t.emulatorConfig.host)&&(c.credentials="include"),DN.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SD(t,e){return ss(t,"POST","/v2/accounts:revokeToken",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=T0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await TD(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Oo;return r&&(he(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(he(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(he(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new bD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Vp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xo(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wD(this,e)}reload(){return ED(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await Xo(this,xD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:w,providerData:C,stsTokenManager:v}=n;he(f&&v,e,"internal-error");const x=Oo.fromJSON(this.name,v);he(typeof f=="string",e,"internal-error"),fs(r,e.name),fs(s,e.name),he(typeof m=="boolean",e,"internal-error"),he(typeof w=="boolean",e,"internal-error"),fs(i,e.name),fs(a,e.name),fs(l,e.name),fs(c,e.name),fs(d,e.name),fs(h,e.name);const T=new Jn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:w,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:x,createdAt:d,lastLoginAt:h});return C&&Array.isArray(C)&&(T.providerData=C.map(_=>({..._}))),c&&(T._redirectEventId=c),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oo;s.updateFromServerResponse(n);const i=new Jn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Sd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];he(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?MN(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Oo;l.updateFromIdToken(r);const c=new Jn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Vp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;function Ur(t){Yr(t instanceof Function,"Expected a class definition");let e=S0.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,S0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VN.type="NONE";const C0=VN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e,n){return`firebase:${t}:${e}:${n}`}class Mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ou(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ou("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Td(this.auth,{idToken:e}).catch(()=>{});return n?Jn._fromGetAccountInfoResponse(this.auth,n,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mo(Ur(C0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Ur(C0);const a=Ou(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await Td(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Jn._fromGetAccountInfoResponse(e,m,h)}else f=Jn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Mo(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Mo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($N(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HN(e))return"Blackberry";if(WN(e))return"Webos";if(UN(e))return"Safari";if((e.includes("chrome/")||BN(e))&&!e.includes("edge/"))return"Chrome";if(zN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FN(t=Gt()){return/firefox\//i.test(t)}function UN(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BN(t=Gt()){return/crios\//i.test(t)}function $N(t=Gt()){return/iemobile/i.test(t)}function zN(t=Gt()){return/android/i.test(t)}function HN(t=Gt()){return/blackberry/i.test(t)}function WN(t=Gt()){return/webos/i.test(t)}function Ay(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CD(t=Gt()){var e;return Ay(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ID(){return FP()&&document.documentMode===10}function qN(t=Gt()){return Ay(t)||zN(t)||WN(t)||HN(t)||/windows phone/i.test(t)||$N(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e=[]){let n;switch(t){case"Browser":n=I0(Gt());break;case"Worker":n=`${I0(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e={}){return ss(t,"GET","/v2/passwordPolicy",ai(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=6;class RD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j0(this),this.idTokenSubscription=new j0(this),this.beforeStateQueue=new jD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Td(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(cn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(zr(this));const n=e?$e(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AD(this),n=new RD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new no("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&aD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function li(t){return $e(t)}class j0{constructor(e){this.auth=e,this.observer=null,this.addObserver=qP(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DD(t){_h=t}function KN(t){return _h.loadJS(t)}function LD(){return _h.recaptchaEnterpriseScript}function OD(){return _h.gapiScript}function MD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class VD{constructor(){this.enterprise=new FD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const UD="recaptcha-enterprise",QN="NO_RECAPTCHA";class BD{constructor(e){this.type=UD,this.auth=li(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{vD(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new yD(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;N0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(QN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VD().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&N0(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=LD();c.length!==0&&(c+=l),KN(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function A0(t,e,n,r=!1,s=!1){const i=new BD(t);let a;if(s)a=QN;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Fp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await A0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await A0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e){const n=oi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kr(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function zD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function HD(t,e,n){const r=li(t);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=YN(e),{host:a,port:l}=WD(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Kr(d,r.config.emulator)&&Kr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ii(a)?(Ey(`${i}//${a}${c}`),Ny("Auth",!0)):qD()}function YN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WD(t){const e=YN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:k0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:k0(a)}}}function k0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function GD(t,e){return ss(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e){return xc(t,"POST","/v1/accounts:signInWithPassword",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",ai(t,e))}async function YD(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends ky{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Zl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Zl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fp(e,n,"signInWithPassword",KD);case"emailLink":return QD(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fp(e,r,"signUpPassword",GD);case"emailLink":return YD(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e){return xc(t,"POST","/v1/accounts:signInWithIdp",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="http://localhost";class Ui extends ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new Ui(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Vo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vo(e,n)}buildRequest(){const e={requestUri:XD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZD(t){const e=cl(ul(t)).link,n=e?cl(ul(e)).deep_link_id:null,r=cl(ul(t)).deep_link_id;return(r?cl(ul(r)).link:null)||r||n||e||t}class Ry{constructor(e){const n=cl(ul(e)),r=n.apiKey??null,s=n.oobCode??null,i=JD(n.mode??null);he(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=ZD(e);try{return new Ry(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.providerId=xa.PROVIDER_ID}static credential(e,n){return Zl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ry.parseLink(n);return he(r,"argument-error"),Zl._fromEmailAndCode(e,r.code,r.tenantId)}}xa.PROVIDER_ID="password";xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Py{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends wc{constructor(){super("facebook.com")}static credential(e){return Ui._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ui._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Es.credential(n,r)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends wc{constructor(){super("github.com")}static credential(e){return Ui._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends wc{constructor(){super("twitter.com")}static credential(e,n){return Ui._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e){return xc(t,"POST","/v1/accounts:signUp",ai(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jn._fromIdTokenResponse(e,r,s),a=R0(r);return new Bi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=R0(r);return new Bi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function R0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends Hn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Cd(e,n,r,s)}}function XN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Cd._fromErrorAndOperation(t,i,e,r):i})}async function tL(t,e,n=!1){const r=await Xo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(t,e,n=!1){const{auth:r}=t;if(cn(r.app))return Promise.reject(zr(r));const s="reauthenticate";try{const i=await Xo(t,XN(r,s,e,t),n);he(i.idToken,r,"internal-error");const a=jy(i.idToken);he(a,r,"internal-error");const{sub:l}=a;return he(t.uid===l,r,"user-mismatch"),Bi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e,n=!1){if(cn(t.app))return Promise.reject(zr(t));const r="signIn",s=await XN(t,r,e),i=await Bi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function rL(t,e){return JN(li(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t){const e=li(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sL(t,e,n){if(cn(t.app))return Promise.reject(zr(t));const r=li(t),a=await Fp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eL).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ZN(t),c}),l=await Bi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function iL(t,e,n){return cn(t.app)?Promise.reject(zr(t)):rL($e(t),xa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e){return ss(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Xo(r,oL(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function aL(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function lL(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function cL(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function uL(t){return $e(t).signOut()}const Id="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Id,"1"),this.storage.removeItem(Id),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=1e3,hL=10;class nT extends tT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);ID()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,hL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},dL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nT.type="LOCAL";const fL=nT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT extends tT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}rT.type="SESSION";const sT=rT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await mL(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Dy("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function gL(t){xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function yL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function xL(){return iT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebaseLocalStorageDb",wL=1,jd="firebaseLocalStorage",aT="fbase_key";class _c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eh(t,e){return t.transaction([jd],e?"readwrite":"readonly").objectStore(jd)}function _L(){const t=indexedDB.deleteDatabase(oT);return new _c(t).toPromise()}function Up(){const t=indexedDB.open(oT,wL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jd,{keyPath:aT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jd)?e(r):(r.close(),await _L(),e(await Up()))})})}async function P0(t,e,n){const r=Eh(t,!0).put({[aT]:e,value:n});return new _c(r).toPromise()}async function bL(t,e){const n=Eh(t,!1).get(e),r=await new _c(n).toPromise();return r===void 0?null:r.value}function D0(t,e){const n=Eh(t,!0).delete(e);return new _c(n).toPromise()}const EL=800,NL=3;class lT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(xL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await yL(),!this.activeServiceWorker)return;this.sender=new pL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Up();return await P0(e,Id,"1"),await D0(e,Id),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>D0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Eh(s,!1).getAll();return new _c(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lT.type="LOCAL";const TL=lT;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e){return e?Ur(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function SL(t){return JN(t.auth,new Ly(t),t.bypassAuthState)}function CL(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),nL(n,new Ly(t),t.bypassAuthState)}async function IL(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),tL(n,new Ly(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SL;case"linkViaPopup":case"linkViaRedirect":return IL;case"reauthViaPopup":case"reauthViaRedirect":return CL;default:$n(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new vc(2e3,1e4);async function AL(t,e,n){if(cn(t.app))return Promise.reject(nr(t,"operation-not-supported-in-this-environment"));const r=li(t);lD(t,e,Py);const s=cT(r,n);return new Ci(r,"signInViaPopup",e,s).executeNotNull()}class Ci extends uT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ci.currentPopupAction&&Ci.currentPopupAction.cancel(),Ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Dy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jL.get())};e()}}Ci.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="pendingRedirect",Mu=new Map;class RL extends uT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const r=await PL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PL(t,e){const n=OL(e),r=LL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function DL(t,e){Mu.set(t._key(),e)}function LL(t){return Ur(t._redirectPersistence)}function OL(t){return Ou(kL,t.config.apiKey,t.name)}async function ML(t,e,n=!1){if(cn(t.app))return Promise.reject(zr(t));const r=li(t),s=cT(r,e),a=await new RL(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=10*60*1e3;class FL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dT(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VL&&this.cachedEventUids.clear(),this.cachedEventUids.has(L0(e))}saveEventToCache(e){this.cachedEventUids.add(L0(e)),this.lastProcessedEventTime=Date.now()}}function L0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL(t,e={}){return ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zL=/^https?/;async function HL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BL(t);for(const n of e)try{if(WL(n))return}catch{}$n(t,"unauthorized-domain")}function WL(t){const e=Mp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!zL.test(n))return!1;if($L.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new vc(3e4,6e4);function O0(){const t=xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GL(t){return new Promise((e,n)=>{var s,i,a;function r(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(nr(t,"network-request-failed"))},timeout:qL.get()})}if((i=(s=xr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=xr().gapi)!=null&&a.load)r();else{const l=MD("iframefcb");return xr()[l]=()=>{gapi.load?r():n(nr(t,"network-request-failed"))},KN(`${OD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function KL(t){return Vu=Vu||GL(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=new vc(5e3,15e3),YL="__/auth/iframe",XL="emulator/auth/iframe",JL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eO(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Iy(e,XL):`https://${t.config.authDomain}/${YL}`,r={apiKey:e.apiKey,appName:t.name,v:ro},s=ZL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${yc(r).slice(1)}`}async function tO(t){const e=await KL(t),n=xr().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:eO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=nr(t,"network-request-failed"),l=xr().setTimeout(()=>{i(a)},QL.get());function c(){xr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rO=500,sO=600,iO="_blank",oO="http://localhost";class M0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aO(t,e,n,r=rO,s=sO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...nO,width:r.toString(),height:s.toString(),top:i,left:a},d=Gt().toLowerCase();n&&(l=BN(d)?iO:n),FN(d)&&(e=e||oO,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[w,C])=>`${m}${w}=${C},`,"");if(CD(d)&&l!=="_self")return lO(e||"",l),new M0(null);const f=window.open(e||"",l,h);he(f,t,"popup-blocked");try{f.focus()}catch{}return new M0(f)}function lO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="__/auth/handler",uO="emulator/auth/handler",dO=encodeURIComponent("fac");async function V0(t,e,n,r,s,i){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ro,eventId:s};if(e instanceof Py){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",WP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof wc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${dO}=${encodeURIComponent(c)}`:"";return`${hO(t)}?${yc(l).slice(1)}${d}`}function hO({config:t}){return t.emulator?Iy(t,uO):`https://${t.authDomain}/${cO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="webStorageSupport";class fO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sT,this._completeRedirectFn=ML,this._overrideRedirectResult=DL}async _openPopup(e,n,r,s){var a;Yr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await V0(e,n,r,Mp(),s);return aO(e,i,Dy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await V0(e,n,r,Mp(),s);return gL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tO(e),r=new FL(e);return n.register("authEvent",s=>(he(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cm,{type:cm},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[cm];i!==void 0&&n(!!i),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qN()||UN()||Ay()}}const mO=fO;var F0="@firebase/auth",U0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yO(t){sr(new Bn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GN(t)},d=new PD(r,s,i,c);return zD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sr(new Bn("auth-internal",e=>{const n=li(e.getProvider("auth").getImmediate());return(r=>new pO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(F0,U0,gO(t)),gn(F0,U0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=5*60,xO=_N("authIdTokenMaxAge")||vO;let B0=null;const wO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xO)return;const s=n==null?void 0:n.token;B0!==s&&(B0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _O(t=wh()){const e=oi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$D(t,{popupRedirectResolver:mO,persistence:[TL,fL,sT]}),r=_N("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=wO(i.toString());lL(n,a,()=>a(n.currentUser)),aL(n,l=>a(l))}}const s=vN("auth");return s&&HD(n,`http://${s}`),n}function bO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}DD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",bO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yO("Browser");var EO="firebase",NO="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(EO,NO,"app");const hT="@firebase/installations",Oy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=1e4,mT=`w:${Oy}`,pT="FIS_v2",TO="https://firebaseinstallations.googleapis.com/v1",SO=60*60*1e3,CO="installations",IO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$i=new no(CO,IO,jO);function gT(t){return t instanceof Hn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT({projectId:t}){return`${TO}/projects/${t}/installations`}function vT(t){return{token:t.token,requestStatus:2,expiresIn:kO(t.expiresIn),creationTime:Date.now()}}async function xT(t,e){const r=(await e.json()).error;return $i.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function wT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function AO(t,{refreshToken:e}){const n=wT(t);return n.append("Authorization",RO(e)),n}async function _T(t){const e=await t();return e.status>=500&&e.status<600?t():e}function kO(t){return Number(t.replace("s","000"))}function RO(t){return`${pT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=yT(t),s=wT(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:pT,appId:t.appId,sdkVersion:mT},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await _T(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:vT(d.authToken)}}else throw await xT("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=/^[cdef][\w-]{21}$/,Bp="";function OO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=MO(t);return LO.test(n)?n:Bp}catch{return Bp}}function MO(t){return DO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Map;function NT(t,e){const n=Nh(t);TT(n,e),VO(n,e)}function TT(t,e){const n=ET.get(t);if(n)for(const r of n)r(e)}function VO(t,e){const n=FO();n&&n.postMessage({key:t,fid:e}),UO()}let Ii=null;function FO(){return!Ii&&"BroadcastChannel"in self&&(Ii=new BroadcastChannel("[Firebase] FID Change"),Ii.onmessage=t=>{TT(t.data.key,t.data.fid)}),Ii}function UO(){ET.size===0&&Ii&&(Ii.close(),Ii=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="firebase-installations-database",$O=1,zi="firebase-installations-store";let um=null;function My(){return um||(um=IN(BO,$O,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(zi)}}})),um}async function Ad(t,e){const n=Nh(t),s=(await My()).transaction(zi,"readwrite"),i=s.objectStore(zi),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&NT(t,e.fid),e}async function ST(t){const e=Nh(t),r=(await My()).transaction(zi,"readwrite");await r.objectStore(zi).delete(e),await r.done}async function Th(t,e){const n=Nh(t),s=(await My()).transaction(zi,"readwrite"),i=s.objectStore(zi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&NT(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vy(t){let e;const n=await Th(t.appConfig,r=>{const s=zO(r),i=HO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Bp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function zO(t){const e=t||{fid:OO(),registrationStatus:0};return CT(e)}function HO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject($i.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=WO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qO(t)}:{installationEntry:e}}async function WO(t,e){try{const n=await PO(t,e);return Ad(t.appConfig,n)}catch(n){throw gT(n)&&n.customData.serverCode===409?await ST(t.appConfig):await Ad(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function qO(t){let e=await $0(t.appConfig);for(;e.registrationStatus===1;)await bT(100),e=await $0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Vy(t);return r||n}return e}function $0(t){return Th(t,e=>{if(!e)throw $i.create("installation-not-found");return CT(e)})}function CT(t){return GO(t)?{fid:t.fid,registrationStatus:0}:t}function GO(t){return t.registrationStatus===1&&t.registrationTime+fT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO({appConfig:t,heartbeatServiceProvider:e},n){const r=QO(t,n),s=AO(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:mT,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await _T(()=>fetch(r,l));if(c.ok){const d=await c.json();return vT(d)}else throw await xT("Generate Auth Token",c)}function QO(t,{fid:e}){return`${yT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fy(t,e=!1){let n;const r=await Th(t.appConfig,i=>{if(!IT(i))throw $i.create("not-registered");const a=i.authToken;if(!e&&JO(a))return i;if(a.requestStatus===1)return n=YO(t,e),i;{if(!navigator.onLine)throw $i.create("app-offline");const l=eM(i);return n=XO(t,l),l}});return n?await n:r.authToken}async function YO(t,e){let n=await z0(t.appConfig);for(;n.authToken.requestStatus===1;)await bT(100),n=await z0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Fy(t,e):r}function z0(t){return Th(t,e=>{if(!IT(e))throw $i.create("not-registered");const n=e.authToken;return tM(n)?{...e,authToken:{requestStatus:0}}:e})}async function XO(t,e){try{const n=await KO(t,e),r={...e,authToken:n};return await Ad(t.appConfig,r),n}catch(n){if(gT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ST(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ad(t.appConfig,r)}throw n}}function IT(t){return t!==void 0&&t.registrationStatus===2}function JO(t){return t.requestStatus===2&&!ZO(t)}function ZO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+SO}function eM(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function tM(t){return t.requestStatus===1&&t.requestTime+fT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(t){const e=t,{installationEntry:n,registrationPromise:r}=await Vy(e);return r?r.catch(console.error):Fy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e=!1){const n=t;return await sM(n),(await Fy(n,e)).token}async function sM(t){const{registrationPromise:e}=await Vy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t){if(!t||!t.options)throw dm("App Configuration");if(!t.name)throw dm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw dm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function dm(t){return $i.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="installations",oM="installations-internal",aM=t=>{const e=t.getProvider("app").getImmediate(),n=iM(e),r=oi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lM=t=>{const e=t.getProvider("app").getImmediate(),n=oi(e,jT).getImmediate();return{getId:()=>nM(n),getToken:s=>rM(n,s)}};function cM(){sr(new Bn(jT,aM,"PUBLIC")),sr(new Bn(oM,lM,"PRIVATE"))}cM();gn(hT,Oy);gn(hT,Oy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="analytics",uM="firebase_id",dM="origin",hM=60*1e3,fM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Tn=new no("analytics","Analytics",mM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(t){if(!t.startsWith(Uy)){const e=Tn.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function AT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function gM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function yM(t,e){const n=gM("firebase-js-sdk-policy",{createScriptURL:pM}),r=document.createElement("script"),s=`${Uy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function vM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function xM(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await AT(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){tn.error(l)}t("config",s,i)}async function wM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await AT(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){tn.error(i)}}function _M(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await wM(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await xM(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){tn.error(l)}}return s}function bM(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=_M(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function EM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Uy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=30,TM=1e3;class SM{constructor(e={},n=TM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const kT=new SM;function CM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function IM(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:CM(n)},s=fM.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Tn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function jM(t,e=kT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Tn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Tn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new RM;return setTimeout(async()=>{l.abort()},hM),RT({appId:r,apiKey:s,measurementId:i},a,l,e)}async function RT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=kT){var l;const{appId:i,measurementId:a}=t;try{await AM(r,e)}catch(c){if(a)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await IM(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!kM(d)){if(s.deleteThrottleMetadata(i),a)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?m0(n,s.intervalMillis,NM):m0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),tn.debug(`Calling attemptFetch again in ${h} millis`),RT(t,f,r,s)}}function AM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kM(t){if(!(t instanceof Hn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class RM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function DM(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(){if(NN())try{await TN()}catch(t){return tn.warn(Tn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return tn.warn(Tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function OM(t,e,n,r,s,i,a){const l=jM(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>tn.error(m)),e.push(l);const c=LM().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);EM(i)||yM(i,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[dM]="firebase",f.update=!0,h!=null&&(f[uM]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.app=e}_delete(){return delete Fo[this.app.options.appId],Promise.resolve()}}let Fo={},H0=[];const W0={};let hm="dataLayer",VM="gtag",q0,By,G0=!1;function FM(){const t=[];if(EN()&&t.push("This is a browser extension environment."),BP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Tn.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}function UM(t,e,n){FM();const r=t.options.appId;if(!r)throw Tn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Tn.create("no-api-key");if(Fo[r]!=null)throw Tn.create("already-exists",{id:r});if(!G0){vM(hm);const{wrappedGtag:i,gtagCore:a}=bM(Fo,H0,W0,hm,VM);By=i,q0=a,G0=!0}return Fo[r]=OM(t,H0,W0,e,q0,hm,n),new MM(t)}function BM(t=wh()){t=$e(t);const e=oi(t,kd);return e.isInitialized()?e.getImmediate():$M(t)}function $M(t,e={}){const n=oi(t,kd);if(n.isInitialized()){const s=n.getImmediate();if(Kr(e,n.getOptions()))return s;throw Tn.create("already-initialized")}return n.initialize({options:e})}function zM(t,e,n){t=$e(t),DM(By,Fo[t.app.options.appId],e,n).catch(r=>tn.error(r))}function HM(t,e,n,r){t=$e(t),PM(By,Fo[t.app.options.appId],e,n,r).catch(s=>tn.error(s))}const K0="@firebase/analytics",Q0="0.10.19";function WM(){sr(new Bn(kd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return UM(r,s,n)},"PUBLIC")),sr(new Bn("analytics-internal",t,"PRIVATE")),gn(K0,Q0),gn(K0,Q0,"esm2020");function t(e){try{const n=e.getProvider(kd).getImmediate();return{logEvent:(r,s,i)=>HM(n,r,s,i),setUserProperties:(r,s)=>zM(n,r,s)}}catch(n){throw Tn.create("interop-component-reg-failed",{reason:n})}}}WM();var Y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,PT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,y){function I(){}I.prototype=y.prototype,E.F=y.prototype,E.prototype=new I,E.prototype.constructor=E,E.D=function(N,R,j){for(var P=Array(arguments.length-2),U=2;U<arguments.length;U++)P[U-2]=arguments[U];return y.prototype[R].apply(N,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,y,I){I||(I=0);const N=Array(16);if(typeof y=="string")for(var R=0;R<16;++R)N[R]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(R=0;R<16;++R)N[R]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=E.g[0],I=E.g[1],R=E.g[2];let j=E.g[3],P;P=y+(j^I&(R^j))+N[0]+3614090360&4294967295,y=I+(P<<7&4294967295|P>>>25),P=j+(R^y&(I^R))+N[1]+3905402710&4294967295,j=y+(P<<12&4294967295|P>>>20),P=R+(I^j&(y^I))+N[2]+606105819&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(y^R&(j^y))+N[3]+3250441966&4294967295,I=R+(P<<22&4294967295|P>>>10),P=y+(j^I&(R^j))+N[4]+4118548399&4294967295,y=I+(P<<7&4294967295|P>>>25),P=j+(R^y&(I^R))+N[5]+1200080426&4294967295,j=y+(P<<12&4294967295|P>>>20),P=R+(I^j&(y^I))+N[6]+2821735955&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(y^R&(j^y))+N[7]+4249261313&4294967295,I=R+(P<<22&4294967295|P>>>10),P=y+(j^I&(R^j))+N[8]+1770035416&4294967295,y=I+(P<<7&4294967295|P>>>25),P=j+(R^y&(I^R))+N[9]+2336552879&4294967295,j=y+(P<<12&4294967295|P>>>20),P=R+(I^j&(y^I))+N[10]+4294925233&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(y^R&(j^y))+N[11]+2304563134&4294967295,I=R+(P<<22&4294967295|P>>>10),P=y+(j^I&(R^j))+N[12]+1804603682&4294967295,y=I+(P<<7&4294967295|P>>>25),P=j+(R^y&(I^R))+N[13]+4254626195&4294967295,j=y+(P<<12&4294967295|P>>>20),P=R+(I^j&(y^I))+N[14]+2792965006&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(y^R&(j^y))+N[15]+1236535329&4294967295,I=R+(P<<22&4294967295|P>>>10),P=y+(R^j&(I^R))+N[1]+4129170786&4294967295,y=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(y^I))+N[6]+3225465664&4294967295,j=y+(P<<9&4294967295|P>>>23),P=R+(y^I&(j^y))+N[11]+643717713&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^y&(R^j))+N[0]+3921069994&4294967295,I=R+(P<<20&4294967295|P>>>12),P=y+(R^j&(I^R))+N[5]+3593408605&4294967295,y=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(y^I))+N[10]+38016083&4294967295,j=y+(P<<9&4294967295|P>>>23),P=R+(y^I&(j^y))+N[15]+3634488961&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^y&(R^j))+N[4]+3889429448&4294967295,I=R+(P<<20&4294967295|P>>>12),P=y+(R^j&(I^R))+N[9]+568446438&4294967295,y=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(y^I))+N[14]+3275163606&4294967295,j=y+(P<<9&4294967295|P>>>23),P=R+(y^I&(j^y))+N[3]+4107603335&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^y&(R^j))+N[8]+1163531501&4294967295,I=R+(P<<20&4294967295|P>>>12),P=y+(R^j&(I^R))+N[13]+2850285829&4294967295,y=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(y^I))+N[2]+4243563512&4294967295,j=y+(P<<9&4294967295|P>>>23),P=R+(y^I&(j^y))+N[7]+1735328473&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^y&(R^j))+N[12]+2368359562&4294967295,I=R+(P<<20&4294967295|P>>>12),P=y+(I^R^j)+N[5]+4294588738&4294967295,y=I+(P<<4&4294967295|P>>>28),P=j+(y^I^R)+N[8]+2272392833&4294967295,j=y+(P<<11&4294967295|P>>>21),P=R+(j^y^I)+N[11]+1839030562&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^y)+N[14]+4259657740&4294967295,I=R+(P<<23&4294967295|P>>>9),P=y+(I^R^j)+N[1]+2763975236&4294967295,y=I+(P<<4&4294967295|P>>>28),P=j+(y^I^R)+N[4]+1272893353&4294967295,j=y+(P<<11&4294967295|P>>>21),P=R+(j^y^I)+N[7]+4139469664&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^y)+N[10]+3200236656&4294967295,I=R+(P<<23&4294967295|P>>>9),P=y+(I^R^j)+N[13]+681279174&4294967295,y=I+(P<<4&4294967295|P>>>28),P=j+(y^I^R)+N[0]+3936430074&4294967295,j=y+(P<<11&4294967295|P>>>21),P=R+(j^y^I)+N[3]+3572445317&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^y)+N[6]+76029189&4294967295,I=R+(P<<23&4294967295|P>>>9),P=y+(I^R^j)+N[9]+3654602809&4294967295,y=I+(P<<4&4294967295|P>>>28),P=j+(y^I^R)+N[12]+3873151461&4294967295,j=y+(P<<11&4294967295|P>>>21),P=R+(j^y^I)+N[15]+530742520&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^y)+N[2]+3299628645&4294967295,I=R+(P<<23&4294967295|P>>>9),P=y+(R^(I|~j))+N[0]+4096336452&4294967295,y=I+(P<<6&4294967295|P>>>26),P=j+(I^(y|~R))+N[7]+1126891415&4294967295,j=y+(P<<10&4294967295|P>>>22),P=R+(y^(j|~I))+N[14]+2878612391&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~y))+N[5]+4237533241&4294967295,I=R+(P<<21&4294967295|P>>>11),P=y+(R^(I|~j))+N[12]+1700485571&4294967295,y=I+(P<<6&4294967295|P>>>26),P=j+(I^(y|~R))+N[3]+2399980690&4294967295,j=y+(P<<10&4294967295|P>>>22),P=R+(y^(j|~I))+N[10]+4293915773&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~y))+N[1]+2240044497&4294967295,I=R+(P<<21&4294967295|P>>>11),P=y+(R^(I|~j))+N[8]+1873313359&4294967295,y=I+(P<<6&4294967295|P>>>26),P=j+(I^(y|~R))+N[15]+4264355552&4294967295,j=y+(P<<10&4294967295|P>>>22),P=R+(y^(j|~I))+N[6]+2734768916&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~y))+N[13]+1309151649&4294967295,I=R+(P<<21&4294967295|P>>>11),P=y+(R^(I|~j))+N[4]+4149444226&4294967295,y=I+(P<<6&4294967295|P>>>26),P=j+(I^(y|~R))+N[11]+3174756917&4294967295,j=y+(P<<10&4294967295|P>>>22),P=R+(y^(j|~I))+N[2]+718787259&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~y))+N[9]+3951481745&4294967295,E.g[0]=E.g[0]+y&4294967295,E.g[1]=E.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+j&4294967295}r.prototype.v=function(E,y){y===void 0&&(y=E.length);const I=y-this.blockSize,N=this.C;let R=this.h,j=0;for(;j<y;){if(R==0)for(;j<=I;)s(this,E,j),j+=this.blockSize;if(typeof E=="string"){for(;j<y;)if(N[R++]=E.charCodeAt(j++),R==this.blockSize){s(this,N),R=0;break}}else for(;j<y;)if(N[R++]=E[j++],R==this.blockSize){s(this,N),R=0;break}}this.h=R,this.o+=y},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var y=1;y<E.length-8;++y)E[y]=0;y=this.o*8;for(var I=E.length-8;I<E.length;++I)E[I]=y&255,y/=256;for(this.v(E),E=Array(16),y=0,I=0;I<4;++I)for(let N=0;N<32;N+=8)E[y++]=this.g[I]>>>N&255;return E};function i(E,y){var I=l;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=y(E)}function a(E,y){this.h=y;const I=[];let N=!0;for(let R=E.length-1;R>=0;R--){const j=E[R]|0;N&&j==y||(I[R]=j,N=!1)}this.g=I}var l={};function c(E){return-128<=E&&E<128?i(E,function(y){return new a([y|0],y<0?-1:0)}):new a([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return x(d(-E));const y=[];let I=1;for(let N=0;E>=I;N++)y[N]=E/I|0,I*=4294967296;return new a(y,0)}function h(E,y){if(E.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(E.charAt(0)=="-")return x(h(E.substring(1),y));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(y,8));let N=f;for(let j=0;j<E.length;j+=8){var R=Math.min(8,E.length-j);const P=parseInt(E.substring(j,j+R),y);R<8?(R=d(Math.pow(y,R)),N=N.j(R).add(d(P))):(N=N.j(I),N=N.add(d(P)))}return N}var f=c(0),m=c(1),w=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-x(this).m();let E=0,y=1;for(let I=0;I<this.g.length;I++){const N=this.i(I);E+=(N>=0?N:4294967296+N)*y,y*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(v(this))return"-"+x(this).toString(E);const y=d(Math.pow(E,6));var I=this;let N="";for(;;){const R=k(I,y).g;I=T(I,R.j(y));let j=((I.g.length>0?I.g[0]:I.h)>>>0).toString(E);if(I=R,C(I))return j+N;for(;j.length<6;)j="0"+j;N=j+N}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(let y=0;y<E.g.length;y++)if(E.g[y]!=0)return!1;return!0}function v(E){return E.h==-1}t.l=function(E){return E=T(this,E),v(E)?-1:C(E)?0:1};function x(E){const y=E.g.length,I=[];for(let N=0;N<y;N++)I[N]=~E.g[N];return new a(I,~E.h).add(m)}t.abs=function(){return v(this)?x(this):this},t.add=function(E){const y=Math.max(this.g.length,E.g.length),I=[];let N=0;for(let R=0;R<=y;R++){let j=N+(this.i(R)&65535)+(E.i(R)&65535),P=(j>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);N=P>>>16,j&=65535,P&=65535,I[R]=P<<16|j}return new a(I,I[I.length-1]&-2147483648?-1:0)};function T(E,y){return E.add(x(y))}t.j=function(E){if(C(this)||C(E))return f;if(v(this))return v(E)?x(this).j(x(E)):x(x(this).j(E));if(v(E))return x(this.j(x(E)));if(this.l(w)<0&&E.l(w)<0)return d(this.m()*E.m());const y=this.g.length+E.g.length,I=[];for(var N=0;N<2*y;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(let R=0;R<E.g.length;R++){const j=this.i(N)>>>16,P=this.i(N)&65535,U=E.i(R)>>>16,K=E.i(R)&65535;I[2*N+2*R]+=P*K,_(I,2*N+2*R),I[2*N+2*R+1]+=j*K,_(I,2*N+2*R+1),I[2*N+2*R+1]+=P*U,_(I,2*N+2*R+1),I[2*N+2*R+2]+=j*U,_(I,2*N+2*R+2)}for(E=0;E<y;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=y;E<2*y;E++)I[E]=0;return new a(I,0)};function _(E,y){for(;(E[y]&65535)!=E[y];)E[y+1]+=E[y]>>>16,E[y]&=65535,y++}function S(E,y){this.g=E,this.h=y}function k(E,y){if(C(y))throw Error("division by zero");if(C(E))return new S(f,f);if(v(E))return y=k(x(E),y),new S(x(y.g),x(y.h));if(v(y))return y=k(E,x(y)),new S(x(y.g),y.h);if(E.g.length>30){if(v(E)||v(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,N=y;N.l(E)<=0;)I=L(I),N=L(N);var R=A(I,1),j=A(N,1);for(N=A(N,2),I=A(I,2);!C(N);){var P=j.add(N);P.l(E)<=0&&(R=R.add(I),j=P),N=A(N,1),I=A(I,1)}return y=T(E,R.j(y)),new S(R,y)}for(R=f;E.l(y)>=0;){for(I=Math.max(1,Math.floor(E.m()/y.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),j=d(I),P=j.j(y);v(P)||P.l(E)>0;)I-=N,j=d(I),P=j.j(y);C(j)&&(j=m),R=R.add(j),E=T(E,P)}return new S(R,E)}t.B=function(E){return k(this,E).h},t.and=function(E){const y=Math.max(this.g.length,E.g.length),I=[];for(let N=0;N<y;N++)I[N]=this.i(N)&E.i(N);return new a(I,this.h&E.h)},t.or=function(E){const y=Math.max(this.g.length,E.g.length),I=[];for(let N=0;N<y;N++)I[N]=this.i(N)|E.i(N);return new a(I,this.h|E.h)},t.xor=function(E){const y=Math.max(this.g.length,E.g.length),I=[];for(let N=0;N<y;N++)I[N]=this.i(N)^E.i(N);return new a(I,this.h^E.h)};function L(E){const y=E.g.length+1,I=[];for(let N=0;N<y;N++)I[N]=E.i(N)<<1|E.i(N-1)>>>31;return new a(I,E.h)}function A(E,y){const I=y>>5;y%=32;const N=E.g.length-I,R=[];for(let j=0;j<N;j++)R[j]=y>0?E.i(j+I)>>>y|E.i(j+I+1)<<32-y:E.i(j+I);return new a(R,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,$s=a}).apply(typeof Y0<"u"?Y0:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var DT,dl,LT,Fu,$p,OT,MT,VT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var p=0;p<u.length;++p){var b=u[p];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var b=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var M=u[D];if(!(M in b))break e;b=b[M]}u=u[u.length-1],D=b[u],p=p(D),p!=D&&p!=null&&e(b,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var b=[],D;for(D in p)Object.prototype.hasOwnProperty.call(p,D)&&b.push([D,p[D]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,b){return u.call.apply(u.bind,arguments)}function d(u,p,b){return d=c,d.apply(null,arguments)}function h(u,p){var b=Array.prototype.slice.call(arguments,1);return function(){var D=b.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function f(u,p){function b(){}b.prototype=p.prototype,u.Z=p.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(D,M,F){for(var X=Array(arguments.length-2),we=2;we<arguments.length;we++)X[we-2]=arguments[we];return p.prototype[M].apply(D,X)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function w(u){const p=u.length;if(p>0){const b=Array(p);for(let D=0;D<p;D++)b[D]=u[D];return b}return[]}function C(u,p){for(let D=1;D<arguments.length;D++){const M=arguments[D];var b=typeof M;if(b=b!="object"?b:M?Array.isArray(M)?"array":b:"null",b=="array"||b=="object"&&typeof M.length=="number"){b=u.length||0;const F=M.length||0;u.length=b+F;for(let X=0;X<F;X++)u[b+X]=M[X]}else u.push(M)}}class v{constructor(p,b){this.i=p,this.j=b,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(u){a.setTimeout(()=>{throw u},0)}function T(){var u=E;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class _{constructor(){this.h=this.g=null}add(p,b){const D=S.get();D.set(p,b),this.h?this.h.next=D:this.g=D,this.h=D}}var S=new v(()=>new k,u=>u.reset());class k{constructor(){this.next=this.g=this.h=null}set(p,b){this.h=p,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let L,A=!1,E=new _,y=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(I)}};function I(){for(var u;u=T();){try{u.h.call(u.g)}catch(b){x(b)}var p=S;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}A=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};a.addEventListener("test",b,p),a.removeEventListener("test",b,p)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function U(u,p){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}f(U,R),U.prototype.init=function(u,p){const b=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(b=="mouseover"?p=u.fromElement:b=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&U.Z.h.call(this)},U.prototype.h=function(){U.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),Q=0;function te(u,p,b,D,M){this.listener=u,this.proxy=null,this.src=p,this.type=b,this.capture=!!D,this.ha=M,this.key=++Q,this.da=this.fa=!1}function O(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function G(u,p,b){for(const D in u)p.call(b,u[D],D,u)}function se(u,p){for(const b in u)p.call(void 0,u[b],b,u)}function V(u){const p={};for(const b in u)p[b]=u[b];return p}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(u,p){let b,D;for(let M=1;M<arguments.length;M++){D=arguments[M];for(b in D)u[b]=D[b];for(let F=0;F<W.length;F++)b=W[F],Object.prototype.hasOwnProperty.call(D,b)&&(u[b]=D[b])}}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,p,b,D,M){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const X=ee(u,p,D,M);return X>-1?(p=u[X],b||(p.fa=!1)):(p=new te(p,this.src,F,!!D,M),p.fa=b,u.push(p)),p};function J(u,p){const b=p.type;if(b in u.g){var D=u.g[b],M=Array.prototype.indexOf.call(D,p,void 0),F;(F=M>=0)&&Array.prototype.splice.call(D,M,1),F&&(O(p),u.g[b].length==0&&(delete u.g[b],u.h--))}}function ee(u,p,b,D){for(let M=0;M<u.length;++M){const F=u[M];if(!F.da&&F.listener==p&&F.capture==!!b&&F.ha==D)return M}return-1}var q="closure_lm_"+(Math.random()*1e6|0),ue={};function Le(u,p,b,D,M){if(Array.isArray(p)){for(let F=0;F<p.length;F++)Le(u,p[F],b,D,M);return null}return b=Pc(b),u&&u[K]?u.J(p,b,l(D)?!!D.capture:!1,M):Ce(u,p,b,!1,D,M)}function Ce(u,p,b,D,M,F){if(!p)throw Error("Invalid event type");const X=l(M)?!!M.capture:!!M;let we=Ar(u);if(we||(u[q]=we=new ve(u)),b=we.add(p,b,D,X,F),b.proxy)return b;if(D=be(),b.proxy=D,D.src=u,D.listener=b,u.addEventListener)j||(M=X),M===void 0&&(M=!1),u.addEventListener(p.toString(),D,M);else if(u.attachEvent)u.attachEvent(yn(p.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return b}function be(){function u(b){return p.call(u.src,u.listener,b)}const p=mi;return u}function Ie(u,p,b,D,M){if(Array.isArray(p))for(var F=0;F<p.length;F++)Ie(u,p[F],b,D,M);else D=l(D)?!!D.capture:!!D,b=Pc(b),u&&u[K]?(u=u.i,F=String(p).toString(),F in u.g&&(p=u.g[F],b=ee(p,b,D,M),b>-1&&(O(p[b]),Array.prototype.splice.call(p,b,1),p.length==0&&(delete u.g[F],u.h--)))):u&&(u=Ar(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ee(p,b,D,M)),(b=u>-1?p[u]:null)&&It(b))}function It(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[K])J(p.i,u);else{var b=u.type,D=u.proxy;p.removeEventListener?p.removeEventListener(b,D,u.capture):p.detachEvent?p.detachEvent(yn(b),D):p.addListener&&p.removeListener&&p.removeListener(D),(b=Ar(p))?(J(b,u),b.h==0&&(b.src=null,p[q]=null)):O(u)}}}function yn(u){return u in ue?ue[u]:ue[u]="on"+u}function mi(u,p){if(u.da)u=!0;else{p=new U(p,this);const b=u.listener,D=u.ha||u.src;u.fa&&It(u),u=b.call(D,p)}return u}function Ar(u){return u=u[q],u instanceof ve?u:null}var kr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pc(u){return typeof u=="function"?u:(u[kr]||(u[kr]=function(p){return u.handleEvent(p)}),u[kr])}function lt(){N.call(this),this.i=new ve(this),this.M=this,this.G=null}f(lt,N),lt.prototype[K]=!0,lt.prototype.removeEventListener=function(u,p,b,D){Ie(this,u,p,b,D)};function Kt(u,p){var b,D=u.G;if(D)for(b=[];D;D=D.G)b.push(D);if(u=u.M,D=p.type||p,typeof p=="string")p=new R(p,u);else if(p instanceof R)p.target=p.target||u;else{var M=p;p=new R(D,u),me(p,M)}M=!0;let F,X;if(b)for(X=b.length-1;X>=0;X--)F=p.g=b[X],M=Dc(F,D,!0,p)&&M;if(F=p.g=u,M=Dc(F,D,!0,p)&&M,M=Dc(F,D,!1,p)&&M,b)for(X=0;X<b.length;X++)F=p.g=b[X],M=Dc(F,D,!1,p)&&M}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const b=u.g[p];for(let D=0;D<b.length;D++)O(b[D]);delete u.g[p],u.h--}}this.G=null},lt.prototype.J=function(u,p,b,D){return this.i.add(String(u),p,!1,b,D)},lt.prototype.K=function(u,p,b,D){return this.i.add(String(u),p,!0,b,D)};function Dc(u,p,b,D){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let F=0;F<p.length;++F){const X=p[F];if(X&&!X.da&&X.capture==b){const we=X.listener,vt=X.ha||X.src;X.fa&&J(u.i,X),M=we.call(vt,D)!==!1&&M}}return M&&!D.defaultPrevented}function bA(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(u,p||0)}function Zv(u){u.g=bA(()=>{u.g=null,u.i&&(u.i=!1,Zv(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class EA extends N{constructor(p,b){super(),this.m=p,this.l=b,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Zv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ka(u){N.call(this),this.h=u,this.g={}}f(ka,N);var ex=[];function tx(u){G(u.g,function(p,b){this.g.hasOwnProperty(b)&&It(p)},u),u.g={}}ka.prototype.N=function(){ka.Z.N.call(this),tx(this)},ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ff=a.JSON.stringify,NA=a.JSON.parse,TA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function nx(){}function rx(){}var Ra={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mf(){R.call(this,"d")}f(mf,R);function pf(){R.call(this,"c")}f(pf,R);var pi={},sx=null;function Lc(){return sx=sx||new lt}pi.Ia="serverreachability";function ix(u){R.call(this,pi.Ia,u)}f(ix,R);function Pa(u){const p=Lc();Kt(p,new ix(p))}pi.STAT_EVENT="statevent";function ox(u,p){R.call(this,pi.STAT_EVENT,u),this.stat=p}f(ox,R);function Qt(u){const p=Lc();Kt(p,new ox(p,u))}pi.Ja="timingevent";function ax(u,p){R.call(this,pi.Ja,u),this.size=p}f(ax,R);function Da(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function La(){this.g=!0}La.prototype.ua=function(){this.g=!1};function SA(u,p,b,D,M,F){u.info(function(){if(u.g)if(F){var X="",we=F.split("&");for(let Fe=0;Fe<we.length;Fe++){var vt=we[Fe].split("=");if(vt.length>1){const Et=vt[0];vt=vt[1];const cr=Et.split("_");X=cr.length>=2&&cr[1]=="type"?X+(Et+"="+vt+"&"):X+(Et+"=redacted&")}}}else X=null;else X=F;return"XMLHTTP REQ ("+D+") [attempt "+M+"]: "+p+`
`+b+`
`+X})}function CA(u,p,b,D,M,F,X){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+M+"]: "+p+`
`+b+`
`+F+" "+X})}function oo(u,p,b,D){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+jA(u,b)+(D?" "+D:"")})}function IA(u,p){u.info(function(){return"TIMEOUT: "+p})}La.prototype.info=function(){};function jA(u,p){if(!u.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var b=F[u];if(!(b.length<2)){var D=b[1];if(Array.isArray(D)&&!(D.length<1)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<D.length;X++)D[X]=""}}}}return ff(F)}catch{return p}}var Oc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lx={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cx;function gf(){}f(gf,nx),gf.prototype.g=function(){return new XMLHttpRequest},cx=new gf;function Oa(u){return encodeURIComponent(String(u))}function AA(u){var p=1;u=u.split(":");const b=[];for(;p>0&&u.length;)b.push(u.shift()),p--;return u.length&&b.push(u.join(":")),b}function os(u,p,b,D){this.j=u,this.i=p,this.l=b,this.S=D||1,this.V=new ka(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ux}function ux(){this.i=null,this.g="",this.h=!1}var dx={},yf={};function vf(u,p,b){u.M=1,u.A=Vc(lr(p)),u.u=b,u.R=!0,hx(u,null)}function hx(u,p){u.F=Date.now(),Mc(u),u.B=lr(u.A);var b=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),Tx(b.i,"t",D),u.C=0,b=u.j.L,u.h=new ux,u.g=zx(u.j,b?p:null,!u.u),u.P>0&&(u.O=new EA(d(u.Y,u,u.g),u.P)),p=u.V,b=u.g,D=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(ex[0]=M.toString()),M=ex);for(let F=0;F<M.length;F++){const X=Le(b,M[F],D||p.handleEvent,!1,p.h||p);if(!X)break;p.g[X.key]=X}p=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Pa(),SA(u.i,u.v,u.B,u.l,u.S,u.u)}os.prototype.ba=function(u){u=u.target;const p=this.O;p&&cs(u)==3?p.j():this.Y(u)},os.prototype.Y=function(u){try{if(u==this.g)e:{const we=cs(this.g),vt=this.g.ya(),Fe=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Rx(this.g)))){this.K||we!=4||vt==7||(vt==8||Fe<=0?Pa(3):Pa(2)),xf(this);var p=this.g.ca();this.X=p;var b=kA(this);if(this.o=p==200,CA(this.i,this.v,this.B,this.l,this.S,we,p),this.o){if(this.U&&!this.L){t:{if(this.g){var D,M=this.g;if((D=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(D)){var F=D;break t}}F=null}if(u=F)oo(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wf(this,u);else{this.o=!1,this.m=3,Qt(12),gi(this),Ma(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<b.length;)if(Et=RA(this,b),Et==yf){we==4&&(this.m=4,Qt(14),u=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==dx){this.m=4,Qt(15),oo(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else oo(this.i,this.l,Et,null),wf(this,Et);if(fx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||b.length!=0||this.h.h||(this.m=1,Qt(16),u=!1),this.o=this.o&&u,!u)oo(this.i,this.l,b,"[Invalid Chunked Response]"),gi(this),Ma(this);else if(b.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),If(X),X.P=!0,Qt(11))}}else oo(this.i,this.l,b,null),wf(this,b);we==4&&gi(this),this.o&&!this.K&&(we==4?Fx(this.j,this):(this.o=!1,Mc(this)))}else qA(this.g),p==400&&b.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),gi(this),Ma(this)}}}catch{}finally{}};function kA(u){if(!fx(u))return u.g.la();const p=Rx(u.g);if(p==="")return"";let b="";const D=p.length,M=cs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gi(u),Ma(u),"";u.h.i=new a.TextDecoder}for(let F=0;F<D;F++)u.h.h=!0,b+=u.h.i.decode(p[F],{stream:!(M&&F==D-1)});return p.length=0,u.h.g+=b,u.C=0,u.h.g}function fx(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function RA(u,p){var b=u.C,D=p.indexOf(`
`,b);return D==-1?yf:(b=Number(p.substring(b,D)),isNaN(b)?dx:(D+=1,D+b>p.length?yf:(p=p.slice(D,D+b),u.C=D+b,p)))}os.prototype.cancel=function(){this.K=!0,gi(this)};function Mc(u){u.T=Date.now()+u.H,mx(u,u.H)}function mx(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Da(d(u.aa,u),p)}function xf(u){u.D&&(a.clearTimeout(u.D),u.D=null)}os.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(IA(this.i,this.B),this.M!=2&&(Pa(),Qt(17)),gi(this),this.m=2,Ma(this)):mx(this,this.T-u)};function Ma(u){u.j.I==0||u.K||Fx(u.j,u)}function gi(u){xf(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,tx(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function wf(u,p){try{var b=u.j;if(b.I!=0&&(b.g==u||_f(b.h,u))){if(!u.L&&_f(b.h,u)&&b.I==3){try{var D=b.Ba.g.parse(p)}catch{D=null}if(Array.isArray(D)&&D.length==3){var M=D;if(M[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)zc(b),Bc(b);else break e;Cf(b),Qt(18)}}else b.xa=M[1],0<b.xa-b.K&&M[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Da(d(b.Va,b),6e3));yx(b.h)<=1&&b.ta&&(b.ta=void 0)}else vi(b,11)}else if((u.L||b.g==u)&&zc(b),!P(p))for(M=b.Ba.g.parse(p),p=0;p<M.length;p++){let Fe=M[p];const Et=Fe[0];if(!(Et<=b.K))if(b.K=Et,Fe=Fe[1],b.I==2)if(Fe[0]=="c"){b.M=Fe[1],b.ba=Fe[2];const cr=Fe[3];cr!=null&&(b.ka=cr,b.j.info("VER="+b.ka));const xi=Fe[4];xi!=null&&(b.za=xi,b.j.info("SVER="+b.za));const us=Fe[5];us!=null&&typeof us=="number"&&us>0&&(D=1.5*us,b.O=D,b.j.info("backChannelRequestTimeoutMs_="+D)),D=b;const ds=u.g;if(ds){const Wc=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wc){var F=D.h;F.g||Wc.indexOf("spdy")==-1&&Wc.indexOf("quic")==-1&&Wc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(bf(F,F.h),F.h=null))}if(D.G){const jf=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;jf&&(D.wa=jf,We(D.J,D.G,jf))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),D=b;var X=u;if(D.na=$x(D,D.L?D.ba:null,D.W),X.L){vx(D.h,X);var we=X,vt=D.O;vt&&(we.H=vt),we.D&&(xf(we),Mc(we)),D.g=X}else Mx(D);b.i.length>0&&$c(b)}else Fe[0]!="stop"&&Fe[0]!="close"||vi(b,7);else b.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?vi(b,7):Sf(b):Fe[0]!="noop"&&b.l&&b.l.qa(Fe),b.A=0)}}Pa(4)}catch{}}var PA=class{constructor(u,p){this.g=u,this.map=p}};function px(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yx(u){return u.h?1:u.g?u.g.size:0}function _f(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function bf(u,p){u.g?u.g.add(p):u.h=p}function vx(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}px.prototype.cancel=function(){if(this.i=xx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function xx(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const b of u.g.values())p=p.concat(b.G);return p}return w(u.i)}var wx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DA(u,p){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const D=u[b].indexOf("=");let M,F=null;D>=0?(M=u[b].substring(0,D),F=u[b].substring(D+1)):M=u[b],p(M,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function as(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof as?(this.l=u.l,Va(this,u.j),this.o=u.o,this.g=u.g,Fa(this,u.u),this.h=u.h,Ef(this,Sx(u.i)),this.m=u.m):u&&(p=String(u).match(wx))?(this.l=!1,Va(this,p[1]||"",!0),this.o=Ua(p[2]||""),this.g=Ua(p[3]||"",!0),Fa(this,p[4]),this.h=Ua(p[5]||"",!0),Ef(this,p[6]||"",!0),this.m=Ua(p[7]||"")):(this.l=!1,this.i=new $a(null,this.l))}as.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Ba(p,_x,!0),":");var b=this.g;return(b||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ba(p,_x,!0),"@"),u.push(Oa(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Ba(b,b.charAt(0)=="/"?MA:OA,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Ba(b,FA)),u.join("")},as.prototype.resolve=function(u){const p=lr(this);let b=!!u.j;b?Va(p,u.j):b=!!u.o,b?p.o=u.o:b=!!u.g,b?p.g=u.g:b=u.u!=null;var D=u.h;if(b)Fa(p,u.u);else if(b=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var M=p.h.lastIndexOf("/");M!=-1&&(D=p.h.slice(0,M+1)+D)}if(M=D,M==".."||M==".")D="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){D=M.lastIndexOf("/",0)==0,M=M.split("/");const F=[];for(let X=0;X<M.length;){const we=M[X++];we=="."?D&&X==M.length&&F.push(""):we==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),D&&X==M.length&&F.push("")):(F.push(we),D=!0)}D=F.join("/")}else D=M}return b?p.h=D:b=u.i.toString()!=="",b?Ef(p,Sx(u.i)):b=!!u.m,b&&(p.m=u.m),p};function lr(u){return new as(u)}function Va(u,p,b){u.j=b?Ua(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Fa(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Ef(u,p,b){p instanceof $a?(u.i=p,UA(u.i,u.l)):(b||(p=Ba(p,VA)),u.i=new $a(p,u.l))}function We(u,p,b){u.i.set(p,b)}function Vc(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ua(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ba(u,p,b){return typeof u=="string"?(u=encodeURI(u).replace(p,LA),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function LA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _x=/[#\/\?@]/g,OA=/[#\?:]/g,MA=/[#\?]/g,VA=/[#\?@]/g,FA=/#/g;function $a(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function yi(u){u.g||(u.g=new Map,u.h=0,u.i&&DA(u.i,function(p,b){u.add(decodeURIComponent(p.replace(/\+/g," ")),b)}))}t=$a.prototype,t.add=function(u,p){yi(this),this.i=null,u=ao(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(p),this.h+=1,this};function bx(u,p){yi(u),p=ao(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ex(u,p){return yi(u),p=ao(u,p),u.g.has(p)}t.forEach=function(u,p){yi(this),this.g.forEach(function(b,D){b.forEach(function(M){u.call(p,M,D,this)},this)},this)};function Nx(u,p){yi(u);let b=[];if(typeof p=="string")Ex(u,p)&&(b=b.concat(u.g.get(ao(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)b=b.concat(u[p]);return b}t.set=function(u,p){return yi(this),this.i=null,u=ao(this,u),Ex(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=Nx(this,u),u.length>0?String(u[0]):p):p};function Tx(u,p,b){bx(u,p),b.length>0&&(u.i=null,u.g.set(ao(u,p),w(b)),u.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let D=0;D<p.length;D++){var b=p[D];const M=Oa(b);b=Nx(this,b);for(let F=0;F<b.length;F++){let X=M;b[F]!==""&&(X+="="+Oa(b[F])),u.push(X)}}return this.i=u.join("&")};function Sx(u){const p=new $a;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function ao(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function UA(u,p){p&&!u.j&&(yi(u),u.i=null,u.g.forEach(function(b,D){const M=D.toLowerCase();D!=M&&(bx(this,D),Tx(this,M,b))},u)),u.j=p}function BA(u,p){const b=new La;if(a.Image){const D=new Image;D.onload=h(ls,b,"TestLoadImage: loaded",!0,p,D),D.onerror=h(ls,b,"TestLoadImage: error",!1,p,D),D.onabort=h(ls,b,"TestLoadImage: abort",!1,p,D),D.ontimeout=h(ls,b,"TestLoadImage: timeout",!1,p,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else p(!1)}function $A(u,p){const b=new La,D=new AbortController,M=setTimeout(()=>{D.abort(),ls(b,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:D.signal}).then(F=>{clearTimeout(M),F.ok?ls(b,"TestPingServer: ok",!0,p):ls(b,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),ls(b,"TestPingServer: error",!1,p)})}function ls(u,p,b,D,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),D(b)}catch{}}function zA(){this.g=new TA}function Nf(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Nf,nx),Nf.prototype.g=function(){return new Fc(this.i,this.h)};function Fc(u,p){lt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Fc,lt),t=Fc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Ha(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cx(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cx(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?za(this):Ha(this),this.readyState==3&&Cx(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,za(this))},t.Na=function(u){this.g&&(this.response=u,za(this))},t.ga=function(){this.g&&za(this)};function za(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ha(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var b=p.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=p.next();return u.join(`\r
`)};function Ha(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ix(u){let p="";return G(u,function(b,D){p+=D,p+=":",p+=b,p+=`\r
`}),p}function Tf(u,p,b){e:{for(D in b){var D=!1;break e}D=!0}D||(b=Ix(b),typeof u=="string"?b!=null&&Oa(b):We(u,p,b))}function rt(u){lt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(rt,lt);var HA=/^https?$/i,WA=["POST","PUT"];t=rt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,b,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cx.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){jx(this,F);return}if(u=b||"",b=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var M in D)b.set(M,D[M]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const F of D.keys())b.set(F,D.get(F));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(b.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(WA,p,void 0)>=0)||D||M||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,X]of b)this.g.setRequestHeader(F,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){jx(this,F)}};function jx(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Ax(u),Uc(u)}function Ax(u){u.A||(u.A=!0,Kt(u,"complete"),Kt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Kt(this,"complete"),Kt(this,"abort"),Uc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uc(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kx(this):this.Xa())},t.Xa=function(){kx(this)};function kx(u){if(u.h&&typeof i<"u"){if(u.v&&cs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Kt(u,"readystatechange"),cs(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var b;if(!(b=p)){var D;if(D=F===0){let X=String(u.D).match(wx)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),D=!HA.test(X?X.toLowerCase():"")}b=D}if(b)Kt(u,"complete"),Kt(u,"success");else{u.o=6;try{var M=cs(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",Ax(u)}}finally{Uc(u)}}}}function Uc(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,p||Kt(u,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return cs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),NA(p)}};function Rx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qA(u){const p={};u=(u.g&&cs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(P(u[D]))continue;var b=AA(u[D]);const M=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const F=p[M]||[];p[M]=F,F.push(b)}se(p,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wa(u,p,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||p}function Px(u){this.za=0,this.i=[],this.j=new La,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wa("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wa("baseRetryDelayMs",5e3,u),this.Za=Wa("retryDelaySeedMs",1e4,u),this.Ta=Wa("forwardChannelMaxRetries",2,u),this.va=Wa("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new px(u&&u.concurrentRequestLimit),this.Ba=new zA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Px.prototype,t.ka=8,t.I=1,t.connect=function(u,p,b,D){Qt(0),this.W=u,this.H=p||{},b&&D!==void 0&&(this.H.OSID=b,this.H.OAID=D),this.F=this.X,this.J=$x(this,null,this.W),$c(this)};function Sf(u){if(Dx(u),u.I==3){var p=u.V++,b=lr(u.J);if(We(b,"SID",u.M),We(b,"RID",p),We(b,"TYPE","terminate"),qa(u,b),p=new os(u,u.j,p),p.M=2,p.A=Vc(lr(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!b&&a.Image&&(new Image().src=p.A,b=!0),b||(p.g=zx(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Mc(p)}Bx(u)}function Bc(u){u.g&&(If(u),u.g.cancel(),u.g=null)}function Dx(u){Bc(u),u.v&&(a.clearTimeout(u.v),u.v=null),zc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function $c(u){if(!gx(u.h)&&!u.m){u.m=!0;var p=u.Ea;L||y(),A||(L(),A=!0),E.add(p,u),u.D=0}}function GA(u,p){return yx(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Da(d(u.Ea,u,p),Ux(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new os(this,this.j,u);let F=this.o;if(this.U&&(F?(F=V(F),me(F,this.U)):F=this.U),this.u!==null||this.R||(M.J=F,F=null),this.S)e:{for(var p=0,b=0;b<this.i.length;b++){t:{var D=this.i[b];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(p+=D,p>4096){p=b;break e}if(p===4096||b===this.i.length-1){p=b+1;break e}}p=1e3}else p=1e3;p=Ox(this,M,p),b=lr(this.J),We(b,"RID",u),We(b,"CVER",22),this.G&&We(b,"X-HTTP-Session-Id",this.G),qa(this,b),F&&(this.R?p="headers="+Oa(Ix(F))+"&"+p:this.u&&Tf(b,this.u,F)),bf(this.h,M),this.Ra&&We(b,"TYPE","init"),this.S?(We(b,"$req",p),We(b,"SID","null"),M.U=!0,vf(M,b,null)):vf(M,b,p),this.I=2}}else this.I==3&&(u?Lx(this,u):this.i.length==0||gx(this.h)||Lx(this))};function Lx(u,p){var b;p?b=p.l:b=u.V++;const D=lr(u.J);We(D,"SID",u.M),We(D,"RID",b),We(D,"AID",u.K),qa(u,D),u.u&&u.o&&Tf(D,u.u,u.o),b=new os(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Ox(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),bf(u.h,b),vf(b,D,p)}function qa(u,p){u.H&&G(u.H,function(b,D){We(p,D,b)}),u.l&&G({},function(b,D){We(p,D,b)})}function Ox(u,p,b){b=Math.min(u.i.length,b);const D=u.l?d(u.l.Ka,u.l,u):null;e:{var M=u.i;let we=-1;for(;;){const vt=["count="+b];we==-1?b>0?(we=M[0].g,vt.push("ofs="+we)):we=0:vt.push("ofs="+we);let Fe=!0;for(let Et=0;Et<b;Et++){var F=M[Et].g;const cr=M[Et].map;if(F-=we,F<0)we=Math.max(0,M[Et].g-100),Fe=!1;else try{F="req"+F+"_"||"";try{var X=cr instanceof Map?cr:Object.entries(cr);for(const[xi,us]of X){let ds=us;l(us)&&(ds=ff(us)),vt.push(F+xi+"="+encodeURIComponent(ds))}}catch(xi){throw vt.push(F+"type="+encodeURIComponent("_badmap")),xi}}catch{D&&D(cr)}}if(Fe){X=vt.join("&");break e}}X=void 0}return u=u.i.splice(0,b),p.G=u,X}function Mx(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;L||y(),A||(L(),A=!0),E.add(p,u),u.A=0}}function Cf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Da(d(u.Da,u),Ux(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Vx(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Da(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Bc(this),Vx(this))};function If(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function Vx(u){u.g=new os(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=lr(u.na);We(p,"RID","rpc"),We(p,"SID",u.M),We(p,"AID",u.K),We(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(p,"TO",u.ia),We(p,"TYPE","xmlhttp"),qa(u,p),u.u&&u.o&&Tf(p,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Vc(lr(p)),b.u=null,b.R=!0,hx(b,u)}t.Va=function(){this.C!=null&&(this.C=null,Bc(this),Cf(this),Qt(19))};function zc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Fx(u,p){var b=null;if(u.g==p){zc(u),If(u),u.g=null;var D=2}else if(_f(u.h,p))b=p.G,vx(u.h,p),D=1;else return;if(u.I!=0){if(p.o)if(D==1){b=p.u?p.u.length:0,p=Date.now()-p.F;var M=u.D;D=Lc(),Kt(D,new ax(D,b)),$c(u)}else Mx(u);else if(M=p.m,M==3||M==0&&p.X>0||!(D==1&&GA(u,p)||D==2&&Cf(u)))switch(b&&b.length>0&&(p=u.h,p.i=p.i.concat(b)),M){case 1:vi(u,5);break;case 4:vi(u,10);break;case 3:vi(u,6);break;default:vi(u,2)}}}function Ux(u,p){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*p}function vi(u,p){if(u.j.info("Error code "+p),p==2){var b=d(u.bb,u),D=u.Ua;const M=!D;D=new as(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Va(D,"https"),Vc(D),M?BA(D.toString(),b):$A(D.toString(),b)}else Qt(2);u.I=0,u.l&&u.l.pa(p),Bx(u),Dx(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Bx(u){if(u.I=0,u.ja=[],u.l){const p=xx(u.h);(p.length!=0||u.i.length!=0)&&(C(u.ja,p),C(u.ja,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.oa()}}function $x(u,p,b){var D=b instanceof as?lr(b):new as(b);if(D.g!="")p&&(D.g=p+"."+D.g),Fa(D,D.u);else{var M=a.location;D=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const F=new as(null);D&&Va(F,D),p&&(F.g=p),M&&Fa(F,M),b&&(F.h=b),D=F}return b=u.G,p=u.wa,b&&p&&We(D,b,p),We(D,"VER",u.ka),qa(u,D),D}function zx(u,p,b){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new rt(new Nf({ab:b})):new rt(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hx(){}t=Hx.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Hc(){}Hc.prototype.g=function(u,p){return new vn(u,p)};function vn(u,p){lt.call(this),this.g=new Px(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!P(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!P(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new lo(this)}f(vn,lt),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Sf(this.g)},vn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=ff(u),u=b);p.i.push(new PA(p.Ya++,u)),p.I==3&&$c(p)},vn.prototype.N=function(){this.g.l=null,delete this.j,Sf(this.g),delete this.g,vn.Z.N.call(this)};function Wx(u){mf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const b in p){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}f(Wx,mf);function qx(){pf.call(this),this.status=1}f(qx,pf);function lo(u){this.g=u}f(lo,Hx),lo.prototype.ra=function(){Kt(this.g,"a")},lo.prototype.qa=function(u){Kt(this.g,new Wx(u))},lo.prototype.pa=function(u){Kt(this.g,new qx)},lo.prototype.oa=function(){Kt(this.g,"b")},Hc.prototype.createWebChannel=Hc.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,VT=function(){return new Hc},MT=function(){return Lc()},OT=pi,$p={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,Fu=Oc,lx.COMPLETE="complete",LT=lx,rx.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",lt.prototype.listen=lt.prototype.J,dl=rx,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,DT=rt}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const X0="@firebase/firestore",J0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new xh("@firebase/firestore");function po(){return Hi.logLevel}function ne(t,...e){if(Hi.logLevel<=Ee.DEBUG){const n=e.map($y);Hi.debug(`Firestore (${wa}): ${t}`,...n)}}function Xr(t,...e){if(Hi.logLevel<=Ee.ERROR){const n=e.map($y);Hi.error(`Firestore (${wa}): ${t}`,...n)}}function Jo(t,...e){if(Hi.logLevel<=Ee.WARN){const n=e.map($y);Hi.warn(`Firestore (${wa}): ${t}`,...n)}}function $y(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,FT(t,r,n)}function FT(t,e,n){let r=`FIRESTORE (${wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xr(r),new Error(r)}function De(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||FT(e,s,r)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class GM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KM{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string",31837,{l:r}),new UT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class QM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new QM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Z0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=JM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function zp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return fm(s)===fm(i)?Ne(s,i):fm(s)?1:-1}return Ne(t.length,e.length)}const ZM=55296,e3=57343;function fm(t){const e=t.charCodeAt(0);return e>=ZM&&e<=e3}function Zo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="__name__";class hr{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=hr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ne(e.length,n.length)}static compareSegments(e,n){const r=hr.isNumericId(e),s=hr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?hr.extractNumericId(e).compare(hr.extractNumericId(n)):zp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class ze extends hr{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const t3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends hr{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return t3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e_}static keyField(){return new kt([e_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(ze.fromString(e))}static fromName(e){return new ce(ze.fromString(e).popFirst(5))}static empty(){return new ce(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e,n){if(!n)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n3(t,e,n,r){if(e===!0&&r===!0)throw new Z(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t_(t){if(!ce.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n_(t){if(ce.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $T(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sh(t);throw new Z(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function r3(t,e){if(e<=0)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function bc(t,e){if(!$T(t))throw new Z(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=-62135596800,s_=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*s_);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r_)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/s_}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:gt("string",Ke._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ke(0,0))}static max(){return new ge(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=-1;function s3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new qs(s,ce.empty(),e)}function i3(t){return new qs(t.readTime,t.key,ec)}class qs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qs(ge.min(),ce.empty(),ec)}static max(){return new qs(ge.max(),ce.empty(),ec)}}function o3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==a3)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function c3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ch.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-1;function Ih(t){return t==null}function Rd(t){return t===0&&1/t==-1/0}function u3(t){return typeof t=="number"&&Number.isInteger(t)&&!Rd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="";function d3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=i_(e)),e=h3(t.get(n),e);return i_(e)}function h3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zT:n+="";break;default:n+=i}}return n}function i_(t){return t+zT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ci(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f3(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function HT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??At.RED,this.left=s??At.EMPTY,this.right=i??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new At(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return At.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(e){return new a_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class a_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new _t(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new WT("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const m3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=m3.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ks(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="server_timestamp",GT="__type__",KT="__previous_value__",QT="__local_write_time__";function Wy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[GT])==null?void 0:r.stringValue)===qT}function jh(t){const e=t.mapValue.fields[KT];return Wy(e)?jh(e):e}function tc(t){const e=Gs(t.mapValue.fields[QT].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Pd="(default)";class nc{constructor(e,n){this.projectId=e,this.database=n||Pd}static empty(){return new nc("","")}get isDefaultDatabase(){return this.database===Pd}isEqual(e){return e instanceof nc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="__type__",g3="__max__",hu={mapValue:{}},XT="__vector__",Dd="value";function Qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wy(t)?4:v3(t)?9007199254740991:y3(t)?10:11:fe(28295,{value:t})}function Sr(t,e){if(t===e)return!0;const n=Qs(t);if(n!==Qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tc(t).isEqual(tc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Gs(s.timestampValue),l=Gs(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ks(s.bytesValue).isEqual(Ks(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ct(s.geoPointValue.latitude)===ct(i.geoPointValue.latitude)&&ct(s.geoPointValue.longitude)===ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ct(s.integerValue)===ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=ct(s.doubleValue),l=ct(i.doubleValue);return a===l?Rd(a)===Rd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Zo(t.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(o_(a)!==o_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Sr(a[c],l[c])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function rc(t,e){return(t.values||[]).find(n=>Sr(n,e))!==void 0}function ea(t,e){if(t===e)return 0;const n=Qs(t),r=Qs(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=ct(i.integerValue||i.doubleValue),c=ct(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return l_(t.timestampValue,e.timestampValue);case 4:return l_(tc(t),tc(e));case 5:return zp(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Ks(i),c=Ks(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ne(l[d],c[d]);if(h!==0)return h}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ne(ct(i.latitude),ct(a.latitude));return l!==0?l:Ne(ct(i.longitude),ct(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return c_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,w,C,v;const l=i.fields||{},c=a.fields||{},d=(m=l[Dd])==null?void 0:m.arrayValue,h=(w=c[Dd])==null?void 0:w.arrayValue,f=Ne(((C=d==null?void 0:d.values)==null?void 0:C.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:c_(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===hu.mapValue&&a===hu.mapValue)return 0;if(i===hu.mapValue)return 1;if(a===hu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=zp(c[f],h[f]);if(m!==0)return m;const w=ea(l[c[f]],d[h[f]]);if(w!==0)return w}return Ne(c.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function l_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Gs(t),r=Gs(e),s=Ne(n.seconds,r.seconds);return s!==0?s:Ne(n.nanos,r.nanos)}function c_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ea(n[s],r[s]);if(i)return i}return Ne(n.length,r.length)}function ta(t){return Hp(t)}function Hp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Hp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Hp(n.fields[a])}`;return s+"}"}(t.mapValue):fe(61005,{value:t})}function Uu(t){switch(Qs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jh(t);return e?16+Uu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ks(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Uu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ci(r.fields,(i,a)=>{s+=i.length+Uu(a)}),s}(t.mapValue);default:throw fe(13486,{value:t})}}function u_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wp(t){return!!t&&"integerValue"in t}function qy(t){return!!t&&"arrayValue"in t}function d_(t){return!!t&&"nullValue"in t}function h_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bu(t){return!!t&&"mapValue"in t}function y3(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YT])==null?void 0:r.stringValue)===XT}function Cl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ci(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cl(t.arrayValue.values[n]);return e}return{...t}}function v3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===g3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Cl(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Bu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Bu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ci(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(Cl(this.value))}}function JT(t){const e=[];return ci(t.fields,(n,r)=>{const s=new kt([n]);if(Bu(r)){const i=JT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new $t(e,0,ge.min(),ge.min(),ge.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new $t(e,1,n,ge.min(),r,s,0)}static newNoDocument(e,n){return new $t(e,2,n,ge.min(),ge.min(),un.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,ge.min(),ge.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,n){this.position=e,this.inclusive=n}}function f_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(a.referenceValue),n.key):r=ea(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function m_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function x3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZT=class{};class pt extends ZT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _3(e,n,r):n==="array-contains"?new N3(e,r):n==="in"?new T3(e,r):n==="not-in"?new S3(e,r):n==="array-contains-any"?new C3(e,r):new pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b3(e,r):new E3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ea(n,this.value)):n!==null&&Qs(this.value)===Qs(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends ZT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ir(e,n)}matches(e){return eS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eS(t){return t.op==="and"}function tS(t){return w3(t)&&eS(t)}function w3(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function qp(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+ta(t.value);if(tS(t))return t.filters.map(e=>qp(e)).join(",");{const e=t.filters.map(n=>qp(n)).join(",");return`${t.op}(${e})`}}function nS(t,e){return t instanceof pt?function(r,s){return s instanceof pt&&r.op===s.op&&r.field.isEqual(s.field)&&Sr(r.value,s.value)}(t,e):t instanceof ir?function(r,s){return s instanceof ir&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&nS(a,s.filters[l]),!0):!1}(t,e):void fe(19439)}function rS(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(rS).join(" ,")+"}"}(t):"Filter"}class _3 extends pt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class b3 extends pt{constructor(e,n){super(e,"in",n),this.keys=sS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class E3 extends pt{constructor(e,n){super(e,"not-in",n),this.keys=sS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class N3 extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qy(n)&&rc(n.arrayValue,this.value)}}class T3 extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rc(this.value.arrayValue,n)}}class S3 extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!rc(this.value.arrayValue,n)}}class C3 extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function p_(t,e=null,n=[],r=[],s=null,i=null,a=null){return new I3(t,e,n,r,s,i,a)}function Gy(t){const e=pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ta(r)).join(",")),e.Te=n}return e.Te}function Ky(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m_(t.startAt,e.startAt)&&m_(t.endAt,e.endAt)}function Gp(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function j3(t,e,n,r,s,i,a,l){return new Ea(t,e,n,r,s,i,a,l)}function Ah(t){return new Ea(t)}function g_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iS(t){return t.collectionGroup!==null}function Il(t){const e=pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new _t(kt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new sc(i,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new sc(kt.keyField(),r))}return e.Ie}function _r(t){const e=pe(t);return e.Ee||(e.Ee=oS(e,Il(t))),e.Ee}function A3(t){const e=pe(t);return e.de||(e.de=oS(e,t.explicitOrderBy)),e.de}function oS(t,e){if(t.limitType==="F")return p_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new sc(s.field,i)});const n=t.endAt?new Ld(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ld(t.startAt.position,t.startAt.inclusive):null;return p_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kp(t,e){const n=t.filters.concat([e]);return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Od(t,e,n){return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kh(t,e){return Ky(_r(t),_r(e))&&t.limitType===e.limitType}function aS(t){return`${Gy(_r(t))}|lt:${t.limitType}`}function go(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rS(s)).join(", ")}]`),Ih(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ta(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ta(s)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function Rh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Il(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=f_(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Il(r),s)||r.endAt&&!function(a,l,c){const d=f_(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Il(r),s))}(t,e)}function k3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lS(t){return(e,n)=>{let r=!1;for(const s of Il(t)){const i=R3(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function R3(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ea(c,d):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return HT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=new nt(ce.comparator);function Jr(){return P3}const cS=new nt(ce.comparator);function hl(...t){let e=cS;for(const n of t)e=e.insert(n.key,n);return e}function uS(t){let e=cS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ji(){return jl()}function dS(){return jl()}function jl(){return new so(t=>t.toString(),(t,e)=>t.isEqual(e))}const D3=new nt(ce.comparator),L3=new _t(ce.comparator);function Te(...t){let e=L3;for(const n of t)e=e.add(n);return e}const O3=new _t(Ne);function M3(){return O3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function hS(t){return{integerValue:""+t}}function fS(t,e){return u3(e)?hS(e):Qy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function V3(t,e,n){return t instanceof Md?function(s,i){const a={fields:{[GT]:{stringValue:qT},[QT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Wy(i)&&(i=jh(i)),i&&(a.fields[KT]=i),{mapValue:a}}(n,e):t instanceof na?pS(t,e):t instanceof ic?gS(t,e):function(s,i){const a=mS(s,i),l=y_(a)+y_(s.Ae);return Wp(a)&&Wp(s.Ae)?hS(l):Qy(s.serializer,l)}(t,e)}function F3(t,e,n){return t instanceof na?pS(t,e):t instanceof ic?gS(t,e):n}function mS(t,e){return t instanceof oc?function(r){return Wp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Md extends Ph{}class na extends Ph{constructor(e){super(),this.elements=e}}function pS(t,e){const n=yS(e);for(const r of t.elements)n.some(s=>Sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class ic extends Ph{constructor(e){super(),this.elements=e}}function gS(t,e){let n=yS(e);for(const r of t.elements)n=n.filter(s=>!Sr(s,r));return{arrayValue:{values:n}}}class oc extends Ph{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function y_(t){return ct(t.integerValue||t.doubleValue)}function yS(t){return qy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.field=e,this.transform=n}}function U3(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof na&&s instanceof na||r instanceof ic&&s instanceof ic?Zo(r.elements,s.elements,Sr):r instanceof oc&&s instanceof oc?Sr(r.Ae,s.Ae):r instanceof Md&&s instanceof Md}(t.transform,e.transform)}class B3{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dh{}function xS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yy(t.key,On.none()):new Ec(t.key,t.data,On.none());{const n=t.data,r=un.empty();let s=new _t(kt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new ui(t.key,r,new bn(s.toArray()),On.none())}}function $3(t,e,n){t instanceof Ec?function(s,i,a){const l=s.value.clone(),c=x_(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ui?function(s,i,a){if(!$u(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=x_(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(wS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Al(t,e,n,r){return t instanceof Ec?function(i,a,l,c){if(!$u(i.precondition,a))return l;const d=i.value.clone(),h=w_(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ui?function(i,a,l,c){if(!$u(i.precondition,a))return l;const d=w_(i.fieldTransforms,c,a),h=a.data;return h.setAll(wS(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return $u(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function z3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=mS(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function v_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zo(r,s,(i,a)=>U3(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ec extends Dh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ui extends Dh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function x_(t,e,n){const r=new Map;De(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,F3(a,l,n[s]))}return r}function w_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,V3(i,a,e))}return r}class Yy extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H3 extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&$3(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Al(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Al(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=dS();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=xS(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(n,r)=>v_(n,r))&&Zo(this.baseMutations,e.baseMutations,(n,r)=>v_(n,r))}}class Xy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return D3}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Xy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,je;function Q3(t){switch(t){case B.OK:return fe(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function _S(t){if(t===void 0)return Xr("GRPC error has no .code"),B.UNKNOWN;switch(t){case ft.OK:return B.OK;case ft.CANCELLED:return B.CANCELLED;case ft.UNKNOWN:return B.UNKNOWN;case ft.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case ft.INTERNAL:return B.INTERNAL;case ft.UNAVAILABLE:return B.UNAVAILABLE;case ft.UNAUTHENTICATED:return B.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case ft.NOT_FOUND:return B.NOT_FOUND;case ft.ALREADY_EXISTS:return B.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return B.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case ft.ABORTED:return B.ABORTED;case ft.OUT_OF_RANGE:return B.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return B.UNIMPLEMENTED;case ft.DATA_LOSS:return B.DATA_LOSS;default:return fe(39323,{code:t})}}(je=ft||(ft={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=new $s([4294967295,4294967295],0);function __(t){const e=Y3().encode(t),n=new PT;return n.update(e),new Uint8Array(n.digest())}function b_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $s([n,r],0),new $s([s,i],0)]}class Jy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fl(`Invalid padding: ${n}`);if(r<0)throw new fl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=$s.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply($s.fromNumber(r)));return s.compare(X3)===1&&(s=new $s([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=__(e),[r,s]=b_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Jy(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=__(e),[r,s]=b_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lh(ge.min(),s,new nt(Ne),Jr(),Te())}}class Nc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nc(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class bS{constructor(e,n){this.targetId=e,this.Ce=n}}class ES{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class E_{constructor(){this.ve=0,this.Fe=N_(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe(38017,{changeType:i})}}),new Nc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=N_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class J3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jr(),this.Je=fu(),this.He=fu(),this.Ye=new nt(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Gp(i))if(r===0){const a=new ce(i.path);this.et(n,a,$t.newNoDocument(a,ge.min()))}else De(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Ks(r).toUint8Array()}catch(c){if(c instanceof WT)return Jo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Jy(a,s,i)}catch(c){return Jo(c instanceof fl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Gp(l.target)){const c=new ce(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,$t.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Te();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Lh(e,n,this.Ye,this.je,r);return this.je=Jr(),this.Je=fu(),this.He=fu(),this.Ye=new nt(Ne),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new E_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fu(){return new nt(ce.comparator)}function N_(){return new nt(ce.comparator)}const Z3={asc:"ASCENDING",desc:"DESCENDING"},eV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tV={and:"AND",or:"OR"};class nV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qp(t,e){return t.useProto3Json||Ih(e)?e:{value:e}}function Vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rV(t,e){return Vd(t,e.toTimestamp())}function br(t){return De(!!t,49232),ge.fromTimestamp(function(n){const r=Gs(n);return new Ke(r.seconds,r.nanos)}(t))}function Zy(t,e){return Yp(t,e).canonicalString()}function Yp(t,e){const n=function(s){return new ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TS(t){const e=ze.fromString(t);return De(kS(e),10190,{key:e.toString()}),e}function Xp(t,e){return Zy(t.databaseId,e.path)}function mm(t,e){const n=TS(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(CS(n))}function SS(t,e){return Zy(t.databaseId,e)}function sV(t){const e=TS(t);return e.length===4?ze.emptyPath():CS(e)}function Jp(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CS(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function T_(t,e,n){return{name:Xp(t,e),fields:n.value.mapValue.fields}}function iV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:fe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(De(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?B.UNKNOWN:_S(d.code);return new Z(h,d.message||"")}(a);n=new ES(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mm(t,r.document.name),i=br(r.document.updateTime),a=r.document.createTime?br(r.document.createTime):ge.min(),l=new un({mapValue:{fields:r.document.fields}}),c=$t.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new zu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mm(t,r.document),i=r.readTime?br(r.readTime):ge.min(),a=$t.newNoDocument(s,i),l=r.removedTargetIds||[];n=new zu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mm(t,r.document),i=r.removedTargetIds||[];n=new zu([],i,s,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new K3(s,i),l=r.targetId;n=new bS(l,a)}}return n}function oV(t,e){let n;if(e instanceof Ec)n={update:T_(t,e.key,e.value)};else if(e instanceof Yy)n={delete:Xp(t,e.key)};else if(e instanceof ui)n={update:T_(t,e.key,e.data),updateMask:pV(e.fieldMask)};else{if(!(e instanceof H3))return fe(16599,{Vt:e.type});n={verify:Xp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Md)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof na)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ic)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof oc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:rV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe(27497)}(t,e.precondition)),n}function aV(t,e){return t&&t.length>0?(De(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?br(s.updateTime):br(i);return a.isEqual(ge.min())&&(a=br(i)),new B3(a,s.transformResults||[])}(n,e))):[]}function lV(t,e){return{documents:[SS(t,e.path)]}}function IS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SS(t,s);const i=function(d){if(d.length!==0)return AS(ir.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ts(m.field),direction:hV(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Qp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function cV(t,e,n,r){const{ft:s,parent:i}=IS(t,e),a={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;a[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:Ts(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:Ts(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},gt:a,parent:i}}function uV(t){let e=sV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=jS(f);return m instanceof ir&&tS(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(C){return new sc(yo(C.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Ih(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,w=f.values||[];return new Ld(w,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,w=f.values||[];return new Ld(w,m)}(n.endAt)),j3(e,s,a,i,l,"F",c,d)}function dV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yo(n.unaryFilter.field);return pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=yo(n.unaryFilter.field);return pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yo(n.unaryFilter.field);return pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=yo(n.unaryFilter.field);return pt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return pt.create(yo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>jS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function hV(t){return Z3[t]}function fV(t){return eV[t]}function mV(t){return tV[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function yo(t){return kt.fromServerFormat(t.fieldPath)}function AS(t){return t instanceof pt?function(n){if(n.op==="=="){if(h_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(d_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(d_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:fV(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(s=>AS(s));return r.length===1?r[0]:{compositeFilter:{op:mV(n.op),filters:r}}}(t):fe(54877,{filter:t})}function pV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,i=ge.min(),a=ge.min(),l=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.yt=e}}function yV(t){const e=uV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Od(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(){this.Cn=new xV}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(qs.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(qs.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class xV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RS=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(RS,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ra(0)}static cr(){return new ra(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="LruGarbageCollector",wV=1048576;function I_([t,e],[n,r]){const s=Ne(t,n);return s===0?Ne(e,r):s}class _V{constructor(e){this.Ir=e,this.buffer=new _t(I_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();I_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ne(C_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ba(n)?ne(C_,"Ignoring IndexedDB error during garbage collection: ",n):await _a(n)}await this.Vr(3e5)})}}class EV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Ch.ce);const r=new _V(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ne("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(S_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),po()<=Ee.DEBUG&&ne("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function NV(t,e){return new EV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.changes=new so(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Al(r.mutation,s,bn.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=ji();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=hl();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Jr();const a=jl(),l=function(){return jl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof ui)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Al(h.mutation,d,h.mutation.getFieldMask(),Ke.now())):a.set(d.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new SV(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=jl();let s=new nt((a,l)=>a-l),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||bn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Te()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=dS();h.forEach(m=>{if(!i.has(m)){const w=xS(n.get(m),r.get(m));w!==null&&f.set(m,w),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return $.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(ji());let l=ec,c=i;return a.next(d=>$.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Te())).next(h=>({batchId:l,changes:uS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=hl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=hl();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,c=>{const d=function(f,m){return new Ea(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,$t.newInvalidDocument(h)))});let l=hl();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Al(h.mutation,d,bn.empty(),Ke.now()),Rh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:br(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:yV(s.bundledQuery),readTime:br(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(){this.overlays=new nt(ce.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ji();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=ji(),i=n.length+1,a=new ce(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new nt((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ji(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ji(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return $.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new q3(n,r));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.Qr=new _t(Nt.$r),this.Ur=new _t(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new ze([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new ze([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Te();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Nt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new W3(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(a)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Hy:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Ne);return n.forEach(s=>{const i=new Nt(s,0),a=new Nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const a=new Nt(new ce(i),0);let l=new _t(Ne);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),$.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.ri=e,this.docs=function(){return new nt(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Jr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$t.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jr();const a=n.path,l=new ce(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||o3(i3(h),r)<=0||(s.has(h.key)||Rh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){fe(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PV(this)}getSize(e){return $.resolve(this.size)}}class PV extends TV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.persistence=e,this.si=new so(n=>Gy(n),Ky),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new ev,this.targetCount=0,this.ai=ra.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ra(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ch(0),this.li=!1,this.li=!0,this.hi=new AV,this.referenceDelegate=e(this),this.Pi=new DV(this),this.indexManager=new vV,this.remoteDocumentCache=function(s){return new RV(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new gV(n),this.Ii=new IV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kV(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new LV(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class LV extends l3{constructor(e){super(),this.currentSequenceNumber=e}}class tv{constructor(e){this.persistence=e,this.Ri=new ev,this.Vi=null}static mi(e){return new tv(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=ce.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fd{constructor(e,n){this.persistence=e,this.pi=new so(r=>d3(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=NV(this,n)}static mi(e,n){return new Fd(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uu(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return UP()?8:c3(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new OV;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(po()<=Ee.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(po()<=Ee.DEBUG&&ne("QueryEngine","Query:",go(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(po()<=Ee.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):$.resolve())}ys(e,n){if(g_(n))return $.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Od(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Te(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Od(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return g_(n)||s.isEqual(ge.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?$.resolve(null):(po()<=Ee.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),go(n)),this.vs(e,a,n,s3(s,ec)).next(l=>l))})}Ds(e,n){let r=new _t(lS(e));return n.forEach((s,i)=>{Rh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return po()<=Ee.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,qs.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="LocalStore",VV=3e8;class FV{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new nt(Ne),this.xs=new so(i=>Gy(i),Ky),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UV(t,e,n,r){return new FV(t,e,n,r)}async function DS(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Te();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function BV(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let w=$.resolve();return m.forEach(C=>{w=w.next(()=>h.getEntry(c,C)).next(v=>{const x=d.docVersions.get(C);De(x!==null,48541),v.version.compareTo(x)<0&&(f.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function LS(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function $V(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(Ot.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),s=s.insert(f,w),function(v,x,T){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=VV?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,w,h)&&l.push(n.Pi.updateTargetData(i,w))});let c=Jr(),d=Te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(zV(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ge.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return $.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function zV(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Jr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ne(rv,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function HV(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Hy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WV(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new As(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Zp(t,e,n){const r=pe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ba(a))throw a;ne(rv,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function j_(t,e,n){const r=pe(t);let s=ge.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=pe(c),m=f.xs.get(h);return m!==void 0?$.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,_r(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:ge.min(),n?i:Te())).next(l=>(qV(r,k3(e),l),{documents:l,Qs:i})))}function qV(t,e,n){let r=t.Os.get(e)||ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class A_{constructor(){this.activeTargetIds=M3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GV{constructor(){this.Mo=new A_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new A_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="ConnectivityMonitor";class R_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ne(k_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ne(k_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function eg(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",QV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Pd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=eg(),l=this.zo(e,n.toUriEncodedString());ne(pm,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=ii(d);return this.Jo(e,l,c,r,h).then(f=>(ne(pm,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Jo(pm,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=QV[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class JV extends YV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=eg();return new Promise((l,c)=>{const d=new DT;d.setWithCredentials(!0),d.listenOnce(LT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Fu.NO_ERROR:const f=d.getResponseJson();ne(Ft,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Fu.TIMEOUT:ne(Ft,`RPC '${e}' ${a} timed out`),c(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const m=d.getStatus();if(ne(Ft,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const v=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(_)>=0?_:B.UNKNOWN}(C.status);c(new Z(v,C.message))}else c(new Z(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Z(B.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ne(Ft,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);ne(Ft,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=eg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=VT(),l=MT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ne(Ft,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,w=!1;const C=new XV({Yo:x=>{w?ne(Ft,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(ne(Ft,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),ne(Ft,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Zo:()=>f.close()}),v=(x,T,_)=>{x.listen(T,S=>{try{_(S)}catch(k){setTimeout(()=>{throw k},0)}})};return v(f,dl.EventType.OPEN,()=>{w||(ne(Ft,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),v(f,dl.EventType.CLOSE,()=>{w||(w=!0,ne(Ft,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(f))}),v(f,dl.EventType.ERROR,x=>{w||(w=!0,Jo(Ft,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),C.a_(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),v(f,dl.EventType.MESSAGE,x=>{var T;if(!w){const _=x.data[0];De(!!_,16349);const S=_,k=(S==null?void 0:S.error)||((T=S[0])==null?void 0:T.error);if(k){ne(Ft,`RPC '${e}' stream ${s} received error:`,k);const L=k.status;let A=function(I){const N=ft[I];if(N!==void 0)return _S(N)}(L),E=k.message;A===void 0&&(A=B.INTERNAL,E="Unknown error status: "+L+" with message "+k.message),w=!0,C.a_(new Z(A,E)),f.close()}else ne(Ft,`RPC '${e}' stream ${s} received:`,_),C.u_(_)}}),v(l,OT.STAT_EVENT,x=>{x.stat===$p.PROXY?ne(Ft,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===$p.NOPROXY&&ne(Ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){return new nV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="PersistentStream";class MS{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Z(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ne(P_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ne(P_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZV extends MS{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iV(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?br(a.readTime):ge.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Jp(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Gp(c)?{documents:lV(i,c)}:{query:IS(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=NS(i,a.resumeToken);const d=Qp(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ge.min())>0){l.readTime=Vd(i,a.snapshotVersion.toTimestamp());const d=Qp(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=dV(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Jp(this.serializer),n.removeTarget=e,this.q_(n)}}class e6 extends MS{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aV(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Jp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>oV(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{}class n6 extends t6{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Yp(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Yp(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(B.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class r6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xr(n),this.aa=!1):ne("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="RemoteStore";class s6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{io(this)&&(ne(Wi,"Restarting streams for network reachability change."),await async function(c){const d=pe(c);d.Ea.add(4),await Tc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Mh(d)}(this))})}),this.Ra=new r6(r,s)}}async function Mh(t){if(io(t))for(const e of t.da)await e(!0)}async function Tc(t){for(const e of t.da)await e(!1)}function VS(t,e){const n=pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),av(n)?ov(n):Na(n).O_()&&iv(n,e))}function sv(t,e){const n=pe(t),r=Na(n);n.Ia.delete(e),r.O_()&&FS(n,e),n.Ia.size===0&&(r.O_()?r.L_():io(n)&&n.Ra.set("Unknown"))}function iv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Na(t).Y_(e)}function FS(t,e){t.Va.Ue(e),Na(t).Z_(e)}function ov(t){t.Va=new J3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Na(t).start(),t.Ra.ua()}function av(t){return io(t)&&!Na(t).x_()&&t.Ia.size>0}function io(t){return pe(t).Ea.size===0}function US(t){t.Va=void 0}async function i6(t){t.Ra.set("Online")}async function o6(t){t.Ia.forEach((e,n)=>{iv(t,e)})}async function a6(t,e){US(t),av(t)?(t.Ra.ha(e),ov(t)):t.Ra.set("Unknown")}async function l6(t,e,n){if(t.Ra.set("Online"),e instanceof ES&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ne(Wi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ud(t,r)}else if(e instanceof zu?t.Va.Ze(e):e instanceof bS?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const r=await LS(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),FS(i,c);const f=new As(h.target,c,d,h.sequenceNumber);iv(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ne(Wi,"Failed to raise snapshot:",r),await Ud(t,r)}}async function Ud(t,e,n){if(!ba(e))throw e;t.Ea.add(1),await Tc(t),t.Ra.set("Offline"),n||(n=()=>LS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne(Wi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Mh(t)})}function BS(t,e){return e().catch(n=>Ud(t,n,e))}async function Vh(t){const e=pe(t),n=Ys(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hy;for(;c6(e);)try{const s=await HV(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,u6(e,s)}catch(s){await Ud(e,s)}$S(e)&&zS(e)}function c6(t){return io(t)&&t.Ta.length<10}function u6(t,e){t.Ta.push(e);const n=Ys(t);n.O_()&&n.X_&&n.ea(e.mutations)}function $S(t){return io(t)&&!Ys(t).x_()&&t.Ta.length>0}function zS(t){Ys(t).start()}async function d6(t){Ys(t).ra()}async function h6(t){const e=Ys(t);for(const n of t.Ta)e.ea(n.mutations)}async function f6(t,e,n){const r=t.Ta.shift(),s=Xy.from(r,e,n);await BS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Vh(t)}async function m6(t,e){e&&Ys(t).X_&&await async function(r,s){if(function(a){return Q3(a)&&a!==B.ABORTED}(s.code)){const i=r.Ta.shift();Ys(r).B_(),await BS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Vh(r)}}(t,e),$S(t)&&zS(t)}async function D_(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),ne(Wi,"RemoteStore received new credentials");const r=io(n);n.Ea.add(3),await Tc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Mh(n)}async function p6(t,e){const n=pe(t);e?(n.Ea.delete(2),await Mh(n)):e||(n.Ea.add(2),await Tc(n),n.Ra.set("Unknown"))}function Na(t){return t.ma||(t.ma=function(n,r,s){const i=pe(n);return i.sa(),new ZV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:i6.bind(null,t),t_:o6.bind(null,t),r_:a6.bind(null,t),H_:l6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),av(t)?ov(t):t.Ra.set("Unknown")):(await t.ma.stop(),US(t))})),t.ma}function Ys(t){return t.fa||(t.fa=function(n,r,s){const i=pe(n);return i.sa(),new e6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:d6.bind(null,t),r_:m6.bind(null,t),ta:h6.bind(null,t),na:f6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Vh(t)):(await t.fa.stop(),t.Ta.length>0&&(ne(Wi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new lv(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cv(t,e){if(Xr("AsyncQueue",`${e}: ${t}`),ba(t))return new Z(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=hl(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Uo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.ga=new nt(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class sa{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new sa(e,n,Uo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class y6{constructor(){this.queries=O_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=pe(n),i=s.queries;s.queries=O_(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function O_(){return new so(t=>aS(t),kh)}async function uv(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new g6,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=cv(a,`Initialization of query '${go(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&hv(n)}async function dv(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v6(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&hv(n)}function x6(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function hv(t){t.Ca.forEach(e=>{e.next()})}var tg,M_;(M_=tg||(tg={})).Ma="default",M_.Cache="cache";class fv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.key=e}}class WS{constructor(e){this.key=e}}class w6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=lS(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new L_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),w=Rh(this.query,f)?f:null,C=!!m&&this.mutatedKeys.has(m.key),v=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let x=!1;m&&w?m.data.isEqual(w.data)?C!==v&&(r.track({type:3,doc:w}),x=!0):this.su(m,w)||(r.track({type:2,doc:w}),x=!0,(c&&this.eu(w,c)>0||d&&this.eu(w,d)<0)&&(l=!0)):!m&&w?(r.track({type:0,doc:w}),x=!0):m&&!w&&(r.track({type:1,doc:m}),x=!0,(c||d)&&(l=!0)),x&&(w?(a=a.add(w),i=v?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(w,C){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:x})}};return v(w)-v(C)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new sa(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new L_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new WS(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new HS(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mv="SyncEngine";class _6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class b6{constructor(e){this.key=e,this.hu=!1}}class E6{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new so(l=>aS(l),kh),this.Iu=new Map,this.Eu=new Set,this.du=new nt(ce.comparator),this.Au=new Map,this.Ru=new ev,this.Vu={},this.mu=new Map,this.fu=ra.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function N6(t,e,n=!0){const r=XS(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await qS(r,e,n,!0),s}async function T6(t,e){const n=XS(t);await qS(n,e,!0,!1)}async function qS(t,e,n,r){const s=await WV(t.localStore,_r(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await S6(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&VS(t.remoteStore,s),l}async function S6(t,e,n,r,s){t.pu=(f,m,w)=>async function(v,x,T,_){let S=x.view.ru(T);S.Cs&&(S=await j_(v.localStore,x.query,!1).then(({documents:E})=>x.view.ru(E,S)));const k=_&&_.targetChanges.get(x.targetId),L=_&&_.targetMismatches.get(x.targetId)!=null,A=x.view.applyChanges(S,v.isPrimaryClient,k,L);return F_(v,x.targetId,A.au),A.snapshot}(t,f,m,w);const i=await j_(t.localStore,e,!0),a=new w6(e,i.Qs),l=a.ru(i.documents),c=Nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);F_(t,n,d.au);const h=new _6(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function C6(t,e,n){const r=pe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!kh(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sv(r.remoteStore,s.targetId),ng(r,s.targetId)}).catch(_a)):(ng(r,s.targetId),await Zp(r.localStore,s.targetId,!0))}async function I6(t,e){const n=pe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sv(n.remoteStore,r.targetId))}async function j6(t,e,n){const r=O6(t);try{const s=await function(a,l){const c=pe(a),d=Ke.now(),h=l.reduce((w,C)=>w.add(C.key),Te());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=Jr(),v=Te();return c.Ns.getEntries(w,h).next(x=>{C=x,C.forEach((T,_)=>{_.isValidDocument()||(v=v.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,C)).next(x=>{f=x;const T=[];for(const _ of l){const S=z3(_,f.get(_.key).overlayedDocument);S!=null&&T.push(new ui(_.key,S,JT(S.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(w,d,T,l)}).next(x=>{m=x;const T=x.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(w,x.batchId,T)})}).then(()=>({batchId:m.batchId,changes:uS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new nt(Ne)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Sc(r,s.changes),await Vh(r.remoteStore)}catch(s){const i=cv(s,"Failed to persist write");n.reject(i)}}async function GS(t,e){const n=pe(t);try{const r=await $V(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?De(a.hu,14607):s.removedDocuments.size>0&&(De(a.hu,42227),a.hu=!1))}),await Sc(n,r,e)}catch(r){await _a(r)}}function V_(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=pe(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&hv(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function A6(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new nt(ce.comparator);a=a.insert(i,$t.newNoDocument(i,ge.min()));const l=Te().add(i),c=new Lh(ge.min(),new Map,new nt(Ne),a,l);await GS(r,c),r.du=r.du.remove(i),r.Au.delete(e),pv(r)}else await Zp(r.localStore,e,!1).then(()=>ng(r,e,n)).catch(_a)}async function k6(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await BV(n.localStore,e);QS(n,r,null),KS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sc(n,s)}catch(s){await _a(s)}}async function R6(t,e,n){const r=pe(t);try{const s=await function(a,l){const c=pe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(De(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);QS(r,e,n),KS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sc(r,s)}catch(s){await _a(s)}}function KS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function QS(t,e,n){const r=pe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function ng(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||YS(t,r)})}function YS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),pv(t))}function F_(t,e,n){for(const r of n)r instanceof HS?(t.Ru.addReference(r.key,e),P6(t,r)):r instanceof WS?(ne(mv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||YS(t,r.key)):fe(19791,{wu:r})}function P6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ne(mv,"New document in limbo: "+n),t.Eu.add(r),pv(t))}function pv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(ze.fromString(e)),r=t.fu.next();t.Au.set(r,new b6(n)),t.du=t.du.insert(n,r),VS(t.remoteStore,new As(_r(Ah(n.path)),r,"TargetPurposeLimboResolution",Ch.ce))}}async function Sc(t,e,n){const r=pe(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=nv.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=pe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(d,m=>$.forEach(m.Es,w=>h.persistence.referenceDelegate.addReference(f,m.targetId,w)).next(()=>$.forEach(m.ds,w=>h.persistence.referenceDelegate.removeReference(f,m.targetId,w)))))}catch(f){if(!ba(f))throw f;ne(rv,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const w=h.Ms.get(m),C=w.snapshotVersion,v=w.withLastLimboFreeSnapshotVersion(C);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function D6(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){ne(mv,"User change. New user:",e.toKey());const r=await DS(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Z(B.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sc(n,r.Ls)}}function L6(t,e){const n=pe(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function XS(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A6.bind(null,e),e.Pu.H_=v6.bind(null,e.eventManager),e.Pu.yu=x6.bind(null,e.eventManager),e}function O6(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R6.bind(null,e),e}class Bd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UV(this.persistence,new MV,e.initialUser,this.serializer)}Cu(e){return new PS(tv.mi,this.serializer)}Du(e){return new GV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bd.provider={build:()=>new Bd};class M6 extends Bd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){De(this.persistence.referenceDelegate instanceof Fd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new PS(r=>Fd.mi(r,n),this.serializer)}}class rg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>V_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D6.bind(null,this.syncEngine),await p6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y6}()}createDatastore(e){const n=Oh(e.databaseInfo.databaseId),r=function(i){return new JV(i)}(e.databaseInfo);return function(i,a,l,c){return new n6(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new s6(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>V_(this.syncEngine,n,0),function(){return R_.v()?new R_:new KV}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new E6(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=pe(s);ne(Wi,"RemoteStore shutting down."),i.Ea.add(5),await Tc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}rg.provider={build:()=>new rg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="FirestoreClient";class V6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ut.UNAUTHENTICATED,this.clientId=zy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{ne(Xs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ne(Xs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ym(t,e){t.asyncQueue.verifyOperationInProgress(),ne(Xs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await DS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await F6(t);ne(Xs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>D_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>D_(e.remoteStore,s)),t._onlineComponents=e}async function F6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne(Xs,"Using user provided OfflineComponentProvider");try{await ym(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Jo("Error using user provided cache. Falling back to memory cache: "+n),await ym(t,new Bd)}}else ne(Xs,"Using default OfflineComponentProvider"),await ym(t,new M6(void 0));return t._offlineComponents}async function yv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne(Xs,"Using user provided OnlineComponentProvider"),await U_(t,t._uninitializedComponentsProvider._online)):(ne(Xs,"Using default OnlineComponentProvider"),await U_(t,new rg))),t._onlineComponents}function U6(t){return yv(t).then(e=>e.syncEngine)}function B6(t){return yv(t).then(e=>e.datastore)}async function $d(t){const e=await yv(t),n=e.eventManager;return n.onListen=N6.bind(null,e.syncEngine),n.onUnlisten=C6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I6.bind(null,e.syncEngine),n}function $6(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new gv({next:m=>{h.Nu(),a.enqueueAndForget(()=>dv(i,f));const w=m.docs.has(l);!w&&m.fromCache?d.reject(new Z(B.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&c&&c.source==="server"?d.reject(new Z(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new fv(Ah(l.path),h,{includeMetadataChanges:!0,qa:!0});return uv(i,f)}(await $d(t),t.asyncQueue,e,n,r)),r.promise}function z6(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new gv({next:m=>{h.Nu(),a.enqueueAndForget(()=>dv(i,f)),m.fromCache&&c.source==="server"?d.reject(new Z(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new fv(l,h,{includeMetadataChanges:!0,qa:!0});return uv(i,f)}(await $d(t),t.asyncQueue,e,n,r)),r.promise}function H6(t,e,n){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await B6(t);r.resolve(async function(a,l,c){var v;const d=pe(a),{request:h,gt:f,parent:m}=cV(d.serializer,A3(l),c);d.connection.$o||delete h.parent;const w=(await d.Ho("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(x=>!!x.result);De(w.length===1,64727);const C=(v=w[0].result)==null?void 0:v.aggregateFields;return Object.keys(C).reduce((x,T)=>(x[f[T]]=C[T],x),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firestore.googleapis.com",$_=!0;class z_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZS,this.ssl=$_}else this.host=e.host,this.ssl=e.ssl??$_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wV)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qM;switch(r.type){case"firstParty":return new YM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=B_.get(n);r&&(ne("ComponentProvider","Removing Datastore"),B_.delete(n),r.terminate())}(this),Promise.resolve()}}function W6(t,e,n,r={}){var d;t=nn(t,Fh);const s=ii(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Ey(`https://${l}`),Ny("Firestore",!0)),i.host!==ZS&&i.host!==l&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Kr(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ut.MOCK_USER;else{h=bN(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ut(m)}t._authCredentials=new GM(new UT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class it{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bc(n,it._jsonSchema))return new it(e,r||null,new ce(ze.fromString(n.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:gt("string",it._jsonSchemaVersion),referencePath:gt("string")};class zs extends is{constructor(e,n,r){super(e,n,Ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ce(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function Ct(t,e,...n){if(t=$e(t),BT("collection","path",e),t instanceof Fh){const r=ze.fromString(e,...n);return n_(r),new zs(t,null,r)}{if(!(t instanceof it||t instanceof zs))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return n_(r),new zs(t.firestore,null,r)}}function Be(t,e,...n){if(t=$e(t),arguments.length===1&&(e=zy.newId()),BT("doc","path",e),t instanceof Fh){const r=ze.fromString(e,...n);return t_(r),new it(t,null,new ce(r))}{if(!(t instanceof it||t instanceof zs))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return t_(r),new it(t.firestore,t instanceof zs?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="AsyncQueue";class W_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OS(this,"async_queue_retry"),this._c=()=>{const r=gm();r&&ne(H_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ba(e))throw e;ne(H_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xr("INTERNAL UNHANDLED ERROR: ",q_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=lv.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&fe(47125,{Pc:q_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function q_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Cr extends Fh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new W_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W_(e),this._firestoreClient=void 0,await e}}}function q6(t,e){const n=typeof t=="object"?t:wh(),r=typeof t=="string"?t:Pd,s=oi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=xN("firestore");i&&W6(s,...i)}return s}function Cc(t){if(t._terminated)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||G6(t),t._firestoreClient}function G6(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new p3(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new V6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class Q6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Ot.fromBase64String(e))}catch(n){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:gt("string",Pn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(bc(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:gt("string",Er._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,Nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nr(e.vectorValues);throw new Z(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:gt("string",Nr._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6=/^__.*__$/;class X6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ui(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ec(e,this.data,n,this.fieldTransforms)}}class eC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ui(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Bh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tC(this.Ac)&&Y6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oh(e)}Cc(e,n,r,s=!1){return new Bh({Ac:e,methodName:n,Dc:r,path:kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(t){const e=t._freezeSettings(),n=Oh(t._databaseId);return new J6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nC(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);wv("Data must be an object, but it was:",a,r);const l=rC(r,a);let c,d;if(i.merge)c=new bn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=sg(e,f,n);if(!a.contains(m))throw new Z(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);iC(h,m)||h.push(m)}c=new bn(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new X6(new un(l),c,d)}class zh extends Ic{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}function Z6(t,e,n){return new Bh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class vv extends Ic{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Z6(this,e,!0),r=this.vc.map(i=>Ta(i,n)),s=new na(r);return new vS(e.path,s)}isEqual(e){return e instanceof vv&&Kr(this.vc,e.vc)}}class xv extends Ic{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new oc(e.serializer,fS(e.serializer,this.Fc));return new vS(e.path,n)}isEqual(e){return e instanceof xv&&this.Fc===e.Fc}}function eF(t,e,n,r){const s=t.Cc(1,e,n);wv("Data must be an object, but it was:",s,r);const i=[],a=un.empty();ci(r,(c,d)=>{const h=_v(e,c,n);d=$e(d);const f=s.yc(h);if(d instanceof zh)i.push(h);else{const m=Ta(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new bn(i);return new eC(a,l,s.fieldTransforms)}function tF(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[sg(e,r,n)],c=[s];if(i.length%2!=0)throw new Z(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(sg(e,i[m])),c.push(i[m+1]);const d=[],h=un.empty();for(let m=l.length-1;m>=0;--m)if(!iC(d,l[m])){const w=l[m];let C=c[m];C=$e(C);const v=a.yc(w);if(C instanceof zh)d.push(w);else{const x=Ta(C,v);x!=null&&(d.push(w),h.set(w,x))}}const f=new bn(d);return new eC(h,f,a.fieldTransforms)}function nF(t,e,n,r=!1){return Ta(n,t.Cc(r?4:3,e))}function Ta(t,e){if(sC(t=$e(t)))return wv("Unsupported field value:",e,t),rC(t,e);if(t instanceof Ic)return function(r,s){if(!tC(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Ta(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Vd(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vd(s.serializer,i)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:NS(s.serializer,r._byteString)};if(r instanceof it){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nr)return function(a,l){return{mapValue:{fields:{[YT]:{stringValue:XT},[Dd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Qy(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Sh(r)}`)}(t,e)}function rC(t,e){const n={};return HT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,(r,s)=>{const i=Ta(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function sC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Er||t instanceof Pn||t instanceof it||t instanceof Ic||t instanceof Nr)}function wv(t,e,n){if(!sC(n)||!$T(n)){const r=Sh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function sg(t,e,n){if((e=$e(e))instanceof Uh)return e._internalPath;if(typeof e=="string")return _v(t,e);throw zd("Field path arguments must be of type string or ",t,!1,void 0,n)}const rF=new RegExp("[~\\*/\\[\\]]");function _v(t,e,n){if(e.search(rF)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uh(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Z(B.INVALID_ARGUMENT,l+t+c)}function iC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sF extends oC{data(){return super.data()}}function Hh(t,e){return typeof e=="string"?_v(t,e):e instanceof Uh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bv{}class Ev extends bv{}function Mn(t,e,...n){let r=[];e instanceof bv&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof Nv).length,l=i.filter(c=>c instanceof Wh).length;if(a>1||a>0&&l>0)throw new Z(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wh extends Ev{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wh(e,n,r)}_apply(e){const n=this._parse(e);return lC(e._query,n),new is(e.firestore,e.converter,Kp(e._query,n))}_parse(e){const n=$h(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Y_(f,h);const C=[];for(const v of f)C.push(Q_(c,i,v));m={arrayValue:{values:C}}}else m=Q_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Y_(f,h),m=nF(l,a,f,h==="in"||h==="not-in");return pt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xn(t,e,n){const r=e,s=Hh("where",t);return Wh._create(s,r,n)}class Nv extends bv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)lC(a,c),a=Kp(a,c)}(e._query,n),new is(e.firestore,e.converter,Kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tv extends Ev{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tv(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Z(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sc(i,a)}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Ea(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ia(t,e="asc"){const n=e,r=Hh("orderBy",t);return Tv._create(r,n)}class Sv extends Ev{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Sv(e,n,r)}_apply(e){return new is(e.firestore,e.converter,Od(e._query,this._limit,this._limitType))}}function K_(t){return r3("limit",t),Sv._create("limit",t,"F")}function Q_(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new Z(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iS(e)&&n.indexOf("/")!==-1)throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ze.fromString(n));if(!ce.isDocumentKey(r))throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return u_(t,new ce(r))}if(n instanceof it)return u_(t,n._key);throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(n)}.`)}function Y_(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lC(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iF{convertValue(e,n="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ci(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Dd].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>ct(a.doubleValue));return new Nr(n)}convertGeoPoint(e){return new Er(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(tc(e));default:return null}}convertTimestamp(e){const n=Gs(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);De(kS(r),9688,{name:e});const s=new nc(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||Xr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function oF(){return new K6("count")}class ml{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ri extends oC{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ri._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ri._jsonSchema={type:gt("string",Ri._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class Hu extends Ri{data(e={}){return super.data(e)}}class Pi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ml(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hu(this._firestore,this._userDataWriter,r.key,r,new ml(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Hu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ml(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Hu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ml(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:aF(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){t=nn(t,it);const e=nn(t.firestore,Cr);return $6(Cc(e),t._key).then(n=>hC(e,t,n))}Pi._jsonSchemaVersion="firestore/querySnapshot/1.0",Pi._jsonSchema={type:gt("string",Pi._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class qh extends iF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,n)}}function Vn(t){t=nn(t,is);const e=nn(t.firestore,Cr),n=Cc(e),r=new qh(e);return aC(t._query),z6(n,t._query).then(s=>new Pi(e,r,t,s))}function Cv(t,e,n){t=nn(t,it);const r=nn(t.firestore,Cr),s=cC(t.converter,e);return Gh(r,[nC($h(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,On.none())])}function dn(t,e,n,...r){t=nn(t,it);const s=nn(t.firestore,Cr),i=$h(s);let a;return a=typeof(e=$e(e))=="string"||e instanceof Uh?tF(i,"updateDoc",t._key,e,n,r):eF(i,"updateDoc",t._key,e),Gh(s,[a.toMutation(t._key,On.exists(!0))])}function lF(t){return Gh(nn(t.firestore,Cr),[new Yy(t._key,On.none())])}function uC(t,e){const n=nn(t.firestore,Cr),r=Be(t),s=cC(t.converter,e);return Gh(n,[nC($h(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}function dC(t,...e){var c,d,h;t=$e(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||G_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(G_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof it)a=nn(t.firestore,Cr),l=Ah(t._key.path),i={next:f=>{e[r]&&e[r](hC(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=nn(t,is);a=nn(f.firestore,Cr),l=f._query;const m=new qh(a);i={next:w=>{e[r]&&e[r](new Pi(a,m,f,w))},error:e[r+1],complete:e[r+2]},aC(t._query)}return function(m,w,C,v){const x=new gv(v),T=new fv(w,x,C);return m.asyncQueue.enqueueAndForget(async()=>uv(await $d(m),T)),()=>{x.Nu(),m.asyncQueue.enqueueAndForget(async()=>dv(await $d(m),T))}}(Cc(a),l,s,i)}function Gh(t,e){return function(r,s){const i=new wr;return r.asyncQueue.enqueueAndForget(async()=>j6(await U6(r),s,i)),i.promise}(Cc(t),e)}function hC(t,e,n){const r=n.docs.get(e._key),s=new qh(t);return new Ri(t,s,e._key,r,new ml(n.hasPendingWrites,n.fromCache),e.converter)}function vm(t){return cF(t,{count:oF()})}function cF(t,e){const n=nn(t.firestore,Cr),r=Cc(n),s=f3(e,(i,a)=>new G3(a,i.aggregateType,i._internalFieldPath));return H6(r,t._query,s).then(i=>function(l,c,d){const h=new qh(l);return new Q6(c,h,d)}(n,t,i))}function X_(...t){return new vv("arrayUnion",t)}function uF(t){return new xv("increment",t)}(function(e,n=!0){(function(s){wa=s})(ro),sr(new Bn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Cr(new KM(r.getProvider("auth-internal")),new XM(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gn(X0,J0,e),gn(X0,J0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="firebasestorage.googleapis.com",mC="storageBucket",dF=2*60*1e3,hF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends Hn{constructor(e,n,r=0){super(xm(e),`Firebase Storage: ${n} (${xm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ot||(ot={}));function xm(t){return"storage/"+t}function Iv(){const t="An unknown error occurred, please check the error payload for server response.";return new at(ot.UNKNOWN,t)}function fF(t){return new at(ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mF(t){return new at(ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(ot.UNAUTHENTICATED,t)}function gF(){return new at(ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yF(t){return new at(ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vF(){return new at(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xF(){return new at(ot.CANCELED,"User canceled the upload/download.")}function wF(t){return new at(ot.INVALID_URL,"Invalid URL '"+t+"'.")}function _F(t){return new at(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bF(){return new at(ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mC+"' property when initializing the app?")}function EF(){return new at(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NF(){return new at(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function TF(t){return new at(ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ig(t){return new at(ot.INVALID_ARGUMENT,t)}function pC(){return new at(ot.APP_DELETED,"The Firebase app was deleted.")}function SF(t){return new at(ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kl(t,e){return new at(ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function tl(t){throw new at(ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(r.path==="")return r;throw _F(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(k){k.path_=decodeURIComponent(k.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",w=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),C={bucket:1,path:3},v=n===fC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",T=new RegExp(`^https?://${v}/${s}/${x}`,"i"),S=[{regex:l,indices:c,postModify:i},{regex:w,indices:C,postModify:d},{regex:T,indices:{bucket:1,path:2},postModify:d}];for(let k=0;k<S.length;k++){const L=S[k],A=L.regex.exec(e);if(A){const E=A[L.indices.bucket];let y=A[L.indices.path];y||(y=""),r=new En(E,y),L.postModify(r);break}}if(r==null)throw wF(e);return r}}class CF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...x){d||(d=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(w,c())},x)}function m(){i&&clearTimeout(i)}function w(x,...T){if(d){m();return}if(x){m(),h.call(null,x,...T);return}if(c()||a){m(),h.call(null,x,...T);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,f(S)}let C=!1;function v(x){C||(C=!0,m(),!d&&(s!==null?(x||(l=2),clearTimeout(s),f(0)):x||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,v(!0)},n),v}function jF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t){return t!==void 0}function kF(t){return typeof t=="object"&&!Array.isArray(t)}function jv(t){return typeof t=="string"||t instanceof String}function J_(t){return Av()&&t instanceof Blob}function Av(){return typeof Blob<"u"}function Z_(t,e,n,r){if(r<e)throw ig(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ig(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function gC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Di;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Di||(Di={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,n,r,s,i,a,l,c,d,h,f,m=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,v)=>{this.resolve_=C,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===Di.NO_ERROR,c=i.getStatus();if(!l||RF(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Di.ABORT;r(!1,new pu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new pu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());AF(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=Iv();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?pC():xF();a(c)}else{const c=vF();a(c)}};this.canceled_?n(!1,new pu(!1,null,!0)):this.backoffId_=IF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function LF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function MF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function VF(t,e,n,r,s,i,a=!0,l=!1){const c=gC(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return OF(h,e),DF(h,n),LF(h,i),MF(h,r),new PF(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UF(...t){const e=FF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Av())return new Blob(t);throw new at(ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t){if(typeof atob>"u")throw TF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wm{constructor(e,n){this.data=e,this.contentType=n||null}}function zF(t,e){switch(t){case pr.RAW:return new wm(yC(e));case pr.BASE64:case pr.BASE64URL:return new wm(vC(t,e));case pr.DATA_URL:return new wm(WF(e),qF(e))}throw Iv()}function yC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function HF(t){let e;try{e=decodeURIComponent(t)}catch{throw kl(pr.DATA_URL,"Malformed data URL.")}return yC(e)}function vC(t,e){switch(t){case pr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw kl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case pr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw kl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$F(e)}catch(s){throw s.message.includes("polyfill")?s:kl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class xC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw kl(pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=GF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function WF(t){const e=new xC(t);return e.base64?vC(pr.BASE64,e.rest):HF(e.rest)}function qF(t){return new xC(t).contentType}function GF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){let r=0,s="";J_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(J_(this.data_)){const r=this.data_,s=BF(r,e,n);return s===null?null:new Ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ss(r,!0)}}static getBlob(...e){if(Av()){const n=e.map(r=>r instanceof Ss?r.data_:r);return new Ss(UF.apply(null,n))}else{const n=e.map(a=>jv(a)?zF(pr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new Ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){let e;try{e=JSON.parse(t)}catch{return null}return kF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function _C(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t,e){return e}class Yt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||YF}}let gu=null;function XF(t){return!jv(t)||t.length<2?t:_C(t)}function bC(){if(gu)return gu;const t=[];t.push(new Yt("bucket")),t.push(new Yt("generation")),t.push(new Yt("metageneration")),t.push(new Yt("name","fullPath",!0));function e(i,a){return XF(a)}const n=new Yt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Yt("size");return s.xform=r,t.push(s),t.push(new Yt("timeCreated")),t.push(new Yt("updated")),t.push(new Yt("md5Hash",null,!0)),t.push(new Yt("cacheControl",null,!0)),t.push(new Yt("contentDisposition",null,!0)),t.push(new Yt("contentEncoding",null,!0)),t.push(new Yt("contentLanguage",null,!0)),t.push(new Yt("contentType",null,!0)),t.push(new Yt("metadata","customMetadata",!0)),gu=t,gu}function JF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new En(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ZF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return JF(r,t),r}function EC(t,e,n){const r=wC(e);return r===null?null:ZF(t,r,n)}function e5(t,e,n,r){const s=wC(e);if(s===null||!jv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),w=kv(m,n,r),C=gC({alt:"media",token:d});return w+C})[0]}function t5(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class NC{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t){if(!t)throw Iv()}function n5(t,e){function n(r,s){const i=EC(t,s,e);return TC(i!==null),i}return n}function r5(t,e){function n(r,s){const i=EC(t,s,e);return TC(i!==null),e5(i,s,t.host,t._protocol)}return n}function SC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=gF():s=pF():n.getStatus()===402?s=mF(t.bucket):n.getStatus()===403?s=yF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function s5(t){const e=SC(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=fF(t.path)),i.serverResponse=s.serverResponse,i}return n}function i5(t,e,n){const r=e.fullServerUrl(),s=kv(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new NC(s,i,r5(t,n),a);return l.errorHandler=s5(e),l}function o5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function a5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=o5(null,e)),r}function l5(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let k=0;k<2;k++)S=S+Math.random().toString().slice(2);return S}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=a5(e,r,s),h=t5(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",w=Ss.getBlob(f,r,m);if(w===null)throw EF();const C={name:d.fullPath},v=kv(i,t.host,t._protocol),x="POST",T=t.maxUploadRetryTime,_=new NC(v,x,n5(t,n),T);return _.urlParams=C,_.headers=a,_.body=w.uploadData(),_.errorHandler=SC(e),_}class c5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Di.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Di.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Di.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw tl("cannot .send() more than once");if(ii(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class u5 extends c5{initXhr(){this.xhr_.responseType="text"}}function CC(){return new u5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new qi(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _C(this._location.path)}get storage(){return this._service}get parent(){const e=KF(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new qi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SF(e)}}function d5(t,e,n){t._throwIfRoot("uploadBytes");const r=l5(t.storage,t._location,bC(),new Ss(e,!0),n);return t.storage.makeRequestWithTokens(r,CC).then(s=>({metadata:s,ref:t}))}function h5(t){t._throwIfRoot("getDownloadURL");const e=i5(t.storage,t._location,bC());return t.storage.makeRequestWithTokens(e,CC).then(n=>{if(n===null)throw NF();return n})}function f5(t,e){const n=QF(t._location.path,e),r=new En(t._location.bucket,n);return new qi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(t){return/^[A-Za-z]+:\/\//.test(t)}function p5(t,e){return new qi(t,e)}function IC(t,e){if(t instanceof Rv){const n=t;if(n._bucket==null)throw bF();const r=new qi(n,n._bucket);return e!=null?IC(r,e):r}else return e!==void 0?f5(t,e):t}function g5(t,e){if(e&&m5(e)){if(t instanceof Rv)return p5(t,e);throw ig("To use ref(service, url), the first argument must be a Storage instance.")}else return IC(t,e)}function eb(t,e){const n=e==null?void 0:e[mC];return n==null?null:En.makeFromBucketSpec(n,t)}function y5(t,e,n,r={}){t.host=`${e}:${n}`;const s=ii(e);s&&(Ey(`https://${t.host}/b`),Ny("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:bN(i,t.app.options.projectId))}class Rv{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=fC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dF,this._maxUploadRetryTime=hF,this._requests=new Set,s!=null?this._bucket=En.makeFromBucketSpec(s,this._host):this._bucket=eb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=eb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Z_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Z_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new CF(pC());{const a=VF(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const tb="@firebase/storage",nb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC="storage";function v5(t,e,n){return t=$e(t),d5(t,e,n)}function x5(t){return t=$e(t),h5(t)}function w5(t,e){return t=$e(t),g5(t,e)}function _5(t=wh(),e){t=$e(t);const r=oi(t,jC).getImmediate({identifier:e}),s=xN("storage");return s&&b5(r,...s),r}function b5(t,e,n,r={}){y5(t,e,n,r)}function E5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Rv(n,r,s,e,ro)}function N5(){sr(new Bn(jC,E5,"PUBLIC").setMultipleInstances(!0)),gn(tb,nb,""),gn(tb,nb,"esm2020")}N5();const T5={apiKey:"AIzaSyAVk3CIK5hyAmjwVPh1p4i01vq-0Z5IsEA",authDomain:"zedctf.firebaseapp.com",projectId:"zedctf",storageBucket:"zedctf.firebasestorage.app",messagingSenderId:"574551910114",appId:"1:574551910114:web:8bcce937be224e1575a0bb",measurementId:"G-MEYRJGR69W"},Kh=jN(T5);BM(Kh);const ac=_O(Kh),ye=q6(Kh),S5=_5(Kh),AC=g.createContext({user:null,loading:!0}),kC=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(!0);return g.useEffect(()=>cL(ac,a=>{n(a),s(!1)}),[]),o.jsx(AC.Provider,{value:{user:e,loading:r},children:t})},RC=()=>{const t=g.useContext(AC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Wn=RC,PC=g.createContext({isAdmin:!1,isModerator:!1,permissions:[],loading:!0}),C5=({children:t})=>{const{user:e}=Wn(),[n,r]=g.useState({isAdmin:!1,isModerator:!1,permissions:[],loading:!0});return g.useEffect(()=>{if(!e){console.log(" AdminProvider: No user found"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1});return}return console.log(" AdminProvider: Checking user role for UID:",e.uid),dC(Be(ye,"users",e.uid),i=>{if(i.exists()){const a=i.data();console.log(" User document found:",a);const l=a.role||"user",c=a.permissions||["read"];console.log(" User role:",l),console.log(" User permissions:",c),r({isAdmin:l==="admin",isModerator:l==="moderator"||l==="admin",permissions:c,loading:!1})}else console.log(" No user document found in Firestore"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})},i=>{console.error(" Firestore error in AdminContext:",i),console.error("Error details:",i.code,i.message),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})})},[e]),o.jsx(PC.Provider,{value:n,children:t})},Qh=()=>{const t=g.useContext(PC);if(!t)throw new Error("useAdminContext must be used within an AdminProvider");return t},I5=({children:t})=>{const{loading:e}=Wn();return e?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsx(o.Fragment,{children:t})},uo=({children:t})=>{const{user:e,loading:n}=Wn();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(by,{to:"/login",replace:!0})},j5=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Qh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):!e&&!n?o.jsx(by,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:t})},nl=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Qh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):e||n?o.jsx(by,{to:"/admin",replace:!0}):o.jsx(o.Fragment,{children:t})};function rb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jc(...t){return e=>{let n=!1;const r=t.map(s=>{const i=rb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():rb(t[s],null)}}}}function Je(...t){return g.useCallback(jc(...t),t)}var A5=Symbol.for("react.lazy"),Hd=eh[" use ".trim().toString()];function k5(t){return typeof t=="object"&&t!==null&&"then"in t}function DC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===A5&&"_payload"in t&&k5(t._payload)}function Pv(t){const e=P5(t),n=g.forwardRef((r,s)=>{let{children:i,...a}=r;DC(i)&&typeof Hd=="function"&&(i=Hd(i._payload));const l=g.Children.toArray(i),c=l.find(L5);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var R5=Pv("Slot");function P5(t){const e=g.forwardRef((n,r)=>{let{children:s,...i}=n;if(DC(s)&&typeof Hd=="function"&&(s=Hd(s._payload)),g.isValidElement(s)){const a=M5(s),l=O5(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var D5=Symbol("radix.slottable");function L5(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===D5}function O5(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function M5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function LC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=LC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function OC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=LC(t))&&(r&&(r+=" "),r+=e);return r}const sb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ib=OC,Yh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ib(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=sb(h)||sb(f);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...w}=h;return Object.entries(w).every(C=>{let[v,x]=C;return Array.isArray(x)?x.includes({...i,...l}[v]):{...i,...l}[v]===x})?[...d,f,m]:d},[]);return ib(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},Dv="-",V5=t=>{const e=U5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Dv);return l[0]===""&&l.length!==1&&l.shift(),MC(l,e)||F5(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},MC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?MC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Dv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},ob=/^\[(.+)\]$/,F5=t=>{if(ob.test(t)){const e=ob.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},U5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return $5(Object.entries(t.classGroups),n).forEach(([i,a])=>{og(a,r,i,e)}),r},og=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ab(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(B5(s)){og(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{og(a,ab(e,i),n,r)})})},ab=(t,e)=>{let n=t;return e.split(Dv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},B5=t=>t.isThemeGetter,$5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,z5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},VC="!",H5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let x=0;x<l.length;x++){let T=l[x];if(d===0){if(T===s&&(r||l.slice(x,x+i)===e)){c.push(l.slice(h,x)),h=x+i;continue}if(T==="/"){f=x;continue}}T==="["?d++:T==="]"&&d--}const m=c.length===0?l:l.substring(h),w=m.startsWith(VC),C=w?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:w,baseClassName:C,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},W5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},q5=t=>({cache:z5(t.cacheSize),parseClassName:H5(t),...V5(t)}),G5=/\s+/,K5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(G5);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:w}=n(d);let C=!!w,v=r(C?m.substring(0,w):m);if(!v){if(!C){l=d+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=d+(l.length>0?" "+l:l);continue}C=!1}const x=W5(h).join(":"),T=f?x+VC:x,_=T+v;if(i.includes(_))continue;i.push(_);const S=s(v,C);for(let k=0;k<S.length;++k){const L=S[k];i.push(T+L)}l=d+(l.length>0?" "+l:l)}return l};function Q5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=FC(e))&&(r&&(r+=" "),r+=n);return r}const FC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=FC(t[r]))&&(n&&(n+=" "),n+=e);return n};function Y5(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=q5(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=K5(c,n);return s(c,h),h}return function(){return i(Q5.apply(null,arguments))}}const qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},UC=/^\[(?:([a-z-]+):)?(.+)\]$/i,X5=/^\d+\/\d+$/,J5=new Set(["px","full","screen"]),Z5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rr=t=>Bo(t)||J5.has(t)||X5.test(t),ms=t=>Sa(t,"length",dU),Bo=t=>!!t&&!Number.isNaN(Number(t)),_m=t=>Sa(t,"number",Bo),rl=t=>!!t&&Number.isInteger(Number(t)),sU=t=>t.endsWith("%")&&Bo(t.slice(0,-1)),xe=t=>UC.test(t),ps=t=>Z5.test(t),iU=new Set(["length","size","percentage"]),oU=t=>Sa(t,iU,BC),aU=t=>Sa(t,"position",BC),lU=new Set(["image","url"]),cU=t=>Sa(t,lU,fU),uU=t=>Sa(t,"",hU),sl=()=>!0,Sa=(t,e,n)=>{const r=UC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},dU=t=>eU.test(t)&&!tU.test(t),BC=()=>!1,hU=t=>nU.test(t),fU=t=>rU.test(t),mU=()=>{const t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),s=qe("borderColor"),i=qe("borderRadius"),a=qe("borderSpacing"),l=qe("borderWidth"),c=qe("contrast"),d=qe("grayscale"),h=qe("hueRotate"),f=qe("invert"),m=qe("gap"),w=qe("gradientColorStops"),C=qe("gradientColorStopPositions"),v=qe("inset"),x=qe("margin"),T=qe("opacity"),_=qe("padding"),S=qe("saturate"),k=qe("scale"),L=qe("sepia"),A=qe("skew"),E=qe("space"),y=qe("translate"),I=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",xe,e],j=()=>[xe,e],P=()=>["",Rr,ms],U=()=>["auto",Bo,xe],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",xe],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[Bo,xe];return{cacheSize:500,separator:":",theme:{colors:[sl],spacing:[Rr,ms],blur:["none","",ps,xe],brightness:V(),borderColor:[t],borderRadius:["none","","full",ps,xe],borderSpacing:j(),borderWidth:P(),contrast:V(),grayscale:G(),hueRotate:V(),invert:G(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[sU,ms],inset:R(),margin:R(),opacity:V(),padding:j(),saturate:V(),scale:V(),sepia:G(),skew:V(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[ps]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),xe]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rl,xe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",rl,xe]}],"grid-cols":[{"grid-cols":[sl]}],"col-start-end":[{col:["auto",{span:["full",rl,xe]},xe]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[sl]}],"row-start-end":[{row:["auto",{span:[rl,xe]},xe]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[ps]},ps]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ps,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_m]}],"font-family":[{font:[sl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",Bo,_m]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rr,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rr,ms]}],"underline-offset":[{"underline-offset":["auto",Rr,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),aU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[w]}],"gradient-via":[{via:[w]}],"gradient-to":[{to:[w]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Rr,xe]}],"outline-w":[{outline:[Rr,ms]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[Rr,ms]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ps,uU]}],"shadow-color":[{shadow:[sl]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...te(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ps,xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[rl,xe]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rr,ms,_m]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pU=Y5(mU);function Pe(...t){return pU(OC(t))}const gU=Yh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-all duration-300 shadow-[0_0_20px_rgba(0,255,136,0.3)] hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",terminal:"bg-card border border-primary/30 text-primary hover:border-primary hover:bg-primary/10 font-mono"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Y=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?R5:"button";return o.jsx(a,{className:Pe(gU({variant:e,size:n,className:t})),ref:i,...s})});Y.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$C=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...vU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:$C("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(xU,{ref:i,iconNode:e,className:$C(`lucide-${yU(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=re("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=re("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=re("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=re("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=re("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=re("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=re("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=re("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=re("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=re("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=re("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=re("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=re("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=re("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=re("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=re("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),WU="/ZedCTF/favicon.png",ht=()=>{var C;const[t,e]=g.useState(!1),{user:n}=Wn(),{isAdmin:r,isModerator:s,loading:i}=Qh(),a=zn(),l=to(),[c,d]=g.useState(!1),h=async()=>{d(!0);try{await uL(ac),a("/"),e(!1)}catch(v){console.error("Error signing out:",v)}finally{d(!1)}},f=v=>l.pathname===v,m=!i&&(r||s),w=!i&&!r&&!s;return o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-border bg-background/95 backdrop-blur-lg supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(Ue,{to:"/",className:"flex items-center gap-2",children:[o.jsx("img",{src:WU,alt:"ZedCTF",className:"w-8 h-8"}),o.jsx("span",{className:"text-2xl font-bold text-green-600",children:"ZedCTF"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[o.jsxs(Ue,{to:"/",className:`flex items-center gap-2 transition-colors group ${f("/")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(fb,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Home"]}),w&&o.jsxs(Ue,{to:"/dashboard",className:`flex items-center gap-2 transition-colors group ${f("/dashboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(lb,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Dashboard"]}),w&&o.jsxs(Ue,{to:"/practice",className:`flex items-center gap-2 transition-colors group ${f("/practice")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Zn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Practice"]}),w&&o.jsxs(Ue,{to:"/live",className:`flex items-center gap-2 transition-colors group ${f("/live")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(hb,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"LIVE CTF"]}),w&&o.jsxs(Ue,{to:"/leaderboard",className:`flex items-center gap-2 transition-colors group ${f("/leaderboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Dt,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Leaderboard"]}),w&&o.jsxs(Ue,{to:"/writeups",className:`flex items-center gap-2 transition-colors group ${f("/writeups")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Wd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Writeups"]}),m&&o.jsxs(Ue,{to:"/admin",className:`flex items-center gap-2 transition-colors group ${f("/admin")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Xe,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Admin"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[w&&o.jsx(Y,{variant:"ghost",size:"icon",className:"hidden sm:flex",children:o.jsx(ua,{className:"w-5 h-5"})}),w&&o.jsxs(Y,{variant:"ghost",size:"icon",className:"relative",children:[o.jsx(_U,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx(Y,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>e(!t),children:o.jsx(MU,{className:"w-5 h-5"})}),n?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-foreground/80 hidden sm:block",children:[n.displayName||((C=n.email)==null?void 0:C.split("@")[0]),m&&" (Admin)"]}),o.jsxs(Y,{variant:"default",size:"sm",className:"bg-red-500 hover:bg-red-600 text-white gap-2",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(pb,{className:"w-4 h-4"}),c?"...":"Logout"]})]}):o.jsx(Ue,{to:"/login",children:o.jsxs(Y,{variant:"default",size:"sm",className:"bg-green-500 hover:bg-green-600 text-white gap-2",children:[o.jsx(Sn,{className:"w-4 h-4"}),"Sign In"]})})]})]}),t&&o.jsx("div",{className:"md:hidden border-t border-border bg-background/95 backdrop-blur-lg animate-fade-in",children:o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs(Ue,{to:"/",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(fb,{className:"w-5 h-5"}),"Home"]}),w&&o.jsxs(Ue,{to:"/dashboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/dashboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(lb,{className:"w-5 h-5"}),"Dashboard"]}),w&&o.jsxs(Ue,{to:"/practice",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/practice")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Zn,{className:"w-5 h-5"}),"Practice"]}),w&&o.jsxs(Ue,{to:"/live",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/live")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(hb,{className:"w-5 h-5"}),"LIVE CTF"]}),w&&o.jsxs(Ue,{to:"/leaderboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/leaderboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Dt,{className:"w-5 h-5"}),"Leaderboard"]}),w&&o.jsxs(Ue,{to:"/writeups",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/writeups")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Wd,{className:"w-5 h-5"}),"Writeups"]}),m&&o.jsxs(Ue,{to:"/admin",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/admin")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Xe,{className:"w-5 h-5"}),"Admin"]}),o.jsx("div",{className:"px-4 pt-2 border-t border-border",children:n?o.jsxs(Y,{variant:"default",className:"w-full justify-start gap-2 bg-red-500 hover:bg-red-600",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(pb,{className:"w-4 h-4"}),c?"Signing out...":"Logout"]}):o.jsx(Ue,{to:"/login",onClick:()=>e(!1),children:o.jsxs(Y,{variant:"default",className:"w-full justify-start gap-2 bg-green-500 hover:bg-green-600",children:[o.jsx(Sn,{className:"w-4 h-4"}),"Sign In"]})})})]})})]})})},qU="/ZedCTF/assets/hero-bg-x4dJ88o_.jpg",GU=()=>{const[t,e]=g.useState({totalUsers:0,totalChallenges:0,liveEvents:0}),[n,r]=g.useState(!0),s=zn(),i=async()=>{try{const c={totalUsers:0,totalChallenges:0,liveEvents:0};try{const d=await vm(Ct(ye,"users"));c.totalUsers=d.data().count}catch{console.log("Could not count users")}try{const d=Mn(Ct(ye,"challenges"),Xn("isActive","==",!0)),h=await vm(d);c.totalChallenges=h.data().count}catch{console.log("Could not count challenges")}try{const d=await vm(Ct(ye,"events"));c.liveEvents=d.data().count}catch{console.log("Could not count events")}e(c)}catch{console.log("Stats loading completed")}finally{r(!1)}};g.useEffect(()=>{i()},[]);const a=()=>{s("/practice")},l=()=>{s("/live")};return o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:`url(${qU})`}}),o.jsx("div",{className:"absolute inset-0 cyber-grid opacity-10"}),o.jsx("div",{className:"container relative z-10 px-4 py-32",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border border-primary/30 bg-primary/5 mb-4",children:[o.jsx(GC,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm text-primary font-mono",children:"Zambia's Premier CTF Platform"})]}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:["Master Cybersecurity",o.jsx("br",{}),o.jsx("span",{className:"neon-text animate-pulse-glow",children:"Capture The Flag"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Sharpen your hacking skills, compete in real-time challenges, and climb the leaderboard. From beginner to expert, ZedCTF is your gateway to cybersecurity mastery."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[o.jsxs(Y,{onClick:a,variant:"neon",size:"lg",className:"group",children:["Start Practicing",o.jsx(wU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),o.jsxs(Y,{onClick:l,variant:"terminal",size:"lg",children:[o.jsx(CU,{className:"w-5 h-5"}),"Join LIVE Event"]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-12 max-w-2xl mx-auto",children:[o.jsx(Em,{loading:n,value:t.totalUsers,label:"Registered Users",icon:o.jsx(Dt,{className:"w-5 h-5"})}),o.jsx(Em,{loading:n,value:t.totalChallenges,label:"Active Challenges",icon:o.jsx(Xe,{className:"w-5 h-5"})}),o.jsx(Em,{loading:n,value:t.liveEvents,label:"Events",icon:o.jsx(Gi,{className:"w-5 h-5"})})]}),!n&&o.jsx("div",{className:"mt-4",children:o.jsx(Y,{variant:"outline",size:"sm",onClick:i,children:"Refresh Stats"})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent"})]})},Em=({loading:t,value:e,label:n,icon:r})=>t?o.jsxs("div",{className:"text-center animate-pulse",children:[o.jsx("div",{className:"h-8 bg-muted rounded w-16 mx-auto mb-2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-20 mx-auto"})]}):o.jsxs("div",{className:"text-center group",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl md:text-3xl font-bold text-primary mb-1",children:[r,e.toLocaleString()]}),o.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:n})]}),yt=()=>o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Xe,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-2xl font-bold neon-text",children:"ZedCTF"})]}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Zambia's premier platform for cybersecurity challenges and training."}),o.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:"An initiative by IT Society of Kapasa Makasa University"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Platform"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsx(Ue,{to:"/dashboard",className:"hover:text-primary transition-colors",children:"Dashboard"})}),o.jsx("li",{children:o.jsx(Ue,{to:"/practice",className:"hover:text-primary transition-colors",children:"Practice"})}),o.jsx("li",{children:o.jsx(Ue,{to:"/live",className:"hover:text-primary transition-colors",children:"LIVE Events"})}),o.jsx("li",{children:o.jsx(Ue,{to:"/leaderboard",className:"hover:text-primary transition-colors",children:"Leaderboard"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Resources"}),o.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:o.jsx("li",{children:o.jsx(Ue,{to:"/writeups",className:"hover:text-primary transition-colors",children:"Walkthroughs"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Connect"}),o.jsxs("div",{className:"flex gap-4 mb-4",children:[o.jsx("a",{href:"https://github.com/ZedCTF/ZedCTF",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(kU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(zU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(LU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(KC,{className:"w-5 h-5"})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-sm mb-2 text-primary flex items-center gap-2",children:[o.jsx(Dt,{className:"w-4 h-4"}),"Contributors"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[o.jsx("a",{href:"https://github.com/SokoJames",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"James Soko"}),o.jsx("a",{href:"https://github.com/abbymwale24",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Abby Mwale"}),o.jsx("a",{href:"https://github.com/Joylad-Jangazya",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Joylad Jangazya"}),o.jsx("a",{href:"https://github.com/Kono-hub",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Mary Chanda"}),o.jsx("a",{href:"https://github.com/ronny-brawn",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Aaron Nyakapanda"}),o.jsx("a",{href:"https://github.com/threat23",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Humphery Chileshe"})]})]})]})]}),o.jsxs("div",{className:"pt-8 border-t border-border text-center text-sm text-muted-foreground",children:[o.jsx("p",{children:" 2025 ZedCTF. All rights reserved. Made with  in Zambia"}),o.jsx("p",{className:"mt-1",children:"IT Society of Kapasa Makasa University"})]})]})}),KU=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(ht,{}),o.jsx(GU,{}),o.jsx(yt,{})]}),QU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({email:"",password:"",rememberMe:!1}),h=zn(),f=new Lr;f.addScope("read:user"),f.addScope("user:email");const m=async T=>{try{const _=await oa(Be(ye,"users",T));if(_.exists()){const S=_.data();if(S.role==="admin"||S.role==="moderator")return"/admin"}return"/dashboard"}catch(_){return console.error("Error checking user role:",_),"/dashboard"}},w=async T=>{T.preventDefault(),l(""),i(!0);try{const _=await iL(ac,c.email,c.password),S=await m(_.user.uid);h(S)}catch(_){console.error("Login error:",_),l(v(_.code))}finally{i(!1)}},C=async()=>{var T,_,S;r(!0),l("");try{const L=(await AL(ac,f)).user;if(!(await oa(Be(ye,"users",L.uid))).exists())await Cv(Be(ye,"users",L.uid),{uid:L.uid,firstName:((T=L.displayName)==null?void 0:T.split(" ")[0])||"GitHub",lastName:((_=L.displayName)==null?void 0:_.split(" ").slice(1).join(" "))||"User",username:((S=L.email)==null?void 0:S.split("@")[0])||`github_${L.uid.slice(0,8)}`,email:L.email,displayName:L.displayName||"GitHub User",photoURL:L.photoURL,provider:"github",role:"user",isActive:!0,createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard");else{const E=await m(L.uid);h(E)}}catch(k){console.error("GitHub login error:",k),k.code==="auth/account-exists-with-different-credential"?l("An account already exists with the same email address but different sign-in credentials."):k.code==="auth/popup-closed-by-user"?console.log("GitHub login popup closed by user"):l("GitHub login failed. Please try again.")}finally{r(!1)}},v=T=>{switch(T){case"auth/invalid-email":return"Invalid email address format.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/account-exists-with-different-credential":return"An account already exists with the same email address but different sign-in credentials.";default:return"Login failed. Please try again."}},x=T=>{const{name:_,value:S,type:k,checked:L}=T.target;d(A=>({...A,[_]:k==="checkbox"?L:S}))};return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Xe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-muted-foreground",children:"Access your cybersecurity dashboard"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsx("div",{className:"relative",children:o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:x,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:x,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all pr-12",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(lg,{className:"w-5 h-5"}):o.jsx(lc,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{name:"rememberMe",type:"checkbox",checked:c.rememberMe,onChange:x,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2",disabled:s}),o.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Remember me"})]}),o.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"})]}),o.jsxs("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Gd,{className:"w-5 h-5 animate-spin"}):o.jsx(OU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),s?"Signing in...":"Sign In"]})]}),o.jsxs("div",{className:"my-6 flex items-center",children:[o.jsx("div",{className:"flex-1 border-t border-border"}),o.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"or continue with"}),o.jsx("div",{className:"flex-1 border-t border-border"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.jsxs("button",{onClick:C,disabled:n||s,className:"flex items-center justify-center gap-2 px-4 py-3 bg-muted/50 border border-border rounded-lg text-foreground hover:bg-muted transition-colors hover:border-primary group disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(Gd,{className:"w-5 h-5 animate-spin"}):o.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),n?"Signing in with GitHub...":"Continue with GitHub"]})}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["New to ZedCTF?"," ",o.jsx(Ue,{to:"/signup",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Create an account"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(yt,{})]})},YU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:"",agreeToTerms:!1}),h=zn(),f=async C=>{if(C.preventDefault(),l(""),c.password!==c.confirmPassword){l("Passwords don't match!");return}if(c.password.length<6){l("Password should be at least 6 characters");return}if(!c.agreeToTerms){l("Please agree to the terms and conditions");return}i(!0);try{const x=(await sL(ac,c.email,c.password)).user;await eT(x,{displayName:`${c.firstName} ${c.lastName}`.trim()}),await Cv(Be(ye,"users",x.uid),{uid:x.uid,firstName:c.firstName,lastName:c.lastName,username:c.username,email:c.email,displayName:`${c.firstName} ${c.lastName}`.trim(),createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard")}catch(v){console.error("Registration error:",v),l(m(v.code))}finally{i(!1)}},m=C=>{switch(C){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak.";default:return"Registration failed. Please try again."}},w=C=>{const{name:v,value:x,type:T,checked:_}=C.target;d(S=>({...S,[v]:T==="checkbox"?_:x}))};return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Xe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Join the Community"}),o.jsx("p",{className:"text-muted-foreground",children:"Start your cybersecurity journey today"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground mb-2",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:c.firstName,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"John",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground mb-2",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:c.lastName,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Doe",disabled:s})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(KC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-foreground mb-2",children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:w,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"cyber_hacker",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(mb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:w,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(lg,{className:"w-5 h-5"}):o.jsx(lc,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(mb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",required:!0,value:c.confirmPassword,onChange:w,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:n?o.jsx(lg,{className:"w-5 h-5"}):o.jsx(lc,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-start",children:o.jsxs("label",{className:"flex items-start",children:[o.jsx("input",{name:"agreeToTerms",type:"checkbox",checked:c.agreeToTerms,onChange:w,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2 mt-1",disabled:s}),o.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["I agree to the"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Terms of Service"})," ","and"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Privacy Policy"})]})]})}),o.jsxs("button",{type:"submit",disabled:s||!c.agreeToTerms,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Gd,{className:"w-5 h-5 animate-spin"}):o.jsx(HU,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),s?"Creating Account...":"Create Account"]})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",o.jsx(Ue,{to:"/login",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(yt,{})]})},XU=()=>{const[t,e]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(""),[h,f]=g.useState("all"),[m,w]=g.useState("all"),[C,v]=g.useState("all"),[x,T]=g.useState(!0),[_]=g.useState(!1),S=async()=>{try{T(!0);const E=await fetch("/api/writeups");if(E.ok){const y=await E.json();e(y),r(y);const I=Array.from(new Set(y.map(R=>R.category))).filter(Boolean),N=Array.from(new Set(y.map(R=>R.difficulty))).filter(Boolean);i(I),l(N)}else e([]),r([]),i([]),l([])}catch{e([]),r([]),i([]),l([])}finally{T(!1)}};g.useEffect(()=>{S()},[]),g.useEffect(()=>{let A=t;c&&(A=A.filter(E=>E.title.toLowerCase().includes(c.toLowerCase())||E.description.toLowerCase().includes(c.toLowerCase())||E.tags.some(y=>y.toLowerCase().includes(c.toLowerCase())))),h!=="all"&&(A=A.filter(E=>E.category===h)),m!=="all"&&(A=A.filter(E=>E.difficulty===m)),C!=="all"&&(A=A.filter(E=>E.status===C)),r(A)},[c,h,m,C,t]);const k=A=>{switch(A){case"approved":return o.jsx(Br,{className:"w-4 h-4 text-green-400"});case"rejected":return o.jsx(la,{className:"w-4 h-4 text-red-400"});default:return o.jsx(Gi,{className:"w-4 h-4 text-yellow-400"})}},L=A=>{switch(A.toLowerCase()){case"easy":return"bg-primary/20 text-primary border-primary/30";case"medium":return"bg-secondary/20 text-secondary border-secondary/30";case"hard":return"bg-destructive/20 text-destructive border-destructive/30";case"insane":return"bg-purple-500/20 text-purple-500 border-purple-500/30";case"expert":return"bg-red-500/20 text-red-500 border-red-500/30";case"beginner":return"bg-green-500/20 text-green-500 border-green-500/30";default:return"bg-muted/20 text-muted-foreground border-muted/30"}};return x?o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading writeups..."})]})}),o.jsx(yt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Community ",o.jsx("span",{className:"text-primary",children:"Writeups"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Learn from other players' solutions and share your own approaches"})]}),o.jsxs("div",{className:"bg-muted/20 border border-border rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(ua,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"Search writeups, tags, challenges...",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:A=>f(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Categories"}),s.map(A=>o.jsx("option",{value:A,children:A},A))]})}),o.jsx("div",{children:o.jsxs("select",{value:m,onChange:A=>w(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Difficulties"}),a.map(A=>o.jsx("option",{value:A,children:A},A))]})})]}),_&&o.jsx("div",{className:"mt-4",children:o.jsxs("select",{value:C,onChange:A=>v(A.target.value),className:"w-full md:w-auto px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"}),o.jsx("option",{value:"rejected",children:"Rejected"})]})})]}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(Ue,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center gap-2",children:[o.jsx(Js,{className:"w-5 h-5"}),"New Writeup"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${L(A.difficulty)}`,children:A.difficulty}),o.jsxs("div",{className:"flex items-center gap-1",children:[k(A.status),o.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:A.status})]})]}),o.jsx("span",{className:"inline-block px-2 py-1 bg-primary/10 text-primary text-xs rounded border border-primary/20 mb-3",children:A.category}),o.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-3 group-hover:text-primary transition-colors line-clamp-2",children:A.title}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:A.description}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[o.jsx(Wd,{className:"w-4 h-4"}),o.jsxs("span",{children:["Challenge: ",A.challenge]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[A.tags.slice(0,3).map((E,y)=>o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["#",E]},y)),A.tags.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["+",A.tags.length-3]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:o.jsx(Sn,{className:"w-3 h-3 text-primary"})}),o.jsx("span",{className:"text-sm text-muted-foreground",children:A.author.name})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(lc,{className:"w-4 h-4"}),o.jsx("span",{children:A.views})]}),o.jsx("span",{children:new Date(A.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(Ue,{to:`/writeups/${A.id}`,className:"flex-1 bg-primary/10 text-primary border border-primary/20 py-2 px-4 rounded-lg text-center hover:bg-primary/20 transition-colors",children:"Read"}),_&&A.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 bg-green-500/10 text-green-500 border border-green-500/20 py-2 px-4 rounded-lg hover:bg-green-500/20 transition-colors",children:"Approve"}),o.jsx("button",{className:"flex-1 bg-red-500/10 text-red-500 border border-red-500/20 py-2 px-4 rounded-lg hover:bg-red-500/20 transition-colors",children:"Reject"})]})]})]},A.id))}),n.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Wd,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No writeups found"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:t.length===0?"No writeups have been submitted yet. Be the first to share your solution!":"Try adjusting your search or filters"}),o.jsxs(Ue,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 inline-flex items-center gap-2",children:[o.jsx(Js,{className:"w-5 h-5"}),"Create First Writeup"]})]})]})}),o.jsx(yt,{})]})},JU=()=>{const t=zn(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(""),[f,m]=g.useState(""),[w,C]=g.useState(""),[v,x]=g.useState(!1),[T,_]=g.useState([]),[S,k]=g.useState([]),[L,A]=g.useState([]),[E,y]=g.useState(!0),I=async()=>{try{y(!0);const j="/api/challenges/available",P="/api/categories",U="/api/difficulties",[K,Q,te]=await Promise.all([fetch(j),fetch(P),fetch(U)]);if(K.ok){const O=await K.json();_(O)}else _([]);if(Q.ok){const O=await Q.json();k(O),O.length>0&&h(O[0])}else k([]);if(te.ok){const O=await te.json();A(O),O.length>0&&m(O[0])}else A([])}catch{_([]),k([]),A([])}finally{y(!1)}},N=async j=>{j.preventDefault(),x(!0);try{(await fetch("/api/writeups/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:r,content:i,challengeId:l,category:d,difficulty:f,tags:w.split(",").map(U=>U.trim()).filter(U=>U)})})).ok?t("/writeups"):console.error("Failed to create writeup")}catch(P){console.error("Error creating writeup:",P)}finally{x(!1)}},R=(j,P)=>{document.execCommand(j,!1,P)};return g.useEffect(()=>{if(l){const j=T.find(P=>P.id===l);j&&(h(j.category),m(j.difficulty))}},[l,T]),g.useEffect(()=>{I()},[]),E?o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading form data..."})]})}),o.jsx(yt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto max-w-4xl",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Create ",o.jsx("span",{className:"text-primary",children:"Writeup"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Share your solution and help others learn from your approach"})]}),o.jsxs("form",{id:"writeup-form",onSubmit:N,className:"space-y-8",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Basic Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Writeup Title *"}),o.jsx("input",{type:"text",required:!0,value:e,onChange:j=>n(j.target.value),placeholder:"Enter a compelling title for your writeup...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),o.jsx("textarea",{required:!0,value:r,onChange:j=>s(j.target.value),placeholder:"Brief description of your writeup...",rows:3,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Challenge *"}),o.jsxs("select",{required:!0,value:l,onChange:j=>c(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"",children:"Select a challenge"}),T.map(j=>o.jsx("option",{value:j.id,children:j.title},j.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category *"}),o.jsx("select",{required:!0,value:d,onChange:j=>h(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:S.map(j=>o.jsx("option",{value:j,children:j},j))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty *"}),o.jsx("select",{required:!0,value:f,onChange:j=>m(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:L.map(j=>o.jsx("option",{value:j,children:j},j))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("input",{type:"text",value:w,onChange:j=>C(j.target.value),placeholder:"Comma-separated tags (e.g., sql-injection, web, bypass)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Writeup Content"}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-3 bg-muted/20 rounded-lg border border-border",children:[o.jsx("button",{type:"button",onClick:()=>R("bold"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bold",children:o.jsx(bU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("italic"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Italic",children:o.jsx(PU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("insertUnorderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bullet List",children:o.jsx(cg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("insertOrderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Numbered List",children:o.jsx(cg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const j=prompt("Enter URL:");j&&R("createLink",j)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Link",children:o.jsx(ca,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("formatBlock","<pre>"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Code Block",children:o.jsx(IU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const j=prompt("Enter image URL:");j&&R("insertImage",j)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Image",children:o.jsx(RU,{className:"w-4 h-4 text-foreground"})})]}),o.jsx("div",{contentEditable:!0,onInput:j=>a(j.currentTarget.innerHTML),className:"min-h-[400px] px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all prose prose-invert max-w-none",style:{fontFamily:"Georgia, serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":"Start writing your amazing writeup here... You can include code snippets, images, and formatted text."}),o.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Pro tips:"})]}),o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsx("li",{children:"Use the toolbar above to format your text"}),o.jsx("li",{children:"Include code snippets using the code block button"}),o.jsx("li",{children:"Add images to illustrate your steps"}),o.jsx("li",{children:"Break down complex solutions into clear steps"}),o.jsx("li",{children:"Share your thought process and learning moments"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsxs("button",{type:"button",className:"flex items-center gap-2 px-6 py-3 bg-muted text-muted-foreground rounded-lg font-semibold hover:bg-muted/80 transition-colors",onClick:()=>t("/writeups"),children:[o.jsx(lc,{className:"w-4 h-4"}),"Cancel"]}),o.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[v?o.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}):o.jsx(QC,{className:"w-4 h-4"}),v?"Publishing...":"Publish Writeup"]})]})]})]})}),o.jsx(yt,{})]})},yb=()=>new Promise(t=>{setTimeout(()=>{const e={id:"github-"+Date.now(),username:"zedctf_user",email:"user@zedctf.com",name:"ZedCTF User",avatar:"https://github.com/github.png",provider:"github"};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true"),t(e)},1500)}),ZU=()=>{const[t,e]=g.useState("loading"),[n,r]=g.useState(""),s=zn();return g.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search),l=a.get("code");if(a.get("error")){e("error"),r("GitHub authentication failed. Please try again.");return}try{if(await new Promise(d=>setTimeout(d,2e3)),l){const d=await yb();e("success"),r(`Welcome, ${d.username}! Successfully authenticated with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}else{const d=await yb();e("success"),r(`Welcome, ${d.username}! Successfully signed in with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}}catch(d){e("error"),r("Authentication failed. Please try again."),console.error("GitHub callback error:",d)}})()},[s]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx(Xe,{className:"w-10 h-10 text-green-400"}),o.jsx("span",{className:"text-3xl font-bold text-white",children:"ZedCTF"})]}),o.jsxs("div",{className:"space-y-4",children:[t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx(Gd,{className:"w-12 h-12 text-green-400 animate-spin mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Connecting to GitHub..."}),o.jsx("p",{className:"text-gray-300",children:"Please wait while we authenticate your account."})]}),t==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Br,{className:"w-12 h-12 text-green-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Successful!"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Redirecting to homepage..."})]}),t==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(la,{className:"w-12 h-12 text-red-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Failed"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Back to Login"}),o.jsx("button",{onClick:()=>s("/signup"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Try Sign Up"})]})]})]})]})})},e9=()=>{const t=to();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},ae=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ae.displayName="Card";const Oe=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("flex flex-col space-y-1.5 p-6",t),...e}));Oe.displayName="CardHeader";const Me=g.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Me.displayName="CardTitle";const Wt=g.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));Wt.displayName="CardDescription";const le=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("p-6 pt-0",t),...e}));le.displayName="CardContent";const t9=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("flex items-center p-6 pt-0",t),...e}));t9.displayName="CardFooter";const n9=({isOpen:t,onClose:e})=>{const{user:n}=Wn(),[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),d=g.useRef(null),[h,f]=g.useState({displayName:"",bio:"",role:"student",institution:""}),[m,w]=g.useState(null),[C,v]=g.useState("");g.useEffect(()=>{t&&n&&(async()=>{try{const E=await oa(Be(ye,"users",n.uid));if(E.exists()){const y=E.data();f({displayName:y.displayName||n.displayName||"",bio:y.bio||"",role:y.role||"student",institution:y.institution||""}),v(y.photoURL||n.photoURL||"")}else f({displayName:n.displayName||"",bio:"",role:"student",institution:""}),v(n.photoURL||"")}catch(E){console.error("Error fetching user data:",E)}})()},[t,n]);const x=A=>{const{name:E,value:y}=A.target;f(I=>({...I,[E]:y}))},T=async A=>{var y;const E=(y=A.target.files)==null?void 0:y[0];if(E){if(!E.type.startsWith("image/")){alert("Please select an image file");return}if(E.size>2*1024*1024){alert("Image size should be less than 2MB for faster upload");return}w(E);const I=URL.createObjectURL(E);v(I)}},_=(A,E=800,y=.8)=>new Promise((I,N)=>{const R=document.createElement("canvas"),j=R.getContext("2d"),P=new Image;P.onload=()=>{let U=P.width,K=P.height;U>E&&(K=K*E/U,U=E),R.width=U,R.height=K,j==null||j.drawImage(P,0,0,U,K),R.toBlob(Q=>{if(Q){const te=new File([Q],A.name,{type:"image/jpeg",lastModified:Date.now()});I(te)}else N(new Error("Image compression failed"))},"image/jpeg",y)},P.onerror=N,P.src=URL.createObjectURL(A)}),S=async(A,E)=>{const y=await _(A),N=`profile_${Date.now()}.jpg`,R=w5(S5,`profile-pictures/${E}/${N}`),j=await v5(R,y);return await x5(j.ref)},k=async A=>{if(A.preventDefault(),!!n){s(!0),c(!1);try{let E=n.photoURL;if(m){a(!0);try{E=await S(m,n.uid),console.log("Profile image uploaded successfully")}catch(I){console.error("Error uploading image:",I)}finally{a(!1)}}const y=[];(h.displayName!==n.displayName||E!==n.photoURL)&&y.push(eT(n,{displayName:h.displayName,photoURL:E})),y.push(dn(Be(ye,"users",n.uid),{displayName:h.displayName,bio:h.bio,role:h.role,institution:h.institution,photoURL:E,updatedAt:new Date})),await Promise.all(y),console.log("Profile updated successfully"),c(!0),setTimeout(()=>{e(),window.location.reload()},1e3)}catch(E){console.error("Error updating profile:",E),alert("Failed to update profile. Please try again.")}finally{s(!1)}}},L=()=>{var A;(A=d.current)==null||A.click()};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",disabled:r,children:o.jsx(Ki,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[l&&o.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded flex items-center gap-2",children:[o.jsx(Br,{className:"w-5 h-5"}),"Profile updated successfully!"]}),o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full bg-muted/50 border-2 border-border flex items-center justify-center overflow-hidden",children:C?o.jsx("img",{src:C,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Sn,{className:"w-12 h-12 text-muted-foreground"})}),o.jsx("button",{type:"button",onClick:L,disabled:i||r,className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 hover:bg-primary/90 transition-colors disabled:opacity-50",children:i?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(EU,{className:"w-4 h-4"})}),o.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:i||r})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:i?"Uploading image...":"Click the camera icon to upload a profile picture (max 2MB)"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-foreground mb-2",children:"Display Name"}),o.jsx("input",{id:"displayName",name:"displayName",type:"text",value:h.displayName,onChange:x,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Enter your display name",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-foreground mb-2",children:"Bio"}),o.jsx("textarea",{id:"bio",name:"bio",rows:3,value:h.bio,onChange:x,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none",placeholder:"Tell us about yourself...",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:"I am a"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"student",label:"Student",icon:Lv},{value:"lecturer",label:"Lecturer",icon:Dt},{value:"expert",label:"Expert",icon:zC},{value:"general",label:"General User",icon:Sn}].map(({value:A,label:E,icon:y})=>o.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-all ${h.role===A?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 text-foreground"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:A,checked:h.role===A,onChange:x,className:"hidden",disabled:r}),o.jsx(y,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:E})]},A))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-foreground mb-2",children:"Institution"}),o.jsx("input",{id:"institution",name:"institution",type:"text",value:h.institution,onChange:x,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Your school, university, or organization",disabled:r})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,disabled:r,className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r||i,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},r9=()=>{var A,E;const{user:t}=Wn(),e=zn(),[n,r]=g.useState(null),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(!1),[m,w]=g.useState(null),C=y=>{switch(y){case"student":return o.jsx(Lv,{className:"w-4 h-4"});case"lecturer":return o.jsx(Dt,{className:"w-4 h-4"});case"expert":return o.jsx(zC,{className:"w-4 h-4"});default:return o.jsx(Sn,{className:"w-4 h-4"})}},v=y=>{switch(y){case"student":return"Student";case"lecturer":return"Lecturer";case"expert":return"Expert";default:return"General User"}},x=y=>{try{if(!y)return"recently";let I;return y instanceof Date?I=y:y&&typeof y=="object"&&typeof y.toDate=="function"?I=y.toDate():typeof y=="string"?I=new Date(y):typeof y=="number"?I=new Date(y):I=new Date,isNaN(I.getTime())?"recently":I.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(I){return console.error("Date formatting error:",I),"recently"}},T=async(y,I)=>{try{console.log("Calculating REAL rank for user:",y,"with points:",I);const N=Mn(Ct(ye,"users"),ia("totalPoints","desc")),R=await Vn(N);if(R.empty)return console.log("No users found in database"),1;const j=R.docs.map(U=>({id:U.id,totalPoints:Number(U.data().totalPoints)||0,displayName:U.data().displayName||U.data().username||"Anonymous"}));console.log(`Found ${j.length} users for REAL rank calculation`);let P=1;for(let U=0;U<j.length;U++)if(j[U].id===y)return console.log(`User found at REAL position ${U+1} in leaderboard`),U+1;return console.log("User not found in leaderboard query, this shouldn't happen"),j.length+1}catch(N){return console.error("Error calculating REAL user rank:",N),0}},_=async y=>{try{const I=Mn(Ct(ye,"challenges"),Xn("isActive","==",!0)),N=await Vn(I),R=[];N.forEach(P=>{const U=P.data();U.solvedBy&&Array.isArray(U.solvedBy)&&U.solvedBy.includes(y)&&R.push({id:P.id,title:U.title||"Untitled Challenge",points:U.points||0,solvedAt:U.solvedAt||new Date,category:U.category||"general",difficulty:U.difficulty||"easy"})});const j=R.sort((P,U)=>{var te,O;const K=(te=P.solvedAt)!=null&&te.toDate?P.solvedAt.toDate():new Date(P.solvedAt);return((O=U.solvedAt)!=null&&O.toDate?U.solvedAt.toDate():new Date(U.solvedAt)).getTime()-K.getTime()}).slice(0,5);return console.log(`Found ${j.length} REAL solved challenges`),j}catch(I){return console.error("Error fetching REAL solved challenges:",I),[]}},S=async y=>{try{const I=Mn(Ct(ye,"events")),N=await Vn(I),R=[];N.forEach(P=>{const U=P.data();U.participants&&Array.isArray(U.participants)&&U.participants.includes(y)&&R.push({id:P.id,name:U.name||"Unnamed Event",date:U.date||"Unknown date",prize:U.prize||"Participation",position:U.position||0,pointsEarned:U.pointsEarned||0})});const j=R.sort((P,U)=>new Date(U.date).getTime()-new Date(P.date).getTime()).slice(0,5);return console.log(`Found ${j.length} REAL events participated`),j}catch(I){return console.error("Error fetching REAL events:",I),[]}},k=async()=>{var y,I,N,R,j,P;if(t)try{d(!0),console.log("Fetching REAL dashboard data for user:",t.uid);const U=await oa(Be(ye,"users",t.uid));if(U.exists()){const K=U.data();console.log("REAL user data from Firestore:",K),w(K);const Q=Number(K.totalPoints)||0,te=Number(K.challengesSolved)||0,O=await T(t.uid,Q),G=await _(t.uid),se=await S(t.uid);let V=K.createdAt;!V&&((y=t==null?void 0:t.metadata)!=null&&y.creationTime)&&(V=t.metadata.creationTime),r({totalPoints:Q,challengesSolved:te,currentRank:O,username:K.username||((I=t==null?void 0:t.email)==null?void 0:I.split("@")[0])||"Hacker",joinDate:V||new Date().toISOString(),firstName:K.firstName,lastName:K.lastName,displayName:K.displayName,bio:K.bio,role:K.role,institution:K.institution,photoURL:K.photoURL}),l(G),i(se)}else{console.log("No user document found in Firestore");const K=((N=t==null?void 0:t.metadata)==null?void 0:N.creationTime)||new Date().toISOString();r({totalPoints:0,challengesSolved:0,currentRank:0,username:((R=t==null?void 0:t.email)==null?void 0:R.split("@")[0])||"Hacker",joinDate:K}),l([]),i([])}}catch(U){console.error("Error fetching REAL dashboard data:",U);const K=((j=t==null?void 0:t.metadata)==null?void 0:j.creationTime)||new Date().toISOString();r({totalPoints:0,challengesSolved:0,currentRank:0,username:((P=t==null?void 0:t.email)==null?void 0:P.split("@")[0])||"Hacker",joinDate:K}),l([]),i([])}finally{d(!1)}},L=()=>{f(!1),setTimeout(()=>{k()},1e3)};return g.useEffect(()=>{t&&k()},[t]),c?o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{id:"dashboard",className:"pt-20 lg:pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading your dashboard..."})]})}),o.jsx(yt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{id:"dashboard",className:"pt-20 lg:pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsx("div",{className:"mb-6 lg:mb-8",children:o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-primary/20 rounded-full flex items-center justify-center overflow-hidden border-2 border-primary/30",children:t!=null&&t.photoURL||m!=null&&m.photoURL?o.jsx("img",{src:(t==null?void 0:t.photoURL)||(m==null?void 0:m.photoURL),alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Sn,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"})}),o.jsx("button",{onClick:()=>f(!0),className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground rounded-full p-1 hover:bg-primary/90 transition-colors",title:"Edit Profile",children:o.jsx(YC,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold break-words",children:["Welcome back,"," ",o.jsx("span",{className:"text-primary",children:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||(n==null?void 0:n.username)||((A=t==null?void 0:t.email)==null?void 0:A.split("@")[0])||"Hacker"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"break-all",children:t==null?void 0:t.email}),(m==null?void 0:m.role)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsxs("div",{className:"flex items-center gap-1",children:[C(m.role),o.jsx("span",{children:v(m.role)})]})]}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsxs("span",{className:"text-xs sm:text-sm",children:["Member since"," ",x(n==null?void 0:n.joinDate)]})]}),(m==null?void 0:m.institution)&&o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:m.institution}),(m==null?void 0:m.bio)&&o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1 line-clamp-2",children:m.bio})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 lg:mb-8",children:[o.jsxs(ae,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Oe,{className:"flex flex-row items-center justify-between pb-2 p-4",children:[o.jsx(Me,{className:"text-sm font-medium text-muted-foreground",children:"Total Points"}),o.jsx(Zn,{className:"w-5 h-5 text-primary"})]}),o.jsxs(le,{className:"p-4 pt-0",children:[o.jsx("div",{className:"text-2xl lg:text-3xl font-bold mb-2",children:((E=n==null?void 0:n.totalPoints)==null?void 0:E.toLocaleString())||"0"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",(n==null?void 0:n.challengesSolved)||0," solved challenges"]})]})]}),o.jsxs(ae,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Oe,{className:"flex flex-row items-center justify-between pb-2 p-4",children:[o.jsx(Me,{className:"text-sm font-medium text-muted-foreground",children:"Global Rank"}),o.jsx($U,{className:"w-5 h-5 text-primary"})]}),o.jsxs(le,{className:"p-4 pt-0",children:[o.jsx("div",{className:"text-2xl lg:text-3xl font-bold mb-2",children:n!=null&&n.currentRank?`#${n.currentRank}`:"Unranked"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Real position on global leaderboard"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ae,{className:"border-border",children:[o.jsx(Oe,{className:"p-4 sm:p-6",children:o.jsxs(Me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[o.jsx(ug,{className:"w-5 h-5 text-primary"}),"Recently Solved Challenges"]})}),o.jsx(le,{className:"p-4 sm:p-6 pt-0",children:a.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(ug,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base",children:"No challenges solved yet"}),o.jsx("p",{className:"text-sm mt-2 mb-4",children:"Solve challenges to see them here"}),o.jsx("button",{onClick:()=>e("/challenges"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm",children:"Browse Challenges"})]}):o.jsx("div",{className:"space-y-4",children:a.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/20 border border-border hover:bg-muted/40 cursor-pointer transition-colors",onClick:()=>e(`/challenge/${y.id}`),children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base hover:text-primary transition-colors",children:y.title}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"capitalize",children:y.category}),o.jsx("span",{children:""}),o.jsx("span",{className:"capitalize",children:y.difficulty})]})]}),o.jsxs("div",{className:"text-primary font-bold text-lg",children:["+",y.points]})]},y.id))})})]}),o.jsxs(ae,{className:"border-border",children:[o.jsx(Oe,{className:"p-4 sm:p-6",children:o.jsxs(Me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[o.jsx(aa,{className:"w-5 h-5 text-primary"}),"Events Participated In"]})}),o.jsx(le,{className:"p-4 sm:p-6 pt-0",children:s.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(aa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base",children:"No events participated yet"}),o.jsx("p",{className:"text-sm mt-2 mb-4",children:"Join CTF events to compete"}),o.jsx("button",{onClick:()=>e("/events"),className:"px-6 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 transition-colors text-sm",children:"View Events"})]}):o.jsx("div",{className:"space-y-4",children:s.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base",children:y.name}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{children:x(y.date)}),y.position>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Position: #",y.position]})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-secondary font-bold",children:y.prize}),y.pointsEarned>0&&o.jsxs("div",{className:"text-sm text-primary",children:["+",y.pointsEarned," pts"]})]})]},y.id))})})]})]})]})}),o.jsx(yt,{}),o.jsx(n9,{isOpen:h,onClose:L})]})},s9=Yh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Se({className:t,variant:e,...n}){return o.jsx("div",{className:Pe(s9({variant:e}),t),...n})}const de=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));de.displayName="Input";const i9=()=>{const{user:t}=Wn(),e=zn(),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[m,w]=g.useState(null),[C,v]=g.useState(""),[x,T]=g.useState(!1);g.useEffect(()=>{_()},[]),g.useEffect(()=>{k()},[h,m,n]);const _=async()=>{try{d(!0),v("");const j=Mn(Ct(ye,"challenges"),Xn("isActive","==",!0),Xn("availableInPractice","==",!0)),U=(await Vn(j)).docs.map(K=>({id:K.id,...K.data()}));r(U),S(U)}catch(j){console.error("Error fetching practice challenges:",j),v("Failed to load challenges. Please check your permissions.")}finally{d(!1)}},S=j=>{const P=new Map;j.forEach(Q=>{const te=Q.finalCategory||Q.category;P.set(te,(P.get(te)||0)+1)});const U={web:{color:"from-blue-500 to-cyan-500",icon:"",description:"Web application security, SQL injection, XSS, and more"},crypto:{color:"from-purple-500 to-pink-500",icon:"",description:"Cryptography, encryption, and cryptographic attacks"},forensics:{color:"from-orange-500 to-red-500",icon:"",description:"Digital forensics, file analysis, and data recovery"},pwn:{color:"from-red-500 to-rose-500",icon:"",description:"Binary exploitation, memory corruption, and reverse engineering"},reversing:{color:"from-indigo-500 to-purple-500",icon:"",description:"Reverse engineering and malware analysis"},misc:{color:"from-gray-500 to-slate-500",icon:"",description:"Miscellaneous challenges and various security topics"}},K=Array.from(P.entries()).map(([Q,te])=>{const O=U[Q.toLowerCase()]||{color:"from-gray-500 to-slate-500",icon:"",description:"Various security challenges"};return{name:Q,count:te,icon:O.icon,color:O.color,description:O.description}});K.sort((Q,te)=>te.count-Q.count),i(K)},k=()=>{let j=[...n];h&&(j=j.filter(P=>P.title.toLowerCase().includes(h.toLowerCase())||P.description.toLowerCase().includes(h.toLowerCase()))),m&&(j=j.filter(P=>(P.finalCategory||P.category)===m)),j=j.sort((P,U)=>(U.totalPoints||U.points)-(P.totalPoints||P.points)),l(j)},L=j=>{switch(j){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},A=j=>{switch(j){case"easy":return"Easy";case"medium":return"Medium";case"hard":return"Hard";case"expert":return"Expert";default:return j}},E=j=>{e(`/challenge/${j}`)},y=()=>{e("/live")},I=()=>{_()},N=()=>{f(""),w(null),T(!1)},R=j=>{w(j),T(!1)};return c?o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading practice challenges..."})]})})}),o.jsx(yt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex justify-center mb-3",children:o.jsx(Xe,{className:"w-12 h-12 text-primary sm:w-16 sm:h-16"})}),o.jsx("h1",{className:"text-2xl sm:text-4xl font-bold mb-3 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Practice Challenges"}),o.jsx("p",{className:"text-sm sm:text-xl text-muted-foreground max-w-2xl mx-auto mb-4",children:"Master your cybersecurity skills with hands-on challenges"}),C&&o.jsx(ae,{className:"max-w-2xl mx-auto mb-4 border-red-200 bg-red-50",children:o.jsx(le,{className:"p-3 sm:p-4",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx(qC,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"}),o.jsx("p",{className:"text-red-800 text-sm sm:text-base",children:C})]})})}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 max-w-2xl mx-auto mb-6",children:[o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-primary",children:n.length}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Challenges"})]})}),o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600",children:n.reduce((j,P)=>{var U;return j+(((U=P.solvedBy)==null?void 0:U.length)||0)},0)}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Solves"})]})}),o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:s.length}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Categories"})]})})]}),o.jsx(ae,{className:"max-w-4xl mx-auto mb-6 border bg-gradient-to-r from-primary/5 to-primary/10",children:o.jsx(le,{className:"p-4 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Or,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),o.jsxs("div",{className:"text-left",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-lg",children:"Ready for Live Competition?"}),o.jsx("p",{className:"text-muted-foreground text-xs sm:text-base",children:"Test your skills in real-time events!"})]})]}),o.jsxs(Y,{variant:"terminal",onClick:y,size:"sm",className:"w-full sm:w-auto",children:[o.jsx(Or,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Live Events"]})]})})})]}),o.jsxs("div",{className:"max-w-2xl mx-auto mb-6",children:[o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ua,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(de,{placeholder:"Search challenges...",value:h,onChange:j=>f(j.target.value),className:"pl-10 h-10 text-sm border-2"})]}),o.jsx(Y,{variant:"outline",size:"icon",onClick:()=>T(!x),className:"h-10 w-10",children:o.jsx(jU,{className:"h-4 w-4"})})]}),(h||m)&&o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h&&o.jsxs(Se,{variant:"secondary",className:"flex items-center gap-1",children:['Search: "',h,'"',o.jsx(Ki,{className:"w-3 h-3 cursor-pointer",onClick:()=>f("")})]}),m&&o.jsxs(Se,{variant:"secondary",className:"flex items-center gap-1",children:["Category: ",m,o.jsx(Ki,{className:"w-3 h-3 cursor-pointer",onClick:()=>w(null)})]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:N,className:"h-6 text-xs",children:"Clear All"})]})]}),!m&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Choose a Category"}),o.jsxs(Y,{variant:"outline",onClick:I,size:"sm",children:[o.jsx(bm,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),s.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(j=>o.jsx(ae,{className:"border hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>R(j.name),children:o.jsxs(le,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:`text-xl sm:text-2xl bg-gradient-to-r ${j.color} rounded-lg p-2 sm:p-3`,children:j.icon}),o.jsx(ub,{className:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground group-hover:text-primary transition-colors"})]}),o.jsx("h3",{className:"font-bold text-base sm:text-lg mb-1 group-hover:text-primary transition-colors",children:j.name}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm",children:[j.count," challenge",j.count!==1?"s":""]})]})},j.name))}):o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-8 sm:p-12",children:[o.jsx(AU,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Categories Available"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"No practice challenges are currently available. Check back later!"})]})})]}),m&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(Y,{variant:"outline",onClick:()=>w(null),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",size:"sm",children:[o.jsx(ub,{className:"w-3 h-3 sm:w-4 sm:h-4 rotate-180"}),"Back"]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold",children:[m," Challenges"]}),o.jsxs("p",{className:"text-muted-foreground text-sm",children:[a.length," challenge",a.length!==1?"s":""," available"]})]})]}),o.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[o.jsx(Y,{variant:"outline",onClick:N,size:"sm",className:"text-xs",children:"Clear"}),o.jsx(Y,{variant:"outline",onClick:I,size:"sm",children:o.jsx(bm,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),a.length>0?o.jsx("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:a.map(j=>{var P,U,K,Q;return o.jsx(ae,{className:"border hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>E(j.id),children:o.jsxs(le,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[o.jsx("h3",{className:"font-bold text-base sm:text-lg group-hover:text-primary transition-colors flex-1 mr-2",children:j.title}),o.jsx(Se,{className:`${L(j.difficulty)} text-xs`,children:A(j.difficulty)})]}),o.jsx("p",{className:"text-muted-foreground text-sm mb-3 sm:mb-4 line-clamp-2",children:j.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Dt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),o.jsx("span",{children:((P=j.solvedBy)==null?void 0:P.length)||0})]}),o.jsxs(Se,{variant:"outline",className:"font-mono font-bold text-xs",children:[j.totalPoints||j.points," pts"]})]}),j.createdAt&&o.jsx("div",{className:"text-muted-foreground text-xs",children:((Q=(K=(U=j.createdAt)==null?void 0:U.toDate)==null?void 0:K.call(U))==null?void 0:Q.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))||new Date(j.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})},j.id)})}):o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-8 sm:p-12",children:[o.jsx(ua,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Challenges Found"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mb-3 sm:mb-4",children:h?`No challenges match "${h}" in ${m}`:`No challenges available in ${m}`}),o.jsx(Y,{variant:"outline",onClick:N,size:"sm",children:"Clear Search"})]})})]}),n.length===0&&!c&&!m&&o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-8 sm:p-12",children:[o.jsx(Xe,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Practice Challenges Available"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mb-4 sm:mb-6",children:"Check back later for new practice challenges, or join a live event to test your skills."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-center",children:[o.jsxs(Y,{variant:"terminal",onClick:I,size:"sm",children:[o.jsx(bm,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Refresh"]}),o.jsxs(Y,{variant:"outline",onClick:y,size:"sm",children:[o.jsx(Or,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"View Live Events"]})]})]})})]})}),o.jsx(yt,{})]})},vb="/ZedCTF",o9=()=>{const{user:t}=Wn(),[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),[l,c]=g.useState(null),[d,h]=g.useState(null),f=(k,L)=>{const A=new Date,E=new Date(k),y=new Date(L);if(A<E){const I=E.getTime()-A.getTime(),N=Math.floor(I/(1e3*60*60)),R=Math.floor(I%(1e3*60*60)/(1e3*60)),j=Math.floor(I%(1e3*60)/1e3);return`${N.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`}else{if(A>y)return"00:00:00";{const I=y.getTime()-A.getTime(),N=Math.floor(I/(1e3*60*60)),R=Math.floor(I%(1e3*60*60)/(1e3*60)),j=Math.floor(I%(1e3*60)/1e3);return`${N.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`}}},m=(k,L)=>{const A=new Date,E=new Date(k),y=new Date(L);return A>=E&&A<=y?"LIVE":A<E?"UPCOMING":"ENDED"},w=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),C=k=>new Date(k).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),v=async()=>{try{c(null);const k=Mn(Ct(ye,"events"),ia("startDate","asc")),L=await Vn(k);console.log("Total events found:",L.size);const A=new Date,E=[],y=[];L.docs.forEach(I=>{var P,U;const N=I.data();if(console.log("Event data:",{id:I.id,name:N.name,registeredUsers:N.registeredUsers,totalParticipants:N.totalParticipants,participants:N.participants}),!N.startDate||!N.endDate){console.log("Skipping event - missing dates:",N.name);return}const R=m(N.startDate,N.endDate);if(console.log("Event status for",N.name,":",R),R==="ENDED")return;const j={id:I.id,name:N.name||"Untitled Event",title:N.title||N.name||"Untitled Event",status:R,participants:N.totalParticipants||((P=N.participants)==null?void 0:P.length)||0,timeLeft:f(N.startDate,N.endDate),prize:N.prize||`ZMW ${N.individualPrice||0}`,difficulty:N.difficulty||"Medium",startDate:N.startDate,endDate:N.endDate,challengeCount:N.challengeCount||0,registeredUsers:N.registeredUsers||[],description:N.description||"More details coming soon..."};R==="LIVE"?(console.log("Adding to LIVE events:",N.name),E.push(j)):R==="UPCOMING"&&(console.log("Adding to UPCOMING events:",N.name),y.push({...j,date:`${w(N.startDate)} at ${C(N.startDate)}`,registered:t&&((U=N.registeredUsers)==null?void 0:U.includes(t.uid))||!1,maxParticipants:N.maxIndividuals,maxIndividuals:N.maxIndividuals}))}),console.log("Final LIVE events:",E),console.log("Final UPCOMING events:",y),n(E),s(y)}catch(k){console.error("Error fetching events:",k),c(k.message||"Failed to load events"),n([]),s([])}finally{a(!1)}},x=async k=>{var L;if(!t){alert("Please log in to register for events");return}h(k);try{const A=Be(ye,"events",k),E=r.find(R=>R.id===k);if(!E)throw new Error("Event not found");if(console.log("Attempting to register user",t.uid,"for event",k),console.log("Current event data:",{registeredUsers:E.registeredUsers,totalParticipants:E.totalParticipants,participants:E.participants}),(L=E.registeredUsers)!=null&&L.includes(t.uid)){alert("You are already registered for this event"),h(null);return}if(E.maxParticipants&&E.participants>=E.maxParticipants){alert("This event is full"),h(null);return}const I=[...E.registeredUsers||[],t.uid],N=E.totalParticipants||E.participants||0;console.log("Updating with:",{registeredUsers:I,totalParticipants:N+1}),await dn(A,{registeredUsers:I,totalParticipants:N+1}),console.log("Registration successful!"),await v(),alert(" Successfully registered for the event!")}catch(A){console.error("Failed to register for event:",A),console.error("Error code:",A.code),console.error("Error message:",A.message),A.code==="permission-denied"?(alert(" Permission denied. Please check if you're logged in and have proper permissions."),console.log("Security rules blocked the update. Check if user has proper role.")):A.code==="not-found"?alert(" Event not found. Please try again."):alert(` Failed to register for event: ${A.message}`)}finally{h(null)}},T=async k=>{if(!t){alert("Please log in to join events");return}try{const L=Be(ye,"events",k),A=e.find(E=>E.id===k);if(!A)throw new Error("Event not found");await dn(L,{totalParticipants:(A.participants||0)+1}),window.location.href=`${vb}/competition/${k}`}catch(L){console.error("Failed to join live event:",L),alert(`Failed to join event: ${L.message}`)}},_=()=>{window.location.href=`${vb}/practice`};if(g.useEffect(()=>{v();const k=setInterval(v,3e4);return()=>clearInterval(k)},[t]),i)return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading events..."})]})}),o.jsx(yt,{})]});const S=e[0];return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[l&&o.jsxs("div",{className:"max-w-4xl mx-auto mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[o.jsx("p",{className:"text-destructive text-sm",children:l}),o.jsx(Y,{variant:"outline",size:"sm",className:"mt-2",onClick:v,children:"Retry"})]}),o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Or,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[o.jsx("span",{className:"text-primary",children:"LIVE"})," Events"]}),o.jsx("p",{className:"text-muted-foreground",children:"Compete in real-time for prizes"})]}),S?o.jsxs(ae,{className:"max-w-4xl mx-auto border-primary/50 bg-gradient-to-br from-primary/5 to-transparent mb-8 animate-glow",children:[o.jsx(Oe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Me,{className:"text-2xl flex items-center gap-2",children:[o.jsxs("span",{className:"relative flex h-3 w-3",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-primary"})]}),S.title]}),o.jsx(Se,{className:"bg-primary text-primary-foreground font-bold px-4 py-1",children:"LIVE NOW"})]})}),o.jsxs(le,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(Gi,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold font-mono",children:S.timeLeft}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Left"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Dt,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:S.participants}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Players"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Zn,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:S.prize}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Prize Pool"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Or,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:S.difficulty}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Difficulty"})]})]}),S.description&&o.jsx("p",{className:"text-sm text-muted-foreground mb-4 text-center",children:S.description}),o.jsxs(Y,{variant:"neon",size:"lg",className:"w-full",onClick:()=>T(S.id),children:[o.jsx(Or,{className:"w-5 h-5"}),"Join Event Now"]})]})]}):o.jsx(ae,{className:"max-w-4xl mx-auto border-border mb-8",children:o.jsxs(le,{className:"p-12 text-center",children:[o.jsx(Or,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Live Events"}),o.jsx("p",{className:"text-muted-foreground",children:"Check back later for upcoming competitions"}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[o.jsx(Xe,{className:"w-12 h-12 text-primary mx-auto mb-3"}),o.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Want to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Sharpen your skills with our practice challenges while you wait for the next live event."}),o.jsxs(Y,{variant:"terminal",onClick:_,children:[o.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Explore Practice Challenges"]})]})]})}),e.length>1&&o.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Other Live Events"}),o.jsx("div",{className:"space-y-4",children:e.slice(1).map(k=>o.jsx(ae,{className:"border-primary/30 hover:border-primary/50 transition-all",children:o.jsx(le,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("h4",{className:"font-bold text-xl",children:k.title}),o.jsx(Se,{className:"bg-primary/20 text-primary font-bold",children:"LIVE"}),o.jsx(Se,{variant:"outline",className:"border-primary/30 text-primary",children:k.difficulty})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gi,{className:"w-4 h-4"}),k.timeLeft]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dt,{className:"w-4 h-4"}),k.participants," players"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zn,{className:"w-4 h-4"}),"Prize: ",k.prize]})]}),k.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:k.description})]}),o.jsxs(Y,{variant:"terminal",className:"md:ml-4",onClick:()=>T(k.id),children:[o.jsx(Or,{className:"w-4 h-4 mr-2"}),"Join Now"]})]})})},k.id))})]}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Upcoming Events"}),r.length===0?o.jsx(ae,{className:"border-border",children:o.jsxs(le,{className:"p-8 text-center",children:[o.jsx(aa,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-muted-foreground",children:"No upcoming events scheduled"})]})}):o.jsx("div",{className:"space-y-4",children:r.map(k=>o.jsx(ae,{className:"border-border hover:border-primary/30 transition-all",children:o.jsx(le,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("h4",{className:"font-bold text-xl",children:k.title}),o.jsx(Se,{variant:"outline",className:"border-primary/30 text-primary",children:k.difficulty}),k.maxParticipants&&k.participants>=k.maxParticipants&&o.jsx(Se,{variant:"secondary",className:"bg-destructive/10 text-destructive",children:"FULL"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(aa,{className:"w-4 h-4"}),k.date]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dt,{className:"w-4 h-4"}),k.participants," registered",k.maxParticipants&&` / ${k.maxParticipants} max`]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zn,{className:"w-4 h-4"}),"Prize: ",k.prize]})]}),k.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:k.description})]}),o.jsx(Y,{variant:k.registered?"outline":"terminal",className:"md:ml-4 whitespace-nowrap",onClick:()=>!k.registered&&x(k.id),disabled:k.registered||(k.maxParticipants?k.participants>=k.maxParticipants:!1)||d===k.id,children:d===k.id?"Registering...":k.registered?"Registered ":k.maxParticipants&&k.participants>=k.maxParticipants?"Event Full":"Register"})]})})},k.id))})]}),o.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:o.jsx(ae,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:o.jsxs(le,{className:"p-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ready to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Access our extensive library of practice challenges covering web security, cryptography, forensics, and more. Perfect for beginners and experts alike."}),o.jsxs(Y,{variant:"terminal",size:"lg",onClick:_,children:[o.jsx(Xe,{className:"w-5 h-5 mr-2"}),"Explore Practice Challenges"]})]})})})]})}),o.jsx(yt,{})]})};function a9(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const d=f=>{var T;const{scope:m,children:w,...C}=f,v=((T=m==null?void 0:m[t])==null?void 0:T[c])||l,x=g.useMemo(()=>C,Object.values(C));return o.jsx(v.Provider,{value:x,children:w})};d.displayName=i+"Provider";function h(f,m){var v;const w=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,C=g.useContext(w);if(C)return C;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,l9(s,...e)]}function l9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Zr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var bt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},c9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mv=c9.reduce((t,e)=>{const n=Pv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),JC={exports:{}},ZC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var da=g;function u9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var d9=typeof Object.is=="function"?Object.is:u9,h9=da.useState,f9=da.useEffect,m9=da.useLayoutEffect,p9=da.useDebugValue;function g9(t,e){var n=e(),r=h9({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return m9(function(){s.value=n,s.getSnapshot=e,Nm(s)&&i({inst:s})},[t,n,e]),f9(function(){return Nm(s)&&i({inst:s}),t(function(){Nm(s)&&i({inst:s})})},[t]),p9(n),n}function Nm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!d9(t,n)}catch{return!0}}function y9(t,e){return e()}var v9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y9:g9;ZC.useSyncExternalStore=da.useSyncExternalStore!==void 0?da.useSyncExternalStore:v9;JC.exports=ZC;var x9=JC.exports;function w9(){return x9.useSyncExternalStore(_9,()=>!0,()=>!1)}function _9(){return()=>{}}var Vv="Avatar",[b9]=a9(Vv),[E9,eI]=b9(Vv),tI=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return o.jsx(E9,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(Mv.span,{...r,ref:e})})});tI.displayName=Vv;var nI="AvatarImage",rI=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=eI(nI,n),l=N9(r,i),c=Zr(d=>{s(d),a.onImageLoadingStatusChange(d)});return bt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(Mv.img,{...i,ref:e,src:r}):null});rI.displayName=nI;var sI="AvatarFallback",iI=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=eI(sI,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(Mv.span,{...s,ref:e}):null});iI.displayName=sI;function xb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function N9(t,{referrerPolicy:e,crossOrigin:n}){const r=w9(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>xb(i,t));return bt(()=>{l(xb(i,t))},[i,t]),bt(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),a}var oI=tI,aI=rI,lI=iI;const dg=g.forwardRef(({className:t,...e},n)=>o.jsx(oI,{ref:n,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));dg.displayName=oI.displayName;const T9=g.forwardRef(({className:t,...e},n)=>o.jsx(aI,{ref:n,className:Pe("aspect-square h-full w-full",t),...e}));T9.displayName=aI.displayName;const hg=g.forwardRef(({className:t,...e},n)=>o.jsx(lI,{ref:n,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));hg.displayName=lI.displayName;const S9=Yh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Xh=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Pe(S9({variant:e}),t),...n}));Xh.displayName="Alert";const C9=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Pe("mb-1 font-medium leading-none tracking-tight",t),...e}));C9.displayName="AlertTitle";const Jh=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("text-sm [&_p]:leading-relaxed",t),...e}));Jh.displayName="AlertDescription";const I9=({eventName:t="CTF Competition"})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),[l,c]=g.useState(""),[d,h]=g.useState(""),f=async()=>{var x;try{console.log("Fetching leaderboard data from Firestore..."),h("");let T=[],_=[];try{const S=Mn(Ct(ye,"users"),ia("totalPoints","desc"),K_(100)),k=await Vn(S);let L=1;for(const A of k.docs){const E=A.data();T.push({rank:L,name:E.displayName||E.username||((x=E.email)==null?void 0:x.split("@")[0])||"Anonymous",email:E.email||"",points:E.totalPoints||0,userId:A.id,photoURL:E.photoURL,role:E.role,institution:E.institution}),L++}console.log(`Found ${T.length} users for global leaderboard`,T)}catch(S){console.log("Global leaderboard query failed:",S),h("Unable to load leaderboard data. Please check Firestore rules.")}try{const S=Mn(Ct(ye,"events"),K_(1)),k=await Vn(S);if(!k.empty){const L=k.docs[0].data();console.log("Event found:",L),L.participants&&Array.isArray(L.participants)&&(_=L.participants.filter(A=>A.points>0).map((A,E)=>({rank:E+1,team:A.teamName||`Team ${E+1}`,captain:A.captain||A.displayName||"Unknown",points:A.points||0,lastActivity:A.lastActivity||"Recently",challenge:A.currentChallenge||"Multiple challenges"})).sort((A,E)=>E.points-A.points).map((A,E)=>({...A,rank:E+1})))}console.log(`Found ${_.length} teams for CTF leaderboard`)}catch(S){console.log("CTF leaderboard query failed:",S)}n(T),s(_),c(new Date().toLocaleTimeString())}catch(T){console.error("Error fetching leaderboard data:",T),h("Failed to load leaderboard data. Please try again later."),n([]),s([])}finally{a(!1)}},m=x=>x<=3?o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[w(x),o.jsxs("span",{className:"text-white font-bold text-sm",children:["#",x]})]}):o.jsxs("span",{className:"font-bold text-white text-sm",children:["#",x]}),w=x=>{switch(x){case 1:return o.jsx(ag,{className:"w-4 h-4 text-yellow-400"});case 2:return o.jsx(gb,{className:"w-4 h-4 text-gray-300"});case 3:return o.jsx(gb,{className:"w-4 h-4 text-amber-500"});default:return null}},C=x=>{switch(x){case 1:return"bg-gradient-to-br from-yellow-500 to-yellow-600";case 2:return"bg-gradient-to-br from-gray-500 to-gray-600";case 3:return"bg-gradient-to-br from-amber-600 to-amber-700";default:return"bg-primary"}},v=x=>x.split(" ").map(T=>T.charAt(0)).join("").toUpperCase().substring(0,2);return g.useEffect(()=>{f();const x=setInterval(f,3e4);return()=>clearInterval(x)},[]),i?o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{id:"leaderboard",className:"pt-20 lg:pt-24 pb-16 bg-muted/20 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading leaderboard data..."})]})}),o.jsx(yt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{id:"ctf-leaderboard",className:"pt-20 lg:pt-24 pb-16 bg-background min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-6 lg:mb-8 text-center",children:[o.jsx(Zn,{className:"w-12 h-12 text-primary mx-auto mb-3 lg:mb-4"}),o.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold mb-2",children:[t," - ",o.jsx("span",{className:"text-primary",children:"Live Scoreboard"})]}),o.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Real-time competition rankings"}),l&&o.jsxs(Se,{variant:"outline",className:"mt-2 text-xs",children:[o.jsx(Gi,{className:"w-3 h-3 mr-1"}),"Updated ",l]})]}),d&&o.jsxs(Xh,{className:"max-w-2xl mx-auto mb-6 bg-yellow-50 border-yellow-200",children:[o.jsx(qC,{className:"w-4 h-4 text-yellow-600"}),o.jsx(Jh,{className:"text-yellow-800 text-sm",children:d})]}),o.jsxs(ae,{className:"border-border shadow-lg",children:[o.jsx(Oe,{className:"bg-muted/30 p-4 lg:p-6",children:o.jsxs(Me,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2",children:[o.jsxs("span",{className:"flex items-center gap-2 text-lg lg:text-xl",children:[o.jsx(ug,{className:"w-4 h-4 lg:w-5 lg:h-5 text-primary"}),"Live Competition Rankings"]}),o.jsx("span",{className:"text-sm text-muted-foreground",children:r.length>0?`${r.length} Teams Competing`:"No active competitions"})]})}),o.jsx(le,{className:"p-0",children:r.length===0?o.jsxs("div",{className:"text-center py-12 lg:py-16 text-muted-foreground",children:[o.jsx(Zn,{className:"w-16 h-16 lg:w-20 lg:h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base lg:text-lg mb-2",children:"No active competitions"}),o.jsx("p",{className:"text-sm lg:text-base",children:"Join an event to see live scores"})]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsx("div",{className:"lg:hidden space-y-3 p-4",children:r.map(x=>o.jsx(ae,{className:"border-border",children:o.jsxs(le,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-foreground",children:x.team}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Capt: ",x.captain]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg font-bold text-primary",children:x.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Last: ",x.lastActivity]}),o.jsx("span",{className:"truncate max-w-[120px]",children:x.challenge})]})]})},x.rank))}),o.jsx("div",{className:"hidden lg:block",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rank"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Team"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Captain"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Activity"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Challenge"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:r.map(x=>o.jsxs("tr",{className:"hover:bg-muted/20 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:x.team}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-muted-foreground",children:x.captain}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-lg font-bold text-primary",children:x.points.toLocaleString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:x.lastActivity}),o.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground max-w-xs truncate",children:x.challenge})]},x.rank))})]})})]})})]})]})}),o.jsx("section",{id:"global-leaderboard",className:"py-12 lg:py-16 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-6 lg:mb-12 text-center",children:[o.jsx(Zn,{className:"w-12 h-12 lg:w-16 lg:h-16 text-primary mx-auto mb-3 lg:mb-4"}),o.jsxs("h2",{className:"text-2xl lg:text-4xl font-bold mb-2 lg:mb-4",children:["Global ",o.jsx("span",{className:"text-primary",children:"Leaderboard"})]}),o.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Top performers based on challenge points"})]}),o.jsxs(ae,{className:"border-border shadow-lg",children:[o.jsx(Oe,{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-b p-4 lg:p-6",children:o.jsxs(Me,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2",children:[o.jsxs("span",{className:"flex items-center gap-2 text-lg lg:text-xl",children:[o.jsx(Dt,{className:"w-4 h-4 lg:w-5 lg:h-5 text-primary"}),"Top Platform Hackers"]}),o.jsx("span",{className:"text-sm text-muted-foreground",children:e.length>0?`${e.length} Players`:"No players found"})]})}),o.jsx(le,{className:"p-0",children:e.length===0?o.jsxs("div",{className:"text-center py-12 lg:py-16 text-muted-foreground",children:[o.jsx(Zn,{className:"w-16 h-16 lg:w-20 lg:h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base lg:text-lg mb-2",children:"No users found in leaderboard"}),o.jsx("p",{className:"text-sm lg:text-base mb-4",children:"This could be due to Firestore rules restrictions or no users have points yet"}),o.jsx("button",{onClick:f,className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm",children:"Refresh Data"})]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsx("div",{className:"lg:hidden space-y-3 p-4",children:e.map(x=>o.jsx(ae,{className:"border-border",children:o.jsxs(le,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)}),o.jsx(dg,{className:"w-8 h-8 border-2 border-primary/20",children:x.photoURL?o.jsx("img",{src:x.photoURL,alt:x.name,className:"w-full h-full object-cover"}):o.jsx(hg,{className:"bg-primary/20 text-primary font-bold text-xs",children:v(x.name)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-foreground text-sm",children:x.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:x.role||"Hacker"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg font-bold text-primary",children:x.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:x.institution||"No institution"})]})},x.userId))}),o.jsx("div",{className:"hidden lg:block",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rank"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Player"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Institution"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total Points"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:e.map(x=>o.jsxs("tr",{className:`hover:bg-muted/20 transition-all duration-200 ${x.rank<=3?"bg-gradient-to-r from-primary/5 to-transparent":""}`,children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(dg,{className:"w-10 h-10 border-2 border-primary/20",children:x.photoURL?o.jsx("img",{src:x.photoURL,alt:x.name,className:"w-full h-full object-cover"}):o.jsx(hg,{className:"bg-primary/20 text-primary font-bold",children:v(x.name)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-foreground",children:x.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:x.role||"Hacker"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:x.institution||"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-xl font-bold text-primary",children:x.points.toLocaleString()})})]},x.userId))})]})})]})})]})]})}),o.jsx(yt,{})]})};function Ae(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function di(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var T;const{scope:m,children:w,...C}=f,v=((T=m==null?void 0:m[t])==null?void 0:T[c])||l,x=g.useMemo(()=>C,Object.values(C));return o.jsx(v.Provider,{value:x,children:w})};d.displayName=i+"Provider";function h(f,m){var v;const w=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,C=g.useContext(w);if(C)return C;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,j9(s,...e)]}function j9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function wb(t){const e=A9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(R9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function A9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=D9(s),l=P9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var k9=Symbol("radix.slottable");function R9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===k9}function P9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function D9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function cI(t){const e=t+"CollectionProvider",[n,r]=di(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:x,children:T}=v,_=gs.useRef(null),S=gs.useRef(new Map).current;return o.jsx(s,{scope:x,itemMap:S,collectionRef:_,children:T})};a.displayName=e;const l=t+"CollectionSlot",c=wb(l),d=gs.forwardRef((v,x)=>{const{scope:T,children:_}=v,S=i(l,T),k=Je(x,S.collectionRef);return o.jsx(c,{ref:k,children:_})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=wb(h),w=gs.forwardRef((v,x)=>{const{scope:T,children:_,...S}=v,k=gs.useRef(null),L=Je(x,k),A=i(h,T);return gs.useEffect(()=>(A.itemMap.set(k,{ref:k,...S}),()=>void A.itemMap.delete(k))),o.jsx(m,{[f]:"",ref:L,children:_})});w.displayName=h;function C(v){const x=i(t+"CollectionConsumer",v);return gs.useCallback(()=>{const _=x.collectionRef.current;if(!_)return[];const S=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((A,E)=>S.indexOf(A.ref.current)-S.indexOf(E.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:d,ItemSlot:w},C,r]}var L9=eh[" useId ".trim().toString()]||(()=>{}),O9=0;function Ac(t){const[e,n]=g.useState(L9());return bt(()=>{n(r=>r??String(O9++))},[t]),e?`radix-${e}`:""}function M9(t){const e=V9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(U9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function V9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=$9(s),l=B9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var F9=Symbol("radix.slottable");function U9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===F9}function B9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function $9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var z9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Re=z9.reduce((t,e)=>{const n=M9(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function H9(t,e){t&&ya.flushSync(()=>t.dispatchEvent(e))}var W9=eh[" useInsertionEffect ".trim().toString()]||bt;function ha({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=q9({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=g.useRef(t!==void 0);g.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=g.useCallback(h=>{var f;if(l){const m=G9(h)?h(t):h;m!==t&&((f=a.current)==null||f.call(a,m))}else i(h)},[l,t,i,a]);return[c,d]}function q9({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return W9(()=>{i.current=e},[e]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function G9(t){return typeof t=="function"}var K9=g.createContext(void 0);function Zh(t){const e=g.useContext(K9);return t||e||"ltr"}var Tm="rovingFocusGroup.onEntryFocus",Q9={bubbles:!1,cancelable:!0},kc="RovingFocusGroup",[fg,uI,Y9]=cI(kc),[X9,ef]=di(kc,[Y9]),[J9,Z9]=X9(kc),dI=g.forwardRef((t,e)=>o.jsx(fg.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(fg.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(e8,{...t,ref:e})})}));dI.displayName=kc;var e8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=g.useRef(null),w=Je(e,m),C=Zh(i),[v,x]=ha({prop:a,defaultProp:l??null,onChange:c,caller:kc}),[T,_]=g.useState(!1),S=Zr(d),k=uI(n),L=g.useRef(!1),[A,E]=g.useState(0);return g.useEffect(()=>{const y=m.current;if(y)return y.addEventListener(Tm,S),()=>y.removeEventListener(Tm,S)},[S]),o.jsx(J9,{scope:n,orientation:r,dir:C,loop:s,currentTabStopId:v,onItemFocus:g.useCallback(y=>x(y),[x]),onItemShiftTab:g.useCallback(()=>_(!0),[]),onFocusableItemAdd:g.useCallback(()=>E(y=>y+1),[]),onFocusableItemRemove:g.useCallback(()=>E(y=>y-1),[]),children:o.jsx(Re.div,{tabIndex:T||A===0?-1:0,"data-orientation":r,...f,ref:w,style:{outline:"none",...t.style},onMouseDown:Ae(t.onMouseDown,()=>{L.current=!0}),onFocus:Ae(t.onFocus,y=>{const I=!L.current;if(y.target===y.currentTarget&&I&&!T){const N=new CustomEvent(Tm,Q9);if(y.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=k().filter(Q=>Q.focusable),j=R.find(Q=>Q.active),P=R.find(Q=>Q.id===v),K=[j,P,...R].filter(Boolean).map(Q=>Q.ref.current);mI(K,h)}}L.current=!1}),onBlur:Ae(t.onBlur,()=>_(!1))})})}),hI="RovingFocusGroupItem",fI=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,c=Ac(),d=i||c,h=Z9(hI,n),f=h.currentTabStopId===d,m=uI(n),{onFocusableItemAdd:w,onFocusableItemRemove:C,currentTabStopId:v}=h;return g.useEffect(()=>{if(r)return w(),()=>C()},[r,w,C]),o.jsx(fg.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:o.jsx(Re.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Ae(t.onMouseDown,x=>{r?h.onItemFocus(d):x.preventDefault()}),onFocus:Ae(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ae(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){h.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const T=r8(x,h.orientation,h.dir);if(T!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let S=m().filter(k=>k.focusable).map(k=>k.ref.current);if(T==="last")S.reverse();else if(T==="prev"||T==="next"){T==="prev"&&S.reverse();const k=S.indexOf(x.currentTarget);S=h.loop?s8(S,k+1):S.slice(k+1)}setTimeout(()=>mI(S))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:v!=null}):a})})});fI.displayName=hI;var t8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function n8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function r8(t,e,n){const r=n8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return t8[r]}function mI(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function s8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var pI=dI,gI=fI;function i8(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Fv=t=>{const{present:e,children:n}=t,r=o8(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=Je(r.ref,a8(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};Fv.displayName="Presence";function o8(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=i8(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=yu(r.current);i.current=l==="mounted"?d:"none"},[l]),bt(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,w=yu(d);t?c("MOUNT"):w==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),bt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=w=>{const v=yu(r.current).includes(CSS.escape(w.animationName));if(w.target===e&&v&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=w=>{w.target===e&&(i.current=yu(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function yu(t){return(t==null?void 0:t.animationName)||"none"}function a8(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var tf="Tabs",[l8]=di(tf,[ef]),yI=ef(),[c8,Uv]=l8(tf),vI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=Zh(l),[f,m]=ha({prop:r,onChange:s,defaultProp:i??"",caller:tf});return o.jsx(c8,{scope:n,baseId:Ac(),value:f,onValueChange:m,orientation:a,dir:h,activationMode:c,children:o.jsx(Re.div,{dir:h,"data-orientation":a,...d,ref:e})})});vI.displayName=tf;var xI="TabsList",wI=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Uv(xI,n),a=yI(n);return o.jsx(pI,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Re.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});wI.displayName=xI;var _I="TabsTrigger",bI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Uv(_I,n),l=yI(n),c=TI(a.baseId,r),d=SI(a.baseId,r),h=r===a.value;return o.jsx(gI,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(Re.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Ae(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:Ae(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:Ae(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});bI.displayName=_I;var EI="TabsContent",NI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Uv(EI,n),c=TI(l.baseId,r),d=SI(l.baseId,r),h=r===l.value,f=g.useRef(h);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(Fv,{present:s||h,children:({present:m})=>o.jsx(Re.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});NI.displayName=EI;function TI(t,e){return`${t}-trigger-${e}`}function SI(t,e){return`${t}-content-${e}`}var u8=vI,CI=wI,II=bI,jI=NI;const d8=u8,AI=g.forwardRef(({className:t,...e},n)=>o.jsx(CI,{ref:n,className:Pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));AI.displayName=CI.displayName;const Ei=g.forwardRef(({className:t,...e},n)=>o.jsx(II,{ref:n,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Ei.displayName=II.displayName;const kI=g.forwardRef(({className:t,...e},n)=>o.jsx(jI,{ref:n,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));kI.displayName=jI.displayName;const h8=({onBack:t})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState(!0),[d,h]=g.useState(""),[f,m]=g.useState("all"),[w,C]=g.useState(null);g.useEffect(()=>{v()},[]),g.useEffect(()=>{x()},[d,e,f]);const v=async()=>{try{const I=(await Vn(Ct(ye,"users"))).docs.map(R=>({id:R.id,...R.data()}));console.log(" Fetched users:",I),n(I);const N=I.filter(R=>R.requestedHostRole===!0);a(N)}catch(y){console.error("Error fetching users:",y),C({type:"error",text:"Failed to load users"})}finally{c(!1)}},x=()=>{let y=[...e];f==="admins"?y=y.filter(I=>I.role==="admin"):f==="moderators"?y=y.filter(I=>I.role==="moderator"):f==="students"?y=y.filter(I=>I.role==="student"):f==="pending"?y=y.filter(I=>I.requestedHostRole===!0):f==="active"?y=y.filter(I=>I.isActive!==!1):f==="suspended"&&(y=y.filter(I=>I.isActive===!1)),d&&(y=y.filter(I=>{var N,R,j,P,U;return((N=I.displayName)==null?void 0:N.toLowerCase().includes(d.toLowerCase()))||((R=I.email)==null?void 0:R.toLowerCase().includes(d.toLowerCase()))||((j=I.role)==null?void 0:j.toLowerCase().includes(d.toLowerCase()))||((P=I.firstName)==null?void 0:P.toLowerCase().includes(d.toLowerCase()))||((U=I.lastName)==null?void 0:U.toLowerCase().includes(d.toLowerCase()))})),s(y)},T=async(y,I)=>{try{console.log(" Attempting to update user role:",{userId:y,newRole:I});const N={role:I};(I==="admin"||I==="moderator")&&(N.requestedHostRole=!1,N.hostRequestReason=null),await dn(Be(ye,"users",y),N),n(e.map(R=>R.id===y?{...R,...N}:R)),console.log(" User role updated successfully"),C({type:"success",text:`User role updated to ${I}`}),setTimeout(()=>C(null),3e3)}catch(N){console.error(" Error updating user role:",N),console.error("Error code:",N.code),console.error("Error message:",N.message),C({type:"error",text:`Failed to update user role: ${N.message}`})}},_=async(y,I)=>{try{console.log(" Handling host request:",{userId:y,approved:I});const N={requestedHostRole:!1,hostRequestReason:null};I&&(N.role="moderator"),await dn(Be(ye,"users",y),N),n(e.map(j=>j.id===y?{...j,...N}:j)),C({type:"success",text:`Host request ${I?"approved":"rejected"}`}),setTimeout(()=>C(null),3e3)}catch(N){console.error("Error handling host request:",N),C({type:"error",text:`Failed to process host request: ${N.message}`})}},S=async(y,I)=>{try{console.log(" Toggling user status:",{userId:y,currentStatus:I});const N=!I;await dn(Be(ye,"users",y),{isActive:N}),n(e.map(j=>j.id===y?{...j,isActive:N}:j));const R=N?"activated":"suspended";console.log(" User status updated successfully:",R),C({type:"success",text:`User ${R}`}),setTimeout(()=>C(null),3e3)}catch(N){console.error(" Error updating user status:",N),console.error("Error code:",N.code),console.error("Error message:",N.message),C({type:"error",text:`Failed to update user status: ${N.message}`})}},k=y=>{switch(y){case"admin":return"destructive";case"moderator":return"default";case"student":return"secondary";default:return"outline"}},L=y=>{switch(y){case"admin":return o.jsx(ag,{className:"w-3 h-3"});case"moderator":return o.jsx(Xe,{className:"w-3 h-3"});case"student":return o.jsx(Lv,{className:"w-3 h-3"});default:return o.jsx(Sn,{className:"w-3 h-3"})}},A=y=>y.requestedHostRole?"Pending Host":y.isActive===!1?"Suspended":"Active",E=y=>y.requestedHostRole?"default":y.isActive===!1?"destructive":"default";return l?o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading users..."})]})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Y,{variant:"ghost",onClick:t,className:"mb-2 -ml-3",children:" Back to Admin"}),o.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and host requests"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]})]}),w&&o.jsxs(Xh,{className:w.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200",children:[w.type==="success"?o.jsx(Br,{className:"w-4 h-4 text-green-600"}):o.jsx(la,{className:"w-4 h-4 text-red-600"}),o.jsx(Jh,{className:w.type==="success"?"text-green-600":"text-red-600",children:w.text})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(y=>y.role==="admin").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Admins"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(y=>y.role==="moderator").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Moderators"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(y=>y.role==="student").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Students"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending Hosts"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(y=>y.isActive===!1).length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Suspended"})]})})]}),o.jsxs(d8,{value:f,onValueChange:m,className:"w-full",children:[o.jsxs(AI,{className:"grid w-full grid-cols-6",children:[o.jsx(Ei,{value:"all",className:"text-xs",children:"All Users"}),o.jsx(Ei,{value:"admins",className:"text-xs",children:"Admins"}),o.jsx(Ei,{value:"moderators",className:"text-xs",children:"Moderators"}),o.jsx(Ei,{value:"students",className:"text-xs",children:"Students"}),o.jsxs(Ei,{value:"pending",className:"text-xs",children:["Pending ",i.length>0&&`(${i.length})`]}),o.jsx(Ei,{value:"suspended",className:"text-xs",children:"Suspended"})]}),o.jsx(kI,{value:f,className:"mt-6",children:o.jsxs(ae,{children:[o.jsx(Oe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs(Me,{children:[f==="all"&&"All Users",f==="admins"&&"Administrators",f==="moderators"&&"Moderators",f==="students"&&"Students",f==="pending"&&"Pending Host Requests",f==="suspended"&&"Suspended Users"]}),o.jsxs(Wt,{children:[r.length," user",r.length!==1?"s":""," found"]})]}),o.jsxs("div",{className:"relative w-64",children:[o.jsx(ua,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(de,{placeholder:"Search users...",value:d,onChange:y=>h(y.target.value),className:"pl-10"})]})]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[r.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:L(y.role)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("p",{className:"font-medium truncate",children:y.displayName||"No Name"}),y.role==="admin"&&o.jsx(ag,{className:"w-4 h-4 text-yellow-600"})]}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:y.email}),y.institution&&o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.institution}),y.requestedHostRole&&y.hostRequestReason&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[o.jsx("strong",{children:"Host Request:"})," ",y.hostRequestReason]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs(Se,{variant:k(y.role),className:"flex items-center gap-1",children:[L(y.role),y.role]}),o.jsx(Se,{variant:E(y),children:A(y)})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs("select",{value:y.role,onChange:I=>T(y.id,I.target.value),className:"p-2 border rounded text-sm bg-background",children:[o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"moderator",children:"Moderator"}),o.jsx("option",{value:"admin",children:"Admin"})]}),y.requestedHostRole&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>_(y.id,!0),className:"h-9 w-9 p-0 text-green-600 border-green-200",children:o.jsx(Br,{className:"w-4 h-4"})}),o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>_(y.id,!1),className:"h-9 w-9 p-0 text-red-600 border-red-200",children:o.jsx(la,{className:"w-4 h-4"})})]}),!y.requestedHostRole&&o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>S(y.id,y.isActive??!0),className:`flex items-center gap-1 ${y.isActive===!1?"text-green-600 border-green-200 hover:bg-green-50":"text-red-600 border-red-200 hover:bg-red-50"}`,children:y.isActive===!1?o.jsxs(o.Fragment,{children:[o.jsx(FU,{className:"w-3 h-3"}),"Activate"]}):o.jsxs(o.Fragment,{children:[o.jsx(VU,{className:"w-3 h-3"}),"Suspend"]})})]})]},y.id)),r.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Dt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No users found matching your criteria."})]})]})})]})})]})]})},Ca=g.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Ca.displayName="Textarea";var f8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],m8=f8.reduce((t,e)=>{const n=Pv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),p8="Label",RI=g.forwardRef((t,e)=>o.jsx(m8.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));RI.displayName=p8;var PI=RI;const g8=Yh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),z=g.forwardRef(({className:t,...e},n)=>o.jsx(PI,{ref:n,className:Pe(g8(),t),...e}));z.displayName=PI.displayName;function _b(t,[e,n]){return Math.min(n,Math.max(e,t))}function y8(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var v8="DismissableLayer",mg="dismissableLayer.update",x8="dismissableLayer.pointerDownOutside",w8="dismissableLayer.focusOutside",bb,DI=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),LI=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(DI),[h,f]=g.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=g.useState({}),C=Je(e,E=>f(E)),v=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),T=v.indexOf(x),_=h?v.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,k=_>=T,L=E8(E=>{const y=E.target,I=[...d.branches].some(N=>N.contains(y));!k||I||(s==null||s(E),a==null||a(E),E.defaultPrevented||l==null||l())},m),A=N8(E=>{const y=E.target;[...d.branches].some(N=>N.contains(y))||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},m);return y8(E=>{_===d.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(bb=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Eb(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=bb)}},[h,m,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Eb())},[h,d]),g.useEffect(()=>{const E=()=>w({});return document.addEventListener(mg,E),()=>document.removeEventListener(mg,E)},[]),o.jsx(Re.div,{...c,ref:C,style:{pointerEvents:S?k?"auto":"none":void 0,...t.style},onFocusCapture:Ae(t.onFocusCapture,A.onFocusCapture),onBlurCapture:Ae(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Ae(t.onPointerDownCapture,L.onPointerDownCapture)})});LI.displayName=v8;var _8="DismissableLayerBranch",b8=g.forwardRef((t,e)=>{const n=g.useContext(DI),r=g.useRef(null),s=Je(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Re.div,{...t,ref:s})});b8.displayName=_8;function E8(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){OI(x8,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function N8(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&OI(w8,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Eb(){const t=new CustomEvent(mg);document.dispatchEvent(t)}function OI(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?H9(s,i):s.dispatchEvent(i)}var Sm=0;function T8(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Nb()),document.body.insertAdjacentElement("beforeend",t[1]??Nb()),Sm++,()=>{Sm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Sm--}},[])}function Nb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Cm="focusScope.autoFocusOnMount",Im="focusScope.autoFocusOnUnmount",Tb={bubbles:!1,cancelable:!0},S8="FocusScope",MI=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=Zr(s),h=Zr(i),f=g.useRef(null),m=Je(e,v=>c(v)),w=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let v=function(S){if(w.paused||!l)return;const k=S.target;l.contains(k)?f.current=k:ys(f.current,{select:!0})},x=function(S){if(w.paused||!l)return;const k=S.relatedTarget;k!==null&&(l.contains(k)||ys(f.current,{select:!0}))},T=function(S){if(document.activeElement===document.body)for(const L of S)L.removedNodes.length>0&&ys(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const _=new MutationObserver(T);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),_.disconnect()}}},[r,l,w.paused]),g.useEffect(()=>{if(l){Cb.add(w);const v=document.activeElement;if(!l.contains(v)){const T=new CustomEvent(Cm,Tb);l.addEventListener(Cm,d),l.dispatchEvent(T),T.defaultPrevented||(C8(R8(VI(l)),{select:!0}),document.activeElement===v&&ys(l))}return()=>{l.removeEventListener(Cm,d),setTimeout(()=>{const T=new CustomEvent(Im,Tb);l.addEventListener(Im,h),l.dispatchEvent(T),T.defaultPrevented||ys(v??document.body,{select:!0}),l.removeEventListener(Im,h),Cb.remove(w)},0)}}},[l,d,h,w]);const C=g.useCallback(v=>{if(!n&&!r||w.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,T=document.activeElement;if(x&&T){const _=v.currentTarget,[S,k]=I8(_);S&&k?!v.shiftKey&&T===k?(v.preventDefault(),n&&ys(S,{select:!0})):v.shiftKey&&T===S&&(v.preventDefault(),n&&ys(k,{select:!0})):T===_&&v.preventDefault()}},[n,r,w.paused]);return o.jsx(Re.div,{tabIndex:-1,...a,ref:m,onKeyDown:C})});MI.displayName=S8;function C8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ys(r,{select:e}),document.activeElement!==n)return}function I8(t){const e=VI(t),n=Sb(e,t),r=Sb(e.reverse(),t);return[n,r]}function VI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Sb(t,e){for(const n of t)if(!j8(n,{upTo:e}))return n}function j8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function A8(t){return t instanceof HTMLInputElement&&"select"in t}function ys(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&A8(t)&&e&&t.select()}}var Cb=k8();function k8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Ib(t,e),t.unshift(e)},remove(e){var n;t=Ib(t,e),(n=t[0])==null||n.resume()}}}function Ib(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function R8(t){return t.filter(e=>e.tagName!=="A")}const P8=["top","right","bottom","left"],Zs=Math.min,wn=Math.max,Kd=Math.round,vu=Math.floor,Tr=t=>({x:t,y:t}),D8={left:"right",right:"left",bottom:"top",top:"bottom"},L8={start:"end",end:"start"};function pg(t,e,n){return wn(t,Zs(e,n))}function es(t,e){return typeof t=="function"?t(e):t}function ts(t){return t.split("-")[0]}function Ia(t){return t.split("-")[1]}function Bv(t){return t==="x"?"y":"x"}function $v(t){return t==="y"?"height":"width"}const O8=new Set(["top","bottom"]);function gr(t){return O8.has(ts(t))?"y":"x"}function zv(t){return Bv(gr(t))}function M8(t,e,n){n===void 0&&(n=!1);const r=Ia(t),s=zv(t),i=$v(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Qd(a)),[a,Qd(a)]}function V8(t){const e=Qd(t);return[gg(t),e,gg(e)]}function gg(t){return t.replace(/start|end/g,e=>L8[e])}const jb=["left","right"],Ab=["right","left"],F8=["top","bottom"],U8=["bottom","top"];function B8(t,e,n){switch(t){case"top":case"bottom":return n?e?Ab:jb:e?jb:Ab;case"left":case"right":return e?F8:U8;default:return[]}}function $8(t,e,n,r){const s=Ia(t);let i=B8(ts(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(gg)))),i}function Qd(t){return t.replace(/left|right|bottom|top/g,e=>D8[e])}function z8(t){return{top:0,right:0,bottom:0,left:0,...t}}function FI(t){return typeof t!="number"?z8(t):{top:t,right:t,bottom:t,left:t}}function Yd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function kb(t,e,n){let{reference:r,floating:s}=t;const i=gr(e),a=zv(e),l=$v(a),c=ts(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let w;switch(c){case"top":w={x:h,y:r.y-s.height};break;case"bottom":w={x:h,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:f};break;case"left":w={x:r.x-s.width,y:f};break;default:w={x:r.x,y:r.y}}switch(Ia(e)){case"start":w[a]-=m*(n&&d?-1:1);break;case"end":w[a]+=m*(n&&d?-1:1);break}return w}const H8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=kb(d,r,c),m=r,w={},C=0;for(let v=0;v<l.length;v++){const{name:x,fn:T}=l[v],{x:_,y:S,data:k,reset:L}=await T({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:w,rects:d,platform:a,elements:{reference:t,floating:e}});h=_??h,f=S??f,w={...w,[x]:{...w[x],...k}},L&&C<=50&&(C++,typeof L=="object"&&(L.placement&&(m=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=kb(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:w}};async function uc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:w=0}=es(e,t),C=FI(w),x=l[m?f==="floating"?"reference":"floating":f],T=Yd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),_=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},L=Yd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:S,strategy:c}):_);return{top:(T.top-L.top+C.top)/k.y,bottom:(L.bottom-T.bottom+C.bottom)/k.y,left:(T.left-L.left+C.left)/k.x,right:(L.right-T.right+C.right)/k.x}}const W8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=es(t,e)||{};if(d==null)return{};const f=FI(h),m={x:n,y:r},w=zv(s),C=$v(w),v=await a.getDimensions(d),x=w==="y",T=x?"top":"left",_=x?"bottom":"right",S=x?"clientHeight":"clientWidth",k=i.reference[C]+i.reference[w]-m[w]-i.floating[C],L=m[w]-i.reference[w],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let E=A?A[S]:0;(!E||!await(a.isElement==null?void 0:a.isElement(A)))&&(E=l.floating[S]||i.floating[C]);const y=k/2-L/2,I=E/2-v[C]/2-1,N=Zs(f[T],I),R=Zs(f[_],I),j=N,P=E-v[C]-R,U=E/2-v[C]/2+y,K=pg(j,U,P),Q=!c.arrow&&Ia(s)!=null&&U!==K&&i.reference[C]/2-(U<j?N:R)-v[C]/2<0,te=Q?U<j?U-j:U-P:0;return{[w]:m[w]+te,data:{[w]:K,centerOffset:U-K-te,...Q&&{alignmentOffset:te}},reset:Q}}}),q8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:v=!0,...x}=es(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const T=ts(s),_=gr(l),S=ts(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),L=m||(S||!v?[Qd(l)]:V8(l)),A=C!=="none";!m&&A&&L.push(...$8(l,v,C,k));const E=[l,...L],y=await uc(e,x),I=[];let N=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(y[T]),f){const U=M8(s,a,k);I.push(y[U[0]],y[U[1]])}if(N=[...N,{placement:s,overflows:I}],!I.every(U=>U<=0)){var R,j;const U=(((R=i.flip)==null?void 0:R.index)||0)+1,K=E[U];if(K&&(!(f==="alignment"?_!==gr(K):!1)||N.every(O=>gr(O.placement)===_?O.overflows[0]>0:!0)))return{data:{index:U,overflows:N},reset:{placement:K}};let Q=(j=N.filter(te=>te.overflows[0]<=0).sort((te,O)=>te.overflows[1]-O.overflows[1])[0])==null?void 0:j.placement;if(!Q)switch(w){case"bestFit":{var P;const te=(P=N.filter(O=>{if(A){const G=gr(O.placement);return G===_||G==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(G=>G>0).reduce((G,se)=>G+se,0)]).sort((O,G)=>O[1]-G[1])[0])==null?void 0:P[0];te&&(Q=te);break}case"initialPlacement":Q=l;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function Rb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Pb(t){return P8.some(e=>t[e]>=0)}const G8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=es(t,e);switch(r){case"referenceHidden":{const i=await uc(e,{...s,elementContext:"reference"}),a=Rb(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Pb(a)}}}case"escaped":{const i=await uc(e,{...s,altBoundary:!0}),a=Rb(i,n.floating);return{data:{escapedOffsets:a,escaped:Pb(a)}}}default:return{}}}}},UI=new Set(["left","top"]);async function K8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ts(n),l=Ia(n),c=gr(n)==="y",d=UI.has(a)?-1:1,h=i&&c?-1:1,f=es(e,t);let{mainAxis:m,crossAxis:w,alignmentAxis:C}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof C=="number"&&(w=l==="end"?C*-1:C),c?{x:w*h,y:m*d}:{x:m*d,y:w*h}}const Q8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await K8(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},Y8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:T,y:_}=x;return{x:T,y:_}}},...c}=es(t,e),d={x:n,y:r},h=await uc(e,c),f=gr(ts(s)),m=Bv(f);let w=d[m],C=d[f];if(i){const x=m==="y"?"top":"left",T=m==="y"?"bottom":"right",_=w+h[x],S=w-h[T];w=pg(_,w,S)}if(a){const x=f==="y"?"top":"left",T=f==="y"?"bottom":"right",_=C+h[x],S=C-h[T];C=pg(_,C,S)}const v=l.fn({...e,[m]:w,[f]:C});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:a}}}}}},X8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=es(t,e),h={x:n,y:r},f=gr(s),m=Bv(f);let w=h[m],C=h[f];const v=es(l,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=m==="y"?"height":"width",k=i.reference[m]-i.floating[S]+x.mainAxis,L=i.reference[m]+i.reference[S]-x.mainAxis;w<k?w=k:w>L&&(w=L)}if(d){var T,_;const S=m==="y"?"width":"height",k=UI.has(ts(s)),L=i.reference[f]-i.floating[S]+(k&&((T=a.offset)==null?void 0:T[f])||0)+(k?0:x.crossAxis),A=i.reference[f]+i.reference[S]+(k?0:((_=a.offset)==null?void 0:_[f])||0)-(k?x.crossAxis:0);C<L?C=L:C>A&&(C=A)}return{[m]:w,[f]:C}}}},J8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=es(t,e),h=await uc(e,d),f=ts(s),m=Ia(s),w=gr(s)==="y",{width:C,height:v}=i.floating;let x,T;f==="top"||f==="bottom"?(x=f,T=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(T=f,x=m==="end"?"top":"bottom");const _=v-h.top-h.bottom,S=C-h.left-h.right,k=Zs(v-h[x],_),L=Zs(C-h[T],S),A=!e.middlewareData.shift;let E=k,y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(y=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=_),A&&!m){const N=wn(h.left,0),R=wn(h.right,0),j=wn(h.top,0),P=wn(h.bottom,0);w?y=C-2*(N!==0||R!==0?N+R:wn(h.left,h.right)):E=v-2*(j!==0||P!==0?j+P:wn(h.top,h.bottom))}await c({...e,availableWidth:y,availableHeight:E});const I=await a.getDimensions(l.floating);return C!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function nf(){return typeof window<"u"}function ja(t){return BI(t)?(t.nodeName||"").toLowerCase():"#document"}function Cn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jr(t){var e;return(e=(BI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BI(t){return nf()?t instanceof Node||t instanceof Cn(t).Node:!1}function or(t){return nf()?t instanceof Element||t instanceof Cn(t).Element:!1}function Ir(t){return nf()?t instanceof HTMLElement||t instanceof Cn(t).HTMLElement:!1}function Db(t){return!nf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Cn(t).ShadowRoot}const Z8=new Set(["inline","contents"]);function Rc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ar(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Z8.has(s)}const eB=new Set(["table","td","th"]);function tB(t){return eB.has(ja(t))}const nB=[":popover-open",":modal"];function rf(t){return nB.some(e=>{try{return t.matches(e)}catch{return!1}})}const rB=["transform","translate","scale","rotate","perspective"],sB=["transform","translate","scale","rotate","perspective","filter"],iB=["paint","layout","strict","content"];function Hv(t){const e=Wv(),n=or(t)?ar(t):t;return rB.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||sB.some(r=>(n.willChange||"").includes(r))||iB.some(r=>(n.contain||"").includes(r))}function oB(t){let e=ei(t);for(;Ir(e)&&!fa(e);){if(Hv(e))return e;if(rf(e))return null;e=ei(e)}return null}function Wv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aB=new Set(["html","body","#document"]);function fa(t){return aB.has(ja(t))}function ar(t){return Cn(t).getComputedStyle(t)}function sf(t){return or(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ei(t){if(ja(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Db(t)&&t.host||jr(t);return Db(e)?e.host:e}function $I(t){const e=ei(t);return fa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ir(e)&&Rc(e)?e:$I(e)}function dc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=$I(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Cn(s);if(i){const l=yg(a);return e.concat(a,a.visualViewport||[],Rc(s)?s:[],l&&n?dc(l):[])}return e.concat(s,dc(s,[],n))}function yg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function zI(t){const e=ar(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ir(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Kd(n)!==i||Kd(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function qv(t){return or(t)?t:t.contextElement}function $o(t){const e=qv(t);if(!Ir(e))return Tr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=zI(e);let a=(i?Kd(n.width):n.width)/r,l=(i?Kd(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const lB=Tr(0);function HI(t){const e=Cn(t);return!Wv()||!e.visualViewport?lB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Cn(t)?!1:e}function Qi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=qv(t);let a=Tr(1);e&&(r?or(r)&&(a=$o(r)):a=$o(t));const l=cB(i,n,r)?HI(i):Tr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const m=Cn(i),w=r&&or(r)?Cn(r):r;let C=m,v=yg(C);for(;v&&r&&w!==C;){const x=$o(v),T=v.getBoundingClientRect(),_=ar(v),S=T.left+(v.clientLeft+parseFloat(_.paddingLeft))*x.x,k=T.top+(v.clientTop+parseFloat(_.paddingTop))*x.y;c*=x.x,d*=x.y,h*=x.x,f*=x.y,c+=S,d+=k,C=Cn(v),v=yg(C)}}return Yd({width:h,height:f,x:c,y:d})}function of(t,e){const n=sf(t).scrollLeft;return e?e.left+n:Qi(jr(t)).left+n}function WI(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-of(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function uB(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=jr(r),l=e?rf(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Tr(1);const h=Tr(0),f=Ir(r);if((f||!f&&!i)&&((ja(r)!=="body"||Rc(a))&&(c=sf(r)),Ir(r))){const w=Qi(r);d=$o(r),h.x=w.x+r.clientLeft,h.y=w.y+r.clientTop}const m=a&&!f&&!i?WI(a,c):Tr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function dB(t){return Array.from(t.getClientRects())}function hB(t){const e=jr(t),n=sf(t),r=t.ownerDocument.body,s=wn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=wn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+of(t);const l=-n.scrollTop;return ar(r).direction==="rtl"&&(a+=wn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}const Lb=25;function fB(t,e){const n=Cn(t),r=jr(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=Wv();(!h||h&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=of(r);if(d<=0){const h=r.ownerDocument,f=h.body,m=getComputedStyle(f),w=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,C=Math.abs(r.clientWidth-f.clientWidth-w);C<=Lb&&(i-=C)}else d<=Lb&&(i+=d);return{width:i,height:a,x:l,y:c}}const mB=new Set(["absolute","fixed"]);function pB(t,e){const n=Qi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ir(t)?$o(t):Tr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function Ob(t,e,n){let r;if(e==="viewport")r=fB(t,n);else if(e==="document")r=hB(jr(t));else if(or(e))r=pB(e,n);else{const s=HI(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Yd(r)}function qI(t,e){const n=ei(t);return n===e||!or(n)||fa(n)?!1:ar(n).position==="fixed"||qI(n,e)}function gB(t,e){const n=e.get(t);if(n)return n;let r=dc(t,[],!1).filter(l=>or(l)&&ja(l)!=="body"),s=null;const i=ar(t).position==="fixed";let a=i?ei(t):t;for(;or(a)&&!fa(a);){const l=ar(a),c=Hv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&mB.has(s.position)||Rc(a)&&!c&&qI(t,a))?r=r.filter(h=>h!==a):s=l,a=ei(a)}return e.set(t,r),r}function yB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?rf(e)?[]:gB(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=Ob(e,h,s);return d.top=wn(f.top,d.top),d.right=Zs(f.right,d.right),d.bottom=Zs(f.bottom,d.bottom),d.left=wn(f.left,d.left),d},Ob(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function vB(t){const{width:e,height:n}=zI(t);return{width:e,height:n}}function xB(t,e,n){const r=Ir(e),s=jr(e),i=n==="fixed",a=Qi(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Tr(0);function d(){c.x=of(s)}if(r||!r&&!i)if((ja(e)!=="body"||Rc(s))&&(l=sf(e)),r){const w=Qi(e,!0,i,e);c.x=w.x+e.clientLeft,c.y=w.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?WI(s,l):Tr(0),f=a.left+l.scrollLeft-c.x-h.x,m=a.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:a.width,height:a.height}}function jm(t){return ar(t).position==="static"}function Mb(t,e){if(!Ir(t)||ar(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return jr(t)===n&&(n=n.ownerDocument.body),n}function GI(t,e){const n=Cn(t);if(rf(t))return n;if(!Ir(t)){let s=ei(t);for(;s&&!fa(s);){if(or(s)&&!jm(s))return s;s=ei(s)}return n}let r=Mb(t,e);for(;r&&tB(r)&&jm(r);)r=Mb(r,e);return r&&fa(r)&&jm(r)&&!Hv(r)?n:r||oB(t)||n}const wB=async function(t){const e=this.getOffsetParent||GI,n=this.getDimensions,r=await n(t.floating);return{reference:xB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _B(t){return ar(t).direction==="rtl"}const bB={convertOffsetParentRelativeRectToViewportRelativeRect:uB,getDocumentElement:jr,getClippingRect:yB,getOffsetParent:GI,getElementRects:wB,getClientRects:dB,getDimensions:vB,getScale:$o,isElement:or,isRTL:_B};function KI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function EB(t,e){let n=null,r;const s=jr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:w}=d;if(l||e(),!m||!w)return;const C=vu(f),v=vu(s.clientWidth-(h+m)),x=vu(s.clientHeight-(f+w)),T=vu(h),S={rootMargin:-C+"px "+-v+"px "+-x+"px "+-T+"px",threshold:wn(0,Zs(1,c))||1};let k=!0;function L(A){const E=A[0].intersectionRatio;if(E!==c){if(!k)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!KI(d,t.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(L,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,S)}n.observe(t)}return a(!0),i}function NB(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=qv(t),h=s||i?[...d?dc(d):[],...dc(e)]:[];h.forEach(T=>{s&&T.addEventListener("scroll",n,{passive:!0}),i&&T.addEventListener("resize",n)});const f=d&&l?EB(d,n):null;let m=-1,w=null;a&&(w=new ResizeObserver(T=>{let[_]=T;_&&_.target===d&&w&&(w.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=w)==null||S.observe(e)})),n()}),d&&!c&&w.observe(d),w.observe(e));let C,v=c?Qi(t):null;c&&x();function x(){const T=Qi(t);v&&!KI(v,T)&&n(),v=T,C=requestAnimationFrame(x)}return n(),()=>{var T;h.forEach(_=>{s&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),f==null||f(),(T=w)==null||T.disconnect(),w=null,c&&cancelAnimationFrame(C)}}const TB=Q8,SB=Y8,CB=q8,IB=J8,jB=G8,Vb=W8,AB=X8,kB=(t,e,n)=>{const r=new Map,s={platform:bB,...n},i={...s.platform,_c:r};return H8(t,e,{...s,platform:i})};var RB=typeof document<"u",PB=function(){},Wu=RB?g.useLayoutEffect:PB;function Xd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Xd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function QI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Fb(t,e){const n=QI(t);return Math.round(e*n)/n}function Am(t){const e=g.useRef(t);return Wu(()=>{e.current=t}),e}function DB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,w]=g.useState(r);Xd(m,r)||w(r);const[C,v]=g.useState(null),[x,T]=g.useState(null),_=g.useCallback(O=>{O!==A.current&&(A.current=O,v(O))},[]),S=g.useCallback(O=>{O!==E.current&&(E.current=O,T(O))},[]),k=i||C,L=a||x,A=g.useRef(null),E=g.useRef(null),y=g.useRef(h),I=c!=null,N=Am(c),R=Am(s),j=Am(d),P=g.useCallback(()=>{if(!A.current||!E.current)return;const O={placement:e,strategy:n,middleware:m};R.current&&(O.platform=R.current),kB(A.current,E.current,O).then(G=>{const se={...G,isPositioned:j.current!==!1};U.current&&!Xd(y.current,se)&&(y.current=se,ya.flushSync(()=>{f(se)}))})},[m,e,n,R,j]);Wu(()=>{d===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[d]);const U=g.useRef(!1);Wu(()=>(U.current=!0,()=>{U.current=!1}),[]),Wu(()=>{if(k&&(A.current=k),L&&(E.current=L),k&&L){if(N.current)return N.current(k,L,P);P()}},[k,L,P,N,I]);const K=g.useMemo(()=>({reference:A,floating:E,setReference:_,setFloating:S}),[_,S]),Q=g.useMemo(()=>({reference:k,floating:L}),[k,L]),te=g.useMemo(()=>{const O={position:n,left:0,top:0};if(!Q.floating)return O;const G=Fb(Q.floating,h.x),se=Fb(Q.floating,h.y);return l?{...O,transform:"translate("+G+"px, "+se+"px)",...QI(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:se}},[n,l,Q.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:P,refs:K,elements:Q,floatingStyles:te}),[h,P,K,Q,te])}const LB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Vb({element:r.current,padding:s}).fn(n):{}:r?Vb({element:r,padding:s}).fn(n):{}}}},OB=(t,e)=>({...TB(t),options:[t,e]}),MB=(t,e)=>({...SB(t),options:[t,e]}),VB=(t,e)=>({...AB(t),options:[t,e]}),FB=(t,e)=>({...CB(t),options:[t,e]}),UB=(t,e)=>({...IB(t),options:[t,e]}),BB=(t,e)=>({...jB(t),options:[t,e]}),$B=(t,e)=>({...LB(t),options:[t,e]});var zB="Arrow",YI=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(Re.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});YI.displayName=zB;var HB=YI;function Gv(t){const[e,n]=g.useState(void 0);return bt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Kv="Popper",[XI,JI]=di(Kv),[WB,ZI]=XI(Kv),ej=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(WB,{scope:e,anchor:r,onAnchorChange:s,children:n})};ej.displayName=Kv;var tj="PopperAnchor",nj=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=ZI(tj,n),a=g.useRef(null),l=Je(e,a),c=g.useRef(null);return g.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||a.current,d!==c.current&&i.onAnchorChange(c.current)}),r?null:o.jsx(Re.div,{...s,ref:l})});nj.displayName=tj;var Qv="PopperContent",[qB,GB]=XI(Qv),rj=g.forwardRef((t,e)=>{var q,ue,Le,Ce,be,Ie;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:w="optimized",onPlaced:C,...v}=t,x=ZI(Qv,n),[T,_]=g.useState(null),S=Je(e,It=>_(It)),[k,L]=g.useState(null),A=Gv(k),E=(A==null?void 0:A.width)??0,y=(A==null?void 0:A.height)??0,I=r+(i!=="center"?"-"+i:""),N=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(d)?d:[d],j=R.length>0,P={padding:N,boundary:R.filter(QB),altBoundary:j},{refs:U,floatingStyles:K,placement:Q,isPositioned:te,middlewareData:O}=DB({strategy:"fixed",placement:I,whileElementsMounted:(...It)=>NB(...It,{animationFrame:w==="always"}),elements:{reference:x.anchor},middleware:[OB({mainAxis:s+y,alignmentAxis:a}),c&&MB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?VB():void 0,...P}),c&&FB({...P}),UB({...P,apply:({elements:It,rects:yn,availableWidth:mi,availableHeight:Ar})=>{const{width:kr,height:Pc}=yn.reference,lt=It.floating.style;lt.setProperty("--radix-popper-available-width",`${mi}px`),lt.setProperty("--radix-popper-available-height",`${Ar}px`),lt.setProperty("--radix-popper-anchor-width",`${kr}px`),lt.setProperty("--radix-popper-anchor-height",`${Pc}px`)}}),k&&$B({element:k,padding:l}),YB({arrowWidth:E,arrowHeight:y}),m&&BB({strategy:"referenceHidden",...P})]}),[G,se]=oj(Q),V=Zr(C);bt(()=>{te&&(V==null||V())},[te,V]);const W=(q=O.arrow)==null?void 0:q.x,me=(ue=O.arrow)==null?void 0:ue.y,ve=((Le=O.arrow)==null?void 0:Le.centerOffset)!==0,[J,ee]=g.useState();return bt(()=>{T&&ee(window.getComputedStyle(T).zIndex)},[T]),o.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:te?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(Ce=O.transformOrigin)==null?void 0:Ce.x,(be=O.transformOrigin)==null?void 0:be.y].join(" "),...((Ie=O.hide)==null?void 0:Ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(qB,{scope:n,placedSide:G,onArrowChange:L,arrowX:W,arrowY:me,shouldHideArrow:ve,children:o.jsx(Re.div,{"data-side":G,"data-align":se,...v,ref:S,style:{...v.style,animation:te?void 0:"none"}})})})});rj.displayName=Qv;var sj="PopperArrow",KB={top:"bottom",right:"left",bottom:"top",left:"right"},ij=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=GB(sj,r),a=KB[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(HB,{...s,ref:n,style:{...s.style,display:"block"}})})});ij.displayName=sj;function QB(t){return t!==null}var YB=t=>({name:"transformOrigin",options:t,fn(e){var x,T,_;const{placement:n,rects:r,middlewareData:s}=e,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=oj(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((T=s.arrow)==null?void 0:T.x)??0)+l/2,w=(((_=s.arrow)==null?void 0:_.y)??0)+c/2;let C="",v="";return d==="bottom"?(C=a?f:`${m}px`,v=`${-c}px`):d==="top"?(C=a?f:`${m}px`,v=`${r.floating.height+c}px`):d==="right"?(C=`${-c}px`,v=a?f:`${w}px`):d==="left"&&(C=`${r.floating.width+c}px`,v=a?f:`${w}px`),{data:{x:C,y:v}}}});function oj(t){const[e,n="center"]=t.split("-");return[e,n]}var XB=ej,JB=nj,ZB=rj,e$=ij,t$="Portal",aj=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);bt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?wR.createPortal(o.jsx(Re.div,{...r,ref:e}),a):null});aj.displayName=t$;function n$(t){const e=r$(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(i$);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function r$(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=a$(s),l=o$(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var s$=Symbol("radix.slottable");function i$(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===s$}function o$(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function a$(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Yv(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var lj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),l$="VisuallyHidden",c$=g.forwardRef((t,e)=>o.jsx(Re.span,{...t,ref:e,style:{...lj,...t.style}}));c$.displayName=l$;var u$=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ho=new WeakMap,xu=new WeakMap,wu={},km=0,cj=function(t){return t&&(t.host||cj(t.parentNode))},d$=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=cj(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},h$=function(t,e,n,r){var s=d$(e,Array.isArray(t)?t:[t]);wu[n]||(wu[n]=new WeakMap);var i=wu[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var w=m.getAttribute(r),C=w!==null&&w!=="false",v=(ho.get(m)||0)+1,x=(i.get(m)||0)+1;ho.set(m,v),i.set(m,x),a.push(m),v===1&&C&&xu.set(m,!0),x===1&&m.setAttribute(n,"true"),C||m.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",m,T)}})};return h(e),l.clear(),km++,function(){a.forEach(function(f){var m=ho.get(f)-1,w=i.get(f)-1;ho.set(f,m),i.set(f,w),m||(xu.has(f)||f.removeAttribute(r),xu.delete(f)),w||f.removeAttribute(n)}),km--,km||(ho=new WeakMap,ho=new WeakMap,xu=new WeakMap,wu={})}},f$=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=u$(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),h$(r,s,n,"aria-hidden")):function(){return null}},mr=function(){return mr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mr.apply(this,arguments)};function uj(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function m$(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var qu="right-scroll-bar-position",Gu="width-before-scroll-bar",p$="with-scroll-bars-hidden",g$="--removed-body-scroll-bar-size";function Rm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function y$(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var v$=typeof window<"u"?g.useLayoutEffect:g.useEffect,Ub=new WeakMap;function x$(t,e){var n=y$(null,function(r){return t.forEach(function(s){return Rm(s,r)})});return v$(function(){var r=Ub.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Rm(l,null)}),i.forEach(function(l){s.has(l)||Rm(l,a)})}Ub.set(n,t)},[t]),n}function w$(t){return t}function _$(t,e){e===void 0&&(e=w$);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function b$(t){t===void 0&&(t={});var e=_$(null);return e.options=mr({async:!0,ssr:!1},t),e}var dj=function(t){var e=t.sideCar,n=uj(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,mr({},n))};dj.isSideCarExport=!0;function E$(t,e){return t.useMedium(e),dj}var hj=b$(),Pm=function(){},af=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Pm,onWheelCapture:Pm,onTouchMoveCapture:Pm}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,w=t.noRelative,C=t.noIsolation,v=t.inert,x=t.allowPinchZoom,T=t.as,_=T===void 0?"div":T,S=t.gapMode,k=uj(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=m,A=x$([n,e]),E=mr(mr({},k),s);return g.createElement(g.Fragment,null,h&&g.createElement(L,{sideCar:hj,removeScrollBar:d,shards:f,noRelative:w,noIsolation:C,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:S}),a?g.cloneElement(g.Children.only(l),mr(mr({},E),{ref:A})):g.createElement(_,mr({},E,{className:c,ref:A}),l))});af.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};af.classNames={fullWidth:Gu,zeroRight:qu};var N$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function T$(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=N$();return e&&t.setAttribute("nonce",e),t}function S$(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function C$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var I$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=T$())&&(S$(e,n),C$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},j$=function(){var t=I$();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},fj=function(){var t=j$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},A$={left:0,top:0,right:0,gap:0},Dm=function(t){return parseInt(t||"",10)||0},k$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Dm(n),Dm(r),Dm(s)]},R$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return A$;var e=k$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},P$=fj(),zo="data-scroll-locked",D$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(p$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(zo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(qu," .").concat(qu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gu," .").concat(Gu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zo,`] {
    `).concat(g$,": ").concat(l,`px;
  }
`)},Bb=function(){var t=parseInt(document.body.getAttribute(zo)||"0",10);return isFinite(t)?t:0},L$=function(){g.useEffect(function(){return document.body.setAttribute(zo,(Bb()+1).toString()),function(){var t=Bb()-1;t<=0?document.body.removeAttribute(zo):document.body.setAttribute(zo,t.toString())}},[])},O$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;L$();var i=g.useMemo(function(){return R$(s)},[s]);return g.createElement(P$,{styles:D$(i,!e,s,n?"":"!important")})},vg=!1;if(typeof window<"u")try{var _u=Object.defineProperty({},"passive",{get:function(){return vg=!0,!0}});window.addEventListener("test",_u,_u),window.removeEventListener("test",_u,_u)}catch{vg=!1}var fo=vg?{passive:!1}:!1,M$=function(t){return t.tagName==="TEXTAREA"},mj=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!M$(t)&&n[e]==="visible")},V$=function(t){return mj(t,"overflowY")},F$=function(t){return mj(t,"overflowX")},$b=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=pj(t,r);if(s){var i=gj(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},U$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},B$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},pj=function(t,e){return t==="v"?V$(e):F$(e)},gj=function(t,e){return t==="v"?U$(e):B$(e)},$$=function(t,e){return t==="h"&&e==="rtl"?-1:1},z$=function(t,e,n,r,s){var i=$$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,m=0;do{if(!l)break;var w=gj(t,l),C=w[0],v=w[1],x=w[2],T=v-x-i*C;(C||T)&&pj(t,l)&&(f+=T,m+=C);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(d=!0),d},bu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zb=function(t){return[t.deltaX,t.deltaY]},Hb=function(t){return t&&"current"in t?t.current:t},H$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},W$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},q$=0,mo=[];function G$(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(q$++)[0],i=g.useState(fj)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=m$([t.lockRef.current],(t.shards||[]).map(Hb),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var T=bu(v),_=n.current,S="deltaX"in v?v.deltaX:_[0]-T[0],k="deltaY"in v?v.deltaY:_[1]-T[1],L,A=v.target,E=Math.abs(S)>Math.abs(k)?"h":"v";if("touches"in v&&E==="h"&&A.type==="range")return!1;var y=$b(E,A);if(!y)return!0;if(y?L=E:(L=E==="v"?"h":"v",y=$b(E,A)),!y)return!1;if(!r.current&&"changedTouches"in v&&(S||k)&&(r.current=L),!L)return!0;var I=r.current||L;return z$(I,x,v,I==="h"?S:k)},[]),c=g.useCallback(function(v){var x=v;if(!(!mo.length||mo[mo.length-1]!==i)){var T="deltaY"in x?zb(x):bu(x),_=e.current.filter(function(L){return L.name===x.type&&(L.target===x.target||x.target===L.shadowParent)&&H$(L.delta,T)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var S=(a.current.shards||[]).map(Hb).filter(Boolean).filter(function(L){return L.contains(x.target)}),k=S.length>0?l(x,S[0]):!a.current.noIsolation;k&&x.cancelable&&x.preventDefault()}}},[]),d=g.useCallback(function(v,x,T,_){var S={name:v,delta:x,target:T,should:_,shadowParent:K$(T)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(k){return k!==S})},1)},[]),h=g.useCallback(function(v){n.current=bu(v),r.current=void 0},[]),f=g.useCallback(function(v){d(v.type,zb(v),v.target,l(v,t.lockRef.current))},[]),m=g.useCallback(function(v){d(v.type,bu(v),v.target,l(v,t.lockRef.current))},[]);g.useEffect(function(){return mo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,fo),document.addEventListener("touchmove",c,fo),document.addEventListener("touchstart",h,fo),function(){mo=mo.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,fo),document.removeEventListener("touchmove",c,fo),document.removeEventListener("touchstart",h,fo)}},[]);var w=t.removeScrollBar,C=t.inert;return g.createElement(g.Fragment,null,C?g.createElement(i,{styles:W$(s)}):null,w?g.createElement(O$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function K$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Q$=E$(hj,G$);var yj=g.forwardRef(function(t,e){return g.createElement(af,mr({},t,{ref:e,sideCar:Q$}))});yj.classNames=af.classNames;var Y$=[" ","Enter","ArrowUp","ArrowDown"],X$=[" ","Enter"],Yi="Select",[lf,cf,J$]=cI(Yi),[Aa]=di(Yi,[J$,JI]),uf=JI(),[Z$,hi]=Aa(Yi),[ez,tz]=Aa(Yi),vj=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:w,form:C}=t,v=uf(e),[x,T]=g.useState(null),[_,S]=g.useState(null),[k,L]=g.useState(!1),A=Zh(d),[E,y]=ha({prop:r,defaultProp:s??!1,onChange:i,caller:Yi}),[I,N]=ha({prop:a,defaultProp:l,onChange:c,caller:Yi}),R=g.useRef(null),j=x?C||!!x.closest("form"):!0,[P,U]=g.useState(new Set),K=Array.from(P).map(Q=>Q.props.value).join(";");return o.jsx(XB,{...v,children:o.jsxs(Z$,{required:w,scope:e,trigger:x,onTriggerChange:T,valueNode:_,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:L,contentId:Ac(),value:I,onValueChange:N,open:E,onOpenChange:y,dir:A,triggerPointerDownPosRef:R,disabled:m,children:[o.jsx(lf.Provider,{scope:e,children:o.jsx(ez,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(Q=>{U(te=>new Set(te).add(Q))},[]),onNativeOptionRemove:g.useCallback(Q=>{U(te=>{const O=new Set(te);return O.delete(Q),O})},[]),children:n})}),j?o.jsxs($j,{"aria-hidden":!0,required:w,tabIndex:-1,name:h,autoComplete:f,value:I,onChange:Q=>N(Q.target.value),disabled:m,form:C,children:[I===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},K):null]})})};vj.displayName=Yi;var xj="SelectTrigger",wj=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=uf(n),a=hi(xj,n),l=a.disabled||r,c=Je(e,a.onTriggerChange),d=cf(n),h=g.useRef("touch"),[f,m,w]=Hj(v=>{const x=d().filter(S=>!S.disabled),T=x.find(S=>S.value===a.value),_=Wj(x,v,T);_!==void 0&&a.onValueChange(_.value)}),C=v=>{l||(a.onOpenChange(!0),w()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return o.jsx(JB,{asChild:!0,...i,children:o.jsx(Re.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":zj(a.value)?"":void 0,...s,ref:c,onClick:Ae(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&C(v)}),onPointerDown:Ae(s.onPointerDown,v=>{h.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(C(v),v.preventDefault())}),onKeyDown:Ae(s.onKeyDown,v=>{const x=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&Y$.includes(v.key)&&(C(),v.preventDefault())})})})});wj.displayName=xj;var _j="SelectValue",bj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=hi(_j,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Je(e,c.onValueNodeChange);return bt(()=>{d(h)},[d,h]),o.jsx(Re.span,{...l,ref:f,style:{pointerEvents:"none"},children:zj(c.value)?o.jsx(o.Fragment,{children:a}):i})});bj.displayName=_j;var nz="SelectIcon",Ej=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Re.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Ej.displayName=nz;var rz="SelectPortal",Nj=t=>o.jsx(aj,{asChild:!0,...t});Nj.displayName=rz;var Xi="SelectContent",Tj=g.forwardRef((t,e)=>{const n=hi(Xi,t.__scopeSelect),[r,s]=g.useState();if(bt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?ya.createPortal(o.jsx(Sj,{scope:t.__scopeSelect,children:o.jsx(lf.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(Cj,{...t,ref:e})});Tj.displayName=Xi;var Gn=10,[Sj,fi]=Aa(Xi),sz="SelectContentImpl",iz=n$("SelectContent.RemoveScroll"),Cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:w,sticky:C,hideWhenDetached:v,avoidCollisions:x,...T}=t,_=hi(Xi,n),[S,k]=g.useState(null),[L,A]=g.useState(null),E=Je(e,q=>k(q)),[y,I]=g.useState(null),[N,R]=g.useState(null),j=cf(n),[P,U]=g.useState(!1),K=g.useRef(!1);g.useEffect(()=>{if(S)return f$(S)},[S]),T8();const Q=g.useCallback(q=>{const[ue,...Le]=j().map(Ie=>Ie.ref.current),[Ce]=Le.slice(-1),be=document.activeElement;for(const Ie of q)if(Ie===be||(Ie==null||Ie.scrollIntoView({block:"nearest"}),Ie===ue&&L&&(L.scrollTop=0),Ie===Ce&&L&&(L.scrollTop=L.scrollHeight),Ie==null||Ie.focus(),document.activeElement!==be))return},[j,L]),te=g.useCallback(()=>Q([y,S]),[Q,y,S]);g.useEffect(()=>{P&&te()},[P,te]);const{onOpenChange:O,triggerPointerDownPosRef:G}=_;g.useEffect(()=>{if(S){let q={x:0,y:0};const ue=Ce=>{var be,Ie;q={x:Math.abs(Math.round(Ce.pageX)-(((be=G.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((Ie=G.current)==null?void 0:Ie.y)??0))}},Le=Ce=>{q.x<=10&&q.y<=10?Ce.preventDefault():S.contains(Ce.target)||O(!1),document.removeEventListener("pointermove",ue),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",Le,{capture:!0})}}},[S,O,G]),g.useEffect(()=>{const q=()=>O(!1);return window.addEventListener("blur",q),window.addEventListener("resize",q),()=>{window.removeEventListener("blur",q),window.removeEventListener("resize",q)}},[O]);const[se,V]=Hj(q=>{const ue=j().filter(be=>!be.disabled),Le=ue.find(be=>be.ref.current===document.activeElement),Ce=Wj(ue,q,Le);Ce&&setTimeout(()=>Ce.ref.current.focus())}),W=g.useCallback((q,ue,Le)=>{const Ce=!K.current&&!Le;(_.value!==void 0&&_.value===ue||Ce)&&(I(q),Ce&&(K.current=!0))},[_.value]),me=g.useCallback(()=>S==null?void 0:S.focus(),[S]),ve=g.useCallback((q,ue,Le)=>{const Ce=!K.current&&!Le;(_.value!==void 0&&_.value===ue||Ce)&&R(q)},[_.value]),J=r==="popper"?xg:Ij,ee=J===xg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:w,sticky:C,hideWhenDetached:v,avoidCollisions:x}:{};return o.jsx(Sj,{scope:n,content:S,viewport:L,onViewportChange:A,itemRefCallback:W,selectedItem:y,onItemLeave:me,itemTextRefCallback:ve,focusSelectedItem:te,selectedItemText:N,position:r,isPositioned:P,searchRef:se,children:o.jsx(yj,{as:iz,allowPinchZoom:!0,children:o.jsx(MI,{asChild:!0,trapped:_.open,onMountAutoFocus:q=>{q.preventDefault()},onUnmountAutoFocus:Ae(s,q=>{var ue;(ue=_.trigger)==null||ue.focus({preventScroll:!0}),q.preventDefault()}),children:o.jsx(LI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:q=>q.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:o.jsx(J,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:q=>q.preventDefault(),...T,...ee,onPlaced:()=>U(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...T.style},onKeyDown:Ae(T.onKeyDown,q=>{const ue=q.ctrlKey||q.altKey||q.metaKey;if(q.key==="Tab"&&q.preventDefault(),!ue&&q.key.length===1&&V(q.key),["ArrowUp","ArrowDown","Home","End"].includes(q.key)){let Ce=j().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(q.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(q.key)){const be=q.target,Ie=Ce.indexOf(be);Ce=Ce.slice(Ie+1)}setTimeout(()=>Q(Ce)),q.preventDefault()}})})})})})})});Cj.displayName=sz;var oz="SelectItemAlignedPosition",Ij=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=hi(Xi,n),a=fi(Xi,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=Je(e,E=>h(E)),m=cf(n),w=g.useRef(!1),C=g.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:T,focusSelectedItem:_}=a,S=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&x&&T){const E=i.trigger.getBoundingClientRect(),y=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),N=T.getBoundingClientRect();if(i.dir!=="rtl"){const be=N.left-y.left,Ie=I.left-be,It=E.left-Ie,yn=E.width+It,mi=Math.max(yn,y.width),Ar=window.innerWidth-Gn,kr=_b(Ie,[Gn,Math.max(Gn,Ar-mi)]);l.style.minWidth=yn+"px",l.style.left=kr+"px"}else{const be=y.right-N.right,Ie=window.innerWidth-I.right-be,It=window.innerWidth-E.right-Ie,yn=E.width+It,mi=Math.max(yn,y.width),Ar=window.innerWidth-Gn,kr=_b(Ie,[Gn,Math.max(Gn,Ar-mi)]);l.style.minWidth=yn+"px",l.style.right=kr+"px"}const R=m(),j=window.innerHeight-Gn*2,P=v.scrollHeight,U=window.getComputedStyle(d),K=parseInt(U.borderTopWidth,10),Q=parseInt(U.paddingTop,10),te=parseInt(U.borderBottomWidth,10),O=parseInt(U.paddingBottom,10),G=K+Q+P+O+te,se=Math.min(x.offsetHeight*5,G),V=window.getComputedStyle(v),W=parseInt(V.paddingTop,10),me=parseInt(V.paddingBottom,10),ve=E.top+E.height/2-Gn,J=j-ve,ee=x.offsetHeight/2,q=x.offsetTop+ee,ue=K+Q+q,Le=G-ue;if(ue<=ve){const be=R.length>0&&x===R[R.length-1].ref.current;l.style.bottom="0px";const Ie=d.clientHeight-v.offsetTop-v.offsetHeight,It=Math.max(J,ee+(be?me:0)+Ie+te),yn=ue+It;l.style.height=yn+"px"}else{const be=R.length>0&&x===R[0].ref.current;l.style.top="0px";const It=Math.max(ve,K+v.offsetTop+(be?W:0)+ee)+Le;l.style.height=It+"px",v.scrollTop=ue-ve+v.offsetTop}l.style.margin=`${Gn}px 0`,l.style.minHeight=se+"px",l.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>w.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,x,T,i.dir,r]);bt(()=>S(),[S]);const[k,L]=g.useState();bt(()=>{d&&L(window.getComputedStyle(d).zIndex)},[d]);const A=g.useCallback(E=>{E&&C.current===!0&&(S(),_==null||_(),C.current=!1)},[S,_]);return o.jsx(lz,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:w,onScrollButtonChange:A,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:o.jsx(Re.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Ij.displayName=oz;var az="SelectPopperPosition",xg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Gn,...i}=t,a=uf(n);return o.jsx(ZB,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xg.displayName=az;var[lz,Xv]=Aa(Xi,{}),wg="SelectViewport",jj=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=fi(wg,n),a=Xv(wg,n),l=Je(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(lf.Slot,{scope:n,children:o.jsx(Re.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ae(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const w=Math.abs(c.current-h.scrollTop);if(w>0){const C=window.innerHeight-Gn*2,v=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),T=Math.max(v,x);if(T<C){const _=T+w,S=Math.min(C,_),k=_-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});jj.displayName=wg;var Aj="SelectGroup",[cz,uz]=Aa(Aj),dz=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ac();return o.jsx(cz,{scope:n,id:s,children:o.jsx(Re.div,{role:"group","aria-labelledby":s,...r,ref:e})})});dz.displayName=Aj;var kj="SelectLabel",Rj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=uz(kj,n);return o.jsx(Re.div,{id:s.id,...r,ref:e})});Rj.displayName=kj;var Jd="SelectItem",[hz,Pj]=Aa(Jd),Dj=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=hi(Jd,n),c=fi(Jd,n),d=l.value===r,[h,f]=g.useState(i??""),[m,w]=g.useState(!1),C=Je(e,_=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,_,r,s)}),v=Ac(),x=g.useRef("touch"),T=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(hz,{scope:n,value:r,disabled:s,textId:v,isSelected:d,onItemTextChange:g.useCallback(_=>{f(S=>S||((_==null?void 0:_.textContent)??"").trim())},[]),children:o.jsx(lf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(Re.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:C,onFocus:Ae(a.onFocus,()=>w(!0)),onBlur:Ae(a.onBlur,()=>w(!1)),onClick:Ae(a.onClick,()=>{x.current!=="mouse"&&T()}),onPointerUp:Ae(a.onPointerUp,()=>{x.current==="mouse"&&T()}),onPointerDown:Ae(a.onPointerDown,_=>{x.current=_.pointerType}),onPointerMove:Ae(a.onPointerMove,_=>{var S;x.current=_.pointerType,s?(S=c.onItemLeave)==null||S.call(c):x.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(a.onPointerLeave,_=>{var S;_.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:Ae(a.onKeyDown,_=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&_.key===" "||(X$.includes(_.key)&&T(),_.key===" "&&_.preventDefault())})})})})});Dj.displayName=Jd;var pl="SelectItemText",Lj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=hi(pl,n),l=fi(pl,n),c=Pj(pl,n),d=tz(pl,n),[h,f]=g.useState(null),m=Je(e,T=>f(T),c.onItemTextChange,T=>{var _;return(_=l.itemTextRefCallback)==null?void 0:_.call(l,T,c.value,c.disabled)}),w=h==null?void 0:h.textContent,C=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:w},c.value),[c.disabled,c.value,w]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=d;return bt(()=>(v(C),()=>x(C)),[v,x,C]),o.jsxs(o.Fragment,{children:[o.jsx(Re.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?ya.createPortal(i.children,a.valueNode):null]})});Lj.displayName=pl;var Oj="SelectItemIndicator",Mj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Pj(Oj,n).isSelected?o.jsx(Re.span,{"aria-hidden":!0,...r,ref:e}):null});Mj.displayName=Oj;var _g="SelectScrollUpButton",Vj=g.forwardRef((t,e)=>{const n=fi(_g,t.__scopeSelect),r=Xv(_g,t.__scopeSelect),[s,i]=g.useState(!1),a=Je(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Uj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Vj.displayName=_g;var bg="SelectScrollDownButton",Fj=g.forwardRef((t,e)=>{const n=fi(bg,t.__scopeSelect),r=Xv(bg,t.__scopeSelect),[s,i]=g.useState(!1),a=Je(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Uj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Fj.displayName=bg;var Uj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=fi("SelectScrollButton",n),a=g.useRef(null),l=cf(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),bt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Re.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ae(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Ae(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Ae(s.onPointerLeave,()=>{c()})})}),fz="SelectSeparator",Bj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Re.div,{"aria-hidden":!0,...r,ref:e})});Bj.displayName=fz;var Eg="SelectArrow",mz=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=uf(n),i=hi(Eg,n),a=fi(Eg,n);return i.open&&a.position==="popper"?o.jsx(e$,{...s,...r,ref:e}):null});mz.displayName=Eg;var pz="SelectBubbleInput",$j=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),i=Je(r,s),a=Yv(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(Re.select,{...n,style:{...lj,...n.style},ref:i,defaultValue:e})});$j.displayName=pz;function zj(t){return t===""||t===void 0}function Hj(t){const e=Zr(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Wj(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=gz(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function gz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yz=vj,qj=wj,vz=bj,xz=Ej,wz=Nj,Gj=Tj,_z=jj,Kj=Rj,Qj=Dj,bz=Lj,Ez=Mj,Yj=Vj,Xj=Fj,Jj=Bj;const Jt=yz,Zt=vz,zt=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(qj,{ref:r,className:Pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(xz,{asChild:!0,children:o.jsx(WC,{className:"h-4 w-4 opacity-50"})})]}));zt.displayName=qj.displayName;const Zj=g.forwardRef(({className:t,...e},n)=>o.jsx(Yj,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(TU,{className:"h-4 w-4"})}));Zj.displayName=Yj.displayName;const eA=g.forwardRef(({className:t,...e},n)=>o.jsx(Xj,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(WC,{className:"h-4 w-4"})}));eA.displayName=Xj.displayName;const Ht=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(wz,{children:o.jsxs(Gj,{ref:s,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(Zj,{}),o.jsx(_z,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(eA,{})]})}));Ht.displayName=Gj.displayName;const Nz=g.forwardRef(({className:t,...e},n)=>o.jsx(Kj,{ref:n,className:Pe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Nz.displayName=Kj.displayName;const oe=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Qj,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Ez,{children:o.jsx(NU,{className:"h-4 w-4"})})}),o.jsx(bz,{children:e})]}));oe.displayName=Qj.displayName;const Tz=g.forwardRef(({className:t,...e},n)=>o.jsx(Jj,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));Tz.displayName=Jj.displayName;var df="Switch",[Sz]=di(df),[Cz,Iz]=Sz(df),tA=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,w]=g.useState(null),C=Je(e,S=>w(S)),v=g.useRef(!1),x=m?h||!!m.closest("form"):!0,[T,_]=ha({prop:s,defaultProp:i??!1,onChange:d,caller:df});return o.jsxs(Cz,{scope:n,checked:T,disabled:l,children:[o.jsx(Re.button,{type:"button",role:"switch","aria-checked":T,"aria-required":a,"data-state":iA(T),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:C,onClick:Ae(t.onClick,S=>{_(k=>!k),x&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),x&&o.jsx(sA,{control:m,bubbles:!v.current,name:r,value:c,checked:T,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});tA.displayName=df;var nA="SwitchThumb",rA=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Iz(nA,n);return o.jsx(Re.span,{"data-state":iA(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});rA.displayName=nA;var jz="SwitchBubbleInput",sA=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=Je(a,i),c=Yv(n),d=Gv(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&w){const C=new Event("click",{bubbles:r});w.call(h,n),h.dispatchEvent(C)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sA.displayName=jz;function iA(t){return t?"checked":"unchecked"}var oA=tA,Az=rA;const Rt=g.forwardRef(({className:t,...e},n)=>o.jsx(oA,{className:Pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:o.jsx(Az,{className:Pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Rt.displayName=oA.displayName;const kz=({onBack:t})=>{const{user:e}=Wn(),[n,r]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[s,i]=g.useState([{id:"1",question:"",points:0,flag:""}]),[a,l]=g.useState(!1),[c,d]=g.useState(!1),h=async A=>{A.preventDefault(),l(!0);try{const E={...n,finalCategory:c?n.customCategory:n.category,questions:n.hasMultipleQuestions?s:[],createdAt:new Date,isActive:!0,solvedBy:[],hints:n.hints.filter(y=>y.trim()!==""),totalPoints:n.hasMultipleQuestions?s.reduce((y,I)=>y+I.points,0):n.points,createdBy:e==null?void 0:e.uid,createdByName:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),featuredOnPractice:n.featuredOnPractice,availableInPractice:n.availableInPractice,challengeType:n.challengeType,...n.isExternalChallenge&&{attribution:{...n.externalSource,importedBy:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),importedById:e==null?void 0:e.uid,importedAt:new Date}},...n.creator&&{originalCreator:{name:n.creator,url:n.creatorUrl}}};await uC(Ct(ye,"challenges"),E),alert("Challenge created successfully!"),f()}catch(E){console.error("Error creating challenge:",E),alert("Error creating challenge. Please try again.")}finally{l(!1)}},f=()=>{r({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),i([{id:"1",question:"",points:0,flag:""}]),d(!1)},m=()=>{r({...n,hints:[...n.hints,""]})},w=(A,E)=>{const y=[...n.hints];y[A]=E,r({...n,hints:y})},C=A=>{const E=n.hints.filter((y,I)=>I!==A);r({...n,hints:E})},v=()=>{const A={id:Date.now().toString(),question:"",points:0,flag:""};i([...s,A])},x=(A,E,y)=>{i(s.map(I=>I.id===A?{...I,[E]:y}:I))},T=A=>{s.length>1&&i(s.filter(E=>E.id!==A))},_=A=>{if(A==="link"){const E=prompt("Enter the URL:");if(E){const y={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:E,type:"link"};r({...n,files:[...n.files,y]})}}else{const E=document.createElement("input");E.type="file",E.onchange=y=>{var N;const I=(N=y.target.files)==null?void 0:N[0];if(I){const R={id:Date.now().toString(),name:I.name,url:URL.createObjectURL(I),type:"file"};r({...n,files:[...n.files,R]})}},E.click()}},S=A=>{r({...n,files:n.files.filter(E=>E.id!==A)})},k=A=>{A==="custom"?(d(!0),r({...n,category:"custom"})):(d(!1),r({...n,category:A}))},L=(A,E)=>{r({...n,externalSource:{...n.externalSource,[A]:E}})};return o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Create New Challenge"}),o.jsx(Wt,{children:"Add a new CTF challenge to the platform with advanced options"})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(de,{id:"title",value:n.title,onChange:A=>r({...n,title:A.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"category",children:"Category"}),o.jsxs(Jt,{value:n.category,onValueChange:k,children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"web",children:"Web"}),o.jsx(oe,{value:"crypto",children:"Cryptography"}),o.jsx(oe,{value:"forensics",children:"Forensics"}),o.jsx(oe,{value:"pwn",children:"Pwn"}),o.jsx(oe,{value:"reversing",children:"Reverse Engineering"}),o.jsx(oe,{value:"misc",children:"Miscellaneous"}),o.jsx(oe,{value:"custom",children:"Custom Category"})]})]})]}),c&&o.jsxs("div",{children:[o.jsx(z,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(de,{id:"customCategory",value:n.customCategory,onChange:A=>r({...n,customCategory:A.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Jt,{value:n.difficulty,onValueChange:A=>r({...n,difficulty:A}),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(oe,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(oe,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(z,{htmlFor:"points",children:"Points *"}),o.jsx(de,{id:"points",type:"number",value:n.points,onChange:A=>r({...n,points:parseInt(A.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(z,{htmlFor:"description",children:"Description *"}),o.jsx(Ca,{id:"description",value:n.description,onChange:A=>r({...n,description:A.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xe,{className:"w-5 h-5"}),o.jsx(z,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:n.availableInPractice,onCheckedChange:A=>r({...n,availableInPractice:A})}),o.jsx(z,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:n.featuredOnPractice,onCheckedChange:A=>r({...n,featuredOnPractice:A})}),o.jsxs(z,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Ov,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Jt,{value:n.challengeType,onValueChange:A=>r({...n,challengeType:A}),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"practice",children:"Practice Challenge"}),o.jsx(oe,{value:"live",children:"Live Event Challenge"}),o.jsx(oe,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Sn,{className:"w-5 h-5"}),o.jsx(z,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(de,{id:"creator",value:n.creator,onChange:A=>r({...n,creator:A.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(de,{id:"creatorUrl",value:n.creatorUrl,onChange:A=>r({...n,creatorUrl:A.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qd,{className:"w-5 h-5"}),o.jsx(z,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:n.isExternalChallenge,onCheckedChange:A=>r({...n,isExternalChallenge:A})})]}),n.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(de,{id:"ctfName",value:n.externalSource.ctfName,onChange:A=>L("ctfName",A.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(de,{id:"ctfUrl",value:n.externalSource.ctfUrl,onChange:A=>L("ctfUrl",A.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(de,{id:"originalAuthor",value:n.externalSource.originalAuthor,onChange:A=>L("originalAuthor",A.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(de,{id:"authorUrl",value:n.externalSource.authorUrl,onChange:A=>L("authorUrl",A.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"license",children:"License"}),o.jsxs(Jt,{value:n.externalSource.license,onValueChange:A=>L("license",A),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"unknown",children:"Unknown"}),o.jsx(oe,{value:"MIT",children:"MIT License"}),o.jsx(oe,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(oe,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(oe,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(oe,{value:"custom",children:"Custom License"})]})]}),n.externalSource.license==="custom"&&o.jsx(de,{placeholder:"Specify custom license",className:"mt-2",onChange:A=>L("license",A.target.value)})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Attribution Notice:"})," This challenge will be displayed with proper attribution to the original author and CTF platform."]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:n.hasMultipleQuestions,onCheckedChange:A=>r({...n,hasMultipleQuestions:A})})]}),n.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(z,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Y,{type:"button",onClick:v,variant:"outline",size:"sm",children:[o.jsx(Js,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),s.map((A,E)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(z,{children:["Question ",E+1]}),s.length>1&&o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(A.id),children:o.jsx(Ki,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:`question-${A.id}`,children:"Question Text *"}),o.jsx(de,{id:`question-${A.id}`,value:A.question,onChange:y=>x(A.id,"question",y.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:`points-${A.id}`,children:"Points *"}),o.jsx(de,{id:`points-${A.id}`,type:"number",value:A.points,onChange:y=>x(A.id,"points",parseInt(y.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:`flag-${A.id}`,children:"Flag *"}),o.jsx(de,{id:`flag-${A.id}`,value:A.flag,onChange:y=>x(A.id,"flag",y.target.value),placeholder:"Flag for this question",required:!0})]})]})]},A.id)),s.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",s.reduce((A,E)=>A+E.points,0)]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"flag",children:"Flag *"}),o.jsx(de,{id:"flag",value:n.flag,onChange:A=>r({...n,flag:A.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Jt,{value:n.flagFormat,onValueChange:A=>r({...n,flagFormat:A}),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsxs(oe,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(oe,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(oe,{value:".*",children:"Any format"}),o.jsx(oe,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(oe,{value:"custom",children:"Custom Regex"})]})]}),n.flagFormat==="custom"&&o.jsx(de,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:A=>r({...n,flagFormat:A.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(z,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>_("file"),children:[o.jsx(XC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>_("link"),children:[o.jsx(ca,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),n.files.length>0&&o.jsx("div",{className:"space-y-2",children:n.files.map(A=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[A.type==="file"?o.jsx(cc,{className:"w-4 h-4"}):o.jsx(ca,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:A.name}),A.type==="link"&&o.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(A.id),children:o.jsx(Ki,{className:"w-4 h-4"})})]},A.id))})]}),o.jsxs("div",{children:[o.jsx(z,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[n.hints.map((A,E)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(de,{value:A,onChange:y=>w(E,y.target.value),placeholder:`Hint ${E+1}`}),n.hints.length>1&&o.jsx(Y,{type:"button",variant:"outline",onClick:()=>C(E),children:"Remove"})]},E)),o.jsx(Y,{type:"button",variant:"outline",onClick:m,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(Y,{type:"submit",disabled:a,children:a?"Creating...":"Create Challenge"}),o.jsx(Y,{type:"button",variant:"outline",onClick:f,children:"Reset Form"}),o.jsx(Y,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},Rz=({onBack:t,onCreateNew:e,onEditChallenge:n})=>{const{user:r}=Wn(),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[m,w]=g.useState("all"),[C,v]=g.useState("all"),[x,T]=g.useState("all"),[_,S]=g.useState("all"),[k,L]=g.useState([]),[A,E]=g.useState(!1);g.useEffect(()=>{y(),I()},[]),g.useEffect(()=>{N()},[h,m,C,x,_,s]);const y=async()=>{try{const V=Mn(Ct(ye,"challenges"),ia("createdAt","desc")),me=(await Vn(V)).docs.map(ve=>({id:ve.id,...ve.data()}));i(me)}catch(V){console.error("Error fetching challenges:",V)}finally{d(!1)}},I=async()=>{try{E(!0);const V=Mn(Ct(ye,"events"),Xn("status","in",["LIVE","UPCOMING"]),ia("startTime","asc")),me=(await Vn(V)).docs.map(ve=>({id:ve.id,...ve.data()}));L(me)}catch(V){console.error("Error fetching events:",V),L([])}finally{E(!1)}},N=()=>{let V=s;h&&(V=V.filter(W=>W.title.toLowerCase().includes(h.toLowerCase())||W.description.toLowerCase().includes(h.toLowerCase())||(W.finalCategory||W.category).toLowerCase().includes(h.toLowerCase()))),m!=="all"&&(V=V.filter(W=>(W.finalCategory||W.category)===m)),C!=="all"&&(V=V.filter(W=>W.difficulty===C)),x!=="all"&&(V=V.filter(W=>x==="active"?W.isActive:!W.isActive)),_!=="all"&&(V=V.filter(W=>{switch(_){case"practice":return W.challengeType==="practice"||W.featuredOnPractice||W.availableInPractice;case"live":return W.challengeType==="live";case"upcoming":return W.challengeType==="upcoming";case"past":return W.challengeType==="past_event";case"featured":return W.featuredOnPractice;default:return!0}})),l(V)},R=async(V,W)=>{try{await dn(Be(ye,"challenges",V),{isActive:!W}),i(s.map(me=>me.id===V?{...me,isActive:!W}:me))}catch(me){console.error("Error updating challenge status:",me)}},j=async(V,W)=>{try{await dn(Be(ye,"challenges",V),{featuredOnPractice:!W,availableInPractice:!0,challengeType:W?void 0:"practice"}),i(s.map(me=>me.id===V?{...me,featuredOnPractice:!W,availableInPractice:!0,challengeType:W?me.challengeType:"practice"}:me))}catch(me){console.error("Error updating featured status:",me)}},P=async(V,W,me)=>{try{const ve=k.find(J=>J.id===W);await dn(Be(ye,"challenges",V),{eventId:W,eventName:me,challengeType:(ve==null?void 0:ve.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}),i(s.map(J=>J.id===V?{...J,eventId:W,eventName:me,challengeType:(ve==null?void 0:ve.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}:J))}catch(ve){console.error("Error assigning challenge to event:",ve)}},U=async V=>{try{await dn(Be(ye,"challenges",V),{eventId:null,eventName:null,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}),i(s.map(W=>W.id===V?{...W,eventId:void 0,eventName:void 0,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}:W))}catch(W){console.error("Error removing challenge from event:",W)}},K=async(V,W)=>{try{await dn(Be(ye,"challenges",V),{availableInPractice:W,challengeType:W?"practice":void 0,featuredOnPractice:W?!1:void 0}),i(s.map(me=>me.id===V?{...me,availableInPractice:W,challengeType:W?"practice":me.challengeType,featuredOnPractice:W?me.featuredOnPractice:!1}:me))}catch(me){console.error("Error updating practice availability:",me)}},Q=async V=>{if(confirm("Are you sure you want to delete this challenge? This action cannot be undone."))try{await lF(Be(ye,"challenges",V)),i(s.filter(W=>W.id!==V))}catch(W){console.error("Error deleting challenge:",W)}},te=V=>{switch(V){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},O=V=>({web:"bg-blue-100 text-blue-800",crypto:"bg-purple-100 text-purple-800",forensics:"bg-orange-100 text-orange-800",pwn:"bg-red-100 text-red-800",reversing:"bg-indigo-100 text-indigo-800",misc:"bg-gray-100 text-gray-800"})[V]||"bg-gray-100 text-gray-800",G=V=>V.challengeType==="live"?o.jsxs(Se,{className:"bg-red-100 text-red-800",children:[o.jsx(Or,{className:"w-3 h-3 mr-1"}),"Live Event"]}):V.challengeType==="upcoming"?o.jsxs(Se,{className:"bg-yellow-100 text-yellow-800",children:[o.jsx(aa,{className:"w-3 h-3 mr-1"}),"Upcoming"]}):V.challengeType==="past_event"?o.jsx(Se,{className:"bg-gray-100 text-gray-800",children:"Past Event"}):V.featuredOnPractice?o.jsxs(Se,{className:"bg-purple-100 text-purple-800",children:[o.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Featured"]}):V.availableInPractice?o.jsx(Se,{className:"bg-green-100 text-green-800",children:"Practice"}):null,se=()=>{const V=s.map(W=>W.finalCategory||W.category);return Array.from(new Set(V)).filter(Boolean)};return c?o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenges..."})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Challenge Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage challenges, assign to events, and feature on practice page (",s.length," total)"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{onClick:e,children:[o.jsx(Js,{className:"w-4 h-4 mr-2"}),"Create New"]}),o.jsx(Y,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]}),o.jsxs(ae,{children:[o.jsx(Oe,{children:o.jsx(Me,{className:"text-lg",children:"Search & Filter"})}),o.jsx(le,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ua,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(de,{placeholder:"Search challenges...",value:h,onChange:V=>f(V.target.value),className:"pl-10"})]}),o.jsx("div",{children:o.jsxs(Jt,{value:m,onValueChange:w,children:[o.jsx(zt,{children:o.jsx(Zt,{placeholder:"All Categories"})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"all",children:"All Categories"}),se().map(V=>o.jsx(oe,{value:V,children:V},V))]})]})}),o.jsx("div",{children:o.jsxs(Jt,{value:C,onValueChange:v,children:[o.jsx(zt,{children:o.jsx(Zt,{placeholder:"All Difficulties"})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"all",children:"All Difficulties"}),o.jsx(oe,{value:"easy",children:"Easy"}),o.jsx(oe,{value:"medium",children:"Medium"}),o.jsx(oe,{value:"hard",children:"Hard"}),o.jsx(oe,{value:"expert",children:"Expert"})]})]})}),o.jsx("div",{children:o.jsxs(Jt,{value:x,onValueChange:T,children:[o.jsx(zt,{children:o.jsx(Zt,{placeholder:"All Status"})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"all",children:"All Status"}),o.jsx(oe,{value:"active",children:"Active"}),o.jsx(oe,{value:"inactive",children:"Inactive"})]})]})}),o.jsx("div",{children:o.jsxs(Jt,{value:_,onValueChange:S,children:[o.jsx(zt,{children:o.jsx(Zt,{placeholder:"All Types"})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"all",children:"All Types"}),o.jsx(oe,{value:"practice",children:"Practice"}),o.jsx(oe,{value:"live",children:"Live Event"}),o.jsx(oe,{value:"upcoming",children:"Upcoming Event"}),o.jsx(oe,{value:"past",children:"Past Event"}),o.jsx(oe,{value:"featured",children:"Featured"})]})]})})]})})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Challenges"}),o.jsxs(Wt,{children:[a.length," of ",s.length," challenges shown",k.length>0&&`  ${k.length} events available`]})]}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[a.map(V=>{var W,me,ve,J;return o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("h3",{className:"font-semibold text-lg",children:V.title}),o.jsx(Se,{variant:V.isActive?"default":"secondary",children:V.isActive?"Active":"Inactive"}),o.jsx(Se,{className:te(V.difficulty),children:V.difficulty}),o.jsx(Se,{className:O(V.finalCategory||V.category),children:V.finalCategory||V.category}),o.jsxs(Se,{variant:"outline",children:[V.points," pts"]}),G(V)]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:V.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Created by: ",V.createdByName]}),o.jsx("span",{children:""}),o.jsx("span",{children:((ve=(me=(W=V.createdAt)==null?void 0:W.toDate)==null?void 0:me.call(W))==null?void 0:ve.toLocaleDateString())||new Date(V.createdAt).toLocaleDateString()}),o.jsx("span",{children:""}),o.jsxs("span",{children:[((J=V.solvedBy)==null?void 0:J.length)||0," solves"]}),V.eventName&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Event: ",V.eventName]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`featured-${V.id}`,checked:V.featuredOnPractice||!1,onCheckedChange:ee=>j(V.id,V.featuredOnPractice||!1)}),o.jsx(z,{htmlFor:`featured-${V.id}`,className:"text-sm",children:"Featured on Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`practice-${V.id}`,checked:V.availableInPractice||!1,onCheckedChange:ee=>K(V.id,ee)}),o.jsx(z,{htmlFor:`practice-${V.id}`,className:"text-sm",children:"Available in Practice"})]}),!V.eventId&&k.length>0&&o.jsx("div",{className:"flex items-center space-x-2",children:o.jsxs(Jt,{value:"",onValueChange:ee=>{const q=k.find(ue=>ue.id===ee);q&&P(V.id,ee,q.title)},children:[o.jsx(zt,{className:"w-40",children:o.jsx(Zt,{placeholder:"Assign to Event"})}),o.jsx(Ht,{children:k.map(ee=>o.jsxs(oe,{value:ee.id,children:[ee.title," (",ee.status,")"]},ee.id))})]})}),V.eventId&&o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>U(V.id),children:"Remove from Event"}),k.length===0&&o.jsx(Se,{variant:"outline",className:"text-xs",children:"No events available"})]})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>n(V),children:[o.jsx(UU,{className:"w-4 h-4 mr-1"}),"Edit"]}),o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>R(V.id,V.isActive),children:V.isActive?"Deactivate":"Activate"}),o.jsx(Y,{variant:"destructive",size:"sm",onClick:()=>Q(V.id),children:o.jsx(BU,{className:"w-4 h-4"})})]})]})},V.id)}),a.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.length===0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{children:"No challenges created yet."}),o.jsxs(Y,{onClick:e,children:[o.jsx(Js,{className:"w-4 h-4 mr-2"}),"Create Your First Challenge"]})]}):"No challenges match your filters."})]})})]})]})},Pz=({challengeId:t,onBack:e,onSave:n})=>{const{user:r}=Wn(),[s,i]=g.useState(!0),[a,l]=g.useState(!1),[c,d]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,isActive:!0,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[h,f]=g.useState([]),[m,w]=g.useState(!1);g.useEffect(()=>{C()},[t]);const C=async()=>{var N,R,j,P,U,K,Q;try{const te=await oa(Be(ye,"challenges",t));if(te.exists()){const O=te.data();d({title:O.title||"",description:O.description||"",category:O.category||"web",customCategory:O.finalCategory||"",difficulty:O.difficulty||"easy",points:O.points||100,flag:O.flag||"",flagFormat:O.flagFormat||"CTF{.*}",hasMultipleQuestions:O.hasMultipleQuestions||!1,isExternalChallenge:!!O.attribution,isActive:O.isActive!==!1,hints:O.hints||[""],files:O.files||[],creator:((N=O.originalCreator)==null?void 0:N.name)||"",creatorUrl:((R=O.originalCreator)==null?void 0:R.url)||"",featuredOnPractice:O.featuredOnPractice||!1,availableInPractice:O.availableInPractice!==!1,challengeType:O.challengeType||"practice",externalSource:{ctfName:((j=O.attribution)==null?void 0:j.ctfName)||"",ctfUrl:((P=O.attribution)==null?void 0:P.ctfUrl)||"",originalAuthor:((U=O.attribution)==null?void 0:U.originalAuthor)||"",authorUrl:((K=O.attribution)==null?void 0:K.authorUrl)||"",license:((Q=O.attribution)==null?void 0:Q.license)||"unknown"}}),O.hasMultipleQuestions&&O.questions&&f(O.questions),O.finalCategory&&(w(!0),d(G=>({...G,category:"custom"})))}}catch(te){console.error("Error loading challenge:",te)}finally{i(!1)}},v=async N=>{N.preventDefault(),l(!0);try{const R={...c,finalCategory:m?c.customCategory:c.category,questions:c.hasMultipleQuestions?h:[],hints:c.hints.filter(j=>j.trim()!==""),totalPoints:c.hasMultipleQuestions?h.reduce((j,P)=>j+P.points,0):c.points,updatedAt:new Date,updatedBy:r==null?void 0:r.uid,updatedByName:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),featuredOnPractice:c.featuredOnPractice,availableInPractice:c.availableInPractice,challengeType:c.challengeType,...c.isExternalChallenge&&{attribution:{...c.externalSource,importedBy:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),importedById:r==null?void 0:r.uid,importedAt:new Date}},...c.creator&&{originalCreator:{name:c.creator,url:c.creatorUrl}}};await dn(Be(ye,"challenges",t),R),alert("Challenge updated successfully!"),n()}catch(R){console.error("Error updating challenge:",R),alert("Error updating challenge. Please try again.")}finally{l(!1)}},x=()=>{d({...c,hints:[...c.hints,""]})},T=(N,R)=>{const j=[...c.hints];j[N]=R,d({...c,hints:j})},_=N=>{const R=c.hints.filter((j,P)=>P!==N);d({...c,hints:R})},S=()=>{const N={id:Date.now().toString(),question:"",points:0,flag:""};f([...h,N])},k=(N,R,j)=>{f(h.map(P=>P.id===N?{...P,[R]:j}:P))},L=N=>{h.length>1&&f(h.filter(R=>R.id!==N))},A=N=>{if(N==="link"){const R=prompt("Enter the URL:");if(R){const j={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:R,type:"link"};d({...c,files:[...c.files,j]})}}else{const R=document.createElement("input");R.type="file",R.onchange=j=>{var U;const P=(U=j.target.files)==null?void 0:U[0];if(P){const K={id:Date.now().toString(),name:P.name,url:URL.createObjectURL(P),type:"file"};d({...c,files:[...c.files,K]})}},R.click()}},E=N=>{d({...c,files:c.files.filter(R=>R.id!==N)})},y=N=>{N==="custom"?(w(!0),d({...c,category:"custom"})):(w(!1),d({...c,category:N}))},I=(N,R)=>{d({...c,externalSource:{...c.externalSource,[N]:R}})};return s?o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenge..."})})}):o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Edit Challenge"}),o.jsx(Wt,{children:"Update challenge details and configuration"})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(z,{className:"text-base",children:"Challenge Status"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active challenges are visible to users"})]}),o.jsx(Rt,{checked:c.isActive,onCheckedChange:N=>d({...c,isActive:N})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xe,{className:"w-5 h-5"}),o.jsx(z,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:c.availableInPractice,onCheckedChange:N=>d({...c,availableInPractice:N})}),o.jsx(z,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:c.featuredOnPractice,onCheckedChange:N=>d({...c,featuredOnPractice:N})}),o.jsxs(z,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Ov,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Jt,{value:c.challengeType,onValueChange:N=>d({...c,challengeType:N}),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"practice",children:"Practice Challenge"}),o.jsx(oe,{value:"live",children:"Live Event Challenge"}),o.jsx(oe,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(de,{id:"title",value:c.title,onChange:N=>d({...c,title:N.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"category",children:"Category"}),o.jsxs(Jt,{value:c.category,onValueChange:y,children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"web",children:"Web"}),o.jsx(oe,{value:"crypto",children:"Cryptography"}),o.jsx(oe,{value:"forensics",children:"Forensics"}),o.jsx(oe,{value:"pwn",children:"Pwn"}),o.jsx(oe,{value:"reversing",children:"Reverse Engineering"}),o.jsx(oe,{value:"misc",children:"Miscellaneous"}),o.jsx(oe,{value:"custom",children:"Custom Category"})]})]})]}),m&&o.jsxs("div",{children:[o.jsx(z,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(de,{id:"customCategory",value:c.customCategory,onChange:N=>d({...c,customCategory:N.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Jt,{value:c.difficulty,onValueChange:N=>d({...c,difficulty:N}),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(oe,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(oe,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(z,{htmlFor:"points",children:"Points *"}),o.jsx(de,{id:"points",type:"number",value:c.points,onChange:N=>d({...c,points:parseInt(N.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(z,{htmlFor:"description",children:"Description *"}),o.jsx(Ca,{id:"description",value:c.description,onChange:N=>d({...c,description:N.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Sn,{className:"w-5 h-5"}),o.jsx(z,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(de,{id:"creator",value:c.creator,onChange:N=>d({...c,creator:N.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(de,{id:"creatorUrl",value:c.creatorUrl,onChange:N=>d({...c,creatorUrl:N.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qd,{className:"w-5 h-5"}),o.jsx(z,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:c.isExternalChallenge,onCheckedChange:N=>d({...c,isExternalChallenge:N})})]}),c.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(de,{id:"ctfName",value:c.externalSource.ctfName,onChange:N=>I("ctfName",N.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(de,{id:"ctfUrl",value:c.externalSource.ctfUrl,onChange:N=>I("ctfUrl",N.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(de,{id:"originalAuthor",value:c.externalSource.originalAuthor,onChange:N=>I("originalAuthor",N.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(de,{id:"authorUrl",value:c.externalSource.authorUrl,onChange:N=>I("authorUrl",N.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"license",children:"License"}),o.jsxs(Jt,{value:c.externalSource.license,onValueChange:N=>I("license",N),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsx(oe,{value:"unknown",children:"Unknown"}),o.jsx(oe,{value:"MIT",children:"MIT License"}),o.jsx(oe,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(oe,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(oe,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(oe,{value:"custom",children:"Custom License"})]})]}),c.externalSource.license==="custom"&&o.jsx(de,{placeholder:"Specify custom license",className:"mt-2",onChange:N=>I("license",N.target.value)})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:c.hasMultipleQuestions,onCheckedChange:N=>d({...c,hasMultipleQuestions:N})})]}),c.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(z,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Y,{type:"button",onClick:S,variant:"outline",size:"sm",children:[o.jsx(Js,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),h.map((N,R)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(z,{children:["Question ",R+1]}),h.length>1&&o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(N.id),children:o.jsx(Ki,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:`question-${N.id}`,children:"Question Text *"}),o.jsx(de,{id:`question-${N.id}`,value:N.question,onChange:j=>k(N.id,"question",j.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:`points-${N.id}`,children:"Points *"}),o.jsx(de,{id:`points-${N.id}`,type:"number",value:N.points,onChange:j=>k(N.id,"points",parseInt(j.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:`flag-${N.id}`,children:"Flag *"}),o.jsx(de,{id:`flag-${N.id}`,value:N.flag,onChange:j=>k(N.id,"flag",j.target.value),placeholder:"Flag for this question",required:!0})]})]})]},N.id)),h.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",h.reduce((N,R)=>N+R.points,0)]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"flag",children:"Flag *"}),o.jsx(de,{id:"flag",value:c.flag,onChange:N=>d({...c,flag:N.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Jt,{value:c.flagFormat,onValueChange:N=>d({...c,flagFormat:N}),children:[o.jsx(zt,{children:o.jsx(Zt,{})}),o.jsxs(Ht,{children:[o.jsxs(oe,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(oe,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(oe,{value:".*",children:"Any format"}),o.jsx(oe,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(oe,{value:"custom",children:"Custom Regex"})]})]}),c.flagFormat==="custom"&&o.jsx(de,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:N=>d({...c,flagFormat:N.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(z,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>A("file"),children:[o.jsx(XC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>A("link"),children:[o.jsx(ca,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),c.files.length>0&&o.jsx("div",{className:"space-y-2",children:c.files.map(N=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[N.type==="file"?o.jsx(cc,{className:"w-4 h-4"}):o.jsx(ca,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:N.name}),N.type==="link"&&o.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(N.id),children:o.jsx(Ki,{className:"w-4 h-4"})})]},N.id))})]}),o.jsxs("div",{children:[o.jsx(z,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[c.hints.map((N,R)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(de,{value:N,onChange:j=>T(R,j.target.value),placeholder:`Hint ${R+1}`}),c.hints.length>1&&o.jsx(Y,{type:"button",variant:"outline",onClick:()=>_(R),children:"Remove"})]},R)),o.jsx(Y,{type:"button",variant:"outline",onClick:x,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(Y,{type:"submit",disabled:a,children:[o.jsx(QC,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]}),o.jsx(Y,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})},Dz=1,Lz=1e6;let Lm=0;function Oz(){return Lm=(Lm+1)%Number.MAX_SAFE_INTEGER,Lm.toString()}const Om=new Map,Wb=t=>{if(Om.has(t))return;const e=setTimeout(()=>{Om.delete(t),Rl({type:"REMOVE_TOAST",toastId:t})},Lz);Om.set(t,e)},Mz=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Dz)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Wb(n):t.toasts.forEach(r=>{Wb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ku=[];let Qu={toasts:[]};function Rl(t){Qu=Mz(Qu,t),Ku.forEach(e=>{e(Qu)})}function Vz({...t}){const e=Oz(),n=s=>Rl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Rl({type:"DISMISS_TOAST",toastId:e});return Rl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Fz(){const[t,e]=g.useState(Qu);return g.useEffect(()=>(Ku.push(e),()=>{const n=Ku.indexOf(e);n>-1&&Ku.splice(n,1)}),[t]),{...t,toast:Vz,dismiss:n=>Rl({type:"DISMISS_TOAST",toastId:n})}}var Jv="Radio",[Uz,aA]=di(Jv),[Bz,$z]=Uz(Jv),lA=g.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:a,value:l="on",onCheck:c,form:d,...h}=t,[f,m]=g.useState(null),w=Je(e,x=>m(x)),C=g.useRef(!1),v=f?d||!!f.closest("form"):!0;return o.jsxs(Bz,{scope:n,checked:s,disabled:a,children:[o.jsx(Re.button,{type:"button",role:"radio","aria-checked":s,"data-state":hA(s),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:w,onClick:Ae(t.onClick,x=>{s||c==null||c(),v&&(C.current=x.isPropagationStopped(),C.current||x.stopPropagation())})}),v&&o.jsx(dA,{control:f,bubbles:!C.current,name:r,value:l,checked:s,required:i,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});lA.displayName=Jv;var cA="RadioIndicator",uA=g.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=$z(cA,n);return o.jsx(Fv,{present:r||i.checked,children:o.jsx(Re.span,{"data-state":hA(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});uA.displayName=cA;var zz="RadioBubbleInput",dA=g.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=Je(a,i),c=Yv(n),d=Gv(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&w){const C=new Event("click",{bubbles:r});w.call(h,n),h.dispatchEvent(C)}},[c,n,r]),o.jsx(Re.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});dA.displayName=zz;function hA(t){return t?"checked":"unchecked"}var Hz=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hf="RadioGroup",[Wz]=di(hf,[ef,aA]),fA=ef(),mA=aA(),[qz,Gz]=Wz(hf),pA=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:a=!1,disabled:l=!1,orientation:c,dir:d,loop:h=!0,onValueChange:f,...m}=t,w=fA(n),C=Zh(d),[v,x]=ha({prop:i,defaultProp:s??null,onChange:f,caller:hf});return o.jsx(qz,{scope:n,name:r,required:a,disabled:l,value:v,onValueChange:x,children:o.jsx(pI,{asChild:!0,...w,orientation:c,dir:C,loop:h,children:o.jsx(Re.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:C,...m,ref:e})})})});pA.displayName=hf;var gA="RadioGroupItem",yA=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=Gz(gA,n),a=i.disabled||r,l=fA(n),c=mA(n),d=g.useRef(null),h=Je(e,d),f=i.value===s.value,m=g.useRef(!1);return g.useEffect(()=>{const w=v=>{Hz.includes(v.key)&&(m.current=!0)},C=()=>m.current=!1;return document.addEventListener("keydown",w),document.addEventListener("keyup",C),()=>{document.removeEventListener("keydown",w),document.removeEventListener("keyup",C)}},[]),o.jsx(gI,{asChild:!0,...l,focusable:!a,active:f,children:o.jsx(lA,{disabled:a,required:i.required,checked:f,...c,...s,name:i.name,ref:h,onCheck:()=>i.onValueChange(s.value),onKeyDown:Ae(w=>{w.key==="Enter"&&w.preventDefault()}),onFocus:Ae(s.onFocus,()=>{var w;m.current&&((w=d.current)==null||w.click())})})})});yA.displayName=gA;var Kz="RadioGroupIndicator",vA=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=mA(n);return o.jsx(uA,{...s,...r,ref:e})});vA.displayName=Kz;var xA=pA,wA=yA,Qz=vA;const _A=g.forwardRef(({className:t,...e},n)=>o.jsx(xA,{className:Pe("grid gap-2",t),...e,ref:n}));_A.displayName=xA.displayName;const Yu=g.forwardRef(({className:t,...e},n)=>o.jsx(wA,{ref:n,className:Pe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:o.jsx(Qz,{className:"flex items-center justify-center",children:o.jsx(SU,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Yu.displayName=wA.displayName;const Yz=({onBack:t,userRole:e,onEventCreated:n})=>{const{toast:r}=Fz(),{user:s}=RC(),[i,a]=g.useState(!1),[l,c]=g.useState({name:"",description:"",startDate:"",endDate:"",participationType:"both",maxIndividuals:100,individualPrice:0,maxTeams:20,teamSize:5,teamPrice:0,requiresParticipantPayment:!1,hostingFee:e==="user"?100:0}),d=v=>{c(x=>({...x,participationType:v}))},h=()=>{const v=new Date;return v.setMinutes(v.getMinutes()-v.getTimezoneOffset()),v.toISOString().slice(0,16)},f=async v=>{if(v.preventDefault(),!s){r({title:"Authentication required",description:"Please log in to create an event",variant:"destructive"});return}a(!0);try{if(!l.name.trim()){r({title:"Event name required",description:"Please enter an event name",variant:"destructive"}),a(!1);return}if(!l.startDate||!l.endDate){r({title:"Dates required",description:"Please select both start and end dates",variant:"destructive"}),a(!1);return}const x=new Date(l.startDate),T=new Date(l.endDate);if(x>=T){r({title:"Invalid dates",description:"End date must be after start date",variant:"destructive"}),a(!1);return}const _={name:l.name.trim(),description:l.description.trim(),startDate:l.startDate,endDate:l.endDate,participationType:l.participationType,maxIndividuals:l.maxIndividuals,individualPrice:l.individualPrice,maxTeams:l.maxTeams,teamSize:l.teamSize,teamPrice:l.teamPrice,requiresParticipantPayment:l.requiresParticipantPayment,hostingFee:l.hostingFee,currency:"ZMW",status:e==="admin"?"approved":"pending",createdBy:e,createdById:s.uid,createdAt:new Date().toISOString(),requiresHostingPayment:e==="user",hostingPaymentStatus:e==="user"?"pending":"not_required",createdByUser:{uid:s.uid,email:s.email||"",name:s.displayName||"Event Creator"},participants:[],totalParticipants:0,totalTeams:0,challenges:[],challengeCount:0},S=await m(_);S&&(r({title:e==="admin"?"Event Scheduled!":"Event Submitted!",description:e==="admin"?"Your event has been successfully scheduled and is now live.":"Your event has been submitted for admin approval. You will be notified once approved."}),n&&n(S.id,S))}catch(x){console.error("Error creating event:",x),r({title:"Error",description:"Failed to schedule event. Please try again.",variant:"destructive"})}finally{a(!1)}},m=async v=>{try{const x=Be(Ct(ye,"events"));return await Cv(x,v),{id:x.id,...v}}catch(x){throw console.error("Firestore error:",x),x.code==="permission-denied"?new Error("Permission denied. Check your Firestore security rules."):x.code==="invalid-argument"?new Error("Invalid data format. Please check all field values."):new Error(`Firestore error: ${x.message}`)}},w=(v,x)=>{const T=x===""?0:parseInt(x)||0;c(_=>({..._,[v]:T}))},C=(v,x)=>{const T=x===""?0:parseFloat(x)||0;c(_=>({..._,[v]:T}))};return o.jsxs(ae,{className:"w-full max-w-2xl mx-auto",children:[o.jsx(Oe,{className:"px-4 sm:px-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[o.jsxs("div",{children:[o.jsx(Me,{className:"text-xl sm:text-2xl",children:"Schedule New Event"}),o.jsx(Wt,{className:"text-sm sm:text-base",children:e==="admin"?"Create and schedule events instantly":"Submit events for hosting - hosting fee required"})]}),o.jsx(Se,{variant:e==="admin"?"default":"secondary",className:"self-start",children:e==="admin"?"Admin":"Event Host"})]})}),o.jsx(le,{className:"px-4 sm:px-6",children:o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Event Information"}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"name",className:"text-sm sm:text-base",children:"Event Name *"}),o.jsx(de,{id:"name",value:l.name,onChange:v=>c({...l,name:v.target.value}),placeholder:"Enter event name",required:!0,className:"mt-1",disabled:i})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"description",className:"text-sm sm:text-base",children:"Event Description"}),o.jsx(Ca,{id:"description",value:l.description,onChange:v=>c({...l,description:v.target.value}),placeholder:"Describe the event, rules, and objectives...",rows:4,className:"mt-1",disabled:i})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"startDate",className:"text-sm sm:text-base",children:"Start Date & Time *"}),o.jsx(de,{id:"startDate",type:"datetime-local",value:l.startDate,onChange:v=>c({...l,startDate:v.target.value}),min:h(),required:!0,className:"mt-1",disabled:i})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"endDate",className:"text-sm sm:text-base",children:"End Date & Time *"}),o.jsx(de,{id:"endDate",type:"datetime-local",value:l.endDate,onChange:v=>c({...l,endDate:v.target.value}),min:l.startDate||h(),required:!0,className:"mt-1",disabled:i})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Participation Settings"}),o.jsxs("div",{children:[o.jsx(z,{className:"mb-3 block text-sm sm:text-base",children:"Participation Type"}),o.jsxs(_A,{value:l.participationType,onValueChange:d,className:"flex flex-col space-y-3",disabled:i,children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yu,{value:"individual",id:"individual"}),o.jsx(z,{htmlFor:"individual",className:"text-sm sm:text-base",children:"Individual Participation Only"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yu,{value:"team",id:"team"}),o.jsx(z,{htmlFor:"team",className:"text-sm sm:text-base",children:"Team Participation Only"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yu,{value:"both",id:"both"}),o.jsx(z,{htmlFor:"both",className:"text-sm sm:text-base",children:"Both Individual and Team"})]})]})]}),(l.participationType==="individual"||l.participationType==="both")&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pl-4 sm:pl-6 border-l-2 border-blue-200",children:[o.jsx("div",{className:"sm:col-span-2",children:o.jsx(z,{className:"font-semibold text-sm sm:text-base",children:"Individual Participation"})}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"maxIndividuals",className:"text-sm sm:text-base",children:"Max Individuals"}),o.jsx(de,{id:"maxIndividuals",type:"number",value:l.maxIndividuals===void 0?"":l.maxIndividuals,onChange:v=>w("maxIndividuals",v.target.value),min:"0",placeholder:"0 for unlimited",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for unlimited participants"})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"individualPrice",className:"text-sm sm:text-base",children:"Individual Fee (ZMW)"}),o.jsx(de,{id:"individualPrice",type:"number",value:l.individualPrice,onChange:v=>C("individualPrice",v.target.value),min:"0",step:"1",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for free participation"})]})]}),(l.participationType==="team"||l.participationType==="both")&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pl-4 sm:pl-6 border-l-2 border-green-200",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(z,{className:"font-semibold text-sm sm:text-base",children:"Team Participation"})}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"maxTeams",className:"text-sm sm:text-base",children:"Max Teams"}),o.jsx(de,{id:"maxTeams",type:"number",value:l.maxTeams===void 0?"":l.maxTeams,onChange:v=>w("maxTeams",v.target.value),min:"0",placeholder:"0 for unlimited",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for unlimited teams"})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"teamSize",className:"text-sm sm:text-base",children:"Team Size"}),o.jsx(de,{id:"teamSize",type:"number",value:l.teamSize,onChange:v=>w("teamSize",v.target.value),min:"1",className:"mt-1",disabled:i})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"teamPrice",className:"text-sm sm:text-base",children:"Team Fee (ZMW)"}),o.jsx(de,{id:"teamPrice",type:"number",value:l.teamPrice,onChange:v=>C("teamPrice",v.target.value),min:"0",step:"1",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for free participation"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Payment Settings"}),e==="user"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"hostingFee",className:"text-sm sm:text-base",children:"Hosting Fee (ZMW) *"}),o.jsx(de,{id:"hostingFee",type:"number",value:l.hostingFee,onChange:v=>C("hostingFee",v.target.value),min:"1",step:"1",required:!0,className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Fee paid to admin for event hosting via Mobile Money"})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start space-x-2 text-blue-800",children:[o.jsx("span",{className:"mt-0.5",children:""}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium",children:["Hosting Fee: ",l.hostingFee," ZMW"]}),o.jsx("p",{className:"text-xs",children:"You'll pay this fee to the admin via Mobile Money (Flutterwave) to host your event"})]})]})})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"requiresParticipantPayment",checked:l.requiresParticipantPayment,onChange:v=>c({...l,requiresParticipantPayment:v.target.checked}),className:"rounded",disabled:i}),o.jsx(z,{htmlFor:"requiresParticipantPayment",className:"font-semibold text-sm sm:text-base",children:"Require participants to pay registration fees"})]}),l.requiresParticipantPayment&&o.jsxs("div",{className:"pl-6",children:[o.jsx(Se,{variant:"outline",className:"bg-green-50 text-green-700 text-xs",children:" Participant payments will be collected via Flutterwave"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Participants will pay registration fees directly to you when they register"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[o.jsx(Y,{type:"submit",disabled:i,className:"flex-1 order-2 sm:order-1",children:i?"Processing...":e==="admin"?"Create Event & Add Challenges":"Submit Event"}),o.jsx(Y,{type:"button",variant:"outline",onClick:t,className:"order-1 sm:order-2",disabled:i,children:"Cancel"})]})]})})]})},Xz=({onBack:t})=>{const e=[{id:"1",user:"john_doe",challenge:"SQL Injection Master",submittedAt:"2024-01-15",status:"pending",content:"This is a mock write-up content...",rating:0},{id:"2",user:"jane_smith",challenge:"Crypto Challenge 1",submittedAt:"2024-01-14",status:"approved",content:"Another mock write-up...",rating:4}],n=i=>{console.log("Approving writeup:",i),alert(`Write-up ${i} approved!`)},r=i=>{console.log("Rejecting writeup:",i),alert(`Write-up ${i} rejected!`)},s=i=>{switch(i){case"pending":return o.jsx(Se,{variant:"secondary",children:"Pending"});case"approved":return o.jsx(Se,{variant:"default",children:"Approved"});case"rejected":return o.jsx(Se,{variant:"destructive",children:"Rejected"});default:return o.jsx(Se,{variant:"secondary",children:i})}};return o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Review Write-ups"}),o.jsxs(Wt,{children:["Review and approve user write-ups for challenges (",e.length," total)"]})]}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-6",children:[e.map(i=>o.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:i.challenge}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by ",i.user," on ",i.submittedAt]})]}),s(i.status)]}),o.jsxs("div",{children:[o.jsx(z,{children:"Write-up Content"}),o.jsx("div",{className:"mt-1 p-3 border rounded bg-muted/50",children:i.content})]}),i.status==="pending"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(z,{htmlFor:`feedback-${i.id}`,children:"Feedback (Optional)"}),o.jsx(Ca,{id:`feedback-${i.id}`,placeholder:"Provide feedback for the user...",rows:3}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Y,{onClick:()=>n(i.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),o.jsx(Y,{variant:"outline",onClick:()=>r(i.id),children:"Request Changes"}),o.jsx(Y,{variant:"destructive",onClick:()=>r(i.id),children:"Reject"})]})]}),i.status!=="pending"&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Write-up has been ",i.status,". ",i.rating>0&&`Rating: ${i.rating}/5`]})]},i.id)),e.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No write-ups to review at this time."})]})})]})},Jz=({onBack:t})=>{const e={totalUsers:150,activeUsers:47,totalChallenges:25,solvedChallenges:189,averageSolveTime:"2h 15m",popularCategory:"Web Security"},n=[{title:"Total Users",value:e.totalUsers,description:"Registered users",icon:Dt,color:"text-blue-600"},{title:"Active Users (30d)",value:e.activeUsers,description:"Recently active users",icon:Dt,color:"text-green-600"},{title:"Total Challenges",value:e.totalChallenges,description:"Available challenges",icon:Xe,color:"text-purple-600"},{title:"Challenge Solves",value:e.solvedChallenges,description:"Total solutions submitted",icon:Zn,color:"text-orange-600"},{title:"Avg Solve Time",value:e.averageSolveTime,description:"Average time to solve challenges",icon:Gi,color:"text-red-600"},{title:"Popular Category",value:e.popularCategory,description:"Most solved category",icon:HC,color:"text-indigo-600"}];return o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Platform Analytics"}),o.jsx(Wt,{children:"Comprehensive overview of platform performance and user engagement"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:n.map((r,s)=>o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r.title}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),o.jsx("div",{className:`p-3 rounded-full bg-muted ${r.color}`,children:o.jsx(r.icon,{className:"w-6 h-6"})})]})})},s))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{className:"text-lg",children:"User Growth"}),o.jsx(Wt,{children:"Last 30 days"})]}),o.jsx(le,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"User growth chart will be displayed here"})})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{className:"text-lg",children:"Challenge Performance"}),o.jsx(Wt,{children:"Solve rates by category"})]}),o.jsx(le,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Challenge performance chart will be displayed here"})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(Y,{variant:"outline",onClick:t,children:"Back to Dashboard"}),o.jsx(Y,{children:"Export Analytics"})]})]})]})},Zz=({onBack:t})=>{const[e,n]=g.useState({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1}),[r,s]=g.useState(!1),i=async()=>{s(!0),setTimeout(()=>{alert("Settings saved successfully!"),s(!1)},1e3)},a=()=>{confirm("Are you sure you want to reset all settings to default?")&&n({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1})},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"General Settings"}),o.jsx(Wt,{children:"Basic platform configuration"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"siteName",children:"Site Name"}),o.jsx(de,{id:"siteName",value:e.siteName,onChange:c=>l("siteName",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"siteDescription",children:"Site Description"}),o.jsx(Ca,{id:"siteDescription",value:e.siteDescription,onChange:c=>l("siteDescription",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"contactEmail",children:"Contact Email"}),o.jsx(de,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:c=>l("contactEmail",c.target.value)})]})]})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Security Settings"}),o.jsx(Wt,{children:"Authentication and security configuration"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"requireEmailVerification",children:"Require Email Verification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must verify their email address before accessing the platform"})]}),o.jsx(Rt,{id:"requireEmailVerification",checked:e.requireEmailVerification,onCheckedChange:c=>l("requireEmailVerification",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"allowRegistrations",children:"Allow New Registrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register on the platform"})]}),o.jsx(Rt,{id:"allowRegistrations",checked:e.allowRegistrations,onCheckedChange:c=>l("allowRegistrations",c)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),o.jsx(de,{id:"maxLoginAttempts",type:"number",value:e.maxLoginAttempts,onChange:c=>l("maxLoginAttempts",parseInt(c.target.value)),min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(z,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),o.jsx(de,{id:"sessionTimeout",type:"number",value:e.sessionTimeout,onChange:c=>l("sessionTimeout",parseInt(c.target.value)),min:"1",max:"720"})]})]})]})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Challenge Settings"}),o.jsx(Wt,{children:"Challenge and write-up configuration"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"defaultPoints",children:"Default Points for New Challenges"}),o.jsx(de,{id:"defaultPoints",type:"number",value:e.defaultPoints,onChange:c=>l("defaultPoints",parseInt(c.target.value)),min:"1"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"allowWriteups",children:"Allow Write-ups"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users can submit write-ups for challenges"})]}),o.jsx(Rt,{id:"allowWriteups",checked:e.allowWriteups,onCheckedChange:c=>l("allowWriteups",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"writeupRequired",children:"Write-ups Required"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must submit a write-up to get points"})]}),o.jsx(Rt,{id:"writeupRequired",checked:e.writeupRequired,onCheckedChange:c=>l("writeupRequired",c),disabled:!e.allowWriteups})]})]})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Maintenance Mode"}),o.jsx(Wt,{children:"Take the platform offline for maintenance"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(z,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform will be unavailable to regular users"})]}),o.jsx(Rt,{id:"maintenanceMode",checked:e.maintenanceMode,onCheckedChange:c=>l("maintenanceMode",c)})]}),e.maintenanceMode&&o.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-yellow-800",children:" Maintenance mode is enabled. Only administrators can access the platform."})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Y,{onClick:i,disabled:r,children:r?"Saving...":"Save Settings"}),o.jsx(Y,{variant:"outline",onClick:a,children:"Reset to Defaults"}),o.jsx(Y,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]})},e7=()=>{const{isAdmin:t,isModerator:e}=Qh(),n=zn(),[r,s]=g.useState("overview"),[i,a]=g.useState(null),[l,c]=g.useState(null),d=(m,w)=>{c({id:m,...w}),s("challenge-management"),console.log("Event created, redirecting to challenge management:",w)};if(!t&&!e)return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen",children:o.jsx("div",{className:"container px-4 mx-auto text-center",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(Xe,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have permission to access the admin dashboard."}),o.jsx(Y,{onClick:()=>n("/dashboard"),children:"Return to Dashboard"})]})})}),o.jsx(yt,{})]});const h=()=>{switch(r){case"users":return o.jsx(h8,{onBack:()=>s("overview")});case"challenge-management":return o.jsx(Rz,{onBack:()=>s("overview"),onCreateNew:()=>s("create-challenge"),onEditChallenge:m=>{a(m),s("edit-challenge")}});case"create-challenge":return o.jsx(kz,{onBack:()=>s("challenge-management")});case"edit-challenge":return o.jsx(Pz,{challengeId:i.id,onBack:()=>s("challenge-management"),onSave:()=>s("challenge-management")});case"schedule-event":return o.jsx(Yz,{onBack:()=>s("overview"),userRole:t?"admin":"user",onEventCreated:d});case"review-writeups":return o.jsx(Xz,{onBack:()=>s("overview")});case"analytics":return o.jsx(Jz,{onBack:()=>s("overview")});case"settings":return o.jsx(Zz,{onBack:()=>s("overview")});default:return f()}},f=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(ae,{children:[o.jsxs(Oe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Me,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(Dt,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Me,{className:"text-sm font-medium",children:"Active Challenges"}),o.jsx(Xe,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No challenges yet"})]})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Me,{className:"text-sm font-medium",children:"Live Events"}),o.jsx(aa,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No events yet"})]})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Me,{className:"text-sm font-medium",children:"Pending Write-ups"}),o.jsx(cc,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No write-ups yet"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"Content Management"}),o.jsx(Wt,{children:"Create and manage platform content"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("create-challenge"),children:[o.jsx(Js,{className:"w-4 h-4"}),"Create New Challenge"]}),o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("challenge-management"),children:[o.jsx(cg,{className:"w-4 h-4"}),"Manage Challenges"]}),o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("schedule-event"),children:[o.jsx(Js,{className:"w-4 h-4"}),"Schedule New Event"]}),o.jsxs(Y,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("review-writeups"),children:[o.jsx(cc,{className:"w-4 h-4"}),"Review Write-ups"]})]})]}),o.jsxs(ae,{children:[o.jsxs(Oe,{children:[o.jsx(Me,{children:"User Management"}),o.jsx(Wt,{children:"Manage users and permissions"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("users"),children:[o.jsx(Dt,{className:"w-4 h-4"}),"View All Users"]}),t&&o.jsxs(Y,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("analytics"),children:[o.jsx(HC,{className:"w-4 h-4"}),"Platform Analytics"]}),o.jsxs(Y,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("settings"),children:[o.jsx(YC,{className:"w-4 h-4"}),"System Settings"]})]})]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:r==="overview"?"Admin Dashboard":r==="users"?"User Management":r==="challenge-management"?"Challenge Management":r==="create-challenge"?"Create Challenge":r==="edit-challenge"?"Edit Challenge":r==="schedule-event"?"Schedule Event":r==="review-writeups"?"Review Write-ups":r==="analytics"?"Platform Analytics":r==="settings"?"System Settings":"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:r==="overview"?"Manage your CTF platform, users, challenges, and events":r==="challenge-management"?"Create new challenges or add existing ones to your events":"Admin management panel"})]}),r!=="overview"&&o.jsx(Y,{variant:"outline",onClick:()=>{s(r==="create-challenge"||r==="edit-challenge"?"challenge-management":"overview")},children:r==="create-challenge"||r==="edit-challenge"?"Back to Challenges":"Back to Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${t?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t?"Administrator":"Moderator"}),l&&r==="challenge-management"&&o.jsxs("div",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:["Event: ",l.name]})]})]}),h()]})}),o.jsx(yt,{})]})},t7=()=>{var K,Q,te,O,G,se,V,W,me,ve;const{challengeId:t}=XR(),e=zn(),{user:n}=Wn(),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(!1),[d,h]=g.useState(""),[f,m]=g.useState(null),[w,C]=g.useState([]),[v,x]=g.useState([]),[T,_]=g.useState("description");g.useEffect(()=>{if(t){S(),k();const J=Be(ye,"challenges",t),ee=dC(J,q=>{if(q.exists()){const ue={id:q.id,...q.data()};s(ue)}});return()=>ee()}},[t]);const S=async()=>{try{a(!0),console.log(" Fetching challenge:",t);const J=await oa(Be(ye,"challenges",t));if(J.exists()){const ee={id:J.id,...J.data()};console.log(" Challenge found:",ee),s(ee),ee.hints&&C(new Array(ee.hints.length).fill(!1))}else console.log(" Challenge not found in Firestore"),m({type:"error",text:"Challenge not found"})}catch(J){console.error(" Error fetching challenge:",J),m({type:"error",text:"Failed to load challenge"})}finally{a(!1)}},k=async()=>{if(!(!n||!t))try{const J=Mn(Ct(ye,"submissions"),Xn("challengeId","==",t),Xn("userId","==",n.uid),ia("submittedAt","desc")),q=(await Vn(J)).docs.map(ue=>({id:ue.id,...ue.data()}));x(q)}catch(J){console.error("Error fetching submissions:",J)}},L=async(J,ee)=>{try{const q=Mn(Ct(ye,"submissions"),Xn("challengeId","==",ee),Xn("userId","==",J),Xn("isCorrect","==",!0),Xn("pointsAwarded",">",0));return!(await Vn(q)).empty}catch(q){return console.error("Error checking user solve status:",q),!1}},A=async()=>{var J,ee;if(!(!r||!n||!d.trim())){c(!0),m(null);try{let q=!1;r.hasMultipleQuestions&&r.questions?q=!!r.questions.find(Ie=>Ie.flag&&Ie.flag.trim()===d.trim()):q=((J=r.flag)==null?void 0:J.trim())===d.trim();const ue=await L(n.uid,r.id);let Le=0;q&&!ue&&(Le=r.points||0);const Ce={challengeId:r.id,challengeTitle:r.title,userId:n.uid,userName:n.displayName||n.email,flag:d,isCorrect:q,submittedAt:new Date,pointsAwarded:Le};await uC(Ct(ye,"submissions"),Ce),q?((ee=r.solvedBy)!=null&&ee.includes(n.uid)||await dn(Be(ye,"challenges",r.id),{solvedBy:X_(n.uid)}),Le>0&&await dn(Be(ye,"users",n.uid),{totalPoints:uF(Le),challengesSolved:X_(r.id)}),m({type:"success",text:Le>0?`Congratulations! Flag is correct! +${Le} points awarded!`:"Congratulations! Flag is correct! (No additional points - already solved)"}),h(""),k()):m({type:"error",text:"Incorrect flag. Please try again."})}catch(q){console.error("Error submitting flag:",q),m({type:"error",text:"Failed to submit flag. Please try again."})}finally{c(!1)}}},E=J=>{const ee=[...w];ee[J]=!ee[J],C(ee)},y=()=>{e("/practice")},I=J=>{navigator.clipboard.writeText(J)},N=(K=r==null?void 0:r.solvedBy)==null?void 0:K.includes((n==null?void 0:n.uid)||""),R=()=>{if(!r.description)return null;const J=r.description.split(`
`),ee=[];for(let q=0;q<J.length;q++){const ue=J[q].trim();if(ue.startsWith("n =")||ue.startsWith("e =")||ue.startsWith("c =")){const[Le,...Ce]=ue.split("="),be=Ce.join("=").trim();ee.push(o.jsxs("div",{className:"mb-3 p-3 bg-muted/30 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"font-mono font-semibold text-xs",children:[Le,"="]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>I(be),className:"h-6 px-2",children:o.jsx(db,{className:"w-3 h-3"})})]}),o.jsx("div",{className:"font-mono text-xs bg-background p-2 rounded border break-all overflow-x-auto",children:o.jsx("pre",{className:"whitespace-pre-wrap break-words m-0",children:be})})]},q))}else if(ue.includes("=")&&ue.length>50){const[Le,...Ce]=ue.split("="),be=Ce.join("=").trim();ee.push(o.jsxs("div",{className:"mb-2",children:[o.jsxs("strong",{className:"text-sm",children:[Le,"="]}),o.jsx("div",{className:"font-mono text-xs bg-muted/30 p-2 rounded border break-all overflow-x-auto mt-1",children:o.jsx("pre",{className:"whitespace-pre-wrap break-words m-0",children:be})})]},q))}else ue?ee.push(o.jsx("p",{className:"mb-2 text-sm leading-relaxed break-words",children:ue},q)):ee.push(o.jsx("div",{className:"mb-2"},q))}return ee},j=v.some(J=>J.isCorrect&&J.pointsAwarded&&J.pointsAwarded>0);if(i)return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading challenge..."})]})})}),o.jsx(yt,{})]});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx(ae,{className:"max-w-md mx-auto border",children:o.jsxs(le,{className:"p-6 text-center",children:[o.jsx(Xe,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("h2",{className:"text-lg font-bold mb-2",children:"Challenge Not Found"}),o.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"The challenge you're looking for doesn't exist or you don't have permission to view it."}),o.jsxs(Y,{onClick:y,variant:"terminal",size:"sm",children:[o.jsx(cb,{className:"w-3 h-3 mr-1"}),"Back to Practice"]})]})})})}),o.jsx(yt,{})]});const P=J=>{switch(J){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},U=J=>({web:"bg-blue-500/20 text-blue-600 border-blue-200",crypto:"bg-purple-500/20 text-purple-600 border-purple-200",forensics:"bg-orange-500/20 text-orange-600 border-orange-200",pwn:"bg-red-500/20 text-red-600 border-red-200",reversing:"bg-indigo-500/20 text-indigo-600 border-indigo-200",misc:"bg-gray-500/20 text-gray-600 border-gray-200"})[J]||"bg-gray-500/20 text-gray-600 border-gray-200";return o.jsxs(o.Fragment,{children:[o.jsx(ht,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Y,{variant:"ghost",onClick:y,size:"sm",className:"h-8 px-2 sm:px-3 -ml-2",children:[o.jsx(cb,{className:"w-3 h-3 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Practice"}),o.jsx("span",{className:"sm:hidden",children:"Back"})]}),o.jsx("h1",{className:"text-lg sm:text-xl font-bold truncate",children:r.title})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[N&&o.jsxs(Se,{className:"bg-green-500/20 text-green-600 border-green-200 text-xs",children:[o.jsx(Br,{className:"w-3 h-3 mr-1"}),j?"Solved + Points":"Solved"]}),r.featuredOnPractice&&o.jsxs(Se,{className:"bg-yellow-500/20 text-yellow-600 border-yellow-200 text-xs",children:[o.jsx(Ov,{className:"w-3 h-3 mr-1"}),"Featured"]})]})]}),o.jsx(ae,{className:"mb-4 border",children:o.jsxs(le,{className:"p-3 sm:p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[o.jsx(Se,{className:`${P(r.difficulty)} text-xs`,children:r.difficulty}),o.jsx(Se,{className:`${U(r.finalCategory||r.category)} text-xs`,children:r.finalCategory||r.category}),o.jsxs(Se,{variant:"outline",className:"font-mono font-semibold text-xs",children:[r.totalPoints||r.points," pts"]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Dt,{className:"w-3 h-3"}),o.jsxs("span",{children:[((Q=r.solvedBy)==null?void 0:Q.length)||0," solves"]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Gi,{className:"w-3 h-3"}),o.jsx("span",{className:"hidden sm:inline",children:((G=(O=(te=r.createdAt)==null?void 0:te.toDate)==null?void 0:O.call(te))==null?void 0:G.toLocaleDateString())||new Date(r.createdAt).toLocaleDateString()}),o.jsx("span",{className:"sm:hidden",children:((W=(V=(se=r.createdAt)==null?void 0:se.toDate)==null?void 0:V.call(se))==null?void 0:W.toLocaleDateString("en-US",{month:"short",day:"numeric"}))||new Date(r.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-2 text-xs text-muted-foreground",children:[o.jsxs("div",{children:["By: ",r.createdByName||"Unknown"]}),r.originalCreator&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{children:"Original: "}),r.originalCreator.url?o.jsxs("a",{href:r.originalCreator.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:[r.originalCreator.name,o.jsx(qd,{className:"w-3 h-3"})]}):o.jsx("span",{children:r.originalCreator.name})]})]})]})}),o.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide mb-4 bg-muted/30 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>_("description"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${T==="description"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Description"}),o.jsxs("button",{onClick:()=>_("hints"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${T==="hints"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Hints (",((me=r.hints)==null?void 0:me.length)||0,")"]}),o.jsxs("button",{onClick:()=>_("files"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${T==="files"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Files (",((ve=r.files)==null?void 0:ve.length)||0,")"]})]}),o.jsxs("div",{className:"space-y-4",children:[T==="description"&&o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-4 sm:p-6",children:o.jsx("div",{className:"space-y-3",children:r.hasMultipleQuestions&&r.questions?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),r.questions.map((J,ee)=>{var q;return o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("h4",{className:"font-semibold text-sm mb-1",children:["Question ",ee+1]}),o.jsx("p",{className:"mb-2 text-xs text-muted-foreground break-words",children:J.question}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"font-mono font-semibold",children:[J.points," points"]}),((q=r.solvedBy)==null?void 0:q.includes((n==null?void 0:n.uid)||""))&&o.jsxs(Se,{variant:"outline",className:"font-mono text-xs",children:["Flag: ",J.flag]})]})]},J.id)})]}):o.jsxs("div",{className:"space-y-3 break-words",children:[R(),r.flagFormat&&o.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-200 rounded text-xs",children:o.jsxs("p",{className:"text-blue-600 break-words",children:[o.jsx("strong",{children:"Flag Format:"})," ",r.flagFormat]})}),N&&r.flag&&o.jsx("div",{className:"p-3 bg-green-500/10 border border-green-200 rounded break-words",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("p",{className:"text-xs text-green-600 font-mono break-all flex-1",children:[o.jsx("strong",{children:"Flag:"})," ",r.flag]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>I(r.flag),className:"h-6 px-2 flex-shrink-0",children:o.jsx(db,{className:"w-3 h-3"})})]})})]})})})}),T==="hints"&&o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-4 sm:p-6",children:r.hints&&r.hints.length>0?o.jsx("div",{className:"space-y-3",children:r.hints.map((J,ee)=>o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(DU,{className:"w-3 h-3 text-primary"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold text-sm",children:["Hint ",ee+1]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>E(ee),className:"h-6 px-2 text-xs",children:w[ee]?"Hide":"Reveal"})]}),w[ee]&&o.jsx("p",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded border break-words",children:J})]})]})})},ee))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No hints available."})})})}),T==="files"&&o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-4 sm:p-6",children:r.files&&r.files.length>0?o.jsx("div",{className:"space-y-2",children:r.files.map((J,ee)=>o.jsxs("a",{href:J.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 text-sm border rounded hover:bg-accent transition-colors",children:[J.type==="file"?o.jsx(cc,{className:"w-4 h-4"}):o.jsx(ca,{className:"w-4 h-4"}),o.jsx("span",{className:"flex-1 truncate",children:J.name}),o.jsx(qd,{className:"w-3 h-3"})]},ee))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files or links available."})})})})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(ae,{className:"border lg:sticky lg:top-4",children:[o.jsx(Oe,{className:"p-4 pb-2",children:o.jsxs(Me,{className:"flex items-center gap-2 text-base",children:[o.jsx(GC,{className:"w-4 h-4"}),"Submit Flag"]})}),o.jsxs(le,{className:"p-4 pt-2 space-y-3",children:[f&&o.jsxs(Xh,{className:`text-sm ${f.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200"}`,children:[f.type==="success"?o.jsx(Br,{className:"w-4 h-4 text-green-600"}):o.jsx(la,{className:"w-4 h-4 text-red-600"}),o.jsx(Jh,{className:f.type==="success"?"text-green-600":"text-red-600",children:f.text})]}),N?o.jsxs("div",{className:"text-center p-3 bg-green-500/10 border border-green-200 rounded",children:[o.jsx(Br,{className:"w-8 h-8 text-green-600 mx-auto mb-1"}),o.jsx("p",{className:"text-green-600 font-semibold text-sm",children:"Challenge Solved!"}),o.jsx("p",{className:"text-green-600 text-xs mt-1",children:j?`+${r.totalPoints||r.points} points awarded`:"Already solved - no additional points"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(z,{htmlFor:"flag",className:"text-xs font-medium",children:"Enter Flag"}),o.jsx(de,{id:"flag",placeholder:"CTF{...} or flag content",value:d,onChange:J=>h(J.target.value),onKeyPress:J=>J.key==="Enter"&&A(),className:"font-mono text-sm h-9"})]}),o.jsx(Y,{onClick:A,disabled:l||!d.trim(),className:"w-full h-9",variant:"terminal",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-2"}),"Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Submit Flag"]})})]})]})]}),v.length>0&&o.jsxs(ae,{className:"border",children:[o.jsx(Oe,{className:"p-4 pb-2",children:o.jsx(Me,{className:"text-base",children:"Submission History"})}),o.jsx(le,{className:"p-4 pt-2",children:o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:v.map(J=>{var ee,q,ue;return o.jsxs("div",{className:"flex items-center justify-between p-2 border rounded text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[J.isCorrect?o.jsx(Br,{className:"w-3 h-3 text-green-600 flex-shrink-0"}):o.jsx(la,{className:"w-3 h-3 text-red-600 flex-shrink-0"}),o.jsx("code",{className:"truncate font-mono text-xs",children:J.flag}),J.pointsAwarded&&J.pointsAwarded>0&&o.jsxs(Se,{variant:"outline",className:"ml-1 text-xs bg-green-500/10 text-green-600",children:["+",J.pointsAwarded]})]}),o.jsx("span",{className:"text-muted-foreground flex-shrink-0 ml-1 text-xs",children:((ue=(q=(ee=J.submittedAt)==null?void 0:ee.toDate)==null?void 0:q.call(ee))==null?void 0:ue.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||new Date(J.submittedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},J.id)})})})]})]})]})]})}),o.jsx(yt,{})]})};function n7(){return o.jsx(kC,{children:o.jsx(C5,{children:o.jsx(I5,{children:o.jsx(wP,{children:o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(ht,{}),o.jsx("main",{className:"flex-1",children:o.jsxs(fP,{children:[o.jsx(on,{path:"/",element:o.jsx(KU,{})}),o.jsx(on,{path:"/login",element:o.jsx(QU,{})}),o.jsx(on,{path:"/signup",element:o.jsx(YU,{})}),o.jsx(on,{path:"/auth/github/callback",element:o.jsx(ZU,{})}),o.jsx(on,{path:"/leaderboard",element:o.jsx(I9,{})}),o.jsx(on,{path:"/writeups",element:o.jsx(XU,{})}),o.jsx(on,{path:"/dashboard",element:o.jsx(uo,{children:o.jsx(nl,{children:o.jsx(r9,{})})})}),o.jsx(on,{path:"/practice",element:o.jsx(uo,{children:o.jsx(nl,{children:o.jsx(i9,{})})})}),o.jsx(on,{path:"/live",element:o.jsx(uo,{children:o.jsx(nl,{children:o.jsx(o9,{})})})}),o.jsx(on,{path:"/writeups/create",element:o.jsx(uo,{children:o.jsx(nl,{children:o.jsx(JU,{})})})}),o.jsx(on,{path:"/challenge/:challengeId",element:o.jsx(uo,{children:o.jsx(nl,{children:o.jsx(t7,{})})})}),o.jsx(on,{path:"/admin",element:o.jsx(uo,{children:o.jsx(j5,{children:o.jsx(e7,{})})})}),o.jsx(on,{path:"*",element:o.jsx(e9,{})})]})})]})})})})})}iN(document.getElementById("root")).render(o.jsx(kC,{children:o.jsx(n7,{})}));
