function wA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Rb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pb={exports:{}},Zd={},Db={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hc=Symbol.for("react.element"),_A=Symbol.for("react.portal"),bA=Symbol.for("react.fragment"),EA=Symbol.for("react.strict_mode"),NA=Symbol.for("react.profiler"),TA=Symbol.for("react.provider"),SA=Symbol.for("react.context"),CA=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),jA=Symbol.for("react.memo"),AA=Symbol.for("react.lazy"),Ox=Symbol.iterator;function kA(t){return t===null||typeof t!="object"?null:(t=Ox&&t[Ox]||t["@@iterator"],typeof t=="function"?t:null)}var Lb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ob=Object.assign,Mb={};function da(t,e,n){this.props=t,this.context=e,this.refs=Mb,this.updater=n||Lb}da.prototype.isReactComponent={};da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vb(){}Vb.prototype=da.prototype;function pg(t,e,n){this.props=t,this.context=e,this.refs=Mb,this.updater=n||Lb}var mg=pg.prototype=new Vb;mg.constructor=pg;Ob(mg,da.prototype);mg.isPureReactComponent=!0;var Mx=Array.isArray,Fb=Object.prototype.hasOwnProperty,gg={current:null},Ub={key:!0,ref:!0,__self:!0,__source:!0};function Bb(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Fb.call(e,r)&&!Ub.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:hc,type:t,key:i,ref:a,props:s,_owner:gg.current}}function RA(t,e){return{$$typeof:hc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yg(t){return typeof t=="object"&&t!==null&&t.$$typeof===hc}function PA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vx=/\/+/g;function Tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PA(""+t.key):e.toString(36)}function Tu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case hc:case _A:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Tf(a,0):r,Mx(s)?(n="",t!=null&&(n=t.replace(Vx,"$&/")+"/"),Tu(s,e,n,"",function(d){return d})):s!=null&&(yg(s)&&(s=RA(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Vx,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Mx(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Tf(i,l);a+=Tu(i,e,n,c,s)}else if(c=kA(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Tf(i,l++),a+=Tu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function qc(t,e,n){if(t==null)return t;var r=[],s=0;return Tu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Su={transition:null},LA={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Su,ReactCurrentOwner:gg};function $b(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:qc,forEach:function(t,e,n){qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qc(t,function(){e++}),e},toArray:function(t){return qc(t,function(e){return e})||[]},only:function(t){if(!yg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=da;_e.Fragment=bA;_e.Profiler=NA;_e.PureComponent=pg;_e.StrictMode=EA;_e.Suspense=IA;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LA;_e.act=$b;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ob({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=gg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Fb.call(e,c)&&!Ub.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:hc,type:t.type,key:s,ref:i,props:r,_owner:a}};_e.createContext=function(t){return t={$$typeof:SA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TA,_context:t},t.Consumer=t};_e.createElement=Bb;_e.createFactory=function(t){var e=Bb.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:CA,render:t}};_e.isValidElement=yg;_e.lazy=function(t){return{$$typeof:AA,_payload:{_status:-1,_result:t},_init:DA}};_e.memo=function(t,e){return{$$typeof:jA,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Su.transition;Su.transition={};try{t()}finally{Su.transition=e}};_e.unstable_act=$b;_e.useCallback=function(t,e){return rn.current.useCallback(t,e)};_e.useContext=function(t){return rn.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};_e.useEffect=function(t,e){return rn.current.useEffect(t,e)};_e.useId=function(){return rn.current.useId()};_e.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return rn.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};_e.useRef=function(t){return rn.current.useRef(t)};_e.useState=function(t){return rn.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return rn.current.useTransition()};_e.version="18.3.1";Db.exports=_e;var g=Db.exports;const ys=Rb(g),eh=wA({__proto__:null,default:ys},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA=g,MA=Symbol.for("react.element"),VA=Symbol.for("react.fragment"),FA=Object.prototype.hasOwnProperty,UA=OA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BA={key:!0,ref:!0,__self:!0,__source:!0};function zb(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)FA.call(e,r)&&!BA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:MA,type:t,key:i,ref:a,props:s,_owner:UA.current}}Zd.Fragment=VA;Zd.jsx=zb;Zd.jsxs=zb;Pb.exports=Zd;var o=Pb.exports,Hb={exports:{}},An={},Wb={exports:{}},qb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,W){var re=O.length;O.push(W);e:for(;0<re;){var F=re-1>>>1,V=O[F];if(0<s(V,W))O[F]=W,O[re]=V,re=F;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],re=O.pop();if(re!==W){O[0]=re;e:for(var F=0,V=O.length,G=V>>>1;F<G;){var Z=2*(F+1)-1,me=O[Z],ye=Z+1,oe=O[ye];if(0>s(me,re))ye<V&&0>s(oe,me)?(O[F]=oe,O[ye]=re,F=ye):(O[F]=me,O[Z]=re,F=Z);else if(ye<V&&0>s(oe,re))O[F]=oe,O[ye]=re,F=ye;else break e}}return W}function s(O,W){var re=O.sortIndex-W.sortIndex;return re!==0?re:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,p=3,v=!1,I=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=O)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function R(O){if(_=!1,C(O),!I)if(n(c)!==null)I=!0,J(L);else{var W=n(d);W!==null&&le(R,W.startTime-O)}}function L(O,W){I=!1,_&&(_=!1,E(y),y=-1),v=!0;var re=p;try{for(C(W),f=n(c);f!==null&&(!(f.expirationTime>W)||O&&!j());){var F=f.callback;if(typeof F=="function"){f.callback=null,p=f.priorityLevel;var V=F(f.expirationTime<=W);W=t.unstable_now(),typeof V=="function"?f.callback=V:f===n(c)&&r(c),C(W)}else r(c);f=n(c)}if(f!==null)var G=!0;else{var Z=n(d);Z!==null&&le(R,Z.startTime-W),G=!1}return G}finally{f=null,p=re,v=!1}}var A=!1,N=null,y=-1,T=5,b=-1;function j(){return!(t.unstable_now()-b<T)}function k(){if(N!==null){var O=t.unstable_now();b=O;var W=!0;try{W=N(!0,O)}finally{W?P():(A=!1,N=null)}}else A=!1}var P;if(typeof w=="function")P=function(){w(k)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ae=H.port2;H.port1.onmessage=k,P=function(){ae.postMessage(null)}}else P=function(){S(k,0)};function J(O){N=O,A||(A=!0,P())}function le(O,W){y=S(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){I||v||(I=!0,J(L))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var re=p;p=W;try{return O()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var re=p;p=O;try{return W()}finally{p=re}},t.unstable_scheduleCallback=function(O,W,re){var F=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?F+re:F):re=F,O){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=re+V,O={id:h++,callback:W,priorityLevel:O,startTime:re,expirationTime:V,sortIndex:-1},re>F?(O.sortIndex=re,e(d,O),n(c)===null&&O===n(d)&&(_?(E(y),y=-1):_=!0,le(R,re-F))):(O.sortIndex=V,e(c,O),I||v||(I=!0,J(L))),O},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(O){var W=p;return function(){var re=p;p=W;try{return O.apply(this,arguments)}finally{p=re}}}})(qb);Wb.exports=qb;var $A=Wb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA=g,jn=$A;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gb=new Set,kl={};function Ji(t,e){zo(t,e),zo(t+"Capture",e)}function zo(t,e){for(kl[t]=e,t=0;t<e.length;t++)Gb.add(e[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ap=Object.prototype.hasOwnProperty,HA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fx={},Ux={};function WA(t){return Ap.call(Ux,t)?!0:Ap.call(Fx,t)?!1:HA.test(t)?Ux[t]=!0:(Fx[t]=!0,!1)}function qA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GA(t,e,n,r){if(e===null||typeof e>"u"||qA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var vg=/[\-:]([a-z])/g;function xg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vg,xg);Dt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vg,xg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vg,xg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function wg(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GA(e,n,s,r)&&(n=null),r||s===null?WA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=zA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gc=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),_g=Symbol.for("react.strict_mode"),kp=Symbol.for("react.profiler"),Kb=Symbol.for("react.provider"),Qb=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Pp=Symbol.for("react.suspense_list"),Eg=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),Yb=Symbol.for("react.offscreen"),Bx=Symbol.iterator;function qa(t){return t===null||typeof t!="object"?null:(t=Bx&&t[Bx]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Object.assign,Sf;function rl(t){if(Sf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sf=e&&e[1]||""}return`
`+Sf+t}var Cf=!1;function If(t,e){if(!t||Cf)return"";Cf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Cf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function KA(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=If(t.type,!1),t;case 11:return t=If(t.type.render,!1),t;case 1:return t=If(t.type,!0),t;default:return""}}function Dp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case yo:return"Portal";case kp:return"Profiler";case _g:return"StrictMode";case Rp:return"Suspense";case Pp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qb:return(t.displayName||"Context")+".Consumer";case Kb:return(t._context.displayName||"Context")+".Provider";case bg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Eg:return e=t.displayName||null,e!==null?e:Dp(t.type)||"Memo";case xs:e=t._payload,t=t._init;try{return Dp(t(e))}catch{}}return null}function QA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dp(e);case 8:return e===_g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YA(t){var e=Xb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kc(t){t._valueTracker||(t._valueTracker=YA(t))}function Jb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Xb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lp(t,e){var n=e.checked;return Ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $x(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zb(t,e){e=e.checked,e!=null&&wg(t,"checked",e,!1)}function Op(t,e){Zb(t,e);var n=Gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mp(t,e.type,Gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mp(t,e,n){(e!=="number"||Yu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function jo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Vp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(sl(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gs(n)}}function e1(t,e){var n=Gs(e.value),r=Gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Wx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function t1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?t1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qc,n1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Qc=Qc||document.createElement("div"),Qc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XA=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){XA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function r1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function s1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=r1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JA=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Up(t,e){if(e){if(JA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Bp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=null;function Ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zp=null,Ao=null,ko=null;function qx(t){if(t=mc(t)){if(typeof zp!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ih(e),zp(t.stateNode,t.type,e))}}function i1(t){Ao?ko?ko.push(t):ko=[t]:Ao=t}function o1(){if(Ao){var t=Ao,e=ko;if(ko=Ao=null,qx(t),e)for(t=0;t<e.length;t++)qx(e[t])}}function a1(t,e){return t(e)}function l1(){}var jf=!1;function c1(t,e,n){if(jf)return t(e,n);jf=!0;try{return a1(t,e,n)}finally{jf=!1,(Ao!==null||ko!==null)&&(l1(),o1())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var r=ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Hp=!1;if(Hr)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){Hp=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{Hp=!1}function ZA(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ml=!1,Xu=null,Ju=!1,Wp=null,e2={onError:function(t){ml=!0,Xu=t}};function t2(t,e,n,r,s,i,a,l,c){ml=!1,Xu=null,ZA.apply(e2,arguments)}function n2(t,e,n,r,s,i,a,l,c){if(t2.apply(this,arguments),ml){if(ml){var d=Xu;ml=!1,Xu=null}else throw Error(z(198));Ju||(Ju=!0,Wp=d)}}function Zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gx(t){if(Zi(t)!==t)throw Error(z(188))}function r2(t){var e=t.alternate;if(!e){if(e=Zi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Gx(s),t;if(i===r)return Gx(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function d1(t){return t=r2(t),t!==null?h1(t):null}function h1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h1(t);if(e!==null)return e;t=t.sibling}return null}var f1=jn.unstable_scheduleCallback,Kx=jn.unstable_cancelCallback,s2=jn.unstable_shouldYield,i2=jn.unstable_requestPaint,ct=jn.unstable_now,o2=jn.unstable_getCurrentPriorityLevel,Tg=jn.unstable_ImmediatePriority,p1=jn.unstable_UserBlockingPriority,Zu=jn.unstable_NormalPriority,a2=jn.unstable_LowPriority,m1=jn.unstable_IdlePriority,th=null,yr=null;function l2(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(th,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:d2,c2=Math.log,u2=Math.LN2;function d2(t){return t>>>=0,t===0?32:31-(c2(t)/u2|0)|0}var Yc=64,Xc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ed(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=il(l):(i&=a,i!==0&&(r=il(i)))}else a=n&~s,a!==0?r=il(a):i!==0&&(r=il(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),s=1<<n,r|=t[n],e&=~s;return r}function h2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Zn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=h2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g1(){var t=Yc;return Yc<<=1,!(Yc&4194240)&&(Yc=64),t}function Af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function p2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var De=0;function y1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var v1,Cg,x1,w1,_1,Gp=!1,Jc=[],Ps=null,Ds=null,Ls=null,Dl=new Map,Ll=new Map,_s=[],m2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qx(t,e){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Ka(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=mc(e),e!==null&&Cg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function g2(t,e,n,r,s){switch(e){case"focusin":return Ps=Ka(Ps,t,e,n,r,s),!0;case"dragenter":return Ds=Ka(Ds,t,e,n,r,s),!0;case"mouseover":return Ls=Ka(Ls,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Dl.set(i,Ka(Dl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ll.set(i,Ka(Ll.get(i)||null,t,e,n,r,s)),!0}return!1}function b1(t){var e=Si(t.target);if(e!==null){var n=Zi(e);if(n!==null){if(e=n.tag,e===13){if(e=u1(n),e!==null){t.blockedOn=e,_1(t.priority,function(){x1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$p=r,n.target.dispatchEvent(r),$p=null}else return e=mc(n),e!==null&&Cg(e),t.blockedOn=n,!1;e.shift()}return!0}function Yx(t,e,n){Cu(t)&&n.delete(e)}function y2(){Gp=!1,Ps!==null&&Cu(Ps)&&(Ps=null),Ds!==null&&Cu(Ds)&&(Ds=null),Ls!==null&&Cu(Ls)&&(Ls=null),Dl.forEach(Yx),Ll.forEach(Yx)}function Qa(t,e){t.blockedOn===e&&(t.blockedOn=null,Gp||(Gp=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,y2)))}function Ol(t){function e(s){return Qa(s,t)}if(0<Jc.length){Qa(Jc[0],t);for(var n=1;n<Jc.length;n++){var r=Jc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ps!==null&&Qa(Ps,t),Ds!==null&&Qa(Ds,t),Ls!==null&&Qa(Ls,t),Dl.forEach(e),Ll.forEach(e),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)b1(n),n.blockedOn===null&&_s.shift()}var Ro=ns.ReactCurrentBatchConfig,td=!0;function v2(t,e,n,r){var s=De,i=Ro.transition;Ro.transition=null;try{De=1,Ig(t,e,n,r)}finally{De=s,Ro.transition=i}}function x2(t,e,n,r){var s=De,i=Ro.transition;Ro.transition=null;try{De=4,Ig(t,e,n,r)}finally{De=s,Ro.transition=i}}function Ig(t,e,n,r){if(td){var s=Kp(t,e,n,r);if(s===null)Uf(t,e,r,nd,n),Qx(t,r);else if(g2(s,t,e,n,r))r.stopPropagation();else if(Qx(t,r),e&4&&-1<m2.indexOf(t)){for(;s!==null;){var i=mc(s);if(i!==null&&v1(i),i=Kp(t,e,n,r),i===null&&Uf(t,e,r,nd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Uf(t,e,r,null,n)}}var nd=null;function Kp(t,e,n,r){if(nd=null,t=Ng(r),t=Si(t),t!==null)if(e=Zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nd=t,null}function E1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o2()){case Tg:return 1;case p1:return 4;case Zu:case a2:return 16;case m1:return 536870912;default:return 16}default:return 16}}var Is=null,jg=null,Iu=null;function N1(){if(Iu)return Iu;var t,e=jg,n=e.length,r,s="value"in Is?Is.value:Is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Iu=s.slice(t,1<r?1-r:void 0)}function ju(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zc(){return!0}function Xx(){return!1}function kn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zc:Xx,this.isPropagationStopped=Xx,this}return Ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ag=kn(ha),pc=Ze({},ha,{view:0,detail:0}),w2=kn(pc),kf,Rf,Ya,nh=Ze({},pc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ya&&(Ya&&t.type==="mousemove"?(kf=t.screenX-Ya.screenX,Rf=t.screenY-Ya.screenY):Rf=kf=0,Ya=t),kf)},movementY:function(t){return"movementY"in t?t.movementY:Rf}}),Jx=kn(nh),_2=Ze({},nh,{dataTransfer:0}),b2=kn(_2),E2=Ze({},pc,{relatedTarget:0}),Pf=kn(E2),N2=Ze({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),T2=kn(N2),S2=Ze({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C2=kn(S2),I2=Ze({},ha,{data:0}),Zx=kn(I2),j2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k2[t])?!!e[t]:!1}function kg(){return R2}var P2=Ze({},pc,{key:function(t){if(t.key){var e=j2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ju(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kg,charCode:function(t){return t.type==="keypress"?ju(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ju(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),D2=kn(P2),L2=Ze({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ew=kn(L2),O2=Ze({},pc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kg}),M2=kn(O2),V2=Ze({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),F2=kn(V2),U2=Ze({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B2=kn(U2),$2=[9,13,27,32],Rg=Hr&&"CompositionEvent"in window,gl=null;Hr&&"documentMode"in document&&(gl=document.documentMode);var z2=Hr&&"TextEvent"in window&&!gl,T1=Hr&&(!Rg||gl&&8<gl&&11>=gl),tw=" ",nw=!1;function S1(t,e){switch(t){case"keyup":return $2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xo=!1;function H2(t,e){switch(t){case"compositionend":return C1(e);case"keypress":return e.which!==32?null:(nw=!0,tw);case"textInput":return t=e.data,t===tw&&nw?null:t;default:return null}}function W2(t,e){if(xo)return t==="compositionend"||!Rg&&S1(t,e)?(t=N1(),Iu=jg=Is=null,xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T1&&e.locale!=="ko"?null:e.data;default:return null}}var q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q2[t.type]:e==="textarea"}function I1(t,e,n,r){i1(r),e=rd(e,"onChange"),0<e.length&&(n=new Ag("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yl=null,Ml=null;function G2(t){F1(t,0)}function rh(t){var e=bo(t);if(Jb(e))return t}function K2(t,e){if(t==="change")return e}var j1=!1;if(Hr){var Df;if(Hr){var Lf="oninput"in document;if(!Lf){var sw=document.createElement("div");sw.setAttribute("oninput","return;"),Lf=typeof sw.oninput=="function"}Df=Lf}else Df=!1;j1=Df&&(!document.documentMode||9<document.documentMode)}function iw(){yl&&(yl.detachEvent("onpropertychange",A1),Ml=yl=null)}function A1(t){if(t.propertyName==="value"&&rh(Ml)){var e=[];I1(e,Ml,t,Ng(t)),c1(G2,e)}}function Q2(t,e,n){t==="focusin"?(iw(),yl=e,Ml=n,yl.attachEvent("onpropertychange",A1)):t==="focusout"&&iw()}function Y2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rh(Ml)}function X2(t,e){if(t==="click")return rh(e)}function J2(t,e){if(t==="input"||t==="change")return rh(e)}function Z2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:Z2;function Vl(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ap.call(e,s)||!nr(t[s],e[s]))return!1}return!0}function ow(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function aw(t,e){var n=ow(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ow(n)}}function k1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function R1(){for(var t=window,e=Yu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yu(t.document)}return e}function Pg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ek(t){var e=R1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k1(n.ownerDocument.documentElement,n)){if(r!==null&&Pg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=aw(n,i);var a=aw(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tk=Hr&&"documentMode"in document&&11>=document.documentMode,wo=null,Qp=null,vl=null,Yp=!1;function lw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yp||wo==null||wo!==Yu(r)||(r=wo,"selectionStart"in r&&Pg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vl&&Vl(vl,r)||(vl=r,r=rd(Qp,"onSelect"),0<r.length&&(e=new Ag("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wo)))}function eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _o={animationend:eu("Animation","AnimationEnd"),animationiteration:eu("Animation","AnimationIteration"),animationstart:eu("Animation","AnimationStart"),transitionend:eu("Transition","TransitionEnd")},Of={},P1={};Hr&&(P1=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function sh(t){if(Of[t])return Of[t];if(!_o[t])return t;var e=_o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in P1)return Of[t]=e[n];return t}var D1=sh("animationend"),L1=sh("animationiteration"),O1=sh("animationstart"),M1=sh("transitionend"),V1=new Map,cw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){V1.set(t,e),Ji(e,[t])}for(var Mf=0;Mf<cw.length;Mf++){var Vf=cw[Mf],nk=Vf.toLowerCase(),rk=Vf[0].toUpperCase()+Vf.slice(1);si(nk,"on"+rk)}si(D1,"onAnimationEnd");si(L1,"onAnimationIteration");si(O1,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(M1,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function uw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,n2(r,e,void 0,t),t.currentTarget=null}function F1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;uw(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;uw(s,l,d),i=c}}}if(Ju)throw t=Wp,Ju=!1,Wp=null,t}function We(t,e){var n=e[tm];n===void 0&&(n=e[tm]=new Set);var r=t+"__bubble";n.has(r)||(U1(e,t,2,!1),n.add(r))}function Ff(t,e,n){var r=0;e&&(r|=4),U1(n,t,r,e)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Fl(t){if(!t[tu]){t[tu]=!0,Gb.forEach(function(n){n!=="selectionchange"&&(sk.has(n)||Ff(n,!1,t),Ff(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tu]||(e[tu]=!0,Ff("selectionchange",!1,e))}}function U1(t,e,n,r){switch(E1(e)){case 1:var s=v2;break;case 4:s=x2;break;default:s=Ig}n=s.bind(null,e,n,t),s=void 0,!Hp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Uf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Si(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}c1(function(){var d=i,h=Ng(n),f=[];e:{var p=V1.get(t);if(p!==void 0){var v=Ag,I=t;switch(t){case"keypress":if(ju(n)===0)break e;case"keydown":case"keyup":v=D2;break;case"focusin":I="focus",v=Pf;break;case"focusout":I="blur",v=Pf;break;case"beforeblur":case"afterblur":v=Pf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Jx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=b2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=M2;break;case D1:case L1:case O1:v=T2;break;case M1:v=F2;break;case"scroll":v=w2;break;case"wheel":v=B2;break;case"copy":case"cut":case"paste":v=C2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ew}var _=(e&4)!==0,S=!_&&t==="scroll",E=_?p!==null?p+"Capture":null:p;_=[];for(var w=d,C;w!==null;){C=w;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,E!==null&&(R=Pl(w,E),R!=null&&_.push(Ul(w,R,C)))),S)break;w=w.return}0<_.length&&(p=new v(p,I,null,n,h),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==$p&&(I=n.relatedTarget||n.fromElement)&&(Si(I)||I[Wr]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(I=n.relatedTarget||n.toElement,v=d,I=I?Si(I):null,I!==null&&(S=Zi(I),I!==S||I.tag!==5&&I.tag!==6)&&(I=null)):(v=null,I=d),v!==I)){if(_=Jx,R="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=ew,R="onPointerLeave",E="onPointerEnter",w="pointer"),S=v==null?p:bo(v),C=I==null?p:bo(I),p=new _(R,w+"leave",v,n,h),p.target=S,p.relatedTarget=C,R=null,Si(h)===d&&(_=new _(E,w+"enter",I,n,h),_.target=C,_.relatedTarget=S,R=_),S=R,v&&I)t:{for(_=v,E=I,w=0,C=_;C;C=co(C))w++;for(C=0,R=E;R;R=co(R))C++;for(;0<w-C;)_=co(_),w--;for(;0<C-w;)E=co(E),C--;for(;w--;){if(_===E||E!==null&&_===E.alternate)break t;_=co(_),E=co(E)}_=null}else _=null;v!==null&&dw(f,p,v,_,!1),I!==null&&S!==null&&dw(f,S,I,_,!0)}}e:{if(p=d?bo(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var L=K2;else if(rw(p))if(j1)L=J2;else{L=Y2;var A=Q2}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=X2);if(L&&(L=L(t,d))){I1(f,L,n,h);break e}A&&A(t,p,d),t==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&Mp(p,"number",p.value)}switch(A=d?bo(d):window,t){case"focusin":(rw(A)||A.contentEditable==="true")&&(wo=A,Qp=d,vl=null);break;case"focusout":vl=Qp=wo=null;break;case"mousedown":Yp=!0;break;case"contextmenu":case"mouseup":case"dragend":Yp=!1,lw(f,n,h);break;case"selectionchange":if(tk)break;case"keydown":case"keyup":lw(f,n,h)}var N;if(Rg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else xo?S1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(T1&&n.locale!=="ko"&&(xo||y!=="onCompositionStart"?y==="onCompositionEnd"&&xo&&(N=N1()):(Is=h,jg="value"in Is?Is.value:Is.textContent,xo=!0)),A=rd(d,y),0<A.length&&(y=new Zx(y,t,null,n,h),f.push({event:y,listeners:A}),N?y.data=N:(N=C1(n),N!==null&&(y.data=N)))),(N=z2?H2(t,n):W2(t,n))&&(d=rd(d,"onBeforeInput"),0<d.length&&(h=new Zx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=N))}F1(f,e)})}function Ul(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pl(t,n),i!=null&&r.unshift(Ul(t,i,s)),i=Pl(t,e),i!=null&&r.push(Ul(t,i,s))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dw(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Pl(n,i),c!=null&&a.unshift(Ul(n,c,l))):s||(c=Pl(n,i),c!=null&&a.push(Ul(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var ik=/\r\n?/g,ok=/\u0000|\uFFFD/g;function hw(t){return(typeof t=="string"?t:""+t).replace(ik,`
`).replace(ok,"")}function nu(t,e,n){if(e=hw(e),hw(t)!==e&&n)throw Error(z(425))}function sd(){}var Xp=null,Jp=null;function Zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var em=typeof setTimeout=="function"?setTimeout:void 0,ak=typeof clearTimeout=="function"?clearTimeout:void 0,fw=typeof Promise=="function"?Promise:void 0,lk=typeof queueMicrotask=="function"?queueMicrotask:typeof fw<"u"?function(t){return fw.resolve(null).then(t).catch(ck)}:em;function ck(t){setTimeout(function(){throw t})}function Bf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ol(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ol(e)}function Os(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function pw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fa=Math.random().toString(36).slice(2),fr="__reactFiber$"+fa,Bl="__reactProps$"+fa,Wr="__reactContainer$"+fa,tm="__reactEvents$"+fa,uk="__reactListeners$"+fa,dk="__reactHandles$"+fa;function Si(t){var e=t[fr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[fr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pw(t);t!==null;){if(n=t[fr])return n;t=pw(t)}return e}t=n,n=t.parentNode}return null}function mc(t){return t=t[fr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ih(t){return t[Bl]||null}var nm=[],Eo=-1;function ii(t){return{current:t}}function Ke(t){0>Eo||(t.current=nm[Eo],nm[Eo]=null,Eo--)}function $e(t,e){Eo++,nm[Eo]=t.current,t.current=e}var Ks={},Wt=ii(Ks),pn=ii(!1),Mi=Ks;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function id(){Ke(pn),Ke(Wt)}function mw(t,e,n){if(Wt.current!==Ks)throw Error(z(168));$e(Wt,e),$e(pn,n)}function B1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,QA(t)||"Unknown",s));return Ze({},n,r)}function od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,Mi=Wt.current,$e(Wt,t),$e(pn,pn.current),!0}function gw(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=B1(t,e,Mi),r.__reactInternalMemoizedMergedChildContext=t,Ke(pn),Ke(Wt),$e(Wt,t)):Ke(pn),$e(pn,n)}var Lr=null,oh=!1,$f=!1;function $1(t){Lr===null?Lr=[t]:Lr.push(t)}function hk(t){oh=!0,$1(t)}function oi(){if(!$f&&Lr!==null){$f=!0;var t=0,e=De;try{var n=Lr;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,oh=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(t+1)),f1(Tg,oi),s}finally{De=e,$f=!1}}return null}var No=[],To=0,ad=null,ld=0,Rn=[],Pn=0,Vi=null,Mr=1,Vr="";function Ei(t,e){No[To++]=ld,No[To++]=ad,ad=t,ld=e}function z1(t,e,n){Rn[Pn++]=Mr,Rn[Pn++]=Vr,Rn[Pn++]=Vi,Vi=t;var r=Mr;t=Vr;var s=32-Zn(r)-1;r&=~(1<<s),n+=1;var i=32-Zn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Mr=1<<32-Zn(e)+s|n<<s|r,Vr=i+t}else Mr=1<<i|n<<s|r,Vr=t}function Dg(t){t.return!==null&&(Ei(t,1),z1(t,1,0))}function Lg(t){for(;t===ad;)ad=No[--To],No[To]=null,ld=No[--To],No[To]=null;for(;t===Vi;)Vi=Rn[--Pn],Rn[Pn]=null,Vr=Rn[--Pn],Rn[Pn]=null,Mr=Rn[--Pn],Rn[Pn]=null}var Tn=null,bn=null,Qe=!1,Yn=null;function H1(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,bn=Os(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:Mr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,bn=null,!0):!1;default:return!1}}function rm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sm(t){if(Qe){var e=bn;if(e){var n=e;if(!yw(t,e)){if(rm(t))throw Error(z(418));e=Os(n.nextSibling);var r=Tn;e&&yw(t,e)?H1(r,n):(t.flags=t.flags&-4097|2,Qe=!1,Tn=t)}}else{if(rm(t))throw Error(z(418));t.flags=t.flags&-4097|2,Qe=!1,Tn=t}}}function vw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function ru(t){if(t!==Tn)return!1;if(!Qe)return vw(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zp(t.type,t.memoizedProps)),e&&(e=bn)){if(rm(t))throw W1(),Error(z(418));for(;e;)H1(t,e),e=Os(e.nextSibling)}if(vw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=Os(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Tn?Os(t.stateNode.nextSibling):null;return!0}function W1(){for(var t=bn;t;)t=Os(t.nextSibling)}function Wo(){bn=Tn=null,Qe=!1}function Og(t){Yn===null?Yn=[t]:Yn.push(t)}var fk=ns.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function su(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xw(t){var e=t._init;return e(t._payload)}function q1(t){function e(E,w){if(t){var C=E.deletions;C===null?(E.deletions=[w],E.flags|=16):C.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=Us(E,w),E.index=0,E.sibling=null,E}function i(E,w,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<w?(E.flags|=2,w):C):(E.flags|=2,w)):(E.flags|=1048576,w)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,C,R){return w===null||w.tag!==6?(w=Qf(C,E.mode,R),w.return=E,w):(w=s(w,C),w.return=E,w)}function c(E,w,C,R){var L=C.type;return L===vo?h(E,w,C.props.children,R,C.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xs&&xw(L)===w.type)?(R=s(w,C.props),R.ref=Xa(E,w,C),R.return=E,R):(R=Ou(C.type,C.key,C.props,null,E.mode,R),R.ref=Xa(E,w,C),R.return=E,R)}function d(E,w,C,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Yf(C,E.mode,R),w.return=E,w):(w=s(w,C.children||[]),w.return=E,w)}function h(E,w,C,R,L){return w===null||w.tag!==7?(w=Pi(C,E.mode,R,L),w.return=E,w):(w=s(w,C),w.return=E,w)}function f(E,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qf(""+w,E.mode,C),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gc:return C=Ou(w.type,w.key,w.props,null,E.mode,C),C.ref=Xa(E,null,w),C.return=E,C;case yo:return w=Yf(w,E.mode,C),w.return=E,w;case xs:var R=w._init;return f(E,R(w._payload),C)}if(sl(w)||qa(w))return w=Pi(w,E.mode,C,null),w.return=E,w;su(E,w)}return null}function p(E,w,C,R){var L=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(E,w,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Gc:return C.key===L?c(E,w,C,R):null;case yo:return C.key===L?d(E,w,C,R):null;case xs:return L=C._init,p(E,w,L(C._payload),R)}if(sl(C)||qa(C))return L!==null?null:h(E,w,C,R,null);su(E,C)}return null}function v(E,w,C,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(C)||null,l(w,E,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Gc:return E=E.get(R.key===null?C:R.key)||null,c(w,E,R,L);case yo:return E=E.get(R.key===null?C:R.key)||null,d(w,E,R,L);case xs:var A=R._init;return v(E,w,C,A(R._payload),L)}if(sl(R)||qa(R))return E=E.get(C)||null,h(w,E,R,L,null);su(w,R)}return null}function I(E,w,C,R){for(var L=null,A=null,N=w,y=w=0,T=null;N!==null&&y<C.length;y++){N.index>y?(T=N,N=null):T=N.sibling;var b=p(E,N,C[y],R);if(b===null){N===null&&(N=T);break}t&&N&&b.alternate===null&&e(E,N),w=i(b,w,y),A===null?L=b:A.sibling=b,A=b,N=T}if(y===C.length)return n(E,N),Qe&&Ei(E,y),L;if(N===null){for(;y<C.length;y++)N=f(E,C[y],R),N!==null&&(w=i(N,w,y),A===null?L=N:A.sibling=N,A=N);return Qe&&Ei(E,y),L}for(N=r(E,N);y<C.length;y++)T=v(N,E,y,C[y],R),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?y:T.key),w=i(T,w,y),A===null?L=T:A.sibling=T,A=T);return t&&N.forEach(function(j){return e(E,j)}),Qe&&Ei(E,y),L}function _(E,w,C,R){var L=qa(C);if(typeof L!="function")throw Error(z(150));if(C=L.call(C),C==null)throw Error(z(151));for(var A=L=null,N=w,y=w=0,T=null,b=C.next();N!==null&&!b.done;y++,b=C.next()){N.index>y?(T=N,N=null):T=N.sibling;var j=p(E,N,b.value,R);if(j===null){N===null&&(N=T);break}t&&N&&j.alternate===null&&e(E,N),w=i(j,w,y),A===null?L=j:A.sibling=j,A=j,N=T}if(b.done)return n(E,N),Qe&&Ei(E,y),L;if(N===null){for(;!b.done;y++,b=C.next())b=f(E,b.value,R),b!==null&&(w=i(b,w,y),A===null?L=b:A.sibling=b,A=b);return Qe&&Ei(E,y),L}for(N=r(E,N);!b.done;y++,b=C.next())b=v(N,E,y,b.value,R),b!==null&&(t&&b.alternate!==null&&N.delete(b.key===null?y:b.key),w=i(b,w,y),A===null?L=b:A.sibling=b,A=b);return t&&N.forEach(function(k){return e(E,k)}),Qe&&Ei(E,y),L}function S(E,w,C,R){if(typeof C=="object"&&C!==null&&C.type===vo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Gc:e:{for(var L=C.key,A=w;A!==null;){if(A.key===L){if(L=C.type,L===vo){if(A.tag===7){n(E,A.sibling),w=s(A,C.props.children),w.return=E,E=w;break e}}else if(A.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xs&&xw(L)===A.type){n(E,A.sibling),w=s(A,C.props),w.ref=Xa(E,A,C),w.return=E,E=w;break e}n(E,A);break}else e(E,A);A=A.sibling}C.type===vo?(w=Pi(C.props.children,E.mode,R,C.key),w.return=E,E=w):(R=Ou(C.type,C.key,C.props,null,E.mode,R),R.ref=Xa(E,w,C),R.return=E,E=R)}return a(E);case yo:e:{for(A=C.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(E,w.sibling),w=s(w,C.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Yf(C,E.mode,R),w.return=E,E=w}return a(E);case xs:return A=C._init,S(E,w,A(C._payload),R)}if(sl(C))return I(E,w,C,R);if(qa(C))return _(E,w,C,R);su(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,C),w.return=E,E=w):(n(E,w),w=Qf(C,E.mode,R),w.return=E,E=w),a(E)):n(E,w)}return S}var qo=q1(!0),G1=q1(!1),cd=ii(null),ud=null,So=null,Mg=null;function Vg(){Mg=So=ud=null}function Fg(t){var e=cd.current;Ke(cd),t._currentValue=e}function im(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Po(t,e){ud=t,Mg=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Mg!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(ud===null)throw Error(z(308));So=t,ud.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var Ci=null;function Ug(t){Ci===null?Ci=[t]:Ci.push(t)}function K1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ug(e)):(n.next=s.next,s.next=n),e.interleaved=n,qr(t,r)}function qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ws=!1;function Bg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qr(t,n)}return s=r.interleaved,s===null?(e.next=e,Ug(r)):(e.next=s.next,s.next=e),r.interleaved=e,qr(t,n)}function Au(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sg(t,n)}}function ww(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dd(t,e,n,r){var s=t.updateQueue;ws=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,_=l;switch(p=e,v=n,_.tag){case 1:if(I=_.payload,typeof I=="function"){f=I.call(v,f,p);break e}f=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=_.payload,p=typeof I=="function"?I.call(v,f,p):I,p==null)break e;f=Ze({},f,p);break e;case 2:ws=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=f):h=h.next=v,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ui|=a,t.lanes=a,t.memoizedState=f}}function _w(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var gc={},vr=ii(gc),$l=ii(gc),zl=ii(gc);function Ii(t){if(t===gc)throw Error(z(174));return t}function $g(t,e){switch($e(zl,e),$e($l,t),$e(vr,gc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fp(e,t)}Ke(vr),$e(vr,e)}function Go(){Ke(vr),Ke($l),Ke(zl)}function Y1(t){Ii(zl.current);var e=Ii(vr.current),n=Fp(e,t.type);e!==n&&($e($l,t),$e(vr,n))}function zg(t){$l.current===t&&(Ke(vr),Ke($l))}var Xe=ii(0);function hd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zf=[];function Hg(){for(var t=0;t<zf.length;t++)zf[t]._workInProgressVersionPrimary=null;zf.length=0}var ku=ns.ReactCurrentDispatcher,Hf=ns.ReactCurrentBatchConfig,Fi=0,Je=null,xt=null,Tt=null,fd=!1,xl=!1,Hl=0,pk=0;function Ot(){throw Error(z(321))}function Wg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function qg(t,e,n,r,s,i){if(Fi=i,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ku.current=t===null||t.memoizedState===null?vk:xk,t=n(r,s),xl){i=0;do{if(xl=!1,Hl=0,25<=i)throw Error(z(301));i+=1,Tt=xt=null,e.updateQueue=null,ku.current=wk,t=n(r,s)}while(xl)}if(ku.current=pd,e=xt!==null&&xt.next!==null,Fi=0,Tt=xt=Je=null,fd=!1,e)throw Error(z(300));return t}function Gg(){var t=Hl!==0;return Hl=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Je.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Un(){if(xt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Tt===null?Je.memoizedState:Tt.next;if(e!==null)Tt=e,xt=t;else{if(t===null)throw Error(z(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Tt===null?Je.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Wl(t,e){return typeof e=="function"?e(t):e}function Wf(t){var e=Un(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=xt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Fi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Je.lanes|=h,Ui|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,nr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Je.lanes|=i,Ui|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qf(t){var e=Un(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);nr(i,e.memoizedState)||(fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function X1(){}function J1(t,e){var n=Je,r=Un(),s=e(),i=!nr(r.memoizedState,s);if(i&&(r.memoizedState=s,fn=!0),r=r.queue,Kg(tE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,ql(9,eE.bind(null,n,r,s,e),void 0,null),Ct===null)throw Error(z(349));Fi&30||Z1(n,e,s)}return s}function Z1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eE(t,e,n,r){e.value=n,e.getSnapshot=r,nE(e)&&rE(t)}function tE(t,e,n){return n(function(){nE(e)&&rE(t)})}function nE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function rE(t){var e=qr(t,1);e!==null&&er(e,t,1,-1)}function bw(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:t},e.queue=t,t=t.dispatch=yk.bind(null,Je,t),[e.memoizedState,t]}function ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sE(){return Un().memoizedState}function Ru(t,e,n,r){var s=ur();Je.flags|=t,s.memoizedState=ql(1|e,n,void 0,r===void 0?null:r)}function ah(t,e,n,r){var s=Un();r=r===void 0?null:r;var i=void 0;if(xt!==null){var a=xt.memoizedState;if(i=a.destroy,r!==null&&Wg(r,a.deps)){s.memoizedState=ql(e,n,i,r);return}}Je.flags|=t,s.memoizedState=ql(1|e,n,i,r)}function Ew(t,e){return Ru(8390656,8,t,e)}function Kg(t,e){return ah(2048,8,t,e)}function iE(t,e){return ah(4,2,t,e)}function oE(t,e){return ah(4,4,t,e)}function aE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lE(t,e,n){return n=n!=null?n.concat([t]):null,ah(4,4,aE.bind(null,e,t),n)}function Qg(){}function cE(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uE(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dE(t,e,n){return Fi&21?(nr(n,e)||(n=g1(),Je.lanes|=n,Ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function mk(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=Hf.transition;Hf.transition={};try{t(!1),e()}finally{De=n,Hf.transition=r}}function hE(){return Un().memoizedState}function gk(t,e,n){var r=Fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fE(t))pE(e,n);else if(n=K1(t,e,n,r),n!==null){var s=Zt();er(n,t,r,s),mE(n,e,r)}}function yk(t,e,n){var r=Fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fE(t))pE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,nr(l,a)){var c=e.interleaved;c===null?(s.next=s,Ug(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=K1(t,e,s,r),n!==null&&(s=Zt(),er(n,t,r,s),mE(n,e,r))}}function fE(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function pE(t,e){xl=fd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sg(t,n)}}var pd={readContext:Fn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},vk={readContext:Fn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:Ew,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ru(4194308,4,aE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ru(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ru(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gk.bind(null,Je,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:bw,useDebugValue:Qg,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=bw(!1),e=t[0];return t=mk.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Je,s=ur();if(Qe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ct===null)throw Error(z(349));Fi&30||Z1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ew(tE.bind(null,r,i,t),[t]),r.flags|=2048,ql(9,eE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ur(),e=Ct.identifierPrefix;if(Qe){var n=Vr,r=Mr;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xk={readContext:Fn,useCallback:cE,useContext:Fn,useEffect:Kg,useImperativeHandle:lE,useInsertionEffect:iE,useLayoutEffect:oE,useMemo:uE,useReducer:Wf,useRef:sE,useState:function(){return Wf(Wl)},useDebugValue:Qg,useDeferredValue:function(t){var e=Un();return dE(e,xt.memoizedState,t)},useTransition:function(){var t=Wf(Wl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:X1,useSyncExternalStore:J1,useId:hE,unstable_isNewReconciler:!1},wk={readContext:Fn,useCallback:cE,useContext:Fn,useEffect:Kg,useImperativeHandle:lE,useInsertionEffect:iE,useLayoutEffect:oE,useMemo:uE,useReducer:qf,useRef:sE,useState:function(){return qf(Wl)},useDebugValue:Qg,useDeferredValue:function(t){var e=Un();return xt===null?e.memoizedState=t:dE(e,xt.memoizedState,t)},useTransition:function(){var t=qf(Wl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:X1,useSyncExternalStore:J1,useId:hE,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=Ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function om(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lh={isMounted:function(t){return(t=t._reactInternals)?Zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Fs(t),i=$r(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ms(t,i,s),e!==null&&(er(e,t,s,r),Au(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Fs(t),i=$r(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ms(t,i,s),e!==null&&(er(e,t,s,r),Au(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=Fs(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ms(t,s,r),e!==null&&(er(e,t,r,n),Au(e,t,r))}};function Nw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Vl(n,r)||!Vl(s,i):!0}function gE(t,e,n){var r=!1,s=Ks,i=e.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=mn(e)?Mi:Wt.current,r=e.contextTypes,i=(r=r!=null)?Ho(t,s):Ks),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Tw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lh.enqueueReplaceState(e,e.state,null)}function am(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=mn(e)?Mi:Wt.current,s.context=Ho(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(om(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lh.enqueueReplaceState(s,s.state,null),dd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ko(t,e){try{var n="",r=e;do n+=KA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _k=typeof WeakMap=="function"?WeakMap:Map;function yE(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gd||(gd=!0,vm=r),lm(t,e)},n}function vE(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lm(t,e),typeof r!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Sw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _k;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Lk.bind(null,t,e,n),e.then(t,t))}function Cw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Iw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,Ms(n,e,1))),n.lanes|=1),t)}var bk=ns.ReactCurrentOwner,fn=!1;function Yt(t,e,n,r){e.child=t===null?G1(e,null,n,r):qo(e,t.child,n,r)}function jw(t,e,n,r,s){n=n.render;var i=e.ref;return Po(e,s),r=qg(t,e,n,r,i,s),n=Gg(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Qe&&n&&Dg(e),e.flags|=1,Yt(t,e,r,s),e.child)}function Aw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ry(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,xE(t,e,i,r,s)):(t=Ou(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vl,n(a,r)&&t.ref===e.ref)return Gr(t,e,s)}return e.flags|=1,t=Us(i,r),t.ref=e.ref,t.return=e,e.child=t}function xE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vl(i,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,Gr(t,e,s)}return cm(t,e,n,r,s)}function wE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Io,wn),wn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Io,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(Io,wn),wn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(Io,wn),wn|=r;return Yt(t,e,s,n),e.child}function _E(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cm(t,e,n,r,s){var i=mn(n)?Mi:Wt.current;return i=Ho(e,i),Po(e,s),n=qg(t,e,n,r,i,s),r=Gg(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Qe&&r&&Dg(e),e.flags|=1,Yt(t,e,n,s),e.child)}function kw(t,e,n,r,s){if(mn(n)){var i=!0;od(e)}else i=!1;if(Po(e,s),e.stateNode===null)Pu(t,e),gE(e,n,r),am(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Fn(d):(d=mn(n)?Mi:Wt.current,d=Ho(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Tw(e,a,r,d),ws=!1;var p=e.memoizedState;a.state=p,dd(e,r,a,s),c=e.memoizedState,l!==r||p!==c||pn.current||ws?(typeof h=="function"&&(om(e,n,h,r),c=e.memoizedState),(l=ws||Nw(e,n,l,r,p,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Q1(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Kn(e.type,l),a.props=d,f=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Fn(c):(c=mn(n)?Mi:Wt.current,c=Ho(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Tw(e,a,r,c),ws=!1,p=e.memoizedState,a.state=p,dd(e,r,a,s);var I=e.memoizedState;l!==f||p!==I||pn.current||ws?(typeof v=="function"&&(om(e,n,v,r),I=e.memoizedState),(d=ws||Nw(e,n,d,r,p,I,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,I,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,I,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),a.props=r,a.state=I,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return um(t,e,n,r,i,s)}function um(t,e,n,r,s,i){_E(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&gw(e,n,!1),Gr(t,e,i);r=e.stateNode,bk.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=qo(e,t.child,null,i),e.child=qo(e,null,l,i)):Yt(t,e,l,i),e.memoizedState=r.state,s&&gw(e,n,!0),e.child}function bE(t){var e=t.stateNode;e.pendingContext?mw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&mw(t,e.context,!1),$g(t,e.containerInfo)}function Rw(t,e,n,r,s){return Wo(),Og(s),e.flags|=256,Yt(t,e,n,r),e.child}var dm={dehydrated:null,treeContext:null,retryLane:0};function hm(t){return{baseLanes:t,cachePool:null,transitions:null}}function EE(t,e,n){var r=e.pendingProps,s=Xe.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Xe,s&1),t===null)return sm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=dh(a,r,0,null),t=Pi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hm(n),e.memoizedState=dm,t):Yg(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ek(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Us(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Us(l,i):(i=Pi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?hm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=dm,r}return i=t.child,t=i.sibling,r=Us(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yg(t,e){return e=dh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function iu(t,e,n,r){return r!==null&&Og(r),qo(e,t.child,null,n),t=Yg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ek(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Gf(Error(z(422))),iu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=dh({mode:"visible",children:r.children},s,0,null),i=Pi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qo(e,t.child,null,a),e.child.memoizedState=hm(a),e.memoizedState=dm,i);if(!(e.mode&1))return iu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Gf(i,r,void 0),iu(t,e,a,r)}if(l=(a&t.childLanes)!==0,fn||l){if(r=Ct,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qr(t,s),er(r,t,s,-1))}return ny(),r=Gf(Error(z(421))),iu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ok.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bn=Os(s.nextSibling),Tn=e,Qe=!0,Yn=null,t!==null&&(Rn[Pn++]=Mr,Rn[Pn++]=Vr,Rn[Pn++]=Vi,Mr=t.id,Vr=t.overflow,Vi=e),e=Yg(e,r.children),e.flags|=4096,e)}function Pw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),im(t.return,e,n)}function Kf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function NE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=Xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pw(t,n,e);else if(t.tag===19)Pw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Kf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Kf(e,!0,n,null,i);break;case"together":Kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nk(t,e,n){switch(e.tag){case 3:bE(e),Wo();break;case 5:Y1(e);break;case 1:mn(e.type)&&od(e);break;case 4:$g(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(cd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?EE(t,e,n):($e(Xe,Xe.current&1),t=Gr(t,e,n),t!==null?t.sibling:null);$e(Xe,Xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return NE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Xe,Xe.current),r)break;return null;case 22:case 23:return e.lanes=0,wE(t,e,n)}return Gr(t,e,n)}var TE,fm,SE,CE;TE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fm=function(){};SE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ii(vr.current);var i=null;switch(n){case"input":s=Lp(t,s),r=Lp(t,r),i=[];break;case"select":s=Ze({},s,{value:void 0}),r=Ze({},r,{value:void 0}),i=[];break;case"textarea":s=Vp(t,s),r=Vp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sd)}Up(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(kl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(kl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&We("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};CE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ja(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Tk(t,e,n){var r=e.pendingProps;switch(Lg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return mn(e.type)&&id(),Mt(e),null;case 3:return r=e.stateNode,Go(),Ke(pn),Ke(Wt),Hg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ru(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(_m(Yn),Yn=null))),fm(t,e),Mt(e),null;case 5:zg(e);var s=Ii(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)SE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Mt(e),null}if(t=Ii(vr.current),ru(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fr]=e,r[Bl]=i,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(s=0;s<ol.length;s++)We(ol[s],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":$x(r,i),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},We("invalid",r);break;case"textarea":Hx(r,i),We("invalid",r)}Up(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&nu(r.textContent,l,t),s=["children",""+l]):kl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&We("scroll",r)}switch(n){case"input":Kc(r),zx(r,i,!0);break;case"textarea":Kc(r),Wx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=sd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=t1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[fr]=e,t[Bl]=r,TE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bp(n,r),n){case"dialog":We("cancel",t),We("close",t),s=r;break;case"iframe":case"object":case"embed":We("load",t),s=r;break;case"video":case"audio":for(s=0;s<ol.length;s++)We(ol[s],t);s=r;break;case"source":We("error",t),s=r;break;case"img":case"image":case"link":We("error",t),We("load",t),s=r;break;case"details":We("toggle",t),s=r;break;case"input":$x(t,r),s=Lp(t,r),We("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ze({},r,{value:void 0}),We("invalid",t);break;case"textarea":Hx(t,r),s=Vp(t,r),We("invalid",t);break;default:s=r}Up(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?s1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&n1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rl(t,c):typeof c=="number"&&Rl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&We("scroll",t):c!=null&&wg(t,i,c,a))}switch(n){case"input":Kc(t),zx(t,r,!1);break;case"textarea":Kc(t),Wx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?jo(t,!!r.multiple,i,!1):r.defaultValue!=null&&jo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=sd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)CE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ii(zl.current),Ii(vr.current),ru(e)){if(r=e.stateNode,n=e.memoizedProps,r[fr]=e,(i=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:nu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ke(Xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&bn!==null&&e.mode&1&&!(e.flags&128))W1(),Wo(),e.flags|=98560,i=!1;else if(i=ru(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[fr]=e}else Wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Yn!==null&&(_m(Yn),Yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?wt===0&&(wt=3):ny())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Go(),fm(t,e),t===null&&Fl(e.stateNode.containerInfo),Mt(e),null;case 10:return Fg(e.type._context),Mt(e),null;case 17:return mn(e.type)&&id(),Mt(e),null;case 19:if(Ke(Xe),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ja(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=hd(t),a!==null){for(e.flags|=128,Ja(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Xe,Xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>Qo&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304)}else{if(!r)if(t=hd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ja(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Qe)return Mt(e),null}else 2*ct()-i.renderingStartTime>Qo&&n!==1073741824&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,n=Xe.current,$e(Xe,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return ty(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function Sk(t,e){switch(Lg(e),e.tag){case 1:return mn(e.type)&&id(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Go(),Ke(pn),Ke(Wt),Hg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zg(e),null;case 13:if(Ke(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ke(Xe),null;case 4:return Go(),null;case 10:return Fg(e.type._context),null;case 22:case 23:return ty(),null;case 24:return null;default:return null}}var ou=!1,Ut=!1,Ck=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function pm(t,e,n){try{n()}catch(r){rt(t,e,r)}}var Dw=!1;function Ik(t,e){if(Xp=td,t=R1(),Pg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++d===s&&(l=a),p===i&&++h===r&&(c=a),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jp={focusedElem:t,selectionRange:n},td=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var _=I.memoizedProps,S=I.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?_:Kn(e.type,_),S);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){rt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return I=Dw,Dw=!1,I}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pm(e,n,i)}s=s.next}while(s!==r)}}function ch(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IE(t){var e=t.alternate;e!==null&&(t.alternate=null,IE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fr],delete e[Bl],delete e[tm],delete e[uk],delete e[dk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jE(t){return t.tag===5||t.tag===3||t.tag===4}function Lw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sd));else if(r!==4&&(t=t.child,t!==null))for(gm(t,e,n),t=t.sibling;t!==null;)gm(t,e,n),t=t.sibling}function ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ym(t,e,n),t=t.sibling;t!==null;)ym(t,e,n),t=t.sibling}var jt=null,Qn=!1;function hs(t,e,n){for(n=n.child;n!==null;)AE(t,e,n),n=n.sibling}function AE(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(th,n)}catch{}switch(n.tag){case 5:Ut||Co(n,e);case 6:var r=jt,s=Qn;jt=null,hs(t,e,n),jt=r,Qn=s,jt!==null&&(Qn?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Qn?(t=jt,n=n.stateNode,t.nodeType===8?Bf(t.parentNode,n):t.nodeType===1&&Bf(t,n),Ol(t)):Bf(jt,n.stateNode));break;case 4:r=jt,s=Qn,jt=n.stateNode.containerInfo,Qn=!0,hs(t,e,n),jt=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&pm(n,e,a),s=s.next}while(s!==r)}hs(t,e,n);break;case 1:if(!Ut&&(Co(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){rt(n,e,l)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,hs(t,e,n),Ut=r):hs(t,e,n);break;default:hs(t,e,n)}}function Ow(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ck),e.forEach(function(r){var s=Mk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,Qn=!1;break e;case 3:jt=l.stateNode.containerInfo,Qn=!0;break e;case 4:jt=l.stateNode.containerInfo,Qn=!0;break e}l=l.return}if(jt===null)throw Error(z(160));AE(i,a,s),jt=null,Qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){rt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kE(e,t),e=e.sibling}function kE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),cr(t),r&4){try{wl(3,t,t.return),ch(3,t)}catch(_){rt(t,t.return,_)}try{wl(5,t,t.return)}catch(_){rt(t,t.return,_)}}break;case 1:qn(e,t),cr(t),r&512&&n!==null&&Co(n,n.return);break;case 5:if(qn(e,t),cr(t),r&512&&n!==null&&Co(n,n.return),t.flags&32){var s=t.stateNode;try{Rl(s,"")}catch(_){rt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Zb(s,i),Bp(l,a);var d=Bp(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?s1(s,f):h==="dangerouslySetInnerHTML"?n1(s,f):h==="children"?Rl(s,f):wg(s,h,f,d)}switch(l){case"input":Op(s,i);break;case"textarea":e1(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?jo(s,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?jo(s,!!i.multiple,i.defaultValue,!0):jo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bl]=i}catch(_){rt(t,t.return,_)}}break;case 6:if(qn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){rt(t,t.return,_)}}break;case 3:if(qn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(_){rt(t,t.return,_)}break;case 4:qn(e,t),cr(t);break;case 13:qn(e,t),cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zg=ct())),r&4&&Ow(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||h,qn(e,t),Ut=d):qn(e,t),cr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(f=ee=h;ee!==null;){switch(p=ee,v=p.child,p.tag){case 0:case 11:case 14:case 15:wl(4,p,p.return);break;case 1:Co(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(_){rt(r,n,_)}}break;case 5:Co(p,p.return);break;case 22:if(p.memoizedState!==null){Vw(f);continue}}v!==null?(v.return=p,ee=v):Vw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=r1("display",a))}catch(_){rt(t,t.return,_)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(_){rt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),cr(t),r&4&&Ow(t);break;case 21:break;default:qn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rl(s,""),r.flags&=-33);var i=Lw(t);ym(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Lw(t);gm(t,l,a);break;default:throw Error(z(161))}}catch(c){rt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jk(t,e,n){ee=t,RE(t)}function RE(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ou;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=ou;var d=Ut;if(ou=a,(Ut=c)&&!d)for(ee=s;ee!==null;)a=ee,c=a.child,a.tag===22&&a.memoizedState!==null?Fw(s):c!==null?(c.return=a,ee=c):Fw(s);for(;i!==null;)ee=i,RE(i),i=i.sibling;ee=s,ou=l,Ut=d}Mw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):Mw(t)}}function Mw(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||ch(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&_w(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_w(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ol(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ut||e.flags&512&&mm(e)}catch(p){rt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Vw(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Fw(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ch(4,e)}catch(c){rt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){rt(e,s,c)}}var i=e.return;try{mm(e)}catch(c){rt(e,i,c)}break;case 5:var a=e.return;try{mm(e)}catch(c){rt(e,a,c)}}}catch(c){rt(e,e.return,c)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var Ak=Math.ceil,md=ns.ReactCurrentDispatcher,Xg=ns.ReactCurrentOwner,On=ns.ReactCurrentBatchConfig,Ie=0,Ct=null,mt=null,Pt=0,wn=0,Io=ii(0),wt=0,Gl=null,Ui=0,uh=0,Jg=0,_l=null,ln=null,Zg=0,Qo=1/0,Dr=null,gd=!1,vm=null,Vs=null,au=!1,js=null,yd=0,bl=0,xm=null,Du=-1,Lu=0;function Zt(){return Ie&6?ct():Du!==-1?Du:Du=ct()}function Fs(t){return t.mode&1?Ie&2&&Pt!==0?Pt&-Pt:fk.transition!==null?(Lu===0&&(Lu=g1()),Lu):(t=De,t!==0||(t=window.event,t=t===void 0?16:E1(t.type)),t):1}function er(t,e,n,r){if(50<bl)throw bl=0,xm=null,Error(z(185));fc(t,n,r),(!(Ie&2)||t!==Ct)&&(t===Ct&&(!(Ie&2)&&(uh|=n),wt===4&&bs(t,Pt)),gn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(Qo=ct()+500,oh&&oi()))}function gn(t,e){var n=t.callbackNode;f2(t,e);var r=ed(t,t===Ct?Pt:0);if(r===0)n!==null&&Kx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kx(n),e===1)t.tag===0?hk(Uw.bind(null,t)):$1(Uw.bind(null,t)),lk(function(){!(Ie&6)&&oi()}),n=null;else{switch(y1(r)){case 1:n=Tg;break;case 4:n=p1;break;case 16:n=Zu;break;case 536870912:n=m1;break;default:n=Zu}n=UE(n,PE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PE(t,e){if(Du=-1,Lu=0,Ie&6)throw Error(z(327));var n=t.callbackNode;if(Do()&&t.callbackNode!==n)return null;var r=ed(t,t===Ct?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vd(t,r);else{e=r;var s=Ie;Ie|=2;var i=LE();(Ct!==t||Pt!==e)&&(Dr=null,Qo=ct()+500,Ri(t,e));do try{Pk();break}catch(l){DE(t,l)}while(!0);Vg(),md.current=i,Ie=s,mt!==null?e=0:(Ct=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=qp(t),s!==0&&(r=s,e=wm(t,s))),e===1)throw n=Gl,Ri(t,0),bs(t,r),gn(t,ct()),n;if(e===6)bs(t,r);else{if(s=t.current.alternate,!(r&30)&&!kk(s)&&(e=vd(t,r),e===2&&(i=qp(t),i!==0&&(r=i,e=wm(t,i))),e===1))throw n=Gl,Ri(t,0),bs(t,r),gn(t,ct()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Ni(t,ln,Dr);break;case 3:if(bs(t,r),(r&130023424)===r&&(e=Zg+500-ct(),10<e)){if(ed(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=em(Ni.bind(null,t,ln,Dr),e);break}Ni(t,ln,Dr);break;case 4:if(bs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Zn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ak(r/1960))-r,10<r){t.timeoutHandle=em(Ni.bind(null,t,ln,Dr),r);break}Ni(t,ln,Dr);break;case 5:Ni(t,ln,Dr);break;default:throw Error(z(329))}}}return gn(t,ct()),t.callbackNode===n?PE.bind(null,t):null}function wm(t,e){var n=_l;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=vd(t,e),t!==2&&(e=ln,ln=n,e!==null&&_m(e)),t}function _m(t){ln===null?ln=t:ln.push.apply(ln,t)}function kk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~Jg,e&=~uh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function Uw(t){if(Ie&6)throw Error(z(327));Do();var e=ed(t,0);if(!(e&1))return gn(t,ct()),null;var n=vd(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=wm(t,r))}if(n===1)throw n=Gl,Ri(t,0),bs(t,e),gn(t,ct()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,ln,Dr),gn(t,ct()),null}function ey(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(Qo=ct()+500,oh&&oi())}}function Bi(t){js!==null&&js.tag===0&&!(Ie&6)&&Do();var e=Ie;Ie|=1;var n=On.transition,r=De;try{if(On.transition=null,De=1,t)return t()}finally{De=r,On.transition=n,Ie=e,!(Ie&6)&&oi()}}function ty(){wn=Io.current,Ke(Io)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ak(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(Lg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&id();break;case 3:Go(),Ke(pn),Ke(Wt),Hg();break;case 5:zg(r);break;case 4:Go();break;case 13:Ke(Xe);break;case 19:Ke(Xe);break;case 10:Fg(r.type._context);break;case 22:case 23:ty()}n=n.return}if(Ct=t,mt=t=Us(t.current,null),Pt=wn=e,wt=0,Gl=null,Jg=uh=Ui=0,ln=_l=null,Ci!==null){for(e=0;e<Ci.length;e++)if(n=Ci[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ci=null}return t}function DE(t,e){do{var n=mt;try{if(Vg(),ku.current=pd,fd){for(var r=Je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}fd=!1}if(Fi=0,Tt=xt=Je=null,xl=!1,Hl=0,Xg.current=null,n===null||n.return===null){wt=1,Gl=e,mt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Cw(a);if(v!==null){v.flags&=-257,Iw(v,a,l,i,e),v.mode&1&&Sw(i,d,e),e=v,c=d;var I=e.updateQueue;if(I===null){var _=new Set;_.add(c),e.updateQueue=_}else I.add(c);break e}else{if(!(e&1)){Sw(i,d,e),ny();break e}c=Error(z(426))}}else if(Qe&&l.mode&1){var S=Cw(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Iw(S,a,l,i,e),Og(Ko(c,l));break e}}i=c=Ko(c,l),wt!==4&&(wt=2),_l===null?_l=[i]:_l.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=yE(i,c,e);ww(i,E);break e;case 1:l=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Vs===null||!Vs.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=vE(i,l,e);ww(i,R);break e}}i=i.return}while(i!==null)}ME(n)}catch(L){e=L,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function LE(){var t=md.current;return md.current=pd,t===null?pd:t}function ny(){(wt===0||wt===3||wt===2)&&(wt=4),Ct===null||!(Ui&268435455)&&!(uh&268435455)||bs(Ct,Pt)}function vd(t,e){var n=Ie;Ie|=2;var r=LE();(Ct!==t||Pt!==e)&&(Dr=null,Ri(t,e));do try{Rk();break}catch(s){DE(t,s)}while(!0);if(Vg(),Ie=n,md.current=r,mt!==null)throw Error(z(261));return Ct=null,Pt=0,wt}function Rk(){for(;mt!==null;)OE(mt)}function Pk(){for(;mt!==null&&!s2();)OE(mt)}function OE(t){var e=FE(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?ME(t):mt=e,Xg.current=null}function ME(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Sk(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,mt=null;return}}else if(n=Tk(n,e,wn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);wt===0&&(wt=5)}function Ni(t,e,n){var r=De,s=On.transition;try{On.transition=null,De=1,Dk(t,e,n,r)}finally{On.transition=s,De=r}return null}function Dk(t,e,n,r){do Do();while(js!==null);if(Ie&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(p2(t,i),t===Ct&&(mt=Ct=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||au||(au=!0,UE(Zu,function(){return Do(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var a=De;De=1;var l=Ie;Ie|=4,Xg.current=null,Ik(t,n),kE(n,t),ek(Jp),td=!!Xp,Jp=Xp=null,t.current=n,jk(n),i2(),Ie=l,De=a,On.transition=i}else t.current=n;if(au&&(au=!1,js=t,yd=s),i=t.pendingLanes,i===0&&(Vs=null),l2(n.stateNode),gn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(gd)throw gd=!1,t=vm,vm=null,t;return yd&1&&t.tag!==0&&Do(),i=t.pendingLanes,i&1?t===xm?bl++:(bl=0,xm=t):bl=0,oi(),null}function Do(){if(js!==null){var t=y1(yd),e=On.transition,n=De;try{if(On.transition=null,De=16>t?16:t,js===null)var r=!1;else{if(t=js,js=null,yd=0,Ie&6)throw Error(z(331));var s=Ie;for(Ie|=4,ee=t.current;ee!==null;){var i=ee,a=i.child;if(ee.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ee=d;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:wl(8,h,i)}var f=h.child;if(f!==null)f.return=h,ee=f;else for(;ee!==null;){h=ee;var p=h.sibling,v=h.return;if(IE(h),h===d){ee=null;break}if(p!==null){p.return=v,ee=p;break}ee=v}}}var I=i.alternate;if(I!==null){var _=I.child;if(_!==null){I.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}ee=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ee=a;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ee=E;break e}ee=i.return}}var w=t.current;for(ee=w;ee!==null;){a=ee;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,ee=C;else e:for(a=w;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ch(9,l)}}catch(L){rt(l,l.return,L)}if(l===a){ee=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ee=R;break e}ee=l.return}}if(Ie=s,oi(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(th,t)}catch{}r=!0}return r}finally{De=n,On.transition=e}}return!1}function Bw(t,e,n){e=Ko(n,e),e=yE(t,e,1),t=Ms(t,e,1),e=Zt(),t!==null&&(fc(t,1,e),gn(t,e))}function rt(t,e,n){if(t.tag===3)Bw(t,t,n);else for(;e!==null;){if(e.tag===3){Bw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vs===null||!Vs.has(r))){t=Ko(n,t),t=vE(e,t,1),e=Ms(e,t,1),t=Zt(),e!==null&&(fc(e,1,t),gn(e,t));break}}e=e.return}}function Lk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>ct()-Zg?Ri(t,0):Jg|=n),gn(t,e)}function VE(t,e){e===0&&(t.mode&1?(e=Xc,Xc<<=1,!(Xc&130023424)&&(Xc=4194304)):e=1);var n=Zt();t=qr(t,e),t!==null&&(fc(t,e,n),gn(t,n))}function Ok(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VE(t,n)}function Mk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),VE(t,n)}var FE;FE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,Nk(t,e,n);fn=!!(t.flags&131072)}else fn=!1,Qe&&e.flags&1048576&&z1(e,ld,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pu(t,e),t=e.pendingProps;var s=Ho(e,Wt.current);Po(e,n),s=qg(null,e,r,t,s,n);var i=Gg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,od(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bg(e),s.updater=lh,e.stateNode=s,s._reactInternals=e,am(e,r,t,n),e=um(null,e,r,!0,i,n)):(e.tag=0,Qe&&i&&Dg(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Fk(r),t=Kn(r,t),s){case 0:e=cm(null,e,r,t,n);break e;case 1:e=kw(null,e,r,t,n);break e;case 11:e=jw(null,e,r,t,n);break e;case 14:e=Aw(null,e,r,Kn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),cm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),kw(t,e,r,s,n);case 3:e:{if(bE(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Q1(t,e),dd(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ko(Error(z(423)),e),e=Rw(t,e,r,n,s);break e}else if(r!==s){s=Ko(Error(z(424)),e),e=Rw(t,e,r,n,s);break e}else for(bn=Os(e.stateNode.containerInfo.firstChild),Tn=e,Qe=!0,Yn=null,n=G1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wo(),r===s){e=Gr(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return Y1(e),t===null&&sm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Zp(r,s)?a=null:i!==null&&Zp(r,i)&&(e.flags|=32),_E(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&sm(e),null;case 13:return EE(t,e,n);case 4:return $g(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qo(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),jw(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,$e(cd,r._currentValue),r._currentValue=a,i!==null)if(nr(i.value,a)){if(i.children===s.children&&!pn.current){e=Gr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$r(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),im(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),im(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Po(e,n),s=Fn(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),Aw(t,e,r,s,n);case 15:return xE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Pu(t,e),e.tag=1,mn(r)?(t=!0,od(e)):t=!1,Po(e,n),gE(e,r,s),am(e,r,s,n),um(null,e,r,!0,t,n);case 19:return NE(t,e,n);case 22:return wE(t,e,n)}throw Error(z(156,e.tag))};function UE(t,e){return f1(t,e)}function Vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new Vk(t,e,n,r)}function ry(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fk(t){if(typeof t=="function")return ry(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bg)return 11;if(t===Eg)return 14}return 2}function Us(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ou(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")ry(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case vo:return Pi(n.children,s,i,e);case _g:a=8,s|=8;break;case kp:return t=Ln(12,n,e,s|2),t.elementType=kp,t.lanes=i,t;case Rp:return t=Ln(13,n,e,s),t.elementType=Rp,t.lanes=i,t;case Pp:return t=Ln(19,n,e,s),t.elementType=Pp,t.lanes=i,t;case Yb:return dh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kb:a=10;break e;case Qb:a=9;break e;case bg:a=11;break e;case Eg:a=14;break e;case xs:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Ln(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Pi(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function dh(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=Yb,t.lanes=n,t.stateNode={isHidden:!1},t}function Qf(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function Yf(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Af(0),this.expirationTimes=Af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Af(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sy(t,e,n,r,s,i,a,l,c){return t=new Uk(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bg(i),t}function Bk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function BE(t){if(!t)return Ks;t=t._reactInternals;e:{if(Zi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(mn(n))return B1(t,n,e)}return e}function $E(t,e,n,r,s,i,a,l,c){return t=sy(n,r,!0,t,s,i,a,l,c),t.context=BE(null),n=t.current,r=Zt(),s=Fs(n),i=$r(r,s),i.callback=e??null,Ms(n,i,s),t.current.lanes=s,fc(t,s,r),gn(t,r),t}function hh(t,e,n,r){var s=e.current,i=Zt(),a=Fs(s);return n=BE(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ms(s,e,a),t!==null&&(er(t,s,a,i),Au(t,s,a)),a}function xd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $w(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function iy(t,e){$w(t,e),(t=t.alternate)&&$w(t,e)}function $k(){return null}var zE=typeof reportError=="function"?reportError:function(t){console.error(t)};function oy(t){this._internalRoot=t}fh.prototype.render=oy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));hh(t,e,null,null)};fh.prototype.unmount=oy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bi(function(){hh(null,t,null,null)}),e[Wr]=null}};function fh(t){this._internalRoot=t}fh.prototype.unstable_scheduleHydration=function(t){if(t){var e=w1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&b1(t)}};function ay(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zw(){}function zk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=xd(a);i.call(d)}}var a=$E(e,r,t,0,null,!1,!1,"",zw);return t._reactRootContainer=a,t[Wr]=a.current,Fl(t.nodeType===8?t.parentNode:t),Bi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=xd(c);l.call(d)}}var c=sy(t,0,!1,null,null,!1,!1,"",zw);return t._reactRootContainer=c,t[Wr]=c.current,Fl(t.nodeType===8?t.parentNode:t),Bi(function(){hh(e,c,n,r)}),c}function mh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=xd(a);l.call(c)}}hh(e,a,t,s)}else a=zk(n,e,t,s,r);return xd(a)}v1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(Sg(e,n|1),gn(e,ct()),!(Ie&6)&&(Qo=ct()+500,oi()))}break;case 13:Bi(function(){var r=qr(t,1);if(r!==null){var s=Zt();er(r,t,1,s)}}),iy(t,1)}};Cg=function(t){if(t.tag===13){var e=qr(t,134217728);if(e!==null){var n=Zt();er(e,t,134217728,n)}iy(t,134217728)}};x1=function(t){if(t.tag===13){var e=Fs(t),n=qr(t,e);if(n!==null){var r=Zt();er(n,t,e,r)}iy(t,e)}};w1=function(){return De};_1=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};zp=function(t,e,n){switch(e){case"input":if(Op(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ih(r);if(!s)throw Error(z(90));Jb(r),Op(r,s)}}}break;case"textarea":e1(t,n);break;case"select":e=n.value,e!=null&&jo(t,!!n.multiple,e,!1)}};a1=ey;l1=Bi;var Hk={usingClientEntryPoint:!1,Events:[mc,bo,ih,i1,o1,ey]},Za={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wk={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d1(t),t===null?null:t.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||$k,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{th=lu.inject(Wk),yr=lu}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hk;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ay(e))throw Error(z(200));return Bk(t,e,null,n)};An.createRoot=function(t,e){if(!ay(t))throw Error(z(299));var n=!1,r="",s=zE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sy(t,1,!1,null,null,n,!1,r,s),t[Wr]=e.current,Fl(t.nodeType===8?t.parentNode:t),new oy(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=d1(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return Bi(t)};An.hydrate=function(t,e,n){if(!ph(e))throw Error(z(200));return mh(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!ay(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=zE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=$E(e,null,t,1,n??null,s,!1,i,a),t[Wr]=e.current,Fl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new fh(e)};An.render=function(t,e,n){if(!ph(e))throw Error(z(200));return mh(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!ph(t))throw Error(z(40));return t._reactRootContainer?(Bi(function(){mh(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};An.unstable_batchedUpdates=ey;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ph(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return mh(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function HE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HE)}catch(t){console.error(t)}}HE(),Hb.exports=An;var pa=Hb.exports;const qk=Rb(pa);var WE,Hw=pa;WE=Hw.createRoot,Hw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kl.apply(this,arguments)}var As;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(As||(As={}));const Ww="popstate";function Gk(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:l="",hash:c=""}=eo(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),bm("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:wd(i))}function r(s,i){gh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Qk(e,n,r,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kk(){return Math.random().toString(36).substr(2,8)}function qw(t,e){return{usr:t.state,key:t.key,idx:e}}function bm(t,e,n,r){return n===void 0&&(n=null),Kl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:n,key:e&&e.key||r||Kk()})}function wd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Qk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=As.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Kl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=As.Pop;let S=h(),E=S==null?null:S-d;d=S,c&&c({action:l,location:_.location,delta:E})}function p(S,E){l=As.Push;let w=bm(_.location,S,E);n&&n(w,S),d=h()+1;let C=qw(w,d),R=_.createHref(w);try{a.pushState(C,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&c&&c({action:l,location:_.location,delta:1})}function v(S,E){l=As.Replace;let w=bm(_.location,S,E);n&&n(w,S),d=h();let C=qw(w,d),R=_.createHref(w);a.replaceState(C,"",R),i&&c&&c({action:l,location:_.location,delta:0})}function I(S){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof S=="string"?S:wd(S);return w=w.replace(/ $/,"%20"),ut(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let _={get action(){return l},get location(){return t(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ww,f),c=S,()=>{s.removeEventListener(Ww,f),c=null}},createHref(S){return e(s,S)},createURL:I,encodeLocation(S){let E=I(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:v,go(S){return a.go(S)}};return _}var Gw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Gw||(Gw={}));function Yk(t,e,n){return n===void 0&&(n="/"),Xk(t,e,n)}function Xk(t,e,n,r){let s=typeof e=="string"?eo(e):e,i=ly(s.pathname||"/",n);if(i==null)return null;let a=qE(t);Jk(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=uR(i);l=aR(a[c],d)}return l}function qE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ut(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Bs([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(ut(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qE(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:iR(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of GE(i.path))s(i,a,c)}),e}function GE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=GE(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Jk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zk=/^:[\w-]+$/,eR=3,tR=2,nR=1,rR=10,sR=-2,Kw=t=>t==="*";function iR(t,e){let n=t.split("/"),r=n.length;return n.some(Kw)&&(r+=sR),e&&(r+=tR),n.filter(s=>!Kw(s)).reduce((s,i)=>s+(Zk.test(i)?eR:i===""?nR:rR),r)}function oR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function aR(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=lR({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Bs([i,f.pathname]),pathnameBase:mR(Bs([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Bs([i,f.pathnameBase]))}return a}function lR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let _=l[f]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const I=l[f];return v&&!I?d[p]=void 0:d[p]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function cR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function uR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ly(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const dR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hR=t=>dR.test(t);function fR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?eo(t):t,i;if(n)if(hR(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),gh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=Qw(n.substring(1),"/"):i=Qw(n,e)}else i=e;return{pathname:i,search:gR(r),hash:yR(s)}}function Qw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cy(t,e){let n=pR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function uy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=eo(t):(s=Kl({},t),ut(!s.pathname||!s.pathname.includes("?"),Xf("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),Xf("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),Xf("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=fR(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Bs=t=>t.join("/").replace(/\/\/+/g,"/"),mR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const KE=["post","put","patch","delete"];new Set(KE);const xR=["get",...KE];new Set(xR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ql.apply(this,arguments)}const dy=g.createContext(null),wR=g.createContext(null),ai=g.createContext(null),yh=g.createContext(null),rs=g.createContext({outlet:null,matches:[],isDataRoute:!1}),QE=g.createContext(null);function _R(t,e){let{relative:n}=e===void 0?{}:e;ma()||ut(!1);let{basename:r,navigator:s}=g.useContext(ai),{hash:i,pathname:a,search:l}=XE(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Bs([r,a])),s.createHref({pathname:c,search:l,hash:i})}function ma(){return g.useContext(yh)!=null}function to(){return ma()||ut(!1),g.useContext(yh).location}function YE(t){g.useContext(ai).static||g.useLayoutEffect(t)}function zn(){let{isDataRoute:t}=g.useContext(rs);return t?LR():bR()}function bR(){ma()||ut(!1);let t=g.useContext(dy),{basename:e,future:n,navigator:r}=g.useContext(ai),{matches:s}=g.useContext(rs),{pathname:i}=to(),a=JSON.stringify(cy(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return YE(()=>{l.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=uy(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Bs([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}function ER(){let{matches:t}=g.useContext(rs),e=t[t.length-1];return e?e.params:{}}function XE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(ai),{matches:s}=g.useContext(rs),{pathname:i}=to(),a=JSON.stringify(cy(s,r.v7_relativeSplatPath));return g.useMemo(()=>uy(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function NR(t,e){return TR(t,e)}function TR(t,e,n,r){ma()||ut(!1);let{navigator:s}=g.useContext(ai),{matches:i}=g.useContext(rs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=to(),h;if(e){var f;let S=typeof e=="string"?eo(e):e;c==="/"||(f=S.pathname)!=null&&f.startsWith(c)||ut(!1),h=S}else h=d;let p=h.pathname||"/",v=p;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let I=Yk(t,{pathname:v}),_=AR(I&&I.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Bs([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Bs([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&_?g.createElement(yh.Provider,{value:{location:Ql({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:As.Pop}},_):_}function SR(){let t=DR(),e=vR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const CR=g.createElement(SR,null);class IR extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(rs.Provider,{value:this.props.routeContext},g.createElement(QE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jR(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(dy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(rs.Provider,{value:e},r)}function AR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||ut(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:v}=n,I=f.route.loader&&p[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||I){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let v,I=!1,_=null,S=null;n&&(v=l&&f.route.id?l[f.route.id]:void 0,_=f.route.errorElement||CR,c&&(d<0&&p===0?(OR("route-fallback"),I=!0,S=null):d===p&&(I=!0,S=f.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,p+1)),w=()=>{let C;return v?C=_:I?C=S:f.route.Component?C=g.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,g.createElement(jR,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(IR,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var JE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(JE||{}),ZE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ZE||{});function kR(t){let e=g.useContext(dy);return e||ut(!1),e}function RR(t){let e=g.useContext(wR);return e||ut(!1),e}function PR(t){let e=g.useContext(rs);return e||ut(!1),e}function eN(t){let e=PR(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function DR(){var t;let e=g.useContext(QE),n=RR(),r=eN();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function LR(){let{router:t}=kR(JE.UseNavigateStable),e=eN(ZE.UseNavigateStable),n=g.useRef(!1);return YE(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ql({fromRouteId:e},i)))},[t,e])}const Yw={};function OR(t,e,n){Yw[t]||(Yw[t]=!0)}function MR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hy(t){let{to:e,replace:n,state:r,relative:s}=t;ma()||ut(!1);let{future:i,static:a}=g.useContext(ai),{matches:l}=g.useContext(rs),{pathname:c}=to(),d=zn(),h=uy(e,cy(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function on(t){ut(!1)}function VR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=As.Pop,navigator:i,static:a=!1,future:l}=t;ma()&&ut(!1);let c=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:a,future:Ql({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=eo(r));let{pathname:h="/",search:f="",hash:p="",state:v=null,key:I="default"}=r,_=g.useMemo(()=>{let S=ly(h,c);return S==null?null:{location:{pathname:S,search:f,hash:p,state:v,key:I},navigationType:s}},[c,h,f,p,v,I,s]);return _==null?null:g.createElement(ai.Provider,{value:d},g.createElement(yh.Provider,{children:n,value:_}))}function FR(t){let{children:e,location:n}=t;return NR(Em(e),n)}new Promise(()=>{});function Em(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,Em(r.props.children,i));return}r.type!==on&&ut(!1),!r.props.index||!r.props.children||ut(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Em(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nm.apply(this,arguments)}function UR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function BR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $R(t,e){return t.button===0&&(!e||e==="_self")&&!BR(t)}const zR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HR="6";try{window.__reactRouterVersion=HR}catch{}const WR="startTransition",Xw=eh[WR];function qR(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=Gk({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=g.useCallback(f=>{d&&Xw?Xw(()=>c(f)):c(f)},[c,d]);return g.useLayoutEffect(()=>a.listen(h),[a,h]),g.useEffect(()=>MR(r),[r]),g.createElement(VR,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const GR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=UR(e,zR),{basename:v}=g.useContext(ai),I,_=!1;if(typeof d=="string"&&KR.test(d)&&(I=d,GR))try{let C=new URL(window.location.href),R=d.startsWith("//")?new URL(C.protocol+d):new URL(d),L=ly(R.pathname,v);R.origin===C.origin&&L!=null?d=L+R.search+R.hash:_=!0}catch{}let S=_R(d,{relative:s}),E=QR(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function w(C){r&&r(C),C.defaultPrevented||E(C)}return g.createElement("a",Nm({},p,{href:I||S,onClick:_||i?r:w,ref:n,target:c}))});var Jw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jw||(Jw={}));var Zw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zw||(Zw={}));function QR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=zn(),d=to(),h=XE(t,{relative:a});return g.useCallback(f=>{if($R(f,n)){f.preventDefault();let p=r!==void 0?r:wd(d)===wd(h);c(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}const YR=()=>{};var e0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},nN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,v=d&63;c||(v=64,a||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new JR;const p=i<<2|l>>4;if(r.push(p),d!==64){const v=l<<4&240|d>>2;if(r.push(v),f!==64){const I=d<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZR=function(t){const e=tN(t);return nN.encodeByteArray(e,!0)},_d=function(t){return ZR(t).replace(/\./g,"")},rN=function(t){try{return nN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=()=>eP().__FIREBASE_DEFAULTS__,nP=()=>{if(typeof process>"u"||typeof e0>"u")return;const t=e0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rN(t[1]);return e&&JSON.parse(e)},vh=()=>{try{return YR()||tP()||nP()||rP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sN=t=>{var e,n;return(n=(e=vh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},iN=t=>{const e=sN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oN=()=>{var t;return(t=vh())==null?void 0:t.config},aN=t=>{var e;return(e=vh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_d(JSON.stringify(n)),_d(JSON.stringify(a)),""].join(".")}const El={};function iP(){const t={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?t.emulator.push(e):t.prod.push(e);return t}function oP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let t0=!1;function py(t,e){if(typeof window>"u"||typeof document>"u"||!li(window.location.host)||El[t]===e||El[t]||t0)return;El[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=iP().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{t0=!0,a()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=oP(r),v=n("text"),I=document.getElementById(v)||document.createElement("span"),_=n("learnmore"),S=document.getElementById(_)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const C=p.element;l(C),h(S,_);const R=d();c(w,E),C.append(w,I,S,R),document.body.appendChild(C)}i?(I.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function lP(){var e;const t=(e=vh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dP(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hP(){return!lP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uN(){try{return typeof indexedDB=="object"}catch{return!1}}function dN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function fP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pP,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,no.prototype.create)}}class no{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?mP(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Hn(s,l,r)}}function mP(t,e){return t.replace(gP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gP=/\{\$([^}]+)}/g;function yP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(n0(i)&&n0(a)){if(!Kr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function n0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vP(t,e){const n=new xP(t,e);return n.subscribe.bind(n)}class xP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Jf),s.error===void 0&&(s.error=Jf),s.complete===void 0&&(s.complete=Jf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=1e3,bP=2,EP=4*60*60*1e3,NP=.5;function r0(t,e=_P,n=bP){const r=e*Math.pow(n,t),s=Math.round(NP*r*(Math.random()-.5)*2);return Math.min(EP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CP(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SP(t){return t===Ti?void 0:t}function CP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const jP={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},AP=be.INFO,kP={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},RP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xh{constructor(e){this.name=e,this._logLevel=AP,this._logHandler=RP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const PP=(t,e)=>e.some(n=>t instanceof n);let s0,i0;function DP(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LP(){return i0||(i0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hN=new WeakMap,Tm=new WeakMap,fN=new WeakMap,Zf=new WeakMap,my=new WeakMap;function OP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n($s(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&hN.set(n,t)}).catch(()=>{}),my.set(e,t),e}function MP(t){if(Tm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Tm.set(t,e)}let Sm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VP(t){Sm=t(Sm)}function FP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ep(this),e,...n);return fN.set(r,e.sort?e.sort():[e]),$s(r)}:LP().includes(t)?function(...e){return t.apply(ep(this),e),$s(hN.get(this))}:function(...e){return $s(t.apply(ep(this),e))}}function UP(t){return typeof t=="function"?FP(t):(t instanceof IDBTransaction&&MP(t),PP(t,DP())?new Proxy(t,Sm):t)}function $s(t){if(t instanceof IDBRequest)return OP(t);if(Zf.has(t))return Zf.get(t);const e=UP(t);return e!==t&&(Zf.set(t,e),my.set(e,t)),e}const ep=t=>my.get(t);function pN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=$s(a);return r&&a.addEventListener("upgradeneeded",c=>{r($s(a.result),c.oldVersion,c.newVersion,$s(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const BP=["get","getKey","getAll","getAllKeys","count"],$P=["put","add","delete","clear"],tp=new Map;function o0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$P.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BP.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return tp.set(e,i),i}VP(t=>({...t,get:(e,n,r)=>o0(e,n)||t.get(e,n,r),has:(e,n)=>!!o0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cm="@firebase/app",a0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new xh("@firebase/app"),WP="@firebase/app-compat",qP="@firebase/analytics-compat",GP="@firebase/analytics",KP="@firebase/app-check-compat",QP="@firebase/app-check",YP="@firebase/auth",XP="@firebase/auth-compat",JP="@firebase/database",ZP="@firebase/data-connect",e4="@firebase/database-compat",t4="@firebase/functions",n4="@firebase/functions-compat",r4="@firebase/installations",s4="@firebase/installations-compat",i4="@firebase/messaging",o4="@firebase/messaging-compat",a4="@firebase/performance",l4="@firebase/performance-compat",c4="@firebase/remote-config",u4="@firebase/remote-config-compat",d4="@firebase/storage",h4="@firebase/storage-compat",f4="@firebase/firestore",p4="@firebase/ai",m4="@firebase/firestore-compat",g4="firebase",y4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",v4={[Cm]:"fire-core",[WP]:"fire-core-compat",[GP]:"fire-analytics",[qP]:"fire-analytics-compat",[QP]:"fire-app-check",[KP]:"fire-app-check-compat",[YP]:"fire-auth",[XP]:"fire-auth-compat",[JP]:"fire-rtdb",[ZP]:"fire-data-connect",[e4]:"fire-rtdb-compat",[t4]:"fire-fn",[n4]:"fire-fn-compat",[r4]:"fire-iid",[s4]:"fire-iid-compat",[i4]:"fire-fcm",[o4]:"fire-fcm-compat",[a4]:"fire-perf",[l4]:"fire-perf-compat",[c4]:"fire-rc",[u4]:"fire-rc-compat",[d4]:"fire-gcs",[h4]:"fire-gcs-compat",[f4]:"fire-fst",[m4]:"fire-fst-compat",[p4]:"fire-vertex","fire-js":"fire-js",[g4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Map,x4=new Map,jm=new Map;function l0(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rr(t){const e=t.name;if(jm.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,t);for(const n of bd.values())l0(n,t);for(const n of x4.values())l0(n,t);return!0}function ci(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new no("app","Firebase",w4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=y4;function mN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Im,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw zs.create("bad-app-name",{appName:String(s)});if(n||(n=oN()),!n)throw zs.create("no-options");const i=bd.get(s);if(i){if(Kr(n,i.options)&&Kr(r,i.config))return i;throw zs.create("duplicate-app",{appName:s})}const a=new IP(s);for(const c of jm.values())a.addComponent(c);const l=new _4(n,r,a);return bd.set(s,l),l}function wh(t=Im){const e=bd.get(t);if(!e&&t===Im&&oN())return mN();if(!e)throw zs.create("no-app",{appName:t});return e}function yn(t,e,n){let r=v4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(a.join(" "));return}rr(new Bn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="firebase-heartbeat-database",E4=1,Yl="firebase-heartbeat-store";let np=null;function gN(){return np||(np=pN(b4,E4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yl)}catch(n){console.warn(n)}}}}).catch(t=>{throw zs.create("idb-open",{originalErrorMessage:t.message})})),np}async function N4(t){try{const n=(await gN()).transaction(Yl),r=await n.objectStore(Yl).get(yN(t));return await n.done,r}catch(e){if(e instanceof Hn)Qr.warn(e.message);else{const n=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(n.message)}}}async function c0(t,e){try{const r=(await gN()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(e,yN(t)),await r.done}catch(n){if(n instanceof Hn)Qr.warn(n.message);else{const r=zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qr.warn(r.message)}}}function yN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=1024,S4=30;class C4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=u0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>S4){const a=A4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u0(),{heartbeatsToSend:r,unsentEntries:s}=I4(this._heartbeatsCache.heartbeats),i=_d(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qr.warn(n),""}}}function u0(){return new Date().toISOString().substring(0,10)}function I4(t,e=T4){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),d0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),d0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class j4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uN()?dN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await N4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return c0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function d0(t){return _d(JSON.stringify({version:2,heartbeats:t})).length}function A4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){rr(new Bn("platform-logger",e=>new zP(e),"PRIVATE")),rr(new Bn("heartbeat",e=>new C4(e),"PRIVATE")),yn(Cm,a0,t),yn(Cm,a0,"esm2020"),yn("fire-js","")}k4("");function vN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R4=vN,xN=new no("auth","Firebase",vN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new xh("@firebase/auth");function P4(t,...e){Ed.logLevel<=be.WARN&&Ed.warn(`Auth (${ro}): ${t}`,...e)}function Mu(t,...e){Ed.logLevel<=be.ERROR&&Ed.error(`Auth (${ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw yy(t,...e)}function tr(t,...e){return yy(t,...e)}function gy(t,e,n){const r={...R4(),[e]:n};return new no("auth","Firebase",r).create(e,{appName:t.name})}function zr(t){return gy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$n(t,"argument-error"),gy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xN.create(t,...e)}function ue(t,e,...n){if(!t)throw yy(e,...n)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mu(e),new Error(e)}function Yr(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function L4(){return h0()==="http:"||h0()==="https:"}function h0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L4()||cN()||"connection"in navigator)?navigator.onLine:!0}function M4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=aP()||uP()}get(){return O4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U4=new vc(3e4,6e4);function ui(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ss(t,e,n,r,s={}){return _N(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=yc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return cP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&li(t.emulatorConfig.host)&&(d.credentials="include"),wN.fetch()(await bN(t,t.config.apiHost,n,l),d)})}async function _N(t,e,n){t._canInitEmulator=!1;const r={...V4,...e};try{const s=new $4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw cu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw cu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw cu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw cu(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw gy(t,h,d);$n(t,h)}}catch(s){if(s instanceof Hn)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function xc(t,e,n,r,s={}){const i=await ss(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function bN(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?vy(t.config,s):`${t.config.apiScheme}://${s}`;return F4.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function B4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tr(this.auth,"network-request-failed")),U4.get())})}}function cu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tr(t,e,r);return s.customData._tokenResponse=n,s}function f0(t){return t!==void 0&&t.enterprise!==void 0}class z4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H4(t,e){return ss(t,"GET","/v2/recaptchaConfig",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){return ss(t,"POST","/v1/accounts:delete",e)}async function Nd(t,e){return ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q4(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),s=xy(r);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Nl(rp(s.auth_time)),issuedAtTime:Nl(rp(s.iat)),expirationTime:Nl(rp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function rp(t){return Number(t)*1e3}function xy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const s=rN(n);return s?JSON.parse(s):(Mu("Failed to decode base64 JWT payload"),null)}catch(s){return Mu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function p0(t){const e=xy(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&G4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Yo(t,Nd(e,{idToken:n}));ue(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?EN(s.providerUserInfo):[],a=Y4(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new km(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Q4(t){const e=Ue(t);await Td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(t,e){const n=await _N(t,{},async()=>{const r=yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await bN(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&li(t.emulatorConfig.host)&&(c.credentials="include"),wN.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J4(t,e){return ss(t,"POST","/v2/accounts:revokeToken",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=p0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await X4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Lo;return r&&(ue(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ue(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ue(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new K4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new km(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q4(this,e)}reload(){return Q4(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await Yo(this,W4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:v,providerData:I,stsTokenManager:_}=n;ue(f&&_,e,"internal-error");const S=Lo.fromJSON(this.name,_);ue(typeof f=="string",e,"internal-error"),fs(r,e.name),fs(s,e.name),ue(typeof p=="boolean",e,"internal-error"),ue(typeof v=="boolean",e,"internal-error"),fs(i,e.name),fs(a,e.name),fs(l,e.name),fs(c,e.name),fs(d,e.name),fs(h,e.name);const E=new Xn({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:S,createdAt:d,lastLoginAt:h});return I&&Array.isArray(I)&&(E.providerData=I.map(w=>({...w}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Lo;s.updateFromServerResponse(n);const i=new Xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Td(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?EN(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Lo;l.updateFromIdToken(r);const c=new Xn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new km(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new Map;function Ur(t){Yr(t instanceof Function,"Expected a class definition");let e=m0.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NN.type="NONE";const g0=NN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t,e,n){return`firebase:${t}:${e}:${n}`}class Oo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Vu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Vu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nd(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oo(Ur(g0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Ur(g0);const a=Vu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const p=await Nd(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Xn._fromGetAccountInfoResponse(e,p,h)}else f=Xn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Oo(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Oo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AN(e))return"Blackberry";if(kN(e))return"Webos";if(SN(e))return"Safari";if((e.includes("chrome/")||CN(e))&&!e.includes("edge/"))return"Chrome";if(jN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TN(t=qt()){return/firefox\//i.test(t)}function SN(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CN(t=qt()){return/crios\//i.test(t)}function IN(t=qt()){return/iemobile/i.test(t)}function jN(t=qt()){return/android/i.test(t)}function AN(t=qt()){return/blackberry/i.test(t)}function kN(t=qt()){return/webos/i.test(t)}function wy(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Z4(t=qt()){var e;return wy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function eD(){return dP()&&document.documentMode===10}function RN(t=qt()){return wy(t)||jN(t)||kN(t)||AN(t)||/windows phone/i.test(t)||IN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t,e=[]){let n;switch(t){case"Browser":n=y0(qt());break;case"Worker":n=`${y0(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e={}){return ss(t,"GET","/v2/passwordPolicy",ui(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=6;class sD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v0(this),this.idTokenSubscription=new v0(this),this.beforeStateQueue=new tD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nd(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(un(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Td(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(zr(this));const n=e?Ue(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nD(this),n=new sD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new no("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&P4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function di(t){return Ue(t)}class v0{constructor(e){this.auth=e,this.observer=null,this.addObserver=vP(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oD(t){_h=t}function DN(t){return _h.loadJS(t)}function aD(){return _h.recaptchaEnterpriseScript}function lD(){return _h.gapiScript}function cD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class uD{constructor(){this.enterprise=new dD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hD="recaptcha-enterprise",LN="NO_RECAPTCHA";class fD{constructor(e){this.type=hD,this.auth=di(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{H4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new z4(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;f0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(LN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uD().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&f0(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=aD();c.length!==0&&(c+=l),DN(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function x0(t,e,n,r=!1,s=!1){const i=new fD(t);let a;if(s)a=LN;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Rm(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await x0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await x0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){const n=ci(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kr(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function mD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gD(t,e,n){const r=di(t);ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ON(e),{host:a,port:l}=yD(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ue(Kr(d,r.config.emulator)&&Kr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,li(a)?(fy(`${i}//${a}${c}`),py("Auth",!0)):vD()}function ON(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yD(t){const e=ON(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:w0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:w0(a)}}}function w0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function xD(t,e){return ss(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return xc(t,"POST","/v1/accounts:signInWithPassword",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}async function bD(t,e){return xc(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends _y{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,n,"signInWithPassword",wD);case"emailLink":return _D(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,r,"signUpPassword",xD);case"emailLink":return bD(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e){return xc(t,"POST","/v1/accounts:signInWithIdp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="http://localhost";class $i extends _y{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new $i(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mo(e,n)}buildRequest(){const e={requestUri:ED,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TD(t){const e=al(ll(t)).link,n=e?al(ll(e)).deep_link_id:null,r=al(ll(t)).deep_link_id;return(r?al(ll(r)).link:null)||r||n||e||t}class by{constructor(e){const n=al(ll(e)),r=n.apiKey??null,s=n.oobCode??null,i=ND(n.mode??null);ue(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TD(e);try{return new by(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,n){return Xl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=by.parseLink(n);return ue(r,"argument-error"),Xl._fromEmailAndCode(e,r.code,r.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Ey{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends wc{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $i._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.GOOGLE_SIGN_IN_METHOD="google.com";Ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends wc{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends wc{constructor(){super("twitter.com")}static credential(e,n){return $i._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ts.credential(n,r)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e){return xc(t,"POST","/v1/accounts:signUp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xn._fromIdTokenResponse(e,r,s),a=_0(r);return new zi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=_0(r);return new zi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function _0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Hn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Sd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Sd(e,n,r,s)}}function MN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(t,i,e,r):i})}async function CD(t,e,n=!1){const r=await Yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e,n=!1){const{auth:r}=t;if(un(r.app))return Promise.reject(zr(r));const s="reauthenticate";try{const i=await Yo(t,MN(r,s,e,t),n);ue(i.idToken,r,"internal-error");const a=xy(i.idToken);ue(a,r,"internal-error");const{sub:l}=a;return ue(t.uid===l,r,"user-mismatch"),zi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e,n=!1){if(un(t.app))return Promise.reject(zr(t));const r="signIn",s=await MN(t,r,e),i=await zi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function jD(t,e){return VN(di(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t){const e=di(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AD(t,e,n){if(un(t.app))return Promise.reject(zr(t));const r=di(t),a=await Rm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&FN(t),c}),l=await zi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function kD(t,e,n){return un(t.app)?Promise.reject(zr(t)):jD(Ue(t),ga.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e){return ss(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ue(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Yo(r,RD(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function PD(t,e,n,r){return Ue(t).onIdTokenChanged(e,n,r)}function DD(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function LD(t,e,n,r){return Ue(t).onAuthStateChanged(e,n,r)}function OD(t){return Ue(t).signOut()}const Cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=1e3,VD=10;class $N extends BN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);eD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$N.type="LOCAL";const FD=$N;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN extends BN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}zN.type="SESSION";const HN=zN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await UD(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Ny("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function $D(t){xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function zD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function WD(){return WN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="firebaseLocalStorageDb",qD=1,Id="firebaseLocalStorage",GN="fbase_key";class _c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eh(t,e){return t.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function GD(){const t=indexedDB.deleteDatabase(qN);return new _c(t).toPromise()}function Pm(){const t=indexedDB.open(qN,qD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Id,{keyPath:GN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Id)?e(r):(r.close(),await GD(),e(await Pm()))})})}async function b0(t,e,n){const r=Eh(t,!0).put({[GN]:e,value:n});return new _c(r).toPromise()}async function KD(t,e){const n=Eh(t,!1).get(e),r=await new _c(n).toPromise();return r===void 0?null:r.value}function E0(t,e){const n=Eh(t,!0).delete(e);return new _c(n).toPromise()}const QD=800,YD=3;class KN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bh._getInstance(WD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await zD(),!this.activeServiceWorker)return;this.sender=new BD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await b0(e,Cd,"1"),await E0(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>b0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>KD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>E0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Eh(s,!1).getAll();return new _c(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KN.type="LOCAL";const XD=KN;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t,e){return e?Ur(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty extends _y{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JD(t){return VN(t.auth,new Ty(t),t.bypassAuthState)}function ZD(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),ID(n,new Ty(t),t.bypassAuthState)}async function eL(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),CD(n,new Ty(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JD;case"linkViaPopup":case"linkViaRedirect":return eL;case"reauthViaPopup":case"reauthViaRedirect":return ZD;default:$n(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new vc(2e3,1e4);async function nL(t,e,n){if(un(t.app))return Promise.reject(tr(t,"operation-not-supported-in-this-environment"));const r=di(t);D4(t,e,Ey);const s=QN(r,n);return new ji(r,"signInViaPopup",e,s).executeNotNull()}class ji extends YN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tL.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="pendingRedirect",Fu=new Map;class sL extends YN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const r=await iL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iL(t,e){const n=lL(e),r=aL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function oL(t,e){Fu.set(t._key(),e)}function aL(t){return Ur(t._redirectPersistence)}function lL(t){return Vu(rL,t.config.apiKey,t.name)}async function cL(t,e,n=!1){if(un(t.app))return Promise.reject(zr(t));const r=di(t),s=QN(r,e),a=await new sL(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=10*60*1e3;class dL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(tr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uL&&this.cachedEventUids.clear(),this.cachedEventUids.has(N0(e))}saveEventToCache(e){this.cachedEventUids.add(N0(e)),this.lastProcessedEventTime=Date.now()}}function N0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e={}){return ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mL=/^https?/;async function gL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fL(t);for(const n of e)try{if(yL(n))return}catch{}$n(t,"unauthorized-domain")}function yL(t){const e=Am(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!mL.test(n))return!1;if(pL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new vc(3e4,6e4);function T0(){const t=xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xL(t){return new Promise((e,n)=>{var s,i,a;function r(){T0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{T0(),n(tr(t,"network-request-failed"))},timeout:vL.get()})}if((i=(s=xr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=xr().gapi)!=null&&a.load)r();else{const l=cD("iframefcb");return xr()[l]=()=>{gapi.load?r():n(tr(t,"network-request-failed"))},DN(`${lD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Uu=null,e})}let Uu=null;function wL(t){return Uu=Uu||xL(t),Uu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new vc(5e3,15e3),bL="__/auth/iframe",EL="emulator/auth/iframe",NL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SL(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?vy(e,EL):`https://${t.config.authDomain}/${bL}`,r={apiKey:e.apiKey,appName:t.name,v:ro},s=TL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${yc(r).slice(1)}`}async function CL(t){const e=await wL(t),n=xr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:SL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=tr(t,"network-request-failed"),l=xr().setTimeout(()=>{i(a)},_L.get());function c(){xr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jL=500,AL=600,kL="_blank",RL="http://localhost";class S0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PL(t,e,n,r=jL,s=AL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...IL,width:r.toString(),height:s.toString(),top:i,left:a},d=qt().toLowerCase();n&&(l=CN(d)?kL:n),TN(d)&&(e=e||RL,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[v,I])=>`${p}${v}=${I},`,"");if(Z4(d)&&l!=="_self")return DL(e||"",l),new S0(null);const f=window.open(e||"",l,h);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new S0(f)}function DL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="__/auth/handler",OL="emulator/auth/handler",ML=encodeURIComponent("fac");async function C0(t,e,n,r,s,i){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ro,eventId:s};if(e instanceof Ey){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",yP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof wc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${ML}=${encodeURIComponent(c)}`:"";return`${VL(t)}?${yc(l).slice(1)}${d}`}function VL({config:t}){return t.emulator?vy(t,OL):`https://${t.authDomain}/${LL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class FL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HN,this._completeRedirectFn=cL,this._overrideRedirectResult=oL}async _openPopup(e,n,r,s){var a;Yr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await C0(e,n,r,Am(),s);return PL(e,i,Ny())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await C0(e,n,r,Am(),s);return $D(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CL(e),r=new dL(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sp,{type:sp},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[sp];i!==void 0&&n(!!i),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RN()||SN()||wy()}}const UL=FL;var I0="@firebase/auth",j0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zL(t){rr(new Bn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ue(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PN(t)},d=new iD(r,s,i,c);return mD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rr(new Bn("auth-internal",e=>{const n=di(e.getProvider("auth").getImmediate());return(r=>new BL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(I0,j0,$L(t)),yn(I0,j0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=5*60,WL=aN("authIdTokenMaxAge")||HL;let A0=null;const qL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>WL)return;const s=n==null?void 0:n.token;A0!==s&&(A0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GL(t=wh()){const e=ci(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pD(t,{popupRedirectResolver:UL,persistence:[XD,FD,HN]}),r=aN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=qL(i.toString());DD(n,a,()=>a(n.currentUser)),PD(n,l=>a(l))}}const s=sN("auth");return s&&gD(n,`http://${s}`),n}function KL(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}oD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",KL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zL("Browser");var QL="firebase",YL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn(QL,YL,"app");const JN="@firebase/installations",Sy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=1e4,eT=`w:${Sy}`,tT="FIS_v2",XL="https://firebaseinstallations.googleapis.com/v1",JL=60*60*1e3,ZL="installations",eO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Hi=new no(ZL,eO,tO);function nT(t){return t instanceof Hn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT({projectId:t}){return`${XL}/projects/${t}/installations`}function sT(t){return{token:t.token,requestStatus:2,expiresIn:rO(t.expiresIn),creationTime:Date.now()}}async function iT(t,e){const r=(await e.json()).error;return Hi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function oT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nO(t,{refreshToken:e}){const n=oT(t);return n.append("Authorization",sO(e)),n}async function aT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rO(t){return Number(t.replace("s","000"))}function sO(t){return`${tT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=rT(t),s=oT(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:tT,appId:t.appId,sdkVersion:eT},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await aT(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:sT(d.authToken)}}else throw await iT("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=/^[cdef][\w-]{21}$/,Dm="";function lO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=cO(t);return aO.test(n)?n:Dm}catch{return Dm}}function cO(t){return oO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;function uT(t,e){const n=Nh(t);dT(n,e),uO(n,e)}function dT(t,e){const n=cT.get(t);if(n)for(const r of n)r(e)}function uO(t,e){const n=dO();n&&n.postMessage({key:t,fid:e}),hO()}let Ai=null;function dO(){return!Ai&&"BroadcastChannel"in self&&(Ai=new BroadcastChannel("[Firebase] FID Change"),Ai.onmessage=t=>{dT(t.data.key,t.data.fid)}),Ai}function hO(){cT.size===0&&Ai&&(Ai.close(),Ai=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="firebase-installations-database",pO=1,Wi="firebase-installations-store";let ip=null;function Cy(){return ip||(ip=pN(fO,pO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wi)}}})),ip}async function jd(t,e){const n=Nh(t),s=(await Cy()).transaction(Wi,"readwrite"),i=s.objectStore(Wi),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&uT(t,e.fid),e}async function hT(t){const e=Nh(t),r=(await Cy()).transaction(Wi,"readwrite");await r.objectStore(Wi).delete(e),await r.done}async function Th(t,e){const n=Nh(t),s=(await Cy()).transaction(Wi,"readwrite"),i=s.objectStore(Wi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&uT(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iy(t){let e;const n=await Th(t.appConfig,r=>{const s=mO(r),i=gO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Dm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mO(t){const e=t||{fid:lO(),registrationStatus:0};return fT(e)}function gO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Hi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vO(t)}:{installationEntry:e}}async function yO(t,e){try{const n=await iO(t,e);return jd(t.appConfig,n)}catch(n){throw nT(n)&&n.customData.serverCode===409?await hT(t.appConfig):await jd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vO(t){let e=await k0(t.appConfig);for(;e.registrationStatus===1;)await lT(100),e=await k0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Iy(t);return r||n}return e}function k0(t){return Th(t,e=>{if(!e)throw Hi.create("installation-not-found");return fT(e)})}function fT(t){return xO(t)?{fid:t.fid,registrationStatus:0}:t}function xO(t){return t.registrationStatus===1&&t.registrationTime+ZN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO({appConfig:t,heartbeatServiceProvider:e},n){const r=_O(t,n),s=nO(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:eT,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await aT(()=>fetch(r,l));if(c.ok){const d=await c.json();return sT(d)}else throw await iT("Generate Auth Token",c)}function _O(t,{fid:e}){return`${rT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jy(t,e=!1){let n;const r=await Th(t.appConfig,i=>{if(!pT(i))throw Hi.create("not-registered");const a=i.authToken;if(!e&&NO(a))return i;if(a.requestStatus===1)return n=bO(t,e),i;{if(!navigator.onLine)throw Hi.create("app-offline");const l=SO(i);return n=EO(t,l),l}});return n?await n:r.authToken}async function bO(t,e){let n=await R0(t.appConfig);for(;n.authToken.requestStatus===1;)await lT(100),n=await R0(t.appConfig);const r=n.authToken;return r.requestStatus===0?jy(t,e):r}function R0(t){return Th(t,e=>{if(!pT(e))throw Hi.create("not-registered");const n=e.authToken;return CO(n)?{...e,authToken:{requestStatus:0}}:e})}async function EO(t,e){try{const n=await wO(t,e),r={...e,authToken:n};return await jd(t.appConfig,r),n}catch(n){if(nT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await hT(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await jd(t.appConfig,r)}throw n}}function pT(t){return t!==void 0&&t.registrationStatus===2}function NO(t){return t.requestStatus===2&&!TO(t)}function TO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JL}function SO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function CO(t){return t.requestStatus===1&&t.requestTime+ZN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t){const e=t,{installationEntry:n,registrationPromise:r}=await Iy(e);return r?r.catch(console.error):jy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e=!1){const n=t;return await AO(n),(await jy(n,e)).token}async function AO(t){const{registrationPromise:e}=await Iy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){if(!t||!t.options)throw op("App Configuration");if(!t.name)throw op("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw op(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function op(t){return Hi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="installations",RO="installations-internal",PO=t=>{const e=t.getProvider("app").getImmediate(),n=kO(e),r=ci(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DO=t=>{const e=t.getProvider("app").getImmediate(),n=ci(e,mT).getImmediate();return{getId:()=>IO(n),getToken:s=>jO(n,s)}};function LO(){rr(new Bn(mT,PO,"PUBLIC")),rr(new Bn(RO,DO,"PRIVATE"))}LO();yn(JN,Sy);yn(JN,Sy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="analytics",OO="firebase_id",MO="origin",VO=60*1e3,FO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ay="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new xh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new no("analytics","Analytics",UO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){if(!t.startsWith(Ay)){const e=Sn.create("invalid-gtag-resource",{gtagURL:t});return en.warn(e.message),""}return t}function gT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $O(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zO(t,e){const n=$O("firebase-js-sdk-policy",{createScriptURL:BO}),r=document.createElement("script"),s=`${Ay}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WO(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await gT(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){en.error(l)}t("config",s,i)}async function qO(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await gT(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){en.error(i)}}function GO(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await qO(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await WO(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){en.error(l)}}return s}function KO(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=GO(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ay)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=30,XO=1e3;class JO{constructor(e={},n=XO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const yT=new JO;function ZO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eM(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:ZO(n)},s=FO.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function tM(t,e=yT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Sn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Sn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new sM;return setTimeout(async()=>{l.abort()},VO),vT({appId:r,apiKey:s,measurementId:i},a,l,e)}async function vT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=yT){var l;const{appId:i,measurementId:a}=t;try{await nM(r,e)}catch(c){if(a)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await eM(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!rM(d)){if(s.deleteThrottleMetadata(i),a)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?r0(n,s.intervalMillis,YO):r0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),en.debug(`Calling attemptFetch again in ${h} millis`),vT(t,f,r,s)}}function nM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rM(t){if(!(t instanceof Hn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function oM(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(){if(uN())try{await dN()}catch(t){return en.warn(Sn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return en.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lM(t,e,n,r,s,i,a){const l=tM(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>en.error(p)),e.push(l);const c=aM().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([l,c]);QO(i)||zO(i,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[MO]="firebase",f.update=!0,h!=null&&(f[OO]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.app=e}_delete(){return delete Vo[this.app.options.appId],Promise.resolve()}}let Vo={},P0=[];const D0={};let ap="dataLayer",uM="gtag",L0,ky,O0=!1;function dM(){const t=[];if(cN()&&t.push("This is a browser extension environment."),fP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Sn.create("invalid-analytics-context",{errorInfo:e});en.warn(n.message)}}function hM(t,e,n){dM();const r=t.options.appId;if(!r)throw Sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(Vo[r]!=null)throw Sn.create("already-exists",{id:r});if(!O0){HO(ap);const{wrappedGtag:i,gtagCore:a}=KO(Vo,P0,D0,ap,uM);ky=i,L0=a,O0=!0}return Vo[r]=lM(t,P0,D0,e,L0,ap,n),new cM(t)}function fM(t=wh()){t=Ue(t);const e=ci(t,Ad);return e.isInitialized()?e.getImmediate():pM(t)}function pM(t,e={}){const n=ci(t,Ad);if(n.isInitialized()){const s=n.getImmediate();if(Kr(e,n.getOptions()))return s;throw Sn.create("already-initialized")}return n.initialize({options:e})}function mM(t,e,n){t=Ue(t),oM(ky,Vo[t.app.options.appId],e,n).catch(r=>en.error(r))}function gM(t,e,n,r){t=Ue(t),iM(ky,Vo[t.app.options.appId],e,n,r).catch(s=>en.error(s))}const M0="@firebase/analytics",V0="0.10.19";function yM(){rr(new Bn(Ad,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return hM(r,s,n)},"PUBLIC")),rr(new Bn("analytics-internal",t,"PRIVATE")),yn(M0,V0),yn(M0,V0,"esm2020");function t(e){try{const n=e.getProvider(Ad).getImmediate();return{logEvent:(r,s,i)=>gM(n,r,s,i),setUserProperties:(r,s)=>mM(n,r,s)}}catch(n){throw Sn.create("interop-component-reg-failed",{reason:n})}}}yM();var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hs,xT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,y){function T(){}T.prototype=y.prototype,N.F=y.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(b,j,k){for(var P=Array(arguments.length-2),H=2;H<arguments.length;H++)P[H-2]=arguments[H];return y.prototype[j].apply(b,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,y,T){T||(T=0);const b=Array(16);if(typeof y=="string")for(var j=0;j<16;++j)b[j]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(j=0;j<16;++j)b[j]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=N.g[0],T=N.g[1],j=N.g[2];let k=N.g[3],P;P=y+(k^T&(j^k))+b[0]+3614090360&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[1]+3905402710&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[2]+606105819&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[3]+3250441966&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+b[4]+4118548399&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[5]+1200080426&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[6]+2821735955&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[7]+4249261313&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+b[8]+1770035416&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[9]+2336552879&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[10]+4294925233&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[11]+2304563134&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+b[12]+1804603682&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[13]+4254626195&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[14]+2792965006&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[15]+1236535329&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(j^k&(T^j))+b[1]+4129170786&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[6]+3225465664&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[11]+643717713&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[0]+3921069994&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+b[5]+3593408605&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[10]+38016083&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[15]+3634488961&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[4]+3889429448&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+b[9]+568446438&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[14]+3275163606&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[3]+4107603335&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[8]+1163531501&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+b[13]+2850285829&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[2]+4243563512&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[7]+1735328473&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[12]+2368359562&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(T^j^k)+b[5]+4294588738&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[8]+2272392833&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[11]+1839030562&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[14]+4259657740&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+b[1]+2763975236&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[4]+1272893353&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[7]+4139469664&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[10]+3200236656&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+b[13]+681279174&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[0]+3936430074&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[3]+3572445317&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[6]+76029189&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+b[9]+3654602809&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[12]+3873151461&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[15]+530742520&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[2]+3299628645&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(j^(T|~k))+b[0]+4096336452&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[7]+1126891415&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[14]+2878612391&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[5]+4237533241&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+b[12]+1700485571&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[3]+2399980690&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[10]+4293915773&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[1]+2240044497&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+b[8]+1873313359&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[15]+4264355552&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[6]+2734768916&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[13]+1309151649&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+b[4]+4149444226&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[11]+3174756917&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[2]+718787259&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[9]+3951481745&4294967295,N.g[0]=N.g[0]+y&4294967295,N.g[1]=N.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+k&4294967295}r.prototype.v=function(N,y){y===void 0&&(y=N.length);const T=y-this.blockSize,b=this.C;let j=this.h,k=0;for(;k<y;){if(j==0)for(;k<=T;)s(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<y;)if(b[j++]=N.charCodeAt(k++),j==this.blockSize){s(this,b),j=0;break}}else for(;k<y;)if(b[j++]=N[k++],j==this.blockSize){s(this,b),j=0;break}}this.h=j,this.o+=y},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var y=1;y<N.length-8;++y)N[y]=0;y=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=y&255,y/=256;for(this.v(N),N=Array(16),y=0,T=0;T<4;++T)for(let b=0;b<32;b+=8)N[y++]=this.g[T]>>>b&255;return N};function i(N,y){var T=l;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=y(N)}function a(N,y){this.h=y;const T=[];let b=!0;for(let j=N.length-1;j>=0;j--){const k=N[j]|0;b&&k==y||(T[j]=k,b=!1)}this.g=T}var l={};function c(N){return-128<=N&&N<128?i(N,function(y){return new a([y|0],y<0?-1:0)}):new a([N|0],N<0?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return f;if(N<0)return S(d(-N));const y=[];let T=1;for(let b=0;N>=T;b++)y[b]=N/T|0,T*=4294967296;return new a(y,0)}function h(N,y){if(N.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(N.charAt(0)=="-")return S(h(N.substring(1),y));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(y,8));let b=f;for(let k=0;k<N.length;k+=8){var j=Math.min(8,N.length-k);const P=parseInt(N.substring(k,k+j),y);j<8?(j=d(Math.pow(y,j)),b=b.j(j).add(d(P))):(b=b.j(T),b=b.add(d(P)))}return b}var f=c(0),p=c(1),v=c(16777216);t=a.prototype,t.m=function(){if(_(this))return-S(this).m();let N=0,y=1;for(let T=0;T<this.g.length;T++){const b=this.i(T);N+=(b>=0?b:4294967296+b)*y,y*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(I(this))return"0";if(_(this))return"-"+S(this).toString(N);const y=d(Math.pow(N,6));var T=this;let b="";for(;;){const j=R(T,y).g;T=E(T,j.j(y));let k=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=j,I(T))return k+b;for(;k.length<6;)k="0"+k;b=k+b}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function I(N){if(N.h!=0)return!1;for(let y=0;y<N.g.length;y++)if(N.g[y]!=0)return!1;return!0}function _(N){return N.h==-1}t.l=function(N){return N=E(this,N),_(N)?-1:I(N)?0:1};function S(N){const y=N.g.length,T=[];for(let b=0;b<y;b++)T[b]=~N.g[b];return new a(T,~N.h).add(p)}t.abs=function(){return _(this)?S(this):this},t.add=function(N){const y=Math.max(this.g.length,N.g.length),T=[];let b=0;for(let j=0;j<=y;j++){let k=b+(this.i(j)&65535)+(N.i(j)&65535),P=(k>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);b=P>>>16,k&=65535,P&=65535,T[j]=P<<16|k}return new a(T,T[T.length-1]&-2147483648?-1:0)};function E(N,y){return N.add(S(y))}t.j=function(N){if(I(this)||I(N))return f;if(_(this))return _(N)?S(this).j(S(N)):S(S(this).j(N));if(_(N))return S(this.j(S(N)));if(this.l(v)<0&&N.l(v)<0)return d(this.m()*N.m());const y=this.g.length+N.g.length,T=[];for(var b=0;b<2*y;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(let j=0;j<N.g.length;j++){const k=this.i(b)>>>16,P=this.i(b)&65535,H=N.i(j)>>>16,ae=N.i(j)&65535;T[2*b+2*j]+=P*ae,w(T,2*b+2*j),T[2*b+2*j+1]+=k*ae,w(T,2*b+2*j+1),T[2*b+2*j+1]+=P*H,w(T,2*b+2*j+1),T[2*b+2*j+2]+=k*H,w(T,2*b+2*j+2)}for(N=0;N<y;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=y;N<2*y;N++)T[N]=0;return new a(T,0)};function w(N,y){for(;(N[y]&65535)!=N[y];)N[y+1]+=N[y]>>>16,N[y]&=65535,y++}function C(N,y){this.g=N,this.h=y}function R(N,y){if(I(y))throw Error("division by zero");if(I(N))return new C(f,f);if(_(N))return y=R(S(N),y),new C(S(y.g),S(y.h));if(_(y))return y=R(N,S(y)),new C(S(y.g),y.h);if(N.g.length>30){if(_(N)||_(y))throw Error("slowDivide_ only works with positive integers.");for(var T=p,b=y;b.l(N)<=0;)T=L(T),b=L(b);var j=A(T,1),k=A(b,1);for(b=A(b,2),T=A(T,2);!I(b);){var P=k.add(b);P.l(N)<=0&&(j=j.add(T),k=P),b=A(b,1),T=A(T,1)}return y=E(N,j.j(y)),new C(j,y)}for(j=f;N.l(y)>=0;){for(T=Math.max(1,Math.floor(N.m()/y.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),k=d(T),P=k.j(y);_(P)||P.l(N)>0;)T-=b,k=d(T),P=k.j(y);I(k)&&(k=p),j=j.add(k),N=E(N,P)}return new C(j,N)}t.B=function(N){return R(this,N).h},t.and=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)&N.i(b);return new a(T,this.h&N.h)},t.or=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)|N.i(b);return new a(T,this.h|N.h)},t.xor=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)^N.i(b);return new a(T,this.h^N.h)};function L(N){const y=N.g.length+1,T=[];for(let b=0;b<y;b++)T[b]=N.i(b)<<1|N.i(b-1)>>>31;return new a(T,N.h)}function A(N,y){const T=y>>5;y%=32;const b=N.g.length-T,j=[];for(let k=0;k<b;k++)j[k]=y>0?N.i(k+T)>>>y|N.i(k+T+1)<<32-y:N.i(k+T);return new a(j,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,xT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Hs=a}).apply(typeof F0<"u"?F0:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wT,cl,_T,Bu,Lm,bT,ET,NT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var m=0;m<u.length;++m){var x=u[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var x=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var M=u[D];if(!(M in x))break e;x=x[M]}u=u[u.length-1],D=x[u],m=m(D),m!=D&&m!=null&&e(x,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var x=[],D;for(D in m)Object.prototype.hasOwnProperty.call(m,D)&&x.push([D,m[D]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function c(u,m,x){return u.call.apply(u.bind,arguments)}function d(u,m,x){return d=c,d.apply(null,arguments)}function h(u,m){var x=Array.prototype.slice.call(arguments,1);return function(){var D=x.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function f(u,m){function x(){}x.prototype=m.prototype,u.Z=m.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(D,M,U){for(var K=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)K[xe-2]=arguments[xe];return m.prototype[M].apply(D,K)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function v(u){const m=u.length;if(m>0){const x=Array(m);for(let D=0;D<m;D++)x[D]=u[D];return x}return[]}function I(u,m){for(let D=1;D<arguments.length;D++){const M=arguments[D];var x=typeof M;if(x=x!="object"?x:M?Array.isArray(M)?"array":x:"null",x=="array"||x=="object"&&typeof M.length=="number"){x=u.length||0;const U=M.length||0;u.length=x+U;for(let K=0;K<U;K++)u[x+K]=M[K]}else u.push(M)}}class _{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function S(u){a.setTimeout(()=>{throw u},0)}function E(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class w{constructor(){this.h=this.g=null}add(m,x){const D=C.get();D.set(m,x),this.h?this.h.next=D:this.g=D,this.h=D}}var C=new _(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let L,A=!1,N=new w,y=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(T)}};function T(){for(var u;u=E();){try{u.h.call(u.g)}catch(x){S(x)}var m=C;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}A=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};a.addEventListener("test",x,m),a.removeEventListener("test",x,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function H(u,m){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}f(H,j),H.prototype.init=function(u,m){const x=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(x=="mouseover"?m=u.fromElement:x=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),J=0;function le(u,m,x,D,M){this.listener=u,this.proxy=null,this.src=m,this.type=x,this.capture=!!D,this.ha=M,this.key=++J,this.da=this.fa=!1}function O(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function W(u,m,x){for(const D in u)m.call(x,u[D],D,u)}function re(u,m){for(const x in u)m.call(void 0,u[x],x,u)}function F(u){const m={};for(const x in u)m[x]=u[x];return m}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(u,m){let x,D;for(let M=1;M<arguments.length;M++){D=arguments[M];for(x in D)u[x]=D[x];for(let U=0;U<V.length;U++)x=V[U],Object.prototype.hasOwnProperty.call(D,x)&&(u[x]=D[x])}}function Z(u){this.src=u,this.g={},this.h=0}Z.prototype.add=function(u,m,x,D,M){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const K=ye(u,m,D,M);return K>-1?(m=u[K],x||(m.fa=!1)):(m=new le(m,this.src,U,!!D,M),m.fa=x,u.push(m)),m};function me(u,m){const x=m.type;if(x in u.g){var D=u.g[x],M=Array.prototype.indexOf.call(D,m,void 0),U;(U=M>=0)&&Array.prototype.splice.call(D,M,1),U&&(O(m),u.g[x].length==0&&(delete u.g[x],u.h--))}}function ye(u,m,x,D){for(let M=0;M<u.length;++M){const U=u[M];if(!U.da&&U.listener==m&&U.capture==!!x&&U.ha==D)return M}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),we={};function tt(u,m,x,D,M){if(Array.isArray(m)){for(let U=0;U<m.length;U++)tt(u,m[U],x,D,M);return null}return x=Pc(x),u&&u[ae]?u.J(m,x,l(D)?!!D.capture:!1,M):Oe(u,m,x,!1,D,M)}function Oe(u,m,x,D,M,U){if(!m)throw Error("Invalid event type");const K=l(M)?!!M.capture:!!M;let xe=kr(u);if(xe||(u[oe]=xe=new Z(u)),x=xe.add(m,x,D,K,U),x.proxy)return x;if(D=ke(),x.proxy=D,D.src=u,D.listener=x,u.addEventListener)k||(M=K),M===void 0&&(M=!1),u.addEventListener(m.toString(),D,M);else if(u.attachEvent)u.attachEvent(vn(m.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ke(){function u(x){return m.call(u.src,u.listener,x)}const m=gi;return u}function je(u,m,x,D,M){if(Array.isArray(m))for(var U=0;U<m.length;U++)je(u,m[U],x,D,M);else D=l(D)?!!D.capture:!!D,x=Pc(x),u&&u[ae]?(u=u.i,U=String(m).toString(),U in u.g&&(m=u.g[U],x=ye(m,x,D,M),x>-1&&(O(m[x]),Array.prototype.splice.call(m,x,1),m.length==0&&(delete u.g[U],u.h--)))):u&&(u=kr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=ye(m,x,D,M)),(x=u>-1?m[u]:null)&&It(x))}function It(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ae])me(m.i,u);else{var x=u.type,D=u.proxy;m.removeEventListener?m.removeEventListener(x,D,u.capture):m.detachEvent?m.detachEvent(vn(x),D):m.addListener&&m.removeListener&&m.removeListener(D),(x=kr(m))?(me(x,u),x.h==0&&(x.src=null,m[oe]=null)):O(u)}}}function vn(u){return u in we?we[u]:we[u]="on"+u}function gi(u,m){if(u.da)u=!0;else{m=new H(m,this);const x=u.listener,D=u.ha||u.src;u.fa&&It(u),u=x.call(D,m)}return u}function kr(u){return u=u[oe],u instanceof Z?u:null}var Rr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Pc(u){return typeof u=="function"?u:(u[Rr]||(u[Rr]=function(m){return u.handleEvent(m)}),u[Rr])}function at(){b.call(this),this.i=new Z(this),this.M=this,this.G=null}f(at,b),at.prototype[ae]=!0,at.prototype.removeEventListener=function(u,m,x,D){je(this,u,m,x,D)};function Gt(u,m){var x,D=u.G;if(D)for(x=[];D;D=D.G)x.push(D);if(u=u.M,D=m.type||m,typeof m=="string")m=new j(m,u);else if(m instanceof j)m.target=m.target||u;else{var M=m;m=new j(D,u),G(m,M)}M=!0;let U,K;if(x)for(K=x.length-1;K>=0;K--)U=m.g=x[K],M=Dc(U,D,!0,m)&&M;if(U=m.g=u,M=Dc(U,D,!0,m)&&M,M=Dc(U,D,!1,m)&&M,x)for(K=0;K<x.length;K++)U=m.g=x[K],M=Dc(U,D,!1,m)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const x=u.g[m];for(let D=0;D<x.length;D++)O(x[D]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,x,D){return this.i.add(String(u),m,!1,x,D)},at.prototype.K=function(u,m,x,D){return this.i.add(String(u),m,!0,x,D)};function Dc(u,m,x,D){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let U=0;U<m.length;++U){const K=m[U];if(K&&!K.da&&K.capture==x){const xe=K.listener,vt=K.ha||K.src;K.fa&&me(u.i,K),M=xe.call(vt,D)!==!1&&M}}return M&&!D.defaultPrevented}function Kj(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:a.setTimeout(u,m||0)}function $v(u){u.g=Kj(()=>{u.g=null,u.i&&(u.i=!1,$v(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Qj extends b{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$v(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(u){b.call(this),this.h=u,this.g={}}f(Aa,b);var zv=[];function Hv(u){W(u.g,function(m,x){this.g.hasOwnProperty(x)&&It(m)},u),u.g={}}Aa.prototype.N=function(){Aa.Z.N.call(this),Hv(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lf=a.JSON.stringify,Yj=a.JSON.parse,Xj=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Wv(){}function qv(){}var ka={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cf(){j.call(this,"d")}f(cf,j);function uf(){j.call(this,"c")}f(uf,j);var yi={},Gv=null;function Lc(){return Gv=Gv||new at}yi.Ia="serverreachability";function Kv(u){j.call(this,yi.Ia,u)}f(Kv,j);function Ra(u){const m=Lc();Gt(m,new Kv(m))}yi.STAT_EVENT="statevent";function Qv(u,m){j.call(this,yi.STAT_EVENT,u),this.stat=m}f(Qv,j);function Kt(u){const m=Lc();Gt(m,new Qv(m,u))}yi.Ja="timingevent";function Yv(u,m){j.call(this,yi.Ja,u),this.size=m}f(Yv,j);function Pa(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function Da(){this.g=!0}Da.prototype.ua=function(){this.g=!1};function Jj(u,m,x,D,M,U){u.info(function(){if(u.g)if(U){var K="",xe=U.split("&");for(let Me=0;Me<xe.length;Me++){var vt=xe[Me].split("=");if(vt.length>1){const Et=vt[0];vt=vt[1];const lr=Et.split("_");K=lr.length>=2&&lr[1]=="type"?K+(Et+"="+vt+"&"):K+(Et+"=redacted&")}}}else K=null;else K=U;return"XMLHTTP REQ ("+D+") [attempt "+M+"]: "+m+`
`+x+`
`+K})}function Zj(u,m,x,D,M,U,K){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+M+"]: "+m+`
`+x+`
`+U+" "+K})}function oo(u,m,x,D){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+tA(u,x)+(D?" "+D:"")})}function eA(u,m){u.info(function(){return"TIMEOUT: "+m})}Da.prototype.info=function(){};function tA(u,m){if(!u.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var x=U[u];if(!(x.length<2)){var D=x[1];if(Array.isArray(D)&&!(D.length<1)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(let K=1;K<D.length;K++)D[K]=""}}}}return lf(U)}catch{return m}}var Oc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jv;function df(){}f(df,Wv),df.prototype.g=function(){return new XMLHttpRequest},Jv=new df;function La(u){return encodeURIComponent(String(u))}function nA(u){var m=1;u=u.split(":");const x=[];for(;m>0&&u.length;)x.push(u.shift()),m--;return u.length&&x.push(u.join(":")),x}function os(u,m,x,D){this.j=u,this.i=m,this.l=x,this.S=D||1,this.V=new Aa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zv}function Zv(){this.i=null,this.g="",this.h=!1}var ex={},hf={};function ff(u,m,x){u.M=1,u.A=Vc(ar(m)),u.u=x,u.R=!0,tx(u,null)}function tx(u,m){u.F=Date.now(),Mc(u),u.B=ar(u.A);var x=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),px(x.i,"t",D),u.C=0,x=u.j.L,u.h=new Zv,u.g=Rx(u.j,x?m:null,!u.u),u.P>0&&(u.O=new Qj(d(u.Y,u,u.g),u.P)),m=u.V,x=u.g,D=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(zv[0]=M.toString()),M=zv);for(let U=0;U<M.length;U++){const K=tt(x,M[U],D||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=u.J?F(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ra(),Jj(u.i,u.v,u.B,u.l,u.S,u.u)}os.prototype.ba=function(u){u=u.target;const m=this.O;m&&cs(u)==3?m.j():this.Y(u)},os.prototype.Y=function(u){try{if(u==this.g)e:{const xe=cs(this.g),vt=this.g.ya(),Me=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||_x(this.g)))){this.K||xe!=4||vt==7||(vt==8||Me<=0?Ra(3):Ra(2)),pf(this);var m=this.g.ca();this.X=m;var x=rA(this);if(this.o=m==200,Zj(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var D,M=this.g;if((D=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(D)){var U=D;break t}}U=null}if(u=U)oo(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mf(this,u);else{this.o=!1,this.m=3,Kt(12),vi(this),Oa(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<x.length;)if(Et=sA(this,x),Et==hf){xe==4&&(this.m=4,Kt(14),u=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==ex){this.m=4,Kt(15),oo(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else oo(this.i,this.l,Et,null),mf(this,Et);if(nx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||x.length!=0||this.h.h||(this.m=1,Kt(16),u=!1),this.o=this.o&&u,!u)oo(this.i,this.l,x,"[Invalid Chunked Response]"),vi(this),Oa(this);else if(x.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ef(K),K.P=!0,Kt(11))}}else oo(this.i,this.l,x,null),mf(this,x);xe==4&&vi(this),this.o&&!this.K&&(xe==4?Ix(this.j,this):(this.o=!1,Mc(this)))}else vA(this.g),m==400&&x.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),vi(this),Oa(this)}}}catch{}finally{}};function rA(u){if(!nx(u))return u.g.la();const m=_x(u.g);if(m==="")return"";let x="";const D=m.length,M=cs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vi(u),Oa(u),"";u.h.i=new a.TextDecoder}for(let U=0;U<D;U++)u.h.h=!0,x+=u.h.i.decode(m[U],{stream:!(M&&U==D-1)});return m.length=0,u.h.g+=x,u.C=0,u.h.g}function nx(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function sA(u,m){var x=u.C,D=m.indexOf(`
`,x);return D==-1?hf:(x=Number(m.substring(x,D)),isNaN(x)?ex:(D+=1,D+x>m.length?hf:(m=m.slice(D,D+x),u.C=D+x,m)))}os.prototype.cancel=function(){this.K=!0,vi(this)};function Mc(u){u.T=Date.now()+u.H,rx(u,u.H)}function rx(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Pa(d(u.aa,u),m)}function pf(u){u.D&&(a.clearTimeout(u.D),u.D=null)}os.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(eA(this.i,this.B),this.M!=2&&(Ra(),Kt(17)),vi(this),this.m=2,Oa(this)):rx(this,this.T-u)};function Oa(u){u.j.I==0||u.K||Ix(u.j,u)}function vi(u){pf(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Hv(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function mf(u,m){try{var x=u.j;if(x.I!=0&&(x.g==u||gf(x.h,u))){if(!u.L&&gf(x.h,u)&&x.I==3){try{var D=x.Ba.g.parse(m)}catch{D=null}if(Array.isArray(D)&&D.length==3){var M=D;if(M[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)zc(x),Bc(x);else break e;bf(x),Kt(18)}}else x.xa=M[1],0<x.xa-x.K&&M[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Pa(d(x.Va,x),6e3));ox(x.h)<=1&&x.ta&&(x.ta=void 0)}else wi(x,11)}else if((u.L||x.g==u)&&zc(x),!P(m))for(M=x.Ba.g.parse(m),m=0;m<M.length;m++){let Me=M[m];const Et=Me[0];if(!(Et<=x.K))if(x.K=Et,Me=Me[1],x.I==2)if(Me[0]=="c"){x.M=Me[1],x.ba=Me[2];const lr=Me[3];lr!=null&&(x.ka=lr,x.j.info("VER="+x.ka));const _i=Me[4];_i!=null&&(x.za=_i,x.j.info("SVER="+x.za));const us=Me[5];us!=null&&typeof us=="number"&&us>0&&(D=1.5*us,x.O=D,x.j.info("backChannelRequestTimeoutMs_="+D)),D=x;const ds=u.g;if(ds){const Wc=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wc){var U=D.h;U.g||Wc.indexOf("spdy")==-1&&Wc.indexOf("quic")==-1&&Wc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(yf(U,U.h),U.h=null))}if(D.G){const Nf=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Nf&&(D.wa=Nf,ze(D.J,D.G,Nf))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),D=x;var K=u;if(D.na=kx(D,D.L?D.ba:null,D.W),K.L){ax(D.h,K);var xe=K,vt=D.O;vt&&(xe.H=vt),xe.D&&(pf(xe),Mc(xe)),D.g=K}else Sx(D);x.i.length>0&&$c(x)}else Me[0]!="stop"&&Me[0]!="close"||wi(x,7);else x.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?wi(x,7):_f(x):Me[0]!="noop"&&x.l&&x.l.qa(Me),x.A=0)}}Ra(4)}catch{}}var iA=class{constructor(u,m){this.g=u,this.map=m}};function sx(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ix(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ox(u){return u.h?1:u.g?u.g.size:0}function gf(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function yf(u,m){u.g?u.g.add(m):u.h=m}function ax(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}sx.prototype.cancel=function(){if(this.i=lx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function lx(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const x of u.g.values())m=m.concat(x.G);return m}return v(u.i)}var cx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oA(u,m){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const D=u[x].indexOf("=");let M,U=null;D>=0?(M=u[x].substring(0,D),U=u[x].substring(D+1)):M=u[x],m(M,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function as(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof as?(this.l=u.l,Ma(this,u.j),this.o=u.o,this.g=u.g,Va(this,u.u),this.h=u.h,vf(this,mx(u.i)),this.m=u.m):u&&(m=String(u).match(cx))?(this.l=!1,Ma(this,m[1]||"",!0),this.o=Fa(m[2]||""),this.g=Fa(m[3]||"",!0),Va(this,m[4]),this.h=Fa(m[5]||"",!0),vf(this,m[6]||"",!0),this.m=Fa(m[7]||"")):(this.l=!1,this.i=new Ba(null,this.l))}as.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Ua(m,ux,!0),":");var x=this.g;return(x||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ua(m,ux,!0),"@"),u.push(La(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Ua(x,x.charAt(0)=="/"?cA:lA,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Ua(x,dA)),u.join("")},as.prototype.resolve=function(u){const m=ar(this);let x=!!u.j;x?Ma(m,u.j):x=!!u.o,x?m.o=u.o:x=!!u.g,x?m.g=u.g:x=u.u!=null;var D=u.h;if(x)Va(m,u.u);else if(x=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var M=m.h.lastIndexOf("/");M!=-1&&(D=m.h.slice(0,M+1)+D)}if(M=D,M==".."||M==".")D="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){D=M.lastIndexOf("/",0)==0,M=M.split("/");const U=[];for(let K=0;K<M.length;){const xe=M[K++];xe=="."?D&&K==M.length&&U.push(""):xe==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),D&&K==M.length&&U.push("")):(U.push(xe),D=!0)}D=U.join("/")}else D=M}return x?m.h=D:x=u.i.toString()!=="",x?vf(m,mx(u.i)):x=!!u.m,x&&(m.m=u.m),m};function ar(u){return new as(u)}function Ma(u,m,x){u.j=x?Fa(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Va(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function vf(u,m,x){m instanceof Ba?(u.i=m,hA(u.i,u.l)):(x||(m=Ua(m,uA)),u.i=new Ba(m,u.l))}function ze(u,m,x){u.i.set(m,x)}function Vc(u){return ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Fa(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ua(u,m,x){return typeof u=="string"?(u=encodeURI(u).replace(m,aA),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function aA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ux=/[#\/\?@]/g,lA=/[#\?:]/g,cA=/[#\?]/g,uA=/[#\?@]/g,dA=/#/g;function Ba(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function xi(u){u.g||(u.g=new Map,u.h=0,u.i&&oA(u.i,function(m,x){u.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}t=Ba.prototype,t.add=function(u,m){xi(this),this.i=null,u=ao(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(m),this.h+=1,this};function dx(u,m){xi(u),m=ao(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function hx(u,m){return xi(u),m=ao(u,m),u.g.has(m)}t.forEach=function(u,m){xi(this),this.g.forEach(function(x,D){x.forEach(function(M){u.call(m,M,D,this)},this)},this)};function fx(u,m){xi(u);let x=[];if(typeof m=="string")hx(u,m)&&(x=x.concat(u.g.get(ao(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)x=x.concat(u[m]);return x}t.set=function(u,m){return xi(this),this.i=null,u=ao(this,u),hx(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=fx(this,u),u.length>0?String(u[0]):m):m};function px(u,m,x){dx(u,m),x.length>0&&(u.i=null,u.g.set(ao(u,m),v(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let D=0;D<m.length;D++){var x=m[D];const M=La(x);x=fx(this,x);for(let U=0;U<x.length;U++){let K=M;x[U]!==""&&(K+="="+La(x[U])),u.push(K)}}return this.i=u.join("&")};function mx(u){const m=new Ba;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ao(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function hA(u,m){m&&!u.j&&(xi(u),u.i=null,u.g.forEach(function(x,D){const M=D.toLowerCase();D!=M&&(dx(this,D),px(this,M,x))},u)),u.j=m}function fA(u,m){const x=new Da;if(a.Image){const D=new Image;D.onload=h(ls,x,"TestLoadImage: loaded",!0,m,D),D.onerror=h(ls,x,"TestLoadImage: error",!1,m,D),D.onabort=h(ls,x,"TestLoadImage: abort",!1,m,D),D.ontimeout=h(ls,x,"TestLoadImage: timeout",!1,m,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else m(!1)}function pA(u,m){const x=new Da,D=new AbortController,M=setTimeout(()=>{D.abort(),ls(x,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:D.signal}).then(U=>{clearTimeout(M),U.ok?ls(x,"TestPingServer: ok",!0,m):ls(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),ls(x,"TestPingServer: error",!1,m)})}function ls(u,m,x,D,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),D(x)}catch{}}function mA(){this.g=new Xj}function xf(u){this.i=u.Sb||null,this.h=u.ab||!1}f(xf,Wv),xf.prototype.g=function(){return new Fc(this.i,this.h)};function Fc(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Fc,at),t=Fc.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||a).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gx(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function gx(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$a(this):za(this),this.readyState==3&&gx(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,$a(this))},t.Na=function(u){this.g&&(this.response=u,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(u){u.readyState=4,u.l=null,u.j=null,u.B=null,za(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=m.next();return u.join(`\r
`)};function za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yx(u){let m="";return W(u,function(x,D){m+=D,m+=":",m+=x,m+=`\r
`}),m}function wf(u,m,x){e:{for(D in x){var D=!1;break e}D=!0}D||(x=yx(x),typeof u=="string"?x!=null&&La(x):ze(u,m,x))}function nt(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(nt,at);var gA=/^https?$/i,yA=["POST","PUT"];t=nt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,x,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jv.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(U){vx(this,U);return}if(u=x||"",x=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var M in D)x.set(M,D[M]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const U of D.keys())x.set(U,D.get(U));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(x.keys()).find(U=>U.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(yA,m,void 0)>=0)||D||M||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,K]of x)this.g.setRequestHeader(U,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){vx(this,U)}};function vx(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,xx(u),Uc(u)}function xx(u){u.A||(u.A=!0,Gt(u,"complete"),Gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Gt(this,"complete"),Gt(this,"abort"),Uc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Uc(this,!0)),nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wx(this):this.Xa())},t.Xa=function(){wx(this)};function wx(u){if(u.h&&typeof i<"u"){if(u.v&&cs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Gt(u,"readystatechange"),cs(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var D;if(D=U===0){let K=String(u.D).match(cx)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),D=!gA.test(K?K.toLowerCase():"")}x=D}if(x)Gt(u,"complete"),Gt(u,"success");else{u.o=6;try{var M=cs(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",xx(u)}}finally{Uc(u)}}}}function Uc(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,m||Gt(u,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return cs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Yj(m)}};function _x(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vA(u){const m={};u=(u.g&&cs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(P(u[D]))continue;var x=nA(u[D]);const M=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const U=m[M]||[];m[M]=U,U.push(x)}re(m,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(u,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||m}function bx(u){this.za=0,this.i=[],this.j=new Da,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ha("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ha("baseRetryDelayMs",5e3,u),this.Za=Ha("retryDelaySeedMs",1e4,u),this.Ta=Ha("forwardChannelMaxRetries",2,u),this.va=Ha("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new sx(u&&u.concurrentRequestLimit),this.Ba=new mA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bx.prototype,t.ka=8,t.I=1,t.connect=function(u,m,x,D){Kt(0),this.W=u,this.H=m||{},x&&D!==void 0&&(this.H.OSID=x,this.H.OAID=D),this.F=this.X,this.J=kx(this,null,this.W),$c(this)};function _f(u){if(Ex(u),u.I==3){var m=u.V++,x=ar(u.J);if(ze(x,"SID",u.M),ze(x,"RID",m),ze(x,"TYPE","terminate"),Wa(u,x),m=new os(u,u.j,m),m.M=2,m.A=Vc(ar(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(m.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=m.A,x=!0),x||(m.g=Rx(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Mc(m)}Ax(u)}function Bc(u){u.g&&(Ef(u),u.g.cancel(),u.g=null)}function Ex(u){Bc(u),u.v&&(a.clearTimeout(u.v),u.v=null),zc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function $c(u){if(!ix(u.h)&&!u.m){u.m=!0;var m=u.Ea;L||y(),A||(L(),A=!0),N.add(m,u),u.D=0}}function xA(u,m){return ox(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Pa(d(u.Ea,u,m),jx(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new os(this,this.j,u);let U=this.o;if(this.U&&(U?(U=F(U),G(U,this.U)):U=this.U),this.u!==null||this.R||(M.J=U,U=null),this.S)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var D=this.i[x];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(m+=D,m>4096){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=Tx(this,M,m),x=ar(this.J),ze(x,"RID",u),ze(x,"CVER",22),this.G&&ze(x,"X-HTTP-Session-Id",this.G),Wa(this,x),U&&(this.R?m="headers="+La(yx(U))+"&"+m:this.u&&wf(x,this.u,U)),yf(this.h,M),this.Ra&&ze(x,"TYPE","init"),this.S?(ze(x,"$req",m),ze(x,"SID","null"),M.U=!0,ff(M,x,null)):ff(M,x,m),this.I=2}}else this.I==3&&(u?Nx(this,u):this.i.length==0||ix(this.h)||Nx(this))};function Nx(u,m){var x;m?x=m.l:x=u.V++;const D=ar(u.J);ze(D,"SID",u.M),ze(D,"RID",x),ze(D,"AID",u.K),Wa(u,D),u.u&&u.o&&wf(D,u.u,u.o),x=new os(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Tx(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),yf(u.h,x),ff(x,D,m)}function Wa(u,m){u.H&&W(u.H,function(x,D){ze(m,D,x)}),u.l&&W({},function(x,D){ze(m,D,x)})}function Tx(u,m,x){x=Math.min(u.i.length,x);const D=u.l?d(u.l.Ka,u.l,u):null;e:{var M=u.i;let xe=-1;for(;;){const vt=["count="+x];xe==-1?x>0?(xe=M[0].g,vt.push("ofs="+xe)):xe=0:vt.push("ofs="+xe);let Me=!0;for(let Et=0;Et<x;Et++){var U=M[Et].g;const lr=M[Et].map;if(U-=xe,U<0)xe=Math.max(0,M[Et].g-100),Me=!1;else try{U="req"+U+"_"||"";try{var K=lr instanceof Map?lr:Object.entries(lr);for(const[_i,us]of K){let ds=us;l(us)&&(ds=lf(us)),vt.push(U+_i+"="+encodeURIComponent(ds))}}catch(_i){throw vt.push(U+"type="+encodeURIComponent("_badmap")),_i}}catch{D&&D(lr)}}if(Me){K=vt.join("&");break e}}K=void 0}return u=u.i.splice(0,x),m.G=u,K}function Sx(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;L||y(),A||(L(),A=!0),N.add(m,u),u.A=0}}function bf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Pa(d(u.Da,u),jx(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Cx(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Pa(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Bc(this),Cx(this))};function Ef(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function Cx(u){u.g=new os(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=ar(u.na);ze(m,"RID","rpc"),ze(m,"SID",u.M),ze(m,"AID",u.K),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ze(m,"TO",u.ia),ze(m,"TYPE","xmlhttp"),Wa(u,m),u.u&&u.o&&wf(m,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=Vc(ar(m)),x.u=null,x.R=!0,tx(x,u)}t.Va=function(){this.C!=null&&(this.C=null,Bc(this),bf(this),Kt(19))};function zc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Ix(u,m){var x=null;if(u.g==m){zc(u),Ef(u),u.g=null;var D=2}else if(gf(u.h,m))x=m.G,ax(u.h,m),D=1;else return;if(u.I!=0){if(m.o)if(D==1){x=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;D=Lc(),Gt(D,new Yv(D,x)),$c(u)}else Sx(u);else if(M=m.m,M==3||M==0&&m.X>0||!(D==1&&xA(u,m)||D==2&&bf(u)))switch(x&&x.length>0&&(m=u.h,m.i=m.i.concat(x)),M){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function jx(u,m){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var x=d(u.bb,u),D=u.Ua;const M=!D;D=new as(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ma(D,"https"),Vc(D),M?fA(D.toString(),x):pA(D.toString(),x)}else Kt(2);u.I=0,u.l&&u.l.pa(m),Ax(u),Ex(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Ax(u){if(u.I=0,u.ja=[],u.l){const m=lx(u.h);(m.length!=0||u.i.length!=0)&&(I(u.ja,m),I(u.ja,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.oa()}}function kx(u,m,x){var D=x instanceof as?ar(x):new as(x);if(D.g!="")m&&(D.g=m+"."+D.g),Va(D,D.u);else{var M=a.location;D=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const U=new as(null);D&&Ma(U,D),m&&(U.g=m),M&&Va(U,M),x&&(U.h=x),D=U}return x=u.G,m=u.wa,x&&m&&ze(D,x,m),ze(D,"VER",u.ka),Wa(u,D),D}function Rx(u,m,x){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new nt(new xf({ab:x})):new nt(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Px(){}t=Px.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Hc(){}Hc.prototype.g=function(u,m){return new xn(u,m)};function xn(u,m){at.call(this),this.g=new bx(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new lo(this)}f(xn,at),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){_f(this.g)},xn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=lf(u),u=x);m.i.push(new iA(m.Ya++,u)),m.I==3&&$c(m)},xn.prototype.N=function(){this.g.l=null,delete this.j,_f(this.g),delete this.g,xn.Z.N.call(this)};function Dx(u){cf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const x in m){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}f(Dx,cf);function Lx(){uf.call(this),this.status=1}f(Lx,uf);function lo(u){this.g=u}f(lo,Px),lo.prototype.ra=function(){Gt(this.g,"a")},lo.prototype.qa=function(u){Gt(this.g,new Dx(u))},lo.prototype.pa=function(u){Gt(this.g,new Lx)},lo.prototype.oa=function(){Gt(this.g,"b")},Hc.prototype.createWebChannel=Hc.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,NT=function(){return new Hc},ET=function(){return Lc()},bT=yi,Lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oc.NO_ERROR=0,Oc.TIMEOUT=8,Oc.HTTP_ERROR=6,Bu=Oc,Xv.COMPLETE="complete",_T=Xv,qv.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",at.prototype.listen=at.prototype.J,cl=qv,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,wT=nt}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const U0="@firebase/firestore",B0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new xh("@firebase/firestore");function po(){return qi.logLevel}function X(t,...e){if(qi.logLevel<=be.DEBUG){const n=e.map(Ry);qi.debug(`Firestore (${ya}): ${t}`,...n)}}function Xr(t,...e){if(qi.logLevel<=be.ERROR){const n=e.map(Ry);qi.error(`Firestore (${ya}): ${t}`,...n)}}function Xo(t,...e){if(qi.logLevel<=be.WARN){const n=e.map(Ry);qi.warn(`Firestore (${ya}): ${t}`,...n)}}function Ry(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,TT(t,r,n)}function TT(t,e,n){let r=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xr(r),new Error(r)}function Ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||TT(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class xM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wM{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new ST(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class _M{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _M(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=NM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Om(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return lp(s)===lp(i)?Ee(s,i):lp(s)?1:-1}return Ee(t.length,e.length)}const TM=55296,SM=57343;function lp(t){const e=t.charCodeAt(0);return e>=TM&&e<=SM}function Jo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="__name__";class dr{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&de(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=dr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ee(e.length,n.length)}static compareSegments(e,n){const r=dr.isNumericId(e),s=dr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?dr.extractNumericId(e).compare(dr.extractNumericId(n)):Om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hs.fromString(e.substring(4,e.length-2))}}class Be extends dr{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const CM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends dr{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return CM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z0}static keyField(){return new kt([z0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Y(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Be.fromString(e))}static fromName(e){return new ce(Be.fromString(e).popFirst(5))}static empty(){return new ce(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e,n){if(!n)throw new Y(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IM(t,e,n,r){if(e===!0&&r===!0)throw new Y(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H0(t){if(!ce.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W0(t){if(ce.isDocumentKey(t))throw new Y(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function IT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sh(t);throw new Y(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jM(t,e){if(e<=0)throw new Y(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function bc(t,e){if(!IT(t))throw new Y(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,G0=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*G0);return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q0)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G0}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:yt("string",qe._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new qe(0,0))}static max(){return new pe(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function AM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new Qs(s,ce.empty(),e)}function kM(t){return new Qs(t.readTime,t.key,Jl)}class Qs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qs(pe.min(),ce.empty(),Jl)}static max(){return new Qs(pe.max(),ce.empty(),Jl)}}function RM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==PM)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function LM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ch.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy=-1;function Ih(t){return t==null}function kd(t){return t===0&&1/t==-1/0}function OM(t){return typeof t=="number"&&Number.isInteger(t)&&!kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="";function MM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=K0(e)),e=VM(t.get(n),e);return K0(e)}function VM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case jT:n+="";break;default:n+=i}}return n}function K0(t){return t+jT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function AT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new du(this.root,e,this.comparator,!1)}getReverseIterator(){return new du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new du(this.root,e,this.comparator,!0)}}class du{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??At.RED,this.left=s??At.EMPTY,this.right=i??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new At(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return At.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new En([])}unionWith(e){let n=new _t(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kT("Invalid base64 string: "+i):i}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const UM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=UM.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xs(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="server_timestamp",PT="__type__",DT="__previous_value__",LT="__local_write_time__";function Ly(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[PT])==null?void 0:r.stringValue)===RT}function jh(t){const e=t.mapValue.fields[DT];return Ly(e)?jh(e):e}function Zl(t){const e=Ys(t.mapValue.fields[LT].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Rd="(default)";class ec{constructor(e,n){this.projectId=e,this.database=n||Rd}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="__type__",$M="__max__",hu={mapValue:{}},MT="__vector__",Pd="value";function Js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ly(t)?4:HM(t)?9007199254740991:zM(t)?10:11:de(28295,{value:t})}function Cr(t,e){if(t===e)return!0;const n=Js(t);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ys(s.timestampValue),l=Ys(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Xs(s.bytesValue).isEqual(Xs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lt(s.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(s.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lt(s.integerValue)===lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=lt(s.doubleValue),l=lt(i.doubleValue);return a===l?kd(a)===kd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Jo(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Q0(a)!==Q0(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Cr(a[c],l[c])))return!1;return!0}(t,e);default:return de(52216,{left:t})}}function tc(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;const n=Js(t),r=Js(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=lt(i.integerValue||i.doubleValue),c=lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return X0(t.timestampValue,e.timestampValue);case 4:return X0(Zl(t),Zl(e));case 5:return Om(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Xs(i),c=Xs(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ee(l[d],c[d]);if(h!==0)return h}return Ee(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ee(lt(i.latitude),lt(a.latitude));return l!==0?l:Ee(lt(i.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return J0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,v,I,_;const l=i.fields||{},c=a.fields||{},d=(p=l[Pd])==null?void 0:p.arrayValue,h=(v=c[Pd])==null?void 0:v.arrayValue,f=Ee(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return f!==0?f:J0(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===hu.mapValue&&a===hu.mapValue)return 0;if(i===hu.mapValue)return 1;if(a===hu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Om(c[f],h[f]);if(p!==0)return p;const v=Zo(l[c[f]],d[h[f]]);if(v!==0)return v}return Ee(c.length,h.length)}(t.mapValue,e.mapValue);default:throw de(23264,{he:n})}}function X0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Ys(t),r=Ys(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function J0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zo(n[s],r[s]);if(i)return i}return Ee(n.length,r.length)}function ea(t){return Mm(t)}function Mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ys(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Mm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Mm(n.fields[a])}`;return s+"}"}(t.mapValue):de(61005,{value:t})}function $u(t){switch(Js(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jh(t);return e?16+$u(e):16;case 5:return 2*t.stringValue.length;case 6:return Xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+$u(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return hi(r.fields,(i,a)=>{s+=i.length+$u(a)}),s}(t.mapValue);default:throw de(13486,{value:t})}}function Z0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vm(t){return!!t&&"integerValue"in t}function Oy(t){return!!t&&"arrayValue"in t}function e_(t){return!!t&&"nullValue"in t}function t_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zu(t){return!!t&&"mapValue"in t}function zM(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[OT])==null?void 0:r.stringValue)===MT}function Tl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tl(t.arrayValue.values[n]);return e}return{...t}}function HM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Tl(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());zu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new dn(Tl(this.value))}}function VT(t){const e=[];return hi(t.fields,(n,r)=>{const s=new kt([n]);if(zu(r)){const i=VT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Bt(e,0,pe.min(),pe.min(),pe.min(),dn.empty(),0)}static newFoundDocument(e,n,r,s){return new Bt(e,1,n,pe.min(),r,s,0)}static newNoDocument(e,n){return new Bt(e,2,n,pe.min(),pe.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,pe.min(),pe.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function n_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(a.referenceValue),n.key):r=Zo(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function r_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function WM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{}class gt extends FT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GM(e,n,r):n==="array-contains"?new YM(e,r):n==="in"?new XM(e,r):n==="not-in"?new JM(e,r):n==="array-contains-any"?new ZM(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KM(e,r):new QM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zo(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends FT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sr(e,n)}matches(e){return UT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UT(t){return t.op==="and"}function BT(t){return qM(t)&&UT(t)}function qM(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function Fm(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+ea(t.value);if(BT(t))return t.filters.map(e=>Fm(e)).join(",");{const e=t.filters.map(n=>Fm(n)).join(",");return`${t.op}(${e})`}}function $T(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Cr(r.value,s.value)}(t,e):t instanceof sr?function(r,s){return s instanceof sr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&$T(a,s.filters[l]),!0):!1}(t,e):void de(19439)}function zT(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(zT).join(" ,")+"}"}(t):"Filter"}class GM extends gt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class KM extends gt{constructor(e,n){super(e,"in",n),this.keys=HT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QM extends gt{constructor(e,n){super(e,"not-in",n),this.keys=HT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class YM extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Oy(n)&&tc(n.arrayValue,this.value)}}class XM extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tc(this.value.arrayValue,n)}}class JM extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tc(this.value.arrayValue,n)}}class ZM extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function s_(t,e=null,n=[],r=[],s=null,i=null,a=null){return new eV(t,e,n,r,s,i,a)}function My(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ea(r)).join(",")),e.Te=n}return e.Te}function Vy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$T(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!r_(t.startAt,e.startAt)&&r_(t.endAt,e.endAt)}function Um(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tV(t,e,n,r,s,i,a,l){return new wa(t,e,n,r,s,i,a,l)}function Ah(t){return new wa(t)}function i_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WT(t){return t.collectionGroup!==null}function Sl(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new _t(kt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new nc(i,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new nc(kt.keyField(),r))}return e.Ie}function _r(t){const e=fe(t);return e.Ee||(e.Ee=qT(e,Sl(t))),e.Ee}function nV(t){const e=fe(t);return e.de||(e.de=qT(e,t.explicitOrderBy)),e.de}function qT(t,e){if(t.limitType==="F")return s_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new nc(s.field,i)});const n=t.endAt?new Dd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dd(t.startAt.position,t.startAt.inclusive):null;return s_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bm(t,e){const n=t.filters.concat([e]);return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ld(t,e,n){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kh(t,e){return Vy(_r(t),_r(e))&&t.limitType===e.limitType}function GT(t){return`${My(_r(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>zT(s)).join(", ")}]`),Ih(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function Rh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Sl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=n_(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Sl(r),s)||r.endAt&&!function(a,l,c){const d=n_(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Sl(r),s))}(t,e)}function rV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KT(t){return(e,n)=>{let r=!1;for(const s of Sl(t)){const i=sV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sV(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Zo(c,d):de(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return AT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new et(ce.comparator);function Jr(){return iV}const QT=new et(ce.comparator);function ul(...t){let e=QT;for(const n of t)e=e.insert(n.key,n);return e}function YT(t){let e=QT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return Cl()}function XT(){return Cl()}function Cl(){return new so(t=>t.toString(),(t,e)=>t.isEqual(e))}const oV=new et(ce.comparator),aV=new _t(ce.comparator);function Ne(...t){let e=aV;for(const n of t)e=e.add(n);return e}const lV=new _t(Ee);function cV(){return lV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function JT(t){return{integerValue:""+t}}function ZT(t,e){return OM(e)?JT(e):Fy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(){this._=void 0}}function uV(t,e,n){return t instanceof Od?function(s,i){const a={fields:{[PT]:{stringValue:RT},[LT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ly(i)&&(i=jh(i)),i&&(a.fields[DT]=i),{mapValue:a}}(n,e):t instanceof ta?tS(t,e):t instanceof rc?nS(t,e):function(s,i){const a=eS(s,i),l=o_(a)+o_(s.Ae);return Vm(a)&&Vm(s.Ae)?JT(l):Fy(s.serializer,l)}(t,e)}function dV(t,e,n){return t instanceof ta?tS(t,e):t instanceof rc?nS(t,e):n}function eS(t,e){return t instanceof sc?function(r){return Vm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Od extends Ph{}class ta extends Ph{constructor(e){super(),this.elements=e}}function tS(t,e){const n=rS(e);for(const r of t.elements)n.some(s=>Cr(s,r))||n.push(r);return{arrayValue:{values:n}}}class rc extends Ph{constructor(e){super(),this.elements=e}}function nS(t,e){let n=rS(e);for(const r of t.elements)n=n.filter(s=>!Cr(s,r));return{arrayValue:{values:n}}}class sc extends Ph{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function o_(t){return lt(t.integerValue||t.doubleValue)}function rS(t){return Oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n){this.field=e,this.transform=n}}function hV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ta&&s instanceof ta||r instanceof rc&&s instanceof rc?Jo(r.elements,s.elements,Cr):r instanceof sc&&s instanceof sc?Cr(r.Ae,s.Ae):r instanceof Od&&s instanceof Od}(t.transform,e.transform)}class fV{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dh{}function iS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uy(t.key,Mn.none()):new Ec(t.key,t.data,Mn.none());{const n=t.data,r=dn.empty();let s=new _t(kt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new fi(t.key,r,new En(s.toArray()),Mn.none())}}function pV(t,e,n){t instanceof Ec?function(s,i,a){const l=s.value.clone(),c=l_(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(s,i,a){if(!Hu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=l_(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(oS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,r){return t instanceof Ec?function(i,a,l,c){if(!Hu(i.precondition,a))return l;const d=i.value.clone(),h=c_(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(i,a,l,c){if(!Hu(i.precondition,a))return l;const d=c_(i.fieldTransforms,c,a),h=a.data;return h.setAll(oS(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return Hu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function mV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=eS(r.transform,s||null);i!=null&&(n===null&&(n=dn.empty()),n.set(r.field,i))}return n||null}function a_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jo(r,s,(i,a)=>hV(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ec extends Dh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fi extends Dh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function oS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function l_(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,dV(a,l,n[s]))}return r}function c_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,uV(i,a,e))}return r}class Uy extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gV extends Dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=iS(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(n,r)=>a_(n,r))&&Jo(this.baseMutations,e.baseMutations,(n,r)=>a_(n,r))}}class By{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return oV}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new By(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Te;function _V(t){switch(t){case B.OK:return de(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function aS(t){if(t===void 0)return Xr("GRPC error has no .code"),B.UNKNOWN;switch(t){case pt.OK:return B.OK;case pt.CANCELLED:return B.CANCELLED;case pt.UNKNOWN:return B.UNKNOWN;case pt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case pt.INTERNAL:return B.INTERNAL;case pt.UNAVAILABLE:return B.UNAVAILABLE;case pt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case pt.NOT_FOUND:return B.NOT_FOUND;case pt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case pt.ABORTED:return B.ABORTED;case pt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case pt.DATA_LOSS:return B.DATA_LOSS;default:return de(39323,{code:t})}}(Te=pt||(pt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new Hs([4294967295,4294967295],0);function u_(t){const e=bV().encode(t),n=new xT;return n.update(e),new Uint8Array(n.digest())}function d_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hs([n,r],0),new Hs([s,i],0)]}class $y{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(r<0)throw new dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hs.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hs.fromNumber(r)));return s.compare(EV)===1&&(s=new Hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=u_(e),[r,s]=d_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new $y(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=u_(e),[r,s]=d_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Nc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lh(pe.min(),s,new et(Ee),Jr(),Ne())}}class Nc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nc(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class lS{constructor(e,n){this.targetId=e,this.Ce=n}}class cS{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class h_{constructor(){this.ve=0,this.Fe=f_(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),n=Ne(),r=Ne();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:de(38017,{changeType:i})}}),new Nc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=f_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jr(),this.Je=fu(),this.He=fu(),this.Ye=new et(Ee)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Um(i))if(r===0){const a=new ce(i.path);this.et(n,a,Bt.newNoDocument(a,pe.min()))}else Ae(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Xs(r).toUint8Array()}catch(c){if(c instanceof kT)return Xo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new $y(a,s,i)}catch(c){return Xo(c instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Um(l.target)){const c=new ce(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Bt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Ne();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Lh(e,n,this.Ye,this.je,r);return this.je=Jr(),this.Je=fu(),this.He=fu(),this.Ye=new et(Ee),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new h_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(Ee),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(Ee),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new h_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fu(){return new et(ce.comparator)}function f_(){return new et(ce.comparator)}const TV={asc:"ASCENDING",desc:"DESCENDING"},SV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CV={and:"AND",or:"OR"};class IV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $m(t,e){return t.useProto3Json||Ih(e)?e:{value:e}}function Md(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jV(t,e){return Md(t,e.toTimestamp())}function br(t){return Ae(!!t,49232),pe.fromTimestamp(function(n){const r=Ys(n);return new qe(r.seconds,r.nanos)}(t))}function zy(t,e){return zm(t,e).canonicalString()}function zm(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dS(t){const e=Be.fromString(t);return Ae(yS(e),10190,{key:e.toString()}),e}function Hm(t,e){return zy(t.databaseId,e.path)}function cp(t,e){const n=dS(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(fS(n))}function hS(t,e){return zy(t.databaseId,e)}function AV(t){const e=dS(t);return e.length===4?Be.emptyPath():fS(e)}function Wm(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fS(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function p_(t,e,n){return{name:Hm(t,e),fields:n.value.mapValue.fields}}function kV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:de(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ae(h===void 0||typeof h=="string",58123),Lt.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?B.UNKNOWN:aS(d.code);return new Y(h,d.message||"")}(a);n=new cS(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=cp(t,r.document.name),i=br(r.document.updateTime),a=r.document.createTime?br(r.document.createTime):pe.min(),l=new dn({mapValue:{fields:r.document.fields}}),c=Bt.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Wu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=cp(t,r.document),i=r.readTime?br(r.readTime):pe.min(),a=Bt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Wu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=cp(t,r.document),i=r.removedTargetIds||[];n=new Wu([],i,s,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new wV(s,i),l=r.targetId;n=new lS(l,a)}}return n}function RV(t,e){let n;if(e instanceof Ec)n={update:p_(t,e.key,e.value)};else if(e instanceof Uy)n={delete:Hm(t,e.key)};else if(e instanceof fi)n={update:p_(t,e.key,e.data),updateMask:BV(e.fieldMask)};else{if(!(e instanceof gV))return de(16599,{Vt:e.type});n={verify:Hm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Od)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ta)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw de(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de(27497)}(t,e.precondition)),n}function PV(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?br(s.updateTime):br(i);return a.isEqual(pe.min())&&(a=br(i)),new fV(a,s.transformResults||[])}(n,e))):[]}function DV(t,e){return{documents:[hS(t,e.path)]}}function pS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hS(t,s);const i=function(d){if(d.length!==0)return gS(sr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Ss(p.field),direction:VV(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=$m(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function LV(t,e,n,r){const{ft:s,parent:i}=pS(t,e),a={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;a[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:Ss(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:Ss(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},gt:a,parent:i}}function OV(t){let e=AV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=mS(f);return p instanceof sr&&BT(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(p=>function(I){return new nc(go(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Ih(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,v=f.values||[];return new Dd(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,v=f.values||[];return new Dd(v,p)}(n.endAt)),tV(e,s,a,i,l,"F",c,d)}function MV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=go(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=go(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=go(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=go(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(go(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>mS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(n.compositeFilter.op))}(t):de(30097,{filter:t})}function VV(t){return TV[t]}function FV(t){return SV[t]}function UV(t){return CV[t]}function Ss(t){return{fieldPath:t.canonicalString()}}function go(t){return kt.fromServerFormat(t.fieldPath)}function gS(t){return t instanceof gt?function(n){if(n.op==="=="){if(t_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NAN"}};if(e_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NAN"}};if(e_(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(n.field),op:FV(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(s=>gS(s));return r.length===1?r[0]:{compositeFilter:{op:UV(n.op),filters:r}}}(t):de(54877,{filter:t})}function BV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r,s,i=pe.min(),a=pe.min(),l=Lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.yt=e}}function zV(t){const e=OV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.Cn=new WV}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Qs.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class WV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vS=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(vS,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="LruGarbageCollector",qV=1048576;function y_([t,e],[n,r]){const s=Ee(t,n);return s===0?Ee(e,r):s}class GV{constructor(e){this.Ir=e,this.buffer=new _t(y_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();y_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(g_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xa(n)?X(g_,"Ignoring IndexedDB error during garbage collection: ",n):await va(n)}await this.Vr(3e5)})}}class QV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Ch.ce);const r=new GV(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(m_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),po()<=be.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function YV(t,e){return new QV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.changes=new so(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Il(r.mutation,s,En.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ne()){const s=ki();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ul();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Jr();const a=Cl(),l=function(){return Cl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof fi)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Il(h.mutation,d,h.mutation.getFieldMask(),qe.now())):a.set(d.key,En.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new JV(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Cl();let s=new et((a,l)=>a-l),i=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||En.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Ne()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=XT();h.forEach(p=>{if(!i.has(p)){const v=iS(n.get(p),r.get(p));v!==null&&f.set(p,v),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return $.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(ki());let l=Jl,c=i;return a.next(d=>$.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Ne())).next(h=>({batchId:l,changes:YT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ul();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,c=>{const d=function(f,p){return new wa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Bt.newInvalidDocument(h)))});let l=ul();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Il(h.mutation,d,En.empty(),qe.now()),Rh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:br(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:zV(s.bundledQuery),readTime:br(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.overlays=new et(ce.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ki();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=ki(),i=n.length+1,a=new ce(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new et((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ki(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ki(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return $.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new vV(n,r));let i=this.qr.get(n);i===void 0&&(i=Ne(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.Qr=new _t(Nt.$r),this.Ur=new _t(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new Be([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new Be([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Ne();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ee(e.Yr,n.Yr)}static Kr(e,n){return Ee(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Nt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new yV(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(a)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Dy:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Ee);return n.forEach(s=>{const i=new Nt(s,0),a=new Nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const a=new Nt(new ce(i),0);let l=new _t(Ee);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),$.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.ri=e,this.docs=function(){return new et(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=Jr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Bt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jr();const a=n.path,l=new ce(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||RM(kM(h),r)<=0||(s.has(h.key)||Rh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){de(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new i3(this)}getSize(e){return $.resolve(this.size)}}class i3 extends XV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.persistence=e,this.si=new so(n=>My(n),Vy),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new Hy,this.targetCount=0,this.ai=na.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ch(0),this.li=!1,this.li=!0,this.hi=new n3,this.referenceDelegate=e(this),this.Pi=new o3(this),this.indexManager=new HV,this.remoteDocumentCache=function(s){return new s3(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new $V(n),this.Ii=new e3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new t3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new r3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new a3(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class a3 extends DM{constructor(e){super(),this.currentSequenceNumber=e}}class Wy{constructor(e){this.persistence=e,this.Ri=new Hy,this.Vi=null}static mi(e){return new Wy(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=ce.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.pi=new so(r=>MM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=YV(this,n)}static mi(e,n){return new Vd(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,pe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$u(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ne(),s=Ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return hP()?8:LM(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new l3;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(po()<=be.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(po()<=be.DEBUG&&X("QueryEngine","Query:",mo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(po()<=be.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):$.resolve())}ys(e,n){if(i_(n))return $.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ld(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ne(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Ld(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return i_(n)||s.isEqual(pe.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?$.resolve(null):(po()<=be.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mo(n)),this.vs(e,a,n,AM(s,Jl)).next(l=>l))})}Ds(e,n){let r=new _t(KT(e));return n.forEach((s,i)=>{Rh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return po()<=be.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,Qs.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="LocalStore",u3=3e8;class d3{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new et(Ee),this.xs=new so(i=>My(i),Vy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function h3(t,e,n,r){return new d3(t,e,n,r)}async function wS(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Ne();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function f3(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,p=f.keys();let v=$.resolve();return p.forEach(I=>{v=v.next(()=>h.getEntry(c,I)).next(_=>{const S=d.docVersions.get(I);Ae(S!==null,48541),_.version.compareTo(S)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ne();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _S(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function p3(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let v=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Lt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(_,S,E){return _.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=u3?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,v,h)&&l.push(n.Pi.updateTargetData(i,v))});let c=Jr(),d=Ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(m3(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(pe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return $.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function m3(t,e,n){let r=Ne(),s=Ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Jr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):X(Gy,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function g3(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y3(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new ks(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function qm(t,e,n){const r=fe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!xa(a))throw a;X(Gy,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function v_(t,e,n){const r=fe(t);let s=pe.min(),i=Ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=fe(c),p=f.xs.get(h);return p!==void 0?$.resolve(f.Ms.get(p)):f.Pi.getTargetData(d,h)}(r,a,_r(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:pe.min(),n?i:Ne())).next(l=>(v3(r,rV(e),l),{documents:l,Qs:i})))}function v3(t,e,n){let r=t.Os.get(e)||pe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class x_{constructor(){this.activeTargetIds=cV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x3{constructor(){this.Mo=new x_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new x_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="ConnectivityMonitor";class __{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(w_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(w_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu=null;function Gm(){return pu===null?pu=function(){return 268435456+Math.round(2147483648*Math.random())}():pu++,"0x"+pu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="RestConnection",_3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Rd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=Gm(),l=this.zo(e,n.toUriEncodedString());X(up,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=li(d);return this.Jo(e,l,c,r,h).then(f=>(X(up,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Xo(up,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=_3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class N3 extends b3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=Gm();return new Promise((l,c)=>{const d=new wT;d.setWithCredentials(!0),d.listenOnce(_T.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Bu.NO_ERROR:const f=d.getResponseJson();X(Vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Bu.TIMEOUT:X(Vt,`RPC '${e}' ${a} timed out`),c(new Y(B.DEADLINE_EXCEEDED,"Request time out"));break;case Bu.HTTP_ERROR:const p=d.getStatus();if(X(Vt,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const _=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(I.status);c(new Y(_,I.message))}else c(new Y(B.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Y(B.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{X(Vt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);X(Vt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Gm(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=NT(),l=ET(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");X(Vt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let p=!1,v=!1;const I=new E3({Yo:S=>{v?X(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(p||(X(Vt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),X(Vt,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},Zo:()=>f.close()}),_=(S,E,w)=>{S.listen(E,C=>{try{w(C)}catch(R){setTimeout(()=>{throw R},0)}})};return _(f,cl.EventType.OPEN,()=>{v||(X(Vt,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),_(f,cl.EventType.CLOSE,()=>{v||(v=!0,X(Vt,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(f))}),_(f,cl.EventType.ERROR,S=>{v||(v=!0,Xo(Vt,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),I.a_(new Y(B.UNAVAILABLE,"The operation could not be completed")))}),_(f,cl.EventType.MESSAGE,S=>{var E;if(!v){const w=S.data[0];Ae(!!w,16349);const C=w,R=(C==null?void 0:C.error)||((E=C[0])==null?void 0:E.error);if(R){X(Vt,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let A=function(T){const b=pt[T];if(b!==void 0)return aS(b)}(L),N=R.message;A===void 0&&(A=B.INTERNAL,N="Unknown error status: "+L+" with message "+R.message),v=!0,I.a_(new Y(A,N)),f.close()}else X(Vt,`RPC '${e}' stream ${s} received:`,w),I.u_(w)}}),_(l,bT.STAT_EVENT,S=>{S.stat===Lm.PROXY?X(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Lm.NOPROXY&&X(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t){return new IV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_="PersistentStream";class ES{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(b_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(b_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T3 extends ES{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=kV(this.serializer,e),r=function(i){if(!("targetChange"in i))return pe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?pe.min():a.readTime?br(a.readTime):pe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Wm(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Um(c)?{documents:DV(i,c)}:{query:pS(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=uS(i,a.resumeToken);const d=$m(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(pe.min())>0){l.readTime=Md(i,a.snapshotVersion.toTimestamp());const d=$m(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=MV(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Wm(this.serializer),n.removeTarget=e,this.q_(n)}}class S3 extends ES{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=PV(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RV(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{}class I3 extends C3{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,zm(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,zm(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(B.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class j3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xr(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="RemoteStore";class A3{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{io(this)&&(X(Gi,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.Ea.add(4),await Tc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Mh(d)}(this))})}),this.Ra=new j3(r,s)}}async function Mh(t){if(io(t))for(const e of t.da)await e(!0)}async function Tc(t){for(const e of t.da)await e(!1)}function NS(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xy(n)?Yy(n):_a(n).O_()&&Qy(n,e))}function Ky(t,e){const n=fe(t),r=_a(n);n.Ia.delete(e),r.O_()&&TS(n,e),n.Ia.size===0&&(r.O_()?r.L_():io(n)&&n.Ra.set("Unknown"))}function Qy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_a(t).Y_(e)}function TS(t,e){t.Va.Ue(e),_a(t).Z_(e)}function Yy(t){t.Va=new NV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_a(t).start(),t.Ra.ua()}function Xy(t){return io(t)&&!_a(t).x_()&&t.Ia.size>0}function io(t){return fe(t).Ea.size===0}function SS(t){t.Va=void 0}async function k3(t){t.Ra.set("Online")}async function R3(t){t.Ia.forEach((e,n)=>{Qy(t,e)})}async function P3(t,e){SS(t),Xy(t)?(t.Ra.ha(e),Yy(t)):t.Ra.set("Unknown")}async function D3(t,e,n){if(t.Ra.set("Online"),e instanceof cS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){X(Gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fd(t,r)}else if(e instanceof Wu?t.Va.Ze(e):e instanceof lS?t.Va.st(e):t.Va.tt(e),!n.isEqual(pe.min()))try{const r=await _S(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),TS(i,c);const f=new ks(h.target,c,d,h.sequenceNumber);Qy(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X(Gi,"Failed to raise snapshot:",r),await Fd(t,r)}}async function Fd(t,e,n){if(!xa(e))throw e;t.Ea.add(1),await Tc(t),t.Ra.set("Offline"),n||(n=()=>_S(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(Gi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Mh(t)})}function CS(t,e){return e().catch(n=>Fd(t,n,e))}async function Vh(t){const e=fe(t),n=Zs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dy;for(;L3(e);)try{const s=await g3(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,O3(e,s)}catch(s){await Fd(e,s)}IS(e)&&jS(e)}function L3(t){return io(t)&&t.Ta.length<10}function O3(t,e){t.Ta.push(e);const n=Zs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function IS(t){return io(t)&&!Zs(t).x_()&&t.Ta.length>0}function jS(t){Zs(t).start()}async function M3(t){Zs(t).ra()}async function V3(t){const e=Zs(t);for(const n of t.Ta)e.ea(n.mutations)}async function F3(t,e,n){const r=t.Ta.shift(),s=By.from(r,e,n);await CS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Vh(t)}async function U3(t,e){e&&Zs(t).X_&&await async function(r,s){if(function(a){return _V(a)&&a!==B.ABORTED}(s.code)){const i=r.Ta.shift();Zs(r).B_(),await CS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Vh(r)}}(t,e),IS(t)&&jS(t)}async function E_(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),X(Gi,"RemoteStore received new credentials");const r=io(n);n.Ea.add(3),await Tc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Mh(n)}async function B3(t,e){const n=fe(t);e?(n.Ea.delete(2),await Mh(n)):e||(n.Ea.add(2),await Tc(n),n.Ra.set("Unknown"))}function _a(t){return t.ma||(t.ma=function(n,r,s){const i=fe(n);return i.sa(),new T3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:k3.bind(null,t),t_:R3.bind(null,t),r_:P3.bind(null,t),H_:D3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Xy(t)?Yy(t):t.Ra.set("Unknown")):(await t.ma.stop(),SS(t))})),t.ma}function Zs(t){return t.fa||(t.fa=function(n,r,s){const i=fe(n);return i.sa(),new S3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:M3.bind(null,t),r_:U3.bind(null,t),ta:V3.bind(null,t),na:F3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Vh(t)):(await t.fa.stop(),t.Ta.length>0&&(X(Gi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Jy(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(t,e){if(Xr("AsyncQueue",`${e}: ${t}`),xa(t))return new Y(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.ga=new et(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ra{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ra(e,n,Fo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class z3{constructor(){this.queries=T_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=T_(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Y(B.ABORTED,"Firestore shutting down"))}}function T_(){return new so(t=>GT(t),kh)}async function ev(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new $3,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Zy(a,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&nv(n)}async function tv(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function H3(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&nv(n)}function W3(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function nv(t){t.Ca.forEach(e=>{e.next()})}var Km,S_;(S_=Km||(Km={})).Ma="default",S_.Cache="cache";class rv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.key=e}}class kS{constructor(e){this.key=e}}class q3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=KT(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new N_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),v=Rh(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),_=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;p&&v?p.data.isEqual(v.data)?I!==_&&(r.track({type:3,doc:v}),S=!0):this.su(p,v)||(r.track({type:2,doc:v}),S=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(l=!0)):!p&&v?(r.track({type:0,doc:v}),S=!0):p&&!v&&(r.track({type:1,doc:p}),S=!0,(c||d)&&(l=!0)),S&&(v?(a=a.add(v),i=_?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(v,I){const _=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:S})}};return _(v)-_(I)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new ra(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new kS(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new AS(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sv="SyncEngine";class G3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class K3{constructor(e){this.key=e,this.hu=!1}}class Q3{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new so(l=>GT(l),kh),this.Iu=new Map,this.Eu=new Set,this.du=new et(ce.comparator),this.Au=new Map,this.Ru=new Hy,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Y3(t,e,n=!0){const r=MS(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await RS(r,e,n,!0),s}async function X3(t,e){const n=MS(t);await RS(n,e,!0,!1)}async function RS(t,e,n,r){const s=await y3(t.localStore,_r(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await J3(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&NS(t.remoteStore,s),l}async function J3(t,e,n,r,s){t.pu=(f,p,v)=>async function(_,S,E,w){let C=S.view.ru(E);C.Cs&&(C=await v_(_.localStore,S.query,!1).then(({documents:N})=>S.view.ru(N,C)));const R=w&&w.targetChanges.get(S.targetId),L=w&&w.targetMismatches.get(S.targetId)!=null,A=S.view.applyChanges(C,_.isPrimaryClient,R,L);return I_(_,S.targetId,A.au),A.snapshot}(t,f,p,v);const i=await v_(t.localStore,e,!0),a=new q3(e,i.Qs),l=a.ru(i.documents),c=Nc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);I_(t,n,d.au);const h=new G3(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Z3(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!kh(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ky(r.remoteStore,s.targetId),Qm(r,s.targetId)}).catch(va)):(Qm(r,s.targetId),await qm(r.localStore,s.targetId,!0))}async function e6(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ky(n.remoteStore,r.targetId))}async function t6(t,e,n){const r=l6(t);try{const s=await function(a,l){const c=fe(a),d=qe.now(),h=l.reduce((v,I)=>v.add(I.key),Ne());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=Jr(),_=Ne();return c.Ns.getEntries(v,h).next(S=>{I=S,I.forEach((E,w)=>{w.isValidDocument()||(_=_.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,I)).next(S=>{f=S;const E=[];for(const w of l){const C=mV(w,f.get(w.key).overlayedDocument);C!=null&&E.push(new fi(w.key,C,VT(C.value.mapValue),Mn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,E,l)}).next(S=>{p=S;const E=S.applyToLocalDocumentSet(f,_);return c.documentOverlayCache.saveOverlays(v,S.batchId,E)})}).then(()=>({batchId:p.batchId,changes:YT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new et(Ee)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Sc(r,s.changes),await Vh(r.remoteStore)}catch(s){const i=Zy(s,"Failed to persist write");n.reject(i)}}async function PS(t,e){const n=fe(t);try{const r=await p3(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ae(a.hu,14607):s.removedDocuments.size>0&&(Ae(a.hu,42227),a.hu=!1))}),await Sc(n,r,e)}catch(r){await va(r)}}function C_(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=fe(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(d=!0)}),d&&nv(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n6(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new et(ce.comparator);a=a.insert(i,Bt.newNoDocument(i,pe.min()));const l=Ne().add(i),c=new Lh(pe.min(),new Map,new et(Ee),a,l);await PS(r,c),r.du=r.du.remove(i),r.Au.delete(e),iv(r)}else await qm(r.localStore,e,!1).then(()=>Qm(r,e,n)).catch(va)}async function r6(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await f3(n.localStore,e);LS(n,r,null),DS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sc(n,s)}catch(s){await va(s)}}async function s6(t,e,n){const r=fe(t);try{const s=await function(a,l){const c=fe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Ae(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);LS(r,e,n),DS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sc(r,s)}catch(s){await va(s)}}function DS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function LS(t,e,n){const r=fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Qm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||OS(t,r)})}function OS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ky(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),iv(t))}function I_(t,e,n){for(const r of n)r instanceof AS?(t.Ru.addReference(r.key,e),i6(t,r)):r instanceof kS?(X(sv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||OS(t,r.key)):de(19791,{wu:r})}function i6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(sv,"New document in limbo: "+n),t.Eu.add(r),iv(t))}function iv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(Be.fromString(e)),r=t.fu.next();t.Au.set(r,new K3(n)),t.du=t.du.insert(n,r),NS(t.remoteStore,new ks(_r(Ah(n.path)),r,"TargetPurposeLimboResolution",Ch.ce))}}async function Sc(t,e,n){const r=fe(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=qy.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=fe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(d,p=>$.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>$.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!xa(f))throw f;X(Gy,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const v=h.Ms.get(p),I=v.snapshotVersion,_=v.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(p,_)}}}(r.localStore,i))}async function o6(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){X(sv,"User change. New user:",e.toKey());const r=await wS(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Y(B.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sc(n,r.Ls)}}function a6(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return Ne().add(r.key);{let s=Ne();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function MS(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n6.bind(null,e),e.Pu.H_=H3.bind(null,e.eventManager),e.Pu.yu=W3.bind(null,e.eventManager),e}function l6(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s6.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return h3(this.persistence,new c3,e.initialUser,this.serializer)}Cu(e){return new xS(Wy.mi,this.serializer)}Du(e){return new x3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class c6 extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ae(this.persistence.referenceDelegate instanceof Vd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new xS(r=>Vd.mi(r,n),this.serializer)}}class Ym{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>C_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o6.bind(null,this.syncEngine),await B3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z3}()}createDatastore(e){const n=Oh(e.databaseInfo.databaseId),r=function(i){return new N3(i)}(e.databaseInfo);return function(i,a,l,c){return new I3(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new A3(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>C_(this.syncEngine,n,0),function(){return __.v()?new __:new w3}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new Q3(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);X(Gi,"RemoteStore shutting down."),i.Ea.add(5),await Tc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ym.provider={build:()=>new Ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="FirestoreClient";class u6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=Py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X(ei,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X(ei,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hp(t,e){t.asyncQueue.verifyOperationInProgress(),X(ei,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await wS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function j_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await d6(t);X(ei,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>E_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>E_(e.remoteStore,s)),t._onlineComponents=e}async function d6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(ei,"Using user provided OfflineComponentProvider");try{await hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),await hp(t,new Ud)}}else X(ei,"Using default OfflineComponentProvider"),await hp(t,new c6(void 0));return t._offlineComponents}async function av(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(ei,"Using user provided OnlineComponentProvider"),await j_(t,t._uninitializedComponentsProvider._online)):(X(ei,"Using default OnlineComponentProvider"),await j_(t,new Ym))),t._onlineComponents}function h6(t){return av(t).then(e=>e.syncEngine)}function f6(t){return av(t).then(e=>e.datastore)}async function Bd(t){const e=await av(t),n=e.eventManager;return n.onListen=Y3.bind(null,e.syncEngine),n.onUnlisten=Z3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=X3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=e6.bind(null,e.syncEngine),n}function p6(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new ov({next:p=>{h.Nu(),a.enqueueAndForget(()=>tv(i,f));const v=p.docs.has(l);!v&&p.fromCache?d.reject(new Y(B.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&c&&c.source==="server"?d.reject(new Y(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new rv(Ah(l.path),h,{includeMetadataChanges:!0,qa:!0});return ev(i,f)}(await Bd(t),t.asyncQueue,e,n,r)),r.promise}function m6(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new ov({next:p=>{h.Nu(),a.enqueueAndForget(()=>tv(i,f)),p.fromCache&&c.source==="server"?d.reject(new Y(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new rv(l,h,{includeMetadataChanges:!0,qa:!0});return ev(i,f)}(await Bd(t),t.asyncQueue,e,n,r)),r.promise}function g6(t,e,n){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await f6(t);r.resolve(async function(a,l,c){var _;const d=fe(a),{request:h,gt:f,parent:p}=LV(d.serializer,nV(l),c);d.connection.$o||delete h.parent;const v=(await d.Ho("RunAggregationQuery",d.serializer.databaseId,p,h,1)).filter(S=>!!S.result);Ae(v.length===1,64727);const I=(_=v[0].result)==null?void 0:_.aggregateFields;return Object.keys(I).reduce((S,E)=>(S[f[E]]=I[E],S),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firestore.googleapis.com",k_=!0;class R_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FS,this.ssl=k_}else this.host=e.host,this.ssl=e.ssl??k_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qV)throw new Y(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new R_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new R_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vM;switch(r.type){case"firstParty":return new bM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=A_.get(n);r&&(X("ComponentProvider","Removing Datastore"),A_.delete(n),r.terminate())}(this),Promise.resolve()}}function y6(t,e,n,r={}){var d;t=tn(t,Fh);const s=li(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(fy(`https://${l}`),py("Firestore",!0)),i.host!==FS&&i.host!==l&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Kr(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ft.MOCK_USER;else{h=lN(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Y(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ft(p)}t._authCredentials=new xM(new ST(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(bc(n,st._jsonSchema))return new st(e,r||null,new ce(Be.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:yt("string",st._jsonSchemaVersion),referencePath:yt("string")};class Ws extends is{constructor(e,n,r){super(e,n,Ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new ce(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function St(t,e,...n){if(t=Ue(t),CT("collection","path",e),t instanceof Fh){const r=Be.fromString(e,...n);return W0(r),new Ws(t,null,r)}{if(!(t instanceof st||t instanceof Ws))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return W0(r),new Ws(t.firestore,null,r)}}function Ge(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=Py.newId()),CT("doc","path",e),t instanceof Fh){const r=Be.fromString(e,...n);return H0(r),new st(t,null,new ce(r))}{if(!(t instanceof st||t instanceof Ws))throw new Y(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return H0(r),new st(t.firestore,t instanceof Ws?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="AsyncQueue";class D_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bS(this,"async_queue_retry"),this._c=()=>{const r=dp();r&&X(P_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xa(e))throw e;X(P_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xr("INTERNAL UNHANDLED ERROR: ",L_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Jy.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&de(47125,{Pc:L_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function L_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ir extends Fh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new D_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new D_(e),this._firestoreClient=void 0,await e}}}function v6(t,e){const n=typeof t=="object"?t:wh(),r=typeof t=="string"?t:Rd,s=ci(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=iN("firestore");i&&y6(s,...i)}return s}function Cc(t){if(t._terminated)throw new Y(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||x6(t),t._firestoreClient}function x6(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new BM(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new u6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class _6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Lt.fromBase64String(e))}catch(n){throw new Y(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:yt("string",Dn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(bc(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:yt("string",Er._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,Nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nr(e.vectorValues);throw new Y(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:yt("string",Nr._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=/^__.*__$/;class E6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ec(e,this.data,n,this.fieldTransforms)}}class US{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:t})}}class Bh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(BS(this.Ac)&&b6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class N6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oh(e)}Cc(e,n,r,s=!1){return new Bh({Ac:e,methodName:n,Dc:r,path:kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(t){const e=t._freezeSettings(),n=Oh(t._databaseId);return new N6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $S(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);uv("Data must be an object, but it was:",a,r);const l=zS(r,a);let c,d;if(i.merge)c=new En(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Xm(e,f,n);if(!a.contains(p))throw new Y(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);WS(h,p)||h.push(p)}c=new En(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new E6(new dn(l),c,d)}class zh extends Ic{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}function T6(t,e,n){return new Bh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lv extends Ic{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=T6(this,e,!0),r=this.vc.map(i=>ba(i,n)),s=new ta(r);return new sS(e.path,s)}isEqual(e){return e instanceof lv&&Kr(this.vc,e.vc)}}class cv extends Ic{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new sc(e.serializer,ZT(e.serializer,this.Fc));return new sS(e.path,n)}isEqual(e){return e instanceof cv&&this.Fc===e.Fc}}function S6(t,e,n,r){const s=t.Cc(1,e,n);uv("Data must be an object, but it was:",s,r);const i=[],a=dn.empty();hi(r,(c,d)=>{const h=dv(e,c,n);d=Ue(d);const f=s.yc(h);if(d instanceof zh)i.push(h);else{const p=ba(d,f);p!=null&&(i.push(h),a.set(h,p))}});const l=new En(i);return new US(a,l,s.fieldTransforms)}function C6(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[Xm(e,r,n)],c=[s];if(i.length%2!=0)throw new Y(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Xm(e,i[p])),c.push(i[p+1]);const d=[],h=dn.empty();for(let p=l.length-1;p>=0;--p)if(!WS(d,l[p])){const v=l[p];let I=c[p];I=Ue(I);const _=a.yc(v);if(I instanceof zh)d.push(v);else{const S=ba(I,_);S!=null&&(d.push(v),h.set(v,S))}}const f=new En(d);return new US(h,f,a.fieldTransforms)}function I6(t,e,n,r=!1){return ba(n,t.Cc(r?4:3,e))}function ba(t,e){if(HS(t=Ue(t)))return uv("Unsupported field value:",e,t),zS(t,e);if(t instanceof Ic)return function(r,s){if(!BS(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=ba(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:Md(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(s.serializer,i)}}if(r instanceof Er)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:uS(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Nr)return function(a,l){return{mapValue:{fields:{[OT]:{stringValue:MT},[Pd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Fy(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Sh(r)}`)}(t,e)}function zS(t,e){const n={};return AT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,s)=>{const i=ba(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function HS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Er||t instanceof Dn||t instanceof st||t instanceof Ic||t instanceof Nr)}function uv(t,e,n){if(!HS(n)||!IT(n)){const r=Sh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Xm(t,e,n){if((e=Ue(e))instanceof Uh)return e._internalPath;if(typeof e=="string")return dv(t,e);throw $d("Field path arguments must be of type string or ",t,!1,void 0,n)}const j6=new RegExp("[~\\*/\\[\\]]");function dv(t,e,n){if(e.search(j6)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uh(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $d(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Y(B.INVALID_ARGUMENT,l+t+c)}function WS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A6 extends qS{data(){return super.data()}}function Hh(t,e){return typeof e=="string"?dv(t,e):e instanceof Uh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hv{}class fv extends hv{}function Tr(t,e,...n){let r=[];e instanceof hv&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof pv).length,l=i.filter(c=>c instanceof Wh).length;if(a>1||a>0&&l>0)throw new Y(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wh extends fv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wh(e,n,r)}_apply(e){const n=this._parse(e);return KS(e._query,n),new is(e.firestore,e.converter,Bm(e._query,n))}_parse(e){const n=$h(e.firestore);return function(i,a,l,c,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){V_(f,h);const I=[];for(const _ of f)I.push(M_(c,i,_));p={arrayValue:{values:I}}}else p=M_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||V_(f,h),p=I6(l,a,f,h==="in"||h==="not-in");return gt.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cn(t,e,n){const r=e,s=Hh("where",t);return Wh._create(s,r,n)}class pv extends hv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)KS(a,c),a=Bm(a,c)}(e._query,n),new is(e.firestore,e.converter,Bm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mv extends fv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mv(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(i,a)}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new wa(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qs(t,e="asc"){const n=e,r=Hh("orderBy",t);return mv._create(r,n)}class gv extends fv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new gv(e,n,r)}_apply(e){return new is(e.firestore,e.converter,Ld(e._query,this._limit,this._limitType))}}function fp(t){return jM("limit",t),gv._create("limit",t,"F")}function M_(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new Y(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WT(e)&&n.indexOf("/")!==-1)throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!ce.isDocumentKey(r))throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z0(t,new ce(r))}if(n instanceof st)return Z0(t,n._key);throw new Y(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(n)}.`)}function V_(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KS(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class k6{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Pd].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>lt(a.doubleValue));return new Nr(n)}convertGeoPoint(e){return new Er(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Ys(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Ae(yS(r),9688,{name:e});const s=new ec(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||Xr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function R6(){return new w6("count")}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends qS{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:yt("string",Di._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class qu extends Di{data(e={}){return super.data(e)}}class Li{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qu(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new qu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new qu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:P6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Li._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){t=tn(t,st);const e=tn(t.firestore,Ir);return p6(Cc(e),t._key).then(n=>JS(e,t,n))}Li._jsonSchemaVersion="firestore/querySnapshot/1.0",Li._jsonSchema={type:yt("string",Li._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class qh extends k6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function Vn(t){t=tn(t,is);const e=tn(t.firestore,Ir),n=Cc(e),r=new qh(e);return GS(t._query),m6(n,t._query).then(s=>new Li(e,r,t,s))}function YS(t,e,n){t=tn(t,st);const r=tn(t.firestore,Ir),s=QS(t.converter,e);return Gh(r,[$S($h(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mn.none())])}function hn(t,e,n,...r){t=tn(t,st);const s=tn(t.firestore,Ir),i=$h(s);let a;return a=typeof(e=Ue(e))=="string"||e instanceof Uh?C6(i,"updateDoc",t._key,e,n,r):S6(i,"updateDoc",t._key,e),Gh(s,[a.toMutation(t._key,Mn.exists(!0))])}function D6(t){return Gh(tn(t.firestore,Ir),[new Uy(t._key,Mn.none())])}function XS(t,e){const n=tn(t.firestore,Ir),r=Ge(t),s=QS(t.converter,e);return Gh(n,[$S($h(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}function L6(t,...e){var c,d,h;t=Ue(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||O_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(O_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof st)a=tn(t.firestore,Ir),l=Ah(t._key.path),i={next:f=>{e[r]&&e[r](JS(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=tn(t,is);a=tn(f.firestore,Ir),l=f._query;const p=new qh(a);i={next:v=>{e[r]&&e[r](new Li(a,p,f,v))},error:e[r+1],complete:e[r+2]},GS(t._query)}return function(p,v,I,_){const S=new ov(_),E=new rv(v,S,I);return p.asyncQueue.enqueueAndForget(async()=>ev(await Bd(p),E)),()=>{S.Nu(),p.asyncQueue.enqueueAndForget(async()=>tv(await Bd(p),E))}}(Cc(a),l,s,i)}function Gh(t,e){return function(r,s){const i=new wr;return r.asyncQueue.enqueueAndForget(async()=>t6(await h6(r),s,i)),i.promise}(Cc(t),e)}function JS(t,e,n){const r=n.docs.get(e._key),s=new qh(t);return new Di(t,s,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}function mu(t){return O6(t,{count:R6()})}function O6(t,e){const n=tn(t.firestore,Ir),r=Cc(n),s=FM(e,(i,a)=>new xV(a,i.aggregateType,i._internalFieldPath));return g6(r,t._query,s).then(i=>function(l,c,d){const h=new qh(l);return new _6(c,h,d)}(n,t,i))}function Jm(...t){return new lv("arrayUnion",t)}function M6(t){return new cv("increment",t)}(function(e,n=!0){(function(s){ya=s})(ro),rr(new Bn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ir(new wM(r.getProvider("auth-internal")),new EM(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yn(U0,B0,e),yn(U0,B0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="firebasestorage.googleapis.com",eC="storageBucket",V6=2*60*1e3,F6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends Hn{constructor(e,n,r=0){super(pp(e),`Firebase Storage: ${n} (${pp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function pp(t){return"storage/"+t}function yv(){const t="An unknown error occurred, please check the error payload for server response.";return new ot(it.UNKNOWN,t)}function U6(t){return new ot(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function B6(t){return new ot(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(it.UNAUTHENTICATED,t)}function z6(){return new ot(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function H6(t){return new ot(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function W6(){return new ot(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function q6(){return new ot(it.CANCELED,"User canceled the upload/download.")}function G6(t){return new ot(it.INVALID_URL,"Invalid URL '"+t+"'.")}function K6(t){return new ot(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Q6(){return new ot(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eC+"' property when initializing the app?")}function Y6(){return new ot(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function X6(){return new ot(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function J6(t){return new ot(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zm(t){return new ot(it.INVALID_ARGUMENT,t)}function tC(){return new ot(it.APP_DELETED,"The Firebase app was deleted.")}function Z6(t){return new ot(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new ot(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function el(t){throw new ot(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Nn.makeFromUrl(e,n)}catch{return new Nn(e,"")}if(r.path==="")return r;throw K6(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),I={bucket:1,path:3},_=n===ZS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",E=new RegExp(`^https?://${_}/${s}/${S}`,"i"),C=[{regex:l,indices:c,postModify:i},{regex:v,indices:I,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<C.length;R++){const L=C[R],A=L.regex.exec(e);if(A){const N=A[L.indices.bucket];let y=A[L.indices.path];y||(y=""),r=new Nn(N,y),L.postModify(r);break}}if(r==null)throw G6(e);return r}}class eF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...S){d||(d=!0,e.apply(null,S))}function f(S){s=setTimeout(()=>{s=null,t(v,c())},S)}function p(){i&&clearTimeout(i)}function v(S,...E){if(d){p();return}if(S){p(),h.call(null,S,...E);return}if(c()||a){p(),h.call(null,S,...E);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,f(C)}let I=!1;function _(S){I||(I=!0,p(),!d&&(s!==null?(S||(l=2),clearTimeout(s),f(0)):S||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,_(!0)},n),_}function nF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){return t!==void 0}function sF(t){return typeof t=="object"&&!Array.isArray(t)}function vv(t){return typeof t=="string"||t instanceof String}function F_(t){return xv()&&t instanceof Blob}function xv(){return typeof Blob<"u"}function U_(t,e,n,r){if(r<e)throw Zm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function nC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Oi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Oi||(Oi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,n,r,s,i,a,l,c,d,h,f,p=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,_)=>{this.resolve_=I,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new gu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===Oi.NO_ERROR,c=i.getStatus();if(!l||iF(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Oi.ABORT;r(!1,new gu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new gu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());rF(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=yv();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?tC():q6();a(c)}else{const c=W6();a(c)}};this.canceled_?n(!1,new gu(!1,null,!0)):this.backoffId_=tF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&nF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function aF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function lF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dF(t,e,n,r,s,i,a=!0,l=!1){const c=nC(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return cF(h,e),aF(h,n),lF(h,i),uF(h,r),new oF(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function fF(...t){const e=hF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(xv())return new Blob(t);throw new ot(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){if(typeof atob>"u")throw J6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mp{constructor(e,n){this.data=e,this.contentType=n||null}}function gF(t,e){switch(t){case mr.RAW:return new mp(rC(e));case mr.BASE64:case mr.BASE64URL:return new mp(sC(t,e));case mr.DATA_URL:return new mp(vF(e),xF(e))}throw yv()}function rC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function yF(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(mr.DATA_URL,"Malformed data URL.")}return rC(e)}function sC(t,e){switch(t){case mr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case mr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mF(e)}catch(s){throw s.message.includes("polyfill")?s:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class iC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=wF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function vF(t){const e=new iC(t);return e.base64?sC(mr.BASE64,e.rest):yF(e.rest)}function xF(t){return new iC(t).contentType}function wF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){let r=0,s="";F_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(F_(this.data_)){const r=this.data_,s=pF(r,e,n);return s===null?null:new Cs(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Cs(r,!0)}}static getBlob(...e){if(xv()){const n=e.map(r=>r instanceof Cs?r.data_:r);return new Cs(fF.apply(null,n))}else{const n=e.map(a=>vv(a)?gF(mr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new Cs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){let e;try{e=JSON.parse(t)}catch{return null}return sF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function bF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function aC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(t,e){return e}class Qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||EF}}let yu=null;function NF(t){return!vv(t)||t.length<2?t:aC(t)}function lC(){if(yu)return yu;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(i,a){return NF(a)}const n=new Qt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Qt("size");return s.xform=r,t.push(s),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),yu=t,yu}function TF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Nn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function SF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return TF(r,t),r}function cC(t,e,n){const r=oC(e);return r===null?null:SF(t,r,n)}function CF(t,e,n,r){const s=oC(e);if(s===null||!vv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,p="/b/"+a(h)+"/o/"+a(f),v=wv(p,n,r),I=nC({alt:"media",token:d});return v+I})[0]}function IF(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class uC{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){if(!t)throw yv()}function jF(t,e){function n(r,s){const i=cC(t,s,e);return dC(i!==null),i}return n}function AF(t,e){function n(r,s){const i=cC(t,s,e);return dC(i!==null),CF(i,s,t.host,t._protocol)}return n}function hC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=z6():s=$6():n.getStatus()===402?s=B6(t.bucket):n.getStatus()===403?s=H6(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function kF(t){const e=hC(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=U6(t.path)),i.serverResponse=s.serverResponse,i}return n}function RF(t,e,n){const r=e.fullServerUrl(),s=wv(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new uC(s,i,AF(t,n),a);return l.errorHandler=kF(e),l}function PF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function DF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=PF(null,e)),r}function LF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let R=0;R<2;R++)C=C+Math.random().toString().slice(2);return C}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=DF(e,r,s),h=IF(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+c+"--",v=Cs.getBlob(f,r,p);if(v===null)throw Y6();const I={name:d.fullPath},_=wv(i,t.host,t._protocol),S="POST",E=t.maxUploadRetryTime,w=new uC(_,S,jF(t,n),E);return w.urlParams=I,w.headers=a,w.body=v.uploadData(),w.errorHandler=hC(e),w}class OF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw el("cannot .send() more than once");if(li(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw el("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw el("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw el("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw el("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MF extends OF{initXhr(){this.xhr_.responseType="text"}}function fC(){return new MF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this._service=e,n instanceof Nn?this._location=n:this._location=Nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ki(e,n)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aC(this._location.path)}get storage(){return this._service}get parent(){const e=_F(this._location.path);if(e===null)return null;const n=new Nn(this._location.bucket,e);return new Ki(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Z6(e)}}function VF(t,e,n){t._throwIfRoot("uploadBytes");const r=LF(t.storage,t._location,lC(),new Cs(e,!0),n);return t.storage.makeRequestWithTokens(r,fC).then(s=>({metadata:s,ref:t}))}function FF(t){t._throwIfRoot("getDownloadURL");const e=RF(t.storage,t._location,lC());return t.storage.makeRequestWithTokens(e,fC).then(n=>{if(n===null)throw X6();return n})}function UF(t,e){const n=bF(t._location.path,e),r=new Nn(t._location.bucket,n);return new Ki(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t){return/^[A-Za-z]+:\/\//.test(t)}function $F(t,e){return new Ki(t,e)}function pC(t,e){if(t instanceof _v){const n=t;if(n._bucket==null)throw Q6();const r=new Ki(n,n._bucket);return e!=null?pC(r,e):r}else return e!==void 0?UF(t,e):t}function zF(t,e){if(e&&BF(e)){if(t instanceof _v)return $F(t,e);throw Zm("To use ref(service, url), the first argument must be a Storage instance.")}else return pC(t,e)}function B_(t,e){const n=e==null?void 0:e[eC];return n==null?null:Nn.makeFromBucketSpec(n,t)}function HF(t,e,n,r={}){t.host=`${e}:${n}`;const s=li(e);s&&(fy(`https://${t.host}/b`),py("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:lN(i,t.app.options.projectId))}class _v{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=ZS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=V6,this._maxUploadRetryTime=F6,this._requests=new Set,s!=null?this._bucket=Nn.makeFromBucketSpec(s,this._host):this._bucket=B_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=B_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){U_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){U_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ki(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new eF(tC());{const a=dF(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $_="@firebase/storage",z_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="storage";function WF(t,e,n){return t=Ue(t),VF(t,e,n)}function qF(t){return t=Ue(t),FF(t)}function GF(t,e){return t=Ue(t),zF(t,e)}function KF(t=wh(),e){t=Ue(t);const r=ci(t,mC).getImmediate({identifier:e}),s=iN("storage");return s&&QF(r,...s),r}function QF(t,e,n,r={}){HF(t,e,n,r)}function YF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new _v(n,r,s,e,ro)}function XF(){rr(new Bn(mC,YF,"PUBLIC").setMultipleInstances(!0)),yn($_,z_,""),yn($_,z_,"esm2020")}XF();const JF={apiKey:"AIzaSyAVk3CIK5hyAmjwVPh1p4i01vq-0Z5IsEA",authDomain:"zedctf.firebaseapp.com",projectId:"zedctf",storageBucket:"zedctf.firebasestorage.app",messagingSenderId:"574551910114",appId:"1:574551910114:web:8bcce937be224e1575a0bb",measurementId:"G-MEYRJGR69W"},Kh=mN(JF);fM(Kh);const ic=GL(Kh),ge=v6(Kh),ZF=KF(Kh),gC=g.createContext({user:null,loading:!0}),yC=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(!0);return g.useEffect(()=>LD(ic,a=>{n(a),s(!1)}),[]),o.jsx(gC.Provider,{value:{user:e,loading:r},children:t})},Wn=()=>{const t=g.useContext(gC);if(!t)throw new Error("useAuthContext must be used within an AuthProvider");return t},vC=g.createContext({isAdmin:!1,isModerator:!1,permissions:[],loading:!0}),e5=({children:t})=>{const{user:e}=Wn(),[n,r]=g.useState({isAdmin:!1,isModerator:!1,permissions:[],loading:!0});return g.useEffect(()=>{if(!e){console.log(" AdminProvider: No user found"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1});return}return console.log(" AdminProvider: Checking user role for UID:",e.uid),L6(Ge(ge,"users",e.uid),i=>{if(i.exists()){const a=i.data();console.log(" User document found:",a);const l=a.role||"user",c=a.permissions||["read"];console.log(" User role:",l),console.log(" User permissions:",c),r({isAdmin:l==="admin",isModerator:l==="moderator"||l==="admin",permissions:c,loading:!1})}else console.log(" No user document found in Firestore"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})},i=>{console.error(" Firestore error in AdminContext:",i),console.error("Error details:",i.code,i.message),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})})},[e]),o.jsx(vC.Provider,{value:n,children:t})},Qh=()=>{const t=g.useContext(vC);if(!t)throw new Error("useAdminContext must be used within an AdminProvider");return t},t5=({children:t})=>{const{loading:e}=Wn();return e?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsx(o.Fragment,{children:t})},ps=({children:t})=>{const{user:e,loading:n}=Wn();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(hy,{to:"/login",replace:!0})},n5=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Qh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):!e&&!n?o.jsx(hy,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:t})},bi=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Qh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):e||n?o.jsx(hy,{to:"/admin",replace:!0}):o.jsx(o.Fragment,{children:t})};function H_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function jc(...t){return e=>{let n=!1;const r=t.map(s=>{const i=H_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():H_(t[s],null)}}}}function ft(...t){return g.useCallback(jc(...t),t)}var r5=Symbol.for("react.lazy"),zd=eh[" use ".trim().toString()];function s5(t){return typeof t=="object"&&t!==null&&"then"in t}function xC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===r5&&"_payload"in t&&s5(t._payload)}function bv(t){const e=o5(t),n=g.forwardRef((r,s)=>{let{children:i,...a}=r;xC(i)&&typeof zd=="function"&&(i=zd(i._payload));const l=g.Children.toArray(i),c=l.find(l5);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var i5=bv("Slot");function o5(t){const e=g.forwardRef((n,r)=>{let{children:s,...i}=n;if(xC(s)&&typeof zd=="function"&&(s=zd(s._payload)),g.isValidElement(s)){const a=u5(s),l=c5(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var a5=Symbol("radix.slottable");function l5(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===a5}function c5(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function u5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function wC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=wC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function _C(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=wC(t))&&(r&&(r+=" "),r+=e);return r}const W_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,q_=_C,Yh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return q_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const p=W_(h)||W_(f);return s[d][p]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:p,...v}=h;return Object.entries(v).every(I=>{let[_,S]=I;return Array.isArray(S)?S.includes({...i,...l}[_]):{...i,...l}[_]===S})?[...d,f,p]:d},[]);return q_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},Ev="-",d5=t=>{const e=f5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Ev);return l[0]===""&&l.length!==1&&l.shift(),bC(l,e)||h5(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},bC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?bC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ev);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},G_=/^\[(.+)\]$/,h5=t=>{if(G_.test(t)){const e=G_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},f5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return m5(Object.entries(t.classGroups),n).forEach(([i,a])=>{eg(a,r,i,e)}),r},eg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:K_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(p5(s)){eg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{eg(a,K_(e,i),n,r)})})},K_=(t,e)=>{let n=t;return e.split(Ev).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},p5=t=>t.isThemeGetter,m5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,g5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},EC="!",y5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let S=0;S<l.length;S++){let E=l[S];if(d===0){if(E===s&&(r||l.slice(S,S+i)===e)){c.push(l.slice(h,S)),h=S+i;continue}if(E==="/"){f=S;continue}}E==="["?d++:E==="]"&&d--}const p=c.length===0?l:l.substring(h),v=p.startsWith(EC),I=v?p.substring(1):p,_=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:I,maybePostfixModifierPosition:_}};return n?l=>n({className:l,parseClassName:a}):a},v5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},x5=t=>({cache:g5(t.cacheSize),parseClassName:y5(t),...d5(t)}),w5=/\s+/,_5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(w5);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(d);let I=!!v,_=r(I?p.substring(0,v):p);if(!_){if(!I){l=d+(l.length>0?" "+l:l);continue}if(_=r(p),!_){l=d+(l.length>0?" "+l:l);continue}I=!1}const S=v5(h).join(":"),E=f?S+EC:S,w=E+_;if(i.includes(w))continue;i.push(w);const C=s(_,I);for(let R=0;R<C.length;++R){const L=C[R];i.push(E+L)}l=d+(l.length>0?" "+l:l)}return l};function b5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=NC(e))&&(r&&(r+=" "),r+=n);return r}const NC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=NC(t[r]))&&(n&&(n+=" "),n+=e);return n};function E5(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=x5(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=_5(c,n);return s(c,h),h}return function(){return i(b5.apply(null,arguments))}}const He=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},TC=/^\[(?:([a-z-]+):)?(.+)\]$/i,N5=/^\d+\/\d+$/,T5=new Set(["px","full","screen"]),S5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,C5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,I5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,j5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,A5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pr=t=>Uo(t)||T5.has(t)||N5.test(t),ms=t=>Ea(t,"length",V5),Uo=t=>!!t&&!Number.isNaN(Number(t)),gp=t=>Ea(t,"number",Uo),tl=t=>!!t&&Number.isInteger(Number(t)),k5=t=>t.endsWith("%")&&Uo(t.slice(0,-1)),ve=t=>TC.test(t),gs=t=>S5.test(t),R5=new Set(["length","size","percentage"]),P5=t=>Ea(t,R5,SC),D5=t=>Ea(t,"position",SC),L5=new Set(["image","url"]),O5=t=>Ea(t,L5,U5),M5=t=>Ea(t,"",F5),nl=()=>!0,Ea=(t,e,n)=>{const r=TC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},V5=t=>C5.test(t)&&!I5.test(t),SC=()=>!1,F5=t=>j5.test(t),U5=t=>A5.test(t),B5=()=>{const t=He("colors"),e=He("spacing"),n=He("blur"),r=He("brightness"),s=He("borderColor"),i=He("borderRadius"),a=He("borderSpacing"),l=He("borderWidth"),c=He("contrast"),d=He("grayscale"),h=He("hueRotate"),f=He("invert"),p=He("gap"),v=He("gradientColorStops"),I=He("gradientColorStopPositions"),_=He("inset"),S=He("margin"),E=He("opacity"),w=He("padding"),C=He("saturate"),R=He("scale"),L=He("sepia"),A=He("skew"),N=He("space"),y=He("translate"),T=()=>["auto","contain","none"],b=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",ve,e],k=()=>[ve,e],P=()=>["",Pr,ms],H=()=>["auto",Uo,ve],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",ve],re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[Uo,ve];return{cacheSize:500,separator:":",theme:{colors:[nl],spacing:[Pr,ms],blur:["none","",gs,ve],brightness:F(),borderColor:[t],borderRadius:["none","","full",gs,ve],borderSpacing:k(),borderWidth:P(),contrast:F(),grayscale:W(),hueRotate:F(),invert:W(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[k5,ms],inset:j(),margin:j(),opacity:F(),padding:k(),saturate:F(),scale:F(),sepia:W(),skew:F(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",ve]}],container:["container"],columns:[{columns:[gs]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),ve]}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tl,ve]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ve]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",tl,ve]}],"grid-cols":[{"grid-cols":[nl]}],"col-start-end":[{col:["auto",{span:["full",tl,ve]},ve]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[nl]}],"row-start-end":[{row:["auto",{span:[tl,ve]},ve]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ve]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ve,e]}],"min-w":[{"min-w":[ve,e,"min","max","fit"]}],"max-w":[{"max-w":[ve,e,"none","full","min","max","fit","prose",{screen:[gs]},gs]}],h:[{h:[ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",gs,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gp]}],"font-family":[{font:[nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ve]}],"line-clamp":[{"line-clamp":["none",Uo,gp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pr,ve]}],"list-image":[{"list-image":["none",ve]}],"list-style-type":[{list:["none","disc","decimal",ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pr,ms]}],"underline-offset":[{"underline-offset":["auto",Pr,ve]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),D5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",P5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},O5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Pr,ve]}],"outline-w":[{outline:[Pr,ms]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Pr,ms]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",gs,M5]}],"shadow-color":[{shadow:[nl]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",gs,ve]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ve]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",ve]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[tl,ve]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ve]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Pr,ms,gp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$5=E5(B5);function Pe(...t){return $5(_C(t))}const z5=Yh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-all duration-300 shadow-[0_0_20px_rgba(0,255,136,0.3)] hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",terminal:"bg-card border border-primary/30 text-primary hover:border-primary hover:bg-primary/10 font-mono"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Q=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?i5:"button";return o.jsx(a,{className:Pe(z5({variant:e,size:n,className:t})),ref:i,...s})});Q.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...W5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:CC("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(q5,{ref:i,iconNode:e,className:CC(`lucide-${H5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=ne("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=ne("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ne("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=ne("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=ne("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=ne("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=ne("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=ne("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=ne("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=ne("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=ne("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=ne("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=ne("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=ne("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=ne("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=ne("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=ne("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=ne("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=ne("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),yU="/ZedCTF/favicon.png",dt=()=>{var I;const[t,e]=g.useState(!1),{user:n}=Wn(),{isAdmin:r,isModerator:s,loading:i}=Qh(),a=zn(),l=to(),[c,d]=g.useState(!1),h=async()=>{d(!0);try{await OD(ic),a("/"),e(!1)}catch(_){console.error("Error signing out:",_)}finally{d(!1)}},f=_=>l.pathname===_,p=!i&&(r||s),v=!i&&!r&&!s;return o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-border bg-background/95 backdrop-blur-lg supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(Ve,{to:"/",className:"flex items-center gap-2",children:[o.jsx("img",{src:yU,alt:"ZedCTF",className:"w-8 h-8"}),o.jsx("span",{className:"text-2xl font-bold text-green-600",children:"ZedCTF"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[o.jsxs(Ve,{to:"/",className:`flex items-center gap-2 transition-colors group ${f("/")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(eb,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Home"]}),v&&o.jsxs(Ve,{to:"/dashboard",className:`flex items-center gap-2 transition-colors group ${f("/dashboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Hd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Dashboard"]}),v&&o.jsxs(Ve,{to:"/practice",className:`flex items-center gap-2 transition-colors group ${f("/practice")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Jn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Practice"]}),v&&o.jsxs(Ve,{to:"/live",className:`flex items-center gap-2 transition-colors group ${f("/live")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(Z_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"LIVE CTF"]}),v&&o.jsxs(Ve,{to:"/leaderboard",className:`flex items-center gap-2 transition-colors group ${f("/leaderboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(nn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Leaderboard"]}),v&&o.jsxs(Ve,{to:"/writeups",className:`flex items-center gap-2 transition-colors group ${f("/writeups")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Wd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Writeups"]}),p&&o.jsxs(Ve,{to:"/admin",className:`flex items-center gap-2 transition-colors group ${f("/admin")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Ye,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Admin"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[v&&o.jsx(Q,{variant:"ghost",size:"icon",className:"hidden sm:flex",children:o.jsx(la,{className:"w-5 h-5"})}),v&&o.jsxs(Q,{variant:"ghost",size:"icon",className:"relative",children:[o.jsx(K5,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx(Q,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>e(!t),children:o.jsx(cU,{className:"w-5 h-5"})}),n?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-foreground/80 hidden sm:block",children:[n.displayName||((I=n.email)==null?void 0:I.split("@")[0]),p&&" (Admin)"]}),o.jsxs(Q,{variant:"default",size:"sm",className:"bg-red-500 hover:bg-red-600 text-white gap-2",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(nb,{className:"w-4 h-4"}),c?"...":"Logout"]})]}):o.jsx(Ve,{to:"/login",children:o.jsxs(Q,{variant:"default",size:"sm",className:"bg-green-500 hover:bg-green-600 text-white gap-2",children:[o.jsx(Cn,{className:"w-4 h-4"}),"Sign In"]})})]})]}),t&&o.jsx("div",{className:"md:hidden border-t border-border bg-background/95 backdrop-blur-lg animate-fade-in",children:o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs(Ve,{to:"/",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(eb,{className:"w-5 h-5"}),"Home"]}),v&&o.jsxs(Ve,{to:"/dashboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/dashboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Hd,{className:"w-5 h-5"}),"Dashboard"]}),v&&o.jsxs(Ve,{to:"/practice",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/practice")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Jn,{className:"w-5 h-5"}),"Practice"]}),v&&o.jsxs(Ve,{to:"/live",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/live")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(Z_,{className:"w-5 h-5"}),"LIVE CTF"]}),v&&o.jsxs(Ve,{to:"/leaderboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/leaderboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(nn,{className:"w-5 h-5"}),"Leaderboard"]}),v&&o.jsxs(Ve,{to:"/writeups",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/writeups")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Wd,{className:"w-5 h-5"}),"Writeups"]}),p&&o.jsxs(Ve,{to:"/admin",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/admin")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Ye,{className:"w-5 h-5"}),"Admin"]}),o.jsx("div",{className:"px-4 pt-2 border-t border-border",children:n?o.jsxs(Q,{variant:"default",className:"w-full justify-start gap-2 bg-red-500 hover:bg-red-600",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(nb,{className:"w-4 h-4"}),c?"Signing out...":"Logout"]}):o.jsx(Ve,{to:"/login",onClick:()=>e(!1),children:o.jsxs(Q,{variant:"default",className:"w-full justify-start gap-2 bg-green-500 hover:bg-green-600",children:[o.jsx(Cn,{className:"w-4 h-4"}),"Sign In"]})})})]})})]})})},vU="/ZedCTF/assets/hero-bg-x4dJ88o_.jpg",xU=()=>{const[t,e]=g.useState({totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0}),[n,r]=g.useState(!0),s=zn(),i=async()=>{try{const c={totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0},d=["users","user","members","profiles"];for(const v of d)try{const _=(await mu(St(ge,v))).data().count;if(_>0){c.totalUsers=_;break}}catch{continue}const h=["challenges","challenge","ctfChallenges","practice"];for(const v of h)try{const _=(await mu(St(ge,v))).data().count;if(_>0){c.totalChallenges=_;break}}catch{continue}const f=["events","event","liveEvents","competitions"];for(const v of f)try{const _=(await mu(St(ge,v))).data().count;if(_>0){c.liveEvents=_;break}}catch{continue}const p=["submissions","submission","solves","completions"];for(const v of p)try{const _=(await mu(St(ge,v))).data().count;if(_>0){c.totalCompletions=_;break}}catch{continue}if(c.totalCompletions===0&&c.totalUsers>0)try{const v=await Vn(St(ge,"users"));let I=0;v.forEach(_=>{const S=_.data();I+=S.challengesSolved||S.solvedChallenges||S.totalSolved||0}),c.totalCompletions=I}catch{}e(c)}catch{console.log("Stats loading completed")}finally{r(!1)}};g.useEffect(()=>{i()},[]);const a=()=>{s("/practice")},l=()=>{s("/live")};return o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:`url(${vU})`}}),o.jsx("div",{className:"absolute inset-0 cyber-grid opacity-10"}),o.jsx("div",{className:"container relative z-10 px-4 py-32",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border border-primary/30 bg-primary/5 mb-4",children:[o.jsx(kC,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm text-primary font-mono",children:"Zambia's Premier CTF Platform"})]}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:["Master Cybersecurity",o.jsx("br",{}),o.jsx("span",{className:"neon-text animate-pulse-glow",children:"Capture The Flag"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Sharpen your hacking skills, compete in real-time challenges, and climb the leaderboard. From beginner to expert, ZedCTF is your gateway to cybersecurity mastery."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[o.jsxs(Q,{onClick:a,variant:"neon",size:"lg",className:"group",children:["Start Practicing",o.jsx(G5,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),o.jsxs(Q,{onClick:l,variant:"terminal",size:"lg",children:[o.jsx(eU,{className:"w-5 h-5"}),"Join LIVE Event"]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 pt-12 max-w-3xl mx-auto",children:[o.jsx(vu,{loading:n,value:t.totalUsers,label:"Registered Users",icon:o.jsx(nn,{className:"w-5 h-5"})}),o.jsx(vu,{loading:n,value:t.totalChallenges,label:"Challenges",icon:o.jsx(Ye,{className:"w-5 h-5"})}),o.jsx(vu,{loading:n,value:t.liveEvents,label:"Live Events",icon:o.jsx(Na,{className:"w-5 h-5"})}),o.jsx(vu,{loading:n,value:t.totalCompletions,label:"Completions",icon:o.jsx(Jn,{className:"w-5 h-5"})})]}),!n&&o.jsx("div",{className:"mt-4",children:o.jsx(Q,{variant:"outline",size:"sm",onClick:i,children:"Refresh Stats"})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent"})]})},vu=({loading:t,value:e,label:n,icon:r})=>t?o.jsxs("div",{className:"text-center animate-pulse",children:[o.jsx("div",{className:"h-8 bg-muted rounded w-16 mx-auto mb-2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-20 mx-auto"})]}):o.jsxs("div",{className:"text-center group",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl md:text-3xl font-bold text-primary mb-1",children:[r,e.toLocaleString()]}),o.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:n})]}),ht=()=>o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Ye,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-2xl font-bold neon-text",children:"ZedCTF"})]}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Zambia's premier platform for cybersecurity challenges and training."}),o.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:"An initiative by IT Society of Kapasa Makasa University"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Platform"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsx(Ve,{to:"/dashboard",className:"hover:text-primary transition-colors",children:"Dashboard"})}),o.jsx("li",{children:o.jsx(Ve,{to:"/practice",className:"hover:text-primary transition-colors",children:"Practice"})}),o.jsx("li",{children:o.jsx(Ve,{to:"/live",className:"hover:text-primary transition-colors",children:"LIVE Events"})}),o.jsx("li",{children:o.jsx(Ve,{to:"/leaderboard",className:"hover:text-primary transition-colors",children:"Leaderboard"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Resources"}),o.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:o.jsx("li",{children:o.jsx(Ve,{to:"/writeups",className:"hover:text-primary transition-colors",children:"Walkthroughs"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Connect"}),o.jsxs("div",{className:"flex gap-4 mb-4",children:[o.jsx("a",{href:"https://github.com/ZedCTF/ZedCTF",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(rU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(mU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(aU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(RC,{className:"w-5 h-5"})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-sm mb-2 text-primary flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),"Contributors"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[o.jsx("a",{href:"https://github.com/SokoJames",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"James Soko"}),o.jsx("a",{href:"https://github.com/abbymwale24",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Abby Mwale"}),o.jsx("a",{href:"https://github.com/Joylad-Jangazya",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Joylad Jangazya"}),o.jsx("a",{href:"https://github.com/Kono-hub",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Mary Chanda"}),o.jsx("a",{href:"https://github.com/ronny-brawn",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Aaron Nyakapanda"}),o.jsx("a",{href:"https://github.com/threat23",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Humphery Chileshe"})]})]})]})]}),o.jsxs("div",{className:"pt-8 border-t border-border text-center text-sm text-muted-foreground",children:[o.jsx("p",{children:" 2025 ZedCTF. All rights reserved. Made with  in Zambia"}),o.jsx("p",{className:"mt-1",children:"IT Society of Kapasa Makasa University"})]})]})}),wU=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(dt,{}),o.jsx(xU,{}),o.jsx(ht,{})]}),_U=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({email:"",password:"",rememberMe:!1}),h=zn(),f=new Or;f.addScope("read:user"),f.addScope("user:email");const p=async E=>{try{const w=await sa(Ge(ge,"users",E));if(w.exists()){const C=w.data();if(C.role==="admin"||C.role==="moderator")return"/admin"}return"/dashboard"}catch(w){return console.error("Error checking user role:",w),"/dashboard"}},v=async E=>{E.preventDefault(),l(""),i(!0);try{const w=await kD(ic,c.email,c.password),C=await p(w.user.uid);h(C)}catch(w){console.error("Login error:",w),l(_(w.code))}finally{i(!1)}},I=async()=>{var E,w,C;r(!0),l("");try{const L=(await nL(ic,f)).user;if(!(await sa(Ge(ge,"users",L.uid))).exists())await YS(Ge(ge,"users",L.uid),{uid:L.uid,firstName:((E=L.displayName)==null?void 0:E.split(" ")[0])||"GitHub",lastName:((w=L.displayName)==null?void 0:w.split(" ").slice(1).join(" "))||"User",username:((C=L.email)==null?void 0:C.split("@")[0])||`github_${L.uid.slice(0,8)}`,email:L.email,displayName:L.displayName||"GitHub User",photoURL:L.photoURL,provider:"github",role:"user",isActive:!0,createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard");else{const N=await p(L.uid);h(N)}}catch(R){console.error("GitHub login error:",R),R.code==="auth/account-exists-with-different-credential"?l("An account already exists with the same email address but different sign-in credentials."):R.code==="auth/popup-closed-by-user"?console.log("GitHub login popup closed by user"):l("GitHub login failed. Please try again.")}finally{r(!1)}},_=E=>{switch(E){case"auth/invalid-email":return"Invalid email address format.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/account-exists-with-different-credential":return"An account already exists with the same email address but different sign-in credentials.";default:return"Login failed. Please try again."}},S=E=>{const{name:w,value:C,type:R,checked:L}=E.target;d(A=>({...A,[w]:R==="checkbox"?L:C}))};return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Ye,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-muted-foreground",children:"Access your cybersecurity dashboard"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsx("div",{className:"relative",children:o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:S,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:S,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all pr-12",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(tg,{className:"w-5 h-5"}):o.jsx(oc,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{name:"rememberMe",type:"checkbox",checked:c.rememberMe,onChange:S,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2",disabled:s}),o.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Remember me"})]}),o.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"})]}),o.jsxs("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Gd,{className:"w-5 h-5 animate-spin"}):o.jsx(lU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),s?"Signing in...":"Sign In"]})]}),o.jsxs("div",{className:"my-6 flex items-center",children:[o.jsx("div",{className:"flex-1 border-t border-border"}),o.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"or continue with"}),o.jsx("div",{className:"flex-1 border-t border-border"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.jsxs("button",{onClick:I,disabled:n||s,className:"flex items-center justify-center gap-2 px-4 py-3 bg-muted/50 border border-border rounded-lg text-foreground hover:bg-muted transition-colors hover:border-primary group disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(Gd,{className:"w-5 h-5 animate-spin"}):o.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),n?"Signing in with GitHub...":"Continue with GitHub"]})}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["New to ZedCTF?"," ",o.jsx(Ve,{to:"/signup",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Create an account"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(ht,{})]})},bU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:"",agreeToTerms:!1}),h=zn(),f=async I=>{if(I.preventDefault(),l(""),c.password!==c.confirmPassword){l("Passwords don't match!");return}if(c.password.length<6){l("Password should be at least 6 characters");return}if(!c.agreeToTerms){l("Please agree to the terms and conditions");return}i(!0);try{const S=(await AD(ic,c.email,c.password)).user;await UN(S,{displayName:`${c.firstName} ${c.lastName}`.trim()}),await YS(Ge(ge,"users",S.uid),{uid:S.uid,firstName:c.firstName,lastName:c.lastName,username:c.username,email:c.email,displayName:`${c.firstName} ${c.lastName}`.trim(),createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard")}catch(_){console.error("Registration error:",_),l(p(_.code))}finally{i(!1)}},p=I=>{switch(I){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak.";default:return"Registration failed. Please try again."}},v=I=>{const{name:_,value:S,type:E,checked:w}=I.target;d(C=>({...C,[_]:E==="checkbox"?w:S}))};return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Ye,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Join the Community"}),o.jsx("p",{className:"text-muted-foreground",children:"Start your cybersecurity journey today"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground mb-2",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:c.firstName,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"John",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground mb-2",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:c.lastName,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Doe",disabled:s})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(RC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-foreground mb-2",children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"cyber_hacker",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(tb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:v,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(tg,{className:"w-5 h-5"}):o.jsx(oc,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(tb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",required:!0,value:c.confirmPassword,onChange:v,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:n?o.jsx(tg,{className:"w-5 h-5"}):o.jsx(oc,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-start",children:o.jsxs("label",{className:"flex items-start",children:[o.jsx("input",{name:"agreeToTerms",type:"checkbox",checked:c.agreeToTerms,onChange:v,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2 mt-1",disabled:s}),o.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["I agree to the"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Terms of Service"})," ","and"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Privacy Policy"})]})]})}),o.jsxs("button",{type:"submit",disabled:s||!c.agreeToTerms,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Gd,{className:"w-5 h-5 animate-spin"}):o.jsx(gU,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),s?"Creating Account...":"Create Account"]})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",o.jsx(Ve,{to:"/login",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(ht,{})]})},EU=()=>{const[t,e]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(""),[h,f]=g.useState("all"),[p,v]=g.useState("all"),[I,_]=g.useState("all"),[S,E]=g.useState(!0),[w]=g.useState(!1),C=async()=>{try{E(!0);const N=await fetch("/api/writeups");if(N.ok){const y=await N.json();e(y),r(y);const T=Array.from(new Set(y.map(j=>j.category))).filter(Boolean),b=Array.from(new Set(y.map(j=>j.difficulty))).filter(Boolean);i(T),l(b)}else e([]),r([]),i([]),l([])}catch{e([]),r([]),i([]),l([])}finally{E(!1)}};g.useEffect(()=>{C()},[]),g.useEffect(()=>{let A=t;c&&(A=A.filter(N=>N.title.toLowerCase().includes(c.toLowerCase())||N.description.toLowerCase().includes(c.toLowerCase())||N.tags.some(y=>y.toLowerCase().includes(c.toLowerCase())))),h!=="all"&&(A=A.filter(N=>N.category===h)),p!=="all"&&(A=A.filter(N=>N.difficulty===p)),I!=="all"&&(A=A.filter(N=>N.status===I)),r(A)},[c,h,p,I,t]);const R=A=>{switch(A){case"approved":return o.jsx(Br,{className:"w-4 h-4 text-green-400"});case"rejected":return o.jsx(oa,{className:"w-4 h-4 text-red-400"});default:return o.jsx(Na,{className:"w-4 h-4 text-yellow-400"})}},L=A=>{switch(A.toLowerCase()){case"easy":return"bg-primary/20 text-primary border-primary/30";case"medium":return"bg-secondary/20 text-secondary border-secondary/30";case"hard":return"bg-destructive/20 text-destructive border-destructive/30";case"insane":return"bg-purple-500/20 text-purple-500 border-purple-500/30";case"expert":return"bg-red-500/20 text-red-500 border-red-500/30";case"beginner":return"bg-green-500/20 text-green-500 border-green-500/30";default:return"bg-muted/20 text-muted-foreground border-muted/30"}};return S?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading writeups..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Ye,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Community ",o.jsx("span",{className:"text-primary",children:"Writeups"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Learn from other players' solutions and share your own approaches"})]}),o.jsxs("div",{className:"bg-muted/20 border border-border rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"Search writeups, tags, challenges...",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:A=>f(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Categories"}),s.map(A=>o.jsx("option",{value:A,children:A},A))]})}),o.jsx("div",{children:o.jsxs("select",{value:p,onChange:A=>v(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Difficulties"}),a.map(A=>o.jsx("option",{value:A,children:A},A))]})})]}),w&&o.jsx("div",{className:"mt-4",children:o.jsxs("select",{value:I,onChange:A=>_(A.target.value),className:"w-full md:w-auto px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"}),o.jsx("option",{value:"rejected",children:"Rejected"})]})})]}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(Ve,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center gap-2",children:[o.jsx(ti,{className:"w-5 h-5"}),"New Writeup"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${L(A.difficulty)}`,children:A.difficulty}),o.jsxs("div",{className:"flex items-center gap-1",children:[R(A.status),o.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:A.status})]})]}),o.jsx("span",{className:"inline-block px-2 py-1 bg-primary/10 text-primary text-xs rounded border border-primary/20 mb-3",children:A.category}),o.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-3 group-hover:text-primary transition-colors line-clamp-2",children:A.title}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:A.description}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[o.jsx(Wd,{className:"w-4 h-4"}),o.jsxs("span",{children:["Challenge: ",A.challenge]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[A.tags.slice(0,3).map((N,y)=>o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["#",N]},y)),A.tags.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["+",A.tags.length-3]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:o.jsx(Cn,{className:"w-3 h-3 text-primary"})}),o.jsx("span",{className:"text-sm text-muted-foreground",children:A.author.name})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(oc,{className:"w-4 h-4"}),o.jsx("span",{children:A.views})]}),o.jsx("span",{children:new Date(A.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(Ve,{to:`/writeups/${A.id}`,className:"flex-1 bg-primary/10 text-primary border border-primary/20 py-2 px-4 rounded-lg text-center hover:bg-primary/20 transition-colors",children:"Read"}),w&&A.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 bg-green-500/10 text-green-500 border border-green-500/20 py-2 px-4 rounded-lg hover:bg-green-500/20 transition-colors",children:"Approve"}),o.jsx("button",{className:"flex-1 bg-red-500/10 text-red-500 border border-red-500/20 py-2 px-4 rounded-lg hover:bg-red-500/20 transition-colors",children:"Reject"})]})]})]},A.id))}),n.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Wd,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No writeups found"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:t.length===0?"No writeups have been submitted yet. Be the first to share your solution!":"Try adjusting your search or filters"}),o.jsxs(Ve,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 inline-flex items-center gap-2",children:[o.jsx(ti,{className:"w-5 h-5"}),"Create First Writeup"]})]})]})}),o.jsx(ht,{})]})},NU=()=>{const t=zn(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(""),[f,p]=g.useState(""),[v,I]=g.useState(""),[_,S]=g.useState(!1),[E,w]=g.useState([]),[C,R]=g.useState([]),[L,A]=g.useState([]),[N,y]=g.useState(!0),T=async()=>{try{y(!0);const k="/api/challenges/available",P="/api/categories",H="/api/difficulties",[ae,J,le]=await Promise.all([fetch(k),fetch(P),fetch(H)]);if(ae.ok){const O=await ae.json();w(O)}else w([]);if(J.ok){const O=await J.json();R(O),O.length>0&&h(O[0])}else R([]);if(le.ok){const O=await le.json();A(O),O.length>0&&p(O[0])}else A([])}catch{w([]),R([]),A([])}finally{y(!1)}},b=async k=>{k.preventDefault(),S(!0);try{(await fetch("/api/writeups/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:r,content:i,challengeId:l,category:d,difficulty:f,tags:v.split(",").map(H=>H.trim()).filter(H=>H)})})).ok?t("/writeups"):console.error("Failed to create writeup")}catch(P){console.error("Error creating writeup:",P)}finally{S(!1)}},j=(k,P)=>{document.execCommand(k,!1,P)};return g.useEffect(()=>{if(l){const k=E.find(P=>P.id===l);k&&(h(k.category),p(k.difficulty))}},[l,E]),g.useEffect(()=>{T()},[]),N?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading form data..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto max-w-4xl",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Ye,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Create ",o.jsx("span",{className:"text-primary",children:"Writeup"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Share your solution and help others learn from your approach"})]}),o.jsxs("form",{id:"writeup-form",onSubmit:b,className:"space-y-8",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Basic Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Writeup Title *"}),o.jsx("input",{type:"text",required:!0,value:e,onChange:k=>n(k.target.value),placeholder:"Enter a compelling title for your writeup...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),o.jsx("textarea",{required:!0,value:r,onChange:k=>s(k.target.value),placeholder:"Brief description of your writeup...",rows:3,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Challenge *"}),o.jsxs("select",{required:!0,value:l,onChange:k=>c(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"",children:"Select a challenge"}),E.map(k=>o.jsx("option",{value:k.id,children:k.title},k.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category *"}),o.jsx("select",{required:!0,value:d,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:C.map(k=>o.jsx("option",{value:k,children:k},k))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty *"}),o.jsx("select",{required:!0,value:f,onChange:k=>p(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:L.map(k=>o.jsx("option",{value:k,children:k},k))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("input",{type:"text",value:v,onChange:k=>I(k.target.value),placeholder:"Comma-separated tags (e.g., sql-injection, web, bypass)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Writeup Content"}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-3 bg-muted/20 rounded-lg border border-border",children:[o.jsx("button",{type:"button",onClick:()=>j("bold"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bold",children:o.jsx(Q5,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("italic"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Italic",children:o.jsx(iU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("insertUnorderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bullet List",children:o.jsx(ng,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("insertOrderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Numbered List",children:o.jsx(ng,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const k=prompt("Enter URL:");k&&j("createLink",k)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Link",children:o.jsx(aa,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("formatBlock","<pre>"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Code Block",children:o.jsx(tU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const k=prompt("Enter image URL:");k&&j("insertImage",k)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Image",children:o.jsx(sU,{className:"w-4 h-4 text-foreground"})})]}),o.jsx("div",{contentEditable:!0,onInput:k=>a(k.currentTarget.innerHTML),className:"min-h-[400px] px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all prose prose-invert max-w-none",style:{fontFamily:"Georgia, serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":"Start writing your amazing writeup here... You can include code snippets, images, and formatted text."}),o.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Pro tips:"})]}),o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsx("li",{children:"Use the toolbar above to format your text"}),o.jsx("li",{children:"Include code snippets using the code block button"}),o.jsx("li",{children:"Add images to illustrate your steps"}),o.jsx("li",{children:"Break down complex solutions into clear steps"}),o.jsx("li",{children:"Share your thought process and learning moments"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsxs("button",{type:"button",className:"flex items-center gap-2 px-6 py-3 bg-muted text-muted-foreground rounded-lg font-semibold hover:bg-muted/80 transition-colors",onClick:()=>t("/writeups"),children:[o.jsx(oc,{className:"w-4 h-4"}),"Cancel"]}),o.jsxs("button",{type:"submit",disabled:_,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[_?o.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}):o.jsx(PC,{className:"w-4 h-4"}),_?"Publishing...":"Publish Writeup"]})]})]})]})}),o.jsx(ht,{})]})},sb=()=>new Promise(t=>{setTimeout(()=>{const e={id:"github-"+Date.now(),username:"zedctf_user",email:"user@zedctf.com",name:"ZedCTF User",avatar:"https://github.com/github.png",provider:"github"};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true"),t(e)},1500)}),TU=()=>{const[t,e]=g.useState("loading"),[n,r]=g.useState(""),s=zn();return g.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search),l=a.get("code");if(a.get("error")){e("error"),r("GitHub authentication failed. Please try again.");return}try{if(await new Promise(d=>setTimeout(d,2e3)),l){const d=await sb();e("success"),r(`Welcome, ${d.username}! Successfully authenticated with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}else{const d=await sb();e("success"),r(`Welcome, ${d.username}! Successfully signed in with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}}catch(d){e("error"),r("Authentication failed. Please try again."),console.error("GitHub callback error:",d)}})()},[s]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx(Ye,{className:"w-10 h-10 text-green-400"}),o.jsx("span",{className:"text-3xl font-bold text-white",children:"ZedCTF"})]}),o.jsxs("div",{className:"space-y-4",children:[t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx(Gd,{className:"w-12 h-12 text-green-400 animate-spin mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Connecting to GitHub..."}),o.jsx("p",{className:"text-gray-300",children:"Please wait while we authenticate your account."})]}),t==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Br,{className:"w-12 h-12 text-green-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Successful!"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Redirecting to homepage..."})]}),t==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(oa,{className:"w-12 h-12 text-red-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Failed"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Back to Login"}),o.jsx("button",{onClick:()=>s("/signup"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Try Sign Up"})]})]})]})]})})},SU=()=>{const t=to();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},se=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));se.displayName="Card";const Se=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("flex flex-col space-y-1.5 p-6",t),...e}));Se.displayName="CardHeader";const Ce=g.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ce.displayName="CardTitle";const Ht=g.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:Pe("text-sm text-muted-foreground",t),...e}));Ht.displayName="CardDescription";const ie=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("p-6 pt-0",t),...e}));ie.displayName="CardContent";const CU=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("flex items-center p-6 pt-0",t),...e}));CU.displayName="CardFooter";const IU=({isOpen:t,onClose:e})=>{const{user:n}=Wn(),[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),d=g.useRef(null),[h,f]=g.useState({displayName:"",bio:"",role:"student",institution:""}),[p,v]=g.useState(null),[I,_]=g.useState("");g.useEffect(()=>{t&&n&&(async()=>{try{const N=await sa(Ge(ge,"users",n.uid));if(N.exists()){const y=N.data();f({displayName:y.displayName||n.displayName||"",bio:y.bio||"",role:y.role||"student",institution:y.institution||""}),_(y.photoURL||n.photoURL||"")}else f({displayName:n.displayName||"",bio:"",role:"student",institution:""}),_(n.photoURL||"")}catch(N){console.error("Error fetching user data:",N)}})()},[t,n]);const S=A=>{const{name:N,value:y}=A.target;f(T=>({...T,[N]:y}))},E=async A=>{var y;const N=(y=A.target.files)==null?void 0:y[0];if(N){if(!N.type.startsWith("image/")){alert("Please select an image file");return}if(N.size>2*1024*1024){alert("Image size should be less than 2MB for faster upload");return}v(N);const T=URL.createObjectURL(N);_(T)}},w=(A,N=800,y=.8)=>new Promise((T,b)=>{const j=document.createElement("canvas"),k=j.getContext("2d"),P=new Image;P.onload=()=>{let H=P.width,ae=P.height;H>N&&(ae=ae*N/H,H=N),j.width=H,j.height=ae,k==null||k.drawImage(P,0,0,H,ae),j.toBlob(J=>{if(J){const le=new File([J],A.name,{type:"image/jpeg",lastModified:Date.now()});T(le)}else b(new Error("Image compression failed"))},"image/jpeg",y)},P.onerror=b,P.src=URL.createObjectURL(A)}),C=async(A,N)=>{const y=await w(A),b=`profile_${Date.now()}.jpg`,j=GF(ZF,`profile-pictures/${N}/${b}`),k=await WF(j,y);return await qF(k.ref)},R=async A=>{if(A.preventDefault(),!!n){s(!0),c(!1);try{let N=n.photoURL;if(p){a(!0);try{N=await C(p,n.uid),console.log("Profile image uploaded successfully")}catch(T){console.error("Error uploading image:",T)}finally{a(!1)}}const y=[];(h.displayName!==n.displayName||N!==n.photoURL)&&y.push(UN(n,{displayName:h.displayName,photoURL:N})),y.push(hn(Ge(ge,"users",n.uid),{displayName:h.displayName,bio:h.bio,role:h.role,institution:h.institution,photoURL:N,updatedAt:new Date})),await Promise.all(y),console.log("Profile updated successfully"),c(!0),setTimeout(()=>{e(),window.location.reload()},1e3)}catch(N){console.error("Error updating profile:",N),alert("Failed to update profile. Please try again.")}finally{s(!1)}}},L=()=>{var A;(A=d.current)==null||A.click()};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",disabled:r,children:o.jsx(lc,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[l&&o.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded flex items-center gap-2",children:[o.jsx(Br,{className:"w-5 h-5"}),"Profile updated successfully!"]}),o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full bg-muted/50 border-2 border-border flex items-center justify-center overflow-hidden",children:I?o.jsx("img",{src:I,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Cn,{className:"w-12 h-12 text-muted-foreground"})}),o.jsx("button",{type:"button",onClick:L,disabled:i||r,className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 hover:bg-primary/90 transition-colors disabled:opacity-50",children:i?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(Y5,{className:"w-4 h-4"})}),o.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:i||r})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:i?"Uploading image...":"Click the camera icon to upload a profile picture (max 2MB)"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-foreground mb-2",children:"Display Name"}),o.jsx("input",{id:"displayName",name:"displayName",type:"text",value:h.displayName,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Enter your display name",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-foreground mb-2",children:"Bio"}),o.jsx("textarea",{id:"bio",name:"bio",rows:3,value:h.bio,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none",placeholder:"Tell us about yourself...",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:"I am a"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"student",label:"Student",icon:Nv},{value:"lecturer",label:"Lecturer",icon:nn},{value:"expert",label:"Expert",icon:IC},{value:"general",label:"General User",icon:Cn}].map(({value:A,label:N,icon:y})=>o.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-all ${h.role===A?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 text-foreground"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:A,checked:h.role===A,onChange:S,className:"hidden",disabled:r}),o.jsx(y,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:N})]},A))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-foreground mb-2",children:"Institution"}),o.jsx("input",{id:"institution",name:"institution",type:"text",value:h.institution,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Your school, university, or organization",disabled:r})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,disabled:r,className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r||i,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},jU=()=>{var w,C;const{user:t}=Wn();zn();const[e,n]=g.useState(null),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState([]),[d,h]=g.useState(!0),[f,p]=g.useState(!1),[v,I]=g.useState(null),_=R=>{switch(R){case"student":return o.jsx(Nv,{className:"w-4 h-4"});case"lecturer":return o.jsx(nn,{className:"w-4 h-4"});case"expert":return o.jsx(IC,{className:"w-4 h-4"});default:return o.jsx(Cn,{className:"w-4 h-4"})}},S=R=>{switch(R){case"student":return"Student";case"lecturer":return"Lecturer";case"expert":return"Expert";default:return"General User"}},E=async()=>{var R,L,A;if(t)try{h(!0),console.log("Fetching real dashboard data for user:",t.uid);const N=await sa(Ge(ge,"users",t.uid));if(N.exists()){const y=N.data();console.log("Real user data from Firestore:",y),I(y),n({totalPoints:y.totalPoints||0,challengesSolved:y.challengesSolved||0,currentRank:y.currentRank||0,timeSpent:y.timeSpent||"0h 0m",username:y.username||((R=t==null?void 0:t.email)==null?void 0:R.split("@")[0])||"Hacker",joinDate:y.createdAt||(t==null?void 0:t.metadata.creationTime)||new Date().toISOString(),firstName:y.firstName,lastName:y.lastName,displayName:y.displayName,bio:y.bio,role:y.role,institution:y.institution,photoURL:y.photoURL})}else console.log("No user document found in Firestore"),n({totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m",username:((L=t==null?void 0:t.email)==null?void 0:L.split("@")[0])||"Hacker",joinDate:(t==null?void 0:t.metadata.creationTime)||new Date().toISOString()});try{const y=Tr(St(ge,"challenges"),cn("solvedBy","array-contains",t.uid),qs("solvedAt","desc"),fp(5)),b=(await Vn(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real solved challenges:",b),s(b)}catch{console.log("No challenges collection or no solved challenges yet"),s([])}try{const y=Tr(St(ge,"events"),cn("participants","array-contains",t.uid),qs("date","desc"),fp(5)),b=(await Vn(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real events participated:",b),a(b)}catch{console.log("No events collection or no events participated yet"),a([])}try{const y=Tr(St(ge,"activity"),cn("userId","==",t.uid),qs("timestamp","desc"),fp(10)),b=(await Vn(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real user activity:",b),c(b)}catch{console.log("No activity collection yet, creating default activity");const T={id:"welcome",action:"Account Created",description:"Welcome to ZedCTF! Start your cybersecurity journey.",timestamp:(t==null?void 0:t.metadata.creationTime)||new Date,userId:t.uid};c([T])}}catch(N){console.error("Error fetching real dashboard data:",N),n({totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m",username:((A=t==null?void 0:t.email)==null?void 0:A.split("@")[0])||"Hacker",joinDate:(t==null?void 0:t.metadata.creationTime)||new Date().toISOString()}),s([]),a([]),c([{id:"welcome",action:"Account Created",description:"Welcome to ZedCTF! Start your cybersecurity journey.",timestamp:(t==null?void 0:t.metadata.creationTime)||new Date}])}finally{h(!1)}};return g.useEffect(()=>{t&&E()},[t]),d?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"dashboard",className:"pt-24 pb-16 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading your dashboard..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"dashboard",className:"pt-24 pb-16 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center overflow-hidden border-2 border-primary/30",children:t!=null&&t.photoURL||v!=null&&v.photoURL?o.jsx("img",{src:(t==null?void 0:t.photoURL)||(v==null?void 0:v.photoURL),alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Cn,{className:"w-8 h-8 text-primary"})}),o.jsx("button",{onClick:()=>p(!0),className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground rounded-full p-1 hover:bg-primary/90 transition-colors",title:"Edit Profile",children:o.jsx(DC,{className:"w-3 h-3"})})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-4xl font-bold",children:["Welcome back,"," ",o.jsx("span",{className:"text-primary",children:(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||(e==null?void 0:e.username)||((w=t==null?void 0:t.email)==null?void 0:w.split("@")[0])||"Hacker"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx("span",{children:t==null?void 0:t.email}),(v==null?void 0:v.role)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("div",{className:"flex items-center gap-1",children:[_(v.role),o.jsx("span",{children:S(v.role)})]})]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Member since"," ",e!=null&&e.joinDate?new Date(e.joinDate).toLocaleDateString():"recently"]})]}),(v==null?void 0:v.institution)&&o.jsx("p",{className:"text-sm text-muted-foreground",children:v.institution}),(v==null?void 0:v.bio)&&o.jsx("p",{className:"text-sm text-muted-foreground mt-1 max-w-md",children:v.bio})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(se,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"Total Points"}),o.jsx(Jn,{className:"w-5 h-5 text-primary"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:((C=e==null?void 0:e.totalPoints)==null?void 0:C.toLocaleString())||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Lifetime points earned"})]})]}),o.jsxs(se,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"Challenges Solved"}),o.jsx(vp,{className:"w-5 h-5 text-secondary"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:(e==null?void 0:e.challengesSolved)||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Total challenges completed"})]})]}),o.jsxs(se,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"Current Rank"}),o.jsx(pU,{className:"w-5 h-5 text-primary"})]}),o.jsxs(ie,{children:[o.jsxs("div",{className:"text-3xl font-bold mb-2",children:["#",(e==null?void 0:e.currentRank)||"0"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Global leaderboard position"})]})]}),o.jsxs(se,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium text-muted-foreground",children:"Time Spent"}),o.jsx(Na,{className:"w-5 h-5 text-muted-foreground"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:(e==null?void 0:e.timeSpent)||"0h 0m"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Total practice time"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(se,{className:"border-border",children:[o.jsx(Se,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(vp,{className:"w-5 h-5 text-primary"}),"Recently Solved Challenges"]})}),o.jsx(ie,{children:r.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(vp,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No challenges solved yet"}),o.jsx("p",{className:"text-sm mt-2",children:"Start practicing to see your progress here"})]}):o.jsx("div",{className:"space-y-4",children:r.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.title}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:R.category}),o.jsx("span",{children:""}),o.jsx("span",{children:R.difficulty}),o.jsx("span",{children:""}),o.jsx("span",{children:R.solvedAt?new Date(R.solvedAt.toDate?R.solvedAt.toDate():R.solvedAt).toLocaleDateString():"Recently"})]})]}),o.jsxs("div",{className:"text-primary font-bold",children:["+",R.points]})]},R.id))})})]}),o.jsxs(se,{className:"border-border",children:[o.jsx(Se,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(ia,{className:"w-5 h-5 text-primary"}),"Events Participated In"]})}),o.jsx(ie,{children:i.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(ia,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No events participated yet"}),o.jsx("p",{className:"text-sm mt-2",children:"Join live events to appear here"})]}):o.jsx("div",{className:"space-y-4",children:i.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.name}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:R.date}),R.position&&o.jsxs("span",{children:[" Position: #",R.position]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-secondary font-bold",children:R.prize}),R.pointsEarned>0&&o.jsxs("div",{className:"text-xs text-primary",children:["+",R.pointsEarned," pts"]})]})]},R.id))})})]}),o.jsxs(se,{className:"border-border lg:col-span-2",children:[o.jsx(Se,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(Hd,{className:"w-5 h-5 text-primary"}),"Recent Activity"]})}),o.jsx(ie,{children:l.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(Hd,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No recent activity"}),o.jsx("p",{className:"text-sm mt-2",children:"Your activity will appear here"})]}):o.jsx("div",{className:"space-y-3",children:l.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.action}),o.jsx("div",{className:"text-sm text-muted-foreground",children:R.description})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:R.timestamp?new Date(R.timestamp.toDate?R.timestamp.toDate():R.timestamp).toLocaleDateString():"Recently"}),R.points&&o.jsxs("div",{className:"text-sm text-primary font-bold",children:["+",R.points]})]})]},R.id))})})]})]})]})}),o.jsx(ht,{}),o.jsx(IU,{isOpen:f,onClose:()=>p(!1)})]})},AU=Yh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Fe({className:t,variant:e,...n}){return o.jsx("div",{className:Pe(AU({variant:e}),t),...n})}const he=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));he.displayName="Input";const kU=()=>{const{user:t}=Wn(),e=zn(),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[p,v]=g.useState(null),[I,_]=g.useState("");g.useEffect(()=>{S()},[]),g.useEffect(()=>{w()},[h,p,n]);const S=async()=>{try{d(!0),_("");const T=Tr(St(ge,"challenges"),cn("isActive","==",!0),cn("availableInPractice","==",!0)),j=(await Vn(T)).docs.map(k=>({id:k.id,...k.data()}));r(j),E(j)}catch(T){console.error("Error fetching practice challenges:",T),_("Failed to load challenges. Please check your permissions.")}finally{d(!1)}},E=T=>{const b=new Map;T.forEach(P=>{const H=P.finalCategory||P.category;b.set(H,(b.get(H)||0)+1)});const j={web:{color:"from-blue-500 to-cyan-500",icon:"",description:"Web application security, SQL injection, XSS, and more"},crypto:{color:"from-purple-500 to-pink-500",icon:"",description:"Cryptography, encryption, and cryptographic attacks"},forensics:{color:"from-orange-500 to-red-500",icon:"",description:"Digital forensics, file analysis, and data recovery"},pwn:{color:"from-red-500 to-rose-500",icon:"",description:"Binary exploitation, memory corruption, and reverse engineering"},reversing:{color:"from-indigo-500 to-purple-500",icon:"",description:"Reverse engineering and malware analysis"},misc:{color:"from-gray-500 to-slate-500",icon:"",description:"Miscellaneous challenges and various security topics"}},k=Array.from(b.entries()).map(([P,H])=>{const ae=j[P.toLowerCase()]||{color:"from-gray-500 to-slate-500",icon:"",description:"Various security challenges"};return{name:P,count:H,icon:ae.icon,color:ae.color,description:ae.description}});k.sort((P,H)=>H.count-P.count),i(k)},w=()=>{let T=[...n];h&&(T=T.filter(b=>b.title.toLowerCase().includes(h.toLowerCase())||b.description.toLowerCase().includes(h.toLowerCase()))),p&&(T=T.filter(b=>(b.finalCategory||b.category)===p)),T=T.sort((b,j)=>(j.totalPoints||j.points)-(b.totalPoints||b.points)),l(T)},C=T=>{switch(T){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},R=T=>{switch(T){case"easy":return"Easy";case"medium":return"Medium";case"hard":return"Hard";case"expert":return"Expert";default:return T}},L=T=>{e(`/challenge/${T}`)},A=()=>{e("/live")},N=()=>{S()},y=()=>{f(""),v(null)};return c?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading practice challenges..."})]})})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx(Ye,{className:"w-16 h-16 text-primary"})}),o.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Practice Challenges"}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-6",children:"Master your cybersecurity skills with hands-on challenges across different categories"}),I&&o.jsx(se,{className:"max-w-2xl mx-auto mb-6 border-red-200 bg-red-50",children:o.jsx(ie,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Z5,{className:"w-5 h-5 text-red-600"}),o.jsx("p",{className:"text-red-800",children:I})]})})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto mb-8",children:[o.jsx(se,{className:"text-center border-2",children:o.jsxs(ie,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:n.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Challenges"})]})}),o.jsx(se,{className:"text-center border-2",children:o.jsxs(ie,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.reduce((T,b)=>{var j;return T+(((j=b.solvedBy)==null?void 0:j.length)||0)},0)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Solves"})]})}),o.jsx(se,{className:"text-center border-2",children:o.jsxs(ie,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]})})]}),o.jsx(se,{className:"max-w-4xl mx-auto mb-8 border-2 bg-gradient-to-r from-primary/5 to-primary/10",children:o.jsx(ie,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Rs,{className:"w-8 h-8 text-primary"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Ready for Live Competition?"}),o.jsx("p",{className:"text-muted-foreground",children:"Test your skills against other players in real-time events!"})]})]}),o.jsxs(Q,{variant:"terminal",onClick:A,children:[o.jsx(Rs,{className:"w-4 h-4 mr-2"}),"View Live Events"]})]})})})]}),o.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),o.jsx(he,{placeholder:"Search challenges by title or description...",value:h,onChange:T=>f(T.target.value),className:"pl-12 h-12 text-lg border-2"})]})}),!p&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Choose a Category"}),o.jsxs(Q,{variant:"outline",onClick:N,size:"sm",children:[o.jsx(yp,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(T=>o.jsx(se,{className:"border-2 hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>v(T.name),children:o.jsxs(ie,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:`text-2xl bg-gradient-to-r ${T.color} rounded-lg p-3`,children:T.icon}),o.jsx(Y_,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"})]}),o.jsx("h3",{className:"font-bold text-lg mb-2 group-hover:text-primary transition-colors",children:T.name}),o.jsxs("p",{className:"text-muted-foreground",children:[T.count," challenge",T.count!==1?"s":""]})]})},T.name))}):o.jsx(se,{className:"text-center border-2",children:o.jsxs(ie,{className:"p-12",children:[o.jsx(nU,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Categories Available"}),o.jsx("p",{className:"text-muted-foreground",children:"No practice challenges are currently available. Check back later!"})]})})]}),p&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Q,{variant:"outline",onClick:()=>v(null),className:"flex items-center gap-2",children:[o.jsx(Y_,{className:"w-4 h-4 rotate-180"}),"Back to Categories"]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold",children:[p," Challenges"]}),o.jsxs("p",{className:"text-muted-foreground",children:[a.length," challenge",a.length!==1?"s":""," available"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{variant:"outline",onClick:y,size:"sm",children:"Clear Filters"}),o.jsxs(Q,{variant:"outline",onClick:N,size:"sm",children:[o.jsx(yp,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(T=>{var b,j,k,P;return o.jsx(se,{className:"border-2 hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>L(T.id),children:o.jsxs(ie,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h3",{className:"font-bold text-lg group-hover:text-primary transition-colors",children:T.title}),o.jsx(Fe,{className:C(T.difficulty),children:R(T.difficulty)})]}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:T.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(nn,{className:"w-4 h-4"}),o.jsx("span",{children:((b=T.solvedBy)==null?void 0:b.length)||0})]}),o.jsxs(Fe,{variant:"outline",className:"font-mono font-bold",children:[T.totalPoints||T.points," pts"]})]}),T.createdAt&&o.jsx("div",{className:"text-muted-foreground",children:((P=(k=(j=T.createdAt)==null?void 0:j.toDate)==null?void 0:k.call(j))==null?void 0:P.toLocaleDateString())||new Date(T.createdAt).toLocaleDateString()})]})]})},T.id)})}):o.jsx(se,{className:"text-center border-2",children:o.jsxs(ie,{className:"p-12",children:[o.jsx(la,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Challenges Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:h?`No challenges match "${h}" in ${p}`:`No challenges available in ${p}`}),o.jsx(Q,{variant:"outline",onClick:y,children:"Clear Search"})]})})]}),n.length===0&&!c&&!p&&o.jsx(se,{className:"text-center border-2",children:o.jsxs(ie,{className:"p-12",children:[o.jsx(Ye,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Practice Challenges Available"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Check back later for new practice challenges, or join a live event to test your skills."}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[o.jsxs(Q,{variant:"terminal",onClick:N,children:[o.jsx(yp,{className:"w-4 h-4 mr-2"}),"Refresh"]}),o.jsxs(Q,{variant:"outline",onClick:A,children:[o.jsx(Rs,{className:"w-4 h-4 mr-2"}),"View Live Events"]})]})]})})]})}),o.jsx(ht,{})]})},ib="/ZedCTF",RU=()=>{const{user:t}=Wn(),[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const p=Tr(St(ge,"events"),cn("status","in",["LIVE","STARTING_SOON"]),qs("startTime","asc")),v=Tr(St(ge,"events"),cn("status","==","UPCOMING"),qs("startTime","asc")),[I,_]=await Promise.all([Vn(p),Vn(v)]),S=I.docs.map(w=>({id:w.id,...w.data()})),E=_.docs.map(w=>{var C;return{id:w.id,...w.data(),registered:t&&((C=w.data().registeredUsers)==null?void 0:C.includes(t.uid))||!1}});n(S),s(E)}catch(p){console.error("Error fetching events:",p),n([]),s([])}finally{a(!1)}},c=async p=>{var v;if(!t){alert("Please log in to register for events");return}try{const I=Ge(ge,"events",p);await hn(I,{registeredUsers:Jm(t.uid),participants:(((v=r.find(_=>_.id===p))==null?void 0:v.participants)||0)+1}),l()}catch(I){console.error("Failed to register for event:",I),alert("Failed to register for event. Please try again.")}},d=async p=>{var v;if(!t){alert("Please log in to join events");return}try{const I=Ge(ge,"events",p);await hn(I,{participants:(((v=e.find(_=>_.id===p))==null?void 0:v.participants)||0)+1}),window.location.href=`${ib}/competition/${p}`}catch(I){console.error("Failed to join live event:",I),alert("Failed to join event. Please try again.")}},h=()=>{window.location.href=`${ib}/practice`};if(g.useEffect(()=>{l();const p=setInterval(l,1e4);return()=>clearInterval(p)},[t]),i)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading events..."})]})}),o.jsx(ht,{})]});const f=e[0];return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Rs,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[o.jsx("span",{className:"text-primary",children:"LIVE"})," Events"]}),o.jsx("p",{className:"text-muted-foreground",children:"Compete in real-time for prizes"})]}),f?o.jsxs(se,{className:"max-w-4xl mx-auto border-primary/50 bg-gradient-to-br from-primary/5 to-transparent mb-8 animate-glow",children:[o.jsx(Se,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ce,{className:"text-2xl flex items-center gap-2",children:[o.jsxs("span",{className:"relative flex h-3 w-3",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-primary"})]}),f.title]}),o.jsx(Fe,{className:"bg-primary text-primary-foreground font-bold px-4 py-1",children:f.status==="LIVE"?"LIVE NOW":"STARTING SOON"})]})}),o.jsxs(ie,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(Na,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold font-mono",children:f.timeLeft}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Left"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(nn,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.participants}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Players"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Jn,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.prize}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Prize Pool"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Rs,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.difficulty}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Difficulty"})]})]}),o.jsxs(Q,{variant:"neon",size:"lg",className:"w-full",onClick:()=>d(f.id),children:[o.jsx(Rs,{className:"w-5 h-5"}),f.status==="LIVE"?"Join Event Now":"Prepare for Event"]})]})]}):o.jsx(se,{className:"max-w-4xl mx-auto border-border mb-8",children:o.jsxs(ie,{className:"p-12 text-center",children:[o.jsx(Rs,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Live Events"}),o.jsx("p",{className:"text-muted-foreground",children:"Check back later for upcoming competitions"}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[o.jsx(Ye,{className:"w-12 h-12 text-primary mx-auto mb-3"}),o.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Want to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Sharpen your skills with our practice challenges while you wait for the next live event."}),o.jsxs(Q,{variant:"terminal",onClick:h,children:[o.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Explore Practice Challenges"]})]})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Upcoming Events"}),r.length===0?o.jsx(se,{className:"border-border",children:o.jsxs(ie,{className:"p-8 text-center",children:[o.jsx(ia,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-muted-foreground",children:"No upcoming events scheduled"})]})}):o.jsx("div",{className:"space-y-4",children:r.map(p=>o.jsx(se,{className:"border-border hover:border-primary/30 transition-all",children:o.jsx(ie,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("h4",{className:"font-bold text-xl",children:p.title}),o.jsx(Fe,{variant:"outline",className:"border-primary/30 text-primary",children:p.difficulty})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ia,{className:"w-4 h-4"}),p.date]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),p.participants," registered",p.maxParticipants&&` / ${p.maxParticipants} max`]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"w-4 h-4"}),"Prize: ",p.prize]})]}),p.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:p.description})]}),o.jsx(Q,{variant:p.registered?"outline":"terminal",className:"md:ml-4",onClick:()=>!p.registered&&c(p.id),disabled:p.registered,children:p.registered?"Registered ":"Register"})]})})},p.id))})]}),o.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:o.jsx(se,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:o.jsxs(ie,{className:"p-8 text-center",children:[o.jsx(Ye,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ready to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Access our extensive library of practice challenges covering web security, cryptography, forensics, and more. Perfect for beginners and experts alike."}),o.jsxs(Q,{variant:"terminal",size:"lg",onClick:h,children:[o.jsx(Ye,{className:"w-5 h-5 mr-2"}),"Explore Practice Challenges"]})]})})})]})}),o.jsx(ht,{})]})};function PU(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const d=f=>{var E;const{scope:p,children:v,...I}=f,_=((E=p==null?void 0:p[t])==null?void 0:E[c])||l,S=g.useMemo(()=>I,Object.values(I));return o.jsx(_.Provider,{value:S,children:v})};d.displayName=i+"Provider";function h(f,p){var _;const v=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,I=g.useContext(v);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,DU(s,...e)]}function DU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Zr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var bt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},LU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Sv=LU.reduce((t,e)=>{const n=bv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),OC={exports:{}},MC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=g;function OU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MU=typeof Object.is=="function"?Object.is:OU,VU=ca.useState,FU=ca.useEffect,UU=ca.useLayoutEffect,BU=ca.useDebugValue;function $U(t,e){var n=e(),r=VU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return UU(function(){s.value=n,s.getSnapshot=e,xp(s)&&i({inst:s})},[t,n,e]),FU(function(){return xp(s)&&i({inst:s}),t(function(){xp(s)&&i({inst:s})})},[t]),BU(n),n}function xp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!MU(t,n)}catch{return!0}}function zU(t,e){return e()}var HU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zU:$U;MC.useSyncExternalStore=ca.useSyncExternalStore!==void 0?ca.useSyncExternalStore:HU;OC.exports=MC;var WU=OC.exports;function qU(){return WU.useSyncExternalStore(GU,()=>!0,()=>!1)}function GU(){return()=>{}}var Cv="Avatar",[KU]=PU(Cv),[QU,VC]=KU(Cv),FC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return o.jsx(QU,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(Sv.span,{...r,ref:e})})});FC.displayName=Cv;var UC="AvatarImage",BC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=VC(UC,n),l=YU(r,i),c=Zr(d=>{s(d),a.onImageLoadingStatusChange(d)});return bt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(Sv.img,{...i,ref:e,src:r}):null});BC.displayName=UC;var $C="AvatarFallback",zC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=VC($C,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(Sv.span,{...s,ref:e}):null});zC.displayName=$C;function ob(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function YU(t,{referrerPolicy:e,crossOrigin:n}){const r=qU(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>ob(i,t));return bt(()=>{l(ob(i,t))},[i,t]),bt(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),a}var HC=FC,WC=BC,qC=zC;const GC=g.forwardRef(({className:t,...e},n)=>o.jsx(HC,{ref:n,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));GC.displayName=HC.displayName;const XU=g.forwardRef(({className:t,...e},n)=>o.jsx(WC,{ref:n,className:Pe("aspect-square h-full w-full",t),...e}));XU.displayName=WC.displayName;const KC=g.forwardRef(({className:t,...e},n)=>o.jsx(qC,{ref:n,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));KC.displayName=qC.displayName;const JU=({eventName:t="CTF Competition"})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const c="/api/ctf/leaderboard",d="/api/platform/top-users",[h,f]=await Promise.all([fetch(c,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),fetch(d)]);if(h.ok){const p=await h.json();n(p)}else n([]);if(f.ok){const p=await f.json();s(p)}else s([])}catch{n([]),s([])}finally{a(!1)}};return g.useEffect(()=>{l();const c=setInterval(l,5e3);return()=>clearInterval(c)},[]),i?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"leaderboard",className:"pt-24 pb-16 bg-muted/20 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading leaderboard data..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"ctf-leaderboard",className:"pt-24 pb-16 bg-background min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Jn,{className:"w-12 h-12 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[t," - ",o.jsx("span",{className:"text-primary",children:"Live Scoreboard"})]})]}),o.jsxs(se,{className:"max-w-6xl mx-auto border-border",children:[o.jsx(Se,{className:"bg-muted/30",children:o.jsxs(Ce,{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(rb,{className:"w-5 h-5 text-primary"}),"Live Competition Rankings"]}),o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:e.length>0?`${e.length} Teams Competing`:"No active competition"})]})}),o.jsx(ie,{className:"p-0",children:e.length===0?o.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[o.jsx(Jn,{className:"w-20 h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg mb-2",children:"No scores available yet"}),o.jsx("p",{className:"text-sm",children:"Leaderboard will update when competition starts"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Team"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Captain"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Activity"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Challenge"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:e.map(c=>o.jsxs("tr",{className:"hover:bg-muted/20 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`text-lg font-bold ${c.rank<=3?"text-primary":"text-foreground"}`,children:c.rank})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:c.team}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-muted-foreground",children:c.captain}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-lg font-bold text-primary",children:c.points})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:c.lastActivity}),o.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground max-w-xs truncate",children:c.challenge})]},c.rank))})]})})})]})]})}),o.jsx("section",{id:"platform-leaderboard",className:"py-16 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Jn,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Global ",o.jsx("span",{className:"text-primary",children:"Leaderboard"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Top performers this month"})]}),o.jsxs(se,{className:"max-w-4xl mx-auto border-border",children:[o.jsx(Se,{children:o.jsxs(Ce,{className:"flex items-center gap-2",children:[o.jsx(rb,{className:"w-5 h-5 text-primary"}),"Top Platform Hackers"]})}),o.jsx(ie,{children:r.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Jn,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No platform rankings available yet"})]}):o.jsx("div",{className:"space-y-3",children:r.map(c=>o.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg transition-all duration-300 ${c.rank<=3?"bg-primary/10 border-2 border-primary/30 hover:border-primary/50":"bg-muted/30 border border-border hover:border-primary/30"}`,children:[o.jsx("div",{className:`text-2xl font-bold w-12 text-center ${c.rank<=3?"text-primary":"text-muted-foreground"}`,children:c.badge||`#${c.rank}`}),o.jsx(GC,{className:"w-12 h-12 border-2 border-primary/30",children:o.jsx(KC,{className:"bg-primary/20 text-primary font-bold",children:c.name.substring(0,2).toUpperCase()})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-lg",children:c.name}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.solved," challenges solved"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:c.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]},c.rank))})})]})]})}),o.jsx(ht,{})]})};function Re(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Ta(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var E;const{scope:p,children:v,...I}=f,_=((E=p==null?void 0:p[t])==null?void 0:E[c])||l,S=g.useMemo(()=>I,Object.values(I));return o.jsx(_.Provider,{value:S,children:v})};d.displayName=i+"Provider";function h(f,p){var _;const v=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,I=g.useContext(v);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,ZU(s,...e)]}function ZU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function ab(t){const e=e9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(n9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function e9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=s9(s),l=r9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var t9=Symbol("radix.slottable");function n9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===t9}function r9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function s9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function QC(t){const e=t+"CollectionProvider",[n,r]=Ta(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=_=>{const{scope:S,children:E}=_,w=ys.useRef(null),C=ys.useRef(new Map).current;return o.jsx(s,{scope:S,itemMap:C,collectionRef:w,children:E})};a.displayName=e;const l=t+"CollectionSlot",c=ab(l),d=ys.forwardRef((_,S)=>{const{scope:E,children:w}=_,C=i(l,E),R=ft(S,C.collectionRef);return o.jsx(c,{ref:R,children:w})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=ab(h),v=ys.forwardRef((_,S)=>{const{scope:E,children:w,...C}=_,R=ys.useRef(null),L=ft(S,R),A=i(h,E);return ys.useEffect(()=>(A.itemMap.set(R,{ref:R,...C}),()=>void A.itemMap.delete(R))),o.jsx(p,{[f]:"",ref:L,children:w})});v.displayName=h;function I(_){const S=i(t+"CollectionConsumer",_);return ys.useCallback(()=>{const w=S.collectionRef.current;if(!w)return[];const C=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((A,N)=>C.indexOf(A.ref.current)-C.indexOf(N.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:a,Slot:d,ItemSlot:v},I,r]}var i9=eh[" useId ".trim().toString()]||(()=>{}),o9=0;function Ac(t){const[e,n]=g.useState(i9());return bt(()=>{n(r=>r??String(o9++))},[t]),e?`radix-${e}`:""}function a9(t){const e=l9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(u9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function l9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=h9(s),l=d9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var c9=Symbol("radix.slottable");function u9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===c9}function d9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function h9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var f9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Le=f9.reduce((t,e)=>{const n=a9(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function p9(t,e){t&&pa.flushSync(()=>t.dispatchEvent(e))}var m9=eh[" useInsertionEffect ".trim().toString()]||bt;function cc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=g9({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=g.useRef(t!==void 0);g.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=g.useCallback(h=>{var f;if(l){const p=y9(h)?h(t):h;p!==t&&((f=a.current)==null||f.call(a,p))}else i(h)},[l,t,i,a]);return[c,d]}function g9({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return m9(()=>{i.current=e},[e]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function y9(t){return typeof t=="function"}var v9=g.createContext(void 0);function Iv(t){const e=g.useContext(v9);return t||e||"ltr"}var wp="rovingFocusGroup.onEntryFocus",x9={bubbles:!1,cancelable:!0},kc="RovingFocusGroup",[rg,YC,w9]=QC(kc),[_9,XC]=Ta(kc,[w9]),[b9,E9]=_9(kc),JC=g.forwardRef((t,e)=>o.jsx(rg.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(rg.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(N9,{...t,ref:e})})}));JC.displayName=kc;var N9=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,p=g.useRef(null),v=ft(e,p),I=Iv(i),[_,S]=cc({prop:a,defaultProp:l??null,onChange:c,caller:kc}),[E,w]=g.useState(!1),C=Zr(d),R=YC(n),L=g.useRef(!1),[A,N]=g.useState(0);return g.useEffect(()=>{const y=p.current;if(y)return y.addEventListener(wp,C),()=>y.removeEventListener(wp,C)},[C]),o.jsx(b9,{scope:n,orientation:r,dir:I,loop:s,currentTabStopId:_,onItemFocus:g.useCallback(y=>S(y),[S]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>N(y=>y+1),[]),onFocusableItemRemove:g.useCallback(()=>N(y=>y-1),[]),children:o.jsx(Le.div,{tabIndex:E||A===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:Re(t.onMouseDown,()=>{L.current=!0}),onFocus:Re(t.onFocus,y=>{const T=!L.current;if(y.target===y.currentTarget&&T&&!E){const b=new CustomEvent(wp,x9);if(y.currentTarget.dispatchEvent(b),!b.defaultPrevented){const j=R().filter(J=>J.focusable),k=j.find(J=>J.active),P=j.find(J=>J.id===_),ae=[k,P,...j].filter(Boolean).map(J=>J.ref.current);tI(ae,h)}}L.current=!1}),onBlur:Re(t.onBlur,()=>w(!1))})})}),ZC="RovingFocusGroupItem",eI=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,c=Ac(),d=i||c,h=E9(ZC,n),f=h.currentTabStopId===d,p=YC(n),{onFocusableItemAdd:v,onFocusableItemRemove:I,currentTabStopId:_}=h;return g.useEffect(()=>{if(r)return v(),()=>I()},[r,v,I]),o.jsx(rg.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:o.jsx(Le.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Re(t.onMouseDown,S=>{r?h.onItemFocus(d):S.preventDefault()}),onFocus:Re(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Re(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=C9(S,h.orientation,h.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let C=p().filter(R=>R.focusable).map(R=>R.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const R=C.indexOf(S.currentTarget);C=h.loop?I9(C,R+1):C.slice(R+1)}setTimeout(()=>tI(C))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:_!=null}):a})})});eI.displayName=ZC;var T9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function S9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function C9(t,e,n){const r=S9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return T9[r]}function tI(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function I9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var j9=JC,A9=eI;function k9(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var nI=t=>{const{present:e,children:n}=t,r=R9(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=ft(r.ref,P9(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};nI.displayName="Presence";function R9(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=k9(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=xu(r.current);i.current=l==="mounted"?d:"none"},[l]),bt(()=>{const d=r.current,h=s.current;if(h!==t){const p=i.current,v=xu(d);t?c("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),bt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=v=>{const _=xu(r.current).includes(CSS.escape(v.animationName));if(v.target===e&&_&&(c("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=v=>{v.target===e&&(i.current=xu(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function xu(t){return(t==null?void 0:t.animationName)||"none"}function P9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xh="Tabs",[D9]=Ta(Xh,[XC]),rI=XC(),[L9,jv]=D9(Xh),sI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=Iv(l),[f,p]=cc({prop:r,onChange:s,defaultProp:i??"",caller:Xh});return o.jsx(L9,{scope:n,baseId:Ac(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(Le.div,{dir:h,"data-orientation":a,...d,ref:e})})});sI.displayName=Xh;var iI="TabsList",oI=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=jv(iI,n),a=rI(n);return o.jsx(j9,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Le.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});oI.displayName=iI;var aI="TabsTrigger",lI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=jv(aI,n),l=rI(n),c=dI(a.baseId,r),d=hI(a.baseId,r),h=r===a.value;return o.jsx(A9,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(Le.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Re(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:Re(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:Re(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});lI.displayName=aI;var cI="TabsContent",uI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=jv(cI,n),c=dI(l.baseId,r),d=hI(l.baseId,r),h=r===l.value,f=g.useRef(h);return g.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(nI,{present:s||h,children:({present:p})=>o.jsx(Le.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});uI.displayName=cI;function dI(t,e){return`${t}-trigger-${e}`}function hI(t,e){return`${t}-content-${e}`}var O9=sI,fI=oI,pI=lI,mI=uI;const gI=O9,Av=g.forwardRef(({className:t,...e},n)=>o.jsx(fI,{ref:n,className:Pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Av.displayName=fI.displayName;const hr=g.forwardRef(({className:t,...e},n)=>o.jsx(pI,{ref:n,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));hr.displayName=pI.displayName;const Al=g.forwardRef(({className:t,...e},n)=>o.jsx(mI,{ref:n,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Al.displayName=mI.displayName;const M9=Yh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),kv=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Pe(M9({variant:e}),t),...n}));kv.displayName="Alert";const V9=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Pe("mb-1 font-medium leading-none tracking-tight",t),...e}));V9.displayName="AlertTitle";const Rv=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Pe("text-sm [&_p]:leading-relaxed",t),...e}));Rv.displayName="AlertDescription";const F9=({onBack:t})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState(!0),[d,h]=g.useState(""),[f,p]=g.useState("all"),[v,I]=g.useState(null);g.useEffect(()=>{_()},[]),g.useEffect(()=>{S()},[d,e,f]);const _=async()=>{try{const T=(await Vn(St(ge,"users"))).docs.map(j=>({id:j.id,...j.data()}));console.log(" Fetched users:",T),n(T);const b=T.filter(j=>j.requestedHostRole===!0);a(b)}catch(y){console.error("Error fetching users:",y),I({type:"error",text:"Failed to load users"})}finally{c(!1)}},S=()=>{let y=[...e];f==="admins"?y=y.filter(T=>T.role==="admin"):f==="moderators"?y=y.filter(T=>T.role==="moderator"):f==="students"?y=y.filter(T=>T.role==="student"):f==="pending"?y=y.filter(T=>T.requestedHostRole===!0):f==="active"?y=y.filter(T=>T.isActive!==!1):f==="suspended"&&(y=y.filter(T=>T.isActive===!1)),d&&(y=y.filter(T=>{var b,j,k,P,H;return((b=T.displayName)==null?void 0:b.toLowerCase().includes(d.toLowerCase()))||((j=T.email)==null?void 0:j.toLowerCase().includes(d.toLowerCase()))||((k=T.role)==null?void 0:k.toLowerCase().includes(d.toLowerCase()))||((P=T.firstName)==null?void 0:P.toLowerCase().includes(d.toLowerCase()))||((H=T.lastName)==null?void 0:H.toLowerCase().includes(d.toLowerCase()))})),s(y)},E=async(y,T)=>{try{console.log(" Attempting to update user role:",{userId:y,newRole:T});const b={role:T};(T==="admin"||T==="moderator")&&(b.requestedHostRole=!1,b.hostRequestReason=null),await hn(Ge(ge,"users",y),b),n(e.map(j=>j.id===y?{...j,...b}:j)),console.log(" User role updated successfully"),I({type:"success",text:`User role updated to ${T}`}),setTimeout(()=>I(null),3e3)}catch(b){console.error(" Error updating user role:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),I({type:"error",text:`Failed to update user role: ${b.message}`})}},w=async(y,T)=>{try{console.log(" Handling host request:",{userId:y,approved:T});const b={requestedHostRole:!1,hostRequestReason:null};T&&(b.role="moderator"),await hn(Ge(ge,"users",y),b),n(e.map(k=>k.id===y?{...k,...b}:k)),I({type:"success",text:`Host request ${T?"approved":"rejected"}`}),setTimeout(()=>I(null),3e3)}catch(b){console.error("Error handling host request:",b),I({type:"error",text:`Failed to process host request: ${b.message}`})}},C=async(y,T)=>{try{console.log(" Toggling user status:",{userId:y,currentStatus:T});const b=!T;await hn(Ge(ge,"users",y),{isActive:b}),n(e.map(k=>k.id===y?{...k,isActive:b}:k));const j=b?"activated":"suspended";console.log(" User status updated successfully:",j),I({type:"success",text:`User ${j}`}),setTimeout(()=>I(null),3e3)}catch(b){console.error(" Error updating user status:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),I({type:"error",text:`Failed to update user status: ${b.message}`})}},R=y=>{switch(y){case"admin":return"destructive";case"moderator":return"default";case"student":return"secondary";default:return"outline"}},L=y=>{switch(y){case"admin":return o.jsx(J_,{className:"w-3 h-3"});case"moderator":return o.jsx(Ye,{className:"w-3 h-3"});case"student":return o.jsx(Nv,{className:"w-3 h-3"});default:return o.jsx(Cn,{className:"w-3 h-3"})}},A=y=>y.requestedHostRole?"Pending Host":y.isActive===!1?"Suspended":"Active",N=y=>y.requestedHostRole?"default":y.isActive===!1?"destructive":"default";return l?o.jsx(se,{children:o.jsx(ie,{className:"pt-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading users..."})]})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Q,{variant:"ghost",onClick:t,className:"mb-2 -ml-3",children:" Back to Admin"}),o.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and host requests"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]})]}),v&&o.jsxs(kv,{className:v.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200",children:[v.type==="success"?o.jsx(Br,{className:"w-4 h-4 text-green-600"}):o.jsx(oa,{className:"w-4 h-4 text-red-600"}),o.jsx(Rv,{className:v.type==="success"?"text-green-600":"text-red-600",children:v.text})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsx(se,{children:o.jsxs(ie,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})}),o.jsx(se,{children:o.jsxs(ie,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(y=>y.role==="admin").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Admins"})]})}),o.jsx(se,{children:o.jsxs(ie,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(y=>y.role==="moderator").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Moderators"})]})}),o.jsx(se,{children:o.jsxs(ie,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(y=>y.role==="student").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Students"})]})}),o.jsx(se,{children:o.jsxs(ie,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending Hosts"})]})}),o.jsx(se,{children:o.jsxs(ie,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(y=>y.isActive===!1).length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Suspended"})]})})]}),o.jsxs(gI,{value:f,onValueChange:p,className:"w-full",children:[o.jsxs(Av,{className:"grid w-full grid-cols-6",children:[o.jsx(hr,{value:"all",className:"text-xs",children:"All Users"}),o.jsx(hr,{value:"admins",className:"text-xs",children:"Admins"}),o.jsx(hr,{value:"moderators",className:"text-xs",children:"Moderators"}),o.jsx(hr,{value:"students",className:"text-xs",children:"Students"}),o.jsxs(hr,{value:"pending",className:"text-xs",children:["Pending ",i.length>0&&`(${i.length})`]}),o.jsx(hr,{value:"suspended",className:"text-xs",children:"Suspended"})]}),o.jsx(Al,{value:f,className:"mt-6",children:o.jsxs(se,{children:[o.jsx(Se,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs(Ce,{children:[f==="all"&&"All Users",f==="admins"&&"Administrators",f==="moderators"&&"Moderators",f==="students"&&"Students",f==="pending"&&"Pending Host Requests",f==="suspended"&&"Suspended Users"]}),o.jsxs(Ht,{children:[r.length," user",r.length!==1?"s":""," found"]})]}),o.jsxs("div",{className:"relative w-64",children:[o.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(he,{placeholder:"Search users...",value:d,onChange:y=>h(y.target.value),className:"pl-10"})]})]})}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-4",children:[r.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:L(y.role)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("p",{className:"font-medium truncate",children:y.displayName||"No Name"}),y.role==="admin"&&o.jsx(J_,{className:"w-4 h-4 text-yellow-600"})]}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:y.email}),y.institution&&o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.institution}),y.requestedHostRole&&y.hostRequestReason&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[o.jsx("strong",{children:"Host Request:"})," ",y.hostRequestReason]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs(Fe,{variant:R(y.role),className:"flex items-center gap-1",children:[L(y.role),y.role]}),o.jsx(Fe,{variant:N(y),children:A(y)})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs("select",{value:y.role,onChange:T=>E(y.id,T.target.value),className:"p-2 border rounded text-sm bg-background",children:[o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"moderator",children:"Moderator"}),o.jsx("option",{value:"admin",children:"Admin"})]}),y.requestedHostRole&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>w(y.id,!0),className:"h-9 w-9 p-0 text-green-600 border-green-200",children:o.jsx(Br,{className:"w-4 h-4"})}),o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>w(y.id,!1),className:"h-9 w-9 p-0 text-red-600 border-red-200",children:o.jsx(oa,{className:"w-4 h-4"})})]}),!y.requestedHostRole&&o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>C(y.id,y.isActive??!0),className:`flex items-center gap-1 ${y.isActive===!1?"text-green-600 border-green-200 hover:bg-green-50":"text-red-600 border-red-200 hover:bg-red-50"}`,children:y.isActive===!1?o.jsxs(o.Fragment,{children:[o.jsx(dU,{className:"w-3 h-3"}),"Activate"]}):o.jsxs(o.Fragment,{children:[o.jsx(uU,{className:"w-3 h-3"}),"Suspend"]})})]})]},y.id)),r.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(nn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No users found matching your criteria."})]})]})})]})})]})]})},Sa=g.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Sa.displayName="Textarea";var U9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],B9=U9.reduce((t,e)=>{const n=bv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),$9="Label",yI=g.forwardRef((t,e)=>o.jsx(B9.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yI.displayName=$9;var vI=yI;const z9=Yh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),q=g.forwardRef(({className:t,...e},n)=>o.jsx(vI,{ref:n,className:Pe(z9(),t),...e}));q.displayName=vI.displayName;function lb(t,[e,n]){return Math.min(n,Math.max(e,t))}function H9(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var W9="DismissableLayer",sg="dismissableLayer.update",q9="dismissableLayer.pointerDownOutside",G9="dismissableLayer.focusOutside",cb,xI=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wI=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(xI),[h,f]=g.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=g.useState({}),I=ft(e,N=>f(N)),_=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=_.indexOf(S),w=h?_.indexOf(h):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,R=w>=E,L=Y9(N=>{const y=N.target,T=[...d.branches].some(b=>b.contains(y));!R||T||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},p),A=X9(N=>{const y=N.target;[...d.branches].some(b=>b.contains(y))||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},p);return H9(N=>{w===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(cb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),ub(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=cb)}},[h,p,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),ub())},[h,d]),g.useEffect(()=>{const N=()=>v({});return document.addEventListener(sg,N),()=>document.removeEventListener(sg,N)},[]),o.jsx(Le.div,{...c,ref:I,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:Re(t.onFocusCapture,A.onFocusCapture),onBlurCapture:Re(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Re(t.onPointerDownCapture,L.onPointerDownCapture)})});wI.displayName=W9;var K9="DismissableLayerBranch",Q9=g.forwardRef((t,e)=>{const n=g.useContext(xI),r=g.useRef(null),s=ft(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Le.div,{...t,ref:s})});Q9.displayName=K9;function Y9(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){_I(q9,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function X9(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&_I(G9,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ub(){const t=new CustomEvent(sg);document.dispatchEvent(t)}function _I(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?p9(s,i):s.dispatchEvent(i)}var _p=0;function J9(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??db()),document.body.insertAdjacentElement("beforeend",t[1]??db()),_p++,()=>{_p===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_p--}},[])}function db(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var bp="focusScope.autoFocusOnMount",Ep="focusScope.autoFocusOnUnmount",hb={bubbles:!1,cancelable:!0},Z9="FocusScope",bI=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=Zr(s),h=Zr(i),f=g.useRef(null),p=ft(e,_=>c(_)),v=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let _=function(C){if(v.paused||!l)return;const R=C.target;l.contains(R)?f.current=R:vs(f.current,{select:!0})},S=function(C){if(v.paused||!l)return;const R=C.relatedTarget;R!==null&&(l.contains(R)||vs(f.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const L of C)L.removedNodes.length>0&&vs(l)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const w=new MutationObserver(E);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),w.disconnect()}}},[r,l,v.paused]),g.useEffect(()=>{if(l){pb.add(v);const _=document.activeElement;if(!l.contains(_)){const E=new CustomEvent(bp,hb);l.addEventListener(bp,d),l.dispatchEvent(E),E.defaultPrevented||(e8(i8(EI(l)),{select:!0}),document.activeElement===_&&vs(l))}return()=>{l.removeEventListener(bp,d),setTimeout(()=>{const E=new CustomEvent(Ep,hb);l.addEventListener(Ep,h),l.dispatchEvent(E),E.defaultPrevented||vs(_??document.body,{select:!0}),l.removeEventListener(Ep,h),pb.remove(v)},0)}}},[l,d,h,v]);const I=g.useCallback(_=>{if(!n&&!r||v.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,E=document.activeElement;if(S&&E){const w=_.currentTarget,[C,R]=t8(w);C&&R?!_.shiftKey&&E===R?(_.preventDefault(),n&&vs(C,{select:!0})):_.shiftKey&&E===C&&(_.preventDefault(),n&&vs(R,{select:!0})):E===w&&_.preventDefault()}},[n,r,v.paused]);return o.jsx(Le.div,{tabIndex:-1,...a,ref:p,onKeyDown:I})});bI.displayName=Z9;function e8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vs(r,{select:e}),document.activeElement!==n)return}function t8(t){const e=EI(t),n=fb(e,t),r=fb(e.reverse(),t);return[n,r]}function EI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function fb(t,e){for(const n of t)if(!n8(n,{upTo:e}))return n}function n8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function r8(t){return t instanceof HTMLInputElement&&"select"in t}function vs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&r8(t)&&e&&t.select()}}var pb=s8();function s8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=mb(t,e),t.unshift(e)},remove(e){var n;t=mb(t,e),(n=t[0])==null||n.resume()}}}function mb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function i8(t){return t.filter(e=>e.tagName!=="A")}const o8=["top","right","bottom","left"],ni=Math.min,_n=Math.max,Kd=Math.round,wu=Math.floor,Sr=t=>({x:t,y:t}),a8={left:"right",right:"left",bottom:"top",top:"bottom"},l8={start:"end",end:"start"};function ig(t,e,n){return _n(t,ni(e,n))}function es(t,e){return typeof t=="function"?t(e):t}function ts(t){return t.split("-")[0]}function Ca(t){return t.split("-")[1]}function Pv(t){return t==="x"?"y":"x"}function Dv(t){return t==="y"?"height":"width"}const c8=new Set(["top","bottom"]);function gr(t){return c8.has(ts(t))?"y":"x"}function Lv(t){return Pv(gr(t))}function u8(t,e,n){n===void 0&&(n=!1);const r=Ca(t),s=Lv(t),i=Dv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Qd(a)),[a,Qd(a)]}function d8(t){const e=Qd(t);return[og(t),e,og(e)]}function og(t){return t.replace(/start|end/g,e=>l8[e])}const gb=["left","right"],yb=["right","left"],h8=["top","bottom"],f8=["bottom","top"];function p8(t,e,n){switch(t){case"top":case"bottom":return n?e?yb:gb:e?gb:yb;case"left":case"right":return e?h8:f8;default:return[]}}function m8(t,e,n,r){const s=Ca(t);let i=p8(ts(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(og)))),i}function Qd(t){return t.replace(/left|right|bottom|top/g,e=>a8[e])}function g8(t){return{top:0,right:0,bottom:0,left:0,...t}}function NI(t){return typeof t!="number"?g8(t):{top:t,right:t,bottom:t,left:t}}function Yd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function vb(t,e,n){let{reference:r,floating:s}=t;const i=gr(e),a=Lv(e),l=Dv(a),c=ts(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let v;switch(c){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(Ca(e)){case"start":v[a]-=p*(n&&d?-1:1);break;case"end":v[a]+=p*(n&&d?-1:1);break}return v}const y8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=vb(d,r,c),p=r,v={},I=0;for(let _=0;_<l.length;_++){const{name:S,fn:E}=l[_],{x:w,y:C,data:R,reset:L}=await E({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:v,rects:d,platform:a,elements:{reference:t,floating:e}});h=w??h,f=C??f,v={...v,[S]:{...v[S],...R}},L&&I<=50&&(I++,typeof L=="object"&&(L.placement&&(p=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=vb(d,p,c)),_=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:v}};async function uc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=es(e,t),I=NI(v),S=l[p?f==="floating"?"reference":"floating":f],E=Yd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},L=Yd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:C,strategy:c}):w);return{top:(E.top-L.top+I.top)/R.y,bottom:(L.bottom-E.bottom+I.bottom)/R.y,left:(E.left-L.left+I.left)/R.x,right:(L.right-E.right+I.right)/R.x}}const v8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=es(t,e)||{};if(d==null)return{};const f=NI(h),p={x:n,y:r},v=Lv(s),I=Dv(v),_=await a.getDimensions(d),S=v==="y",E=S?"top":"left",w=S?"bottom":"right",C=S?"clientHeight":"clientWidth",R=i.reference[I]+i.reference[v]-p[v]-i.floating[I],L=p[v]-i.reference[v],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let N=A?A[C]:0;(!N||!await(a.isElement==null?void 0:a.isElement(A)))&&(N=l.floating[C]||i.floating[I]);const y=R/2-L/2,T=N/2-_[I]/2-1,b=ni(f[E],T),j=ni(f[w],T),k=b,P=N-_[I]-j,H=N/2-_[I]/2+y,ae=ig(k,H,P),J=!c.arrow&&Ca(s)!=null&&H!==ae&&i.reference[I]/2-(H<k?b:j)-_[I]/2<0,le=J?H<k?H-k:H-P:0;return{[v]:p[v]+le,data:{[v]:ae,centerOffset:H-ae-le,...J&&{alignmentOffset:le}},reset:J}}}),x8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:_=!0,...S}=es(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=ts(s),w=gr(l),C=ts(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(d.floating)),L=p||(C||!_?[Qd(l)]:d8(l)),A=I!=="none";!p&&A&&L.push(...m8(l,_,I,R));const N=[l,...L],y=await uc(e,S),T=[];let b=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(y[E]),f){const H=u8(s,a,R);T.push(y[H[0]],y[H[1]])}if(b=[...b,{placement:s,overflows:T}],!T.every(H=>H<=0)){var j,k;const H=(((j=i.flip)==null?void 0:j.index)||0)+1,ae=N[H];if(ae&&(!(f==="alignment"?w!==gr(ae):!1)||b.every(O=>gr(O.placement)===w?O.overflows[0]>0:!0)))return{data:{index:H,overflows:b},reset:{placement:ae}};let J=(k=b.filter(le=>le.overflows[0]<=0).sort((le,O)=>le.overflows[1]-O.overflows[1])[0])==null?void 0:k.placement;if(!J)switch(v){case"bestFit":{var P;const le=(P=b.filter(O=>{if(A){const W=gr(O.placement);return W===w||W==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(W=>W>0).reduce((W,re)=>W+re,0)]).sort((O,W)=>O[1]-W[1])[0])==null?void 0:P[0];le&&(J=le);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function xb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function wb(t){return o8.some(e=>t[e]>=0)}const w8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=es(t,e);switch(r){case"referenceHidden":{const i=await uc(e,{...s,elementContext:"reference"}),a=xb(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:wb(a)}}}case"escaped":{const i=await uc(e,{...s,altBoundary:!0}),a=xb(i,n.floating);return{data:{escapedOffsets:a,escaped:wb(a)}}}default:return{}}}}},TI=new Set(["left","top"]);async function _8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ts(n),l=Ca(n),c=gr(n)==="y",d=TI.has(a)?-1:1,h=i&&c?-1:1,f=es(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:I}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof I=="number"&&(v=l==="end"?I*-1:I),c?{x:v*h,y:p*d}:{x:p*d,y:v*h}}const b8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await _8(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},E8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:S=>{let{x:E,y:w}=S;return{x:E,y:w}}},...c}=es(t,e),d={x:n,y:r},h=await uc(e,c),f=gr(ts(s)),p=Pv(f);let v=d[p],I=d[f];if(i){const S=p==="y"?"top":"left",E=p==="y"?"bottom":"right",w=v+h[S],C=v-h[E];v=ig(w,v,C)}if(a){const S=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=I+h[S],C=I-h[E];I=ig(w,I,C)}const _=l.fn({...e,[p]:v,[f]:I});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[p]:i,[f]:a}}}}}},N8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=es(t,e),h={x:n,y:r},f=gr(s),p=Pv(f);let v=h[p],I=h[f];const _=es(l,e),S=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(c){const C=p==="y"?"height":"width",R=i.reference[p]-i.floating[C]+S.mainAxis,L=i.reference[p]+i.reference[C]-S.mainAxis;v<R?v=R:v>L&&(v=L)}if(d){var E,w;const C=p==="y"?"width":"height",R=TI.has(ts(s)),L=i.reference[f]-i.floating[C]+(R&&((E=a.offset)==null?void 0:E[f])||0)+(R?0:S.crossAxis),A=i.reference[f]+i.reference[C]+(R?0:((w=a.offset)==null?void 0:w[f])||0)-(R?S.crossAxis:0);I<L?I=L:I>A&&(I=A)}return{[p]:v,[f]:I}}}},T8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=es(t,e),h=await uc(e,d),f=ts(s),p=Ca(s),v=gr(s)==="y",{width:I,height:_}=i.floating;let S,E;f==="top"||f==="bottom"?(S=f,E=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=f,S=p==="end"?"top":"bottom");const w=_-h.top-h.bottom,C=I-h.left-h.right,R=ni(_-h[S],w),L=ni(I-h[E],C),A=!e.middlewareData.shift;let N=R,y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(y=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=w),A&&!p){const b=_n(h.left,0),j=_n(h.right,0),k=_n(h.top,0),P=_n(h.bottom,0);v?y=I-2*(b!==0||j!==0?b+j:_n(h.left,h.right)):N=_-2*(k!==0||P!==0?k+P:_n(h.top,h.bottom))}await c({...e,availableWidth:y,availableHeight:N});const T=await a.getDimensions(l.floating);return I!==T.width||_!==T.height?{reset:{rects:!0}}:{}}}};function Jh(){return typeof window<"u"}function Ia(t){return SI(t)?(t.nodeName||"").toLowerCase():"#document"}function In(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ar(t){var e;return(e=(SI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function SI(t){return Jh()?t instanceof Node||t instanceof In(t).Node:!1}function ir(t){return Jh()?t instanceof Element||t instanceof In(t).Element:!1}function jr(t){return Jh()?t instanceof HTMLElement||t instanceof In(t).HTMLElement:!1}function _b(t){return!Jh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof In(t).ShadowRoot}const S8=new Set(["inline","contents"]);function Rc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=or(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!S8.has(s)}const C8=new Set(["table","td","th"]);function I8(t){return C8.has(Ia(t))}const j8=[":popover-open",":modal"];function Zh(t){return j8.some(e=>{try{return t.matches(e)}catch{return!1}})}const A8=["transform","translate","scale","rotate","perspective"],k8=["transform","translate","scale","rotate","perspective","filter"],R8=["paint","layout","strict","content"];function Ov(t){const e=Mv(),n=ir(t)?or(t):t;return A8.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||k8.some(r=>(n.willChange||"").includes(r))||R8.some(r=>(n.contain||"").includes(r))}function P8(t){let e=ri(t);for(;jr(e)&&!ua(e);){if(Ov(e))return e;if(Zh(e))return null;e=ri(e)}return null}function Mv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const D8=new Set(["html","body","#document"]);function ua(t){return D8.has(Ia(t))}function or(t){return In(t).getComputedStyle(t)}function ef(t){return ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ri(t){if(Ia(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_b(t)&&t.host||Ar(t);return _b(e)?e.host:e}function CI(t){const e=ri(t);return ua(e)?t.ownerDocument?t.ownerDocument.body:t.body:jr(e)&&Rc(e)?e:CI(e)}function dc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=CI(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=In(s);if(i){const l=ag(a);return e.concat(a,a.visualViewport||[],Rc(s)?s:[],l&&n?dc(l):[])}return e.concat(s,dc(s,[],n))}function ag(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function II(t){const e=or(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=jr(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Kd(n)!==i||Kd(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Vv(t){return ir(t)?t:t.contextElement}function Bo(t){const e=Vv(t);if(!jr(e))return Sr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=II(e);let a=(i?Kd(n.width):n.width)/r,l=(i?Kd(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const L8=Sr(0);function jI(t){const e=In(t);return!Mv()||!e.visualViewport?L8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function O8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==In(t)?!1:e}function Qi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Vv(t);let a=Sr(1);e&&(r?ir(r)&&(a=Bo(r)):a=Bo(t));const l=O8(i,n,r)?jI(i):Sr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=In(i),v=r&&ir(r)?In(r):r;let I=p,_=ag(I);for(;_&&r&&v!==I;){const S=Bo(_),E=_.getBoundingClientRect(),w=or(_),C=E.left+(_.clientLeft+parseFloat(w.paddingLeft))*S.x,R=E.top+(_.clientTop+parseFloat(w.paddingTop))*S.y;c*=S.x,d*=S.y,h*=S.x,f*=S.y,c+=C,d+=R,I=In(_),_=ag(I)}}return Yd({width:h,height:f,x:c,y:d})}function tf(t,e){const n=ef(t).scrollLeft;return e?e.left+n:Qi(Ar(t)).left+n}function AI(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-tf(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function M8(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Ar(r),l=e?Zh(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Sr(1);const h=Sr(0),f=jr(r);if((f||!f&&!i)&&((Ia(r)!=="body"||Rc(a))&&(c=ef(r)),jr(r))){const v=Qi(r);d=Bo(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const p=a&&!f&&!i?AI(a,c):Sr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:n.y*d.y-c.scrollTop*d.y+h.y+p.y}}function V8(t){return Array.from(t.getClientRects())}function F8(t){const e=Ar(t),n=ef(t),r=t.ownerDocument.body,s=_n(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=_n(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+tf(t);const l=-n.scrollTop;return or(r).direction==="rtl"&&(a+=_n(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}const bb=25;function U8(t,e){const n=In(t),r=Ar(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=Mv();(!h||h&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=tf(r);if(d<=0){const h=r.ownerDocument,f=h.body,p=getComputedStyle(f),v=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,I=Math.abs(r.clientWidth-f.clientWidth-v);I<=bb&&(i-=I)}else d<=bb&&(i+=d);return{width:i,height:a,x:l,y:c}}const B8=new Set(["absolute","fixed"]);function $8(t,e){const n=Qi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=jr(t)?Bo(t):Sr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function Eb(t,e,n){let r;if(e==="viewport")r=U8(t,n);else if(e==="document")r=F8(Ar(t));else if(ir(e))r=$8(e,n);else{const s=jI(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Yd(r)}function kI(t,e){const n=ri(t);return n===e||!ir(n)||ua(n)?!1:or(n).position==="fixed"||kI(n,e)}function z8(t,e){const n=e.get(t);if(n)return n;let r=dc(t,[],!1).filter(l=>ir(l)&&Ia(l)!=="body"),s=null;const i=or(t).position==="fixed";let a=i?ri(t):t;for(;ir(a)&&!ua(a);){const l=or(a),c=Ov(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&B8.has(s.position)||Rc(a)&&!c&&kI(t,a))?r=r.filter(h=>h!==a):s=l,a=ri(a)}return e.set(t,r),r}function H8(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Zh(e)?[]:z8(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=Eb(e,h,s);return d.top=_n(f.top,d.top),d.right=ni(f.right,d.right),d.bottom=ni(f.bottom,d.bottom),d.left=_n(f.left,d.left),d},Eb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function W8(t){const{width:e,height:n}=II(t);return{width:e,height:n}}function q8(t,e,n){const r=jr(e),s=Ar(e),i=n==="fixed",a=Qi(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Sr(0);function d(){c.x=tf(s)}if(r||!r&&!i)if((Ia(e)!=="body"||Rc(s))&&(l=ef(e)),r){const v=Qi(e,!0,i,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?AI(s,l):Sr(0),f=a.left+l.scrollLeft-c.x-h.x,p=a.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:a.width,height:a.height}}function Np(t){return or(t).position==="static"}function Nb(t,e){if(!jr(t)||or(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ar(t)===n&&(n=n.ownerDocument.body),n}function RI(t,e){const n=In(t);if(Zh(t))return n;if(!jr(t)){let s=ri(t);for(;s&&!ua(s);){if(ir(s)&&!Np(s))return s;s=ri(s)}return n}let r=Nb(t,e);for(;r&&I8(r)&&Np(r);)r=Nb(r,e);return r&&ua(r)&&Np(r)&&!Ov(r)?n:r||P8(t)||n}const G8=async function(t){const e=this.getOffsetParent||RI,n=this.getDimensions,r=await n(t.floating);return{reference:q8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function K8(t){return or(t).direction==="rtl"}const Q8={convertOffsetParentRelativeRectToViewportRelativeRect:M8,getDocumentElement:Ar,getClippingRect:H8,getOffsetParent:RI,getElementRects:G8,getClientRects:V8,getDimensions:W8,getScale:Bo,isElement:ir,isRTL:K8};function PI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Y8(t,e){let n=null,r;const s=Ar(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:p,height:v}=d;if(l||e(),!p||!v)return;const I=wu(f),_=wu(s.clientWidth-(h+p)),S=wu(s.clientHeight-(f+v)),E=wu(h),C={rootMargin:-I+"px "+-_+"px "+-S+"px "+-E+"px",threshold:_n(0,ni(1,c))||1};let R=!0;function L(A){const N=A[0].intersectionRatio;if(N!==c){if(!R)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!PI(d,t.getBoundingClientRect())&&a(),R=!1}try{n=new IntersectionObserver(L,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,C)}n.observe(t)}return a(!0),i}function X8(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Vv(t),h=s||i?[...d?dc(d):[],...dc(e)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const f=d&&l?Y8(d,n):null;let p=-1,v=null;a&&(v=new ResizeObserver(E=>{let[w]=E;w&&w.target===d&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(e)})),n()}),d&&!c&&v.observe(d),v.observe(e));let I,_=c?Qi(t):null;c&&S();function S(){const E=Qi(t);_&&!PI(_,E)&&n(),_=E,I=requestAnimationFrame(S)}return n(),()=>{var E;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(E=v)==null||E.disconnect(),v=null,c&&cancelAnimationFrame(I)}}const J8=b8,Z8=E8,eB=x8,tB=T8,nB=w8,Tb=v8,rB=N8,sB=(t,e,n)=>{const r=new Map,s={platform:Q8,...n},i={...s.platform,_c:r};return y8(t,e,{...s,platform:i})};var iB=typeof document<"u",oB=function(){},Gu=iB?g.useLayoutEffect:oB;function Xd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Xd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function DI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Sb(t,e){const n=DI(t);return Math.round(e*n)/n}function Tp(t){const e=g.useRef(t);return Gu(()=>{e.current=t}),e}function aB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=g.useState(r);Xd(p,r)||v(r);const[I,_]=g.useState(null),[S,E]=g.useState(null),w=g.useCallback(O=>{O!==A.current&&(A.current=O,_(O))},[]),C=g.useCallback(O=>{O!==N.current&&(N.current=O,E(O))},[]),R=i||I,L=a||S,A=g.useRef(null),N=g.useRef(null),y=g.useRef(h),T=c!=null,b=Tp(c),j=Tp(s),k=Tp(d),P=g.useCallback(()=>{if(!A.current||!N.current)return;const O={placement:e,strategy:n,middleware:p};j.current&&(O.platform=j.current),sB(A.current,N.current,O).then(W=>{const re={...W,isPositioned:k.current!==!1};H.current&&!Xd(y.current,re)&&(y.current=re,pa.flushSync(()=>{f(re)}))})},[p,e,n,j,k]);Gu(()=>{d===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[d]);const H=g.useRef(!1);Gu(()=>(H.current=!0,()=>{H.current=!1}),[]),Gu(()=>{if(R&&(A.current=R),L&&(N.current=L),R&&L){if(b.current)return b.current(R,L,P);P()}},[R,L,P,b,T]);const ae=g.useMemo(()=>({reference:A,floating:N,setReference:w,setFloating:C}),[w,C]),J=g.useMemo(()=>({reference:R,floating:L}),[R,L]),le=g.useMemo(()=>{const O={position:n,left:0,top:0};if(!J.floating)return O;const W=Sb(J.floating,h.x),re=Sb(J.floating,h.y);return l?{...O,transform:"translate("+W+"px, "+re+"px)",...DI(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:re}},[n,l,J.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:P,refs:ae,elements:J,floatingStyles:le}),[h,P,ae,J,le])}const lB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Tb({element:r.current,padding:s}).fn(n):{}:r?Tb({element:r,padding:s}).fn(n):{}}}},cB=(t,e)=>({...J8(t),options:[t,e]}),uB=(t,e)=>({...Z8(t),options:[t,e]}),dB=(t,e)=>({...rB(t),options:[t,e]}),hB=(t,e)=>({...eB(t),options:[t,e]}),fB=(t,e)=>({...tB(t),options:[t,e]}),pB=(t,e)=>({...nB(t),options:[t,e]}),mB=(t,e)=>({...lB(t),options:[t,e]});var gB="Arrow",LI=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(Le.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});LI.displayName=gB;var yB=LI;function OI(t){const[e,n]=g.useState(void 0);return bt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Fv="Popper",[MI,VI]=Ta(Fv),[vB,FI]=MI(Fv),UI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(vB,{scope:e,anchor:r,onAnchorChange:s,children:n})};UI.displayName=Fv;var BI="PopperAnchor",$I=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=FI(BI,n),a=g.useRef(null),l=ft(e,a),c=g.useRef(null);return g.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||a.current,d!==c.current&&i.onAnchorChange(c.current)}),r?null:o.jsx(Le.div,{...s,ref:l})});$I.displayName=BI;var Uv="PopperContent",[xB,wB]=MI(Uv),zI=g.forwardRef((t,e)=>{var oe,we,tt,Oe,ke,je;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:I,..._}=t,S=FI(Uv,n),[E,w]=g.useState(null),C=ft(e,It=>w(It)),[R,L]=g.useState(null),A=OI(R),N=(A==null?void 0:A.width)??0,y=(A==null?void 0:A.height)??0,T=r+(i!=="center"?"-"+i:""),b=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},j=Array.isArray(d)?d:[d],k=j.length>0,P={padding:b,boundary:j.filter(bB),altBoundary:k},{refs:H,floatingStyles:ae,placement:J,isPositioned:le,middlewareData:O}=aB({strategy:"fixed",placement:T,whileElementsMounted:(...It)=>X8(...It,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[cB({mainAxis:s+y,alignmentAxis:a}),c&&uB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?dB():void 0,...P}),c&&hB({...P}),fB({...P,apply:({elements:It,rects:vn,availableWidth:gi,availableHeight:kr})=>{const{width:Rr,height:Pc}=vn.reference,at=It.floating.style;at.setProperty("--radix-popper-available-width",`${gi}px`),at.setProperty("--radix-popper-available-height",`${kr}px`),at.setProperty("--radix-popper-anchor-width",`${Rr}px`),at.setProperty("--radix-popper-anchor-height",`${Pc}px`)}}),R&&mB({element:R,padding:l}),EB({arrowWidth:N,arrowHeight:y}),p&&pB({strategy:"referenceHidden",...P})]}),[W,re]=qI(J),F=Zr(I);bt(()=>{le&&(F==null||F())},[le,F]);const V=(oe=O.arrow)==null?void 0:oe.x,G=(we=O.arrow)==null?void 0:we.y,Z=((tt=O.arrow)==null?void 0:tt.centerOffset)!==0,[me,ye]=g.useState();return bt(()=>{E&&ye(window.getComputedStyle(E).zIndex)},[E]),o.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:le?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(Oe=O.transformOrigin)==null?void 0:Oe.x,(ke=O.transformOrigin)==null?void 0:ke.y].join(" "),...((je=O.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(xB,{scope:n,placedSide:W,onArrowChange:L,arrowX:V,arrowY:G,shouldHideArrow:Z,children:o.jsx(Le.div,{"data-side":W,"data-align":re,..._,ref:C,style:{..._.style,animation:le?void 0:"none"}})})})});zI.displayName=Uv;var HI="PopperArrow",_B={top:"bottom",right:"left",bottom:"top",left:"right"},WI=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=wB(HI,r),a=_B[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(yB,{...s,ref:n,style:{...s.style,display:"block"}})})});WI.displayName=HI;function bB(t){return t!==null}var EB=t=>({name:"transformOrigin",options:t,fn(e){var S,E,w;const{placement:n,rects:r,middlewareData:s}=e,a=((S=s.arrow)==null?void 0:S.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=qI(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,v=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let I="",_="";return d==="bottom"?(I=a?f:`${p}px`,_=`${-c}px`):d==="top"?(I=a?f:`${p}px`,_=`${r.floating.height+c}px`):d==="right"?(I=`${-c}px`,_=a?f:`${v}px`):d==="left"&&(I=`${r.floating.width+c}px`,_=a?f:`${v}px`),{data:{x:I,y:_}}}});function qI(t){const[e,n="center"]=t.split("-");return[e,n]}var NB=UI,TB=$I,SB=zI,CB=WI,IB="Portal",GI=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);bt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?qk.createPortal(o.jsx(Le.div,{...r,ref:e}),a):null});GI.displayName=IB;function jB(t){const e=AB(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(RB);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function AB(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=DB(s),l=PB(i,s.props);return s.type!==g.Fragment&&(l.ref=r?jc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var kB=Symbol("radix.slottable");function RB(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===kB}function PB(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function DB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function KI(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var QI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LB="VisuallyHidden",OB=g.forwardRef((t,e)=>o.jsx(Le.span,{...t,ref:e,style:{...QI,...t.style}}));OB.displayName=LB;var MB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uo=new WeakMap,_u=new WeakMap,bu={},Sp=0,YI=function(t){return t&&(t.host||YI(t.parentNode))},VB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=YI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},FB=function(t,e,n,r){var s=VB(e,Array.isArray(t)?t:[t]);bu[n]||(bu[n]=new WeakMap);var i=bu[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var v=p.getAttribute(r),I=v!==null&&v!=="false",_=(uo.get(p)||0)+1,S=(i.get(p)||0)+1;uo.set(p,_),i.set(p,S),a.push(p),_===1&&I&&_u.set(p,!0),S===1&&p.setAttribute(n,"true"),I||p.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",p,E)}})};return h(e),l.clear(),Sp++,function(){a.forEach(function(f){var p=uo.get(f)-1,v=i.get(f)-1;uo.set(f,p),i.set(f,v),p||(_u.has(f)||f.removeAttribute(r),_u.delete(f)),v||f.removeAttribute(n)}),Sp--,Sp||(uo=new WeakMap,uo=new WeakMap,_u=new WeakMap,bu={})}},UB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=MB(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),FB(r,s,n,"aria-hidden")):function(){return null}},pr=function(){return pr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pr.apply(this,arguments)};function XI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function BB(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Ku="right-scroll-bar-position",Qu="width-before-scroll-bar",$B="with-scroll-bars-hidden",zB="--removed-body-scroll-bar-size";function Cp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function HB(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var WB=typeof window<"u"?g.useLayoutEffect:g.useEffect,Cb=new WeakMap;function qB(t,e){var n=HB(null,function(r){return t.forEach(function(s){return Cp(s,r)})});return WB(function(){var r=Cb.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Cp(l,null)}),i.forEach(function(l){s.has(l)||Cp(l,a)})}Cb.set(n,t)},[t]),n}function GB(t){return t}function KB(t,e){e===void 0&&(e=GB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function QB(t){t===void 0&&(t={});var e=KB(null);return e.options=pr({async:!0,ssr:!1},t),e}var JI=function(t){var e=t.sideCar,n=XI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,pr({},n))};JI.isSideCarExport=!0;function YB(t,e){return t.useMedium(e),JI}var ZI=QB(),Ip=function(){},nf=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Ip,onWheelCapture:Ip,onTouchMoveCapture:Ip}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,v=t.noRelative,I=t.noIsolation,_=t.inert,S=t.allowPinchZoom,E=t.as,w=E===void 0?"div":E,C=t.gapMode,R=XI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=p,A=qB([n,e]),N=pr(pr({},R),s);return g.createElement(g.Fragment,null,h&&g.createElement(L,{sideCar:ZI,removeScrollBar:d,shards:f,noRelative:v,noIsolation:I,inert:_,setCallbacks:i,allowPinchZoom:!!S,lockRef:n,gapMode:C}),a?g.cloneElement(g.Children.only(l),pr(pr({},N),{ref:A})):g.createElement(w,pr({},N,{className:c,ref:A}),l))});nf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nf.classNames={fullWidth:Qu,zeroRight:Ku};var XB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=XB();return e&&t.setAttribute("nonce",e),t}function ZB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function e$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var t$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=JB())&&(ZB(e,n),e$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},n$=function(){var t=t$();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ej=function(){var t=n$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},r$={left:0,top:0,right:0,gap:0},jp=function(t){return parseInt(t||"",10)||0},s$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[jp(n),jp(r),jp(s)]},i$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return r$;var e=s$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},o$=ej(),$o="data-scroll-locked",a$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat($B,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat($o,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ku,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Qu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ku," .").concat(Ku,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Qu," .").concat(Qu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($o,`] {
    `).concat(zB,": ").concat(l,`px;
  }
`)},Ib=function(){var t=parseInt(document.body.getAttribute($o)||"0",10);return isFinite(t)?t:0},l$=function(){g.useEffect(function(){return document.body.setAttribute($o,(Ib()+1).toString()),function(){var t=Ib()-1;t<=0?document.body.removeAttribute($o):document.body.setAttribute($o,t.toString())}},[])},c$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;l$();var i=g.useMemo(function(){return i$(s)},[s]);return g.createElement(o$,{styles:a$(i,!e,s,n?"":"!important")})},lg=!1;if(typeof window<"u")try{var Eu=Object.defineProperty({},"passive",{get:function(){return lg=!0,!0}});window.addEventListener("test",Eu,Eu),window.removeEventListener("test",Eu,Eu)}catch{lg=!1}var ho=lg?{passive:!1}:!1,u$=function(t){return t.tagName==="TEXTAREA"},tj=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!u$(t)&&n[e]==="visible")},d$=function(t){return tj(t,"overflowY")},h$=function(t){return tj(t,"overflowX")},jb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nj(t,r);if(s){var i=rj(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},f$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},p$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},nj=function(t,e){return t==="v"?d$(e):h$(e)},rj=function(t,e){return t==="v"?f$(e):p$(e)},m$=function(t,e){return t==="h"&&e==="rtl"?-1:1},g$=function(t,e,n,r,s){var i=m$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,p=0;do{if(!l)break;var v=rj(t,l),I=v[0],_=v[1],S=v[2],E=_-S-i*I;(I||E)&&nj(t,l)&&(f+=E,p+=I);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(d=!0),d},Nu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ab=function(t){return[t.deltaX,t.deltaY]},kb=function(t){return t&&"current"in t?t.current:t},y$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},v$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},x$=0,fo=[];function w$(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(x$++)[0],i=g.useState(ej)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=BB([t.lockRef.current],(t.shards||[]).map(kb),!0).filter(Boolean);return _.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(_,S){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!a.current.allowPinchZoom;var E=Nu(_),w=n.current,C="deltaX"in _?_.deltaX:w[0]-E[0],R="deltaY"in _?_.deltaY:w[1]-E[1],L,A=_.target,N=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in _&&N==="h"&&A.type==="range")return!1;var y=jb(N,A);if(!y)return!0;if(y?L=N:(L=N==="v"?"h":"v",y=jb(N,A)),!y)return!1;if(!r.current&&"changedTouches"in _&&(C||R)&&(r.current=L),!L)return!0;var T=r.current||L;return g$(T,S,_,T==="h"?C:R)},[]),c=g.useCallback(function(_){var S=_;if(!(!fo.length||fo[fo.length-1]!==i)){var E="deltaY"in S?Ab(S):Nu(S),w=e.current.filter(function(L){return L.name===S.type&&(L.target===S.target||S.target===L.shadowParent)&&y$(L.delta,E)})[0];if(w&&w.should){S.cancelable&&S.preventDefault();return}if(!w){var C=(a.current.shards||[]).map(kb).filter(Boolean).filter(function(L){return L.contains(S.target)}),R=C.length>0?l(S,C[0]):!a.current.noIsolation;R&&S.cancelable&&S.preventDefault()}}},[]),d=g.useCallback(function(_,S,E,w){var C={name:_,delta:S,target:E,should:w,shadowParent:_$(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),h=g.useCallback(function(_){n.current=Nu(_),r.current=void 0},[]),f=g.useCallback(function(_){d(_.type,Ab(_),_.target,l(_,t.lockRef.current))},[]),p=g.useCallback(function(_){d(_.type,Nu(_),_.target,l(_,t.lockRef.current))},[]);g.useEffect(function(){return fo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,ho),document.addEventListener("touchmove",c,ho),document.addEventListener("touchstart",h,ho),function(){fo=fo.filter(function(_){return _!==i}),document.removeEventListener("wheel",c,ho),document.removeEventListener("touchmove",c,ho),document.removeEventListener("touchstart",h,ho)}},[]);var v=t.removeScrollBar,I=t.inert;return g.createElement(g.Fragment,null,I?g.createElement(i,{styles:v$(s)}):null,v?g.createElement(c$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function _$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const b$=YB(ZI,w$);var sj=g.forwardRef(function(t,e){return g.createElement(nf,pr({},t,{ref:e,sideCar:b$}))});sj.classNames=nf.classNames;var E$=[" ","Enter","ArrowUp","ArrowDown"],N$=[" ","Enter"],Yi="Select",[rf,sf,T$]=QC(Yi),[ja]=Ta(Yi,[T$,VI]),of=VI(),[S$,pi]=ja(Yi),[C$,I$]=ja(Yi),ij=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:v,form:I}=t,_=of(e),[S,E]=g.useState(null),[w,C]=g.useState(null),[R,L]=g.useState(!1),A=Iv(d),[N,y]=cc({prop:r,defaultProp:s??!1,onChange:i,caller:Yi}),[T,b]=cc({prop:a,defaultProp:l,onChange:c,caller:Yi}),j=g.useRef(null),k=S?I||!!S.closest("form"):!0,[P,H]=g.useState(new Set),ae=Array.from(P).map(J=>J.props.value).join(";");return o.jsx(NB,{..._,children:o.jsxs(S$,{required:v,scope:e,trigger:S,onTriggerChange:E,valueNode:w,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:L,contentId:Ac(),value:T,onValueChange:b,open:N,onOpenChange:y,dir:A,triggerPointerDownPosRef:j,disabled:p,children:[o.jsx(rf.Provider,{scope:e,children:o.jsx(C$,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(J=>{H(le=>new Set(le).add(J))},[]),onNativeOptionRemove:g.useCallback(J=>{H(le=>{const O=new Set(le);return O.delete(J),O})},[]),children:n})}),k?o.jsxs(jj,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:J=>b(J.target.value),disabled:p,form:I,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},ae):null]})})};ij.displayName=Yi;var oj="SelectTrigger",aj=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=of(n),a=pi(oj,n),l=a.disabled||r,c=ft(e,a.onTriggerChange),d=sf(n),h=g.useRef("touch"),[f,p,v]=kj(_=>{const S=d().filter(C=>!C.disabled),E=S.find(C=>C.value===a.value),w=Rj(S,_,E);w!==void 0&&a.onValueChange(w.value)}),I=_=>{l||(a.onOpenChange(!0),v()),_&&(a.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return o.jsx(TB,{asChild:!0,...i,children:o.jsx(Le.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Aj(a.value)?"":void 0,...s,ref:c,onClick:Re(s.onClick,_=>{_.currentTarget.focus(),h.current!=="mouse"&&I(_)}),onPointerDown:Re(s.onPointerDown,_=>{h.current=_.pointerType;const S=_.target;S.hasPointerCapture(_.pointerId)&&S.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(I(_),_.preventDefault())}),onKeyDown:Re(s.onKeyDown,_=>{const S=f.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&p(_.key),!(S&&_.key===" ")&&E$.includes(_.key)&&(I(),_.preventDefault())})})})});aj.displayName=oj;var lj="SelectValue",cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=pi(lj,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=ft(e,c.onValueNodeChange);return bt(()=>{d(h)},[d,h]),o.jsx(Le.span,{...l,ref:f,style:{pointerEvents:"none"},children:Aj(c.value)?o.jsx(o.Fragment,{children:a}):i})});cj.displayName=lj;var j$="SelectIcon",uj=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Le.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});uj.displayName=j$;var A$="SelectPortal",dj=t=>o.jsx(GI,{asChild:!0,...t});dj.displayName=A$;var Xi="SelectContent",hj=g.forwardRef((t,e)=>{const n=pi(Xi,t.__scopeSelect),[r,s]=g.useState();if(bt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?pa.createPortal(o.jsx(fj,{scope:t.__scopeSelect,children:o.jsx(rf.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(pj,{...t,ref:e})});hj.displayName=Xi;var Gn=10,[fj,mi]=ja(Xi),k$="SelectContentImpl",R$=jB("SelectContent.RemoveScroll"),pj=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:I,hideWhenDetached:_,avoidCollisions:S,...E}=t,w=pi(Xi,n),[C,R]=g.useState(null),[L,A]=g.useState(null),N=ft(e,oe=>R(oe)),[y,T]=g.useState(null),[b,j]=g.useState(null),k=sf(n),[P,H]=g.useState(!1),ae=g.useRef(!1);g.useEffect(()=>{if(C)return UB(C)},[C]),J9();const J=g.useCallback(oe=>{const[we,...tt]=k().map(je=>je.ref.current),[Oe]=tt.slice(-1),ke=document.activeElement;for(const je of oe)if(je===ke||(je==null||je.scrollIntoView({block:"nearest"}),je===we&&L&&(L.scrollTop=0),je===Oe&&L&&(L.scrollTop=L.scrollHeight),je==null||je.focus(),document.activeElement!==ke))return},[k,L]),le=g.useCallback(()=>J([y,C]),[J,y,C]);g.useEffect(()=>{P&&le()},[P,le]);const{onOpenChange:O,triggerPointerDownPosRef:W}=w;g.useEffect(()=>{if(C){let oe={x:0,y:0};const we=Oe=>{var ke,je;oe={x:Math.abs(Math.round(Oe.pageX)-(((ke=W.current)==null?void 0:ke.x)??0)),y:Math.abs(Math.round(Oe.pageY)-(((je=W.current)==null?void 0:je.y)??0))}},tt=Oe=>{oe.x<=10&&oe.y<=10?Oe.preventDefault():C.contains(Oe.target)||O(!1),document.removeEventListener("pointermove",we),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",tt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",tt,{capture:!0})}}},[C,O,W]),g.useEffect(()=>{const oe=()=>O(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[O]);const[re,F]=kj(oe=>{const we=k().filter(ke=>!ke.disabled),tt=we.find(ke=>ke.ref.current===document.activeElement),Oe=Rj(we,oe,tt);Oe&&setTimeout(()=>Oe.ref.current.focus())}),V=g.useCallback((oe,we,tt)=>{const Oe=!ae.current&&!tt;(w.value!==void 0&&w.value===we||Oe)&&(T(oe),Oe&&(ae.current=!0))},[w.value]),G=g.useCallback(()=>C==null?void 0:C.focus(),[C]),Z=g.useCallback((oe,we,tt)=>{const Oe=!ae.current&&!tt;(w.value!==void 0&&w.value===we||Oe)&&j(oe)},[w.value]),me=r==="popper"?cg:mj,ye=me===cg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:I,hideWhenDetached:_,avoidCollisions:S}:{};return o.jsx(fj,{scope:n,content:C,viewport:L,onViewportChange:A,itemRefCallback:V,selectedItem:y,onItemLeave:G,itemTextRefCallback:Z,focusSelectedItem:le,selectedItemText:b,position:r,isPositioned:P,searchRef:re,children:o.jsx(sj,{as:R$,allowPinchZoom:!0,children:o.jsx(bI,{asChild:!0,trapped:w.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:Re(s,oe=>{var we;(we=w.trigger)==null||we.focus({preventScroll:!0}),oe.preventDefault()}),children:o.jsx(wI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(me,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:oe=>oe.preventDefault(),...E,...ye,onPlaced:()=>H(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Re(E.onKeyDown,oe=>{const we=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!we&&oe.key.length===1&&F(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let Oe=k().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(Oe=Oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const ke=oe.target,je=Oe.indexOf(ke);Oe=Oe.slice(je+1)}setTimeout(()=>J(Oe)),oe.preventDefault()}})})})})})})});pj.displayName=k$;var P$="SelectItemAlignedPosition",mj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=pi(Xi,n),a=mi(Xi,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=ft(e,N=>h(N)),p=sf(n),v=g.useRef(!1),I=g.useRef(!0),{viewport:_,selectedItem:S,selectedItemText:E,focusSelectedItem:w}=a,C=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&_&&S&&E){const N=i.trigger.getBoundingClientRect(),y=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),b=E.getBoundingClientRect();if(i.dir!=="rtl"){const ke=b.left-y.left,je=T.left-ke,It=N.left-je,vn=N.width+It,gi=Math.max(vn,y.width),kr=window.innerWidth-Gn,Rr=lb(je,[Gn,Math.max(Gn,kr-gi)]);l.style.minWidth=vn+"px",l.style.left=Rr+"px"}else{const ke=y.right-b.right,je=window.innerWidth-T.right-ke,It=window.innerWidth-N.right-je,vn=N.width+It,gi=Math.max(vn,y.width),kr=window.innerWidth-Gn,Rr=lb(je,[Gn,Math.max(Gn,kr-gi)]);l.style.minWidth=vn+"px",l.style.right=Rr+"px"}const j=p(),k=window.innerHeight-Gn*2,P=_.scrollHeight,H=window.getComputedStyle(d),ae=parseInt(H.borderTopWidth,10),J=parseInt(H.paddingTop,10),le=parseInt(H.borderBottomWidth,10),O=parseInt(H.paddingBottom,10),W=ae+J+P+O+le,re=Math.min(S.offsetHeight*5,W),F=window.getComputedStyle(_),V=parseInt(F.paddingTop,10),G=parseInt(F.paddingBottom,10),Z=N.top+N.height/2-Gn,me=k-Z,ye=S.offsetHeight/2,oe=S.offsetTop+ye,we=ae+J+oe,tt=W-we;if(we<=Z){const ke=j.length>0&&S===j[j.length-1].ref.current;l.style.bottom="0px";const je=d.clientHeight-_.offsetTop-_.offsetHeight,It=Math.max(me,ye+(ke?G:0)+je+le),vn=we+It;l.style.height=vn+"px"}else{const ke=j.length>0&&S===j[0].ref.current;l.style.top="0px";const It=Math.max(Z,ae+_.offsetTop+(ke?V:0)+ye)+tt;l.style.height=It+"px",_.scrollTop=we-Z+_.offsetTop}l.style.margin=`${Gn}px 0`,l.style.minHeight=re+"px",l.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,i.trigger,i.valueNode,l,d,_,S,E,i.dir,r]);bt(()=>C(),[C]);const[R,L]=g.useState();bt(()=>{d&&L(window.getComputedStyle(d).zIndex)},[d]);const A=g.useCallback(N=>{N&&I.current===!0&&(C(),w==null||w(),I.current=!1)},[C,w]);return o.jsx(L$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:A,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:o.jsx(Le.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});mj.displayName=P$;var D$="SelectPopperPosition",cg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Gn,...i}=t,a=of(n);return o.jsx(SB,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cg.displayName=D$;var[L$,Bv]=ja(Xi,{}),ug="SelectViewport",gj=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=mi(ug,n),a=Bv(ug,n),l=ft(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(rf.Slot,{scope:n,children:o.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Re(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const I=window.innerHeight-Gn*2,_=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),E=Math.max(_,S);if(E<I){const w=E+v,C=Math.min(I,w),R=w-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});gj.displayName=ug;var yj="SelectGroup",[O$,M$]=ja(yj),V$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ac();return o.jsx(O$,{scope:n,id:s,children:o.jsx(Le.div,{role:"group","aria-labelledby":s,...r,ref:e})})});V$.displayName=yj;var vj="SelectLabel",xj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=M$(vj,n);return o.jsx(Le.div,{id:s.id,...r,ref:e})});xj.displayName=vj;var Jd="SelectItem",[F$,wj]=ja(Jd),_j=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=pi(Jd,n),c=mi(Jd,n),d=l.value===r,[h,f]=g.useState(i??""),[p,v]=g.useState(!1),I=ft(e,w=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,w,r,s)}),_=Ac(),S=g.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(F$,{scope:n,value:r,disabled:s,textId:_,isSelected:d,onItemTextChange:g.useCallback(w=>{f(C=>C||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(rf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(Le.div,{role:"option","aria-labelledby":_,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:I,onFocus:Re(a.onFocus,()=>v(!0)),onBlur:Re(a.onBlur,()=>v(!1)),onClick:Re(a.onClick,()=>{S.current!=="mouse"&&E()}),onPointerUp:Re(a.onPointerUp,()=>{S.current==="mouse"&&E()}),onPointerDown:Re(a.onPointerDown,w=>{S.current=w.pointerType}),onPointerMove:Re(a.onPointerMove,w=>{var C;S.current=w.pointerType,s?(C=c.onItemLeave)==null||C.call(c):S.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(a.onPointerLeave,w=>{var C;w.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:Re(a.onKeyDown,w=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&w.key===" "||(N$.includes(w.key)&&E(),w.key===" "&&w.preventDefault())})})})})});_j.displayName=Jd;var fl="SelectItemText",bj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=pi(fl,n),l=mi(fl,n),c=wj(fl,n),d=I$(fl,n),[h,f]=g.useState(null),p=ft(e,E=>f(E),c.onItemTextChange,E=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,E,c.value,c.disabled)}),v=h==null?void 0:h.textContent,I=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:_,onNativeOptionRemove:S}=d;return bt(()=>(_(I),()=>S(I)),[_,S,I]),o.jsxs(o.Fragment,{children:[o.jsx(Le.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?pa.createPortal(i.children,a.valueNode):null]})});bj.displayName=fl;var Ej="SelectItemIndicator",Nj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return wj(Ej,n).isSelected?o.jsx(Le.span,{"aria-hidden":!0,...r,ref:e}):null});Nj.displayName=Ej;var dg="SelectScrollUpButton",Tj=g.forwardRef((t,e)=>{const n=mi(dg,t.__scopeSelect),r=Bv(dg,t.__scopeSelect),[s,i]=g.useState(!1),a=ft(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Cj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Tj.displayName=dg;var hg="SelectScrollDownButton",Sj=g.forwardRef((t,e)=>{const n=mi(hg,t.__scopeSelect),r=Bv(hg,t.__scopeSelect),[s,i]=g.useState(!1),a=ft(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Cj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Sj.displayName=hg;var Cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=mi("SelectScrollButton",n),a=g.useRef(null),l=sf(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),bt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Le.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Re(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Re(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Re(s.onPointerLeave,()=>{c()})})}),U$="SelectSeparator",Ij=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Le.div,{"aria-hidden":!0,...r,ref:e})});Ij.displayName=U$;var fg="SelectArrow",B$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=of(n),i=pi(fg,n),a=mi(fg,n);return i.open&&a.position==="popper"?o.jsx(CB,{...s,...r,ref:e}):null});B$.displayName=fg;var $$="SelectBubbleInput",jj=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),i=ft(r,s),a=KI(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(Le.select,{...n,style:{...QI,...n.style},ref:i,defaultValue:e})});jj.displayName=$$;function Aj(t){return t===""||t===void 0}function kj(t){const e=Zr(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Rj(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=z$(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function z$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var H$=ij,Pj=aj,W$=cj,q$=uj,G$=dj,Dj=hj,K$=gj,Lj=xj,Oj=_j,Q$=bj,Y$=Nj,Mj=Tj,Vj=Sj,Fj=Ij;const Xt=H$,Jt=W$,$t=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Pj,{ref:r,className:Pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(q$,{asChild:!0,children:o.jsx(AC,{className:"h-4 w-4 opacity-50"})})]}));$t.displayName=Pj.displayName;const Uj=g.forwardRef(({className:t,...e},n)=>o.jsx(Mj,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(J5,{className:"h-4 w-4"})}));Uj.displayName=Mj.displayName;const Bj=g.forwardRef(({className:t,...e},n)=>o.jsx(Vj,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(AC,{className:"h-4 w-4"})}));Bj.displayName=Vj.displayName;const zt=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(G$,{children:o.jsxs(Dj,{ref:s,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(Uj,{}),o.jsx(K$,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Bj,{})]})}));zt.displayName=Dj.displayName;const X$=g.forwardRef(({className:t,...e},n)=>o.jsx(Lj,{ref:n,className:Pe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));X$.displayName=Lj.displayName;const te=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Oj,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Y$,{children:o.jsx(X5,{className:"h-4 w-4"})})}),o.jsx(Q$,{children:e})]}));te.displayName=Oj.displayName;const J$=g.forwardRef(({className:t,...e},n)=>o.jsx(Fj,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",t),...e}));J$.displayName=Fj.displayName;var af="Switch",[Z$]=Ta(af),[ez,tz]=Z$(af),$j=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[p,v]=g.useState(null),I=ft(e,C=>v(C)),_=g.useRef(!1),S=p?h||!!p.closest("form"):!0,[E,w]=cc({prop:s,defaultProp:i??!1,onChange:d,caller:af});return o.jsxs(ez,{scope:n,checked:E,disabled:l,children:[o.jsx(Le.button,{type:"button",role:"switch","aria-checked":E,"aria-required":a,"data-state":qj(E),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:I,onClick:Re(t.onClick,C=>{w(R=>!R),S&&(_.current=C.isPropagationStopped(),_.current||C.stopPropagation())})}),S&&o.jsx(Wj,{control:p,bubbles:!_.current,name:r,value:c,checked:E,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});$j.displayName=af;var zj="SwitchThumb",Hj=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=tz(zj,n);return o.jsx(Le.span,{"data-state":qj(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Hj.displayName=zj;var nz="SwitchBubbleInput",Wj=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=ft(a,i),c=KI(n),d=OI(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&v){const I=new Event("click",{bubbles:r});v.call(h,n),h.dispatchEvent(I)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Wj.displayName=nz;function qj(t){return t?"checked":"unchecked"}var Gj=$j,rz=Hj;const Rt=g.forwardRef(({className:t,...e},n)=>o.jsx(Gj,{className:Pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:o.jsx(rz,{className:Pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Rt.displayName=Gj.displayName;const sz=({onBack:t})=>{const{user:e}=Wn(),[n,r]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[s,i]=g.useState([{id:"1",question:"",points:0,flag:""}]),[a,l]=g.useState(!1),[c,d]=g.useState(!1),h=async A=>{A.preventDefault(),l(!0);try{const N={...n,finalCategory:c?n.customCategory:n.category,questions:n.hasMultipleQuestions?s:[],createdAt:new Date,isActive:!0,solvedBy:[],hints:n.hints.filter(y=>y.trim()!==""),totalPoints:n.hasMultipleQuestions?s.reduce((y,T)=>y+T.points,0):n.points,createdBy:e==null?void 0:e.uid,createdByName:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),featuredOnPractice:n.featuredOnPractice,availableInPractice:n.availableInPractice,challengeType:n.challengeType,...n.isExternalChallenge&&{attribution:{...n.externalSource,importedBy:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),importedById:e==null?void 0:e.uid,importedAt:new Date}},...n.creator&&{originalCreator:{name:n.creator,url:n.creatorUrl}}};await XS(St(ge,"challenges"),N),alert("Challenge created successfully!"),f()}catch(N){console.error("Error creating challenge:",N),alert("Error creating challenge. Please try again.")}finally{l(!1)}},f=()=>{r({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),i([{id:"1",question:"",points:0,flag:""}]),d(!1)},p=()=>{r({...n,hints:[...n.hints,""]})},v=(A,N)=>{const y=[...n.hints];y[A]=N,r({...n,hints:y})},I=A=>{const N=n.hints.filter((y,T)=>T!==A);r({...n,hints:N})},_=()=>{const A={id:Date.now().toString(),question:"",points:0,flag:""};i([...s,A])},S=(A,N,y)=>{i(s.map(T=>T.id===A?{...T,[N]:y}:T))},E=A=>{s.length>1&&i(s.filter(N=>N.id!==A))},w=A=>{if(A==="link"){const N=prompt("Enter the URL:");if(N){const y={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:N,type:"link"};r({...n,files:[...n.files,y]})}}else{const N=document.createElement("input");N.type="file",N.onchange=y=>{var b;const T=(b=y.target.files)==null?void 0:b[0];if(T){const j={id:Date.now().toString(),name:T.name,url:URL.createObjectURL(T),type:"file"};r({...n,files:[...n.files,j]})}},N.click()}},C=A=>{r({...n,files:n.files.filter(N=>N.id!==A)})},R=A=>{A==="custom"?(d(!0),r({...n,category:"custom"})):(d(!1),r({...n,category:A}))},L=(A,N)=>{r({...n,externalSource:{...n.externalSource,[A]:N}})};return o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Create New Challenge"}),o.jsx(Ht,{children:"Add a new CTF challenge to the platform with advanced options"})]}),o.jsx(ie,{children:o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(he,{id:"title",value:n.title,onChange:A=>r({...n,title:A.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:n.category,onValueChange:R,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"web",children:"Web"}),o.jsx(te,{value:"crypto",children:"Cryptography"}),o.jsx(te,{value:"forensics",children:"Forensics"}),o.jsx(te,{value:"pwn",children:"Pwn"}),o.jsx(te,{value:"reversing",children:"Reverse Engineering"}),o.jsx(te,{value:"misc",children:"Miscellaneous"}),o.jsx(te,{value:"custom",children:"Custom Category"})]})]})]}),c&&o.jsxs("div",{children:[o.jsx(q,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(he,{id:"customCategory",value:n.customCategory,onChange:A=>r({...n,customCategory:A.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:n.difficulty,onValueChange:A=>r({...n,difficulty:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(te,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(te,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(q,{htmlFor:"points",children:"Points *"}),o.jsx(he,{id:"points",type:"number",value:n.points,onChange:A=>r({...n,points:parseInt(A.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(q,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:n.description,onChange:A=>r({...n,description:A.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ye,{className:"w-5 h-5"}),o.jsx(q,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:n.availableInPractice,onCheckedChange:A=>r({...n,availableInPractice:A})}),o.jsx(q,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:n.featuredOnPractice,onCheckedChange:A=>r({...n,featuredOnPractice:A})}),o.jsxs(q,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Tv,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:n.challengeType,onValueChange:A=>r({...n,challengeType:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"practice",children:"Practice Challenge"}),o.jsx(te,{value:"live",children:"Live Event Challenge"}),o.jsx(te,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cn,{className:"w-5 h-5"}),o.jsx(q,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(he,{id:"creator",value:n.creator,onChange:A=>r({...n,creator:A.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(he,{id:"creatorUrl",value:n.creatorUrl,onChange:A=>r({...n,creatorUrl:A.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qd,{className:"w-5 h-5"}),o.jsx(q,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:n.isExternalChallenge,onCheckedChange:A=>r({...n,isExternalChallenge:A})})]}),n.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(he,{id:"ctfName",value:n.externalSource.ctfName,onChange:A=>L("ctfName",A.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(he,{id:"ctfUrl",value:n.externalSource.ctfUrl,onChange:A=>L("ctfUrl",A.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(he,{id:"originalAuthor",value:n.externalSource.originalAuthor,onChange:A=>L("originalAuthor",A.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(he,{id:"authorUrl",value:n.externalSource.authorUrl,onChange:A=>L("authorUrl",A.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:n.externalSource.license,onValueChange:A=>L("license",A),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"unknown",children:"Unknown"}),o.jsx(te,{value:"MIT",children:"MIT License"}),o.jsx(te,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(te,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(te,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(te,{value:"custom",children:"Custom License"})]})]}),n.externalSource.license==="custom"&&o.jsx(he,{placeholder:"Specify custom license",className:"mt-2",onChange:A=>L("license",A.target.value)})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Attribution Notice:"})," This challenge will be displayed with proper attribution to the original author and CTF platform."]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:n.hasMultipleQuestions,onCheckedChange:A=>r({...n,hasMultipleQuestions:A})})]}),n.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(q,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Q,{type:"button",onClick:_,variant:"outline",size:"sm",children:[o.jsx(ti,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),s.map((A,N)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(q,{children:["Question ",N+1]}),s.length>1&&o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(A.id),children:o.jsx(lc,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:`question-${A.id}`,children:"Question Text *"}),o.jsx(he,{id:`question-${A.id}`,value:A.question,onChange:y=>S(A.id,"question",y.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:`points-${A.id}`,children:"Points *"}),o.jsx(he,{id:`points-${A.id}`,type:"number",value:A.points,onChange:y=>S(A.id,"points",parseInt(y.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:`flag-${A.id}`,children:"Flag *"}),o.jsx(he,{id:`flag-${A.id}`,value:A.flag,onChange:y=>S(A.id,"flag",y.target.value),placeholder:"Flag for this question",required:!0})]})]})]},A.id)),s.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",s.reduce((A,N)=>A+N.points,0)]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"flag",children:"Flag *"}),o.jsx(he,{id:"flag",value:n.flag,onChange:A=>r({...n,flag:A.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:n.flagFormat,onValueChange:A=>r({...n,flagFormat:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(te,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(te,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(te,{value:".*",children:"Any format"}),o.jsx(te,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(te,{value:"custom",children:"Custom Regex"})]})]}),n.flagFormat==="custom"&&o.jsx(he,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:A=>r({...n,flagFormat:A.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(q,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>w("file"),children:[o.jsx(LC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>w("link"),children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),n.files.length>0&&o.jsx("div",{className:"space-y-2",children:n.files.map(A=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[A.type==="file"?o.jsx(ac,{className:"w-4 h-4"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:A.name}),A.type==="link"&&o.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(A.id),children:o.jsx(lc,{className:"w-4 h-4"})})]},A.id))})]}),o.jsxs("div",{children:[o.jsx(q,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[n.hints.map((A,N)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(he,{value:A,onChange:y=>v(N,y.target.value),placeholder:`Hint ${N+1}`}),n.hints.length>1&&o.jsx(Q,{type:"button",variant:"outline",onClick:()=>I(N),children:"Remove"})]},N)),o.jsx(Q,{type:"button",variant:"outline",onClick:p,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(Q,{type:"submit",disabled:a,children:a?"Creating...":"Create Challenge"}),o.jsx(Q,{type:"button",variant:"outline",onClick:f,children:"Reset Form"}),o.jsx(Q,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},iz=({onBack:t,onCreateNew:e,onEditChallenge:n})=>{const{user:r}=Wn(),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[p,v]=g.useState("all"),[I,_]=g.useState("all"),[S,E]=g.useState("all"),[w,C]=g.useState("all"),[R,L]=g.useState([]),[A,N]=g.useState(!1);g.useEffect(()=>{y(),T()},[]),g.useEffect(()=>{b()},[h,p,I,S,w,s]);const y=async()=>{try{const F=Tr(St(ge,"challenges"),qs("createdAt","desc")),G=(await Vn(F)).docs.map(Z=>({id:Z.id,...Z.data()}));i(G)}catch(F){console.error("Error fetching challenges:",F)}finally{d(!1)}},T=async()=>{try{N(!0);const F=Tr(St(ge,"events"),cn("status","in",["LIVE","UPCOMING"]),qs("startTime","asc")),G=(await Vn(F)).docs.map(Z=>({id:Z.id,...Z.data()}));L(G)}catch(F){console.error("Error fetching events:",F),L([])}finally{N(!1)}},b=()=>{let F=s;h&&(F=F.filter(V=>V.title.toLowerCase().includes(h.toLowerCase())||V.description.toLowerCase().includes(h.toLowerCase())||(V.finalCategory||V.category).toLowerCase().includes(h.toLowerCase()))),p!=="all"&&(F=F.filter(V=>(V.finalCategory||V.category)===p)),I!=="all"&&(F=F.filter(V=>V.difficulty===I)),S!=="all"&&(F=F.filter(V=>S==="active"?V.isActive:!V.isActive)),w!=="all"&&(F=F.filter(V=>{switch(w){case"practice":return V.challengeType==="practice"||V.featuredOnPractice||V.availableInPractice;case"live":return V.challengeType==="live";case"upcoming":return V.challengeType==="upcoming";case"past":return V.challengeType==="past_event";case"featured":return V.featuredOnPractice;default:return!0}})),l(F)},j=async(F,V)=>{try{await hn(Ge(ge,"challenges",F),{isActive:!V}),i(s.map(G=>G.id===F?{...G,isActive:!V}:G))}catch(G){console.error("Error updating challenge status:",G)}},k=async(F,V)=>{try{await hn(Ge(ge,"challenges",F),{featuredOnPractice:!V,availableInPractice:!0,challengeType:V?void 0:"practice"}),i(s.map(G=>G.id===F?{...G,featuredOnPractice:!V,availableInPractice:!0,challengeType:V?G.challengeType:"practice"}:G))}catch(G){console.error("Error updating featured status:",G)}},P=async(F,V,G)=>{try{const Z=R.find(me=>me.id===V);await hn(Ge(ge,"challenges",F),{eventId:V,eventName:G,challengeType:(Z==null?void 0:Z.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}),i(s.map(me=>me.id===F?{...me,eventId:V,eventName:G,challengeType:(Z==null?void 0:Z.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}:me))}catch(Z){console.error("Error assigning challenge to event:",Z)}},H=async F=>{try{await hn(Ge(ge,"challenges",F),{eventId:null,eventName:null,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}),i(s.map(V=>V.id===F?{...V,eventId:void 0,eventName:void 0,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}:V))}catch(V){console.error("Error removing challenge from event:",V)}},ae=async(F,V)=>{try{await hn(Ge(ge,"challenges",F),{availableInPractice:V,challengeType:V?"practice":void 0,featuredOnPractice:V?!1:void 0}),i(s.map(G=>G.id===F?{...G,availableInPractice:V,challengeType:V?"practice":G.challengeType,featuredOnPractice:V?G.featuredOnPractice:!1}:G))}catch(G){console.error("Error updating practice availability:",G)}},J=async F=>{if(confirm("Are you sure you want to delete this challenge? This action cannot be undone."))try{await D6(Ge(ge,"challenges",F)),i(s.filter(V=>V.id!==F))}catch(V){console.error("Error deleting challenge:",V)}},le=F=>{switch(F){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},O=F=>({web:"bg-blue-100 text-blue-800",crypto:"bg-purple-100 text-purple-800",forensics:"bg-orange-100 text-orange-800",pwn:"bg-red-100 text-red-800",reversing:"bg-indigo-100 text-indigo-800",misc:"bg-gray-100 text-gray-800"})[F]||"bg-gray-100 text-gray-800",W=F=>F.challengeType==="live"?o.jsxs(Fe,{className:"bg-red-100 text-red-800",children:[o.jsx(Rs,{className:"w-3 h-3 mr-1"}),"Live Event"]}):F.challengeType==="upcoming"?o.jsxs(Fe,{className:"bg-yellow-100 text-yellow-800",children:[o.jsx(ia,{className:"w-3 h-3 mr-1"}),"Upcoming"]}):F.challengeType==="past_event"?o.jsx(Fe,{className:"bg-gray-100 text-gray-800",children:"Past Event"}):F.featuredOnPractice?o.jsxs(Fe,{className:"bg-purple-100 text-purple-800",children:[o.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Featured"]}):F.availableInPractice?o.jsx(Fe,{className:"bg-green-100 text-green-800",children:"Practice"}):null,re=()=>{const F=s.map(V=>V.finalCategory||V.category);return Array.from(new Set(F)).filter(Boolean)};return c?o.jsx(se,{children:o.jsx(ie,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenges..."})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Challenge Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage challenges, assign to events, and feature on practice page (",s.length," total)"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{onClick:e,children:[o.jsx(ti,{className:"w-4 h-4 mr-2"}),"Create New"]}),o.jsx(Q,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]}),o.jsxs(se,{children:[o.jsx(Se,{children:o.jsx(Ce,{className:"text-lg",children:"Search & Filter"})}),o.jsx(ie,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(he,{placeholder:"Search challenges...",value:h,onChange:F=>f(F.target.value),className:"pl-10"})]}),o.jsx("div",{children:o.jsxs(Xt,{value:p,onValueChange:v,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Categories"})}),o.jsxs(zt,{children:[o.jsx(te,{value:"all",children:"All Categories"}),re().map(F=>o.jsx(te,{value:F,children:F},F))]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:I,onValueChange:_,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Difficulties"})}),o.jsxs(zt,{children:[o.jsx(te,{value:"all",children:"All Difficulties"}),o.jsx(te,{value:"easy",children:"Easy"}),o.jsx(te,{value:"medium",children:"Medium"}),o.jsx(te,{value:"hard",children:"Hard"}),o.jsx(te,{value:"expert",children:"Expert"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:S,onValueChange:E,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Status"})}),o.jsxs(zt,{children:[o.jsx(te,{value:"all",children:"All Status"}),o.jsx(te,{value:"active",children:"Active"}),o.jsx(te,{value:"inactive",children:"Inactive"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:w,onValueChange:C,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Types"})}),o.jsxs(zt,{children:[o.jsx(te,{value:"all",children:"All Types"}),o.jsx(te,{value:"practice",children:"Practice"}),o.jsx(te,{value:"live",children:"Live Event"}),o.jsx(te,{value:"upcoming",children:"Upcoming Event"}),o.jsx(te,{value:"past",children:"Past Event"}),o.jsx(te,{value:"featured",children:"Featured"})]})]})})]})})]}),o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Challenges"}),o.jsxs(Ht,{children:[a.length," of ",s.length," challenges shown",R.length>0&&`  ${R.length} events available`]})]}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-4",children:[a.map(F=>{var V,G,Z,me;return o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("h3",{className:"font-semibold text-lg",children:F.title}),o.jsx(Fe,{variant:F.isActive?"default":"secondary",children:F.isActive?"Active":"Inactive"}),o.jsx(Fe,{className:le(F.difficulty),children:F.difficulty}),o.jsx(Fe,{className:O(F.finalCategory||F.category),children:F.finalCategory||F.category}),o.jsxs(Fe,{variant:"outline",children:[F.points," pts"]}),W(F)]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:F.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Created by: ",F.createdByName]}),o.jsx("span",{children:""}),o.jsx("span",{children:((Z=(G=(V=F.createdAt)==null?void 0:V.toDate)==null?void 0:G.call(V))==null?void 0:Z.toLocaleDateString())||new Date(F.createdAt).toLocaleDateString()}),o.jsx("span",{children:""}),o.jsxs("span",{children:[((me=F.solvedBy)==null?void 0:me.length)||0," solves"]}),F.eventName&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Event: ",F.eventName]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`featured-${F.id}`,checked:F.featuredOnPractice||!1,onCheckedChange:ye=>k(F.id,F.featuredOnPractice||!1)}),o.jsx(q,{htmlFor:`featured-${F.id}`,className:"text-sm",children:"Featured on Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`practice-${F.id}`,checked:F.availableInPractice||!1,onCheckedChange:ye=>ae(F.id,ye)}),o.jsx(q,{htmlFor:`practice-${F.id}`,className:"text-sm",children:"Available in Practice"})]}),!F.eventId&&R.length>0&&o.jsx("div",{className:"flex items-center space-x-2",children:o.jsxs(Xt,{value:"",onValueChange:ye=>{const oe=R.find(we=>we.id===ye);oe&&P(F.id,ye,oe.title)},children:[o.jsx($t,{className:"w-40",children:o.jsx(Jt,{placeholder:"Assign to Event"})}),o.jsx(zt,{children:R.map(ye=>o.jsxs(te,{value:ye.id,children:[ye.title," (",ye.status,")"]},ye.id))})]})}),F.eventId&&o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>H(F.id),children:"Remove from Event"}),R.length===0&&o.jsx(Fe,{variant:"outline",className:"text-xs",children:"No events available"})]})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>n(F),children:[o.jsx(hU,{className:"w-4 h-4 mr-1"}),"Edit"]}),o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>j(F.id,F.isActive),children:F.isActive?"Deactivate":"Activate"}),o.jsx(Q,{variant:"destructive",size:"sm",onClick:()=>J(F.id),children:o.jsx(fU,{className:"w-4 h-4"})})]})]})},F.id)}),a.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.length===0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{children:"No challenges created yet."}),o.jsxs(Q,{onClick:e,children:[o.jsx(ti,{className:"w-4 h-4 mr-2"}),"Create Your First Challenge"]})]}):"No challenges match your filters."})]})})]})]})},oz=({challengeId:t,onBack:e,onSave:n})=>{const{user:r}=Wn(),[s,i]=g.useState(!0),[a,l]=g.useState(!1),[c,d]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,isActive:!0,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[h,f]=g.useState([]),[p,v]=g.useState(!1);g.useEffect(()=>{I()},[t]);const I=async()=>{var b,j,k,P,H,ae,J;try{const le=await sa(Ge(ge,"challenges",t));if(le.exists()){const O=le.data();d({title:O.title||"",description:O.description||"",category:O.category||"web",customCategory:O.finalCategory||"",difficulty:O.difficulty||"easy",points:O.points||100,flag:O.flag||"",flagFormat:O.flagFormat||"CTF{.*}",hasMultipleQuestions:O.hasMultipleQuestions||!1,isExternalChallenge:!!O.attribution,isActive:O.isActive!==!1,hints:O.hints||[""],files:O.files||[],creator:((b=O.originalCreator)==null?void 0:b.name)||"",creatorUrl:((j=O.originalCreator)==null?void 0:j.url)||"",featuredOnPractice:O.featuredOnPractice||!1,availableInPractice:O.availableInPractice!==!1,challengeType:O.challengeType||"practice",externalSource:{ctfName:((k=O.attribution)==null?void 0:k.ctfName)||"",ctfUrl:((P=O.attribution)==null?void 0:P.ctfUrl)||"",originalAuthor:((H=O.attribution)==null?void 0:H.originalAuthor)||"",authorUrl:((ae=O.attribution)==null?void 0:ae.authorUrl)||"",license:((J=O.attribution)==null?void 0:J.license)||"unknown"}}),O.hasMultipleQuestions&&O.questions&&f(O.questions),O.finalCategory&&(v(!0),d(W=>({...W,category:"custom"})))}}catch(le){console.error("Error loading challenge:",le)}finally{i(!1)}},_=async b=>{b.preventDefault(),l(!0);try{const j={...c,finalCategory:p?c.customCategory:c.category,questions:c.hasMultipleQuestions?h:[],hints:c.hints.filter(k=>k.trim()!==""),totalPoints:c.hasMultipleQuestions?h.reduce((k,P)=>k+P.points,0):c.points,updatedAt:new Date,updatedBy:r==null?void 0:r.uid,updatedByName:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),featuredOnPractice:c.featuredOnPractice,availableInPractice:c.availableInPractice,challengeType:c.challengeType,...c.isExternalChallenge&&{attribution:{...c.externalSource,importedBy:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),importedById:r==null?void 0:r.uid,importedAt:new Date}},...c.creator&&{originalCreator:{name:c.creator,url:c.creatorUrl}}};await hn(Ge(ge,"challenges",t),j),alert("Challenge updated successfully!"),n()}catch(j){console.error("Error updating challenge:",j),alert("Error updating challenge. Please try again.")}finally{l(!1)}},S=()=>{d({...c,hints:[...c.hints,""]})},E=(b,j)=>{const k=[...c.hints];k[b]=j,d({...c,hints:k})},w=b=>{const j=c.hints.filter((k,P)=>P!==b);d({...c,hints:j})},C=()=>{const b={id:Date.now().toString(),question:"",points:0,flag:""};f([...h,b])},R=(b,j,k)=>{f(h.map(P=>P.id===b?{...P,[j]:k}:P))},L=b=>{h.length>1&&f(h.filter(j=>j.id!==b))},A=b=>{if(b==="link"){const j=prompt("Enter the URL:");if(j){const k={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:j,type:"link"};d({...c,files:[...c.files,k]})}}else{const j=document.createElement("input");j.type="file",j.onchange=k=>{var H;const P=(H=k.target.files)==null?void 0:H[0];if(P){const ae={id:Date.now().toString(),name:P.name,url:URL.createObjectURL(P),type:"file"};d({...c,files:[...c.files,ae]})}},j.click()}},N=b=>{d({...c,files:c.files.filter(j=>j.id!==b)})},y=b=>{b==="custom"?(v(!0),d({...c,category:"custom"})):(v(!1),d({...c,category:b}))},T=(b,j)=>{d({...c,externalSource:{...c.externalSource,[b]:j}})};return s?o.jsx(se,{children:o.jsx(ie,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenge..."})})}):o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Edit Challenge"}),o.jsx(Ht,{children:"Update challenge details and configuration"})]}),o.jsx(ie,{children:o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(q,{className:"text-base",children:"Challenge Status"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active challenges are visible to users"})]}),o.jsx(Rt,{checked:c.isActive,onCheckedChange:b=>d({...c,isActive:b})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Ye,{className:"w-5 h-5"}),o.jsx(q,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:c.availableInPractice,onCheckedChange:b=>d({...c,availableInPractice:b})}),o.jsx(q,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:c.featuredOnPractice,onCheckedChange:b=>d({...c,featuredOnPractice:b})}),o.jsxs(q,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Tv,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:c.challengeType,onValueChange:b=>d({...c,challengeType:b}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"practice",children:"Practice Challenge"}),o.jsx(te,{value:"live",children:"Live Event Challenge"}),o.jsx(te,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(he,{id:"title",value:c.title,onChange:b=>d({...c,title:b.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:c.category,onValueChange:y,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"web",children:"Web"}),o.jsx(te,{value:"crypto",children:"Cryptography"}),o.jsx(te,{value:"forensics",children:"Forensics"}),o.jsx(te,{value:"pwn",children:"Pwn"}),o.jsx(te,{value:"reversing",children:"Reverse Engineering"}),o.jsx(te,{value:"misc",children:"Miscellaneous"}),o.jsx(te,{value:"custom",children:"Custom Category"})]})]})]}),p&&o.jsxs("div",{children:[o.jsx(q,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(he,{id:"customCategory",value:c.customCategory,onChange:b=>d({...c,customCategory:b.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:c.difficulty,onValueChange:b=>d({...c,difficulty:b}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(te,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(te,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(q,{htmlFor:"points",children:"Points *"}),o.jsx(he,{id:"points",type:"number",value:c.points,onChange:b=>d({...c,points:parseInt(b.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(q,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:c.description,onChange:b=>d({...c,description:b.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cn,{className:"w-5 h-5"}),o.jsx(q,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(he,{id:"creator",value:c.creator,onChange:b=>d({...c,creator:b.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(he,{id:"creatorUrl",value:c.creatorUrl,onChange:b=>d({...c,creatorUrl:b.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qd,{className:"w-5 h-5"}),o.jsx(q,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:c.isExternalChallenge,onCheckedChange:b=>d({...c,isExternalChallenge:b})})]}),c.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(he,{id:"ctfName",value:c.externalSource.ctfName,onChange:b=>T("ctfName",b.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(he,{id:"ctfUrl",value:c.externalSource.ctfUrl,onChange:b=>T("ctfUrl",b.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(he,{id:"originalAuthor",value:c.externalSource.originalAuthor,onChange:b=>T("originalAuthor",b.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(he,{id:"authorUrl",value:c.externalSource.authorUrl,onChange:b=>T("authorUrl",b.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:c.externalSource.license,onValueChange:b=>T("license",b),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(te,{value:"unknown",children:"Unknown"}),o.jsx(te,{value:"MIT",children:"MIT License"}),o.jsx(te,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(te,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(te,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(te,{value:"custom",children:"Custom License"})]})]}),c.externalSource.license==="custom"&&o.jsx(he,{placeholder:"Specify custom license",className:"mt-2",onChange:b=>T("license",b.target.value)})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:c.hasMultipleQuestions,onCheckedChange:b=>d({...c,hasMultipleQuestions:b})})]}),c.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(q,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Q,{type:"button",onClick:C,variant:"outline",size:"sm",children:[o.jsx(ti,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),h.map((b,j)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(q,{children:["Question ",j+1]}),h.length>1&&o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(b.id),children:o.jsx(lc,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:`question-${b.id}`,children:"Question Text *"}),o.jsx(he,{id:`question-${b.id}`,value:b.question,onChange:k=>R(b.id,"question",k.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:`points-${b.id}`,children:"Points *"}),o.jsx(he,{id:`points-${b.id}`,type:"number",value:b.points,onChange:k=>R(b.id,"points",parseInt(k.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:`flag-${b.id}`,children:"Flag *"}),o.jsx(he,{id:`flag-${b.id}`,value:b.flag,onChange:k=>R(b.id,"flag",k.target.value),placeholder:"Flag for this question",required:!0})]})]})]},b.id)),h.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",h.reduce((b,j)=>b+j.points,0)]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"flag",children:"Flag *"}),o.jsx(he,{id:"flag",value:c.flag,onChange:b=>d({...c,flag:b.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:c.flagFormat,onValueChange:b=>d({...c,flagFormat:b}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(te,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(te,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(te,{value:".*",children:"Any format"}),o.jsx(te,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(te,{value:"custom",children:"Custom Regex"})]})]}),c.flagFormat==="custom"&&o.jsx(he,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:b=>d({...c,flagFormat:b.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(q,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>A("file"),children:[o.jsx(LC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>A("link"),children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),c.files.length>0&&o.jsx("div",{className:"space-y-2",children:c.files.map(b=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[b.type==="file"?o.jsx(ac,{className:"w-4 h-4"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:b.name}),b.type==="link"&&o.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(b.id),children:o.jsx(lc,{className:"w-4 h-4"})})]},b.id))})]}),o.jsxs("div",{children:[o.jsx(q,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[c.hints.map((b,j)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(he,{value:b,onChange:k=>E(j,k.target.value),placeholder:`Hint ${j+1}`}),c.hints.length>1&&o.jsx(Q,{type:"button",variant:"outline",onClick:()=>w(j),children:"Remove"})]},j)),o.jsx(Q,{type:"button",variant:"outline",onClick:S,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(Q,{type:"submit",disabled:a,children:[o.jsx(PC,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]}),o.jsx(Q,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})},az=({onBack:t})=>{const[e,n]=g.useState({name:"",description:"",startDate:"",endDate:"",type:"ctf",maxParticipants:100,isPublic:!0}),r=async s=>{s.preventDefault(),console.log("Scheduling event:",e),alert("Event scheduling functionality coming soon!")};return o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Schedule New Event"}),o.jsx(Ht,{children:"Create and schedule CTF events and competitions"})]}),o.jsx(ie,{children:o.jsxs("form",{onSubmit:r,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"name",children:"Event Name *"}),o.jsx(he,{id:"name",value:e.name,onChange:s=>n({...e,name:s.target.value}),placeholder:"Enter event name",required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"description",children:"Event Description"}),o.jsx(Sa,{id:"description",value:e.description,onChange:s=>n({...e,description:s.target.value}),placeholder:"Describe the event, rules, and objectives...",rows:4})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"startDate",children:"Start Date & Time *"}),o.jsx(he,{id:"startDate",type:"datetime-local",value:e.startDate,onChange:s=>n({...e,startDate:s.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"endDate",children:"End Date & Time *"}),o.jsx(he,{id:"endDate",type:"datetime-local",value:e.endDate,onChange:s=>n({...e,endDate:s.target.value}),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"type",children:"Event Type"}),o.jsxs("select",{id:"type",value:e.type,onChange:s=>n({...e,type:s.target.value}),className:"w-full p-2 border rounded",children:[o.jsx("option",{value:"ctf",children:"CTF Competition"}),o.jsx("option",{value:"workshop",children:"Workshop"}),o.jsx("option",{value:"training",children:"Training Session"}),o.jsx("option",{value:"jeopardy",children:"Jeopardy Style"})]})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"maxParticipants",children:"Max Participants"}),o.jsx(he,{id:"maxParticipants",type:"number",value:e.maxParticipants,onChange:s=>n({...e,maxParticipants:parseInt(s.target.value)}),min:"1"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"isPublic",checked:e.isPublic,onChange:s=>n({...e,isPublic:s.target.checked}),className:"rounded"}),o.jsx(q,{htmlFor:"isPublic",children:"Public Event (Visible to all users)"})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(Q,{type:"submit",children:"Schedule Event"}),o.jsx(Q,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},lz=({onBack:t})=>{const e=[{id:"1",user:"john_doe",challenge:"SQL Injection Master",submittedAt:"2024-01-15",status:"pending",content:"This is a mock write-up content...",rating:0},{id:"2",user:"jane_smith",challenge:"Crypto Challenge 1",submittedAt:"2024-01-14",status:"approved",content:"Another mock write-up...",rating:4}],n=i=>{console.log("Approving writeup:",i),alert(`Write-up ${i} approved!`)},r=i=>{console.log("Rejecting writeup:",i),alert(`Write-up ${i} rejected!`)},s=i=>{switch(i){case"pending":return o.jsx(Fe,{variant:"secondary",children:"Pending"});case"approved":return o.jsx(Fe,{variant:"default",children:"Approved"});case"rejected":return o.jsx(Fe,{variant:"destructive",children:"Rejected"});default:return o.jsx(Fe,{variant:"secondary",children:i})}};return o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Review Write-ups"}),o.jsxs(Ht,{children:["Review and approve user write-ups for challenges (",e.length," total)"]})]}),o.jsx(ie,{children:o.jsxs("div",{className:"space-y-6",children:[e.map(i=>o.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:i.challenge}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by ",i.user," on ",i.submittedAt]})]}),s(i.status)]}),o.jsxs("div",{children:[o.jsx(q,{children:"Write-up Content"}),o.jsx("div",{className:"mt-1 p-3 border rounded bg-muted/50",children:i.content})]}),i.status==="pending"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(q,{htmlFor:`feedback-${i.id}`,children:"Feedback (Optional)"}),o.jsx(Sa,{id:`feedback-${i.id}`,placeholder:"Provide feedback for the user...",rows:3}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{onClick:()=>n(i.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),o.jsx(Q,{variant:"outline",onClick:()=>r(i.id),children:"Request Changes"}),o.jsx(Q,{variant:"destructive",onClick:()=>r(i.id),children:"Reject"})]})]}),i.status!=="pending"&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Write-up has been ",i.status,". ",i.rating>0&&`Rating: ${i.rating}/5`]})]},i.id)),e.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No write-ups to review at this time."})]})})]})},cz=({onBack:t})=>{const e={totalUsers:150,activeUsers:47,totalChallenges:25,solvedChallenges:189,averageSolveTime:"2h 15m",popularCategory:"Web Security"},n=[{title:"Total Users",value:e.totalUsers,description:"Registered users",icon:nn,color:"text-blue-600"},{title:"Active Users (30d)",value:e.activeUsers,description:"Recently active users",icon:nn,color:"text-green-600"},{title:"Total Challenges",value:e.totalChallenges,description:"Available challenges",icon:Ye,color:"text-purple-600"},{title:"Challenge Solves",value:e.solvedChallenges,description:"Total solutions submitted",icon:Jn,color:"text-orange-600"},{title:"Avg Solve Time",value:e.averageSolveTime,description:"Average time to solve challenges",icon:Na,color:"text-red-600"},{title:"Popular Category",value:e.popularCategory,description:"Most solved category",icon:jC,color:"text-indigo-600"}];return o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Platform Analytics"}),o.jsx(Ht,{children:"Comprehensive overview of platform performance and user engagement"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:n.map((r,s)=>o.jsx(se,{children:o.jsx(ie,{className:"pt-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r.title}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),o.jsx("div",{className:`p-3 rounded-full bg-muted ${r.color}`,children:o.jsx(r.icon,{className:"w-6 h-6"})})]})})},s))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{className:"text-lg",children:"User Growth"}),o.jsx(Ht,{children:"Last 30 days"})]}),o.jsx(ie,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"User growth chart will be displayed here"})})]}),o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{className:"text-lg",children:"Challenge Performance"}),o.jsx(Ht,{children:"Solve rates by category"})]}),o.jsx(ie,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Challenge performance chart will be displayed here"})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(Q,{variant:"outline",onClick:t,children:"Back to Dashboard"}),o.jsx(Q,{children:"Export Analytics"})]})]})]})},uz=({onBack:t})=>{const[e,n]=g.useState({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1}),[r,s]=g.useState(!1),i=async()=>{s(!0),setTimeout(()=>{alert("Settings saved successfully!"),s(!1)},1e3)},a=()=>{confirm("Are you sure you want to reset all settings to default?")&&n({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1})},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"General Settings"}),o.jsx(Ht,{children:"Basic platform configuration"})]}),o.jsxs(ie,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"siteName",children:"Site Name"}),o.jsx(he,{id:"siteName",value:e.siteName,onChange:c=>l("siteName",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"siteDescription",children:"Site Description"}),o.jsx(Sa,{id:"siteDescription",value:e.siteDescription,onChange:c=>l("siteDescription",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"contactEmail",children:"Contact Email"}),o.jsx(he,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:c=>l("contactEmail",c.target.value)})]})]})]}),o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Security Settings"}),o.jsx(Ht,{children:"Authentication and security configuration"})]}),o.jsxs(ie,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"requireEmailVerification",children:"Require Email Verification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must verify their email address before accessing the platform"})]}),o.jsx(Rt,{id:"requireEmailVerification",checked:e.requireEmailVerification,onCheckedChange:c=>l("requireEmailVerification",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"allowRegistrations",children:"Allow New Registrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register on the platform"})]}),o.jsx(Rt,{id:"allowRegistrations",checked:e.allowRegistrations,onCheckedChange:c=>l("allowRegistrations",c)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),o.jsx(he,{id:"maxLoginAttempts",type:"number",value:e.maxLoginAttempts,onChange:c=>l("maxLoginAttempts",parseInt(c.target.value)),min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(q,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),o.jsx(he,{id:"sessionTimeout",type:"number",value:e.sessionTimeout,onChange:c=>l("sessionTimeout",parseInt(c.target.value)),min:"1",max:"720"})]})]})]})]}),o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Challenge Settings"}),o.jsx(Ht,{children:"Challenge and write-up configuration"})]}),o.jsxs(ie,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"defaultPoints",children:"Default Points for New Challenges"}),o.jsx(he,{id:"defaultPoints",type:"number",value:e.defaultPoints,onChange:c=>l("defaultPoints",parseInt(c.target.value)),min:"1"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"allowWriteups",children:"Allow Write-ups"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users can submit write-ups for challenges"})]}),o.jsx(Rt,{id:"allowWriteups",checked:e.allowWriteups,onCheckedChange:c=>l("allowWriteups",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"writeupRequired",children:"Write-ups Required"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must submit a write-up to get points"})]}),o.jsx(Rt,{id:"writeupRequired",checked:e.writeupRequired,onCheckedChange:c=>l("writeupRequired",c),disabled:!e.allowWriteups})]})]})]}),o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Maintenance Mode"}),o.jsx(Ht,{children:"Take the platform offline for maintenance"})]}),o.jsxs(ie,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(q,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform will be unavailable to regular users"})]}),o.jsx(Rt,{id:"maintenanceMode",checked:e.maintenanceMode,onCheckedChange:c=>l("maintenanceMode",c)})]}),e.maintenanceMode&&o.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-yellow-800",children:" Maintenance mode is enabled. Only administrators can access the platform."})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{onClick:i,disabled:r,children:r?"Saving...":"Save Settings"}),o.jsx(Q,{variant:"outline",onClick:a,children:"Reset to Defaults"}),o.jsx(Q,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]})},dz=()=>{const{isAdmin:t,isModerator:e}=Qh(),n=zn(),[r,s]=g.useState("overview"),[i,a]=g.useState(null);if(!t&&!e)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen",children:o.jsx("div",{className:"container px-4 mx-auto text-center",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(Ye,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have permission to access the admin dashboard."}),o.jsx(Q,{onClick:()=>n("/dashboard"),children:"Return to Dashboard"})]})})}),o.jsx(ht,{})]});const l=()=>{switch(r){case"users":return o.jsx(F9,{onBack:()=>s("overview")});case"challenge-management":return o.jsx(iz,{onBack:()=>s("overview"),onCreateNew:()=>s("create-challenge"),onEditChallenge:d=>{a(d),s("edit-challenge")}});case"create-challenge":return o.jsx(sz,{onBack:()=>s("challenge-management")});case"edit-challenge":return o.jsx(oz,{challengeId:i.id,onBack:()=>s("challenge-management"),onSave:()=>s("challenge-management")});case"schedule-event":return o.jsx(az,{onBack:()=>s("overview")});case"review-writeups":return o.jsx(lz,{onBack:()=>s("overview")});case"analytics":return o.jsx(cz,{onBack:()=>s("overview")});case"settings":return o.jsx(uz,{onBack:()=>s("overview")});default:return c()}},c=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(se,{children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(nn,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),o.jsxs(se,{children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium",children:"Active Challenges"}),o.jsx(Ye,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No challenges yet"})]})]}),o.jsxs(se,{children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium",children:"Live Events"}),o.jsx(ia,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No events yet"})]})]}),o.jsxs(se,{children:[o.jsxs(Se,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ce,{className:"text-sm font-medium",children:"Pending Write-ups"}),o.jsx(ac,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(ie,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No write-ups yet"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"Content Management"}),o.jsx(Ht,{children:"Create and manage platform content"})]}),o.jsxs(ie,{className:"space-y-4",children:[o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("create-challenge"),children:[o.jsx(ti,{className:"w-4 h-4"}),"Create New Challenge"]}),o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("challenge-management"),children:[o.jsx(ng,{className:"w-4 h-4"}),"Manage Challenges"]}),o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("schedule-event"),children:[o.jsx(ti,{className:"w-4 h-4"}),"Schedule New Event"]}),o.jsxs(Q,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("review-writeups"),children:[o.jsx(ac,{className:"w-4 h-4"}),"Review Write-ups"]})]})]}),o.jsxs(se,{children:[o.jsxs(Se,{children:[o.jsx(Ce,{children:"User Management"}),o.jsx(Ht,{children:"Manage users and permissions"})]}),o.jsxs(ie,{className:"space-y-4",children:[o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("users"),children:[o.jsx(nn,{className:"w-4 h-4"}),"View All Users"]}),t&&o.jsxs(Q,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("analytics"),children:[o.jsx(jC,{className:"w-4 h-4"}),"Platform Analytics"]}),o.jsxs(Q,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("settings"),children:[o.jsx(DC,{className:"w-4 h-4"}),"System Settings"]})]})]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:r==="overview"?"Admin Dashboard":r==="users"?"User Management":r==="challenge-management"?"Challenge Management":r==="create-challenge"?"Create Challenge":r==="edit-challenge"?"Edit Challenge":r==="schedule-event"?"Schedule Event":r==="review-writeups"?"Review Write-ups":r==="analytics"?"Platform Analytics":r==="settings"?"System Settings":"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:r==="overview"?"Manage your CTF platform, users, challenges, and events":"Admin management panel"})]}),r!=="overview"&&o.jsx(Q,{variant:"outline",onClick:()=>{s(r==="create-challenge"||r==="edit-challenge"?"challenge-management":"overview")},children:r==="create-challenge"||r==="edit-challenge"?"Back to Challenges":"Back to Dashboard"})]}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${t?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t?"Administrator":"Moderator"})})]}),l()]})}),o.jsx(ht,{})]})},hz=()=>{var ae,J,le,O,W,re,F;const{challengeId:t}=ER(),e=zn(),{user:n}=Wn(),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(!1),[d,h]=g.useState(""),[f,p]=g.useState(null),[v,I]=g.useState([]),[_,S]=g.useState([]),[E,w]=g.useState("description");g.useEffect(()=>{t&&(C(),R())},[t]);const C=async()=>{try{a(!0),console.log(" Fetching challenge:",t);const V=await sa(Ge(ge,"challenges",t));if(V.exists()){const G={id:V.id,...V.data()};console.log(" Challenge found:",G),s(G),G.hints&&I(new Array(G.hints.length).fill(!1))}else console.log(" Challenge not found in Firestore"),p({type:"error",text:"Challenge not found"})}catch(V){console.error(" Error fetching challenge:",V),p({type:"error",text:"Failed to load challenge"})}finally{a(!1)}},R=async()=>{if(!(!n||!t))try{const V=Tr(St(ge,"submissions"),cn("challengeId","==",t),cn("userId","==",n.uid),qs("submittedAt","desc")),Z=(await Vn(V)).docs.map(me=>({id:me.id,...me.data()}));S(Z)}catch(V){console.error("Error fetching submissions:",V)}},L=async(V,G)=>{try{const Z=Tr(St(ge,"submissions"),cn("challengeId","==",G),cn("userId","==",V),cn("isCorrect","==",!0),cn("pointsAwarded",">",0));return!(await Vn(Z)).empty}catch(Z){return console.error("Error checking user solve status:",Z),!1}},A=async()=>{var V,G;if(!(!r||!n||!d.trim())){c(!0),p(null);try{let Z=!1;r.hasMultipleQuestions&&r.questions?Z=!!r.questions.find(tt=>tt.flag&&tt.flag.trim()===d.trim()):Z=((V=r.flag)==null?void 0:V.trim())===d.trim();const me=await L(n.uid,r.id);let ye=0;Z&&!me&&(ye=r.points||0);const oe={challengeId:r.id,challengeTitle:r.title,userId:n.uid,userName:n.displayName||n.email,flag:d,isCorrect:Z,submittedAt:new Date,pointsAwarded:ye};await XS(St(ge,"submissions"),oe),Z?((G=r.solvedBy)!=null&&G.includes(n.uid)||await hn(Ge(ge,"challenges",r.id),{solvedBy:Jm(n.uid)}),ye>0&&await hn(Ge(ge,"users",n.uid),{totalPoints:M6(ye),challengesSolved:Jm(r.id)}),p({type:"success",text:ye>0?`Congratulations! Flag is correct! +${ye} points awarded!`:"Congratulations! Flag is correct! (No additional points - already solved)"}),h(""),C(),R()):p({type:"error",text:"Incorrect flag. Please try again."})}catch(Z){console.error("Error submitting flag:",Z),p({type:"error",text:"Failed to submit flag. Please try again."})}finally{c(!1)}}},N=V=>{const G=[...v];G[V]=!G[V],I(G)},y=()=>{e("/practice")},T=V=>{navigator.clipboard.writeText(V)},b=(ae=r==null?void 0:r.solvedBy)==null?void 0:ae.includes((n==null?void 0:n.uid)||"");if(i)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading challenge..."})]})})}),o.jsx(ht,{})]});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx(se,{className:"max-w-md mx-auto border",children:o.jsxs(ie,{className:"p-6 text-center",children:[o.jsx(Ye,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("h2",{className:"text-lg font-bold mb-2",children:"Challenge Not Found"}),o.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"The challenge you're looking for doesn't exist or you don't have permission to view it."}),o.jsxs(Q,{onClick:y,variant:"terminal",size:"sm",children:[o.jsx(Q_,{className:"w-3 h-3 mr-1"}),"Back to Practice"]})]})})})}),o.jsx(ht,{})]});const j=V=>{switch(V){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},k=V=>({web:"bg-blue-500/20 text-blue-600 border-blue-200",crypto:"bg-purple-500/20 text-purple-600 border-purple-200",forensics:"bg-orange-500/20 text-orange-600 border-orange-200",pwn:"bg-red-500/20 text-red-600 border-red-200",reversing:"bg-indigo-500/20 text-indigo-600 border-indigo-200",misc:"bg-gray-500/20 text-gray-600 border-gray-200"})[V]||"bg-gray-500/20 text-gray-600 border-gray-200",P=()=>{if(!r.description)return null;const V=r.description.split(`
`),G=[];for(let Z=0;Z<V.length;Z++){const me=V[Z].trim();if(me.startsWith("n =")||me.startsWith("e =")||me.startsWith("c =")){const[ye,...oe]=me.split("="),we=oe.join("=").trim();G.push(o.jsxs("div",{className:"mb-3 p-3 bg-muted/30 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"font-mono font-semibold text-xs",children:[ye,"="]}),o.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>T(we),className:"h-6 px-2",children:o.jsx(X_,{className:"w-3 h-3"})})]}),o.jsx("div",{className:"font-mono text-xs bg-background p-2 rounded border break-all",children:we})]},Z))}else if(me.includes("=")&&me.length>50){const[ye,...oe]=me.split("="),we=oe.join("=").trim();G.push(o.jsxs("div",{className:"mb-2",children:[o.jsxs("strong",{className:"text-sm",children:[ye,"="]}),o.jsx("div",{className:"font-mono text-xs bg-muted/30 p-2 rounded border break-all mt-1",children:we})]},Z))}else me?G.push(o.jsx("p",{className:"mb-2 text-sm leading-relaxed",children:me},Z)):G.push(o.jsx("div",{className:"mb-2"},Z))}return G},H=_.some(V=>V.isCorrect&&V.pointsAwarded&&V.pointsAwarded>0);return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(Q,{variant:"ghost",onClick:y,size:"sm",className:"-ml-3",children:[o.jsx(Q_,{className:"w-3 h-3 mr-1"}),"Back to Practice"]}),o.jsx("h1",{className:"text-xl font-bold",children:r.title})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[b&&o.jsxs(Fe,{className:"bg-green-500/20 text-green-600 border-green-200",children:[o.jsx(Br,{className:"w-3 h-3 mr-1"}),H?"Solved + Points":"Solved"]}),r.featuredOnPractice&&o.jsxs(Fe,{className:"bg-yellow-500/20 text-yellow-600 border-yellow-200",children:[o.jsx(Tv,{className:"w-3 h-3 mr-1"}),"Featured"]})]})]}),o.jsx(se,{className:"mb-4 border",children:o.jsx(ie,{className:"p-3",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[o.jsx(Fe,{className:j(r.difficulty),children:r.difficulty}),o.jsx(Fe,{className:k(r.finalCategory||r.category),children:r.finalCategory||r.category}),o.jsxs(Fe,{variant:"outline",className:"font-mono font-semibold",children:[r.totalPoints||r.points," pts"]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(nn,{className:"w-3 h-3"}),o.jsxs("span",{children:[((J=r.solvedBy)==null?void 0:J.length)||0," solves"]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Na,{className:"w-3 h-3"}),o.jsx("span",{children:((W=(O=(le=r.createdAt)==null?void 0:le.toDate)==null?void 0:O.call(le))==null?void 0:W.toLocaleDateString())||new Date(r.createdAt).toLocaleDateString()})]}),o.jsxs("div",{className:"text-muted-foreground",children:["By: ",r.createdByName||"Unknown"]}),r.originalCreator&&o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx("span",{children:"Original: "}),r.originalCreator.url?o.jsxs("a",{href:r.originalCreator.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:[r.originalCreator.name,o.jsx(qd,{className:"w-3 h-3"})]}):o.jsx("span",{children:r.originalCreator.name})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.jsxs(gI,{value:E,onValueChange:w,className:"w-full",children:[o.jsxs(Av,{className:"grid w-full grid-cols-3",children:[o.jsx(hr,{value:"description",className:"text-xs",children:"Description"}),o.jsxs(hr,{value:"hints",className:"text-xs",children:["Hints (",((re=r.hints)==null?void 0:re.length)||0,")"]}),o.jsxs(hr,{value:"files",className:"text-xs",children:["Files & Links (",((F=r.files)==null?void 0:F.length)||0,")"]})]}),o.jsx(Al,{value:"description",className:"space-y-3 mt-3",children:o.jsx(se,{className:"border",children:o.jsx(ie,{className:"p-4",children:o.jsx("div",{className:"space-y-3",children:r.hasMultipleQuestions&&r.questions?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),r.questions.map((V,G)=>{var Z;return o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("h4",{className:"font-semibold text-sm mb-1",children:["Question ",G+1]}),o.jsx("p",{className:"mb-2 text-xs text-muted-foreground",children:V.question}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"font-mono font-semibold",children:[V.points," points"]}),((Z=r.solvedBy)==null?void 0:Z.includes((n==null?void 0:n.uid)||""))&&o.jsxs(Fe,{variant:"outline",className:"font-mono text-xs",children:["Flag: ",V.flag]})]})]},V.id)})]}):o.jsxs("div",{className:"space-y-3",children:[P(),r.flagFormat&&o.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-200 rounded text-xs",children:o.jsxs("p",{className:"text-blue-600",children:[o.jsx("strong",{children:"Flag Format:"})," ",r.flagFormat]})}),b&&r.flag&&o.jsx("div",{className:"p-3 bg-green-500/10 border border-green-200 rounded",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-xs text-green-600 font-mono break-all",children:[o.jsx("strong",{children:"Flag:"})," ",r.flag]}),o.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>T(r.flag),className:"h-6 px-2",children:o.jsx(X_,{className:"w-3 h-3"})})]})})]})})})})}),o.jsx(Al,{value:"hints",className:"mt-3",children:o.jsx(se,{className:"border",children:o.jsx(ie,{className:"p-4",children:r.hints&&r.hints.length>0?o.jsx("div",{className:"space-y-2",children:r.hints.map((V,G)=>o.jsx(se,{className:"border",children:o.jsxs(ie,{className:"p-3",children:[o.jsxs(Q,{variant:"ghost",onClick:()=>N(G),className:"w-full justify-between p-0 h-auto hover:bg-transparent",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(oU,{className:"w-3 h-3"}),o.jsxs("span",{className:"text-sm",children:["Hint ",G+1]})]}),o.jsx("div",{className:`transform transition-transform ${v[G]?"rotate-180":""}`,children:""})]}),v[G]&&o.jsx("p",{className:"mt-2 text-xs text-muted-foreground pl-5",children:V})]})},G))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No hints available."})})})})}),o.jsx(Al,{value:"files",className:"mt-3",children:o.jsx(se,{className:"border",children:o.jsx(ie,{className:"p-4",children:r.files&&r.files.length>0?o.jsx("div",{className:"space-y-2",children:r.files.map((V,G)=>o.jsxs("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 text-sm border rounded hover:bg-accent transition-colors",children:[V.type==="file"?o.jsx(ac,{className:"w-3 h-3"}):o.jsx(aa,{className:"w-3 h-3"}),o.jsx("span",{className:"flex-1 truncate",children:V.name}),o.jsx(qd,{className:"w-3 h-3"})]},G))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files or links available."})})})})})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(se,{className:"border sticky top-4",children:[o.jsx(Se,{className:"p-4 pb-2",children:o.jsxs(Ce,{className:"flex items-center gap-2 text-base",children:[o.jsx(kC,{className:"w-4 h-4"}),"Submit Flag"]})}),o.jsxs(ie,{className:"p-4 pt-2 space-y-3",children:[f&&o.jsxs(kv,{className:`text-sm ${f.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200"}`,children:[f.type==="success"?o.jsx(Br,{className:"w-4 h-4 text-green-600"}):o.jsx(oa,{className:"w-4 h-4 text-red-600"}),o.jsx(Rv,{className:f.type==="success"?"text-green-600":"text-red-600",children:f.text})]}),b?o.jsxs("div",{className:"text-center p-3 bg-green-500/10 border border-green-200 rounded",children:[o.jsx(Br,{className:"w-8 h-8 text-green-600 mx-auto mb-1"}),o.jsx("p",{className:"text-green-600 font-semibold text-sm",children:"Challenge Solved!"}),o.jsx("p",{className:"text-green-600 text-xs mt-1",children:H?`+${r.totalPoints||r.points} points awarded`:"Already solved - no additional points"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(q,{htmlFor:"flag",className:"text-xs font-medium",children:"Enter Flag"}),o.jsx(he,{id:"flag",placeholder:"CTF{...} or flag content",value:d,onChange:V=>h(V.target.value),onKeyPress:V=>V.key==="Enter"&&A(),className:"font-mono text-sm h-9"})]}),o.jsx(Q,{onClick:A,disabled:l||!d.trim(),className:"w-full h-9",variant:"terminal",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-2"}),"Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Ye,{className:"w-3 h-3 mr-1"}),"Submit Flag"]})})]})]})]}),_.length>0&&o.jsxs(se,{className:"border",children:[o.jsx(Se,{className:"p-4 pb-2",children:o.jsx(Ce,{className:"text-base",children:"Submission History"})}),o.jsx(ie,{className:"p-4 pt-2",children:o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:_.map(V=>{var G,Z,me;return o.jsxs("div",{className:"flex items-center justify-between p-2 border rounded text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[V.isCorrect?o.jsx(Br,{className:"w-3 h-3 text-green-600 flex-shrink-0"}):o.jsx(oa,{className:"w-3 h-3 text-red-600 flex-shrink-0"}),o.jsx("code",{className:"truncate font-mono",children:V.flag}),V.pointsAwarded&&V.pointsAwarded>0&&o.jsxs(Fe,{variant:"outline",className:"ml-1 text-xs bg-green-500/10 text-green-600",children:["+",V.pointsAwarded]})]}),o.jsx("span",{className:"text-muted-foreground flex-shrink-0 ml-1 text-xs",children:((me=(Z=(G=V.submittedAt)==null?void 0:G.toDate)==null?void 0:Z.call(G))==null?void 0:me.toLocaleTimeString())||new Date(V.submittedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},V.id)})})})]})]})]})]})}),o.jsx(ht,{})]})};function fz(){return o.jsx(yC,{children:o.jsx(e5,{children:o.jsx(t5,{children:o.jsx(qR,{children:o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(dt,{}),o.jsx("main",{className:"flex-1",children:o.jsxs(FR,{children:[o.jsx(on,{path:"/",element:o.jsx(wU,{})}),o.jsx(on,{path:"/login",element:o.jsx(_U,{})}),o.jsx(on,{path:"/signup",element:o.jsx(bU,{})}),o.jsx(on,{path:"/auth/github/callback",element:o.jsx(TU,{})}),o.jsx(on,{path:"/dashboard",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(jU,{})})})}),o.jsx(on,{path:"/practice",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(kU,{})})})}),o.jsx(on,{path:"/live",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(RU,{})})})}),o.jsx(on,{path:"/leaderboard",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(JU,{})})})}),o.jsx(on,{path:"/writeups",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(EU,{})})})}),o.jsx(on,{path:"/writeups/create",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(NU,{})})})}),o.jsx(on,{path:"/challenge/:challengeId",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(hz,{})})})}),o.jsx(on,{path:"/admin",element:o.jsx(ps,{children:o.jsx(n5,{children:o.jsx(dz,{})})})}),o.jsx(on,{path:"*",element:o.jsx(SU,{})})]})}),o.jsx(ht,{})," "]})})})})})}WE(document.getElementById("root")).render(o.jsx(yC,{children:o.jsx(fz,{})}));
