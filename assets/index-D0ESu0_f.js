function Y2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Kb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qb={exports:{}},rh={},Yb={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fc=Symbol.for("react.element"),X2=Symbol.for("react.portal"),J2=Symbol.for("react.fragment"),Z2=Symbol.for("react.strict_mode"),eA=Symbol.for("react.profiler"),tA=Symbol.for("react.provider"),nA=Symbol.for("react.context"),rA=Symbol.for("react.forward_ref"),sA=Symbol.for("react.suspense"),iA=Symbol.for("react.memo"),oA=Symbol.for("react.lazy"),Jv=Symbol.iterator;function aA(t){return t===null||typeof t!="object"?null:(t=Jv&&t[Jv]||t["@@iterator"],typeof t=="function"?t:null)}var Xb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jb=Object.assign,Zb={};function ga(t,e,n){this.props=t,this.context=e,this.refs=Zb,this.updater=n||Xb}ga.prototype.isReactComponent={};ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e1(){}e1.prototype=ga.prototype;function Cg(t,e,n){this.props=t,this.context=e,this.refs=Zb,this.updater=n||Xb}var jg=Cg.prototype=new e1;jg.constructor=Cg;Jb(jg,ga.prototype);jg.isPureReactComponent=!0;var Zv=Array.isArray,t1=Object.prototype.hasOwnProperty,Ig={current:null},n1={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)t1.call(e,r)&&!n1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:fc,type:t,key:i,ref:a,props:s,_owner:Ig.current}}function lA(t,e){return{$$typeof:fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ag(t){return typeof t=="object"&&t!==null&&t.$$typeof===fc}function cA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ew=/\/+/g;function Rf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cA(""+t.key):e.toString(36)}function Su(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case fc:case X2:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Rf(a,0):r,Zv(s)?(n="",t!=null&&(n=t.replace(ew,"$&/")+"/"),Su(s,e,n,"",function(d){return d})):s!=null&&(Ag(s)&&(s=lA(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(ew,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Zv(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Rf(i,l);a+=Su(i,e,n,c,s)}else if(c=aA(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Rf(i,l++),a+=Su(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Qc(t,e,n){if(t==null)return t;var r=[],s=0;return Su(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},Cu={transition:null},dA={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Cu,ReactCurrentOwner:Ig};function s1(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!Ag(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=ga;be.Fragment=J2;be.Profiler=eA;be.PureComponent=Cg;be.StrictMode=Z2;be.Suspense=sA;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dA;be.act=s1;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jb({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ig.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)t1.call(e,c)&&!n1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:fc,type:t.type,key:s,ref:i,props:r,_owner:a}};be.createContext=function(t){return t={$$typeof:nA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tA,_context:t},t.Consumer=t};be.createElement=r1;be.createFactory=function(t){var e=r1.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:rA,render:t}};be.isValidElement=Ag;be.lazy=function(t){return{$$typeof:oA,_payload:{_status:-1,_result:t},_init:uA}};be.memo=function(t,e){return{$$typeof:iA,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Cu.transition;Cu.transition={};try{t()}finally{Cu.transition=e}};be.unstable_act=s1;be.useCallback=function(t,e){return sn.current.useCallback(t,e)};be.useContext=function(t){return sn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};be.useEffect=function(t,e){return sn.current.useEffect(t,e)};be.useId=function(){return sn.current.useId()};be.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return sn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};be.useRef=function(t){return sn.current.useRef(t)};be.useState=function(t){return sn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return sn.current.useTransition()};be.version="18.3.1";Yb.exports=be;var g=Yb.exports;const gs=Kb(g),sh=Y2({__proto__:null,default:gs},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA=g,fA=Symbol.for("react.element"),mA=Symbol.for("react.fragment"),pA=Object.prototype.hasOwnProperty,gA=hA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yA={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)pA.call(e,r)&&!yA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:fA,type:t,key:i,ref:a,props:s,_owner:gA.current}}rh.Fragment=mA;rh.jsx=i1;rh.jsxs=i1;Qb.exports=rh;var o=Qb.exports,o1={exports:{}},Pn={},a1={exports:{}},l1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,W){var Y=O.length;O.push(W);e:for(;0<Y;){var M=Y-1>>>1,G=O[M];if(0<s(G,W))O[M]=W,O[Y]=G,Y=M;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],Y=O.pop();if(Y!==W){O[0]=Y;e:for(var M=0,G=O.length,ce=G>>>1;M<ce;){var pe=2*(M+1)-1,Z=O[pe],ne=pe+1,X=O[ne];if(0>s(Z,Y))ne<G&&0>s(X,Z)?(O[M]=X,O[ne]=Y,M=ne):(O[M]=Z,O[pe]=Y,M=pe);else if(ne<G&&0>s(X,Y))O[M]=X,O[ne]=Y,M=ne;else break e}}return W}function s(O,W){var Y=O.sortIndex-W.sortIndex;return Y!==0?Y:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,_=!1,C=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=O)r(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(d)}}function D(O){if(v=!1,S(O),!C)if(n(c)!==null)C=!0,B(L);else{var W=n(d);W!==null&&$(D,W.startTime-O)}}function L(O,W){C=!1,v&&(v=!1,N(y),y=-1),_=!0;var Y=m;try{for(S(W),f=n(c);f!==null&&(!(f.expirationTime>W)||O&&!k());){var M=f.callback;if(typeof M=="function"){f.callback=null,m=f.priorityLevel;var G=M(f.expirationTime<=W);W=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(c)&&r(c),S(W)}else r(c);f=n(c)}if(f!==null)var ce=!0;else{var pe=n(d);pe!==null&&$(D,pe.startTime-W),ce=!1}return ce}finally{f=null,m=Y,_=!1}}var R=!1,T=null,y=-1,I=5,w=-1;function k(){return!(t.unstable_now()-w<I)}function j(){if(T!==null){var O=t.unstable_now();w=O;var W=!0;try{W=T(!0,O)}finally{W?A():(R=!1,T=null)}}else R=!1}var A;if(typeof b=="function")A=function(){b(j)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=j,A=function(){q.postMessage(null)}}else A=function(){x(j,0)};function B(O){T=O,R||(R=!0,A())}function $(O,W){y=x(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){C||_||(C=!0,B(L))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var Y=m;m=W;try{return O()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=m;m=O;try{return W()}finally{m=Y}},t.unstable_scheduleCallback=function(O,W,Y){var M=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?M+Y:M):Y=M,O){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Y+G,O={id:h++,callback:W,priorityLevel:O,startTime:Y,expirationTime:G,sortIndex:-1},Y>M?(O.sortIndex=Y,e(d,O),n(c)===null&&O===n(d)&&(v?(N(y),y=-1):v=!0,$(D,Y-M))):(O.sortIndex=G,e(c,O),C||_||(C=!0,B(L))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var W=m;return function(){var Y=m;m=W;try{return O.apply(this,arguments)}finally{m=Y}}}})(l1);a1.exports=l1;var xA=a1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA=g,Rn=xA;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c1=new Set,Dl={};function ro(t,e){Qo(t,e),Qo(t+"Capture",e)}function Qo(t,e){for(Dl[t]=e,t=0;t<e.length;t++)c1.add(e[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fm=Object.prototype.hasOwnProperty,wA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tw={},nw={};function _A(t){return Fm.call(nw,t)?!0:Fm.call(tw,t)?!1:wA.test(t)?nw[t]=!0:(tw[t]=!0,!1)}function bA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EA(t,e,n,r){if(e===null||typeof e>"u"||bA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var kg=/[\-:]([a-z])/g;function Rg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kg,Rg);Lt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kg,Rg);Lt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kg,Rg);Lt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pg(t,e,n,r){var s=Lt.hasOwnProperty(e)?Lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EA(e,n,s,r)&&(n=null),r||s===null?_A(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=vA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yc=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),Dg=Symbol.for("react.strict_mode"),Um=Symbol.for("react.profiler"),u1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),Lg=Symbol.for("react.forward_ref"),Bm=Symbol.for("react.suspense"),$m=Symbol.for("react.suspense_list"),Og=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),h1=Symbol.for("react.offscreen"),rw=Symbol.iterator;function Qa(t){return t===null||typeof t!="object"?null:(t=rw&&t[rw]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,Pf;function ol(t){if(Pf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pf=e&&e[1]||""}return`
`+Pf+t}var Df=!1;function Lf(t,e){if(!t||Df)return"";Df=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Df=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ol(t):""}function NA(t){switch(t.tag){case 5:return ol(t.type);case 16:return ol("Lazy");case 13:return ol("Suspense");case 19:return ol("SuspenseList");case 0:case 2:case 15:return t=Lf(t.type,!1),t;case 11:return t=Lf(t.type.render,!1),t;case 1:return t=Lf(t.type,!0),t;default:return""}}function zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Eo:return"Portal";case Um:return"Profiler";case Dg:return"StrictMode";case Bm:return"Suspense";case $m:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d1:return(t.displayName||"Context")+".Consumer";case u1:return(t._context.displayName||"Context")+".Provider";case Lg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Og:return e=t.displayName||null,e!==null?e:zm(t.type)||"Memo";case xs:e=t._payload,t=t._init;try{return zm(t(e))}catch{}}return null}function TA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(e);case 8:return e===Dg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SA(t){var e=f1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xc(t){t._valueTracker||(t._valueTracker=SA(t))}function m1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=f1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ed(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hm(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function p1(t,e){e=e.checked,e!=null&&Pg(t,"checked",e,!1)}function Wm(t,e){p1(t,e);var n=Ws(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qm(t,e.type,n):e.hasOwnProperty("defaultValue")&&qm(t,e.type,Ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function qm(t,e,n){(e!=="number"||ed(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var al=Array.isArray;function Lo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ws(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ow(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(al(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ws(n)}}function g1(t,e){var n=Ws(e.value),r=Ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function aw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Km(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jc,x1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ll(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CA=["Webkit","ms","Moz","O"];Object.keys(yl).forEach(function(t){CA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yl[e]=yl[t]})});function v1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yl.hasOwnProperty(t)&&yl[t]?(""+e).trim():e+"px"}function w1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=v1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var jA=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qm(t,e){if(e){if(jA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Ym(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xm=null;function Mg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jm=null,Oo=null,Mo=null;function lw(t){if(t=gc(t)){if(typeof Jm!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=ch(e),Jm(t.stateNode,t.type,e))}}function _1(t){Oo?Mo?Mo.push(t):Mo=[t]:Oo=t}function b1(){if(Oo){var t=Oo,e=Mo;if(Mo=Oo=null,lw(t),e)for(t=0;t<e.length;t++)lw(e[t])}}function E1(t,e){return t(e)}function N1(){}var Of=!1;function T1(t,e,n){if(Of)return t(e,n);Of=!0;try{return E1(t,e,n)}finally{Of=!1,(Oo!==null||Mo!==null)&&(N1(),b1())}}function Ol(t,e){var n=t.stateNode;if(n===null)return null;var r=ch(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Zm=!1;if(Hr)try{var Ya={};Object.defineProperty(Ya,"passive",{get:function(){Zm=!0}}),window.addEventListener("test",Ya,Ya),window.removeEventListener("test",Ya,Ya)}catch{Zm=!1}function IA(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var xl=!1,td=null,nd=!1,ep=null,AA={onError:function(t){xl=!0,td=t}};function kA(t,e,n,r,s,i,a,l,c){xl=!1,td=null,IA.apply(AA,arguments)}function RA(t,e,n,r,s,i,a,l,c){if(kA.apply(this,arguments),xl){if(xl){var d=td;xl=!1,td=null}else throw Error(Q(198));nd||(nd=!0,ep=d)}}function so(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cw(t){if(so(t)!==t)throw Error(Q(188))}function PA(t){var e=t.alternate;if(!e){if(e=so(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cw(s),t;if(i===r)return cw(s),e;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function C1(t){return t=PA(t),t!==null?j1(t):null}function j1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=j1(t);if(e!==null)return e;t=t.sibling}return null}var I1=Rn.unstable_scheduleCallback,uw=Rn.unstable_cancelCallback,DA=Rn.unstable_shouldYield,LA=Rn.unstable_requestPaint,ht=Rn.unstable_now,OA=Rn.unstable_getCurrentPriorityLevel,Vg=Rn.unstable_ImmediatePriority,A1=Rn.unstable_UserBlockingPriority,rd=Rn.unstable_NormalPriority,MA=Rn.unstable_LowPriority,k1=Rn.unstable_IdlePriority,ih=null,xr=null;function VA(t){if(xr&&typeof xr.onCommitFiberRoot=="function")try{xr.onCommitFiberRoot(ih,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:BA,FA=Math.log,UA=Math.LN2;function BA(t){return t>>>=0,t===0?32:31-(FA(t)/UA|0)|0}var Zc=64,eu=4194304;function ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ll(l):(i&=a,i!==0&&(r=ll(i)))}else a=n&~s,a!==0?r=ll(a):i!==0&&(r=ll(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),s=1<<n,r|=t[n],e&=~s;return r}function $A(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-tr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=$A(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function tp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R1(){var t=Zc;return Zc<<=1,!(Zc&4194240)&&(Zc=64),t}function Mf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function HA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Fg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Fe=0;function P1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D1,Ug,L1,O1,M1,np=!1,tu=[],Rs=null,Ps=null,Ds=null,Ml=new Map,Vl=new Map,ws=[],WA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dw(t,e){switch(t){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":Ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vl.delete(e.pointerId)}}function Xa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=gc(e),e!==null&&Ug(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function qA(t,e,n,r,s){switch(e){case"focusin":return Rs=Xa(Rs,t,e,n,r,s),!0;case"dragenter":return Ps=Xa(Ps,t,e,n,r,s),!0;case"mouseover":return Ds=Xa(Ds,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ml.set(i,Xa(Ml.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vl.set(i,Xa(Vl.get(i)||null,t,e,n,r,s)),!0}return!1}function V1(t){var e=ji(t.target);if(e!==null){var n=so(e);if(n!==null){if(e=n.tag,e===13){if(e=S1(n),e!==null){t.blockedOn=e,M1(t.priority,function(){L1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xm=r,n.target.dispatchEvent(r),Xm=null}else return e=gc(n),e!==null&&Ug(e),t.blockedOn=n,!1;e.shift()}return!0}function hw(t,e,n){ju(t)&&n.delete(e)}function GA(){np=!1,Rs!==null&&ju(Rs)&&(Rs=null),Ps!==null&&ju(Ps)&&(Ps=null),Ds!==null&&ju(Ds)&&(Ds=null),Ml.forEach(hw),Vl.forEach(hw)}function Ja(t,e){t.blockedOn===e&&(t.blockedOn=null,np||(np=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,GA)))}function Fl(t){function e(s){return Ja(s,t)}if(0<tu.length){Ja(tu[0],t);for(var n=1;n<tu.length;n++){var r=tu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rs!==null&&Ja(Rs,t),Ps!==null&&Ja(Ps,t),Ds!==null&&Ja(Ds,t),Ml.forEach(e),Vl.forEach(e),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)V1(n),n.blockedOn===null&&ws.shift()}var Vo=ns.ReactCurrentBatchConfig,id=!0;function KA(t,e,n,r){var s=Fe,i=Vo.transition;Vo.transition=null;try{Fe=1,Bg(t,e,n,r)}finally{Fe=s,Vo.transition=i}}function QA(t,e,n,r){var s=Fe,i=Vo.transition;Vo.transition=null;try{Fe=4,Bg(t,e,n,r)}finally{Fe=s,Vo.transition=i}}function Bg(t,e,n,r){if(id){var s=rp(t,e,n,r);if(s===null)Gf(t,e,r,od,n),dw(t,r);else if(qA(s,t,e,n,r))r.stopPropagation();else if(dw(t,r),e&4&&-1<WA.indexOf(t)){for(;s!==null;){var i=gc(s);if(i!==null&&D1(i),i=rp(t,e,n,r),i===null&&Gf(t,e,r,od,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Gf(t,e,r,null,n)}}var od=null;function rp(t,e,n,r){if(od=null,t=Mg(r),t=ji(t),t!==null)if(e=so(t),e===null)t=null;else if(n=e.tag,n===13){if(t=S1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return od=t,null}function F1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OA()){case Vg:return 1;case A1:return 4;case rd:case MA:return 16;case k1:return 536870912;default:return 16}default:return 16}}var Cs=null,$g=null,Iu=null;function U1(){if(Iu)return Iu;var t,e=$g,n=e.length,r,s="value"in Cs?Cs.value:Cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Iu=s.slice(t,1<r?1-r:void 0)}function Au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function fw(){return!1}function Dn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?nu:fw,this.isPropagationStopped=fw,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zg=Dn(ya),pc=nt({},ya,{view:0,detail:0}),YA=Dn(pc),Vf,Ff,Za,oh=nt({},pc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(Vf=t.screenX-Za.screenX,Ff=t.screenY-Za.screenY):Ff=Vf=0,Za=t),Vf)},movementY:function(t){return"movementY"in t?t.movementY:Ff}}),mw=Dn(oh),XA=nt({},oh,{dataTransfer:0}),JA=Dn(XA),ZA=nt({},pc,{relatedTarget:0}),Uf=Dn(ZA),ek=nt({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),tk=Dn(ek),nk=nt({},ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rk=Dn(nk),sk=nt({},ya,{data:0}),pw=Dn(sk),ik={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ok={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ak={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ak[t])?!!e[t]:!1}function Hg(){return lk}var ck=nt({},pc,{key:function(t){if(t.key){var e=ik[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ok[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(t){return t.type==="keypress"?Au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uk=Dn(ck),dk=nt({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gw=Dn(dk),hk=nt({},pc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),fk=Dn(hk),mk=nt({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),pk=Dn(mk),gk=nt({},oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yk=Dn(gk),xk=[9,13,27,32],Wg=Hr&&"CompositionEvent"in window,vl=null;Hr&&"documentMode"in document&&(vl=document.documentMode);var vk=Hr&&"TextEvent"in window&&!vl,B1=Hr&&(!Wg||vl&&8<vl&&11>=vl),yw=" ",xw=!1;function $1(t,e){switch(t){case"keyup":return xk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var To=!1;function wk(t,e){switch(t){case"compositionend":return z1(e);case"keypress":return e.which!==32?null:(xw=!0,yw);case"textInput":return t=e.data,t===yw&&xw?null:t;default:return null}}function _k(t,e){if(To)return t==="compositionend"||!Wg&&$1(t,e)?(t=U1(),Iu=$g=Cs=null,To=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B1&&e.locale!=="ko"?null:e.data;default:return null}}var bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bk[t.type]:e==="textarea"}function H1(t,e,n,r){_1(r),e=ad(e,"onChange"),0<e.length&&(n=new zg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wl=null,Ul=null;function Ek(t){tE(t,0)}function ah(t){var e=jo(t);if(m1(e))return t}function Nk(t,e){if(t==="change")return e}var W1=!1;if(Hr){var Bf;if(Hr){var $f="oninput"in document;if(!$f){var ww=document.createElement("div");ww.setAttribute("oninput","return;"),$f=typeof ww.oninput=="function"}Bf=$f}else Bf=!1;W1=Bf&&(!document.documentMode||9<document.documentMode)}function _w(){wl&&(wl.detachEvent("onpropertychange",q1),Ul=wl=null)}function q1(t){if(t.propertyName==="value"&&ah(Ul)){var e=[];H1(e,Ul,t,Mg(t)),T1(Ek,e)}}function Tk(t,e,n){t==="focusin"?(_w(),wl=e,Ul=n,wl.attachEvent("onpropertychange",q1)):t==="focusout"&&_w()}function Sk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ah(Ul)}function Ck(t,e){if(t==="click")return ah(e)}function jk(t,e){if(t==="input"||t==="change")return ah(e)}function Ik(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sr=typeof Object.is=="function"?Object.is:Ik;function Bl(t,e){if(sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Fm.call(e,s)||!sr(t[s],e[s]))return!1}return!0}function bw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ew(t,e){var n=bw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bw(n)}}function G1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K1(){for(var t=window,e=ed();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ed(t.document)}return e}function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ak(t){var e=K1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&G1(n.ownerDocument.documentElement,n)){if(r!==null&&qg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ew(n,i);var a=Ew(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kk=Hr&&"documentMode"in document&&11>=document.documentMode,So=null,sp=null,_l=null,ip=!1;function Nw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ip||So==null||So!==ed(r)||(r=So,"selectionStart"in r&&qg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_l&&Bl(_l,r)||(_l=r,r=ad(sp,"onSelect"),0<r.length&&(e=new zg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=So)))}function ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Co={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},zf={},Q1={};Hr&&(Q1=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function lh(t){if(zf[t])return zf[t];if(!Co[t])return t;var e=Co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Q1)return zf[t]=e[n];return t}var Y1=lh("animationend"),X1=lh("animationiteration"),J1=lh("animationstart"),Z1=lh("transitionend"),eE=new Map,Tw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){eE.set(t,e),ro(e,[t])}for(var Hf=0;Hf<Tw.length;Hf++){var Wf=Tw[Hf],Rk=Wf.toLowerCase(),Pk=Wf[0].toUpperCase()+Wf.slice(1);si(Rk,"on"+Pk)}si(Y1,"onAnimationEnd");si(X1,"onAnimationIteration");si(J1,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(Z1,"onTransitionEnd");Qo("onMouseEnter",["mouseout","mouseover"]);Qo("onMouseLeave",["mouseout","mouseover"]);Qo("onPointerEnter",["pointerout","pointerover"]);Qo("onPointerLeave",["pointerout","pointerover"]);ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dk=new Set("cancel close invalid load scroll toggle".split(" ").concat(cl));function Sw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RA(r,e,void 0,t),t.currentTarget=null}function tE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Sw(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Sw(s,l,d),i=c}}}if(nd)throw t=ep,nd=!1,ep=null,t}function Ge(t,e){var n=e[up];n===void 0&&(n=e[up]=new Set);var r=t+"__bubble";n.has(r)||(nE(e,t,2,!1),n.add(r))}function qf(t,e,n){var r=0;e&&(r|=4),nE(n,t,r,e)}var su="_reactListening"+Math.random().toString(36).slice(2);function $l(t){if(!t[su]){t[su]=!0,c1.forEach(function(n){n!=="selectionchange"&&(Dk.has(n)||qf(n,!1,t),qf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[su]||(e[su]=!0,qf("selectionchange",!1,e))}}function nE(t,e,n,r){switch(F1(e)){case 1:var s=KA;break;case 4:s=QA;break;default:s=Bg}n=s.bind(null,e,n,t),s=void 0,!Zm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Gf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ji(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}T1(function(){var d=i,h=Mg(n),f=[];e:{var m=eE.get(t);if(m!==void 0){var _=zg,C=t;switch(t){case"keypress":if(Au(n)===0)break e;case"keydown":case"keyup":_=uk;break;case"focusin":C="focus",_=Uf;break;case"focusout":C="blur",_=Uf;break;case"beforeblur":case"afterblur":_=Uf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=mw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=JA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=fk;break;case Y1:case X1:case J1:_=tk;break;case Z1:_=pk;break;case"scroll":_=YA;break;case"wheel":_=yk;break;case"copy":case"cut":case"paste":_=rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=gw}var v=(e&4)!==0,x=!v&&t==="scroll",N=v?m!==null?m+"Capture":null:m;v=[];for(var b=d,S;b!==null;){S=b;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,N!==null&&(D=Ol(b,N),D!=null&&v.push(zl(b,D,S)))),x)break;b=b.return}0<v.length&&(m=new _(m,C,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==Xm&&(C=n.relatedTarget||n.fromElement)&&(ji(C)||C[Wr]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=d,C=C?ji(C):null,C!==null&&(x=so(C),C!==x||C.tag!==5&&C.tag!==6)&&(C=null)):(_=null,C=d),_!==C)){if(v=mw,D="onMouseLeave",N="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=gw,D="onPointerLeave",N="onPointerEnter",b="pointer"),x=_==null?m:jo(_),S=C==null?m:jo(C),m=new v(D,b+"leave",_,n,h),m.target=x,m.relatedTarget=S,D=null,ji(h)===d&&(v=new v(N,b+"enter",C,n,h),v.target=S,v.relatedTarget=x,D=v),x=D,_&&C)t:{for(v=_,N=C,b=0,S=v;S;S=po(S))b++;for(S=0,D=N;D;D=po(D))S++;for(;0<b-S;)v=po(v),b--;for(;0<S-b;)N=po(N),S--;for(;b--;){if(v===N||N!==null&&v===N.alternate)break t;v=po(v),N=po(N)}v=null}else v=null;_!==null&&Cw(f,m,_,v,!1),C!==null&&x!==null&&Cw(f,x,C,v,!0)}}e:{if(m=d?jo(d):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var L=Nk;else if(vw(m))if(W1)L=jk;else{L=Sk;var R=Tk}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=Ck);if(L&&(L=L(t,d))){H1(f,L,n,h);break e}R&&R(t,m,d),t==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&qm(m,"number",m.value)}switch(R=d?jo(d):window,t){case"focusin":(vw(R)||R.contentEditable==="true")&&(So=R,sp=d,_l=null);break;case"focusout":_l=sp=So=null;break;case"mousedown":ip=!0;break;case"contextmenu":case"mouseup":case"dragend":ip=!1,Nw(f,n,h);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":Nw(f,n,h)}var T;if(Wg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else To?$1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(B1&&n.locale!=="ko"&&(To||y!=="onCompositionStart"?y==="onCompositionEnd"&&To&&(T=U1()):(Cs=h,$g="value"in Cs?Cs.value:Cs.textContent,To=!0)),R=ad(d,y),0<R.length&&(y=new pw(y,t,null,n,h),f.push({event:y,listeners:R}),T?y.data=T:(T=z1(n),T!==null&&(y.data=T)))),(T=vk?wk(t,n):_k(t,n))&&(d=ad(d,"onBeforeInput"),0<d.length&&(h=new pw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=T))}tE(f,e)})}function zl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ad(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ol(t,n),i!=null&&r.unshift(zl(t,i,s)),i=Ol(t,e),i!=null&&r.push(zl(t,i,s))),t=t.return}return r}function po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cw(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ol(n,i),c!=null&&a.unshift(zl(n,c,l))):s||(c=Ol(n,i),c!=null&&a.push(zl(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Lk=/\r\n?/g,Ok=/\u0000|\uFFFD/g;function jw(t){return(typeof t=="string"?t:""+t).replace(Lk,`
`).replace(Ok,"")}function iu(t,e,n){if(e=jw(e),jw(t)!==e&&n)throw Error(Q(425))}function ld(){}var op=null,ap=null;function lp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cp=typeof setTimeout=="function"?setTimeout:void 0,Mk=typeof clearTimeout=="function"?clearTimeout:void 0,Iw=typeof Promise=="function"?Promise:void 0,Vk=typeof queueMicrotask=="function"?queueMicrotask:typeof Iw<"u"?function(t){return Iw.resolve(null).then(t).catch(Fk)}:cp;function Fk(t){setTimeout(function(){throw t})}function Kf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fl(e)}function Ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Aw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xa=Math.random().toString(36).slice(2),mr="__reactFiber$"+xa,Hl="__reactProps$"+xa,Wr="__reactContainer$"+xa,up="__reactEvents$"+xa,Uk="__reactListeners$"+xa,Bk="__reactHandles$"+xa;function ji(t){var e=t[mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Aw(t);t!==null;){if(n=t[mr])return n;t=Aw(t)}return e}t=n,n=t.parentNode}return null}function gc(t){return t=t[mr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function ch(t){return t[Hl]||null}var dp=[],Io=-1;function ii(t){return{current:t}}function Qe(t){0>Io||(t.current=dp[Io],dp[Io]=null,Io--)}function He(t,e){Io++,dp[Io]=t.current,t.current=e}var qs={},qt=ii(qs),fn=ii(!1),Fi=qs;function Yo(t,e){var n=t.type.contextTypes;if(!n)return qs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function cd(){Qe(fn),Qe(qt)}function kw(t,e,n){if(qt.current!==qs)throw Error(Q(168));He(qt,e),He(fn,n)}function rE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Q(108,TA(t)||"Unknown",s));return nt({},n,r)}function ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qs,Fi=qt.current,He(qt,t),He(fn,fn.current),!0}function Rw(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=rE(t,e,Fi),r.__reactInternalMemoizedMergedChildContext=t,Qe(fn),Qe(qt),He(qt,t)):Qe(fn),He(fn,n)}var Lr=null,uh=!1,Qf=!1;function sE(t){Lr===null?Lr=[t]:Lr.push(t)}function $k(t){uh=!0,sE(t)}function oi(){if(!Qf&&Lr!==null){Qf=!0;var t=0,e=Fe;try{var n=Lr;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Lr=null,uh=!1}catch(s){throw Lr!==null&&(Lr=Lr.slice(t+1)),I1(Vg,oi),s}finally{Fe=e,Qf=!1}}return null}var Ao=[],ko=0,dd=null,hd=0,On=[],Mn=0,Ui=null,Mr=1,Vr="";function Ni(t,e){Ao[ko++]=hd,Ao[ko++]=dd,dd=t,hd=e}function iE(t,e,n){On[Mn++]=Mr,On[Mn++]=Vr,On[Mn++]=Ui,Ui=t;var r=Mr;t=Vr;var s=32-tr(r)-1;r&=~(1<<s),n+=1;var i=32-tr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Mr=1<<32-tr(e)+s|n<<s|r,Vr=i+t}else Mr=1<<i|n<<s|r,Vr=t}function Gg(t){t.return!==null&&(Ni(t,1),iE(t,1,0))}function Kg(t){for(;t===dd;)dd=Ao[--ko],Ao[ko]=null,hd=Ao[--ko],Ao[ko]=null;for(;t===Ui;)Ui=On[--Mn],On[Mn]=null,Vr=On[--Mn],On[Mn]=null,Mr=On[--Mn],On[Mn]=null}var Sn=null,En=null,Ye=!1,Xn=null;function oE(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sn=t,En=Ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ui!==null?{id:Mr,overflow:Vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sn=t,En=null,!0):!1;default:return!1}}function hp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fp(t){if(Ye){var e=En;if(e){var n=e;if(!Pw(t,e)){if(hp(t))throw Error(Q(418));e=Ls(n.nextSibling);var r=Sn;e&&Pw(t,e)?oE(r,n):(t.flags=t.flags&-4097|2,Ye=!1,Sn=t)}}else{if(hp(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Ye=!1,Sn=t}}}function Dw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sn=t}function ou(t){if(t!==Sn)return!1;if(!Ye)return Dw(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lp(t.type,t.memoizedProps)),e&&(e=En)){if(hp(t))throw aE(),Error(Q(418));for(;e;)oE(t,e),e=Ls(e.nextSibling)}if(Dw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=Ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=Sn?Ls(t.stateNode.nextSibling):null;return!0}function aE(){for(var t=En;t;)t=Ls(t.nextSibling)}function Xo(){En=Sn=null,Ye=!1}function Qg(t){Xn===null?Xn=[t]:Xn.push(t)}var zk=ns.ReactCurrentBatchConfig;function el(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function au(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lw(t){var e=t._init;return e(t._payload)}function lE(t){function e(N,b){if(t){var S=N.deletions;S===null?(N.deletions=[b],N.flags|=16):S.push(b)}}function n(N,b){if(!t)return null;for(;b!==null;)e(N,b),b=b.sibling;return null}function r(N,b){for(N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function s(N,b){return N=Fs(N,b),N.index=0,N.sibling=null,N}function i(N,b,S){return N.index=S,t?(S=N.alternate,S!==null?(S=S.index,S<b?(N.flags|=2,b):S):(N.flags|=2,b)):(N.flags|=1048576,b)}function a(N){return t&&N.alternate===null&&(N.flags|=2),N}function l(N,b,S,D){return b===null||b.tag!==6?(b=nm(S,N.mode,D),b.return=N,b):(b=s(b,S),b.return=N,b)}function c(N,b,S,D){var L=S.type;return L===No?h(N,b,S.props.children,D,S.key):b!==null&&(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xs&&Lw(L)===b.type)?(D=s(b,S.props),D.ref=el(N,b,S),D.return=N,D):(D=Mu(S.type,S.key,S.props,null,N.mode,D),D.ref=el(N,b,S),D.return=N,D)}function d(N,b,S,D){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=rm(S,N.mode,D),b.return=N,b):(b=s(b,S.children||[]),b.return=N,b)}function h(N,b,S,D,L){return b===null||b.tag!==7?(b=Li(S,N.mode,D,L),b.return=N,b):(b=s(b,S),b.return=N,b)}function f(N,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=nm(""+b,N.mode,S),b.return=N,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yc:return S=Mu(b.type,b.key,b.props,null,N.mode,S),S.ref=el(N,null,b),S.return=N,S;case Eo:return b=rm(b,N.mode,S),b.return=N,b;case xs:var D=b._init;return f(N,D(b._payload),S)}if(al(b)||Qa(b))return b=Li(b,N.mode,S,null),b.return=N,b;au(N,b)}return null}function m(N,b,S,D){var L=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(N,b,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Yc:return S.key===L?c(N,b,S,D):null;case Eo:return S.key===L?d(N,b,S,D):null;case xs:return L=S._init,m(N,b,L(S._payload),D)}if(al(S)||Qa(S))return L!==null?null:h(N,b,S,D,null);au(N,S)}return null}function _(N,b,S,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return N=N.get(S)||null,l(b,N,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Yc:return N=N.get(D.key===null?S:D.key)||null,c(b,N,D,L);case Eo:return N=N.get(D.key===null?S:D.key)||null,d(b,N,D,L);case xs:var R=D._init;return _(N,b,S,R(D._payload),L)}if(al(D)||Qa(D))return N=N.get(S)||null,h(b,N,D,L,null);au(b,D)}return null}function C(N,b,S,D){for(var L=null,R=null,T=b,y=b=0,I=null;T!==null&&y<S.length;y++){T.index>y?(I=T,T=null):I=T.sibling;var w=m(N,T,S[y],D);if(w===null){T===null&&(T=I);break}t&&T&&w.alternate===null&&e(N,T),b=i(w,b,y),R===null?L=w:R.sibling=w,R=w,T=I}if(y===S.length)return n(N,T),Ye&&Ni(N,y),L;if(T===null){for(;y<S.length;y++)T=f(N,S[y],D),T!==null&&(b=i(T,b,y),R===null?L=T:R.sibling=T,R=T);return Ye&&Ni(N,y),L}for(T=r(N,T);y<S.length;y++)I=_(T,N,y,S[y],D),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?y:I.key),b=i(I,b,y),R===null?L=I:R.sibling=I,R=I);return t&&T.forEach(function(k){return e(N,k)}),Ye&&Ni(N,y),L}function v(N,b,S,D){var L=Qa(S);if(typeof L!="function")throw Error(Q(150));if(S=L.call(S),S==null)throw Error(Q(151));for(var R=L=null,T=b,y=b=0,I=null,w=S.next();T!==null&&!w.done;y++,w=S.next()){T.index>y?(I=T,T=null):I=T.sibling;var k=m(N,T,w.value,D);if(k===null){T===null&&(T=I);break}t&&T&&k.alternate===null&&e(N,T),b=i(k,b,y),R===null?L=k:R.sibling=k,R=k,T=I}if(w.done)return n(N,T),Ye&&Ni(N,y),L;if(T===null){for(;!w.done;y++,w=S.next())w=f(N,w.value,D),w!==null&&(b=i(w,b,y),R===null?L=w:R.sibling=w,R=w);return Ye&&Ni(N,y),L}for(T=r(N,T);!w.done;y++,w=S.next())w=_(T,N,y,w.value,D),w!==null&&(t&&w.alternate!==null&&T.delete(w.key===null?y:w.key),b=i(w,b,y),R===null?L=w:R.sibling=w,R=w);return t&&T.forEach(function(j){return e(N,j)}),Ye&&Ni(N,y),L}function x(N,b,S,D){if(typeof S=="object"&&S!==null&&S.type===No&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Yc:e:{for(var L=S.key,R=b;R!==null;){if(R.key===L){if(L=S.type,L===No){if(R.tag===7){n(N,R.sibling),b=s(R,S.props.children),b.return=N,N=b;break e}}else if(R.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xs&&Lw(L)===R.type){n(N,R.sibling),b=s(R,S.props),b.ref=el(N,R,S),b.return=N,N=b;break e}n(N,R);break}else e(N,R);R=R.sibling}S.type===No?(b=Li(S.props.children,N.mode,D,S.key),b.return=N,N=b):(D=Mu(S.type,S.key,S.props,null,N.mode,D),D.ref=el(N,b,S),D.return=N,N=D)}return a(N);case Eo:e:{for(R=S.key;b!==null;){if(b.key===R)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(N,b.sibling),b=s(b,S.children||[]),b.return=N,N=b;break e}else{n(N,b);break}else e(N,b);b=b.sibling}b=rm(S,N.mode,D),b.return=N,N=b}return a(N);case xs:return R=S._init,x(N,b,R(S._payload),D)}if(al(S))return C(N,b,S,D);if(Qa(S))return v(N,b,S,D);au(N,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(N,b.sibling),b=s(b,S),b.return=N,N=b):(n(N,b),b=nm(S,N.mode,D),b.return=N,N=b),a(N)):n(N,b)}return x}var Jo=lE(!0),cE=lE(!1),fd=ii(null),md=null,Ro=null,Yg=null;function Xg(){Yg=Ro=md=null}function Jg(t){var e=fd.current;Qe(fd),t._currentValue=e}function mp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fo(t,e){md=t,Yg=Ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Yg!==t)if(t={context:t,memoizedValue:e,next:null},Ro===null){if(md===null)throw Error(Q(308));Ro=t,md.dependencies={lanes:0,firstContext:t}}else Ro=Ro.next=t;return e}var Ii=null;function Zg(t){Ii===null?Ii=[t]:Ii.push(t)}function uE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Zg(e)):(n.next=s.next,s.next=n),e.interleaved=n,qr(t,r)}function qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vs=!1;function ey(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qr(t,n)}return s=r.interleaved,s===null?(e.next=e,Zg(r)):(e.next=s.next,s.next=e),r.interleaved=e,qr(t,n)}function ku(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fg(t,n)}}function Ow(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pd(t,e,n,r){var s=t.updateQueue;vs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,_=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,v=l;switch(m=e,_=n,v.tag){case 1:if(C=v.payload,typeof C=="function"){f=C.call(_,f,m);break e}f=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=v.payload,m=typeof C=="function"?C.call(_,f,m):C,m==null)break e;f=nt({},f,m);break e;case 2:vs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else _={eventTime:_,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=_,c=f):h=h.next=_,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);$i|=a,t.lanes=a,t.memoizedState=f}}function Mw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var yc={},vr=ii(yc),Wl=ii(yc),ql=ii(yc);function Ai(t){if(t===yc)throw Error(Q(174));return t}function ty(t,e){switch(He(ql,e),He(Wl,t),He(vr,yc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Km(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Km(e,t)}Qe(vr),He(vr,e)}function Zo(){Qe(vr),Qe(Wl),Qe(ql)}function hE(t){Ai(ql.current);var e=Ai(vr.current),n=Km(e,t.type);e!==n&&(He(Wl,t),He(vr,n))}function ny(t){Wl.current===t&&(Qe(vr),Qe(Wl))}var Ze=ii(0);function gd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yf=[];function ry(){for(var t=0;t<Yf.length;t++)Yf[t]._workInProgressVersionPrimary=null;Yf.length=0}var Ru=ns.ReactCurrentDispatcher,Xf=ns.ReactCurrentBatchConfig,Bi=0,et=null,wt=null,St=null,yd=!1,bl=!1,Gl=0,Hk=0;function Mt(){throw Error(Q(321))}function sy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function iy(t,e,n,r,s,i){if(Bi=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ru.current=t===null||t.memoizedState===null?Kk:Qk,t=n(r,s),bl){i=0;do{if(bl=!1,Gl=0,25<=i)throw Error(Q(301));i+=1,St=wt=null,e.updateQueue=null,Ru.current=Yk,t=n(r,s)}while(bl)}if(Ru.current=xd,e=wt!==null&&wt.next!==null,Bi=0,St=wt=et=null,yd=!1,e)throw Error(Q(300));return t}function oy(){var t=Gl!==0;return Gl=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?et.memoizedState=St=t:St=St.next=t,St}function zn(){if(wt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=St===null?et.memoizedState:St.next;if(e!==null)St=e,wt=t;else{if(t===null)throw Error(Q(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},St===null?et.memoizedState=St=t:St=St.next=t}return St}function Kl(t,e){return typeof e=="function"?e(t):e}function Jf(t){var e=zn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=wt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Bi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,et.lanes|=h,$i|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,sr(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,et.lanes|=i,$i|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zf(t){var e=zn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);sr(i,e.memoizedState)||(hn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function fE(){}function mE(t,e){var n=et,r=zn(),s=e(),i=!sr(r.memoizedState,s);if(i&&(r.memoizedState=s,hn=!0),r=r.queue,ay(yE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,Ql(9,gE.bind(null,n,r,s,e),void 0,null),Ct===null)throw Error(Q(349));Bi&30||pE(n,e,s)}return s}function pE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gE(t,e,n,r){e.value=n,e.getSnapshot=r,xE(e)&&vE(t)}function yE(t,e,n){return n(function(){xE(e)&&vE(t)})}function xE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch{return!0}}function vE(t){var e=qr(t,1);e!==null&&nr(e,t,1,-1)}function Vw(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kl,lastRenderedState:t},e.queue=t,t=t.dispatch=Gk.bind(null,et,t),[e.memoizedState,t]}function Ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wE(){return zn().memoizedState}function Pu(t,e,n,r){var s=hr();et.flags|=t,s.memoizedState=Ql(1|e,n,void 0,r===void 0?null:r)}function dh(t,e,n,r){var s=zn();r=r===void 0?null:r;var i=void 0;if(wt!==null){var a=wt.memoizedState;if(i=a.destroy,r!==null&&sy(r,a.deps)){s.memoizedState=Ql(e,n,i,r);return}}et.flags|=t,s.memoizedState=Ql(1|e,n,i,r)}function Fw(t,e){return Pu(8390656,8,t,e)}function ay(t,e){return dh(2048,8,t,e)}function _E(t,e){return dh(4,2,t,e)}function bE(t,e){return dh(4,4,t,e)}function EE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NE(t,e,n){return n=n!=null?n.concat([t]):null,dh(4,4,EE.bind(null,e,t),n)}function ly(){}function TE(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function SE(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CE(t,e,n){return Bi&21?(sr(n,e)||(n=R1(),et.lanes|=n,$i|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function Wk(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=Xf.transition;Xf.transition={};try{t(!1),e()}finally{Fe=n,Xf.transition=r}}function jE(){return zn().memoizedState}function qk(t,e,n){var r=Vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},IE(t))AE(e,n);else if(n=uE(t,e,n,r),n!==null){var s=tn();nr(n,t,r,s),kE(n,e,r)}}function Gk(t,e,n){var r=Vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(IE(t))AE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,sr(l,a)){var c=e.interleaved;c===null?(s.next=s,Zg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=uE(t,e,s,r),n!==null&&(s=tn(),nr(n,t,r,s),kE(n,e,r))}}function IE(t){var e=t.alternate;return t===et||e!==null&&e===et}function AE(t,e){bl=yd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fg(t,n)}}var xd={readContext:$n,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Kk={readContext:$n,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:Fw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,EE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qk.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:Vw,useDebugValue:ly,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=Vw(!1),e=t[0];return t=Wk.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,s=hr();if(Ye){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),Ct===null)throw Error(Q(349));Bi&30||pE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fw(yE.bind(null,r,i,t),[t]),r.flags|=2048,Ql(9,gE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hr(),e=Ct.identifierPrefix;if(Ye){var n=Vr,r=Mr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Hk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qk={readContext:$n,useCallback:TE,useContext:$n,useEffect:ay,useImperativeHandle:NE,useInsertionEffect:_E,useLayoutEffect:bE,useMemo:SE,useReducer:Jf,useRef:wE,useState:function(){return Jf(Kl)},useDebugValue:ly,useDeferredValue:function(t){var e=zn();return CE(e,wt.memoizedState,t)},useTransition:function(){var t=Jf(Kl)[0],e=zn().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:mE,useId:jE,unstable_isNewReconciler:!1},Yk={readContext:$n,useCallback:TE,useContext:$n,useEffect:ay,useImperativeHandle:NE,useInsertionEffect:_E,useLayoutEffect:bE,useMemo:SE,useReducer:Zf,useRef:wE,useState:function(){return Zf(Kl)},useDebugValue:ly,useDeferredValue:function(t){var e=zn();return wt===null?e.memoizedState=t:CE(e,wt.memoizedState,t)},useTransition:function(){var t=Zf(Kl)[0],e=zn().memoizedState;return[t,e]},useMutableSource:fE,useSyncExternalStore:mE,useId:jE,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hh={isMounted:function(t){return(t=t._reactInternals)?so(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tn(),s=Vs(t),i=Br(r,s);i.payload=e,n!=null&&(i.callback=n),e=Os(t,i,s),e!==null&&(nr(e,t,s,r),ku(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tn(),s=Vs(t),i=Br(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Os(t,i,s),e!==null&&(nr(e,t,s,r),ku(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tn(),r=Vs(t),s=Br(n,r);s.tag=2,e!=null&&(s.callback=e),e=Os(t,s,r),e!==null&&(nr(e,t,r,n),ku(e,t,r))}};function Uw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Bl(n,r)||!Bl(s,i):!0}function RE(t,e,n){var r=!1,s=qs,i=e.contextType;return typeof i=="object"&&i!==null?i=$n(i):(s=mn(e)?Fi:qt.current,r=e.contextTypes,i=(r=r!=null)?Yo(t,s):qs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Bw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hh.enqueueReplaceState(e,e.state,null)}function gp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ey(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$n(i):(i=mn(e)?Fi:qt.current,s.context=Yo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hh.enqueueReplaceState(s,s.state,null),pd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ea(t,e){try{var n="",r=e;do n+=NA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function em(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xk=typeof WeakMap=="function"?WeakMap:Map;function PE(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wd||(wd=!0,Cp=r),yp(t,e)},n}function DE(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yp(t,e),typeof r!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function $w(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Xk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=dR.bind(null,t,e,n),e.then(t,t))}function zw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Os(n,e,1))),n.lanes|=1),t)}var Jk=ns.ReactCurrentOwner,hn=!1;function Jt(t,e,n,r){e.child=t===null?cE(e,null,n,r):Jo(e,t.child,n,r)}function Ww(t,e,n,r,s){n=n.render;var i=e.ref;return Fo(e,s),r=iy(t,e,n,r,i,s),n=oy(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Ye&&n&&Gg(e),e.flags|=1,Jt(t,e,r,s),e.child)}function qw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gy(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,LE(t,e,i,r,s)):(t=Mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Bl,n(a,r)&&t.ref===e.ref)return Gr(t,e,s)}return e.flags|=1,t=Fs(i,r),t.ref=e.ref,t.return=e,e.child=t}function LE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Bl(i,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,Gr(t,e,s)}return xp(t,e,n,r,s)}function OE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Do,wn),wn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Do,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He(Do,wn),wn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,He(Do,wn),wn|=r;return Jt(t,e,s,n),e.child}function ME(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xp(t,e,n,r,s){var i=mn(n)?Fi:qt.current;return i=Yo(e,i),Fo(e,s),n=iy(t,e,n,r,i,s),r=oy(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Ye&&r&&Gg(e),e.flags|=1,Jt(t,e,n,s),e.child)}function Gw(t,e,n,r,s){if(mn(n)){var i=!0;ud(e)}else i=!1;if(Fo(e,s),e.stateNode===null)Du(t,e),RE(e,n,r),gp(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=$n(d):(d=mn(n)?Fi:qt.current,d=Yo(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Bw(e,a,r,d),vs=!1;var m=e.memoizedState;a.state=m,pd(e,r,a,s),c=e.memoizedState,l!==r||m!==c||fn.current||vs?(typeof h=="function"&&(pp(e,n,h,r),c=e.memoizedState),(l=vs||Uw(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,dE(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Qn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=$n(c):(c=mn(n)?Fi:qt.current,c=Yo(e,c));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Bw(e,a,r,c),vs=!1,m=e.memoizedState,a.state=m,pd(e,r,a,s);var C=e.memoizedState;l!==f||m!==C||fn.current||vs?(typeof _=="function"&&(pp(e,n,_,r),C=e.memoizedState),(d=vs||Uw(e,n,d,r,m,C,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return vp(t,e,n,r,i,s)}function vp(t,e,n,r,s,i){ME(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Rw(e,n,!1),Gr(t,e,i);r=e.stateNode,Jk.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Jo(e,t.child,null,i),e.child=Jo(e,null,l,i)):Jt(t,e,l,i),e.memoizedState=r.state,s&&Rw(e,n,!0),e.child}function VE(t){var e=t.stateNode;e.pendingContext?kw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kw(t,e.context,!1),ty(t,e.containerInfo)}function Kw(t,e,n,r,s){return Xo(),Qg(s),e.flags|=256,Jt(t,e,n,r),e.child}var wp={dehydrated:null,treeContext:null,retryLane:0};function _p(t){return{baseLanes:t,cachePool:null,transitions:null}}function FE(t,e,n){var r=e.pendingProps,s=Ze.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(Ze,s&1),t===null)return fp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ph(a,r,0,null),t=Li(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_p(n),e.memoizedState=wp,t):cy(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Zk(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fs(l,i):(i=Li(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?_p(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=wp,r}return i=t.child,t=i.sibling,r=Fs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cy(t,e){return e=ph({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lu(t,e,n,r){return r!==null&&Qg(r),Jo(e,t.child,null,n),t=cy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zk(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=em(Error(Q(422))),lu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ph({mode:"visible",children:r.children},s,0,null),i=Li(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Jo(e,t.child,null,a),e.child.memoizedState=_p(a),e.memoizedState=wp,i);if(!(e.mode&1))return lu(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Q(419)),r=em(i,r,void 0),lu(t,e,a,r)}if(l=(a&t.childLanes)!==0,hn||l){if(r=Ct,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qr(t,s),nr(r,t,s,-1))}return py(),r=em(Error(Q(421))),lu(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=hR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,En=Ls(s.nextSibling),Sn=e,Ye=!0,Xn=null,t!==null&&(On[Mn++]=Mr,On[Mn++]=Vr,On[Mn++]=Ui,Mr=t.id,Vr=t.overflow,Ui=e),e=cy(e,r.children),e.flags|=4096,e)}function Qw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mp(t.return,e,n)}function tm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function UE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Jt(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qw(t,n,e);else if(t.tag===19)Qw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&gd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),tm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&gd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}tm(e,!0,n,null,i);break;case"together":tm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Du(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$i|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=Fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eR(t,e,n){switch(e.tag){case 3:VE(e),Xo();break;case 5:hE(e);break;case 1:mn(e.type)&&ud(e);break;case 4:ty(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;He(fd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?FE(t,e,n):(He(Ze,Ze.current&1),t=Gr(t,e,n),t!==null?t.sibling:null);He(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return UE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,OE(t,e,n)}return Gr(t,e,n)}var BE,bp,$E,zE;BE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bp=function(){};$E=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ai(vr.current);var i=null;switch(n){case"input":s=Hm(t,s),r=Hm(t,r),i=[];break;case"select":s=nt({},s,{value:void 0}),r=nt({},r,{value:void 0}),i=[];break;case"textarea":s=Gm(t,s),r=Gm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ld)}Qm(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Dl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Dl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ge("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};zE=function(t,e,n,r){n!==r&&(e.flags|=4)};function tl(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tR(t,e,n){var r=e.pendingProps;switch(Kg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return mn(e.type)&&cd(),Vt(e),null;case 3:return r=e.stateNode,Zo(),Qe(fn),Qe(qt),ry(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ou(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Ap(Xn),Xn=null))),bp(t,e),Vt(e),null;case 5:ny(e);var s=Ai(ql.current);if(n=e.type,t!==null&&e.stateNode!=null)$E(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Vt(e),null}if(t=Ai(vr.current),ou(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mr]=e,r[Hl]=i,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(s=0;s<cl.length;s++)Ge(cl[s],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":sw(r,i),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",r);break;case"textarea":ow(r,i),Ge("invalid",r)}Qm(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&iu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&iu(r.textContent,l,t),s=["children",""+l]):Dl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Xc(r),iw(r,i,!0);break;case"textarea":Xc(r),aw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ld)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[mr]=e,t[Hl]=r,BE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ym(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),s=r;break;case"iframe":case"object":case"embed":Ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<cl.length;s++)Ge(cl[s],t);s=r;break;case"source":Ge("error",t),s=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=r;break;case"details":Ge("toggle",t),s=r;break;case"input":sw(t,r),s=Hm(t,r),Ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=nt({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":ow(t,r),s=Gm(t,r),Ge("invalid",t);break;default:s=r}Qm(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?w1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&x1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ll(t,c):typeof c=="number"&&Ll(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Dl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",t):c!=null&&Pg(t,i,c,a))}switch(n){case"input":Xc(t),iw(t,r,!1);break;case"textarea":Xc(t),aw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ws(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Lo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Lo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ld)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)zE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Ai(ql.current),Ai(vr.current),ou(e)){if(r=e.stateNode,n=e.memoizedProps,r[mr]=e,(i=r.nodeValue!==n)&&(t=Sn,t!==null))switch(t.tag){case 3:iu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mr]=e,e.stateNode=r}return Vt(e),null;case 13:if(Qe(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&En!==null&&e.mode&1&&!(e.flags&128))aE(),Xo(),e.flags|=98560,i=!1;else if(i=ou(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[mr]=e}else Xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),i=!1}else Xn!==null&&(Ap(Xn),Xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?_t===0&&(_t=3):py())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Zo(),bp(t,e),t===null&&$l(e.stateNode.containerInfo),Vt(e),null;case 10:return Jg(e.type._context),Vt(e),null;case 17:return mn(e.type)&&cd(),Vt(e),null;case 19:if(Qe(Ze),i=e.memoizedState,i===null)return Vt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)tl(i,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=gd(t),a!==null){for(e.flags|=128,tl(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Ze,Ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&ht()>ta&&(e.flags|=128,r=!0,tl(i,!1),e.lanes=4194304)}else{if(!r)if(t=gd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ye)return Vt(e),null}else 2*ht()-i.renderingStartTime>ta&&n!==1073741824&&(e.flags|=128,r=!0,tl(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ht(),e.sibling=null,n=Ze.current,He(Ze,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return my(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function nR(t,e){switch(Kg(e),e.tag){case 1:return mn(e.type)&&cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zo(),Qe(fn),Qe(qt),ry(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ny(e),null;case 13:if(Qe(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(Ze),null;case 4:return Zo(),null;case 10:return Jg(e.type._context),null;case 22:case 23:return my(),null;case 24:return null;default:return null}}var cu=!1,Bt=!1,rR=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Po(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){it(t,e,r)}else n.current=null}function Ep(t,e,n){try{n()}catch(r){it(t,e,r)}}var Yw=!1;function sR(t,e){if(op=id,t=K1(),qg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var _;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(_=f.firstChild)!==null;)m=f,f=_;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(_=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ap={focusedElem:t,selectionRange:n},id=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var v=C.memoizedProps,x=C.memoizedState,N=e.stateNode,b=N.getSnapshotBeforeUpdate(e.elementType===e.type?v:Qn(e.type,v),x);N.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(D){it(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return C=Yw,Yw=!1,C}function El(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ep(e,n,i)}s=s.next}while(s!==r)}}function fh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Np(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function HE(t){var e=t.alternate;e!==null&&(t.alternate=null,HE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mr],delete e[Hl],delete e[up],delete e[Uk],delete e[Bk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function WE(t){return t.tag===5||t.tag===3||t.tag===4}function Xw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||WE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ld));else if(r!==4&&(t=t.child,t!==null))for(Tp(t,e,n),t=t.sibling;t!==null;)Tp(t,e,n),t=t.sibling}function Sp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sp(t,e,n),t=t.sibling;t!==null;)Sp(t,e,n),t=t.sibling}var At=null,Yn=!1;function hs(t,e,n){for(n=n.child;n!==null;)qE(t,e,n),n=n.sibling}function qE(t,e,n){if(xr&&typeof xr.onCommitFiberUnmount=="function")try{xr.onCommitFiberUnmount(ih,n)}catch{}switch(n.tag){case 5:Bt||Po(n,e);case 6:var r=At,s=Yn;At=null,hs(t,e,n),At=r,Yn=s,At!==null&&(Yn?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(Yn?(t=At,n=n.stateNode,t.nodeType===8?Kf(t.parentNode,n):t.nodeType===1&&Kf(t,n),Fl(t)):Kf(At,n.stateNode));break;case 4:r=At,s=Yn,At=n.stateNode.containerInfo,Yn=!0,hs(t,e,n),At=r,Yn=s;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ep(n,e,a),s=s.next}while(s!==r)}hs(t,e,n);break;case 1:if(!Bt&&(Po(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){it(n,e,l)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,hs(t,e,n),Bt=r):hs(t,e,n);break;default:hs(t,e,n)}}function Jw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rR),e.forEach(function(r){var s=fR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:At=l.stateNode,Yn=!1;break e;case 3:At=l.stateNode.containerInfo,Yn=!0;break e;case 4:At=l.stateNode.containerInfo,Yn=!0;break e}l=l.return}if(At===null)throw Error(Q(160));qE(i,a,s),At=null,Yn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){it(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GE(e,t),e=e.sibling}function GE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),dr(t),r&4){try{El(3,t,t.return),fh(3,t)}catch(v){it(t,t.return,v)}try{El(5,t,t.return)}catch(v){it(t,t.return,v)}}break;case 1:Gn(e,t),dr(t),r&512&&n!==null&&Po(n,n.return);break;case 5:if(Gn(e,t),dr(t),r&512&&n!==null&&Po(n,n.return),t.flags&32){var s=t.stateNode;try{Ll(s,"")}catch(v){it(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&p1(s,i),Ym(l,a);var d=Ym(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?w1(s,f):h==="dangerouslySetInnerHTML"?x1(s,f):h==="children"?Ll(s,f):Pg(s,h,f,d)}switch(l){case"input":Wm(s,i);break;case"textarea":g1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Lo(s,!!i.multiple,_,!1):m!==!!i.multiple&&(i.defaultValue!=null?Lo(s,!!i.multiple,i.defaultValue,!0):Lo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hl]=i}catch(v){it(t,t.return,v)}}break;case 6:if(Gn(e,t),dr(t),r&4){if(t.stateNode===null)throw Error(Q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){it(t,t.return,v)}}break;case 3:if(Gn(e,t),dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fl(e.containerInfo)}catch(v){it(t,t.return,v)}break;case 4:Gn(e,t),dr(t);break;case 13:Gn(e,t),dr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hy=ht())),r&4&&Jw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(d=Bt)||h,Gn(e,t),Bt=d):Gn(e,t),dr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(m=ae,_=m.child,m.tag){case 0:case 11:case 14:case 15:El(4,m,m.return);break;case 1:Po(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(v){it(r,n,v)}}break;case 5:Po(m,m.return);break;case 22:if(m.memoizedState!==null){e0(f);continue}}_!==null?(_.return=m,ae=_):e0(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=v1("display",a))}catch(v){it(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){it(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Gn(e,t),dr(t),r&4&&Jw(t);break;case 21:break;default:Gn(e,t),dr(t)}}function dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(WE(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ll(s,""),r.flags&=-33);var i=Xw(t);Sp(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Xw(t);Tp(t,l,a);break;default:throw Error(Q(161))}}catch(c){it(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iR(t,e,n){ae=t,KE(t)}function KE(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||cu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Bt;l=cu;var d=Bt;if(cu=a,(Bt=c)&&!d)for(ae=s;ae!==null;)a=ae,c=a.child,a.tag===22&&a.memoizedState!==null?t0(s):c!==null?(c.return=a,ae=c):t0(s);for(;i!==null;)ae=i,KE(i),i=i.sibling;ae=s,cu=l,Bt=d}Zw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):Zw(t)}}function Zw(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||fh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mw(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mw(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Fl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Bt||e.flags&512&&Np(e)}catch(m){it(e,e.return,m)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function e0(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function t0(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fh(4,e)}catch(c){it(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){it(e,s,c)}}var i=e.return;try{Np(e)}catch(c){it(e,i,c)}break;case 5:var a=e.return;try{Np(e)}catch(c){it(e,a,c)}}}catch(c){it(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var oR=Math.ceil,vd=ns.ReactCurrentDispatcher,uy=ns.ReactCurrentOwner,Un=ns.ReactCurrentBatchConfig,ke=0,Ct=null,pt=null,Dt=0,wn=0,Do=ii(0),_t=0,Yl=null,$i=0,mh=0,dy=0,Nl=null,ln=null,hy=0,ta=1/0,Dr=null,wd=!1,Cp=null,Ms=null,uu=!1,js=null,_d=0,Tl=0,jp=null,Lu=-1,Ou=0;function tn(){return ke&6?ht():Lu!==-1?Lu:Lu=ht()}function Vs(t){return t.mode&1?ke&2&&Dt!==0?Dt&-Dt:zk.transition!==null?(Ou===0&&(Ou=R1()),Ou):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:F1(t.type)),t):1}function nr(t,e,n,r){if(50<Tl)throw Tl=0,jp=null,Error(Q(185));mc(t,n,r),(!(ke&2)||t!==Ct)&&(t===Ct&&(!(ke&2)&&(mh|=n),_t===4&&_s(t,Dt)),pn(t,r),n===1&&ke===0&&!(e.mode&1)&&(ta=ht()+500,uh&&oi()))}function pn(t,e){var n=t.callbackNode;zA(t,e);var r=sd(t,t===Ct?Dt:0);if(r===0)n!==null&&uw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uw(n),e===1)t.tag===0?$k(n0.bind(null,t)):sE(n0.bind(null,t)),Vk(function(){!(ke&6)&&oi()}),n=null;else{switch(P1(r)){case 1:n=Vg;break;case 4:n=A1;break;case 16:n=rd;break;case 536870912:n=k1;break;default:n=rd}n=nN(n,QE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function QE(t,e){if(Lu=-1,Ou=0,ke&6)throw Error(Q(327));var n=t.callbackNode;if(Uo()&&t.callbackNode!==n)return null;var r=sd(t,t===Ct?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bd(t,r);else{e=r;var s=ke;ke|=2;var i=XE();(Ct!==t||Dt!==e)&&(Dr=null,ta=ht()+500,Di(t,e));do try{cR();break}catch(l){YE(t,l)}while(!0);Xg(),vd.current=i,ke=s,pt!==null?e=0:(Ct=null,Dt=0,e=_t)}if(e!==0){if(e===2&&(s=tp(t),s!==0&&(r=s,e=Ip(t,s))),e===1)throw n=Yl,Di(t,0),_s(t,r),pn(t,ht()),n;if(e===6)_s(t,r);else{if(s=t.current.alternate,!(r&30)&&!aR(s)&&(e=bd(t,r),e===2&&(i=tp(t),i!==0&&(r=i,e=Ip(t,i))),e===1))throw n=Yl,Di(t,0),_s(t,r),pn(t,ht()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Ti(t,ln,Dr);break;case 3:if(_s(t,r),(r&130023424)===r&&(e=hy+500-ht(),10<e)){if(sd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=cp(Ti.bind(null,t,ln,Dr),e);break}Ti(t,ln,Dr);break;case 4:if(_s(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-tr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oR(r/1960))-r,10<r){t.timeoutHandle=cp(Ti.bind(null,t,ln,Dr),r);break}Ti(t,ln,Dr);break;case 5:Ti(t,ln,Dr);break;default:throw Error(Q(329))}}}return pn(t,ht()),t.callbackNode===n?QE.bind(null,t):null}function Ip(t,e){var n=Nl;return t.current.memoizedState.isDehydrated&&(Di(t,e).flags|=256),t=bd(t,e),t!==2&&(e=ln,ln=n,e!==null&&Ap(e)),t}function Ap(t){ln===null?ln=t:ln.push.apply(ln,t)}function aR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _s(t,e){for(e&=~dy,e&=~mh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function n0(t){if(ke&6)throw Error(Q(327));Uo();var e=sd(t,0);if(!(e&1))return pn(t,ht()),null;var n=bd(t,e);if(t.tag!==0&&n===2){var r=tp(t);r!==0&&(e=r,n=Ip(t,r))}if(n===1)throw n=Yl,Di(t,0),_s(t,e),pn(t,ht()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ti(t,ln,Dr),pn(t,ht()),null}function fy(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(ta=ht()+500,uh&&oi())}}function zi(t){js!==null&&js.tag===0&&!(ke&6)&&Uo();var e=ke;ke|=1;var n=Un.transition,r=Fe;try{if(Un.transition=null,Fe=1,t)return t()}finally{Fe=r,Un.transition=n,ke=e,!(ke&6)&&oi()}}function my(){wn=Do.current,Qe(Do)}function Di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mk(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(Kg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cd();break;case 3:Zo(),Qe(fn),Qe(qt),ry();break;case 5:ny(r);break;case 4:Zo();break;case 13:Qe(Ze);break;case 19:Qe(Ze);break;case 10:Jg(r.type._context);break;case 22:case 23:my()}n=n.return}if(Ct=t,pt=t=Fs(t.current,null),Dt=wn=e,_t=0,Yl=null,dy=mh=$i=0,ln=Nl=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ii=null}return t}function YE(t,e){do{var n=pt;try{if(Xg(),Ru.current=xd,yd){for(var r=et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yd=!1}if(Bi=0,St=wt=et=null,bl=!1,Gl=0,uy.current=null,n===null||n.return===null){_t=1,Yl=e,pt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=zw(a);if(_!==null){_.flags&=-257,Hw(_,a,l,i,e),_.mode&1&&$w(i,d,e),e=_,c=d;var C=e.updateQueue;if(C===null){var v=new Set;v.add(c),e.updateQueue=v}else C.add(c);break e}else{if(!(e&1)){$w(i,d,e),py();break e}c=Error(Q(426))}}else if(Ye&&l.mode&1){var x=zw(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Hw(x,a,l,i,e),Qg(ea(c,l));break e}}i=c=ea(c,l),_t!==4&&(_t=2),Nl===null?Nl=[i]:Nl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=PE(i,c,e);Ow(i,N);break e;case 1:l=c;var b=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ms===null||!Ms.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=DE(i,l,e);Ow(i,D);break e}}i=i.return}while(i!==null)}ZE(n)}catch(L){e=L,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function XE(){var t=vd.current;return vd.current=xd,t===null?xd:t}function py(){(_t===0||_t===3||_t===2)&&(_t=4),Ct===null||!($i&268435455)&&!(mh&268435455)||_s(Ct,Dt)}function bd(t,e){var n=ke;ke|=2;var r=XE();(Ct!==t||Dt!==e)&&(Dr=null,Di(t,e));do try{lR();break}catch(s){YE(t,s)}while(!0);if(Xg(),ke=n,vd.current=r,pt!==null)throw Error(Q(261));return Ct=null,Dt=0,_t}function lR(){for(;pt!==null;)JE(pt)}function cR(){for(;pt!==null&&!DA();)JE(pt)}function JE(t){var e=tN(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?ZE(t):pt=e,uy.current=null}function ZE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nR(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,pt=null;return}}else if(n=tR(n,e,wn),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);_t===0&&(_t=5)}function Ti(t,e,n){var r=Fe,s=Un.transition;try{Un.transition=null,Fe=1,uR(t,e,n,r)}finally{Un.transition=s,Fe=r}return null}function uR(t,e,n,r){do Uo();while(js!==null);if(ke&6)throw Error(Q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(HA(t,i),t===Ct&&(pt=Ct=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,nN(rd,function(){return Uo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Un.transition,Un.transition=null;var a=Fe;Fe=1;var l=ke;ke|=4,uy.current=null,sR(t,n),GE(n,t),Ak(ap),id=!!op,ap=op=null,t.current=n,iR(n),LA(),ke=l,Fe=a,Un.transition=i}else t.current=n;if(uu&&(uu=!1,js=t,_d=s),i=t.pendingLanes,i===0&&(Ms=null),VA(n.stateNode),pn(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(wd)throw wd=!1,t=Cp,Cp=null,t;return _d&1&&t.tag!==0&&Uo(),i=t.pendingLanes,i&1?t===jp?Tl++:(Tl=0,jp=t):Tl=0,oi(),null}function Uo(){if(js!==null){var t=P1(_d),e=Un.transition,n=Fe;try{if(Un.transition=null,Fe=16>t?16:t,js===null)var r=!1;else{if(t=js,js=null,_d=0,ke&6)throw Error(Q(331));var s=ke;for(ke|=4,ae=t.current;ae!==null;){var i=ae,a=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:El(8,h,i)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var m=h.sibling,_=h.return;if(HE(h),h===d){ae=null;break}if(m!==null){m.return=_,ae=m;break}ae=_}}}var C=i.alternate;if(C!==null){var v=C.child;if(v!==null){C.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ae=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ae=a;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:El(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,ae=N;break e}ae=i.return}}var b=t.current;for(ae=b;ae!==null;){a=ae;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ae=S;else e:for(a=b;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fh(9,l)}}catch(L){it(l,l.return,L)}if(l===a){ae=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,ae=D;break e}ae=l.return}}if(ke=s,oi(),xr&&typeof xr.onPostCommitFiberRoot=="function")try{xr.onPostCommitFiberRoot(ih,t)}catch{}r=!0}return r}finally{Fe=n,Un.transition=e}}return!1}function r0(t,e,n){e=ea(n,e),e=PE(t,e,1),t=Os(t,e,1),e=tn(),t!==null&&(mc(t,1,e),pn(t,e))}function it(t,e,n){if(t.tag===3)r0(t,t,n);else for(;e!==null;){if(e.tag===3){r0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ms===null||!Ms.has(r))){t=ea(n,t),t=DE(e,t,1),e=Os(e,t,1),t=tn(),e!==null&&(mc(e,1,t),pn(e,t));break}}e=e.return}}function dR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tn(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Dt&n)===n&&(_t===4||_t===3&&(Dt&130023424)===Dt&&500>ht()-hy?Di(t,0):dy|=n),pn(t,e)}function eN(t,e){e===0&&(t.mode&1?(e=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):e=1);var n=tn();t=qr(t,e),t!==null&&(mc(t,e,n),pn(t,n))}function hR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eN(t,n)}function fR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),eN(t,n)}var tN;tN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,eR(t,e,n);hn=!!(t.flags&131072)}else hn=!1,Ye&&e.flags&1048576&&iE(e,hd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Du(t,e),t=e.pendingProps;var s=Yo(e,qt.current);Fo(e,n),s=iy(null,e,r,t,s,n);var i=oy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,ud(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ey(e),s.updater=hh,e.stateNode=s,s._reactInternals=e,gp(e,r,t,n),e=vp(null,e,r,!0,i,n)):(e.tag=0,Ye&&i&&Gg(e),Jt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Du(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pR(r),t=Qn(r,t),s){case 0:e=xp(null,e,r,t,n);break e;case 1:e=Gw(null,e,r,t,n);break e;case 11:e=Ww(null,e,r,t,n);break e;case 14:e=qw(null,e,r,Qn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),xp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Gw(t,e,r,s,n);case 3:e:{if(VE(e),t===null)throw Error(Q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,dE(t,e),pd(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ea(Error(Q(423)),e),e=Kw(t,e,r,n,s);break e}else if(r!==s){s=ea(Error(Q(424)),e),e=Kw(t,e,r,n,s);break e}else for(En=Ls(e.stateNode.containerInfo.firstChild),Sn=e,Ye=!0,Xn=null,n=cE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xo(),r===s){e=Gr(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return hE(e),t===null&&fp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,lp(r,s)?a=null:i!==null&&lp(r,i)&&(e.flags|=32),ME(t,e),Jt(t,e,a,n),e.child;case 6:return t===null&&fp(e),null;case 13:return FE(t,e,n);case 4:return ty(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jo(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Ww(t,e,r,s,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,He(fd,r._currentValue),r._currentValue=a,i!==null)if(sr(i.value,a)){if(i.children===s.children&&!fn.current){e=Gr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Br(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),mp(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Q(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),mp(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Jt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fo(e,n),s=$n(s),r=r(s),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,s=Qn(r,e.pendingProps),s=Qn(r.type,s),qw(t,e,r,s,n);case 15:return LE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Du(t,e),e.tag=1,mn(r)?(t=!0,ud(e)):t=!1,Fo(e,n),RE(e,r,s),gp(e,r,s,n),vp(null,e,r,!0,t,n);case 19:return UE(t,e,n);case 22:return OE(t,e,n)}throw Error(Q(156,e.tag))};function nN(t,e){return I1(t,e)}function mR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,r){return new mR(t,e,n,r)}function gy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pR(t){if(typeof t=="function")return gy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lg)return 11;if(t===Og)return 14}return 2}function Fs(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")gy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case No:return Li(n.children,s,i,e);case Dg:a=8,s|=8;break;case Um:return t=Fn(12,n,e,s|2),t.elementType=Um,t.lanes=i,t;case Bm:return t=Fn(13,n,e,s),t.elementType=Bm,t.lanes=i,t;case $m:return t=Fn(19,n,e,s),t.elementType=$m,t.lanes=i,t;case h1:return ph(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u1:a=10;break e;case d1:a=9;break e;case Lg:a=11;break e;case Og:a=14;break e;case xs:a=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Fn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Li(t,e,n,r){return t=Fn(7,t,r,e),t.lanes=n,t}function ph(t,e,n,r){return t=Fn(22,t,r,e),t.elementType=h1,t.lanes=n,t.stateNode={isHidden:!1},t}function nm(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function rm(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mf(0),this.expirationTimes=Mf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yy(t,e,n,r,s,i,a,l,c){return t=new gR(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Fn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ey(i),t}function yR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rN(t){if(!t)return qs;t=t._reactInternals;e:{if(so(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(mn(n))return rE(t,n,e)}return e}function sN(t,e,n,r,s,i,a,l,c){return t=yy(n,r,!0,t,s,i,a,l,c),t.context=rN(null),n=t.current,r=tn(),s=Vs(n),i=Br(r,s),i.callback=e??null,Os(n,i,s),t.current.lanes=s,mc(t,s,r),pn(t,r),t}function gh(t,e,n,r){var s=e.current,i=tn(),a=Vs(s);return n=rN(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Os(s,e,a),t!==null&&(nr(t,s,a,i),ku(t,s,a)),a}function Ed(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xy(t,e){s0(t,e),(t=t.alternate)&&s0(t,e)}function xR(){return null}var iN=typeof reportError=="function"?reportError:function(t){console.error(t)};function vy(t){this._internalRoot=t}yh.prototype.render=vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));gh(t,e,null,null)};yh.prototype.unmount=vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zi(function(){gh(null,t,null,null)}),e[Wr]=null}};function yh(t){this._internalRoot=t}yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=O1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ws.length&&e!==0&&e<ws[n].priority;n++);ws.splice(n,0,t),n===0&&V1(t)}};function wy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i0(){}function vR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ed(a);i.call(d)}}var a=sN(e,r,t,0,null,!1,!1,"",i0);return t._reactRootContainer=a,t[Wr]=a.current,$l(t.nodeType===8?t.parentNode:t),zi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ed(c);l.call(d)}}var c=yy(t,0,!1,null,null,!1,!1,"",i0);return t._reactRootContainer=c,t[Wr]=c.current,$l(t.nodeType===8?t.parentNode:t),zi(function(){gh(e,c,n,r)}),c}function vh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ed(a);l.call(c)}}gh(e,a,t,s)}else a=vR(n,e,t,s,r);return Ed(a)}D1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ll(e.pendingLanes);n!==0&&(Fg(e,n|1),pn(e,ht()),!(ke&6)&&(ta=ht()+500,oi()))}break;case 13:zi(function(){var r=qr(t,1);if(r!==null){var s=tn();nr(r,t,1,s)}}),xy(t,1)}};Ug=function(t){if(t.tag===13){var e=qr(t,134217728);if(e!==null){var n=tn();nr(e,t,134217728,n)}xy(t,134217728)}};L1=function(t){if(t.tag===13){var e=Vs(t),n=qr(t,e);if(n!==null){var r=tn();nr(n,t,e,r)}xy(t,e)}};O1=function(){return Fe};M1=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Jm=function(t,e,n){switch(e){case"input":if(Wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ch(r);if(!s)throw Error(Q(90));m1(r),Wm(r,s)}}}break;case"textarea":g1(t,n);break;case"select":e=n.value,e!=null&&Lo(t,!!n.multiple,e,!1)}};E1=fy;N1=zi;var wR={usingClientEntryPoint:!1,Events:[gc,jo,ch,_1,b1,fy]},nl={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_R={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C1(t),t===null?null:t.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||xR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{ih=du.inject(_R),xr=du}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wy(e))throw Error(Q(200));return yR(t,e,null,n)};Pn.createRoot=function(t,e){if(!wy(t))throw Error(Q(299));var n=!1,r="",s=iN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yy(t,1,!1,null,null,n,!1,r,s),t[Wr]=e.current,$l(t.nodeType===8?t.parentNode:t),new vy(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=C1(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return zi(t)};Pn.hydrate=function(t,e,n){if(!xh(e))throw Error(Q(200));return vh(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!wy(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=iN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=sN(e,null,t,1,n??null,s,!1,i,a),t[Wr]=e.current,$l(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yh(e)};Pn.render=function(t,e,n){if(!xh(e))throw Error(Q(200));return vh(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!xh(t))throw Error(Q(40));return t._reactRootContainer?(zi(function(){vh(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};Pn.unstable_batchedUpdates=fy;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xh(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return vh(t,e,n,!1,r)};Pn.version="18.3.1-next-f1338f8080-20240426";function oN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oN)}catch(t){console.error(t)}}oN(),o1.exports=Pn;var va=o1.exports;const bR=Kb(va);var aN,o0=va;aN=o0.createRoot,o0.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xl.apply(this,arguments)}var Is;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Is||(Is={}));const a0="popstate";function ER(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:l="",hash:c=""}=io(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),kp("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:Nd(i))}function r(s,i){wh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return TR(e,n,r,t)}function ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NR(){return Math.random().toString(36).substr(2,8)}function l0(t,e){return{usr:t.state,key:t.key,idx:e}}function kp(t,e,n,r){return n===void 0&&(n=null),Xl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?io(e):e,{state:n,key:e&&e.key||r||NR()})}function Nd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function TR(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=Is.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Xl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=Is.Pop;let x=h(),N=x==null?null:x-d;d=x,c&&c({action:l,location:v.location,delta:N})}function m(x,N){l=Is.Push;let b=kp(v.location,x,N);n&&n(b,x),d=h()+1;let S=l0(b,d),D=v.createHref(b);try{a.pushState(S,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(D)}i&&c&&c({action:l,location:v.location,delta:1})}function _(x,N){l=Is.Replace;let b=kp(v.location,x,N);n&&n(b,x),d=h();let S=l0(b,d),D=v.createHref(b);a.replaceState(S,"",D),i&&c&&c({action:l,location:v.location,delta:0})}function C(x){let N=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof x=="string"?x:Nd(x);return b=b.replace(/ $/,"%20"),ft(N,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,N)}let v={get action(){return l},get location(){return t(s,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(a0,f),c=x,()=>{s.removeEventListener(a0,f),c=null}},createHref(x){return e(s,x)},createURL:C,encodeLocation(x){let N=C(x);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:_,go(x){return a.go(x)}};return v}var c0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(c0||(c0={}));function SR(t,e,n){return n===void 0&&(n="/"),CR(t,e,n)}function CR(t,e,n,r){let s=typeof e=="string"?io(e):e,i=_y(s.pathname||"/",n);if(i==null)return null;let a=lN(t);jR(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=UR(i);l=MR(a[c],d)}return l}function lN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Us([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(ft(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),lN(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:LR(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of cN(i.path))s(i,a,c)}),e}function cN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=cN(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function jR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:OR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IR=/^:[\w-]+$/,AR=3,kR=2,RR=1,PR=10,DR=-2,u0=t=>t==="*";function LR(t,e){let n=t.split("/"),r=n.length;return n.some(u0)&&(r+=DR),e&&(r+=kR),n.filter(s=>!u0(s)).reduce((s,i)=>s+(IR.test(i)?AR:i===""?RR:PR),r)}function OR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function MR(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=VR({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Us([i,f.pathname]),pathnameBase:WR(Us([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Us([i,f.pathnameBase]))}return a}function VR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:m,isOptional:_}=h;if(m==="*"){let v=l[f]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const C=l[f];return _&&!C?d[m]=void 0:d[m]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function FR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function UR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _y(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const BR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$R=t=>BR.test(t);function zR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?io(t):t,i;if(n)if($R(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),wh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=d0(n.substring(1),"/"):i=d0(n,e)}else i=e;return{pathname:i,search:qR(r),hash:GR(s)}}function d0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function by(t,e){let n=HR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ey(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=io(t):(s=Xl({},t),ft(!s.pathname||!s.pathname.includes("?"),sm("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),sm("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),sm("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=zR(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Us=t=>t.join("/").replace(/\/\/+/g,"/"),WR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,GR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uN=["post","put","patch","delete"];new Set(uN);const QR=["get",...uN];new Set(QR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jl.apply(this,arguments)}const Ny=g.createContext(null),YR=g.createContext(null),ai=g.createContext(null),_h=g.createContext(null),rs=g.createContext({outlet:null,matches:[],isDataRoute:!1}),dN=g.createContext(null);function XR(t,e){let{relative:n}=e===void 0?{}:e;wa()||ft(!1);let{basename:r,navigator:s}=g.useContext(ai),{hash:i,pathname:a,search:l}=mN(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Us([r,a])),s.createHref({pathname:c,search:l,hash:i})}function wa(){return g.useContext(_h)!=null}function oo(){return wa()||ft(!1),g.useContext(_h).location}function hN(t){g.useContext(ai).static||g.useLayoutEffect(t)}function yn(){let{isDataRoute:t}=g.useContext(rs);return t?uP():JR()}function JR(){wa()||ft(!1);let t=g.useContext(Ny),{basename:e,future:n,navigator:r}=g.useContext(ai),{matches:s}=g.useContext(rs),{pathname:i}=oo(),a=JSON.stringify(by(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return hN(()=>{l.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=Ey(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Us([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}function fN(){let{matches:t}=g.useContext(rs),e=t[t.length-1];return e?e.params:{}}function mN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(ai),{matches:s}=g.useContext(rs),{pathname:i}=oo(),a=JSON.stringify(by(s,r.v7_relativeSplatPath));return g.useMemo(()=>Ey(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function ZR(t,e){return eP(t,e)}function eP(t,e,n,r){wa()||ft(!1);let{navigator:s}=g.useContext(ai),{matches:i}=g.useContext(rs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=oo(),h;if(e){var f;let x=typeof e=="string"?io(e):e;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||ft(!1),h=x}else h=d;let m=h.pathname||"/",_=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let C=SR(t,{pathname:_}),v=iP(C&&C.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Us([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Us([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&v?g.createElement(_h.Provider,{value:{location:Jl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Is.Pop}},v):v}function tP(){let t=cP(),e=KR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const nP=g.createElement(tP,null);class rP extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(rs.Provider,{value:this.props.routeContext},g.createElement(dN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sP(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(Ny);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(rs.Provider,{value:e},r)}function iP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||ft(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:_}=n,C=f.route.loader&&m[f.route.id]===void 0&&(!_||_[f.route.id]===void 0);if(f.route.lazy||C){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let _,C=!1,v=null,x=null;n&&(_=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||nP,c&&(d<0&&m===0?(dP("route-fallback"),C=!0,x=null):d===m&&(C=!0,x=f.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,m+1)),b=()=>{let S;return _?S=v:C?S=x:f.route.Component?S=g.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,g.createElement(sP,{match:f,routeContext:{outlet:h,matches:N,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?g.createElement(rP,{location:n.location,revalidation:n.revalidation,component:v,error:_,children:b(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):b()},null)}var pN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(pN||{}),gN=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gN||{});function oP(t){let e=g.useContext(Ny);return e||ft(!1),e}function aP(t){let e=g.useContext(YR);return e||ft(!1),e}function lP(t){let e=g.useContext(rs);return e||ft(!1),e}function yN(t){let e=lP(),n=e.matches[e.matches.length-1];return n.route.id||ft(!1),n.route.id}function cP(){var t;let e=g.useContext(dN),n=aP(),r=yN();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function uP(){let{router:t}=oP(pN.UseNavigateStable),e=yN(gN.UseNavigateStable),n=g.useRef(!1);return hN(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Jl({fromRouteId:e},i)))},[t,e])}const h0={};function dP(t,e,n){h0[t]||(h0[t]=!0)}function hP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ty(t){let{to:e,replace:n,state:r,relative:s}=t;wa()||ft(!1);let{future:i,static:a}=g.useContext(ai),{matches:l}=g.useContext(rs),{pathname:c}=oo(),d=yn(),h=Ey(e,by(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function Xt(t){ft(!1)}function fP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Is.Pop,navigator:i,static:a=!1,future:l}=t;wa()&&ft(!1);let c=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:a,future:Jl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=io(r));let{pathname:h="/",search:f="",hash:m="",state:_=null,key:C="default"}=r,v=g.useMemo(()=>{let x=_y(h,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:_,key:C},navigationType:s}},[c,h,f,m,_,C,s]);return v==null?null:g.createElement(ai.Provider,{value:d},g.createElement(_h.Provider,{children:n,value:v}))}function mP(t){let{children:e,location:n}=t;return ZR(Rp(e),n)}new Promise(()=>{});function Rp(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,Rp(r.props.children,i));return}r.type!==Xt&&ft(!1),!r.props.index||!r.props.children||ft(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Rp(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pp(){return Pp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pp.apply(this,arguments)}function pP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function gP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yP(t,e){return t.button===0&&(!e||e==="_self")&&!gP(t)}const xP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vP="6";try{window.__reactRouterVersion=vP}catch{}const wP="startTransition",f0=sh[wP];function _P(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=ER({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=g.useCallback(f=>{d&&f0?f0(()=>c(f)):c(f)},[c,d]);return g.useLayoutEffect(()=>a.listen(h),[a,h]),g.useEffect(()=>hP(r),[r]),g.createElement(fP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const bP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Be=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=pP(e,xP),{basename:_}=g.useContext(ai),C,v=!1;if(typeof d=="string"&&EP.test(d)&&(C=d,bP))try{let S=new URL(window.location.href),D=d.startsWith("//")?new URL(S.protocol+d):new URL(d),L=_y(D.pathname,_);D.origin===S.origin&&L!=null?d=L+D.search+D.hash:v=!0}catch{}let x=XR(d,{relative:s}),N=NP(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function b(S){r&&r(S),S.defaultPrevented||N(S)}return g.createElement("a",Pp({},m,{href:C||x,onClick:v||i?r:b,ref:n,target:c}))});var m0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(m0||(m0={}));var p0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(p0||(p0={}));function NP(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=yn(),d=oo(),h=mN(t,{relative:a});return g.useCallback(f=>{if(yP(f,n)){f.preventDefault();let m=r!==void 0?r:Nd(d)===Nd(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}const TP=()=>{};var g0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},SP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},vN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,_=d&63;c||(_=64,a||(m=64)),r.push(n[h],n[f],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new CP;const m=i<<2|l>>4;if(r.push(m),d!==64){const _=l<<4&240|d>>2;if(r.push(_),f!==64){const C=d<<6&192|f;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jP=function(t){const e=xN(t);return vN.encodeByteArray(e,!0)},Td=function(t){return jP(t).replace(/\./g,"")},wN=function(t){try{return vN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=()=>IP().__FIREBASE_DEFAULTS__,kP=()=>{if(typeof process>"u"||typeof g0>"u")return;const t=g0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wN(t[1]);return e&&JSON.parse(e)},bh=()=>{try{return TP()||AP()||kP()||RP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_N=t=>{var e,n;return(n=(e=bh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},bN=t=>{const e=_N(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EN=()=>{var t;return(t=bh())==null?void 0:t.config},NN=t=>{var e;return(e=bh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Td(JSON.stringify(n)),Td(JSON.stringify(a)),""].join(".")}const Sl={};function DP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sl))Sl[e]?t.emulator.push(e):t.prod.push(e);return t}function LP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let y0=!1;function Cy(t,e){if(typeof window>"u"||typeof document>"u"||!li(window.location.host)||Sl[t]===e||Sl[t]||y0)return;Sl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=DP().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{y0=!0,a()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=LP(r),_=n("text"),C=document.getElementById(_)||document.createElement("span"),v=n("learnmore"),x=document.getElementById(v)||document.createElement("a"),N=n("preprendIcon"),b=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),h(x,v);const D=d();c(b,N),S.append(b,C,x,D),document.body.appendChild(S)}i?(C.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function MP(){var e;const t=(e=bh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UP(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BP(){return!MP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CN(){try{return typeof indexedDB=="object"}catch{return!1}}function jN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function $P(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zP,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ao.prototype.create)}}class ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?HP(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new qn(s,l,r)}}function HP(t,e){return t.replace(WP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const WP=/\{\$([^}]+)}/g;function qP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(x0(i)&&x0(a)){if(!Kr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function x0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function dl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function GP(t,e){const n=new KP(t,e);return n.subscribe.bind(n)}class KP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=im),s.error===void 0&&(s.error=im),s.complete===void 0&&(s.complete=im);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function im(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=1e3,XP=2,JP=4*60*60*1e3,ZP=.5;function v0(t,e=YP,n=XP){const r=e*Math.pow(n,t),s=Math.round(ZP*r*(Math.random()-.5)*2);return Math.min(JP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Hn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new PP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n4(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t4(t){return t===Si?void 0:t}function n4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const s4={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},i4=Ne.INFO,o4={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},a4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=o4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eh{constructor(e){this.name=e,this._logLevel=i4,this._logHandler=a4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const l4=(t,e)=>e.some(n=>t instanceof n);let w0,_0;function c4(){return w0||(w0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u4(){return _0||(_0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IN=new WeakMap,Dp=new WeakMap,AN=new WeakMap,om=new WeakMap,jy=new WeakMap;function d4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Bs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&IN.set(n,t)}).catch(()=>{}),jy.set(e,t),e}function h4(t){if(Dp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Dp.set(t,e)}let Lp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f4(t){Lp=t(Lp)}function m4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(am(this),e,...n);return AN.set(r,e.sort?e.sort():[e]),Bs(r)}:u4().includes(t)?function(...e){return t.apply(am(this),e),Bs(IN.get(this))}:function(...e){return Bs(t.apply(am(this),e))}}function p4(t){return typeof t=="function"?m4(t):(t instanceof IDBTransaction&&h4(t),l4(t,c4())?new Proxy(t,Lp):t)}function Bs(t){if(t instanceof IDBRequest)return d4(t);if(om.has(t))return om.get(t);const e=p4(t);return e!==t&&(om.set(t,e),jy.set(e,t)),e}const am=t=>jy.get(t);function kN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Bs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Bs(a.result),c.oldVersion,c.newVersion,Bs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const g4=["get","getKey","getAll","getAllKeys","count"],y4=["put","add","delete","clear"],lm=new Map;function b0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lm.get(e))return lm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=y4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||g4.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return lm.set(e,i),i}f4(t=>({...t,get:(e,n,r)=>b0(e,n)||t.get(e,n,r),has:(e,n)=>!!b0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function v4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Op="@firebase/app",E0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new Eh("@firebase/app"),w4="@firebase/app-compat",_4="@firebase/analytics-compat",b4="@firebase/analytics",E4="@firebase/app-check-compat",N4="@firebase/app-check",T4="@firebase/auth",S4="@firebase/auth-compat",C4="@firebase/database",j4="@firebase/data-connect",I4="@firebase/database-compat",A4="@firebase/functions",k4="@firebase/functions-compat",R4="@firebase/installations",P4="@firebase/installations-compat",D4="@firebase/messaging",L4="@firebase/messaging-compat",O4="@firebase/performance",M4="@firebase/performance-compat",V4="@firebase/remote-config",F4="@firebase/remote-config-compat",U4="@firebase/storage",B4="@firebase/storage-compat",$4="@firebase/firestore",z4="@firebase/ai",H4="@firebase/firestore-compat",W4="firebase",q4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="[DEFAULT]",G4={[Op]:"fire-core",[w4]:"fire-core-compat",[b4]:"fire-analytics",[_4]:"fire-analytics-compat",[N4]:"fire-app-check",[E4]:"fire-app-check-compat",[T4]:"fire-auth",[S4]:"fire-auth-compat",[C4]:"fire-rtdb",[j4]:"fire-data-connect",[I4]:"fire-rtdb-compat",[A4]:"fire-fn",[k4]:"fire-fn-compat",[R4]:"fire-iid",[P4]:"fire-iid-compat",[D4]:"fire-fcm",[L4]:"fire-fcm-compat",[O4]:"fire-perf",[M4]:"fire-perf-compat",[V4]:"fire-rc",[F4]:"fire-rc-compat",[U4]:"fire-gcs",[B4]:"fire-gcs-compat",[$4]:"fire-fst",[H4]:"fire-fst-compat",[z4]:"fire-vertex","fire-js":"fire-js",[W4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new Map,K4=new Map,Vp=new Map;function N0(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ir(t){const e=t.name;if(Vp.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;Vp.set(e,t);for(const n of Sd.values())N0(n,t);for(const n of K4.values())N0(n,t);return!0}function ci(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new ao("app","Firebase",Q4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=q4;function RN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Mp,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $s.create("bad-app-name",{appName:String(s)});if(n||(n=EN()),!n)throw $s.create("no-options");const i=Sd.get(s);if(i){if(Kr(n,i.options)&&Kr(r,i.config))return i;throw $s.create("duplicate-app",{appName:s})}const a=new r4(s);for(const c of Vp.values())a.addComponent(c);const l=new Y4(n,r,a);return Sd.set(s,l),l}function Nh(t=Mp){const e=Sd.get(t);if(!e&&t===Mp&&EN())return RN();if(!e)throw $s.create("no-app",{appName:t});return e}function gn(t,e,n){let r=G4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(a.join(" "));return}ir(new Hn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4="firebase-heartbeat-database",J4=1,Zl="firebase-heartbeat-store";let cm=null;function PN(){return cm||(cm=kN(X4,J4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zl)}catch(n){console.warn(n)}}}}).catch(t=>{throw $s.create("idb-open",{originalErrorMessage:t.message})})),cm}async function Z4(t){try{const n=(await PN()).transaction(Zl),r=await n.objectStore(Zl).get(DN(t));return await n.done,r}catch(e){if(e instanceof qn)Qr.warn(e.message);else{const n=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(n.message)}}}async function T0(t,e){try{const r=(await PN()).transaction(Zl,"readwrite");await r.objectStore(Zl).put(e,DN(t)),await r.done}catch(n){if(n instanceof qn)Qr.warn(n.message);else{const r=$s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qr.warn(r.message)}}}function DN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1024,tD=30;class nD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=S0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>tD){const a=iD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S0(),{heartbeatsToSend:r,unsentEntries:s}=rD(this._heartbeatsCache.heartbeats),i=Td(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qr.warn(n),""}}}function S0(){return new Date().toISOString().substring(0,10)}function rD(t,e=eD){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),C0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),C0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CN()?jN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Z4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return T0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function C0(t){return Td(JSON.stringify({version:2,heartbeats:t})).length}function iD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){ir(new Hn("platform-logger",e=>new x4(e),"PRIVATE")),ir(new Hn("heartbeat",e=>new nD(e),"PRIVATE")),gn(Op,E0,t),gn(Op,E0,"esm2020"),gn("fire-js","")}oD("");function LN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aD=LN,ON=new ao("auth","Firebase",LN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new Eh("@firebase/auth");function lD(t,...e){Cd.logLevel<=Ne.WARN&&Cd.warn(`Auth (${lo}): ${t}`,...e)}function Vu(t,...e){Cd.logLevel<=Ne.ERROR&&Cd.error(`Auth (${lo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t,...e){throw Ay(t,...e)}function rr(t,...e){return Ay(t,...e)}function Iy(t,e,n){const r={...aD(),[e]:n};return new ao("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return Iy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cD(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Wn(t,"argument-error"),Iy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ay(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ON.create(t,...e)}function fe(t,e,...n){if(!t)throw Ay(e,...n)}function Fr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vu(e),new Error(e)}function Yr(t,e){t||Fr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uD(){return j0()==="http:"||j0()==="https:"}function j0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uD()||SN()||"connection"in navigator)?navigator.onLine:!0}function hD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=OP()||FP()}get(){return dD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pD=new vc(3e4,6e4);function ui(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ss(t,e,n,r,s={}){return VN(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=xc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return VP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&li(t.emulatorConfig.host)&&(d.credentials="include"),MN.fetch()(await FN(t,t.config.apiHost,n,l),d)})}async function VN(t,e,n){t._canInitEmulator=!1;const r={...fD,...e};try{const s=new yD(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw hu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw hu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw hu(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Iy(t,h,d);Wn(t,h)}}catch(s){if(s instanceof qn)throw s;Wn(t,"network-request-failed",{message:String(s)})}}async function wc(t,e,n,r,s={}){const i=await ss(t,e,n,r,s);return"mfaPendingCredential"in i&&Wn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function FN(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?ky(t.config,s):`${t.config.apiScheme}://${s}`;return mD.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function gD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rr(this.auth,"network-request-failed")),pD.get())})}}function hu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rr(t,e,r);return s.customData._tokenResponse=n,s}function I0(t){return t!==void 0&&t.enterprise!==void 0}class xD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vD(t,e){return ss(t,"GET","/v2/recaptchaConfig",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return ss(t,"POST","/v1/accounts:delete",e)}async function jd(t,e){return ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _D(t,e=!1){const n=$e(t),r=await n.getIdToken(e),s=Ry(r);fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Cl(um(s.auth_time)),issuedAtTime:Cl(um(s.iat)),expirationTime:Cl(um(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function um(t){return Number(t)*1e3}function Ry(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vu("JWT malformed, contained fewer than 3 sections"),null;try{const s=wN(n);return s?JSON.parse(s):(Vu("Failed to decode base64 JWT payload"),null)}catch(s){return Vu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function A0(t){const e=Ry(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&bD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function bD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Id(t){var f;const e=t.auth,n=await t.getIdToken(),r=await na(t,jd(e,{idToken:n}));fe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?UN(s.providerUserInfo):[],a=TD(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Up(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function ND(t){const e=$e(t);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TD(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function UN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e){const n=await VN(t,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await FN(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&li(t.emulatorConfig.host)&&(c.credentials="include"),MN.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CD(t,e){return ss(t,"POST","/v2/accounts:revokeToken",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):A0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const n=A0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await SD(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Bo;return r&&(fe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(fe(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(fe(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return Fr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new ED(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Up(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await na(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _D(this,e)}reload(){return ND(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await na(this,wD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:_,providerData:C,stsTokenManager:v}=n;fe(f&&v,e,"internal-error");const x=Bo.fromJSON(this.name,v);fe(typeof f=="string",e,"internal-error"),fs(r,e.name),fs(s,e.name),fe(typeof m=="boolean",e,"internal-error"),fe(typeof _=="boolean",e,"internal-error"),fs(i,e.name),fs(a,e.name),fs(l,e.name),fs(c,e.name),fs(d,e.name),fs(h,e.name);const N=new Zn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:_,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:x,createdAt:d,lastLoginAt:h});return C&&Array.isArray(C)&&(N.providerData=C.map(b=>({...b}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new Bo;s.updateFromServerResponse(n);const i=new Zn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Id(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?UN(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Bo;l.updateFromIdToken(r);const c=new Zn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Up(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new Map;function Ur(t){Yr(t instanceof Function,"Expected a class definition");let e=k0.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BN.type="NONE";const R0=BN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t,e,n){return`firebase:${t}:${e}:${n}`}class $o{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Fu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Fu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jd(this.auth,{idToken:e}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $o(Ur(R0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Ur(R0);const a=Fu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await jd(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Zn._fromGetAccountInfoResponse(e,m,h)}else f=Zn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new $o(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new $o(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($N(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GN(e))return"Blackberry";if(KN(e))return"Webos";if(zN(e))return"Safari";if((e.includes("chrome/")||HN(e))&&!e.includes("edge/"))return"Chrome";if(qN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $N(t=Gt()){return/firefox\//i.test(t)}function zN(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HN(t=Gt()){return/crios\//i.test(t)}function WN(t=Gt()){return/iemobile/i.test(t)}function qN(t=Gt()){return/android/i.test(t)}function GN(t=Gt()){return/blackberry/i.test(t)}function KN(t=Gt()){return/webos/i.test(t)}function Py(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jD(t=Gt()){var e;return Py(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ID(){return UP()&&document.documentMode===10}function QN(t=Gt()){return Py(t)||qN(t)||KN(t)||GN(t)||/windows phone/i.test(t)||WN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t,e=[]){let n;switch(t){case"Browser":n=P0(Gt());break;case"Worker":n=`${P0(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kD(t,e={}){return ss(t,"GET","/v2/passwordPolicy",ui(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=6;class PD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??RD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new D0(this),this.idTokenSubscription=new D0(this),this.beforeStateQueue=new AD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ON,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jd(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(cn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject($r(this));const n=e?$e(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kD(this),n=new PD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&lD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function di(t){return $e(t)}class D0{constructor(e){this.auth=e,this.observer=null,this.addObserver=GP(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LD(t){Th=t}function XN(t){return Th.loadJS(t)}function OD(){return Th.recaptchaEnterpriseScript}function MD(){return Th.gapiScript}function VD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class FD{constructor(){this.enterprise=new UD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class UD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const BD="recaptcha-enterprise",JN="NO_RECAPTCHA";class $D{constructor(e){this.type=BD,this.auth=di(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{vD(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new xD(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;I0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(JN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FD().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&I0(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=OD();c.length!==0&&(c+=l),XN(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function L0(t,e,n,r=!1,s=!1){const i=new $D(t);let a;if(s)a=JN;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Bp(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await L0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await L0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t,e){const n=ci(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kr(i,e??{}))return s;Wn(s,"already-initialized")}return n.initialize({options:e})}function HD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function WD(t,e,n){const r=di(t);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ZN(e),{host:a,port:l}=qD(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(Kr(d,r.config.emulator)&&Kr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,li(a)?(Sy(`${i}//${a}${c}`),Cy("Auth",!0)):GD()}function ZN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qD(t){const e=ZN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:O0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:O0(a)}}}function O0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}}async function KD(t,e){return ss(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e){return wc(t,"POST","/v1/accounts:signInWithPassword",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}async function XD(t,e){return wc(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Dy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ec(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ec(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bp(e,n,"signInWithPassword",QD);case"emailLink":return YD(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bp(e,r,"signUpPassword",KD);case"emailLink":return XD(e,{idToken:n,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t,e){return wc(t,"POST","/v1/accounts:signInWithIdp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD="http://localhost";class Hi extends Dy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Wn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new Hi(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return zo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,zo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zo(e,n)}buildRequest(){const e={requestUri:JD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eL(t){const e=ul(dl(t)).link,n=e?ul(dl(e)).deep_link_id:null,r=ul(dl(t)).deep_link_id;return(r?ul(dl(r)).link:null)||r||n||e||t}class Ly{constructor(e){const n=ul(dl(e)),r=n.apiKey??null,s=n.oobCode??null,i=ZD(n.mode??null);fe(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=eL(e);try{return new Ly(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(){this.providerId=_a.PROVIDER_ID}static credential(e,n){return ec._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ly.parseLink(n);return fe(r,"argument-error"),ec._fromEmailAndCode(e,r.code,r.tenantId)}}_a.PROVIDER_ID="password";_a.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_a.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends Oy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends _c{constructor(){super("facebook.com")}static credential(e){return Hi._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Es.credential(n,r)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends _c{constructor(){super("github.com")}static credential(e){return Hi._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends _c{constructor(){super("twitter.com")}static credential(e,n){return Hi._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e){return wc(t,"POST","/v1/accounts:signUp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zn._fromIdTokenResponse(e,r,s),a=M0(r);return new Wi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=M0(r);return new Wi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function M0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends qn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ad(e,n,r,s)}}function eT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,i,e,r):i})}async function nL(t,e,n=!1){const r=await na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e,n=!1){const{auth:r}=t;if(cn(r.app))return Promise.reject($r(r));const s="reauthenticate";try{const i=await na(t,eT(r,s,e,t),n);fe(i.idToken,r,"internal-error");const a=Ry(i.idToken);fe(a,r,"internal-error");const{sub:l}=a;return fe(t.uid===l,r,"user-mismatch"),Wi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Wn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(t,e,n=!1){if(cn(t.app))return Promise.reject($r(t));const r="signIn",s=await eT(t,r,e),i=await Wi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function sL(t,e){return tT(di(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(t){const e=di(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function iL(t,e,n){if(cn(t.app))return Promise.reject($r(t));const r=di(t),a=await Bp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tL).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&nT(t),c}),l=await Wi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function oL(t,e,n){return cn(t.app)?Promise.reject($r(t)):sL($e(t),_a.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&nT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(t,e){return ss(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await na(r,aL(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function lL(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function cL(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function uL(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function dL(t){return $e(t).signOut()}const kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=1e3,fL=10;class iT extends sT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);ID()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iT.type="LOCAL";const mL=iT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends sT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oT.type="SESSION";const aT=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await pL(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=My("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function yL(t){wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function xL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wL(){return lT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="firebaseLocalStorageDb",_L=1,Rd="firebaseLocalStorage",uT="fbase_key";class bc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(t,e){return t.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function bL(){const t=indexedDB.deleteDatabase(cT);return new bc(t).toPromise()}function $p(){const t=indexedDB.open(cT,_L);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Rd,{keyPath:uT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Rd)?e(r):(r.close(),await bL(),e(await $p()))})})}async function V0(t,e,n){const r=Ch(t,!0).put({[uT]:e,value:n});return new bc(r).toPromise()}async function EL(t,e){const n=Ch(t,!1).get(e),r=await new bc(n).toPromise();return r===void 0?null:r.value}function F0(t,e){const n=Ch(t,!0).delete(e);return new bc(n).toPromise()}const NL=800,TL=3;class dT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $p(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(wL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await xL(),!this.activeServiceWorker)return;this.sender=new gL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $p();return await V0(e,kd,"1"),await F0(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>V0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>EL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ch(s,!1).getAll();return new bc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dT.type="LOCAL";const SL=dT;new vc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t,e){return e?Ur(e):(fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends Dy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function CL(t){return tT(t.auth,new Vy(t),t.bypassAuthState)}function jL(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),rL(n,new Vy(t),t.bypassAuthState)}async function IL(t){const{auth:e,user:n}=t;return fe(n,e,"internal-error"),nL(n,new Vy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CL;case"linkViaPopup":case"linkViaRedirect":return IL;case"reauthViaPopup":case"reauthViaRedirect":return jL;default:Wn(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=new vc(2e3,1e4);async function kL(t,e,n){if(cn(t.app))return Promise.reject(rr(t,"operation-not-supported-in-this-environment"));const r=di(t);cD(t,e,Oy);const s=hT(r,n);return new ki(r,"signInViaPopup",e,s).executeNotNull()}class ki extends fT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ki.currentPopupAction&&ki.currentPopupAction.cancel(),ki.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=My();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ki.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AL.get())};e()}}ki.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="pendingRedirect",Uu=new Map;class PL extends fT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Uu.get(this.auth._key());if(!e){try{const r=await DL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uu.set(this.auth._key(),e)}return this.bypassAuthState||Uu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DL(t,e){const n=ML(e),r=OL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function LL(t,e){Uu.set(t._key(),e)}function OL(t){return Ur(t._redirectPersistence)}function ML(t){return Fu(RL,t.config.apiKey,t.name)}async function VL(t,e,n=!1){if(cn(t.app))return Promise.reject($r(t));const r=di(t),s=hT(r,e),a=await new PL(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=10*60*1e3;class UL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mT(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(rr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FL&&this.cachedEventUids.clear(),this.cachedEventUids.has(U0(e))}saveEventToCache(e){this.cachedEventUids.add(U0(e)),this.lastProcessedEventTime=Date.now()}}function U0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t,e={}){return ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HL=/^https?/;async function WL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $L(t);for(const n of e)try{if(qL(n))return}catch{}Wn(t,"unauthorized-domain")}function qL(t){const e=Fp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!HL.test(n))return!1;if(zL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=new vc(3e4,6e4);function B0(){const t=wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KL(t){return new Promise((e,n)=>{var s,i,a;function r(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(rr(t,"network-request-failed"))},timeout:GL.get()})}if((i=(s=wr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=wr().gapi)!=null&&a.load)r();else{const l=VD("iframefcb");return wr()[l]=()=>{gapi.load?r():n(rr(t,"network-request-failed"))},XN(`${MD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function QL(t){return Bu=Bu||KL(t),Bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=new vc(5e3,15e3),XL="__/auth/iframe",JL="emulator/auth/iframe",ZL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tO(t){const e=t.config;fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ky(e,JL):`https://${t.config.authDomain}/${XL}`,r={apiKey:e.apiKey,appName:t.name,v:lo},s=eO.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${xc(r).slice(1)}`}async function nO(t){const e=await QL(t),n=wr().gapi;return fe(n,t,"internal-error"),e.open({where:document.body,url:tO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=rr(t,"network-request-failed"),l=wr().setTimeout(()=>{i(a)},YL.get());function c(){wr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sO=500,iO=600,oO="_blank",aO="http://localhost";class $0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lO(t,e,n,r=sO,s=iO){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...rO,width:r.toString(),height:s.toString(),top:i,left:a},d=Gt().toLowerCase();n&&(l=HN(d)?oO:n),$N(d)&&(e=e||aO,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[_,C])=>`${m}${_}=${C},`,"");if(jD(d)&&l!=="_self")return cO(e||"",l),new $0(null);const f=window.open(e||"",l,h);fe(f,t,"popup-blocked");try{f.focus()}catch{}return new $0(f)}function cO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="__/auth/handler",dO="emulator/auth/handler",hO=encodeURIComponent("fac");async function z0(t,e,n,r,s,i){fe(t.config.authDomain,t,"auth-domain-config-required"),fe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:lo,eventId:s};if(e instanceof Oy){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",qP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof _c){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${hO}=${encodeURIComponent(c)}`:"";return`${fO(t)}?${xc(l).slice(1)}${d}`}function fO({config:t}){return t.emulator?ky(t,dO):`https://${t.authDomain}/${uO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class mO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aT,this._completeRedirectFn=VL,this._overrideRedirectResult=LL}async _openPopup(e,n,r,s){var a;Yr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await z0(e,n,r,Fp(),s);return lO(e,i,My())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await z0(e,n,r,Fp(),s);return yL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await nO(e),r=new UL(e);return n.register("authEvent",s=>(fe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dm,{type:dm},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[dm];i!==void 0&&n(!!i),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QN()||zN()||Py()}}const pO=mO;var H0="@firebase/auth",W0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xO(t){ir(new Hn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;fe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YN(t)},d=new DD(r,s,i,c);return HD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ir(new Hn("auth-internal",e=>{const n=di(e.getProvider("auth").getImmediate());return(r=>new gO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(H0,W0,yO(t)),gn(H0,W0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=5*60,wO=NN("authIdTokenMaxAge")||vO;let q0=null;const _O=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wO)return;const s=n==null?void 0:n.token;q0!==s&&(q0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bO(t=Nh()){const e=ci(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zD(t,{popupRedirectResolver:pO,persistence:[SL,mL,aT]}),r=NN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=_O(i.toString());cL(n,a,()=>a(n.currentUser)),lL(n,l=>a(l))}}const s=_N("auth");return s&&WD(n,`http://${s}`),n}function EO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}LD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",EO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xO("Browser");var NO="firebase",TO="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(NO,TO,"app");const pT="@firebase/installations",Fy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1e4,yT=`w:${Fy}`,xT="FIS_v2",SO="https://firebaseinstallations.googleapis.com/v1",CO=60*60*1e3,jO="installations",IO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qi=new ao(jO,IO,AO);function vT(t){return t instanceof qn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT({projectId:t}){return`${SO}/projects/${t}/installations`}function _T(t){return{token:t.token,requestStatus:2,expiresIn:RO(t.expiresIn),creationTime:Date.now()}}async function bT(t,e){const r=(await e.json()).error;return qi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ET({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kO(t,{refreshToken:e}){const n=ET(t);return n.append("Authorization",PO(e)),n}async function NT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function RO(t){return Number(t.replace("s","000"))}function PO(t){return`${xT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=wT(t),s=ET(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:xT,appId:t.appId,sdkVersion:yT},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await NT(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:_T(d.authToken)}}else throw await bT("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=/^[cdef][\w-]{21}$/,zp="";function MO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=VO(t);return OO.test(n)?n:zp}catch{return zp}}function VO(t){return LO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new Map;function CT(t,e){const n=jh(t);jT(n,e),FO(n,e)}function jT(t,e){const n=ST.get(t);if(n)for(const r of n)r(e)}function FO(t,e){const n=UO();n&&n.postMessage({key:t,fid:e}),BO()}let Ri=null;function UO(){return!Ri&&"BroadcastChannel"in self&&(Ri=new BroadcastChannel("[Firebase] FID Change"),Ri.onmessage=t=>{jT(t.data.key,t.data.fid)}),Ri}function BO(){ST.size===0&&Ri&&(Ri.close(),Ri=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="firebase-installations-database",zO=1,Gi="firebase-installations-store";let hm=null;function Uy(){return hm||(hm=kN($O,zO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Gi)}}})),hm}async function Pd(t,e){const n=jh(t),s=(await Uy()).transaction(Gi,"readwrite"),i=s.objectStore(Gi),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&CT(t,e.fid),e}async function IT(t){const e=jh(t),r=(await Uy()).transaction(Gi,"readwrite");await r.objectStore(Gi).delete(e),await r.done}async function Ih(t,e){const n=jh(t),s=(await Uy()).transaction(Gi,"readwrite"),i=s.objectStore(Gi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&CT(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function By(t){let e;const n=await Ih(t.appConfig,r=>{const s=HO(r),i=WO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===zp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function HO(t){const e=t||{fid:MO(),registrationStatus:0};return AT(e)}function WO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(qi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=qO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:GO(t)}:{installationEntry:e}}async function qO(t,e){try{const n=await DO(t,e);return Pd(t.appConfig,n)}catch(n){throw vT(n)&&n.customData.serverCode===409?await IT(t.appConfig):await Pd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function GO(t){let e=await G0(t.appConfig);for(;e.registrationStatus===1;)await TT(100),e=await G0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await By(t);return r||n}return e}function G0(t){return Ih(t,e=>{if(!e)throw qi.create("installation-not-found");return AT(e)})}function AT(t){return KO(t)?{fid:t.fid,registrationStatus:0}:t}function KO(t){return t.registrationStatus===1&&t.registrationTime+gT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO({appConfig:t,heartbeatServiceProvider:e},n){const r=YO(t,n),s=kO(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:yT,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await NT(()=>fetch(r,l));if(c.ok){const d=await c.json();return _T(d)}else throw await bT("Generate Auth Token",c)}function YO(t,{fid:e}){return`${wT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $y(t,e=!1){let n;const r=await Ih(t.appConfig,i=>{if(!kT(i))throw qi.create("not-registered");const a=i.authToken;if(!e&&ZO(a))return i;if(a.requestStatus===1)return n=XO(t,e),i;{if(!navigator.onLine)throw qi.create("app-offline");const l=tM(i);return n=JO(t,l),l}});return n?await n:r.authToken}async function XO(t,e){let n=await K0(t.appConfig);for(;n.authToken.requestStatus===1;)await TT(100),n=await K0(t.appConfig);const r=n.authToken;return r.requestStatus===0?$y(t,e):r}function K0(t){return Ih(t,e=>{if(!kT(e))throw qi.create("not-registered");const n=e.authToken;return nM(n)?{...e,authToken:{requestStatus:0}}:e})}async function JO(t,e){try{const n=await QO(t,e),r={...e,authToken:n};return await Pd(t.appConfig,r),n}catch(n){if(vT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await IT(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Pd(t.appConfig,r)}throw n}}function kT(t){return t!==void 0&&t.registrationStatus===2}function ZO(t){return t.requestStatus===2&&!eM(t)}function eM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+CO}function tM(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function nM(t){return t.requestStatus===1&&t.requestTime+gT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t){const e=t,{installationEntry:n,registrationPromise:r}=await By(e);return r?r.catch(console.error):$y(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t,e=!1){const n=t;return await iM(n),(await $y(n,e)).token}async function iM(t){const{registrationPromise:e}=await By(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){if(!t||!t.options)throw fm("App Configuration");if(!t.name)throw fm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw fm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function fm(t){return qi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="installations",aM="installations-internal",lM=t=>{const e=t.getProvider("app").getImmediate(),n=oM(e),r=ci(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},cM=t=>{const e=t.getProvider("app").getImmediate(),n=ci(e,RT).getImmediate();return{getId:()=>rM(n),getToken:s=>sM(n,s)}};function uM(){ir(new Hn(RT,lM,"PUBLIC")),ir(new Hn(aM,cM,"PRIVATE"))}uM();gn(pT,Fy);gn(pT,Fy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="analytics",dM="firebase_id",hM="origin",fM=60*1e3,mM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new Eh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Cn=new ao("analytics","Analytics",pM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){if(!t.startsWith(zy)){const e=Cn.create("invalid-gtag-resource",{gtagURL:t});return nn.warn(e.message),""}return t}function PT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xM(t,e){const n=yM("firebase-js-sdk-policy",{createScriptURL:gM}),r=document.createElement("script"),s=`${zy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function vM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function wM(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await PT(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){nn.error(l)}t("config",s,i)}async function _M(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await PT(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){nn.error(i)}}function bM(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await _M(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await wM(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){nn.error(l)}}return s}function EM(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=bM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function NM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(zy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=30,SM=1e3;class CM{constructor(e={},n=SM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const DT=new CM;function jM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function IM(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:jM(n)},s=mM.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Cn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function AM(t,e=DT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Cn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Cn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new PM;return setTimeout(async()=>{l.abort()},fM),LT({appId:r,apiKey:s,measurementId:i},a,l,e)}async function LT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=DT){var l;const{appId:i,measurementId:a}=t;try{await kM(r,e)}catch(c){if(a)return nn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await IM(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!RM(d)){if(s.deleteThrottleMetadata(i),a)return nn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?v0(n,s.intervalMillis,TM):v0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),nn.debug(`Calling attemptFetch again in ${h} millis`),LT(t,f,r,s)}}function kM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function RM(t){if(!(t instanceof qn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class PM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function DM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function LM(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(){if(CN())try{await jN()}catch(t){return nn.warn(Cn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return nn.warn(Cn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function MM(t,e,n,r,s,i,a){const l=AM(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&nn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>nn.error(m)),e.push(l);const c=OM().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);NM(i)||xM(i,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[hM]="firebase",f.update=!0,h!=null&&(f[dM]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.app=e}_delete(){return delete Ho[this.app.options.appId],Promise.resolve()}}let Ho={},Q0=[];const Y0={};let mm="dataLayer",FM="gtag",X0,Hy,J0=!1;function UM(){const t=[];if(SN()&&t.push("This is a browser extension environment."),$P()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Cn.create("invalid-analytics-context",{errorInfo:e});nn.warn(n.message)}}function BM(t,e,n){UM();const r=t.options.appId;if(!r)throw Cn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)nn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Cn.create("no-api-key");if(Ho[r]!=null)throw Cn.create("already-exists",{id:r});if(!J0){vM(mm);const{wrappedGtag:i,gtagCore:a}=EM(Ho,Q0,Y0,mm,FM);Hy=i,X0=a,J0=!0}return Ho[r]=MM(t,Q0,Y0,e,X0,mm,n),new VM(t)}function $M(t=Nh()){t=$e(t);const e=ci(t,Dd);return e.isInitialized()?e.getImmediate():zM(t)}function zM(t,e={}){const n=ci(t,Dd);if(n.isInitialized()){const s=n.getImmediate();if(Kr(e,n.getOptions()))return s;throw Cn.create("already-initialized")}return n.initialize({options:e})}function HM(t,e,n){t=$e(t),LM(Hy,Ho[t.app.options.appId],e,n).catch(r=>nn.error(r))}function WM(t,e,n,r){t=$e(t),DM(Hy,Ho[t.app.options.appId],e,n,r).catch(s=>nn.error(s))}const Z0="@firebase/analytics",e_="0.10.19";function qM(){ir(new Hn(Dd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return BM(r,s,n)},"PUBLIC")),ir(new Hn("analytics-internal",t,"PRIVATE")),gn(Z0,e_),gn(Z0,e_,"esm2020");function t(e){try{const n=e.getProvider(Dd).getImmediate();return{logEvent:(r,s,i)=>WM(n,r,s,i),setUserProperties:(r,s)=>HM(n,r,s)}}catch(n){throw Cn.create("interop-component-reg-failed",{reason:n})}}}qM();var t_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,OT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function I(){}I.prototype=y.prototype,T.F=y.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(w,k,j){for(var A=Array(arguments.length-2),F=2;F<arguments.length;F++)A[F-2]=arguments[F];return y.prototype[k].apply(w,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,I){I||(I=0);const w=Array(16);if(typeof y=="string")for(var k=0;k<16;++k)w[k]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(k=0;k<16;++k)w[k]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=T.g[0],I=T.g[1],k=T.g[2];let j=T.g[3],A;A=y+(j^I&(k^j))+w[0]+3614090360&4294967295,y=I+(A<<7&4294967295|A>>>25),A=j+(k^y&(I^k))+w[1]+3905402710&4294967295,j=y+(A<<12&4294967295|A>>>20),A=k+(I^j&(y^I))+w[2]+606105819&4294967295,k=j+(A<<17&4294967295|A>>>15),A=I+(y^k&(j^y))+w[3]+3250441966&4294967295,I=k+(A<<22&4294967295|A>>>10),A=y+(j^I&(k^j))+w[4]+4118548399&4294967295,y=I+(A<<7&4294967295|A>>>25),A=j+(k^y&(I^k))+w[5]+1200080426&4294967295,j=y+(A<<12&4294967295|A>>>20),A=k+(I^j&(y^I))+w[6]+2821735955&4294967295,k=j+(A<<17&4294967295|A>>>15),A=I+(y^k&(j^y))+w[7]+4249261313&4294967295,I=k+(A<<22&4294967295|A>>>10),A=y+(j^I&(k^j))+w[8]+1770035416&4294967295,y=I+(A<<7&4294967295|A>>>25),A=j+(k^y&(I^k))+w[9]+2336552879&4294967295,j=y+(A<<12&4294967295|A>>>20),A=k+(I^j&(y^I))+w[10]+4294925233&4294967295,k=j+(A<<17&4294967295|A>>>15),A=I+(y^k&(j^y))+w[11]+2304563134&4294967295,I=k+(A<<22&4294967295|A>>>10),A=y+(j^I&(k^j))+w[12]+1804603682&4294967295,y=I+(A<<7&4294967295|A>>>25),A=j+(k^y&(I^k))+w[13]+4254626195&4294967295,j=y+(A<<12&4294967295|A>>>20),A=k+(I^j&(y^I))+w[14]+2792965006&4294967295,k=j+(A<<17&4294967295|A>>>15),A=I+(y^k&(j^y))+w[15]+1236535329&4294967295,I=k+(A<<22&4294967295|A>>>10),A=y+(k^j&(I^k))+w[1]+4129170786&4294967295,y=I+(A<<5&4294967295|A>>>27),A=j+(I^k&(y^I))+w[6]+3225465664&4294967295,j=y+(A<<9&4294967295|A>>>23),A=k+(y^I&(j^y))+w[11]+643717713&4294967295,k=j+(A<<14&4294967295|A>>>18),A=I+(j^y&(k^j))+w[0]+3921069994&4294967295,I=k+(A<<20&4294967295|A>>>12),A=y+(k^j&(I^k))+w[5]+3593408605&4294967295,y=I+(A<<5&4294967295|A>>>27),A=j+(I^k&(y^I))+w[10]+38016083&4294967295,j=y+(A<<9&4294967295|A>>>23),A=k+(y^I&(j^y))+w[15]+3634488961&4294967295,k=j+(A<<14&4294967295|A>>>18),A=I+(j^y&(k^j))+w[4]+3889429448&4294967295,I=k+(A<<20&4294967295|A>>>12),A=y+(k^j&(I^k))+w[9]+568446438&4294967295,y=I+(A<<5&4294967295|A>>>27),A=j+(I^k&(y^I))+w[14]+3275163606&4294967295,j=y+(A<<9&4294967295|A>>>23),A=k+(y^I&(j^y))+w[3]+4107603335&4294967295,k=j+(A<<14&4294967295|A>>>18),A=I+(j^y&(k^j))+w[8]+1163531501&4294967295,I=k+(A<<20&4294967295|A>>>12),A=y+(k^j&(I^k))+w[13]+2850285829&4294967295,y=I+(A<<5&4294967295|A>>>27),A=j+(I^k&(y^I))+w[2]+4243563512&4294967295,j=y+(A<<9&4294967295|A>>>23),A=k+(y^I&(j^y))+w[7]+1735328473&4294967295,k=j+(A<<14&4294967295|A>>>18),A=I+(j^y&(k^j))+w[12]+2368359562&4294967295,I=k+(A<<20&4294967295|A>>>12),A=y+(I^k^j)+w[5]+4294588738&4294967295,y=I+(A<<4&4294967295|A>>>28),A=j+(y^I^k)+w[8]+2272392833&4294967295,j=y+(A<<11&4294967295|A>>>21),A=k+(j^y^I)+w[11]+1839030562&4294967295,k=j+(A<<16&4294967295|A>>>16),A=I+(k^j^y)+w[14]+4259657740&4294967295,I=k+(A<<23&4294967295|A>>>9),A=y+(I^k^j)+w[1]+2763975236&4294967295,y=I+(A<<4&4294967295|A>>>28),A=j+(y^I^k)+w[4]+1272893353&4294967295,j=y+(A<<11&4294967295|A>>>21),A=k+(j^y^I)+w[7]+4139469664&4294967295,k=j+(A<<16&4294967295|A>>>16),A=I+(k^j^y)+w[10]+3200236656&4294967295,I=k+(A<<23&4294967295|A>>>9),A=y+(I^k^j)+w[13]+681279174&4294967295,y=I+(A<<4&4294967295|A>>>28),A=j+(y^I^k)+w[0]+3936430074&4294967295,j=y+(A<<11&4294967295|A>>>21),A=k+(j^y^I)+w[3]+3572445317&4294967295,k=j+(A<<16&4294967295|A>>>16),A=I+(k^j^y)+w[6]+76029189&4294967295,I=k+(A<<23&4294967295|A>>>9),A=y+(I^k^j)+w[9]+3654602809&4294967295,y=I+(A<<4&4294967295|A>>>28),A=j+(y^I^k)+w[12]+3873151461&4294967295,j=y+(A<<11&4294967295|A>>>21),A=k+(j^y^I)+w[15]+530742520&4294967295,k=j+(A<<16&4294967295|A>>>16),A=I+(k^j^y)+w[2]+3299628645&4294967295,I=k+(A<<23&4294967295|A>>>9),A=y+(k^(I|~j))+w[0]+4096336452&4294967295,y=I+(A<<6&4294967295|A>>>26),A=j+(I^(y|~k))+w[7]+1126891415&4294967295,j=y+(A<<10&4294967295|A>>>22),A=k+(y^(j|~I))+w[14]+2878612391&4294967295,k=j+(A<<15&4294967295|A>>>17),A=I+(j^(k|~y))+w[5]+4237533241&4294967295,I=k+(A<<21&4294967295|A>>>11),A=y+(k^(I|~j))+w[12]+1700485571&4294967295,y=I+(A<<6&4294967295|A>>>26),A=j+(I^(y|~k))+w[3]+2399980690&4294967295,j=y+(A<<10&4294967295|A>>>22),A=k+(y^(j|~I))+w[10]+4293915773&4294967295,k=j+(A<<15&4294967295|A>>>17),A=I+(j^(k|~y))+w[1]+2240044497&4294967295,I=k+(A<<21&4294967295|A>>>11),A=y+(k^(I|~j))+w[8]+1873313359&4294967295,y=I+(A<<6&4294967295|A>>>26),A=j+(I^(y|~k))+w[15]+4264355552&4294967295,j=y+(A<<10&4294967295|A>>>22),A=k+(y^(j|~I))+w[6]+2734768916&4294967295,k=j+(A<<15&4294967295|A>>>17),A=I+(j^(k|~y))+w[13]+1309151649&4294967295,I=k+(A<<21&4294967295|A>>>11),A=y+(k^(I|~j))+w[4]+4149444226&4294967295,y=I+(A<<6&4294967295|A>>>26),A=j+(I^(y|~k))+w[11]+3174756917&4294967295,j=y+(A<<10&4294967295|A>>>22),A=k+(y^(j|~I))+w[2]+718787259&4294967295,k=j+(A<<15&4294967295|A>>>17),A=I+(j^(k|~y))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.v=function(T,y){y===void 0&&(y=T.length);const I=y-this.blockSize,w=this.C;let k=this.h,j=0;for(;j<y;){if(k==0)for(;j<=I;)s(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<y;)if(w[k++]=T.charCodeAt(j++),k==this.blockSize){s(this,w),k=0;break}}else for(;j<y;)if(w[k++]=T[j++],k==this.blockSize){s(this,w),k=0;break}}this.h=k,this.o+=y},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;y=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=y&255,y/=256;for(this.v(T),T=Array(16),y=0,I=0;I<4;++I)for(let w=0;w<32;w+=8)T[y++]=this.g[I]>>>w&255;return T};function i(T,y){var I=l;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=y(T)}function a(T,y){this.h=y;const I=[];let w=!0;for(let k=T.length-1;k>=0;k--){const j=T[k]|0;w&&j==y||(I[k]=j,w=!1)}this.g=I}var l={};function c(T){return-128<=T&&T<128?i(T,function(y){return new a([y|0],y<0?-1:0)}):new a([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return x(d(-T));const y=[];let I=1;for(let w=0;T>=I;w++)y[w]=T/I|0,I*=4294967296;return new a(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return x(h(T.substring(1),y));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(y,8));let w=f;for(let j=0;j<T.length;j+=8){var k=Math.min(8,T.length-j);const A=parseInt(T.substring(j,j+k),y);k<8?(k=d(Math.pow(y,k)),w=w.j(k).add(d(A))):(w=w.j(I),w=w.add(d(A)))}return w}var f=c(0),m=c(1),_=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-x(this).m();let T=0,y=1;for(let I=0;I<this.g.length;I++){const w=this.i(I);T+=(w>=0?w:4294967296+w)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(v(this))return"-"+x(this).toString(T);const y=d(Math.pow(T,6));var I=this;let w="";for(;;){const k=D(I,y).g;I=N(I,k.j(y));let j=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=k,C(I))return j+w;for(;j.length<6;)j="0"+j;w=j+w}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(let y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=N(this,T),v(T)?-1:C(T)?0:1};function x(T){const y=T.g.length,I=[];for(let w=0;w<y;w++)I[w]=~T.g[w];return new a(I,~T.h).add(m)}t.abs=function(){return v(this)?x(this):this},t.add=function(T){const y=Math.max(this.g.length,T.g.length),I=[];let w=0;for(let k=0;k<=y;k++){let j=w+(this.i(k)&65535)+(T.i(k)&65535),A=(j>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);w=A>>>16,j&=65535,A&=65535,I[k]=A<<16|j}return new a(I,I[I.length-1]&-2147483648?-1:0)};function N(T,y){return T.add(x(y))}t.j=function(T){if(C(this)||C(T))return f;if(v(this))return v(T)?x(this).j(x(T)):x(x(this).j(T));if(v(T))return x(this.j(x(T)));if(this.l(_)<0&&T.l(_)<0)return d(this.m()*T.m());const y=this.g.length+T.g.length,I=[];for(var w=0;w<2*y;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(let k=0;k<T.g.length;k++){const j=this.i(w)>>>16,A=this.i(w)&65535,F=T.i(k)>>>16,q=T.i(k)&65535;I[2*w+2*k]+=A*q,b(I,2*w+2*k),I[2*w+2*k+1]+=j*q,b(I,2*w+2*k+1),I[2*w+2*k+1]+=A*F,b(I,2*w+2*k+1),I[2*w+2*k+2]+=j*F,b(I,2*w+2*k+2)}for(T=0;T<y;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=y;T<2*y;T++)I[T]=0;return new a(I,0)};function b(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function S(T,y){this.g=T,this.h=y}function D(T,y){if(C(y))throw Error("division by zero");if(C(T))return new S(f,f);if(v(T))return y=D(x(T),y),new S(x(y.g),x(y.h));if(v(y))return y=D(T,x(y)),new S(x(y.g),y.h);if(T.g.length>30){if(v(T)||v(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=y;w.l(T)<=0;)I=L(I),w=L(w);var k=R(I,1),j=R(w,1);for(w=R(w,2),I=R(I,2);!C(w);){var A=j.add(w);A.l(T)<=0&&(k=k.add(I),j=A),w=R(w,1),I=R(I,1)}return y=N(T,k.j(y)),new S(k,y)}for(k=f;T.l(y)>=0;){for(I=Math.max(1,Math.floor(T.m()/y.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),j=d(I),A=j.j(y);v(A)||A.l(T)>0;)I-=w,j=d(I),A=j.j(y);C(j)&&(j=m),k=k.add(j),T=N(T,A)}return new S(k,T)}t.B=function(T){return D(this,T).h},t.and=function(T){const y=Math.max(this.g.length,T.g.length),I=[];for(let w=0;w<y;w++)I[w]=this.i(w)&T.i(w);return new a(I,this.h&T.h)},t.or=function(T){const y=Math.max(this.g.length,T.g.length),I=[];for(let w=0;w<y;w++)I[w]=this.i(w)|T.i(w);return new a(I,this.h|T.h)},t.xor=function(T){const y=Math.max(this.g.length,T.g.length),I=[];for(let w=0;w<y;w++)I[w]=this.i(w)^T.i(w);return new a(I,this.h^T.h)};function L(T){const y=T.g.length+1,I=[];for(let w=0;w<y;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new a(I,T.h)}function R(T,y){const I=y>>5;y%=32;const w=T.g.length-I,k=[];for(let j=0;j<w;j++)k[j]=y>0?T.i(j+I)>>>y|T.i(j+I+1)<<32-y:T.i(j+I);return new a(k,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,OT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,zs=a}).apply(typeof t_<"u"?t_:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MT,hl,VT,$u,Hp,FT,UT,BT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var p=0;p<u.length;++p){var E=u[p];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var E=r;u=u.split(".");for(var P=0;P<u.length-1;P++){var V=u[P];if(!(V in E))break e;E=E[V]}u=u[u.length-1],P=E[u],p=p(P),p!=P&&p!=null&&e(E,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var E=[],P;for(P in p)Object.prototype.hasOwnProperty.call(p,P)&&E.push([P,p[P]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,E){return u.call.apply(u.bind,arguments)}function d(u,p,E){return d=c,d.apply(null,arguments)}function h(u,p){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function f(u,p){function E(){}E.prototype=p.prototype,u.Z=p.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(P,V,U){for(var ee=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)ee[_e-2]=arguments[_e];return p.prototype[V].apply(P,ee)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function _(u){const p=u.length;if(p>0){const E=Array(p);for(let P=0;P<p;P++)E[P]=u[P];return E}return[]}function C(u,p){for(let P=1;P<arguments.length;P++){const V=arguments[P];var E=typeof V;if(E=E!="object"?E:V?Array.isArray(V)?"array":E:"null",E=="array"||E=="object"&&typeof V.length=="number"){E=u.length||0;const U=V.length||0;u.length=E+U;for(let ee=0;ee<U;ee++)u[E+ee]=V[ee]}else u.push(V)}}class v{constructor(p,E){this.i=p,this.j=E,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(u){a.setTimeout(()=>{throw u},0)}function N(){var u=T;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class b{constructor(){this.h=this.g=null}add(p,E){const P=S.get();P.set(p,E),this.h?this.h.next=P:this.g=P,this.h=P}}var S=new v(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(p,E){this.h=p,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let L,R=!1,T=new b,y=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(I)}};function I(){for(var u;u=N();){try{u.h.call(u.g)}catch(E){x(E)}var p=S;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}R=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};a.addEventListener("test",E,p),a.removeEventListener("test",E,p)}catch{}return u}();function A(u){return/^[\s\xa0]*$/.test(u)}function F(u,p){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}f(F,k),F.prototype.init=function(u,p){const E=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(E=="mouseover"?p=u.fromElement:E=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),B=0;function $(u,p,E,P,V){this.listener=u,this.proxy=null,this.src=p,this.type=E,this.capture=!!P,this.ha=V,this.key=++B,this.da=this.fa=!1}function O(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function W(u,p,E){for(const P in u)p.call(E,u[P],P,u)}function Y(u,p){for(const E in u)p.call(void 0,u[E],E,u)}function M(u){const p={};for(const E in u)p[E]=u[E];return p}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,p){let E,P;for(let V=1;V<arguments.length;V++){P=arguments[V];for(E in P)u[E]=P[E];for(let U=0;U<G.length;U++)E=G[U],Object.prototype.hasOwnProperty.call(P,E)&&(u[E]=P[E])}}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,p,E,P,V){const U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);const ee=ne(u,p,P,V);return ee>-1?(p=u[ee],E||(p.fa=!1)):(p=new $(p,this.src,U,!!P,V),p.fa=E,u.push(p)),p};function Z(u,p){const E=p.type;if(E in u.g){var P=u.g[E],V=Array.prototype.indexOf.call(P,p,void 0),U;(U=V>=0)&&Array.prototype.splice.call(P,V,1),U&&(O(p),u.g[E].length==0&&(delete u.g[E],u.h--))}}function ne(u,p,E,P){for(let V=0;V<u.length;++V){const U=u[V];if(!U.da&&U.listener==p&&U.capture==!!E&&U.ha==P)return V}return-1}var X="closure_lm_"+(Math.random()*1e6|0),de={};function Me(u,p,E,P,V){if(Array.isArray(p)){for(let U=0;U<p.length;U++)Me(u,p[U],E,P,V);return null}return E=Oc(E),u&&u[q]?u.J(p,E,l(P)?!!P.capture:!1,V):Ce(u,p,E,!1,P,V)}function Ce(u,p,E,P,V,U){if(!p)throw Error("Invalid event type");const ee=l(V)?!!V.capture:!!V;let _e=kr(u);if(_e||(u[X]=_e=new pe(u)),E=_e.add(p,E,P,ee,U),E.proxy)return E;if(P=Ee(),E.proxy=P,P.src=u,P.listener=E,u.addEventListener)j||(V=ee),V===void 0&&(V=!1),u.addEventListener(p.toString(),P,V);else if(u.attachEvent)u.attachEvent(xn(p.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ee(){function u(E){return p.call(u.src,u.listener,E)}const p=yi;return u}function je(u,p,E,P,V){if(Array.isArray(p))for(var U=0;U<p.length;U++)je(u,p[U],E,P,V);else P=l(P)?!!P.capture:!!P,E=Oc(E),u&&u[q]?(u=u.i,U=String(p).toString(),U in u.g&&(p=u.g[U],E=ne(p,E,P,V),E>-1&&(O(p[E]),Array.prototype.splice.call(p,E,1),p.length==0&&(delete u.g[U],u.h--)))):u&&(u=kr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ne(p,E,P,V)),(E=u>-1?p[u]:null)&&It(E))}function It(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[q])Z(p.i,u);else{var E=u.type,P=u.proxy;p.removeEventListener?p.removeEventListener(E,P,u.capture):p.detachEvent?p.detachEvent(xn(E),P):p.addListener&&p.removeListener&&p.removeListener(P),(E=kr(p))?(Z(E,u),E.h==0&&(E.src=null,p[X]=null)):O(u)}}}function xn(u){return u in de?de[u]:de[u]="on"+u}function yi(u,p){if(u.da)u=!0;else{p=new F(p,this);const E=u.listener,P=u.ha||u.src;u.fa&&It(u),u=E.call(P,p)}return u}function kr(u){return u=u[X],u instanceof pe?u:null}var Rr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oc(u){return typeof u=="function"?u:(u[Rr]||(u[Rr]=function(p){return u.handleEvent(p)}),u[Rr])}function ut(){w.call(this),this.i=new pe(this),this.M=this,this.G=null}f(ut,w),ut.prototype[q]=!0,ut.prototype.removeEventListener=function(u,p,E,P){je(this,u,p,E,P)};function Kt(u,p){var E,P=u.G;if(P)for(E=[];P;P=P.G)E.push(P);if(u=u.M,P=p.type||p,typeof p=="string")p=new k(p,u);else if(p instanceof k)p.target=p.target||u;else{var V=p;p=new k(P,u),ce(p,V)}V=!0;let U,ee;if(E)for(ee=E.length-1;ee>=0;ee--)U=p.g=E[ee],V=Mc(U,P,!0,p)&&V;if(U=p.g=u,V=Mc(U,P,!0,p)&&V,V=Mc(U,P,!1,p)&&V,E)for(ee=0;ee<E.length;ee++)U=p.g=E[ee],V=Mc(U,P,!1,p)&&V}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const E=u.g[p];for(let P=0;P<E.length;P++)O(E[P]);delete u.g[p],u.h--}}this.G=null},ut.prototype.J=function(u,p,E,P){return this.i.add(String(u),p,!1,E,P)},ut.prototype.K=function(u,p,E,P){return this.i.add(String(u),p,!0,E,P)};function Mc(u,p,E,P){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let V=!0;for(let U=0;U<p.length;++U){const ee=p[U];if(ee&&!ee.da&&ee.capture==E){const _e=ee.listener,vt=ee.ha||ee.src;ee.fa&&Z(u.i,ee),V=_e.call(vt,P)!==!1&&V}}return V&&!P.defaultPrevented}function N2(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(u,p||0)}function sv(u){u.g=N2(()=>{u.g=null,u.i&&(u.i=!1,sv(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class T2 extends w{constructor(p,E){super(),this.m=p,this.l=E,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:sv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pa(u){w.call(this),this.h=u,this.g={}}f(Pa,w);var iv=[];function ov(u){W(u.g,function(p,E){this.g.hasOwnProperty(E)&&It(p)},u),u.g={}}Pa.prototype.N=function(){Pa.Z.N.call(this),ov(this)},Pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pf=a.JSON.stringify,S2=a.JSON.parse,C2=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function av(){}function lv(){}var Da={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gf(){k.call(this,"d")}f(gf,k);function yf(){k.call(this,"c")}f(yf,k);var xi={},cv=null;function Vc(){return cv=cv||new ut}xi.Ia="serverreachability";function uv(u){k.call(this,xi.Ia,u)}f(uv,k);function La(u){const p=Vc();Kt(p,new uv(p))}xi.STAT_EVENT="statevent";function dv(u,p){k.call(this,xi.STAT_EVENT,u),this.stat=p}f(dv,k);function Qt(u){const p=Vc();Kt(p,new dv(p,u))}xi.Ja="timingevent";function hv(u,p){k.call(this,xi.Ja,u),this.size=p}f(hv,k);function Oa(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Ma(){this.g=!0}Ma.prototype.ua=function(){this.g=!1};function j2(u,p,E,P,V,U){u.info(function(){if(u.g)if(U){var ee="",_e=U.split("&");for(let Ue=0;Ue<_e.length;Ue++){var vt=_e[Ue].split("=");if(vt.length>1){const Nt=vt[0];vt=vt[1];const ur=Nt.split("_");ee=ur.length>=2&&ur[1]=="type"?ee+(Nt+"="+vt+"&"):ee+(Nt+"=redacted&")}}}else ee=null;else ee=U;return"XMLHTTP REQ ("+P+") [attempt "+V+"]: "+p+`
`+E+`
`+ee})}function I2(u,p,E,P,V,U,ee){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+V+"]: "+p+`
`+E+`
`+U+" "+ee})}function ho(u,p,E,P){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+k2(u,E)+(P?" "+P:"")})}function A2(u,p){u.info(function(){return"TIMEOUT: "+p})}Ma.prototype.info=function(){};function k2(u,p){if(!u.g)return p;if(!p)return null;try{const U=JSON.parse(p);if(U){for(u=0;u<U.length;u++)if(Array.isArray(U[u])){var E=U[u];if(!(E.length<2)){var P=E[1];if(Array.isArray(P)&&!(P.length<1)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(let ee=1;ee<P.length;ee++)P[ee]=""}}}}return pf(U)}catch{return p}}var Fc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mv;function xf(){}f(xf,av),xf.prototype.g=function(){return new XMLHttpRequest},mv=new xf;function Va(u){return encodeURIComponent(String(u))}function R2(u){var p=1;u=u.split(":");const E=[];for(;p>0&&u.length;)E.push(u.shift()),p--;return u.length&&E.push(u.join(":")),E}function os(u,p,E,P){this.j=u,this.i=p,this.l=E,this.S=P||1,this.V=new Pa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pv}function pv(){this.i=null,this.g="",this.h=!1}var gv={},vf={};function wf(u,p,E){u.M=1,u.A=Bc(cr(p)),u.u=E,u.R=!0,yv(u,null)}function yv(u,p){u.F=Date.now(),Uc(u),u.B=cr(u.A);var E=u.B,P=u.S;Array.isArray(P)||(P=[String(P)]),Av(E.i,"t",P),u.C=0,E=u.j.L,u.h=new pv,u.g=Kv(u.j,E?p:null,!u.u),u.P>0&&(u.O=new T2(d(u.Y,u,u.g),u.P)),p=u.V,E=u.g,P=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(iv[0]=V.toString()),V=iv);for(let U=0;U<V.length;U++){const ee=Me(E,V[U],P||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),La(),j2(u.i,u.v,u.B,u.l,u.S,u.u)}os.prototype.ba=function(u){u=u.target;const p=this.O;p&&cs(u)==3?p.j():this.Y(u)},os.prototype.Y=function(u){try{if(u==this.g)e:{const _e=cs(this.g),vt=this.g.ya(),Ue=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Mv(this.g)))){this.K||_e!=4||vt==7||(vt==8||Ue<=0?La(3):La(2)),_f(this);var p=this.g.ca();this.X=p;var E=P2(this);if(this.o=p==200,I2(this.i,this.v,this.B,this.l,this.S,_e,p),this.o){if(this.U&&!this.L){t:{if(this.g){var P,V=this.g;if((P=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(P)){var U=P;break t}}U=null}if(u=U)ho(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bf(this,u);else{this.o=!1,this.m=3,Qt(12),vi(this),Fa(this);break e}}if(this.R){u=!0;let Nt;for(;!this.K&&this.C<E.length;)if(Nt=D2(this,E),Nt==vf){_e==4&&(this.m=4,Qt(14),u=!1),ho(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==gv){this.m=4,Qt(15),ho(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else ho(this.i,this.l,Nt,null),bf(this,Nt);if(xv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||E.length!=0||this.h.h||(this.m=1,Qt(16),u=!1),this.o=this.o&&u,!u)ho(this.i,this.l,E,"[Invalid Chunked Response]"),vi(this),Fa(this);else if(E.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Af(ee),ee.P=!0,Qt(11))}}else ho(this.i,this.l,E,null),bf(this,E);_e==4&&vi(this),this.o&&!this.K&&(_e==4?Hv(this.j,this):(this.o=!1,Uc(this)))}else K2(this.g),p==400&&E.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),vi(this),Fa(this)}}}catch{}finally{}};function P2(u){if(!xv(u))return u.g.la();const p=Mv(u.g);if(p==="")return"";let E="";const P=p.length,V=cs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vi(u),Fa(u),"";u.h.i=new a.TextDecoder}for(let U=0;U<P;U++)u.h.h=!0,E+=u.h.i.decode(p[U],{stream:!(V&&U==P-1)});return p.length=0,u.h.g+=E,u.C=0,u.h.g}function xv(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function D2(u,p){var E=u.C,P=p.indexOf(`
`,E);return P==-1?vf:(E=Number(p.substring(E,P)),isNaN(E)?gv:(P+=1,P+E>p.length?vf:(p=p.slice(P,P+E),u.C=P+E,p)))}os.prototype.cancel=function(){this.K=!0,vi(this)};function Uc(u){u.T=Date.now()+u.H,vv(u,u.H)}function vv(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Oa(d(u.aa,u),p)}function _f(u){u.D&&(a.clearTimeout(u.D),u.D=null)}os.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(A2(this.i,this.B),this.M!=2&&(La(),Qt(17)),vi(this),this.m=2,Fa(this)):vv(this,this.T-u)};function Fa(u){u.j.I==0||u.K||Hv(u.j,u)}function vi(u){_f(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,ov(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function bf(u,p){try{var E=u.j;if(E.I!=0&&(E.g==u||Ef(E.h,u))){if(!u.L&&Ef(E.h,u)&&E.I==3){try{var P=E.Ba.g.parse(p)}catch{P=null}if(Array.isArray(P)&&P.length==3){var V=P;if(V[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)qc(E),Hc(E);else break e;If(E),Qt(18)}}else E.xa=V[1],0<E.xa-E.K&&V[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Oa(d(E.Va,E),6e3));bv(E.h)<=1&&E.ta&&(E.ta=void 0)}else _i(E,11)}else if((u.L||E.g==u)&&qc(E),!A(p))for(V=E.Ba.g.parse(p),p=0;p<V.length;p++){let Ue=V[p];const Nt=Ue[0];if(!(Nt<=E.K))if(E.K=Nt,Ue=Ue[1],E.I==2)if(Ue[0]=="c"){E.M=Ue[1],E.ba=Ue[2];const ur=Ue[3];ur!=null&&(E.ka=ur,E.j.info("VER="+E.ka));const bi=Ue[4];bi!=null&&(E.za=bi,E.j.info("SVER="+E.za));const us=Ue[5];us!=null&&typeof us=="number"&&us>0&&(P=1.5*us,E.O=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const ds=u.g;if(ds){const Kc=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kc){var U=P.h;U.g||Kc.indexOf("spdy")==-1&&Kc.indexOf("quic")==-1&&Kc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Nf(U,U.h),U.h=null))}if(P.G){const kf=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;kf&&(P.wa=kf,We(P.J,P.G,kf))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),P=E;var ee=u;if(P.na=Gv(P,P.L?P.ba:null,P.W),ee.L){Ev(P.h,ee);var _e=ee,vt=P.O;vt&&(_e.H=vt),_e.D&&(_f(_e),Uc(_e)),P.g=ee}else $v(P);E.i.length>0&&Wc(E)}else Ue[0]!="stop"&&Ue[0]!="close"||_i(E,7);else E.I==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?_i(E,7):jf(E):Ue[0]!="noop"&&E.l&&E.l.qa(Ue),E.A=0)}}La(4)}catch{}}var L2=class{constructor(u,p){this.g=u,this.map=p}};function wv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _v(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function bv(u){return u.h?1:u.g?u.g.size:0}function Ef(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Nf(u,p){u.g?u.g.add(p):u.h=p}function Ev(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}wv.prototype.cancel=function(){if(this.i=Nv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Nv(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const E of u.g.values())p=p.concat(E.G);return p}return _(u.i)}var Tv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function O2(u,p){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const P=u[E].indexOf("=");let V,U=null;P>=0?(V=u[E].substring(0,P),U=u[E].substring(P+1)):V=u[E],p(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function as(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof as?(this.l=u.l,Ua(this,u.j),this.o=u.o,this.g=u.g,Ba(this,u.u),this.h=u.h,Tf(this,kv(u.i)),this.m=u.m):u&&(p=String(u).match(Tv))?(this.l=!1,Ua(this,p[1]||"",!0),this.o=$a(p[2]||""),this.g=$a(p[3]||"",!0),Ba(this,p[4]),this.h=$a(p[5]||"",!0),Tf(this,p[6]||"",!0),this.m=$a(p[7]||"")):(this.l=!1,this.i=new Ha(null,this.l))}as.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(za(p,Sv,!0),":");var E=this.g;return(E||p=="file")&&(u.push("//"),(p=this.o)&&u.push(za(p,Sv,!0),"@"),u.push(Va(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(za(E,E.charAt(0)=="/"?F2:V2,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",za(E,B2)),u.join("")},as.prototype.resolve=function(u){const p=cr(this);let E=!!u.j;E?Ua(p,u.j):E=!!u.o,E?p.o=u.o:E=!!u.g,E?p.g=u.g:E=u.u!=null;var P=u.h;if(E)Ba(p,u.u);else if(E=!!u.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var V=p.h.lastIndexOf("/");V!=-1&&(P=p.h.slice(0,V+1)+P)}if(V=P,V==".."||V==".")P="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){P=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let ee=0;ee<V.length;){const _e=V[ee++];_e=="."?P&&ee==V.length&&U.push(""):_e==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),P&&ee==V.length&&U.push("")):(U.push(_e),P=!0)}P=U.join("/")}else P=V}return E?p.h=P:E=u.i.toString()!=="",E?Tf(p,kv(u.i)):E=!!u.m,E&&(p.m=u.m),p};function cr(u){return new as(u)}function Ua(u,p,E){u.j=E?$a(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ba(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Tf(u,p,E){p instanceof Ha?(u.i=p,$2(u.i,u.l)):(E||(p=za(p,U2)),u.i=new Ha(p,u.l))}function We(u,p,E){u.i.set(p,E)}function Bc(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function $a(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function za(u,p,E){return typeof u=="string"?(u=encodeURI(u).replace(p,M2),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function M2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Sv=/[#\/\?@]/g,V2=/[#\?:]/g,F2=/[#\?]/g,U2=/[#\?@]/g,B2=/#/g;function Ha(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function wi(u){u.g||(u.g=new Map,u.h=0,u.i&&O2(u.i,function(p,E){u.add(decodeURIComponent(p.replace(/\+/g," ")),E)}))}t=Ha.prototype,t.add=function(u,p){wi(this),this.i=null,u=fo(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(p),this.h+=1,this};function Cv(u,p){wi(u),p=fo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function jv(u,p){return wi(u),p=fo(u,p),u.g.has(p)}t.forEach=function(u,p){wi(this),this.g.forEach(function(E,P){E.forEach(function(V){u.call(p,V,P,this)},this)},this)};function Iv(u,p){wi(u);let E=[];if(typeof p=="string")jv(u,p)&&(E=E.concat(u.g.get(fo(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)E=E.concat(u[p]);return E}t.set=function(u,p){return wi(this),this.i=null,u=fo(this,u),jv(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=Iv(this,u),u.length>0?String(u[0]):p):p};function Av(u,p,E){Cv(u,p),E.length>0&&(u.i=null,u.g.set(fo(u,p),_(E)),u.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let P=0;P<p.length;P++){var E=p[P];const V=Va(E);E=Iv(this,E);for(let U=0;U<E.length;U++){let ee=V;E[U]!==""&&(ee+="="+Va(E[U])),u.push(ee)}}return this.i=u.join("&")};function kv(u){const p=new Ha;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function fo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function $2(u,p){p&&!u.j&&(wi(u),u.i=null,u.g.forEach(function(E,P){const V=P.toLowerCase();P!=V&&(Cv(this,P),Av(this,V,E))},u)),u.j=p}function z2(u,p){const E=new Ma;if(a.Image){const P=new Image;P.onload=h(ls,E,"TestLoadImage: loaded",!0,p,P),P.onerror=h(ls,E,"TestLoadImage: error",!1,p,P),P.onabort=h(ls,E,"TestLoadImage: abort",!1,p,P),P.ontimeout=h(ls,E,"TestLoadImage: timeout",!1,p,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else p(!1)}function H2(u,p){const E=new Ma,P=new AbortController,V=setTimeout(()=>{P.abort(),ls(E,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:P.signal}).then(U=>{clearTimeout(V),U.ok?ls(E,"TestPingServer: ok",!0,p):ls(E,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),ls(E,"TestPingServer: error",!1,p)})}function ls(u,p,E,P,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),P(E)}catch{}}function W2(){this.g=new C2}function Sf(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Sf,av),Sf.prototype.g=function(){return new $c(this.i,this.h)};function $c(u,p){ut.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f($c,ut),t=$c.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,qa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rv(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rv(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Wa(this):qa(this),this.readyState==3&&Rv(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Wa(this))},t.Na=function(u){this.g&&(this.response=u,Wa(this))},t.ga=function(){this.g&&Wa(this)};function Wa(u){u.readyState=4,u.l=null,u.j=null,u.B=null,qa(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var E=p.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=p.next();return u.join(`\r
`)};function qa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Pv(u){let p="";return W(u,function(E,P){p+=P,p+=":",p+=E,p+=`\r
`}),p}function Cf(u,p,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=Pv(E),typeof u=="string"?E!=null&&Va(E):We(u,p,E))}function st(u){ut.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(st,ut);var q2=/^https?$/i,G2=["POST","PUT"];t=st.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mv.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(U){Dv(this,U);return}if(u=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var V in P)E.set(V,P[V]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const U of P.keys())E.set(U,P.get(U));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(U=>U.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(G2,p,void 0)>=0)||P||V||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ee]of E)this.g.setRequestHeader(U,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(U){Dv(this,U)}};function Dv(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Lv(u),zc(u)}function Lv(u){u.A||(u.A=!0,Kt(u,"complete"),Kt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Kt(this,"complete"),Kt(this,"abort"),zc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zc(this,!0)),st.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ov(this):this.Xa())},t.Xa=function(){Ov(this)};function Ov(u){if(u.h&&typeof i<"u"){if(u.v&&cs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Kt(u,"readystatechange"),cs(u)==4){u.h=!1;try{const U=u.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var E;if(!(E=p)){var P;if(P=U===0){let ee=String(u.D).match(Tv)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),P=!q2.test(ee?ee.toLowerCase():"")}E=P}if(E)Kt(u,"complete"),Kt(u,"success");else{u.o=6;try{var V=cs(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",Lv(u)}}finally{zc(u)}}}}function zc(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,p||Kt(u,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return cs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),S2(p)}};function Mv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function K2(u){const p={};u=(u.g&&cs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(A(u[P]))continue;var E=R2(u[P]);const V=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const U=p[V]||[];p[V]=U,U.push(E)}Y(p,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(u,p,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||p}function Vv(u){this.za=0,this.i=[],this.j=new Ma,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ga("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ga("baseRetryDelayMs",5e3,u),this.Za=Ga("retryDelaySeedMs",1e4,u),this.Ta=Ga("forwardChannelMaxRetries",2,u),this.va=Ga("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new wv(u&&u.concurrentRequestLimit),this.Ba=new W2,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Vv.prototype,t.ka=8,t.I=1,t.connect=function(u,p,E,P){Qt(0),this.W=u,this.H=p||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.J=Gv(this,null,this.W),Wc(this)};function jf(u){if(Fv(u),u.I==3){var p=u.V++,E=cr(u.J);if(We(E,"SID",u.M),We(E,"RID",p),We(E,"TYPE","terminate"),Ka(u,E),p=new os(u,u.j,p),p.M=2,p.A=Bc(cr(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!E&&a.Image&&(new Image().src=p.A,E=!0),E||(p.g=Kv(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Uc(p)}qv(u)}function Hc(u){u.g&&(Af(u),u.g.cancel(),u.g=null)}function Fv(u){Hc(u),u.v&&(a.clearTimeout(u.v),u.v=null),qc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Wc(u){if(!_v(u.h)&&!u.m){u.m=!0;var p=u.Ea;L||y(),R||(L(),R=!0),T.add(p,u),u.D=0}}function Q2(u,p){return bv(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Oa(d(u.Ea,u,p),Wv(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new os(this,this.j,u);let U=this.o;if(this.U&&(U?(U=M(U),ce(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var p=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(p+=P,p>4096){p=E;break e}if(p===4096||E===this.i.length-1){p=E+1;break e}}p=1e3}else p=1e3;p=Bv(this,V,p),E=cr(this.J),We(E,"RID",u),We(E,"CVER",22),this.G&&We(E,"X-HTTP-Session-Id",this.G),Ka(this,E),U&&(this.R?p="headers="+Va(Pv(U))+"&"+p:this.u&&Cf(E,this.u,U)),Nf(this.h,V),this.Ra&&We(E,"TYPE","init"),this.S?(We(E,"$req",p),We(E,"SID","null"),V.U=!0,wf(V,E,null)):wf(V,E,p),this.I=2}}else this.I==3&&(u?Uv(this,u):this.i.length==0||_v(this.h)||Uv(this))};function Uv(u,p){var E;p?E=p.l:E=u.V++;const P=cr(u.J);We(P,"SID",u.M),We(P,"RID",E),We(P,"AID",u.K),Ka(u,P),u.u&&u.o&&Cf(P,u.u,u.o),E=new os(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Bv(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Nf(u.h,E),wf(E,P,p)}function Ka(u,p){u.H&&W(u.H,function(E,P){We(p,P,E)}),u.l&&W({},function(E,P){We(p,P,E)})}function Bv(u,p,E){E=Math.min(u.i.length,E);const P=u.l?d(u.l.Ka,u.l,u):null;e:{var V=u.i;let _e=-1;for(;;){const vt=["count="+E];_e==-1?E>0?(_e=V[0].g,vt.push("ofs="+_e)):_e=0:vt.push("ofs="+_e);let Ue=!0;for(let Nt=0;Nt<E;Nt++){var U=V[Nt].g;const ur=V[Nt].map;if(U-=_e,U<0)_e=Math.max(0,V[Nt].g-100),Ue=!1;else try{U="req"+U+"_"||"";try{var ee=ur instanceof Map?ur:Object.entries(ur);for(const[bi,us]of ee){let ds=us;l(us)&&(ds=pf(us)),vt.push(U+bi+"="+encodeURIComponent(ds))}}catch(bi){throw vt.push(U+"type="+encodeURIComponent("_badmap")),bi}}catch{P&&P(ur)}}if(Ue){ee=vt.join("&");break e}}ee=void 0}return u=u.i.splice(0,E),p.G=u,ee}function $v(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;L||y(),R||(L(),R=!0),T.add(p,u),u.A=0}}function If(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Oa(d(u.Da,u),Wv(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,zv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Oa(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Hc(this),zv(this))};function Af(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function zv(u){u.g=new os(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=cr(u.na);We(p,"RID","rpc"),We(p,"SID",u.M),We(p,"AID",u.K),We(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(p,"TO",u.ia),We(p,"TYPE","xmlhttp"),Ka(u,p),u.u&&u.o&&Cf(p,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=Bc(cr(p)),E.u=null,E.R=!0,yv(E,u)}t.Va=function(){this.C!=null&&(this.C=null,Hc(this),If(this),Qt(19))};function qc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Hv(u,p){var E=null;if(u.g==p){qc(u),Af(u),u.g=null;var P=2}else if(Ef(u.h,p))E=p.G,Ev(u.h,p),P=1;else return;if(u.I!=0){if(p.o)if(P==1){E=p.u?p.u.length:0,p=Date.now()-p.F;var V=u.D;P=Vc(),Kt(P,new hv(P,E)),Wc(u)}else $v(u);else if(V=p.m,V==3||V==0&&p.X>0||!(P==1&&Q2(u,p)||P==2&&If(u)))switch(E&&E.length>0&&(p=u.h,p.i=p.i.concat(E)),V){case 1:_i(u,5);break;case 4:_i(u,10);break;case 3:_i(u,6);break;default:_i(u,2)}}}function Wv(u,p){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*p}function _i(u,p){if(u.j.info("Error code "+p),p==2){var E=d(u.bb,u),P=u.Ua;const V=!P;P=new as(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ua(P,"https"),Bc(P),V?z2(P.toString(),E):H2(P.toString(),E)}else Qt(2);u.I=0,u.l&&u.l.pa(p),qv(u),Fv(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function qv(u){if(u.I=0,u.ja=[],u.l){const p=Nv(u.h);(p.length!=0||u.i.length!=0)&&(C(u.ja,p),C(u.ja,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.oa()}}function Gv(u,p,E){var P=E instanceof as?cr(E):new as(E);if(P.g!="")p&&(P.g=p+"."+P.g),Ba(P,P.u);else{var V=a.location;P=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;const U=new as(null);P&&Ua(U,P),p&&(U.g=p),V&&Ba(U,V),E&&(U.h=E),P=U}return E=u.G,p=u.wa,E&&p&&We(P,E,p),We(P,"VER",u.ka),Ka(u,P),P}function Kv(u,p,E){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new st(new Sf({ab:E})):new st(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qv(){}t=Qv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gc(){}Gc.prototype.g=function(u,p){return new vn(u,p)};function vn(u,p){ut.call(this),this.g=new Vv(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!A(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new mo(this)}f(vn,ut),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){jf(this.g)},vn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=pf(u),u=E);p.i.push(new L2(p.Ya++,u)),p.I==3&&Wc(p)},vn.prototype.N=function(){this.g.l=null,delete this.j,jf(this.g),delete this.g,vn.Z.N.call(this)};function Yv(u){gf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const E in p){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}f(Yv,gf);function Xv(){yf.call(this),this.status=1}f(Xv,yf);function mo(u){this.g=u}f(mo,Qv),mo.prototype.ra=function(){Kt(this.g,"a")},mo.prototype.qa=function(u){Kt(this.g,new Yv(u))},mo.prototype.pa=function(u){Kt(this.g,new Xv)},mo.prototype.oa=function(){Kt(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,BT=function(){return new Gc},UT=function(){return Vc()},FT=xi,Hp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,$u=Fc,fv.COMPLETE="complete",VT=fv,lv.EventType=Da,Da.OPEN="a",Da.CLOSE="b",Da.ERROR="c",Da.MESSAGE="d",ut.prototype.listen=ut.prototype.J,hl=lv,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,MT=st}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const n_="@firebase/firestore",r_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Eh("@firebase/firestore");function wo(){return Ki.logLevel}function oe(t,...e){if(Ki.logLevel<=Ne.DEBUG){const n=e.map(Wy);Ki.debug(`Firestore (${ba}): ${t}`,...n)}}function Xr(t,...e){if(Ki.logLevel<=Ne.ERROR){const n=e.map(Wy);Ki.error(`Firestore (${ba}): ${t}`,...n)}}function ra(t,...e){if(Ki.logLevel<=Ne.WARN){const n=e.map(Wy);Ki.warn(`Firestore (${ba}): ${t}`,...n)}}function Wy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$T(t,r,n)}function $T(t,e,n){let r=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xr(r),new Error(r)}function Oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$T(e,s,r)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class KM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QM{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _r,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _r)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string",31837,{l:r}),new zT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class YM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new YM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const r=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ZM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Wp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return pm(s)===pm(i)?Te(s,i):pm(s)?1:-1}return Te(t.length,e.length)}const e3=55296,t3=57343;function pm(t){const e=t.charCodeAt(0);return e>=e3&&e<=t3}function sa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__name__";class fr{constructor(e,n,r){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&me(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=fr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Te(e.length,n.length)}static compareSegments(e,n){const r=fr.isNumericId(e),s=fr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?fr.extractNumericId(e).compare(fr.extractNumericId(n)):Wp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}}class ze extends fr{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const n3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends fr{construct(e,n,r){return new Rt(e,n,r)}static isValidIdentifier(e){return n3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i_}static keyField(){return new Rt([i_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(ze.fromString(e))}static fromName(e){return new ue(ze.fromString(e).popFirst(5))}static empty(){return new ue(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,n){if(!n)throw new te(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function r3(t,e,n,r){if(e===!0&&r===!0)throw new te(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function o_(t){if(!ue.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function a_(t){if(ue.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ah(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function rn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ah(t);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function s3(t,e){if(e<=0)throw new te(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ec(t,e){if(!WT(t))throw new te(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new te(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=-62135596800,c_=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*c_);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<l_)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c_}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-l_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:yt("string",Ke._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Ke(0,0))}static max(){return new xe(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=-1;function i3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Gs(s,ue.empty(),e)}function o3(t){return new Gs(t.readTime,t.key,tc)}class Gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gs(xe.min(),ue.empty(),tc)}static max(){return new Gs(xe.max(),ue.empty(),tc)}}function a3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==l3)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new H((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function u3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Na(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-1;function Rh(t){return t==null}function Ld(t){return t===0&&1/t==-1/0}function d3(t){return typeof t=="number"&&Number.isInteger(t)&&!Ld(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="";function h3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=u_(e)),e=f3(t.get(n),e);return u_(e)}function f3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case qT:n+="";break;default:n+=i}}return n}function u_(t){return t+qT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function m3(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function GT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new h_(this.data.getIterator())}getIteratorFrom(e){return new h_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class h_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new bt(Rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new KT("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const p3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=p3.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qs(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="server_timestamp",YT="__type__",XT="__previous_value__",JT="__local_write_time__";function Ky(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YT])==null?void 0:r.stringValue)===QT}function Ph(t){const e=t.mapValue.fields[XT];return Ky(e)?Ph(e):e}function nc(t){const e=Ks(t.mapValue.fields[JT].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Od="(default)";class rc{constructor(e,n){this.projectId=e,this.database=n||Od}static empty(){return new rc("","")}get isDefaultDatabase(){return this.database===Od}isEqual(e){return e instanceof rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="__type__",y3="__max__",pu={mapValue:{}},eS="__vector__",Md="value";function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ky(t)?4:v3(t)?9007199254740991:x3(t)?10:11:me(28295,{value:t})}function Cr(t,e){if(t===e)return!0;const n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nc(t).isEqual(nc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ks(s.timestampValue),l=Ks(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qs(s.bytesValue).isEqual(Qs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return dt(s.geoPointValue.latitude)===dt(i.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return dt(s.integerValue)===dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=dt(s.doubleValue),l=dt(i.doubleValue);return a===l?Ld(a)===Ld(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return sa(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(d_(a)!==d_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Cr(a[c],l[c])))return!1;return!0}(t,e);default:return me(52216,{left:t})}}function sc(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function ia(t,e){if(t===e)return 0;const n=Ys(t),r=Ys(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=dt(i.integerValue||i.doubleValue),c=dt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return f_(t.timestampValue,e.timestampValue);case 4:return f_(nc(t),nc(e));case 5:return Wp(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Qs(i),c=Qs(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Te(l[d],c[d]);if(h!==0)return h}return Te(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Te(dt(i.latitude),dt(a.latitude));return l!==0?l:Te(dt(i.longitude),dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return m_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,_,C,v;const l=i.fields||{},c=a.fields||{},d=(m=l[Md])==null?void 0:m.arrayValue,h=(_=c[Md])==null?void 0:_.arrayValue,f=Te(((C=d==null?void 0:d.values)==null?void 0:C.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:m_(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===pu.mapValue&&a===pu.mapValue)return 0;if(i===pu.mapValue)return 1;if(a===pu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Wp(c[f],h[f]);if(m!==0)return m;const _=ia(l[c[f]],d[h[f]]);if(_!==0)return _}return Te(c.length,h.length)}(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function f_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Ks(t),r=Ks(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function m_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ia(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function oa(t){return qp(t)}function qp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=qp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${qp(n.fields[a])}`;return s+"}"}(t.mapValue):me(61005,{value:t})}function zu(t){switch(Ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ph(t);return e?16+zu(e):16;case 5:return 2*t.stringValue.length;case 6:return Qs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+zu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return hi(r.fields,(i,a)=>{s+=i.length+zu(a)}),s}(t.mapValue);default:throw me(13486,{value:t})}}function p_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Gp(t){return!!t&&"integerValue"in t}function Qy(t){return!!t&&"arrayValue"in t}function g_(t){return!!t&&"nullValue"in t}function y_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hu(t){return!!t&&"mapValue"in t}function x3(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ZT])==null?void 0:r.stringValue)===eS}function jl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jl(t.arrayValue.values[n]);return e}return{...t}}function v3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===y3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jl(n)}setAll(e){let n=Rt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=jl(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Hu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(jl(this.value))}}function tS(t){const e=[];return hi(t.fields,(n,r)=>{const s=new Rt([n]);if(Hu(r)){const i=tS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new $t(e,0,xe.min(),xe.min(),xe.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new $t(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new $t(e,2,n,xe.min(),xe.min(),un.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,xe.min(),xe.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.position=e,this.inclusive=n}}function x_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ue.comparator(ue.fromName(a.referenceValue),n.key):r=ia(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function v_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n="asc"){this.field=e,this.dir=n}}function w3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nS=class{};class gt extends nS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new b3(e,n,r):n==="array-contains"?new T3(e,r):n==="in"?new S3(e,r):n==="not-in"?new C3(e,r):n==="array-contains-any"?new j3(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new E3(e,r):new N3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ia(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends nS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new or(e,n)}matches(e){return rS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rS(t){return t.op==="and"}function sS(t){return _3(t)&&rS(t)}function _3(t){for(const e of t.filters)if(e instanceof or)return!1;return!0}function Kp(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+oa(t.value);if(sS(t))return t.filters.map(e=>Kp(e)).join(",");{const e=t.filters.map(n=>Kp(n)).join(",");return`${t.op}(${e})`}}function iS(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Cr(r.value,s.value)}(t,e):t instanceof or?function(r,s){return s instanceof or&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&iS(a,s.filters[l]),!0):!1}(t,e):void me(19439)}function oS(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${oa(n.value)}`}(t):t instanceof or?function(n){return n.op.toString()+" {"+n.getFilters().map(oS).join(" ,")+"}"}(t):"Filter"}class b3 extends gt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class E3 extends gt{constructor(e,n){super(e,"in",n),this.keys=aS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class N3 extends gt{constructor(e,n){super(e,"not-in",n),this.keys=aS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class T3 extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qy(n)&&sc(n.arrayValue,this.value)}}class S3 extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sc(this.value.arrayValue,n)}}class C3 extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sc(this.value.arrayValue,n)}}class j3 extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function w_(t,e=null,n=[],r=[],s=null,i=null,a=null){return new I3(t,e,n,r,s,i,a)}function Yy(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Rh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oa(r)).join(",")),e.Te=n}return e.Te}function Xy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!w3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v_(t.startAt,e.startAt)&&v_(t.endAt,e.endAt)}function Qp(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function A3(t,e,n,r,s,i,a,l){return new Ta(t,e,n,r,s,i,a,l)}function Dh(t){return new Ta(t)}function __(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lS(t){return t.collectionGroup!==null}function Il(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new bt(Rt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ic(i,r))}),n.has(Rt.keyField().canonicalString())||e.Ie.push(new ic(Rt.keyField(),r))}return e.Ie}function br(t){const e=ye(t);return e.Ee||(e.Ee=cS(e,Il(t))),e.Ee}function k3(t){const e=ye(t);return e.de||(e.de=cS(e,t.explicitOrderBy)),e.de}function cS(t,e){if(t.limitType==="F")return w_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ic(s.field,i)});const n=t.endAt?new Vd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vd(t.startAt.position,t.startAt.inclusive):null;return w_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yp(t,e){const n=t.filters.concat([e]);return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fd(t,e,n){return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lh(t,e){return Xy(br(t),br(e))&&t.limitType===e.limitType}function uS(t){return`${Yy(br(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>oS(s)).join(", ")}]`),Rh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>oa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>oa(s)).join(",")),`Target(${r})`}(br(t))}; limitType=${t.limitType})`}function Oh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ue.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Il(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=x_(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Il(r),s)||r.endAt&&!function(a,l,c){const d=x_(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Il(r),s))}(t,e)}function R3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dS(t){return(e,n)=>{let r=!1;for(const s of Il(t)){const i=P3(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function P3(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ia(c,d):me(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return GT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new rt(ue.comparator);function Jr(){return D3}const hS=new rt(ue.comparator);function fl(...t){let e=hS;for(const n of t)e=e.insert(n.key,n);return e}function fS(t){let e=hS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Pi(){return Al()}function mS(){return Al()}function Al(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const L3=new rt(ue.comparator),O3=new bt(ue.comparator);function Se(...t){let e=O3;for(const n of t)e=e.add(n);return e}const M3=new bt(Te);function V3(){return M3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function pS(t){return{integerValue:""+t}}function gS(t,e){return d3(e)?pS(e):Jy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function F3(t,e,n){return t instanceof Ud?function(s,i){const a={fields:{[YT]:{stringValue:QT},[JT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ky(i)&&(i=Ph(i)),i&&(a.fields[XT]=i),{mapValue:a}}(n,e):t instanceof aa?xS(t,e):t instanceof oc?vS(t,e):function(s,i){const a=yS(s,i),l=b_(a)+b_(s.Ae);return Gp(a)&&Gp(s.Ae)?pS(l):Jy(s.serializer,l)}(t,e)}function U3(t,e,n){return t instanceof aa?xS(t,e):t instanceof oc?vS(t,e):n}function yS(t,e){return t instanceof ac?function(r){return Gp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ud extends Mh{}class aa extends Mh{constructor(e){super(),this.elements=e}}function xS(t,e){const n=wS(e);for(const r of t.elements)n.some(s=>Cr(s,r))||n.push(r);return{arrayValue:{values:n}}}class oc extends Mh{constructor(e){super(),this.elements=e}}function vS(t,e){let n=wS(e);for(const r of t.elements)n=n.filter(s=>!Cr(s,r));return{arrayValue:{values:n}}}class ac extends Mh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function b_(t){return dt(t.integerValue||t.doubleValue)}function wS(t){return Qy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.field=e,this.transform=n}}function B3(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof aa&&s instanceof aa||r instanceof oc&&s instanceof oc?sa(r.elements,s.elements,Cr):r instanceof ac&&s instanceof ac?Cr(r.Ae,s.Ae):r instanceof Ud&&s instanceof Ud}(t.transform,e.transform)}class $3{constructor(e,n){this.version=e,this.transformResults=n}}class Bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Bn}static exists(e){return new Bn(void 0,e)}static updateTime(e){return new Bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vh{}function bS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zy(t.key,Bn.none()):new Nc(t.key,t.data,Bn.none());{const n=t.data,r=un.empty();let s=new bt(Rt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new fi(t.key,r,new Nn(s.toArray()),Bn.none())}}function z3(t,e,n){t instanceof Nc?function(s,i,a){const l=s.value.clone(),c=N_(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(s,i,a){if(!Wu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=N_(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(ES(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function kl(t,e,n,r){return t instanceof Nc?function(i,a,l,c){if(!Wu(i.precondition,a))return l;const d=i.value.clone(),h=T_(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(i,a,l,c){if(!Wu(i.precondition,a))return l;const d=T_(i.fieldTransforms,c,a),h=a.data;return h.setAll(ES(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return Wu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function H3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=yS(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function E_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&sa(r,s,(i,a)=>B3(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nc extends Vh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fi extends Vh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ES(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function N_(t,e,n){const r=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,U3(a,l,n[s]))}return r}function T_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,F3(i,a,e))}return r}class Zy extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W3 extends Vh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&z3(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=kl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=mS();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=bS(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(n,r)=>E_(n,r))&&sa(this.baseMutations,e.baseMutations,(n,r)=>E_(n,r))}}class ex{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return L3}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new ex(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ie;function Y3(t){switch(t){case z.OK:return me(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function NS(t){if(t===void 0)return Xr("GRPC error has no .code"),z.UNKNOWN;switch(t){case mt.OK:return z.OK;case mt.CANCELLED:return z.CANCELLED;case mt.UNKNOWN:return z.UNKNOWN;case mt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case mt.INTERNAL:return z.INTERNAL;case mt.UNAVAILABLE:return z.UNAVAILABLE;case mt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case mt.NOT_FOUND:return z.NOT_FOUND;case mt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case mt.ABORTED:return z.ABORTED;case mt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case mt.DATA_LOSS:return z.DATA_LOSS;default:return me(39323,{code:t})}}(Ie=mt||(mt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=new zs([4294967295,4294967295],0);function S_(t){const e=X3().encode(t),n=new OT;return n.update(e),new Uint8Array(n.digest())}function C_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zs([n,r],0),new zs([s,i],0)]}class tx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ml(`Invalid padding: ${n}`);if(r<0)throw new ml(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ml(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zs.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(zs.fromNumber(r)));return s.compare(J3)===1&&(s=new zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=S_(e),[r,s]=C_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new tx(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=S_(e),[r,s]=C_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fh(xe.min(),s,new rt(Te),Jr(),Se())}}class Tc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tc(r,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class TS{constructor(e,n){this.targetId=e,this.Ce=n}}class SS{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class j_{constructor(){this.ve=0,this.Fe=I_(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Se(),n=Se(),r=Se();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:me(38017,{changeType:i})}}),new Tc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=I_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jr(),this.Je=gu(),this.He=gu(),this.Ye=new rt(Te)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Qp(i))if(r===0){const a=new ue(i.path);this.et(n,a,$t.newNoDocument(a,xe.min()))}else Oe(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Qs(r).toUint8Array()}catch(c){if(c instanceof KT)return ra("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new tx(a,s,i)}catch(c){return ra(c instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Qp(l.target)){const c=new ue(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,$t.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Se();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Fh(e,n,this.Ye,this.je,r);return this.je=Jr(),this.Je=gu(),this.He=gu(),this.Ye=new rt(Te),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new j_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new bt(Te),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new bt(Te),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new j_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function gu(){return new rt(ue.comparator)}function I_(){return new rt(ue.comparator)}const e6={asc:"ASCENDING",desc:"DESCENDING"},t6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n6={and:"AND",or:"OR"};class r6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xp(t,e){return t.useProto3Json||Rh(e)?e:{value:e}}function Bd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s6(t,e){return Bd(t,e.toTimestamp())}function Er(t){return Oe(!!t,49232),xe.fromTimestamp(function(n){const r=Ks(n);return new Ke(r.seconds,r.nanos)}(t))}function nx(t,e){return Jp(t,e).canonicalString()}function Jp(t,e){const n=function(s){return new ze(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jS(t){const e=ze.fromString(t);return Oe(DS(e),10190,{key:e.toString()}),e}function Zp(t,e){return nx(t.databaseId,e.path)}function gm(t,e){const n=jS(e);if(n.get(1)!==t.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(AS(n))}function IS(t,e){return nx(t.databaseId,e)}function i6(t){const e=jS(t);return e.length===4?ze.emptyPath():AS(e)}function eg(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AS(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function A_(t,e,n){return{name:Zp(t,e),fields:n.value.mapValue.fields}}function o6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:me(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Oe(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?z.UNKNOWN:NS(d.code);return new te(h,d.message||"")}(a);n=new SS(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gm(t,r.document.name),i=Er(r.document.updateTime),a=r.document.createTime?Er(r.document.createTime):xe.min(),l=new un({mapValue:{fields:r.document.fields}}),c=$t.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new qu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gm(t,r.document),i=r.readTime?Er(r.readTime):xe.min(),a=$t.newNoDocument(s,i),l=r.removedTargetIds||[];n=new qu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gm(t,r.document),i=r.removedTargetIds||[];n=new qu([],i,s,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new Q3(s,i),l=r.targetId;n=new TS(l,a)}}return n}function a6(t,e){let n;if(e instanceof Nc)n={update:A_(t,e.key,e.value)};else if(e instanceof Zy)n={delete:Zp(t,e.key)};else if(e instanceof fi)n={update:A_(t,e.key,e.data),updateMask:g6(e.fieldMask)};else{if(!(e instanceof W3))return me(16599,{Vt:e.type});n={verify:Zp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ud)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof aa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof oc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ac)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw me(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:s6(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:me(27497)}(t,e.precondition)),n}function l6(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Er(s.updateTime):Er(i);return a.isEqual(xe.min())&&(a=Er(i)),new $3(a,s.transformResults||[])}(n,e))):[]}function c6(t,e){return{documents:[IS(t,e.path)]}}function kS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IS(t,s);const i=function(d){if(d.length!==0)return PS(or.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ts(m.field),direction:f6(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Xp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function u6(t,e,n,r){const{ft:s,parent:i}=kS(t,e),a={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;a[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:Ts(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:Ts(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},gt:a,parent:i}}function d6(t){let e=i6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Oe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=RS(f);return m instanceof or&&sS(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(C){return new ic(bo(C.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Rh(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,_=f.values||[];return new Vd(_,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,_=f.values||[];return new Vd(_,m)}(n.endAt)),A3(e,s,a,i,l,"F",c,d)}function h6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bo(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bo(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bo(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=bo(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(bo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return or.create(n.compositeFilter.filters.map(r=>RS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(n.compositeFilter.op))}(t):me(30097,{filter:t})}function f6(t){return e6[t]}function m6(t){return t6[t]}function p6(t){return n6[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function bo(t){return Rt.fromServerFormat(t.fieldPath)}function PS(t){return t instanceof gt?function(n){if(n.op==="=="){if(y_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(g_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(y_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(g_(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:m6(n.op),value:n.value}}}(t):t instanceof or?function(n){const r=n.getFilters().map(s=>PS(s));return r.length===1?r[0]:{compositeFilter:{op:p6(n.op),filters:r}}}(t):me(54877,{filter:t})}function g6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function DS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,i=xe.min(),a=xe.min(),l=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.yt=e}}function x6(t){const e=d6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.Cn=new w6}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Gs.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class w6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new bt(ze.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new bt(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LS=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(LS,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new la(0)}static cr(){return new la(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="LruGarbageCollector",_6=1048576;function P_([t,e],[n,r]){const s=Te(t,n);return s===0?Te(e,r):s}class b6{constructor(e){this.Ir=e,this.buffer=new bt(P_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class E6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(R_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Na(n)?oe(R_,"Ignoring IndexedDB error during garbage collection: ",n):await Ea(n)}await this.Vr(3e5)})}}class N6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return H.resolve(kh.ce);const r=new b6(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(k_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),wo()<=Ne.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function T6(t,e){return new N6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&kl(r.mutation,s,Nn.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){const s=Pi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=fl();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Jr();const a=Al(),l=function(){return Al()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof fi)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),kl(h.mutation,d,h.mutation.getFieldMask(),Ke.now())):a.set(d.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new C6(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Al();let s=new rt((a,l)=>a-l),i=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||Nn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Se()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=mS();h.forEach(m=>{if(!i.has(m)){const _=bS(n.get(m),r.get(m));_!==null&&f.set(m,_),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return H.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ue.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):H.resolve(Pi());let l=tc,c=i;return a.next(d=>H.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Se())).next(h=>({batchId:l,changes:fS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let s=fl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=fl();return this.indexManager.getCollectionParents(e,i).next(l=>H.forEach(l,c=>{const d=function(f,m){return new Ta(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,$t.newInvalidDocument(h)))});let l=fl();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&kl(h.mutation,d,Nn.empty(),Ke.now()),Oh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Er(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:x6(s.bundledQuery),readTime:Er(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(){this.overlays=new rt(ue.comparator),this.qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Pi();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=Pi(),i=n.length+1,a=new ue(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new rt((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Pi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Pi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return H.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new G3(n,r));let i=this.qr.get(n);i===void 0&&(i=Se(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.Qr=new bt(Tt.$r),this.Ur=new bt(Tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Tt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ue(new ze([])),r=new Tt(n,e),s=new Tt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new ze([])),r=new Tt(n,e),s=new Tt(n,e+1);let i=Se();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Tt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Te(e.Yr,n.Yr)}static Kr(e,n){return Te(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new bt(Tt.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new q3(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Tt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(a)}lookupMutationBatch(e,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Gy:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new bt(Te);return n.forEach(s=>{const i=new Tt(s,0),a=new Tt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),H.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ue.isDocumentKey(i)||(i=i.child(""));const a=new Tt(new ue(i),0);let l=new bt(Te);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),H.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return H.forEach(n.mutations,s=>{const i=new Tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Tt(n,0),s=this.Zr.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.ri=e,this.docs=function(){return new rt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Jr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$t.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jr();const a=n.path,l=new ue(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||a3(o3(h),r)<=0||(s.has(h.key)||Oh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,r,s){me(9500)}ii(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new D6(this)}getSize(e){return H.resolve(this.size)}}class D6 extends S6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.persistence=e,this.si=new co(n=>Yy(n),Xy),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new rx,this.targetCount=0,this.ai=la.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),H.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new la(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Pr(n),H.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.ui={},this.overlays={},this.ci=new kh(0),this.li=!1,this.li=!0,this.hi=new k6,this.referenceDelegate=e(this),this.Pi=new L6(this),this.indexManager=new v6,this.remoteDocumentCache=function(s){return new P6(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new y6(n),this.Ii=new I6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new A6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new R6(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const s=new O6(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return H.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class O6 extends c3{constructor(e){super(),this.currentSequenceNumber=e}}class sx{constructor(e){this.persistence=e,this.Ri=new rx,this.Vi=null}static mi(e){return new sx(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,r=>{const s=ue.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class $d{constructor(e,n){this.persistence=e,this.pi=new co(r=>h3(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=T6(this,n)}static mi(e,n){return new $d(e,n)}Ei(){}di(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return H.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?H.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zu(e.data.value)),n}br(e,n,r){return H.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return H.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Se(),s=Se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ix(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return BP()?8:u3(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new M6;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(wo()<=Ne.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(wo()<=Ne.DEBUG&&oe("QueryEngine","Query:",_o(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(wo()<=Ne.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(n))):H.resolve())}ys(e,n){if(__(n))return H.resolve(null);let r=br(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fd(n,null,"F"),r=br(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Se(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Fd(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return __(n)||s.isEqual(xe.min())?H.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?H.resolve(null):(wo()<=Ne.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_o(n)),this.vs(e,a,n,i3(s,tc)).next(l=>l))})}Ds(e,n){let r=new bt(dS(e));return n.forEach((s,i)=>{Oh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return wo()<=Ne.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",_o(n)),this.ps.getDocumentsMatchingQuery(e,n,Gs.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="LocalStore",F6=3e8;class U6{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new rt(Te),this.xs=new co(i=>Yy(i),Xy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function B6(t,e,n,r){return new U6(t,e,n,r)}async function MS(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Se();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function $6(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let _=H.resolve();return m.forEach(C=>{_=_.next(()=>h.getEntry(c,C)).next(v=>{const x=d.docVersions.get(C);Oe(x!==null,48541),v.version.compareTo(x)<0&&(f.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Se();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function VS(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function z6(t,e){const n=ye(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Ot.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(f,_),function(v,x,N){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=F6?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,_,h)&&l.push(n.Pi.updateTargetData(i,_))});let c=Jr(),d=Se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(H6(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(xe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return H.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function H6(t,e,n){let r=Se(),s=Se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Jr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):oe(ox,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function W6(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Gy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q6(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new As(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function tg(t,e,n){const r=ye(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Na(a))throw a;oe(ox,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function D_(t,e,n){const r=ye(t);let s=xe.min(),i=Se();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=ye(c),m=f.xs.get(h);return m!==void 0?H.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,br(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:xe.min(),n?i:Se())).next(l=>(G6(r,R3(e),l),{documents:l,Qs:i})))}function G6(t,e,n){let r=t.Os.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class L_{constructor(){this.activeTargetIds=V3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K6{constructor(){this.Mo=new L_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new L_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="ConnectivityMonitor";class M_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(O_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(O_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu=null;function ng(){return yu===null?yu=function(){return 268435456+Math.round(2147483648*Math.random())}():yu++,"0x"+yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="RestConnection",Y6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Od?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=ng(),l=this.zo(e,n.toUriEncodedString());oe(ym,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=li(d);return this.Jo(e,l,c,r,h).then(f=>(oe(ym,`Received RPC '${e}' ${a}: `,f),f),f=>{throw ra(ym,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ba}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Y6[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class Z6 extends X6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=ng();return new Promise((l,c)=>{const d=new MT;d.setWithCredentials(!0),d.listenOnce(VT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case $u.NO_ERROR:const f=d.getResponseJson();oe(Ft,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case $u.TIMEOUT:oe(Ft,`RPC '${e}' ${a} timed out`),c(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const m=d.getStatus();if(oe(Ft,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const v=function(N){const b=N.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(b)>=0?b:z.UNKNOWN}(C.status);c(new te(v,C.message))}else c(new te(z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new te(z.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{oe(Ft,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);oe(Ft,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=ng(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=BT(),l=UT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");oe(Ft,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,_=!1;const C=new J6({Yo:x=>{_?oe(Ft,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(oe(Ft,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),oe(Ft,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Zo:()=>f.close()}),v=(x,N,b)=>{x.listen(N,S=>{try{b(S)}catch(D){setTimeout(()=>{throw D},0)}})};return v(f,hl.EventType.OPEN,()=>{_||(oe(Ft,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),v(f,hl.EventType.CLOSE,()=>{_||(_=!0,oe(Ft,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(f))}),v(f,hl.EventType.ERROR,x=>{_||(_=!0,ra(Ft,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),C.a_(new te(z.UNAVAILABLE,"The operation could not be completed")))}),v(f,hl.EventType.MESSAGE,x=>{var N;if(!_){const b=x.data[0];Oe(!!b,16349);const S=b,D=(S==null?void 0:S.error)||((N=S[0])==null?void 0:N.error);if(D){oe(Ft,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let R=function(I){const w=mt[I];if(w!==void 0)return NS(w)}(L),T=D.message;R===void 0&&(R=z.INTERNAL,T="Unknown error status: "+L+" with message "+D.message),_=!0,C.a_(new te(R,T)),f.close()}else oe(Ft,`RPC '${e}' stream ${s} received:`,b),C.u_(b)}}),v(l,FT.STAT_EVENT,x=>{x.stat===Hp.PROXY?oe(Ft,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Hp.NOPROXY&&oe(Ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function xm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t){return new r6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="PersistentStream";class US{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new FS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new te(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(V_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(V_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eV extends US{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=o6(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?xe.min():a.readTime?Er(a.readTime):xe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=eg(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Qp(c)?{documents:c6(i,c)}:{query:kS(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=CS(i,a.resumeToken);const d=Xp(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(xe.min())>0){l.readTime=Bd(i,a.snapshotVersion.toTimestamp());const d=Xp(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=h6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=eg(this.serializer),n.removeTarget=e,this.q_(n)}}class tV extends US{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=l6(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=eg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>a6(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{}class rV extends nV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Jp(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Jp(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(z.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xr(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="RemoteStore";class iV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{uo(this)&&(oe(Qi,"Restarting streams for network reachability change."),await async function(c){const d=ye(c);d.Ea.add(4),await Sc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Bh(d)}(this))})}),this.Ra=new sV(r,s)}}async function Bh(t){if(uo(t))for(const e of t.da)await e(!0)}async function Sc(t){for(const e of t.da)await e(!1)}function BS(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ux(n)?cx(n):Sa(n).O_()&&lx(n,e))}function ax(t,e){const n=ye(t),r=Sa(n);n.Ia.delete(e),r.O_()&&$S(n,e),n.Ia.size===0&&(r.O_()?r.L_():uo(n)&&n.Ra.set("Unknown"))}function lx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sa(t).Y_(e)}function $S(t,e){t.Va.Ue(e),Sa(t).Z_(e)}function cx(t){t.Va=new Z3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sa(t).start(),t.Ra.ua()}function ux(t){return uo(t)&&!Sa(t).x_()&&t.Ia.size>0}function uo(t){return ye(t).Ea.size===0}function zS(t){t.Va=void 0}async function oV(t){t.Ra.set("Online")}async function aV(t){t.Ia.forEach((e,n)=>{lx(t,e)})}async function lV(t,e){zS(t),ux(t)?(t.Ra.ha(e),cx(t)):t.Ra.set("Unknown")}async function cV(t,e,n){if(t.Ra.set("Online"),e instanceof SS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){oe(Qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zd(t,r)}else if(e instanceof qu?t.Va.Ze(e):e instanceof TS?t.Va.st(e):t.Va.tt(e),!n.isEqual(xe.min()))try{const r=await VS(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),$S(i,c);const f=new As(h.target,c,d,h.sequenceNumber);lx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){oe(Qi,"Failed to raise snapshot:",r),await zd(t,r)}}async function zd(t,e,n){if(!Na(e))throw e;t.Ea.add(1),await Sc(t),t.Ra.set("Offline"),n||(n=()=>VS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(Qi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bh(t)})}function HS(t,e){return e().catch(n=>zd(t,n,e))}async function $h(t){const e=ye(t),n=Xs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gy;for(;uV(e);)try{const s=await W6(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,dV(e,s)}catch(s){await zd(e,s)}WS(e)&&qS(e)}function uV(t){return uo(t)&&t.Ta.length<10}function dV(t,e){t.Ta.push(e);const n=Xs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function WS(t){return uo(t)&&!Xs(t).x_()&&t.Ta.length>0}function qS(t){Xs(t).start()}async function hV(t){Xs(t).ra()}async function fV(t){const e=Xs(t);for(const n of t.Ta)e.ea(n.mutations)}async function mV(t,e,n){const r=t.Ta.shift(),s=ex.from(r,e,n);await HS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $h(t)}async function pV(t,e){e&&Xs(t).X_&&await async function(r,s){if(function(a){return Y3(a)&&a!==z.ABORTED}(s.code)){const i=r.Ta.shift();Xs(r).B_(),await HS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $h(r)}}(t,e),WS(t)&&qS(t)}async function F_(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),oe(Qi,"RemoteStore received new credentials");const r=uo(n);n.Ea.add(3),await Sc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bh(n)}async function gV(t,e){const n=ye(t);e?(n.Ea.delete(2),await Bh(n)):e||(n.Ea.add(2),await Sc(n),n.Ra.set("Unknown"))}function Sa(t){return t.ma||(t.ma=function(n,r,s){const i=ye(n);return i.sa(),new eV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:oV.bind(null,t),t_:aV.bind(null,t),r_:lV.bind(null,t),H_:cV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ux(t)?cx(t):t.Ra.set("Unknown")):(await t.ma.stop(),zS(t))})),t.ma}function Xs(t){return t.fa||(t.fa=function(n,r,s){const i=ye(n);return i.sa(),new tV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hV.bind(null,t),r_:pV.bind(null,t),ta:fV.bind(null,t),na:mV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $h(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(Qi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new dx(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hx(t,e){if(Xr("AsyncQueue",`${e}: ${t}`),Na(t))return new te(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{static emptySet(e){return new Wo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=fl(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(){this.ga=new rt(ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ca{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ca(e,n,Wo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xV{constructor(){this.queries=B_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ye(n),i=s.queries;s.queries=B_(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new te(z.ABORTED,"Firestore shutting down"))}}function B_(){return new co(t=>uS(t),Lh)}async function fx(t,e){const n=ye(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new yV,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=hx(a,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&px(n)}async function mx(t,e){const n=ye(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vV(t,e){const n=ye(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&px(n)}function wV(t,e,n){const r=ye(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function px(t){t.Ca.forEach(e=>{e.next()})}var rg,$_;($_=rg||(rg={})).Ma="default",$_.Cache="cache";class gx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.key=e}}class KS{constructor(e){this.key=e}}class _V{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Se(),this.mutatedKeys=Se(),this.eu=dS(e),this.tu=new Wo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new U_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),_=Oh(this.query,f)?f:null,C=!!m&&this.mutatedKeys.has(m.key),v=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;m&&_?m.data.isEqual(_.data)?C!==v&&(r.track({type:3,doc:_}),x=!0):this.su(m,_)||(r.track({type:2,doc:_}),x=!0,(c&&this.eu(_,c)>0||d&&this.eu(_,d)<0)&&(l=!0)):!m&&_?(r.track({type:0,doc:_}),x=!0):m&&!_&&(r.track({type:1,doc:m}),x=!0,(c||d)&&(l=!0)),x&&(_?(a=a.add(_),i=v?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(_,C){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:x})}};return v(_)-v(C)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new ca(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new U_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new KS(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new GS(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ca.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yx="SyncEngine";class bV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class EV{constructor(e){this.key=e,this.hu=!1}}class NV{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new co(l=>uS(l),Lh),this.Iu=new Map,this.Eu=new Set,this.du=new rt(ue.comparator),this.Au=new Map,this.Ru=new rx,this.Vu={},this.mu=new Map,this.fu=la.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TV(t,e,n=!0){const r=eC(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await QS(r,e,n,!0),s}async function SV(t,e){const n=eC(t);await QS(n,e,!0,!1)}async function QS(t,e,n,r){const s=await q6(t.localStore,br(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await CV(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&BS(t.remoteStore,s),l}async function CV(t,e,n,r,s){t.pu=(f,m,_)=>async function(v,x,N,b){let S=x.view.ru(N);S.Cs&&(S=await D_(v.localStore,x.query,!1).then(({documents:T})=>x.view.ru(T,S)));const D=b&&b.targetChanges.get(x.targetId),L=b&&b.targetMismatches.get(x.targetId)!=null,R=x.view.applyChanges(S,v.isPrimaryClient,D,L);return H_(v,x.targetId,R.au),R.snapshot}(t,f,m,_);const i=await D_(t.localStore,e,!0),a=new _V(e,i.Qs),l=a.ru(i.documents),c=Tc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);H_(t,n,d.au);const h=new bV(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function jV(t,e,n){const r=ye(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Lh(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await tg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ax(r.remoteStore,s.targetId),sg(r,s.targetId)}).catch(Ea)):(sg(r,s.targetId),await tg(r.localStore,s.targetId,!0))}async function IV(t,e){const n=ye(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ax(n.remoteStore,r.targetId))}async function AV(t,e,n){const r=MV(t);try{const s=await function(a,l){const c=ye(a),d=Ke.now(),h=l.reduce((_,C)=>_.add(C.key),Se());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=Jr(),v=Se();return c.Ns.getEntries(_,h).next(x=>{C=x,C.forEach((N,b)=>{b.isValidDocument()||(v=v.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,C)).next(x=>{f=x;const N=[];for(const b of l){const S=H3(b,f.get(b.key).overlayedDocument);S!=null&&N.push(new fi(b.key,S,tS(S.value.mapValue),Bn.exists(!0)))}return c.mutationQueue.addMutationBatch(_,d,N,l)}).next(x=>{m=x;const N=x.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(_,x.batchId,N)})}).then(()=>({batchId:m.batchId,changes:fS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new rt(Te)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Cc(r,s.changes),await $h(r.remoteStore)}catch(s){const i=hx(s,"Failed to persist write");n.reject(i)}}async function YS(t,e){const n=ye(t);try{const r=await z6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Oe(a.hu,14607):s.removedDocuments.size>0&&(Oe(a.hu,42227),a.hu=!1))}),await Cc(n,r,e)}catch(r){await Ea(r)}}function z_(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=ye(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&px(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kV(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new rt(ue.comparator);a=a.insert(i,$t.newNoDocument(i,xe.min()));const l=Se().add(i),c=new Fh(xe.min(),new Map,new rt(Te),a,l);await YS(r,c),r.du=r.du.remove(i),r.Au.delete(e),xx(r)}else await tg(r.localStore,e,!1).then(()=>sg(r,e,n)).catch(Ea)}async function RV(t,e){const n=ye(t),r=e.batch.batchId;try{const s=await $6(n.localStore,e);JS(n,r,null),XS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cc(n,s)}catch(s){await Ea(s)}}async function PV(t,e,n){const r=ye(t);try{const s=await function(a,l){const c=ye(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Oe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);JS(r,e,n),XS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cc(r,s)}catch(s){await Ea(s)}}function XS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function JS(t,e,n){const r=ye(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function sg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ZS(t,r)})}function ZS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ax(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xx(t))}function H_(t,e,n){for(const r of n)r instanceof GS?(t.Ru.addReference(r.key,e),DV(t,r)):r instanceof KS?(oe(yx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ZS(t,r.key)):me(19791,{wu:r})}function DV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(yx,"New document in limbo: "+n),t.Eu.add(r),xx(t))}function xx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(ze.fromString(e)),r=t.fu.next();t.Au.set(r,new EV(n)),t.du=t.du.insert(n,r),BS(t.remoteStore,new As(br(Dh(n.path)),r,"TargetPurposeLimboResolution",kh.ce))}}async function Cc(t,e,n){const r=ye(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=ix.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=ye(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(d,m=>H.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(f,m.targetId,_)).next(()=>H.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(f,m.targetId,_)))))}catch(f){if(!Na(f))throw f;oe(ox,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const _=h.Ms.get(m),C=_.snapshotVersion,v=_.withLastLimboFreeSnapshotVersion(C);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function LV(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){oe(yx,"User change. New user:",e.toKey());const r=await MS(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new te(z.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cc(n,r.Ls)}}function OV(t,e){const n=ye(t),r=n.Au.get(e);if(r&&r.hu)return Se().add(r.key);{let s=Se();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function eC(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kV.bind(null,e),e.Pu.H_=vV.bind(null,e.eventManager),e.Pu.yu=wV.bind(null,e.eventManager),e}function MV(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PV.bind(null,e),e}class Hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return B6(this.persistence,new V6,e.initialUser,this.serializer)}Cu(e){return new OS(sx.mi,this.serializer)}Du(e){return new K6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hd.provider={build:()=>new Hd};class VV extends Hd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof $d,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new E6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new OS(r=>$d.mi(r,n),this.serializer)}}class ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>z_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LV.bind(null,this.syncEngine),await gV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xV}()}createDatastore(e){const n=Uh(e.databaseInfo.databaseId),r=function(i){return new Z6(i)}(e.databaseInfo);return function(i,a,l,c){return new rV(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new iV(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>z_(this.syncEngine,n,0),function(){return M_.v()?new M_:new Q6}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new NV(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ye(s);oe(Qi,"RemoteStore shutting down."),i.Ea.add(5),await Sc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ig.provider={build:()=>new ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="FirestoreClient";class FV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ut.UNAUTHENTICATED,this.clientId=qy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{oe(Js,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe(Js,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(Js,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await MS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function W_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UV(t);oe(Js,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>F_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>F_(e.remoteStore,s)),t._onlineComponents=e}async function UV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(Js,"Using user provided OfflineComponentProvider");try{await vm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ra("Error using user provided cache. Falling back to memory cache: "+n),await vm(t,new Hd)}}else oe(Js,"Using default OfflineComponentProvider"),await vm(t,new VV(void 0));return t._offlineComponents}async function wx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(Js,"Using user provided OnlineComponentProvider"),await W_(t,t._uninitializedComponentsProvider._online)):(oe(Js,"Using default OnlineComponentProvider"),await W_(t,new ig))),t._onlineComponents}function BV(t){return wx(t).then(e=>e.syncEngine)}function $V(t){return wx(t).then(e=>e.datastore)}async function Wd(t){const e=await wx(t),n=e.eventManager;return n.onListen=TV.bind(null,e.syncEngine),n.onUnlisten=jV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IV.bind(null,e.syncEngine),n}function zV(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new vx({next:m=>{h.Nu(),a.enqueueAndForget(()=>mx(i,f));const _=m.docs.has(l);!_&&m.fromCache?d.reject(new te(z.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&c&&c.source==="server"?d.reject(new te(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new gx(Dh(l.path),h,{includeMetadataChanges:!0,qa:!0});return fx(i,f)}(await Wd(t),t.asyncQueue,e,n,r)),r.promise}function HV(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new vx({next:m=>{h.Nu(),a.enqueueAndForget(()=>mx(i,f)),m.fromCache&&c.source==="server"?d.reject(new te(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new gx(l,h,{includeMetadataChanges:!0,qa:!0});return fx(i,f)}(await Wd(t),t.asyncQueue,e,n,r)),r.promise}function WV(t,e,n){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await $V(t);r.resolve(async function(a,l,c){var v;const d=ye(a),{request:h,gt:f,parent:m}=u6(d.serializer,k3(l),c);d.connection.$o||delete h.parent;const _=(await d.Ho("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(x=>!!x.result);Oe(_.length===1,64727);const C=(v=_[0].result)==null?void 0:v.aggregateFields;return Object.keys(C).reduce((x,N)=>(x[f[N]]=C[N],x),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firestore.googleapis.com",G_=!0;class K_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nC,this.ssl=G_}else this.host=e.host,this.ssl=e.ssl??G_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_6)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tC(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GM;switch(r.type){case"firstParty":return new XM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=q_.get(n);r&&(oe("ComponentProvider","Removing Datastore"),q_.delete(n),r.terminate())}(this),Promise.resolve()}}function qV(t,e,n,r={}){var d;t=rn(t,zh);const s=li(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Sy(`https://${l}`),Cy("Firestore",!0)),i.host!==nC&&i.host!==l&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Kr(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ut.MOCK_USER;else{h=TN(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new te(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ut(m)}t._authCredentials=new KM(new zT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ec(n,ot._jsonSchema))return new ot(e,r||null,new ue(ze.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:yt("string",ot._jsonSchemaVersion),referencePath:yt("string")};class Hs extends is{constructor(e,n,r){super(e,n,Dh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new ue(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function xt(t,e,...n){if(t=$e(t),HT("collection","path",e),t instanceof zh){const r=ze.fromString(e,...n);return a_(r),new Hs(t,null,r)}{if(!(t instanceof ot||t instanceof Hs))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return a_(r),new Hs(t.firestore,null,r)}}function Ve(t,e,...n){if(t=$e(t),arguments.length===1&&(e=qy.newId()),HT("doc","path",e),t instanceof zh){const r=ze.fromString(e,...n);return o_(r),new ot(t,null,new ue(r))}{if(!(t instanceof ot||t instanceof Hs))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return o_(r),new ot(t.firestore,t instanceof Hs?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="AsyncQueue";class Y_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new FS(this,"async_queue_retry"),this._c=()=>{const r=xm();r&&oe(Q_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=xm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _r;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Na(e))throw e;oe(Q_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xr("INTERNAL UNHANDLED ERROR: ",X_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=dx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:X_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function X_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class jr extends zh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Y_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y_(e),this._firestoreClient=void 0,await e}}}function GV(t,e){const n=typeof t=="object"?t:Nh(),r=typeof t=="string"?t:Od,s=ci(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=bN("firestore");i&&qV(s,...i)}return s}function jc(t){if(t._terminated)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KV(t),t._firestoreClient}function KV(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new g3(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,tC(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class YV{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Ot.fromBase64String(e))}catch(n){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:yt("string",Vn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Nr._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,Nr._jsonSchema))return new Nr(e.latitude,e.longitude)}}Nr._jsonSchemaVersion="firestore/geoPoint/1.0",Nr._jsonSchema={type:yt("string",Nr._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,Tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Tr(e.vectorValues);throw new te(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tr._jsonSchemaVersion="firestore/vectorValue/1.0",Tr._jsonSchema={type:yt("string",Tr._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV=/^__.*__$/;class JV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nc(e,this.data,n,this.fieldTransforms)}}class rC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class Wh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sC(this.Ac)&&XV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uh(e)}Cc(e,n,r,s=!1){return new Wh({Ac:e,methodName:n,Dc:r,path:Rt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qh(t){const e=t._freezeSettings(),n=Uh(t._databaseId);return new ZV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iC(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Ex("Data must be an object, but it was:",a,r);const l=oC(r,a);let c,d;if(i.merge)c=new Nn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=og(e,f,n);if(!a.contains(m))throw new te(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);lC(h,m)||h.push(m)}c=new Nn(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new JV(new un(l),c,d)}class Gh extends Ic{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}function eF(t,e,n){return new Wh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _x extends Ic{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=eF(this,e,!0),r=this.vc.map(i=>Ca(i,n)),s=new aa(r);return new _S(e.path,s)}isEqual(e){return e instanceof _x&&Kr(this.vc,e.vc)}}class bx extends Ic{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ac(e.serializer,gS(e.serializer,this.Fc));return new _S(e.path,n)}isEqual(e){return e instanceof bx&&this.Fc===e.Fc}}function tF(t,e,n,r){const s=t.Cc(1,e,n);Ex("Data must be an object, but it was:",s,r);const i=[],a=un.empty();hi(r,(c,d)=>{const h=Nx(e,c,n);d=$e(d);const f=s.yc(h);if(d instanceof Gh)i.push(h);else{const m=Ca(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new Nn(i);return new rC(a,l,s.fieldTransforms)}function nF(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[og(e,r,n)],c=[s];if(i.length%2!=0)throw new te(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(og(e,i[m])),c.push(i[m+1]);const d=[],h=un.empty();for(let m=l.length-1;m>=0;--m)if(!lC(d,l[m])){const _=l[m];let C=c[m];C=$e(C);const v=a.yc(_);if(C instanceof Gh)d.push(_);else{const x=Ca(C,v);x!=null&&(d.push(_),h.set(_,x))}}const f=new Nn(d);return new rC(h,f,a.fieldTransforms)}function rF(t,e,n,r=!1){return Ca(n,t.Cc(r?4:3,e))}function Ca(t,e){if(aC(t=$e(t)))return Ex("Unsupported field value:",e,t),oC(t,e);if(t instanceof Ic)return function(r,s){if(!sC(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Ca(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gS(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Bd(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bd(s.serializer,i)}}if(r instanceof Nr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:CS(s.serializer,r._byteString)};if(r instanceof ot){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Tr)return function(a,l){return{mapValue:{fields:{[ZT]:{stringValue:eS},[Md]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Jy(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Ah(r)}`)}(t,e)}function oC(t,e){const n={};return GT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,s)=>{const i=Ca(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function aC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Nr||t instanceof Vn||t instanceof ot||t instanceof Ic||t instanceof Tr)}function Ex(t,e,n){if(!aC(n)||!WT(n)){const r=Ah(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function og(t,e,n){if((e=$e(e))instanceof Hh)return e._internalPath;if(typeof e=="string")return Nx(t,e);throw qd("Field path arguments must be of type string or ",t,!1,void 0,n)}const sF=new RegExp("[~\\*/\\[\\]]");function Nx(t,e,n){if(e.search(sF)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hh(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new te(z.INVALID_ARGUMENT,l+t+c)}function lC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iF extends cC{data(){return super.data()}}function Kh(t,e){return typeof e=="string"?Nx(t,e):e instanceof Hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tx{}class Sx extends Tx{}function jn(t,e,...n){let r=[];e instanceof Tx&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof Cx).length,l=i.filter(c=>c instanceof Qh).length;if(a>1||a>0&&l>0)throw new te(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Qh extends Sx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qh(e,n,r)}_apply(e){const n=this._parse(e);return dC(e._query,n),new is(e.firestore,e.converter,Yp(e._query,n))}_parse(e){const n=qh(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){tb(f,h);const C=[];for(const v of f)C.push(eb(c,i,v));m={arrayValue:{values:C}}}else m=eb(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||tb(f,h),m=rF(l,a,f,h==="in"||h==="not-in");return gt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _n(t,e,n){const r=e,s=Kh("where",t);return Qh._create(s,r,n)}class Cx extends Tx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)dC(a,c),a=Yp(a,c)}(e._query,n),new is(e.firestore,e.converter,Yp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jx extends Sx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jx(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ic(i,a)}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Ta(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Yi(t,e="asc"){const n=e,r=Kh("orderBy",t);return jx._create(r,n)}class Ix extends Sx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ix(e,n,r)}_apply(e){return new is(e.firestore,e.converter,Fd(e._query,this._limit,this._limitType))}}function Z_(t){return s3("limit",t),Ix._create("limit",t,"F")}function eb(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new te(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lS(e)&&n.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ze.fromString(n));if(!ue.isDocumentKey(r))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return p_(t,new ue(r))}if(n instanceof ot)return p_(t,n._key);throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ah(n)}.`)}function tb(t,e){if(!Array.isArray(t)||t.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dC(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oF{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Md].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>dt(a.doubleValue));return new Tr(n)}convertGeoPoint(e){return new Nr(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ph(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const n=Ks(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);Oe(DS(r),9688,{name:e});const s=new rc(r.get(1),r.get(3)),i=new ue(r.popFirst(5));return s.isEqual(n)||Xr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function aF(){return new QV("count")}class pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oi extends cC{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Oi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Oi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oi._jsonSchema={type:yt("string",Oi._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Gu extends Oi{data(e={}){return super.data(e)}}class Mi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new pl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gu(this._firestore,this._userDataWriter,r.key,r,new pl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Gu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new pl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Gu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new pl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:lF(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t){t=rn(t,ot);const e=rn(t.firestore,jr);return zV(jc(e),t._key).then(n=>fC(e,t,n))}Mi._jsonSchemaVersion="firestore/querySnapshot/1.0",Mi._jsonSchema={type:yt("string",Mi._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Yh extends oF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function In(t){t=rn(t,is);const e=rn(t.firestore,jr),n=jc(e),r=new Yh(e);return uC(t._query),HV(n,t._query).then(s=>new Mi(e,r,t,s))}function Ax(t,e,n){t=rn(t,ot);const r=rn(t.firestore,jr),s=hC(t.converter,e);return Xh(r,[iC(qh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Bn.none())])}function dn(t,e,n,...r){t=rn(t,ot);const s=rn(t.firestore,jr),i=qh(s);let a;return a=typeof(e=$e(e))=="string"||e instanceof Hh?nF(i,"updateDoc",t._key,e,n,r):tF(i,"updateDoc",t._key,e),Xh(s,[a.toMutation(t._key,Bn.exists(!0))])}function cF(t){return Xh(rn(t.firestore,jr),[new Zy(t._key,Bn.none())])}function kx(t,e){const n=rn(t.firestore,jr),r=Ve(t),s=hC(t.converter,e);return Xh(n,[iC(qh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Bn.exists(!1))]).then(()=>r)}function Rx(t,...e){var c,d,h;t=$e(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||J_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(J_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof ot)a=rn(t.firestore,jr),l=Dh(t._key.path),i={next:f=>{e[r]&&e[r](fC(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=rn(t,is);a=rn(f.firestore,jr),l=f._query;const m=new Yh(a);i={next:_=>{e[r]&&e[r](new Mi(a,m,f,_))},error:e[r+1],complete:e[r+2]},uC(t._query)}return function(m,_,C,v){const x=new vx(v),N=new gx(_,x,C);return m.asyncQueue.enqueueAndForget(async()=>fx(await Wd(m),N)),()=>{x.Nu(),m.asyncQueue.enqueueAndForget(async()=>mx(await Wd(m),N))}}(jc(a),l,s,i)}function Xh(t,e){return function(r,s){const i=new _r;return r.asyncQueue.enqueueAndForget(async()=>AV(await BV(r),s,i)),i.promise}(jc(t),e)}function fC(t,e,n){const r=n.docs.get(e._key),s=new Yh(t);return new Oi(t,s,e._key,r,new pl(n.hasPendingWrites,n.fromCache),e.converter)}function wm(t){return uF(t,{count:aF()})}function uF(t,e){const n=rn(t.firestore,jr),r=jc(n),s=m3(e,(i,a)=>new K3(a,i.aggregateType,i._internalFieldPath));return WV(r,t._query,s).then(i=>function(l,c,d){const h=new Yh(l);return new YV(c,h,d)}(n,t,i))}function ag(...t){return new _x("arrayUnion",t)}function mC(t){return new bx("increment",t)}(function(e,n=!0){(function(s){ba=s})(lo),ir(new Hn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new jr(new QM(r.getProvider("auth-internal")),new JM(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gn(n_,r_,e),gn(n_,r_,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firebasestorage.googleapis.com",gC="storageBucket",dF=2*60*1e3,hF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends qn{constructor(e,n,r=0){super(_m(e),`Firebase Storage: ${n} (${_m(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _m(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function _m(t){return"storage/"+t}function Px(){const t="An unknown error occurred, please check the error payload for server response.";return new ct(at.UNKNOWN,t)}function fF(t){return new ct(at.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mF(t){return new ct(at.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(at.UNAUTHENTICATED,t)}function gF(){return new ct(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yF(t){return new ct(at.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function xF(){return new ct(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vF(){return new ct(at.CANCELED,"User canceled the upload/download.")}function wF(t){return new ct(at.INVALID_URL,"Invalid URL '"+t+"'.")}function _F(t){return new ct(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bF(){return new ct(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gC+"' property when initializing the app?")}function EF(){return new ct(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NF(){return new ct(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function TF(t){return new ct(at.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function lg(t){return new ct(at.INVALID_ARGUMENT,t)}function yC(){return new ct(at.APP_DELETED,"The Firebase app was deleted.")}function SF(t){return new ct(at.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rl(t,e){return new ct(at.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rl(t){throw new ct(at.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tn.makeFromUrl(e,n)}catch{return new Tn(e,"")}if(r.path==="")return r;throw _F(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),C={bucket:1,path:3},v=n===pC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",N=new RegExp(`^https?://${v}/${s}/${x}`,"i"),S=[{regex:l,indices:c,postModify:i},{regex:_,indices:C,postModify:d},{regex:N,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<S.length;D++){const L=S[D],R=L.regex.exec(e);if(R){const T=R[L.indices.bucket];let y=R[L.indices.path];y||(y=""),r=new Tn(T,y),L.postModify(r);break}}if(r==null)throw wF(e);return r}}class CF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...x){d||(d=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(_,c())},x)}function m(){i&&clearTimeout(i)}function _(x,...N){if(d){m();return}if(x){m(),h.call(null,x,...N);return}if(c()||a){m(),h.call(null,x,...N);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,f(S)}let C=!1;function v(x){C||(C=!0,m(),!d&&(s!==null?(x||(l=2),clearTimeout(s),f(0)):x||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,v(!0)},n),v}function IF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t){return t!==void 0}function kF(t){return typeof t=="object"&&!Array.isArray(t)}function Dx(t){return typeof t=="string"||t instanceof String}function nb(t){return Lx()&&t instanceof Blob}function Lx(){return typeof Blob<"u"}function rb(t,e,n,r){if(r<e)throw lg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw lg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function xC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Vi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vi||(Vi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,n,r,s,i,a,l,c,d,h,f,m=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,v)=>{this.resolve_=C,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new xu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===Vi.NO_ERROR,c=i.getStatus();if(!l||RF(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Vi.ABORT;r(!1,new xu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new xu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());AF(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=Px();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?yC():vF();a(c)}else{const c=xF();a(c)}};this.canceled_?n(!1,new xu(!1,null,!0)):this.backoffId_=jF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function LF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function MF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function VF(t,e,n,r,s,i,a=!0,l=!1){const c=xC(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return OF(h,e),DF(h,n),LF(h,i),MF(h,r),new PF(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UF(...t){const e=FF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Lx())return new Blob(t);throw new ct(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t){if(typeof atob>"u")throw TF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bm{constructor(e,n){this.data=e,this.contentType=n||null}}function zF(t,e){switch(t){case gr.RAW:return new bm(vC(e));case gr.BASE64:case gr.BASE64URL:return new bm(wC(t,e));case gr.DATA_URL:return new bm(WF(e),qF(e))}throw Px()}function vC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function HF(t){let e;try{e=decodeURIComponent(t)}catch{throw Rl(gr.DATA_URL,"Malformed data URL.")}return vC(e)}function wC(t,e){switch(t){case gr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Rl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Rl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=$F(e)}catch(s){throw s.message.includes("polyfill")?s:Rl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class _C{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Rl(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=GF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function WF(t){const e=new _C(t);return e.base64?wC(gr.BASE64,e.rest):HF(e.rest)}function qF(t){return new _C(t).contentType}function GF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){let r=0,s="";nb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(nb(this.data_)){const r=this.data_,s=BF(r,e,n);return s===null?null:new Ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ss(r,!0)}}static getBlob(...e){if(Lx()){const n=e.map(r=>r instanceof Ss?r.data_:r);return new Ss(UF.apply(null,n))}else{const n=e.map(a=>Dx(a)?zF(gr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new Ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){let e;try{e=JSON.parse(t)}catch{return null}return kF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function EC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t,e){return e}class Yt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||YF}}let vu=null;function XF(t){return!Dx(t)||t.length<2?t:EC(t)}function NC(){if(vu)return vu;const t=[];t.push(new Yt("bucket")),t.push(new Yt("generation")),t.push(new Yt("metageneration")),t.push(new Yt("name","fullPath",!0));function e(i,a){return XF(a)}const n=new Yt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Yt("size");return s.xform=r,t.push(s),t.push(new Yt("timeCreated")),t.push(new Yt("updated")),t.push(new Yt("md5Hash",null,!0)),t.push(new Yt("cacheControl",null,!0)),t.push(new Yt("contentDisposition",null,!0)),t.push(new Yt("contentEncoding",null,!0)),t.push(new Yt("contentLanguage",null,!0)),t.push(new Yt("contentType",null,!0)),t.push(new Yt("metadata","customMetadata",!0)),vu=t,vu}function JF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Tn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ZF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return JF(r,t),r}function TC(t,e,n){const r=bC(e);return r===null?null:ZF(t,r,n)}function e5(t,e,n,r){const s=bC(e);if(s===null||!Dx(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),_=Ox(m,n,r),C=xC({alt:"media",token:d});return _+C})[0]}function t5(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class SC{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){if(!t)throw Px()}function n5(t,e){function n(r,s){const i=TC(t,s,e);return CC(i!==null),i}return n}function r5(t,e){function n(r,s){const i=TC(t,s,e);return CC(i!==null),e5(i,s,t.host,t._protocol)}return n}function jC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=gF():s=pF():n.getStatus()===402?s=mF(t.bucket):n.getStatus()===403?s=yF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function s5(t){const e=jC(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=fF(t.path)),i.serverResponse=s.serverResponse,i}return n}function i5(t,e,n){const r=e.fullServerUrl(),s=Ox(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new SC(s,i,r5(t,n),a);return l.errorHandler=s5(e),l}function o5(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function a5(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=o5(null,e)),r}function l5(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let D=0;D<2;D++)S=S+Math.random().toString().slice(2);return S}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=a5(e,r,s),h=t5(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",_=Ss.getBlob(f,r,m);if(_===null)throw EF();const C={name:d.fullPath},v=Ox(i,t.host,t._protocol),x="POST",N=t.maxUploadRetryTime,b=new SC(v,x,n5(t,n),N);return b.urlParams=C,b.headers=a,b.body=_.uploadData(),b.errorHandler=jC(e),b}class c5{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw rl("cannot .send() more than once");if(li(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class u5 extends c5{initXhr(){this.xhr_.responseType="text"}}function IC(){return new u5}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this._service=e,n instanceof Tn?this._location=n:this._location=Tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xi(e,n)}get root(){const e=new Tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return EC(this._location.path)}get storage(){return this._service}get parent(){const e=KF(this._location.path);if(e===null)return null;const n=new Tn(this._location.bucket,e);return new Xi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SF(e)}}function d5(t,e,n){t._throwIfRoot("uploadBytes");const r=l5(t.storage,t._location,NC(),new Ss(e,!0),n);return t.storage.makeRequestWithTokens(r,IC).then(s=>({metadata:s,ref:t}))}function h5(t){t._throwIfRoot("getDownloadURL");const e=i5(t.storage,t._location,NC());return t.storage.makeRequestWithTokens(e,IC).then(n=>{if(n===null)throw NF();return n})}function f5(t,e){const n=QF(t._location.path,e),r=new Tn(t._location.bucket,n);return new Xi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(t){return/^[A-Za-z]+:\/\//.test(t)}function p5(t,e){return new Xi(t,e)}function AC(t,e){if(t instanceof Mx){const n=t;if(n._bucket==null)throw bF();const r=new Xi(n,n._bucket);return e!=null?AC(r,e):r}else return e!==void 0?f5(t,e):t}function g5(t,e){if(e&&m5(e)){if(t instanceof Mx)return p5(t,e);throw lg("To use ref(service, url), the first argument must be a Storage instance.")}else return AC(t,e)}function sb(t,e){const n=e==null?void 0:e[gC];return n==null?null:Tn.makeFromBucketSpec(n,t)}function y5(t,e,n,r={}){t.host=`${e}:${n}`;const s=li(e);s&&(Sy(`https://${t.host}/b`),Cy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:TN(i,t.app.options.projectId))}class Mx{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=pC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dF,this._maxUploadRetryTime=hF,this._requests=new Set,s!=null?this._bucket=Tn.makeFromBucketSpec(s,this._host):this._bucket=sb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tn.makeFromBucketSpec(this._url,e):this._bucket=sb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){rb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){rb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new CF(yC());{const a=VF(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ib="@firebase/storage",ob="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="storage";function x5(t,e,n){return t=$e(t),d5(t,e,n)}function v5(t){return t=$e(t),h5(t)}function w5(t,e){return t=$e(t),g5(t,e)}function _5(t=Nh(),e){t=$e(t);const r=ci(t,kC).getImmediate({identifier:e}),s=bN("storage");return s&&b5(r,...s),r}function b5(t,e,n,r={}){y5(t,e,n,r)}function E5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Mx(n,r,s,e,lo)}function N5(){ir(new Hn(kC,E5,"PUBLIC").setMultipleInstances(!0)),gn(ib,ob,""),gn(ib,ob,"esm2020")}N5();const T5={apiKey:"AIzaSyAVk3CIK5hyAmjwVPh1p4i01vq-0Z5IsEA",authDomain:"zedctf.firebaseapp.com",projectId:"zedctf",storageBucket:"zedctf.firebasestorage.app",messagingSenderId:"574551910114",appId:"1:574551910114:web:8bcce937be224e1575a0bb",measurementId:"G-MEYRJGR69W"},Jh=RN(T5);$M(Jh);const lc=bO(Jh),ge=GV(Jh),S5=_5(Jh),RC=g.createContext({user:null,loading:!0}),PC=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(!0);return g.useEffect(()=>uL(lc,a=>{n(a),s(!1)}),[]),o.jsx(RC.Provider,{value:{user:e,loading:r},children:t})},DC=()=>{const t=g.useContext(RC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Ln=DC,LC=g.createContext({isAdmin:!1,isModerator:!1,permissions:[],loading:!0}),C5=({children:t})=>{const{user:e}=Ln(),[n,r]=g.useState({isAdmin:!1,isModerator:!1,permissions:[],loading:!0});return g.useEffect(()=>{if(!e){console.log(" AdminProvider: No user found"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1});return}return console.log(" AdminProvider: Checking user role for UID:",e.uid),Rx(Ve(ge,"users",e.uid),i=>{if(i.exists()){const a=i.data();console.log(" User document found:",a);const l=a.role||"user",c=a.permissions||["read"];console.log(" User role:",l),console.log(" User permissions:",c),r({isAdmin:l==="admin",isModerator:l==="moderator"||l==="admin",permissions:c,loading:!1})}else console.log(" No user document found in Firestore"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})},i=>{console.error(" Firestore error in AdminContext:",i),console.error("Error details:",i.code,i.message),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})})},[e]),o.jsx(LC.Provider,{value:n,children:t})},Zh=()=>{const t=g.useContext(LC);if(!t)throw new Error("useAdminContext must be used within an AdminProvider");return t},j5=({children:t})=>{const{loading:e}=Ln();return e?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsx(o.Fragment,{children:t})},Ei=({children:t})=>{const{user:e,loading:n}=Ln();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(Ty,{to:"/login",replace:!0})},I5=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Zh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):!e&&!n?o.jsx(Ty,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:t})},go=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Zh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):e||n?o.jsx(Ty,{to:"/admin",replace:!0}):o.jsx(o.Fragment,{children:t})};function ab(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ac(...t){return e=>{let n=!1;const r=t.map(s=>{const i=ab(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():ab(t[s],null)}}}}function Je(...t){return g.useCallback(Ac(...t),t)}var A5=Symbol.for("react.lazy"),Gd=sh[" use ".trim().toString()];function k5(t){return typeof t=="object"&&t!==null&&"then"in t}function OC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===A5&&"_payload"in t&&k5(t._payload)}function Vx(t){const e=P5(t),n=g.forwardRef((r,s)=>{let{children:i,...a}=r;OC(i)&&typeof Gd=="function"&&(i=Gd(i._payload));const l=g.Children.toArray(i),c=l.find(L5);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var R5=Vx("Slot");function P5(t){const e=g.forwardRef((n,r)=>{let{children:s,...i}=n;if(OC(s)&&typeof Gd=="function"&&(s=Gd(s._payload)),g.isValidElement(s)){const a=M5(s),l=O5(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ac(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var D5=Symbol("radix.slottable");function L5(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===D5}function O5(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function M5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function MC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=MC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function VC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=MC(t))&&(r&&(r+=" "),r+=e);return r}const lb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cb=VC,ef=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return cb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=lb(h)||lb(f);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,..._}=h;return Object.entries(_).every(C=>{let[v,x]=C;return Array.isArray(x)?x.includes({...i,...l}[v]):{...i,...l}[v]===x})?[...d,f,m]:d},[]);return cb(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},Fx="-",V5=t=>{const e=U5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Fx);return l[0]===""&&l.length!==1&&l.shift(),FC(l,e)||F5(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},FC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?FC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Fx);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},ub=/^\[(.+)\]$/,F5=t=>{if(ub.test(t)){const e=ub.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},U5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return $5(Object.entries(t.classGroups),n).forEach(([i,a])=>{cg(a,r,i,e)}),r},cg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:db(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(B5(s)){cg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{cg(a,db(e,i),n,r)})})},db=(t,e)=>{let n=t;return e.split(Fx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},B5=t=>t.isThemeGetter,$5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,z5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},UC="!",H5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let x=0;x<l.length;x++){let N=l[x];if(d===0){if(N===s&&(r||l.slice(x,x+i)===e)){c.push(l.slice(h,x)),h=x+i;continue}if(N==="/"){f=x;continue}}N==="["?d++:N==="]"&&d--}const m=c.length===0?l:l.substring(h),_=m.startsWith(UC),C=_?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:_,baseClassName:C,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},W5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},q5=t=>({cache:z5(t.cacheSize),parseClassName:H5(t),...V5(t)}),G5=/\s+/,K5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(G5);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:_}=n(d);let C=!!_,v=r(C?m.substring(0,_):m);if(!v){if(!C){l=d+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=d+(l.length>0?" "+l:l);continue}C=!1}const x=W5(h).join(":"),N=f?x+UC:x,b=N+v;if(i.includes(b))continue;i.push(b);const S=s(v,C);for(let D=0;D<S.length;++D){const L=S[D];i.push(N+L)}l=d+(l.length>0?" "+l:l)}return l};function Q5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=BC(e))&&(r&&(r+=" "),r+=n);return r}const BC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=BC(t[r]))&&(n&&(n+=" "),n+=e);return n};function Y5(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=q5(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=K5(c,n);return s(c,h),h}return function(){return i(Q5.apply(null,arguments))}}const qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$C=/^\[(?:([a-z-]+):)?(.+)\]$/i,X5=/^\d+\/\d+$/,J5=new Set(["px","full","screen"]),Z5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,nU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pr=t=>qo(t)||J5.has(t)||X5.test(t),ms=t=>ja(t,"length",dU),qo=t=>!!t&&!Number.isNaN(Number(t)),Em=t=>ja(t,"number",qo),sl=t=>!!t&&Number.isInteger(Number(t)),sU=t=>t.endsWith("%")&&qo(t.slice(0,-1)),we=t=>$C.test(t),ps=t=>Z5.test(t),iU=new Set(["length","size","percentage"]),oU=t=>ja(t,iU,zC),aU=t=>ja(t,"position",zC),lU=new Set(["image","url"]),cU=t=>ja(t,lU,fU),uU=t=>ja(t,"",hU),il=()=>!0,ja=(t,e,n)=>{const r=$C.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},dU=t=>eU.test(t)&&!tU.test(t),zC=()=>!1,hU=t=>nU.test(t),fU=t=>rU.test(t),mU=()=>{const t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),s=qe("borderColor"),i=qe("borderRadius"),a=qe("borderSpacing"),l=qe("borderWidth"),c=qe("contrast"),d=qe("grayscale"),h=qe("hueRotate"),f=qe("invert"),m=qe("gap"),_=qe("gradientColorStops"),C=qe("gradientColorStopPositions"),v=qe("inset"),x=qe("margin"),N=qe("opacity"),b=qe("padding"),S=qe("saturate"),D=qe("scale"),L=qe("sepia"),R=qe("skew"),T=qe("space"),y=qe("translate"),I=()=>["auto","contain","none"],w=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",we,e],j=()=>[we,e],A=()=>["",Pr,ms],F=()=>["auto",qo,we],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",we],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>[qo,we];return{cacheSize:500,separator:":",theme:{colors:[il],spacing:[Pr,ms],blur:["none","",ps,we],brightness:M(),borderColor:[t],borderRadius:["none","","full",ps,we],borderSpacing:j(),borderWidth:A(),contrast:M(),grayscale:W(),hueRotate:M(),invert:W(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[sU,ms],inset:k(),margin:k(),opacity:M(),padding:j(),saturate:M(),scale:M(),sepia:W(),skew:M(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",we]}],container:["container"],columns:[{columns:[ps]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),we]}],overflow:[{overflow:w()}],"overflow-x":[{"overflow-x":w()}],"overflow-y":[{"overflow-y":w()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sl,we]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",we]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",sl,we]}],"grid-cols":[{"grid-cols":[il]}],"col-start-end":[{col:["auto",{span:["full",sl,we]},we]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[il]}],"row-start-end":[{row:["auto",{span:[sl,we]},we]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",we]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",we]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",we,e]}],"min-w":[{"min-w":[we,e,"min","max","fit"]}],"max-w":[{"max-w":[we,e,"none","full","min","max","fit","prose",{screen:[ps]},ps]}],h:[{h:[we,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[we,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[we,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[we,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ps,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Em]}],"font-family":[{font:[il]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",we]}],"line-clamp":[{"line-clamp":["none",qo,Em]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pr,we]}],"list-image":[{"list-image":["none",we]}],"list-style-type":[{list:["none","disc","decimal",we]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[N]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pr,ms]}],"underline-offset":[{"underline-offset":["auto",Pr,we]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[N]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),aU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",oU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},cU]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[N]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[N]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Pr,we]}],"outline-w":[{outline:[Pr,ms]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[N]}],"ring-offset-w":[{"ring-offset":[Pr,ms]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ps,uU]}],"shadow-color":[{shadow:[il]}],opacity:[{opacity:[N]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ps,we]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[N]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",we]}],duration:[{duration:M()}],ease:[{ease:["linear","in","out","in-out",we]}],delay:[{delay:M()}],animate:[{animate:["none","spin","ping","pulse","bounce",we]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[sl,we]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",we]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Pr,ms,Em]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pU=Y5(mU);function Le(...t){return pU(VC(t))}const gU=ef("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-all duration-300 shadow-[0_0_20px_rgba(0,255,136,0.3)] hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",terminal:"bg-card border border-primary/30 text-primary hover:border-primary hover:bg-primary/10 font-mono"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?R5:"button";return o.jsx(a,{className:Le(gU({variant:e,size:n,className:t})),ref:i,...s})});J.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...xU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:HC("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(vU,{ref:i,iconNode:e,className:HC(`lucide-${yU(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=ie("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=ie("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ie("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=ie("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=ie("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ie("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=ie("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=ie("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=ie("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=ie("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=ie("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=ie("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=ie("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=ie("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=ie("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=ie("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=ie("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ie("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=ie("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=ie("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=ie("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=ie("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=ie("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=ie("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=ie("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=ie("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=ie("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=ie("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=ie("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=ie("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=ie("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=ie("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=ie("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=ie("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ie("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=ie("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),WU="/ZedCTF/favicon.png",Xe=()=>{var C;const[t,e]=g.useState(!1),{user:n}=Ln(),{isAdmin:r,isModerator:s,loading:i}=Zh(),a=yn(),l=oo(),[c,d]=g.useState(!1),h=async()=>{d(!0);try{await dL(lc),a("/"),e(!1)}catch(v){console.error("Error signing out:",v)}finally{d(!1)}},f=v=>l.pathname===v,m=!i&&(r||s),_=!i&&!r&&!s;return o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-border bg-background/95 backdrop-blur-lg supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(Be,{to:"/",className:"flex items-center gap-2",children:[o.jsx("img",{src:WU,alt:"ZedCTF",className:"w-8 h-8"}),o.jsx("span",{className:"text-2xl font-bold text-green-600",children:"ZedCTF"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[o.jsxs(Be,{to:"/",className:`flex items-center gap-2 transition-colors group ${f("/")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(gb,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Home"]}),_&&o.jsxs(Be,{to:"/dashboard",className:`flex items-center gap-2 transition-colors group ${f("/dashboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(hb,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Dashboard"]}),_&&o.jsxs(Be,{to:"/practice",className:`flex items-center gap-2 transition-colors group ${f("/practice")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(ks,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Practice"]}),_&&o.jsxs(Be,{to:"/live",className:`flex items-center gap-2 transition-colors group ${f("/live")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(pb,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"LIVE CTF"]}),_&&o.jsxs(Be,{to:"/leaderboard",className:`flex items-center gap-2 transition-colors group ${f("/leaderboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(jt,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Leaderboard"]}),_&&o.jsxs(Be,{to:"/writeups",className:`flex items-center gap-2 transition-colors group ${f("/writeups")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Qd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Writeups"]}),m&&o.jsxs(Be,{to:"/admin",className:`flex items-center gap-2 transition-colors group ${f("/admin")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(lt,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Admin"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[_&&o.jsx(J,{variant:"ghost",size:"icon",className:"hidden sm:flex",children:o.jsx(ha,{className:"w-5 h-5"})}),_&&o.jsxs(J,{variant:"ghost",size:"icon",className:"relative",children:[o.jsx(_U,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx(J,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>e(!t),children:o.jsx(VU,{className:"w-5 h-5"})}),n?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-foreground/80 hidden sm:block",children:[n.displayName||((C=n.email)==null?void 0:C.split("@")[0]),m&&" (Admin)"]}),o.jsxs(J,{variant:"default",size:"sm",className:"bg-red-500 hover:bg-red-600 text-white gap-2",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(xb,{className:"w-4 h-4"}),c?"...":"Logout"]})]}):o.jsx(Be,{to:"/login",children:o.jsxs(J,{variant:"default",size:"sm",className:"bg-green-500 hover:bg-green-600 text-white gap-2",children:[o.jsx(An,{className:"w-4 h-4"}),"Sign In"]})})]})]}),t&&o.jsx("div",{className:"md:hidden border-t border-border bg-background/95 backdrop-blur-lg animate-fade-in",children:o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs(Be,{to:"/",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(gb,{className:"w-5 h-5"}),"Home"]}),_&&o.jsxs(Be,{to:"/dashboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/dashboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(hb,{className:"w-5 h-5"}),"Dashboard"]}),_&&o.jsxs(Be,{to:"/practice",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/practice")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(ks,{className:"w-5 h-5"}),"Practice"]}),_&&o.jsxs(Be,{to:"/live",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/live")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(pb,{className:"w-5 h-5"}),"LIVE CTF"]}),_&&o.jsxs(Be,{to:"/leaderboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/leaderboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(jt,{className:"w-5 h-5"}),"Leaderboard"]}),_&&o.jsxs(Be,{to:"/writeups",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/writeups")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Qd,{className:"w-5 h-5"}),"Writeups"]}),m&&o.jsxs(Be,{to:"/admin",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/admin")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(lt,{className:"w-5 h-5"}),"Admin"]}),o.jsx("div",{className:"px-4 pt-2 border-t border-border",children:n?o.jsxs(J,{variant:"default",className:"w-full justify-start gap-2 bg-red-500 hover:bg-red-600",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(xb,{className:"w-4 h-4"}),c?"Signing out...":"Logout"]}):o.jsx(Be,{to:"/login",onClick:()=>e(!1),children:o.jsxs(J,{variant:"default",className:"w-full justify-start gap-2 bg-green-500 hover:bg-green-600",children:[o.jsx(An,{className:"w-4 h-4"}),"Sign In"]})})})]})})]})})},qU="/ZedCTF/assets/hero-bg-x4dJ88o_.jpg",GU=()=>{const[t,e]=g.useState({totalUsers:0,totalChallenges:0,liveEvents:0}),[n,r]=g.useState(!0),s=yn(),i=async()=>{try{const c={totalUsers:0,totalChallenges:0,liveEvents:0};try{const d=await wm(xt(ge,"users"));c.totalUsers=d.data().count}catch{console.log("Could not count users")}try{const d=jn(xt(ge,"challenges"),_n("isActive","==",!0)),h=await wm(d);c.totalChallenges=h.data().count}catch{console.log("Could not count challenges")}try{const d=await wm(xt(ge,"events"));c.liveEvents=d.data().count}catch{console.log("Could not count events")}e(c)}catch{console.log("Stats loading completed")}finally{r(!1)}};g.useEffect(()=>{i()},[]);const a=()=>{s("/practice")},l=()=>{s("/live")};return o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:`url(${qU})`}}),o.jsx("div",{className:"absolute inset-0 cyber-grid opacity-10"}),o.jsx("div",{className:"container relative z-10 px-4 py-32",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border border-primary/30 bg-primary/5 mb-4",children:[o.jsx(QC,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm text-primary font-mono",children:"Zambia's Premier CTF Platform"})]}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:["Master Cybersecurity",o.jsx("br",{}),o.jsx("span",{className:"neon-text animate-pulse-glow",children:"Capture The Flag"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Sharpen your hacking skills, compete in real-time challenges, and climb the leaderboard. From beginner to expert, ZedCTF is your gateway to cybersecurity mastery."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[o.jsxs(J,{onClick:a,variant:"neon",size:"lg",className:"group",children:["Start Practicing",o.jsx(wU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),o.jsxs(J,{onClick:l,variant:"terminal",size:"lg",children:[o.jsx(CU,{className:"w-5 h-5"}),"Join LIVE Event"]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-6 pt-12 max-w-2xl mx-auto",children:[o.jsx(Tm,{loading:n,value:t.totalUsers,label:"Registered Users",icon:o.jsx(jt,{className:"w-5 h-5"})}),o.jsx(Tm,{loading:n,value:t.totalChallenges,label:"Active Challenges",icon:o.jsx(lt,{className:"w-5 h-5"})}),o.jsx(Tm,{loading:n,value:t.liveEvents,label:"Events",icon:o.jsx(ei,{className:"w-5 h-5"})})]}),!n&&o.jsx("div",{className:"mt-4",children:o.jsx(J,{variant:"outline",size:"sm",onClick:i,children:"Refresh Stats"})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent"})]})},Tm=({loading:t,value:e,label:n,icon:r})=>t?o.jsxs("div",{className:"text-center animate-pulse",children:[o.jsx("div",{className:"h-8 bg-muted rounded w-16 mx-auto mb-2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-20 mx-auto"})]}):o.jsxs("div",{className:"text-center group",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl md:text-3xl font-bold text-primary mb-1",children:[r,e.toLocaleString()]}),o.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:n})]}),tt=()=>o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(lt,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-2xl font-bold neon-text",children:"ZedCTF"})]}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Zambia's premier platform for cybersecurity challenges and training."}),o.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:"An initiative by IT Society of Kapasa Makasa University"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Platform"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsx(Be,{to:"/dashboard",className:"hover:text-primary transition-colors",children:"Dashboard"})}),o.jsx("li",{children:o.jsx(Be,{to:"/practice",className:"hover:text-primary transition-colors",children:"Practice"})}),o.jsx("li",{children:o.jsx(Be,{to:"/live",className:"hover:text-primary transition-colors",children:"LIVE Events"})}),o.jsx("li",{children:o.jsx(Be,{to:"/leaderboard",className:"hover:text-primary transition-colors",children:"Leaderboard"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Resources"}),o.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:o.jsx("li",{children:o.jsx(Be,{to:"/writeups",className:"hover:text-primary transition-colors",children:"Walkthroughs"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Connect"}),o.jsxs("div",{className:"flex gap-4 mb-4",children:[o.jsx("a",{href:"https://github.com/ZedCTF/ZedCTF",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(RU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(HU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(OU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(YC,{className:"w-5 h-5"})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-sm mb-2 text-primary flex items-center gap-2",children:[o.jsx(jt,{className:"w-4 h-4"}),"Contributors"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[o.jsx("a",{href:"https://github.com/SokoJames",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"James Soko"}),o.jsx("a",{href:"https://github.com/abbymwale24",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Abby Mwale"}),o.jsx("a",{href:"https://github.com/Joylad-Jangazya",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Joylad Jangazya"}),o.jsx("a",{href:"https://github.com/Kono-hub",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Mary Chanda"}),o.jsx("a",{href:"https://github.com/ronny-brawn",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Aaron Nyakapanda"}),o.jsx("a",{href:"https://github.com/threat23",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Humphery Chileshe"})]})]})]})]}),o.jsxs("div",{className:"pt-8 border-t border-border text-center text-sm text-muted-foreground",children:[o.jsx("p",{children:" 2025 ZedCTF. All rights reserved. Made with  in Zambia"}),o.jsx("p",{className:"mt-1",children:"IT Society of Kapasa Makasa University"})]})]})}),KU=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Xe,{}),o.jsx(GU,{}),o.jsx(tt,{})]}),QU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({email:"",password:"",rememberMe:!1}),h=yn(),f=new Or;f.addScope("read:user"),f.addScope("user:email");const m=async N=>{try{const b=await Zs(Ve(ge,"users",N));if(b.exists()){const S=b.data();if(S.role==="admin"||S.role==="moderator")return"/admin"}return"/dashboard"}catch(b){return console.error("Error checking user role:",b),"/dashboard"}},_=async N=>{N.preventDefault(),l(""),i(!0);try{const b=await oL(lc,c.email,c.password),S=await m(b.user.uid);h(S)}catch(b){console.error("Login error:",b),l(v(b.code))}finally{i(!1)}},C=async()=>{var N,b,S;r(!0),l("");try{const L=(await kL(lc,f)).user;if(!(await Zs(Ve(ge,"users",L.uid))).exists())await Ax(Ve(ge,"users",L.uid),{uid:L.uid,firstName:((N=L.displayName)==null?void 0:N.split(" ")[0])||"GitHub",lastName:((b=L.displayName)==null?void 0:b.split(" ").slice(1).join(" "))||"User",username:((S=L.email)==null?void 0:S.split("@")[0])||`github_${L.uid.slice(0,8)}`,email:L.email,displayName:L.displayName||"GitHub User",photoURL:L.photoURL,provider:"github",role:"user",isActive:!0,createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard");else{const T=await m(L.uid);h(T)}}catch(D){console.error("GitHub login error:",D),D.code==="auth/account-exists-with-different-credential"?l("An account already exists with the same email address but different sign-in credentials."):D.code==="auth/popup-closed-by-user"?console.log("GitHub login popup closed by user"):l("GitHub login failed. Please try again.")}finally{r(!1)}},v=N=>{switch(N){case"auth/invalid-email":return"Invalid email address format.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/account-exists-with-different-credential":return"An account already exists with the same email address but different sign-in credentials.";default:return"Login failed. Please try again."}},x=N=>{const{name:b,value:S,type:D,checked:L}=N.target;d(R=>({...R,[b]:D==="checkbox"?L:S}))};return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(lt,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-muted-foreground",children:"Access your cybersecurity dashboard"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsx("div",{className:"relative",children:o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:x,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:x,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all pr-12",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(ug,{className:"w-5 h-5"}):o.jsx(cc,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{name:"rememberMe",type:"checkbox",checked:c.rememberMe,onChange:x,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2",disabled:s}),o.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Remember me"})]}),o.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"})]}),o.jsxs("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Xd,{className:"w-5 h-5 animate-spin"}):o.jsx(MU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),s?"Signing in...":"Sign In"]})]}),o.jsxs("div",{className:"my-6 flex items-center",children:[o.jsx("div",{className:"flex-1 border-t border-border"}),o.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"or continue with"}),o.jsx("div",{className:"flex-1 border-t border-border"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.jsxs("button",{onClick:C,disabled:n||s,className:"flex items-center justify-center gap-2 px-4 py-3 bg-muted/50 border border-border rounded-lg text-foreground hover:bg-muted transition-colors hover:border-primary group disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(Xd,{className:"w-5 h-5 animate-spin"}):o.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),n?"Signing in with GitHub...":"Continue with GitHub"]})}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["New to ZedCTF?"," ",o.jsx(Be,{to:"/signup",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Create an account"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(tt,{})]})},YU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:"",agreeToTerms:!1}),h=yn(),f=async C=>{if(C.preventDefault(),l(""),c.password!==c.confirmPassword){l("Passwords don't match!");return}if(c.password.length<6){l("Password should be at least 6 characters");return}if(!c.agreeToTerms){l("Please agree to the terms and conditions");return}i(!0);try{const x=(await iL(lc,c.email,c.password)).user;await rT(x,{displayName:`${c.firstName} ${c.lastName}`.trim()}),await Ax(Ve(ge,"users",x.uid),{uid:x.uid,firstName:c.firstName,lastName:c.lastName,username:c.username,email:c.email,displayName:`${c.firstName} ${c.lastName}`.trim(),createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard")}catch(v){console.error("Registration error:",v),l(m(v.code))}finally{i(!1)}},m=C=>{switch(C){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak.";default:return"Registration failed. Please try again."}},_=C=>{const{name:v,value:x,type:N,checked:b}=C.target;d(S=>({...S,[v]:N==="checkbox"?b:x}))};return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(lt,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Join the Community"}),o.jsx("p",{className:"text-muted-foreground",children:"Start your cybersecurity journey today"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground mb-2",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:c.firstName,onChange:_,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"John",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground mb-2",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:c.lastName,onChange:_,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Doe",disabled:s})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(YC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:_,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-foreground mb-2",children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(An,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:_,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"cyber_hacker",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(yb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:_,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(ug,{className:"w-5 h-5"}):o.jsx(cc,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(yb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",required:!0,value:c.confirmPassword,onChange:_,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:n?o.jsx(ug,{className:"w-5 h-5"}):o.jsx(cc,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-start",children:o.jsxs("label",{className:"flex items-start",children:[o.jsx("input",{name:"agreeToTerms",type:"checkbox",checked:c.agreeToTerms,onChange:_,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2 mt-1",disabled:s}),o.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["I agree to the"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Terms of Service"})," ","and"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Privacy Policy"})]})]})}),o.jsxs("button",{type:"submit",disabled:s||!c.agreeToTerms,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Xd,{className:"w-5 h-5 animate-spin"}):o.jsx(fg,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),s?"Creating Account...":"Create Account"]})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",o.jsx(Be,{to:"/login",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(tt,{})]})},XU=()=>{const[t,e]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(""),[h,f]=g.useState("all"),[m,_]=g.useState("all"),[C,v]=g.useState("all"),[x,N]=g.useState(!0),[b]=g.useState(!1),S=async()=>{try{N(!0);const T=await fetch("/api/writeups");if(T.ok){const y=await T.json();e(y),r(y);const I=Array.from(new Set(y.map(k=>k.category))).filter(Boolean),w=Array.from(new Set(y.map(k=>k.difficulty))).filter(Boolean);i(I),l(w)}else e([]),r([]),i([]),l([])}catch{e([]),r([]),i([]),l([])}finally{N(!1)}};g.useEffect(()=>{S()},[]),g.useEffect(()=>{let R=t;c&&(R=R.filter(T=>T.title.toLowerCase().includes(c.toLowerCase())||T.description.toLowerCase().includes(c.toLowerCase())||T.tags.some(y=>y.toLowerCase().includes(c.toLowerCase())))),h!=="all"&&(R=R.filter(T=>T.category===h)),m!=="all"&&(R=R.filter(T=>T.difficulty===m)),C!=="all"&&(R=R.filter(T=>T.status===C)),r(R)},[c,h,m,C,t]);const D=R=>{switch(R){case"approved":return o.jsx(er,{className:"w-4 h-4 text-green-400"});case"rejected":return o.jsx(Ji,{className:"w-4 h-4 text-red-400"});default:return o.jsx(ei,{className:"w-4 h-4 text-yellow-400"})}},L=R=>{switch(R.toLowerCase()){case"easy":return"bg-primary/20 text-primary border-primary/30";case"medium":return"bg-secondary/20 text-secondary border-secondary/30";case"hard":return"bg-destructive/20 text-destructive border-destructive/30";case"insane":return"bg-purple-500/20 text-purple-500 border-purple-500/30";case"expert":return"bg-red-500/20 text-red-500 border-red-500/30";case"beginner":return"bg-green-500/20 text-green-500 border-green-500/30";default:return"bg-muted/20 text-muted-foreground border-muted/30"}};return x?o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading writeups..."})]})}),o.jsx(tt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(lt,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Community ",o.jsx("span",{className:"text-primary",children:"Writeups"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Learn from other players' solutions and share your own approaches"})]}),o.jsxs("div",{className:"bg-muted/20 border border-border rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"Search writeups, tags, challenges...",value:c,onChange:R=>d(R.target.value),className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:R=>f(R.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Categories"}),s.map(R=>o.jsx("option",{value:R,children:R},R))]})}),o.jsx("div",{children:o.jsxs("select",{value:m,onChange:R=>_(R.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Difficulties"}),a.map(R=>o.jsx("option",{value:R,children:R},R))]})})]}),b&&o.jsx("div",{className:"mt-4",children:o.jsxs("select",{value:C,onChange:R=>v(R.target.value),className:"w-full md:w-auto px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"}),o.jsx("option",{value:"rejected",children:"Rejected"})]})})]}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(Be,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center gap-2",children:[o.jsx(ti,{className:"w-5 h-5"}),"New Writeup"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(R=>o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${L(R.difficulty)}`,children:R.difficulty}),o.jsxs("div",{className:"flex items-center gap-1",children:[D(R.status),o.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:R.status})]})]}),o.jsx("span",{className:"inline-block px-2 py-1 bg-primary/10 text-primary text-xs rounded border border-primary/20 mb-3",children:R.category}),o.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-3 group-hover:text-primary transition-colors line-clamp-2",children:R.title}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:R.description}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[o.jsx(Qd,{className:"w-4 h-4"}),o.jsxs("span",{children:["Challenge: ",R.challenge]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[R.tags.slice(0,3).map((T,y)=>o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["#",T]},y)),R.tags.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["+",R.tags.length-3]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:o.jsx(An,{className:"w-3 h-3 text-primary"})}),o.jsx("span",{className:"text-sm text-muted-foreground",children:R.author.name})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(cc,{className:"w-4 h-4"}),o.jsx("span",{children:R.views})]}),o.jsx("span",{children:new Date(R.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(Be,{to:`/writeups/${R.id}`,className:"flex-1 bg-primary/10 text-primary border border-primary/20 py-2 px-4 rounded-lg text-center hover:bg-primary/20 transition-colors",children:"Read"}),b&&R.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 bg-green-500/10 text-green-500 border border-green-500/20 py-2 px-4 rounded-lg hover:bg-green-500/20 transition-colors",children:"Approve"}),o.jsx("button",{className:"flex-1 bg-red-500/10 text-red-500 border border-red-500/20 py-2 px-4 rounded-lg hover:bg-red-500/20 transition-colors",children:"Reject"})]})]})]},R.id))}),n.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Qd,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No writeups found"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:t.length===0?"No writeups have been submitted yet. Be the first to share your solution!":"Try adjusting your search or filters"}),o.jsxs(Be,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 inline-flex items-center gap-2",children:[o.jsx(ti,{className:"w-5 h-5"}),"Create First Writeup"]})]})]})}),o.jsx(tt,{})]})},JU=()=>{const t=yn(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(""),[f,m]=g.useState(""),[_,C]=g.useState(""),[v,x]=g.useState(!1),[N,b]=g.useState([]),[S,D]=g.useState([]),[L,R]=g.useState([]),[T,y]=g.useState(!0),I=async()=>{try{y(!0);const j="/api/challenges/available",A="/api/categories",F="/api/difficulties",[q,B,$]=await Promise.all([fetch(j),fetch(A),fetch(F)]);if(q.ok){const O=await q.json();b(O)}else b([]);if(B.ok){const O=await B.json();D(O),O.length>0&&h(O[0])}else D([]);if($.ok){const O=await $.json();R(O),O.length>0&&m(O[0])}else R([])}catch{b([]),D([]),R([])}finally{y(!1)}},w=async j=>{j.preventDefault(),x(!0);try{(await fetch("/api/writeups/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:r,content:i,challengeId:l,category:d,difficulty:f,tags:_.split(",").map(F=>F.trim()).filter(F=>F)})})).ok?t("/writeups"):console.error("Failed to create writeup")}catch(A){console.error("Error creating writeup:",A)}finally{x(!1)}},k=(j,A)=>{document.execCommand(j,!1,A)};return g.useEffect(()=>{if(l){const j=N.find(A=>A.id===l);j&&(h(j.category),m(j.difficulty))}},[l,N]),g.useEffect(()=>{I()},[]),T?o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading form data..."})]})}),o.jsx(tt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto max-w-4xl",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(lt,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Create ",o.jsx("span",{className:"text-primary",children:"Writeup"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Share your solution and help others learn from your approach"})]}),o.jsxs("form",{id:"writeup-form",onSubmit:w,className:"space-y-8",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Basic Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Writeup Title *"}),o.jsx("input",{type:"text",required:!0,value:e,onChange:j=>n(j.target.value),placeholder:"Enter a compelling title for your writeup...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),o.jsx("textarea",{required:!0,value:r,onChange:j=>s(j.target.value),placeholder:"Brief description of your writeup...",rows:3,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Challenge *"}),o.jsxs("select",{required:!0,value:l,onChange:j=>c(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"",children:"Select a challenge"}),N.map(j=>o.jsx("option",{value:j.id,children:j.title},j.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category *"}),o.jsx("select",{required:!0,value:d,onChange:j=>h(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:S.map(j=>o.jsx("option",{value:j,children:j},j))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty *"}),o.jsx("select",{required:!0,value:f,onChange:j=>m(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:L.map(j=>o.jsx("option",{value:j,children:j},j))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("input",{type:"text",value:_,onChange:j=>C(j.target.value),placeholder:"Comma-separated tags (e.g., sql-injection, web, bypass)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Writeup Content"}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-3 bg-muted/20 rounded-lg border border-border",children:[o.jsx("button",{type:"button",onClick:()=>k("bold"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bold",children:o.jsx(bU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>k("italic"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Italic",children:o.jsx(DU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>k("insertUnorderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bullet List",children:o.jsx(dg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>k("insertOrderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Numbered List",children:o.jsx(dg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const j=prompt("Enter URL:");j&&k("createLink",j)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Link",children:o.jsx(da,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>k("formatBlock","<pre>"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Code Block",children:o.jsx(jU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const j=prompt("Enter image URL:");j&&k("insertImage",j)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Image",children:o.jsx(PU,{className:"w-4 h-4 text-foreground"})})]}),o.jsx("div",{contentEditable:!0,onInput:j=>a(j.currentTarget.innerHTML),className:"min-h-[400px] px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all prose prose-invert max-w-none",style:{fontFamily:"Georgia, serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":"Start writing your amazing writeup here... You can include code snippets, images, and formatted text."}),o.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Pro tips:"})]}),o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsx("li",{children:"Use the toolbar above to format your text"}),o.jsx("li",{children:"Include code snippets using the code block button"}),o.jsx("li",{children:"Add images to illustrate your steps"}),o.jsx("li",{children:"Break down complex solutions into clear steps"}),o.jsx("li",{children:"Share your thought process and learning moments"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsxs("button",{type:"button",className:"flex items-center gap-2 px-6 py-3 bg-muted text-muted-foreground rounded-lg font-semibold hover:bg-muted/80 transition-colors",onClick:()=>t("/writeups"),children:[o.jsx(cc,{className:"w-4 h-4"}),"Cancel"]}),o.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[v?o.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}):o.jsx(XC,{className:"w-4 h-4"}),v?"Publishing...":"Publish Writeup"]})]})]})]})}),o.jsx(tt,{})]})},wb=()=>new Promise(t=>{setTimeout(()=>{const e={id:"github-"+Date.now(),username:"zedctf_user",email:"user@zedctf.com",name:"ZedCTF User",avatar:"https://github.com/github.png",provider:"github"};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true"),t(e)},1500)}),ZU=()=>{const[t,e]=g.useState("loading"),[n,r]=g.useState(""),s=yn();return g.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search),l=a.get("code");if(a.get("error")){e("error"),r("GitHub authentication failed. Please try again.");return}try{if(await new Promise(d=>setTimeout(d,2e3)),l){const d=await wb();e("success"),r(`Welcome, ${d.username}! Successfully authenticated with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}else{const d=await wb();e("success"),r(`Welcome, ${d.username}! Successfully signed in with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}}catch(d){e("error"),r("Authentication failed. Please try again."),console.error("GitHub callback error:",d)}})()},[s]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx(lt,{className:"w-10 h-10 text-green-400"}),o.jsx("span",{className:"text-3xl font-bold text-white",children:"ZedCTF"})]}),o.jsxs("div",{className:"space-y-4",children:[t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx(Xd,{className:"w-12 h-12 text-green-400 animate-spin mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Connecting to GitHub..."}),o.jsx("p",{className:"text-gray-300",children:"Please wait while we authenticate your account."})]}),t==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(er,{className:"w-12 h-12 text-green-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Successful!"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Redirecting to homepage..."})]}),t==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(Ji,{className:"w-12 h-12 text-red-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Failed"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Back to Login"}),o.jsx("button",{onClick:()=>s("/signup"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Try Sign Up"})]})]})]})]})})},e9=()=>{const t=oo();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},re=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));re.displayName="Card";const Pe=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));Pe.displayName="CardHeader";const De=g.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Le("text-2xl font-semibold leading-none tracking-tight",t),...e}));De.displayName="CardTitle";const Wt=g.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:Le("text-sm text-muted-foreground",t),...e}));Wt.displayName="CardDescription";const se=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("p-6 pt-0",t),...e}));se.displayName="CardContent";const t9=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("flex items-center p-6 pt-0",t),...e}));t9.displayName="CardFooter";const n9=({isOpen:t,onClose:e})=>{const{user:n}=Ln(),[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),d=g.useRef(null),[h,f]=g.useState({displayName:"",bio:"",role:"student",institution:""}),[m,_]=g.useState(null),[C,v]=g.useState("");g.useEffect(()=>{t&&n&&(async()=>{try{const T=await Zs(Ve(ge,"users",n.uid));if(T.exists()){const y=T.data();f({displayName:y.displayName||n.displayName||"",bio:y.bio||"",role:y.role||"student",institution:y.institution||""}),v(y.photoURL||n.photoURL||"")}else f({displayName:n.displayName||"",bio:"",role:"student",institution:""}),v(n.photoURL||"")}catch(T){console.error("Error fetching user data:",T)}})()},[t,n]);const x=R=>{const{name:T,value:y}=R.target;f(I=>({...I,[T]:y}))},N=async R=>{var y;const T=(y=R.target.files)==null?void 0:y[0];if(T){if(!T.type.startsWith("image/")){alert("Please select an image file");return}if(T.size>2*1024*1024){alert("Image size should be less than 2MB for faster upload");return}_(T);const I=URL.createObjectURL(T);v(I)}},b=(R,T=800,y=.8)=>new Promise((I,w)=>{const k=document.createElement("canvas"),j=k.getContext("2d"),A=new Image;A.onload=()=>{let F=A.width,q=A.height;F>T&&(q=q*T/F,F=T),k.width=F,k.height=q,j==null||j.drawImage(A,0,0,F,q),k.toBlob(B=>{if(B){const $=new File([B],R.name,{type:"image/jpeg",lastModified:Date.now()});I($)}else w(new Error("Image compression failed"))},"image/jpeg",y)},A.onerror=w,A.src=URL.createObjectURL(R)}),S=async(R,T)=>{const y=await b(R),w=`profile_${Date.now()}.jpg`,k=w5(S5,`profile-pictures/${T}/${w}`),j=await x5(k,y);return await v5(j.ref)},D=async R=>{if(R.preventDefault(),!!n){s(!0),c(!1);try{let T=n.photoURL;if(m){a(!0);try{T=await S(m,n.uid),console.log("Profile image uploaded successfully")}catch(I){console.error("Error uploading image:",I)}finally{a(!1)}}const y=[];(h.displayName!==n.displayName||T!==n.photoURL)&&y.push(rT(n,{displayName:h.displayName,photoURL:T})),y.push(dn(Ve(ge,"users",n.uid),{displayName:h.displayName,bio:h.bio,role:h.role,institution:h.institution,photoURL:T,updatedAt:new Date})),await Promise.all(y),console.log("Profile updated successfully"),c(!0),setTimeout(()=>{e(),window.location.reload()},1e3)}catch(T){console.error("Error updating profile:",T),alert("Failed to update profile. Please try again.")}finally{s(!1)}}},L=()=>{var R;(R=d.current)==null||R.click()};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",disabled:r,children:o.jsx(Zi,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[l&&o.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded flex items-center gap-2",children:[o.jsx(er,{className:"w-5 h-5"}),"Profile updated successfully!"]}),o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full bg-muted/50 border-2 border-border flex items-center justify-center overflow-hidden",children:C?o.jsx("img",{src:C,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(An,{className:"w-12 h-12 text-muted-foreground"})}),o.jsx("button",{type:"button",onClick:L,disabled:i||r,className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 hover:bg-primary/90 transition-colors disabled:opacity-50",children:i?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(EU,{className:"w-4 h-4"})}),o.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:N,className:"hidden",disabled:i||r})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:i?"Uploading image...":"Click the camera icon to upload a profile picture (max 2MB)"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-foreground mb-2",children:"Display Name"}),o.jsx("input",{id:"displayName",name:"displayName",type:"text",value:h.displayName,onChange:x,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Enter your display name",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-foreground mb-2",children:"Bio"}),o.jsx("textarea",{id:"bio",name:"bio",rows:3,value:h.bio,onChange:x,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none",placeholder:"Tell us about yourself...",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:"I am a"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"student",label:"Student",icon:Ux},{value:"lecturer",label:"Lecturer",icon:jt},{value:"expert",label:"Expert",icon:WC},{value:"general",label:"General User",icon:An}].map(({value:R,label:T,icon:y})=>o.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-all ${h.role===R?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 text-foreground"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:R,checked:h.role===R,onChange:x,className:"hidden",disabled:r}),o.jsx(y,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:T})]},R))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-foreground mb-2",children:"Institution"}),o.jsx("input",{id:"institution",name:"institution",type:"text",value:h.institution,onChange:x,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Your school, university, or organization",disabled:r})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,disabled:r,className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r||i,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},r9=()=>{var R,T;const{user:t}=Ln(),e=yn(),[n,r]=g.useState(null),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(!1),[m,_]=g.useState(null),C=y=>{switch(y){case"student":return o.jsx(Ux,{className:"w-4 h-4"});case"lecturer":return o.jsx(jt,{className:"w-4 h-4"});case"expert":return o.jsx(WC,{className:"w-4 h-4"});default:return o.jsx(An,{className:"w-4 h-4"})}},v=y=>{switch(y){case"student":return"Student";case"lecturer":return"Lecturer";case"expert":return"Expert";default:return"General User"}},x=y=>{try{if(!y)return"recently";let I;return y instanceof Date?I=y:y&&typeof y=="object"&&typeof y.toDate=="function"?I=y.toDate():typeof y=="string"?I=new Date(y):typeof y=="number"?I=new Date(y):I=new Date,isNaN(I.getTime())?"recently":I.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(I){return console.error("Date formatting error:",I),"recently"}},N=async(y,I)=>{try{console.log("Calculating REAL rank for user:",y,"with points:",I);const w=jn(xt(ge,"users"),Yi("totalPoints","desc")),k=await In(w);if(k.empty)return console.log("No users found in database"),1;const j=k.docs.map(F=>({id:F.id,totalPoints:Number(F.data().totalPoints)||0,displayName:F.data().displayName||F.data().username||"Anonymous"}));console.log(`Found ${j.length} users for REAL rank calculation`);let A=1;for(let F=0;F<j.length;F++)if(j[F].id===y)return console.log(`User found at REAL position ${F+1} in leaderboard`),F+1;return console.log("User not found in leaderboard query, this shouldn't happen"),j.length+1}catch(w){return console.error("Error calculating REAL user rank:",w),0}},b=async y=>{try{const I=jn(xt(ge,"challenges"),_n("isActive","==",!0)),w=await In(I),k=[];w.forEach(A=>{const F=A.data();F.solvedBy&&Array.isArray(F.solvedBy)&&F.solvedBy.includes(y)&&k.push({id:A.id,title:F.title||"Untitled Challenge",points:F.points||0,solvedAt:F.solvedAt||new Date,category:F.category||"general",difficulty:F.difficulty||"easy"})});const j=k.sort((A,F)=>{var $,O;const q=($=A.solvedAt)!=null&&$.toDate?A.solvedAt.toDate():new Date(A.solvedAt);return((O=F.solvedAt)!=null&&O.toDate?F.solvedAt.toDate():new Date(F.solvedAt)).getTime()-q.getTime()}).slice(0,5);return console.log(`Found ${j.length} REAL solved challenges`),j}catch(I){return console.error("Error fetching REAL solved challenges:",I),[]}},S=async y=>{try{const I=jn(xt(ge,"events")),w=await In(I),k=[];w.forEach(A=>{const F=A.data();F.participants&&Array.isArray(F.participants)&&F.participants.includes(y)&&k.push({id:A.id,name:F.name||"Unnamed Event",date:F.date||"Unknown date",prize:F.prize||"Participation",position:F.position||0,pointsEarned:F.pointsEarned||0})});const j=k.sort((A,F)=>new Date(F.date).getTime()-new Date(A.date).getTime()).slice(0,5);return console.log(`Found ${j.length} REAL events participated`),j}catch(I){return console.error("Error fetching REAL events:",I),[]}},D=async()=>{var y,I,w,k,j,A;if(t)try{d(!0),console.log("Fetching REAL dashboard data for user:",t.uid);const F=await Zs(Ve(ge,"users",t.uid));if(F.exists()){const q=F.data();console.log("REAL user data from Firestore:",q),_(q);const B=Number(q.totalPoints)||0,$=Number(q.challengesSolved)||0,O=await N(t.uid,B),W=await b(t.uid),Y=await S(t.uid);let M=q.createdAt;!M&&((y=t==null?void 0:t.metadata)!=null&&y.creationTime)&&(M=t.metadata.creationTime),r({totalPoints:B,challengesSolved:$,currentRank:O,username:q.username||((I=t==null?void 0:t.email)==null?void 0:I.split("@")[0])||"Hacker",joinDate:M||new Date().toISOString(),firstName:q.firstName,lastName:q.lastName,displayName:q.displayName,bio:q.bio,role:q.role,institution:q.institution,photoURL:q.photoURL}),l(W),i(Y)}else{console.log("No user document found in Firestore");const q=((w=t==null?void 0:t.metadata)==null?void 0:w.creationTime)||new Date().toISOString();r({totalPoints:0,challengesSolved:0,currentRank:0,username:((k=t==null?void 0:t.email)==null?void 0:k.split("@")[0])||"Hacker",joinDate:q}),l([]),i([])}}catch(F){console.error("Error fetching REAL dashboard data:",F);const q=((j=t==null?void 0:t.metadata)==null?void 0:j.creationTime)||new Date().toISOString();r({totalPoints:0,challengesSolved:0,currentRank:0,username:((A=t==null?void 0:t.email)==null?void 0:A.split("@")[0])||"Hacker",joinDate:q}),l([]),i([])}finally{d(!1)}},L=()=>{f(!1),setTimeout(()=>{D()},1e3)};return g.useEffect(()=>{t&&D()},[t]),c?o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{id:"dashboard",className:"pt-20 lg:pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading your dashboard..."})]})}),o.jsx(tt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{id:"dashboard",className:"pt-20 lg:pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsx("div",{className:"mb-6 lg:mb-8",children:o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-primary/20 rounded-full flex items-center justify-center overflow-hidden border-2 border-primary/30",children:t!=null&&t.photoURL||m!=null&&m.photoURL?o.jsx("img",{src:(t==null?void 0:t.photoURL)||(m==null?void 0:m.photoURL),alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(An,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"})}),o.jsx("button",{onClick:()=>f(!0),className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground rounded-full p-1 hover:bg-primary/90 transition-colors",title:"Edit Profile",children:o.jsx(JC,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold break-words",children:["Welcome back,"," ",o.jsx("span",{className:"text-primary",children:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||(n==null?void 0:n.username)||((R=t==null?void 0:t.email)==null?void 0:R.split("@")[0])||"Hacker"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"break-all",children:t==null?void 0:t.email}),(m==null?void 0:m.role)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsxs("div",{className:"flex items-center gap-1",children:[C(m.role),o.jsx("span",{children:v(m.role)})]})]}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsxs("span",{className:"text-xs sm:text-sm",children:["Member since"," ",x(n==null?void 0:n.joinDate)]})]}),(m==null?void 0:m.institution)&&o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:m.institution}),(m==null?void 0:m.bio)&&o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1 line-clamp-2",children:m.bio})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 lg:mb-8",children:[o.jsxs(re,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2 p-4",children:[o.jsx(De,{className:"text-sm font-medium text-muted-foreground",children:"Total Points"}),o.jsx(ks,{className:"w-5 h-5 text-primary"})]}),o.jsxs(se,{className:"p-4 pt-0",children:[o.jsx("div",{className:"text-2xl lg:text-3xl font-bold mb-2",children:((T=n==null?void 0:n.totalPoints)==null?void 0:T.toLocaleString())||"0"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["From ",(n==null?void 0:n.challengesSolved)||0," solved challenges"]})]})]}),o.jsxs(re,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2 p-4",children:[o.jsx(De,{className:"text-sm font-medium text-muted-foreground",children:"Global Rank"}),o.jsx(zU,{className:"w-5 h-5 text-primary"})]}),o.jsxs(se,{className:"p-4 pt-0",children:[o.jsx("div",{className:"text-2xl lg:text-3xl font-bold mb-2",children:n!=null&&n.currentRank?`#${n.currentRank}`:"Unranked"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Real position on global leaderboard"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{className:"border-border",children:[o.jsx(Pe,{className:"p-4 sm:p-6",children:o.jsxs(De,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[o.jsx(hg,{className:"w-5 h-5 text-primary"}),"Recently Solved Challenges"]})}),o.jsx(se,{className:"p-4 sm:p-6 pt-0",children:a.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(hg,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base",children:"No challenges solved yet"}),o.jsx("p",{className:"text-sm mt-2 mb-4",children:"Solve challenges to see them here"}),o.jsx("button",{onClick:()=>e("/challenges"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm",children:"Browse Challenges"})]}):o.jsx("div",{className:"space-y-4",children:a.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/20 border border-border hover:bg-muted/40 cursor-pointer transition-colors",onClick:()=>e(`/challenge/${y.id}`),children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base hover:text-primary transition-colors",children:y.title}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"capitalize",children:y.category}),o.jsx("span",{children:""}),o.jsx("span",{className:"capitalize",children:y.difficulty})]})]}),o.jsxs("div",{className:"text-primary font-bold text-lg",children:["+",y.points]})]},y.id))})})]}),o.jsxs(re,{className:"border-border",children:[o.jsx(Pe,{className:"p-4 sm:p-6",children:o.jsxs(De,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[o.jsx(zr,{className:"w-5 h-5 text-primary"}),"Events Participated In"]})}),o.jsx(se,{className:"p-4 sm:p-6 pt-0",children:s.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(zr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base",children:"No events participated yet"}),o.jsx("p",{className:"text-sm mt-2 mb-4",children:"Join CTF events to compete"}),o.jsx("button",{onClick:()=>e("/events"),className:"px-6 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 transition-colors text-sm",children:"View Events"})]}):o.jsx("div",{className:"space-y-4",children:s.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base",children:y.name}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{children:x(y.date)}),y.position>0&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Position: #",y.position]})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-secondary font-bold",children:y.prize}),y.pointsEarned>0&&o.jsxs("div",{className:"text-sm text-primary",children:["+",y.pointsEarned," pts"]})]})]},y.id))})})]})]})]})}),o.jsx(tt,{}),o.jsx(n9,{isOpen:h,onClose:L})]})},s9=ef("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ve({className:t,variant:e,...n}){return o.jsx("div",{className:Le(s9({variant:e}),t),...n})}const he=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));he.displayName="Input";const i9=()=>{const{user:t}=Ln(),e=yn(),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[m,_]=g.useState(null),[C,v]=g.useState(""),[x,N]=g.useState(!1);g.useEffect(()=>{b()},[]),g.useEffect(()=>{D()},[h,m,n]);const b=async()=>{try{d(!0),v("");const j=jn(xt(ge,"challenges"),_n("isActive","==",!0),_n("availableInPractice","==",!0)),F=(await In(j)).docs.map(q=>({id:q.id,...q.data()}));r(F),S(F)}catch(j){console.error("Error fetching practice challenges:",j),v("Failed to load challenges. Please check your permissions.")}finally{d(!1)}},S=j=>{const A=new Map;j.forEach(B=>{const $=B.finalCategory||B.category;A.set($,(A.get($)||0)+1)});const F={web:{color:"from-blue-500 to-cyan-500",icon:"",description:"Web application security, SQL injection, XSS, and more"},crypto:{color:"from-purple-500 to-pink-500",icon:"",description:"Cryptography, encryption, and cryptographic attacks"},forensics:{color:"from-orange-500 to-red-500",icon:"",description:"Digital forensics, file analysis, and data recovery"},pwn:{color:"from-red-500 to-rose-500",icon:"",description:"Binary exploitation, memory corruption, and reverse engineering"},reversing:{color:"from-indigo-500 to-purple-500",icon:"",description:"Reverse engineering and malware analysis"},misc:{color:"from-gray-500 to-slate-500",icon:"",description:"Miscellaneous challenges and various security topics"}},q=Array.from(A.entries()).map(([B,$])=>{const O=F[B.toLowerCase()]||{color:"from-gray-500 to-slate-500",icon:"",description:"Various security challenges"};return{name:B,count:$,icon:O.icon,color:O.color,description:O.description}});q.sort((B,$)=>$.count-B.count),i(q)},D=()=>{let j=[...n];h&&(j=j.filter(A=>A.title.toLowerCase().includes(h.toLowerCase())||A.description.toLowerCase().includes(h.toLowerCase()))),m&&(j=j.filter(A=>(A.finalCategory||A.category)===m)),j=j.sort((A,F)=>(F.totalPoints||F.points)-(A.totalPoints||A.points)),l(j)},L=j=>{switch(j){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},R=j=>{switch(j){case"easy":return"Easy";case"medium":return"Medium";case"hard":return"Hard";case"expert":return"Expert";default:return j}},T=j=>{e(`/challenge/${j}`)},y=()=>{e("/live")},I=()=>{b()},w=()=>{f(""),_(null),N(!1)},k=j=>{_(j),N(!1)};return c?o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading practice challenges..."})]})})}),o.jsx(tt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex justify-center mb-3",children:o.jsx(lt,{className:"w-12 h-12 text-primary sm:w-16 sm:h-16"})}),o.jsx("h1",{className:"text-2xl sm:text-4xl font-bold mb-3 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Practice Challenges"}),o.jsx("p",{className:"text-sm sm:text-xl text-muted-foreground max-w-2xl mx-auto mb-4",children:"Master your cybersecurity skills with hands-on challenges"}),C&&o.jsx(re,{className:"max-w-2xl mx-auto mb-4 border-red-200 bg-red-50",children:o.jsx(se,{className:"p-3 sm:p-4",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx(KC,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"}),o.jsx("p",{className:"text-red-800 text-sm sm:text-base",children:C})]})})}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 max-w-2xl mx-auto mb-6",children:[o.jsx(re,{className:"text-center border",children:o.jsxs(se,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-primary",children:n.length}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Challenges"})]})}),o.jsx(re,{className:"text-center border",children:o.jsxs(se,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600",children:n.reduce((j,A)=>{var F;return j+(((F=A.solvedBy)==null?void 0:F.length)||0)},0)}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Solves"})]})}),o.jsx(re,{className:"text-center border",children:o.jsxs(se,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:s.length}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Categories"})]})})]}),o.jsx(re,{className:"max-w-4xl mx-auto mb-6 border bg-gradient-to-r from-primary/5 to-primary/10",children:o.jsx(se,{className:"p-4 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Jn,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),o.jsxs("div",{className:"text-left",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-lg",children:"Ready for Live Competition?"}),o.jsx("p",{className:"text-muted-foreground text-xs sm:text-base",children:"Test your skills in real-time events!"})]})]}),o.jsxs(J,{variant:"terminal",onClick:y,size:"sm",className:"w-full sm:w-auto",children:[o.jsx(Jn,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Live Events"]})]})})})]}),o.jsxs("div",{className:"max-w-2xl mx-auto mb-6",children:[o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ha,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(he,{placeholder:"Search challenges...",value:h,onChange:j=>f(j.target.value),className:"pl-10 h-10 text-sm border-2"})]}),o.jsx(J,{variant:"outline",size:"icon",onClick:()=>N(!x),className:"h-10 w-10",children:o.jsx(AU,{className:"h-4 w-4"})})]}),(h||m)&&o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h&&o.jsxs(ve,{variant:"secondary",className:"flex items-center gap-1",children:['Search: "',h,'"',o.jsx(Zi,{className:"w-3 h-3 cursor-pointer",onClick:()=>f("")})]}),m&&o.jsxs(ve,{variant:"secondary",className:"flex items-center gap-1",children:["Category: ",m,o.jsx(Zi,{className:"w-3 h-3 cursor-pointer",onClick:()=>_(null)})]}),o.jsx(J,{variant:"ghost",size:"sm",onClick:w,className:"h-6 text-xs",children:"Clear All"})]})]}),!m&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Choose a Category"}),o.jsxs(J,{variant:"outline",onClick:I,size:"sm",children:[o.jsx(Nm,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),s.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(j=>o.jsx(re,{className:"border hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>k(j.name),children:o.jsxs(se,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:`text-xl sm:text-2xl bg-gradient-to-r ${j.color} rounded-lg p-2 sm:p-3`,children:j.icon}),o.jsx(fb,{className:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground group-hover:text-primary transition-colors"})]}),o.jsx("h3",{className:"font-bold text-base sm:text-lg mb-1 group-hover:text-primary transition-colors",children:j.name}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm",children:[j.count," challenge",j.count!==1?"s":""]})]})},j.name))}):o.jsx(re,{className:"text-center border",children:o.jsxs(se,{className:"p-8 sm:p-12",children:[o.jsx(kU,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Categories Available"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"No practice challenges are currently available. Check back later!"})]})})]}),m&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(J,{variant:"outline",onClick:()=>_(null),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",size:"sm",children:[o.jsx(fb,{className:"w-3 h-3 sm:w-4 sm:h-4 rotate-180"}),"Back"]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold",children:[m," Challenges"]}),o.jsxs("p",{className:"text-muted-foreground text-sm",children:[a.length," challenge",a.length!==1?"s":""," available"]})]})]}),o.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[o.jsx(J,{variant:"outline",onClick:w,size:"sm",className:"text-xs",children:"Clear"}),o.jsx(J,{variant:"outline",onClick:I,size:"sm",children:o.jsx(Nm,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),a.length>0?o.jsx("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:a.map(j=>{var A,F,q,B;return o.jsx(re,{className:"border hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>T(j.id),children:o.jsxs(se,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[o.jsx("h3",{className:"font-bold text-base sm:text-lg group-hover:text-primary transition-colors flex-1 mr-2",children:j.title}),o.jsx(ve,{className:`${L(j.difficulty)} text-xs`,children:R(j.difficulty)})]}),o.jsx("p",{className:"text-muted-foreground text-sm mb-3 sm:mb-4 line-clamp-2",children:j.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(jt,{className:"w-3 h-3 sm:w-4 sm:h-4"}),o.jsx("span",{children:((A=j.solvedBy)==null?void 0:A.length)||0})]}),o.jsxs(ve,{variant:"outline",className:"font-mono font-bold text-xs",children:[j.totalPoints||j.points," pts"]})]}),j.createdAt&&o.jsx("div",{className:"text-muted-foreground text-xs",children:((B=(q=(F=j.createdAt)==null?void 0:F.toDate)==null?void 0:q.call(F))==null?void 0:B.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))||new Date(j.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})},j.id)})}):o.jsx(re,{className:"text-center border",children:o.jsxs(se,{className:"p-8 sm:p-12",children:[o.jsx(ha,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Challenges Found"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mb-3 sm:mb-4",children:h?`No challenges match "${h}" in ${m}`:`No challenges available in ${m}`}),o.jsx(J,{variant:"outline",onClick:w,size:"sm",children:"Clear Search"})]})})]}),n.length===0&&!c&&!m&&o.jsx(re,{className:"text-center border",children:o.jsxs(se,{className:"p-8 sm:p-12",children:[o.jsx(lt,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Practice Challenges Available"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mb-4 sm:mb-6",children:"Check back later for new practice challenges, or join a live event to test your skills."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-center",children:[o.jsxs(J,{variant:"terminal",onClick:I,size:"sm",children:[o.jsx(Nm,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Refresh"]}),o.jsxs(J,{variant:"outline",onClick:y,size:"sm",children:[o.jsx(Jn,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"View Live Events"]})]})]})})]})}),o.jsx(tt,{})]})},o9=()=>{const{user:t}=Ln(),e=yn(),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState(!0),[c,d]=g.useState(null),[h,f]=g.useState(!1),[m,_]=g.useState("user"),C=async()=>{if(t)try{const w=await Zs(Ve(ge,"users",t.uid));if(w.exists()){const k=w.data();_(k.role||"user")}}catch(w){console.error("Error fetching user role:",w),_("user")}},v=(w,k)=>{const j=new Date,A=new Date(w),F=new Date(k);if(j<A){const q=A.getTime()-j.getTime(),B=Math.floor(q/(1e3*60*60)),$=Math.floor(q%(1e3*60*60)/(1e3*60)),O=Math.floor(q%(1e3*60)/1e3);return`${B.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`}else{if(j>F)return"00:00:00";{const q=F.getTime()-j.getTime(),B=Math.floor(q/(1e3*60*60)),$=Math.floor(q%(1e3*60*60)/(1e3*60)),O=Math.floor(q%(1e3*60)/1e3);return`${B.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}:${O.toString().padStart(2,"0")}`}}},x=(w,k)=>{const j=new Date,A=new Date(w),F=new Date(k);return j>=A&&j<=F?"LIVE":j<A?"UPCOMING":"ENDED"},N=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),b=w=>new Date(w).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),S=w=>w?w.replace(/0+$/,"").trim():"Untitled Event",D=async()=>{try{d(null);const w=jn(xt(ge,"events"),Yi("startDate","asc")),k=await In(w);console.log("Total events found:",k.size);const j=new Date,A=[],F=[];k.docs.forEach(q=>{var G,ce,pe,Z;const B=q.data();if(!B.startDate||!B.endDate){console.log("Skipping event - missing dates:",B.name);return}const $=(G=B.status)==null?void 0:G.toLowerCase();if($!=="approved"&&$!=="live"&&$!=="upcoming")return;const O=x(B.startDate,B.endDate);if(O==="ENDED")return;const W=S(B.name),Y=B.title?S(B.title):void 0;console.log("Event data:",{id:q.id,originalName:B.name,originalTitle:B.title,cleanedName:W,cleanedTitle:Y,participants:B.totalParticipants||((ce=B.participants)==null?void 0:ce.length)||0});const M={id:q.id,name:W,title:Y,status:O,participants:B.totalParticipants||((pe=B.participants)==null?void 0:pe.length)||0,timeLeft:v(B.startDate,B.endDate),startDate:B.startDate,endDate:B.endDate,challengeCount:B.challengeCount,registeredUsers:B.registeredUsers,description:B.description,createdBy:B.createdBy,createdById:B.createdById,hostingFee:B.hostingFee,hostingPaymentStatus:B.hostingPaymentStatus};O==="LIVE"?A.push(M):O==="UPCOMING"&&F.push({...M,date:`${N(B.startDate)} at ${b(B.startDate)}`,registered:t&&((Z=B.registeredUsers)==null?void 0:Z.includes(t.uid))||!1,maxParticipants:B.maxIndividuals,maxIndividuals:B.maxIndividuals})}),r(A),i(F)}catch(w){console.error("Error fetching events:",w),d(w.message||"Failed to load events")}finally{l(!1)}},L=async w=>{var k;if(!t){alert("Please log in to join events");return}try{const j=n.find(A=>A.id===w);if(!j)throw new Error("Event not found");if(!((k=j.registeredUsers)!=null&&k.includes(t.uid))){alert("You need to register for this event first before joining");return}e(`/competition/${w}`)}catch(j){console.error("Failed to join live event:",j),alert(`Failed to join event: ${j.message}`)}},R=()=>{e("/admin")},T=w=>{e(`/event/${w}`)},y=async()=>{if(t){f(!0);try{const w=await kx(xt(ge,"hostRequests"),{userId:t.uid,userEmail:t.email,userName:t.displayName||t.email,hostingFee:5,status:"pending_payment",submittedAt:new Date,paymentMethod:"flutterwave_mobile_money",type:"event_hosting"});await new Promise(k=>setTimeout(k,2e3)),await dn(w,{status:"paid",paidAt:new Date}),e("/admin?tab=events&hosting_paid=true")}catch(w){console.error("Payment processing error:",w),alert("Payment failed. Please try again.")}finally{f(!1)}}};if(g.useEffect(()=>{D(),t&&C();const w=setInterval(D,3e4);return()=>clearInterval(w)},[t]),a)return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading events..."})]})}),o.jsx(tt,{})]});const I=n[0];return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[c&&o.jsxs("div",{className:"max-w-4xl mx-auto mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:[o.jsx("p",{className:"text-destructive text-sm",children:c}),o.jsx(J,{variant:"outline",size:"sm",className:"mt-2",onClick:D,children:"Retry"})]}),o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Jn,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[o.jsx("span",{className:"text-primary",children:"LIVE"})," CTF Events"]}),o.jsx("p",{className:"text-muted-foreground",children:"Compete in real-time for prizes"})]}),t&&o.jsx(re,{className:"max-w-4xl mx-auto mb-8 border-primary/20 bg-gradient-to-br from-primary/5 to-primary/10",children:o.jsxs(se,{className:"p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ua,{className:"w-8 h-8 text-primary"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Want to Host Your Own Event?"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Submit a hosting request and get access to event management tools"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(J,{onClick:y,disabled:h,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[o.jsx(IU,{className:"w-4 h-4 mr-2"}),h?"Processing...":"Get Hosting Access - 5 ZMW"]}),m==="admin"&&o.jsxs(J,{onClick:R,variant:"outline",children:[o.jsx(ua,{className:"w-4 h-4 mr-2"}),"Admin Dashboard"]})]})]}),o.jsxs("div",{className:"mt-4 p-4 bg-background/50 rounded-lg border border-border",children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("span",{className:"font-medium text-foreground",children:"Event Hosting Fee:"}),o.jsx("span",{className:"text-lg font-bold text-primary",children:"ZMW 5"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Pay 5 ZMW via Mobile Money to unlock event hosting capabilities for your event and get access to:"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-foreground",children:[o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),"Challenge Creation Tools"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),"Event Scheduling"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),"Challenge Management"]}),o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),"Event Management"]})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-border",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:"Note: This payment grants hosting access for a single event. Each event requires its own hosting payment."})})]})]})}),I?o.jsxs(re,{className:"max-w-4xl mx-auto border-primary/50 bg-gradient-to-br from-primary/5 to-transparent mb-8 animate-glow",children:[o.jsx(Pe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(De,{className:"text-2xl flex items-center gap-2",children:[o.jsxs("span",{className:"relative flex h-3 w-3",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-primary"})]}),I.title||I.name,I.createdBy==="user"&&o.jsx(ve,{variant:"outline",className:"ml-2",children:"Community Hosted"})]}),o.jsx(ve,{className:"bg-primary text-primary-foreground font-bold px-4 py-1",children:"LIVE NOW"})]})}),o.jsxs(se,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(ei,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold font-mono",children:I.timeLeft}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Left"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(jt,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:I.participants}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Players"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Jn,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:I.challengeCount||0}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Challenges"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(zr,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:b(I.endDate)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Ends At"})]})]}),I.description&&o.jsx("p",{className:"text-sm text-muted-foreground mb-4 text-center",children:I.description}),o.jsxs(J,{variant:"neon",size:"lg",className:"w-full",onClick:()=>L(I.id),children:[o.jsx(Jn,{className:"w-5 h-5"}),"Join Event Now"]})]})]}):o.jsx(re,{className:"max-w-4xl mx-auto border-border mb-8",children:o.jsxs(se,{className:"p-12 text-center",children:[o.jsx(Jn,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Live Events"}),o.jsx("p",{className:"text-muted-foreground",children:"Check back later for upcoming competitions"})]})}),n.length>1&&o.jsxs("div",{className:"max-w-4xl mx-auto mb-8",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Other Live Events"}),o.jsx("div",{className:"space-y-4",children:n.slice(1).map(w=>o.jsx(re,{className:"border-primary/30 hover:border-primary/50 cursor-pointer transition-colors",onClick:()=>T(w.id),children:o.jsx(se,{className:"p-6",children:o.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"font-bold text-xl mb-2",children:w.title||w.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ve,{className:"bg-primary/20 text-primary font-bold",children:"LIVE"}),w.createdBy==="user"&&o.jsx(ve,{variant:"secondary",children:"Community Hosted"})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ei,{className:"w-4 h-4"}),w.timeLeft]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jt,{className:"w-4 h-4"}),w.participants," players"]}),w.challengeCount!==void 0&&w.challengeCount>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"w-4 h-4"}),w.challengeCount," challenges"]})]}),w.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:w.description})]})})})},w.id))})]}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Upcoming Events"}),s.length===0?o.jsx(re,{className:"border-border",children:o.jsxs(se,{className:"p-8 text-center",children:[o.jsx(zr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-muted-foreground",children:"No upcoming events scheduled"})]})}):o.jsx("div",{className:"space-y-4",children:s.map(w=>o.jsx(re,{className:"border-border hover:border-primary/30 cursor-pointer transition-colors",onClick:()=>T(w.id),children:o.jsx(se,{className:"p-6",children:o.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h4",{className:"font-bold text-xl mb-2",children:w.title||w.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[w.createdBy==="user"&&o.jsx(ve,{variant:"secondary",children:"Community Hosted"}),w.maxParticipants&&w.participants>=w.maxParticipants&&o.jsx(ve,{variant:"secondary",className:"bg-destructive/10 text-destructive",children:"FULL"})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(zr,{className:"w-4 h-4"}),w.date]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jt,{className:"w-4 h-4"}),w.participants>0?`${w.participants} registered`:"No registrations yet",w.maxParticipants&&w.maxParticipants>0&&` / ${w.maxParticipants} max`]}),w.challengeCount!==void 0&&w.challengeCount>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"w-4 h-4"}),w.challengeCount," challenges"]})]}),w.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:w.description})]})})})},w.id))})]})]})}),o.jsx(tt,{})]})};function a9(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const d=f=>{var N;const{scope:m,children:_,...C}=f,v=((N=m==null?void 0:m[t])==null?void 0:N[c])||l,x=g.useMemo(()=>C,Object.values(C));return o.jsx(v.Provider,{value:x,children:_})};d.displayName=i+"Provider";function h(f,m){var v;const _=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,C=g.useContext(_);if(C)return C;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,l9(s,...e)]}function l9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Zr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var Et=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},c9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$x=c9.reduce((t,e)=>{const n=Vx(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),ej={exports:{}},tj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fa=g;function u9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var d9=typeof Object.is=="function"?Object.is:u9,h9=fa.useState,f9=fa.useEffect,m9=fa.useLayoutEffect,p9=fa.useDebugValue;function g9(t,e){var n=e(),r=h9({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return m9(function(){s.value=n,s.getSnapshot=e,Sm(s)&&i({inst:s})},[t,n,e]),f9(function(){return Sm(s)&&i({inst:s}),t(function(){Sm(s)&&i({inst:s})})},[t]),p9(n),n}function Sm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!d9(t,n)}catch{return!0}}function y9(t,e){return e()}var x9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?y9:g9;tj.useSyncExternalStore=fa.useSyncExternalStore!==void 0?fa.useSyncExternalStore:x9;ej.exports=tj;var v9=ej.exports;function w9(){return v9.useSyncExternalStore(_9,()=>!0,()=>!1)}function _9(){return()=>{}}var zx="Avatar",[b9]=a9(zx),[E9,nj]=b9(zx),rj=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return o.jsx(E9,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx($x.span,{...r,ref:e})})});rj.displayName=zx;var sj="AvatarImage",ij=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=nj(sj,n),l=N9(r,i),c=Zr(d=>{s(d),a.onImageLoadingStatusChange(d)});return Et(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx($x.img,{...i,ref:e,src:r}):null});ij.displayName=sj;var oj="AvatarFallback",aj=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=nj(oj,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx($x.span,{...s,ref:e}):null});aj.displayName=oj;function _b(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function N9(t,{referrerPolicy:e,crossOrigin:n}){const r=w9(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>_b(i,t));return Et(()=>{l(_b(i,t))},[i,t]),Et(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),a}var lj=rj,cj=ij,uj=aj;const mg=g.forwardRef(({className:t,...e},n)=>o.jsx(lj,{ref:n,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));mg.displayName=lj.displayName;const T9=g.forwardRef(({className:t,...e},n)=>o.jsx(cj,{ref:n,className:Le("aspect-square h-full w-full",t),...e}));T9.displayName=cj.displayName;const pg=g.forwardRef(({className:t,...e},n)=>o.jsx(uj,{ref:n,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));pg.displayName=uj.displayName;const S9=ef("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),kc=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Le(S9({variant:e}),t),...n}));kc.displayName="Alert";const C9=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Le("mb-1 font-medium leading-none tracking-tight",t),...e}));C9.displayName="AlertTitle";const Rc=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("text-sm [&_p]:leading-relaxed",t),...e}));Rc.displayName="AlertDescription";const j9=({eventName:t="CTF Competition"})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),[l,c]=g.useState(""),[d,h]=g.useState(""),f=async()=>{var x;try{console.log("Fetching leaderboard data from Firestore..."),h("");let N=[],b=[];try{const S=jn(xt(ge,"users"),Yi("totalPoints","desc"),Z_(100)),D=await In(S);let L=1;for(const R of D.docs){const T=R.data();N.push({rank:L,name:T.displayName||T.username||((x=T.email)==null?void 0:x.split("@")[0])||"Anonymous",email:T.email||"",points:T.totalPoints||0,userId:R.id,photoURL:T.photoURL,role:T.role,institution:T.institution}),L++}console.log(`Found ${N.length} users for global leaderboard`,N)}catch(S){console.log("Global leaderboard query failed:",S),h("Unable to load leaderboard data. Please check Firestore rules.")}try{const S=jn(xt(ge,"events"),Z_(1)),D=await In(S);if(!D.empty){const L=D.docs[0].data();console.log("Event found:",L),L.participants&&Array.isArray(L.participants)&&(b=L.participants.filter(R=>R.points>0).map((R,T)=>({rank:T+1,team:R.teamName||`Team ${T+1}`,captain:R.captain||R.displayName||"Unknown",points:R.points||0,lastActivity:R.lastActivity||"Recently",challenge:R.currentChallenge||"Multiple challenges"})).sort((R,T)=>T.points-R.points).map((R,T)=>({...R,rank:T+1})))}console.log(`Found ${b.length} teams for CTF leaderboard`)}catch(S){console.log("CTF leaderboard query failed:",S)}n(N),s(b),c(new Date().toLocaleTimeString())}catch(N){console.error("Error fetching leaderboard data:",N),h("Failed to load leaderboard data. Please try again later."),n([]),s([])}finally{a(!1)}},m=x=>x<=3?o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[_(x),o.jsxs("span",{className:"text-white font-bold text-sm",children:["#",x]})]}):o.jsxs("span",{className:"font-bold text-white text-sm",children:["#",x]}),_=x=>{switch(x){case 1:return o.jsx(ua,{className:"w-4 h-4 text-yellow-400"});case 2:return o.jsx(vb,{className:"w-4 h-4 text-gray-300"});case 3:return o.jsx(vb,{className:"w-4 h-4 text-amber-500"});default:return null}},C=x=>{switch(x){case 1:return"bg-gradient-to-br from-yellow-500 to-yellow-600";case 2:return"bg-gradient-to-br from-gray-500 to-gray-600";case 3:return"bg-gradient-to-br from-amber-600 to-amber-700";default:return"bg-primary"}},v=x=>x.split(" ").map(N=>N.charAt(0)).join("").toUpperCase().substring(0,2);return g.useEffect(()=>{f();const x=setInterval(f,3e4);return()=>clearInterval(x)},[]),i?o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{id:"leaderboard",className:"pt-20 lg:pt-24 pb-16 bg-muted/20 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading leaderboard data..."})]})}),o.jsx(tt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{id:"ctf-leaderboard",className:"pt-20 lg:pt-24 pb-16 bg-background min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-6 lg:mb-8 text-center",children:[o.jsx(ks,{className:"w-12 h-12 text-primary mx-auto mb-3 lg:mb-4"}),o.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold mb-2",children:[t," - ",o.jsx("span",{className:"text-primary",children:"Live Scoreboard"})]}),o.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Real-time competition rankings"}),l&&o.jsxs(ve,{variant:"outline",className:"mt-2 text-xs",children:[o.jsx(ei,{className:"w-3 h-3 mr-1"}),"Updated ",l]})]}),d&&o.jsxs(kc,{className:"max-w-2xl mx-auto mb-6 bg-yellow-50 border-yellow-200",children:[o.jsx(KC,{className:"w-4 h-4 text-yellow-600"}),o.jsx(Rc,{className:"text-yellow-800 text-sm",children:d})]}),o.jsxs(re,{className:"border-border shadow-lg",children:[o.jsx(Pe,{className:"bg-muted/30 p-4 lg:p-6",children:o.jsxs(De,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2",children:[o.jsxs("span",{className:"flex items-center gap-2 text-lg lg:text-xl",children:[o.jsx(hg,{className:"w-4 h-4 lg:w-5 lg:h-5 text-primary"}),"Live Competition Rankings"]}),o.jsx("span",{className:"text-sm text-muted-foreground",children:r.length>0?`${r.length} Teams Competing`:"No active competitions"})]})}),o.jsx(se,{className:"p-0",children:r.length===0?o.jsxs("div",{className:"text-center py-12 lg:py-16 text-muted-foreground",children:[o.jsx(ks,{className:"w-16 h-16 lg:w-20 lg:h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base lg:text-lg mb-2",children:"No active competitions"}),o.jsx("p",{className:"text-sm lg:text-base",children:"Join an event to see live scores"})]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsx("div",{className:"lg:hidden space-y-3 p-4",children:r.map(x=>o.jsx(re,{className:"border-border",children:o.jsxs(se,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-foreground",children:x.team}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Capt: ",x.captain]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg font-bold text-primary",children:x.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Last: ",x.lastActivity]}),o.jsx("span",{className:"truncate max-w-[120px]",children:x.challenge})]})]})},x.rank))}),o.jsx("div",{className:"hidden lg:block",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rank"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Team"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Captain"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Activity"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Challenge"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:r.map(x=>o.jsxs("tr",{className:"hover:bg-muted/20 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:x.team}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-muted-foreground",children:x.captain}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-lg font-bold text-primary",children:x.points.toLocaleString()})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:x.lastActivity}),o.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground max-w-xs truncate",children:x.challenge})]},x.rank))})]})})]})})]})]})}),o.jsx("section",{id:"global-leaderboard",className:"py-12 lg:py-16 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-6 lg:mb-12 text-center",children:[o.jsx(ks,{className:"w-12 h-12 lg:w-16 lg:h-16 text-primary mx-auto mb-3 lg:mb-4"}),o.jsxs("h2",{className:"text-2xl lg:text-4xl font-bold mb-2 lg:mb-4",children:["Global ",o.jsx("span",{className:"text-primary",children:"Leaderboard"})]}),o.jsx("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Top performers based on challenge points"})]}),o.jsxs(re,{className:"border-border shadow-lg",children:[o.jsx(Pe,{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-b p-4 lg:p-6",children:o.jsxs(De,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2",children:[o.jsxs("span",{className:"flex items-center gap-2 text-lg lg:text-xl",children:[o.jsx(jt,{className:"w-4 h-4 lg:w-5 lg:h-5 text-primary"}),"Top Platform Hackers"]}),o.jsx("span",{className:"text-sm text-muted-foreground",children:e.length>0?`${e.length} Players`:"No players found"})]})}),o.jsx(se,{className:"p-0",children:e.length===0?o.jsxs("div",{className:"text-center py-12 lg:py-16 text-muted-foreground",children:[o.jsx(ks,{className:"w-16 h-16 lg:w-20 lg:h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base lg:text-lg mb-2",children:"No users found in leaderboard"}),o.jsx("p",{className:"text-sm lg:text-base mb-4",children:"This could be due to Firestore rules restrictions or no users have points yet"}),o.jsx("button",{onClick:f,className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm",children:"Refresh Data"})]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsx("div",{className:"lg:hidden space-y-3 p-4",children:e.map(x=>o.jsx(re,{className:"border-border",children:o.jsxs(se,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)}),o.jsx(mg,{className:"w-8 h-8 border-2 border-primary/20",children:x.photoURL?o.jsx("img",{src:x.photoURL,alt:x.name,className:"w-full h-full object-cover"}):o.jsx(pg,{className:"bg-primary/20 text-primary font-bold text-xs",children:v(x.name)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-foreground text-sm",children:x.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:x.role||"Hacker"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-lg font-bold text-primary",children:x.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:x.institution||"No institution"})]})},x.userId))}),o.jsx("div",{className:"hidden lg:block",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rank"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Player"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Institution"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total Points"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:e.map(x=>o.jsxs("tr",{className:`hover:bg-muted/20 transition-all duration-200 ${x.rank<=3?"bg-gradient-to-r from-primary/5 to-transparent":""}`,children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full ${x.rank<=3?C(x.rank):"bg-muted"}`,children:m(x.rank)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(mg,{className:"w-10 h-10 border-2 border-primary/20",children:x.photoURL?o.jsx("img",{src:x.photoURL,alt:x.name,className:"w-full h-full object-cover"}):o.jsx(pg,{className:"bg-primary/20 text-primary font-bold",children:v(x.name)})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold text-foreground",children:x.name}),o.jsx("div",{className:"text-xs text-muted-foreground",children:x.role||"Hacker"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:x.institution||"-"}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-xl font-bold text-primary",children:x.points.toLocaleString()})})]},x.userId))})]})})]})})]})]})}),o.jsx(tt,{})]})};function Ae(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function mi(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var N;const{scope:m,children:_,...C}=f,v=((N=m==null?void 0:m[t])==null?void 0:N[c])||l,x=g.useMemo(()=>C,Object.values(C));return o.jsx(v.Provider,{value:x,children:_})};d.displayName=i+"Provider";function h(f,m){var v;const _=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,C=g.useContext(_);if(C)return C;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,I9(s,...e)]}function I9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function bb(t){const e=A9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(R9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function A9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=D9(s),l=P9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ac(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var k9=Symbol("radix.slottable");function R9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===k9}function P9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function D9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function dj(t){const e=t+"CollectionProvider",[n,r]=mi(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:x,children:N}=v,b=gs.useRef(null),S=gs.useRef(new Map).current;return o.jsx(s,{scope:x,itemMap:S,collectionRef:b,children:N})};a.displayName=e;const l=t+"CollectionSlot",c=bb(l),d=gs.forwardRef((v,x)=>{const{scope:N,children:b}=v,S=i(l,N),D=Je(x,S.collectionRef);return o.jsx(c,{ref:D,children:b})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=bb(h),_=gs.forwardRef((v,x)=>{const{scope:N,children:b,...S}=v,D=gs.useRef(null),L=Je(x,D),R=i(h,N);return gs.useEffect(()=>(R.itemMap.set(D,{ref:D,...S}),()=>void R.itemMap.delete(D))),o.jsx(m,{[f]:"",ref:L,children:b})});_.displayName=h;function C(v){const x=i(t+"CollectionConsumer",v);return gs.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const S=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((R,T)=>S.indexOf(R.ref.current)-S.indexOf(T.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:d,ItemSlot:_},C,r]}var L9=sh[" useId ".trim().toString()]||(()=>{}),O9=0;function Pc(t){const[e,n]=g.useState(L9());return Et(()=>{n(r=>r??String(O9++))},[t]),e?`radix-${e}`:""}function M9(t){const e=V9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(U9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function V9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=$9(s),l=B9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ac(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var F9=Symbol("radix.slottable");function U9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===F9}function B9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function $9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var z9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Re=z9.reduce((t,e)=>{const n=M9(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function H9(t,e){t&&va.flushSync(()=>t.dispatchEvent(e))}var W9=sh[" useInsertionEffect ".trim().toString()]||Et;function ma({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=q9({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=g.useRef(t!==void 0);g.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=g.useCallback(h=>{var f;if(l){const m=G9(h)?h(t):h;m!==t&&((f=a.current)==null||f.call(a,m))}else i(h)},[l,t,i,a]);return[c,d]}function q9({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return W9(()=>{i.current=e},[e]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function G9(t){return typeof t=="function"}var K9=g.createContext(void 0);function tf(t){const e=g.useContext(K9);return t||e||"ltr"}var Cm="rovingFocusGroup.onEntryFocus",Q9={bubbles:!1,cancelable:!0},Dc="RovingFocusGroup",[gg,hj,Y9]=dj(Dc),[X9,nf]=mi(Dc,[Y9]),[J9,Z9]=X9(Dc),fj=g.forwardRef((t,e)=>o.jsx(gg.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(gg.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(e8,{...t,ref:e})})}));fj.displayName=Dc;var e8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=g.useRef(null),_=Je(e,m),C=tf(i),[v,x]=ma({prop:a,defaultProp:l??null,onChange:c,caller:Dc}),[N,b]=g.useState(!1),S=Zr(d),D=hj(n),L=g.useRef(!1),[R,T]=g.useState(0);return g.useEffect(()=>{const y=m.current;if(y)return y.addEventListener(Cm,S),()=>y.removeEventListener(Cm,S)},[S]),o.jsx(J9,{scope:n,orientation:r,dir:C,loop:s,currentTabStopId:v,onItemFocus:g.useCallback(y=>x(y),[x]),onItemShiftTab:g.useCallback(()=>b(!0),[]),onFocusableItemAdd:g.useCallback(()=>T(y=>y+1),[]),onFocusableItemRemove:g.useCallback(()=>T(y=>y-1),[]),children:o.jsx(Re.div,{tabIndex:N||R===0?-1:0,"data-orientation":r,...f,ref:_,style:{outline:"none",...t.style},onMouseDown:Ae(t.onMouseDown,()=>{L.current=!0}),onFocus:Ae(t.onFocus,y=>{const I=!L.current;if(y.target===y.currentTarget&&I&&!N){const w=new CustomEvent(Cm,Q9);if(y.currentTarget.dispatchEvent(w),!w.defaultPrevented){const k=D().filter(B=>B.focusable),j=k.find(B=>B.active),A=k.find(B=>B.id===v),q=[j,A,...k].filter(Boolean).map(B=>B.ref.current);gj(q,h)}}L.current=!1}),onBlur:Ae(t.onBlur,()=>b(!1))})})}),mj="RovingFocusGroupItem",pj=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,c=Pc(),d=i||c,h=Z9(mj,n),f=h.currentTabStopId===d,m=hj(n),{onFocusableItemAdd:_,onFocusableItemRemove:C,currentTabStopId:v}=h;return g.useEffect(()=>{if(r)return _(),()=>C()},[r,_,C]),o.jsx(gg.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:o.jsx(Re.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Ae(t.onMouseDown,x=>{r?h.onItemFocus(d):x.preventDefault()}),onFocus:Ae(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Ae(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){h.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const N=r8(x,h.orientation,h.dir);if(N!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let S=m().filter(D=>D.focusable).map(D=>D.ref.current);if(N==="last")S.reverse();else if(N==="prev"||N==="next"){N==="prev"&&S.reverse();const D=S.indexOf(x.currentTarget);S=h.loop?s8(S,D+1):S.slice(D+1)}setTimeout(()=>gj(S))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:v!=null}):a})})});pj.displayName=mj;var t8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function n8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function r8(t,e,n){const r=n8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return t8[r]}function gj(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function s8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yj=fj,xj=pj;function i8(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Hx=t=>{const{present:e,children:n}=t,r=o8(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=Je(r.ref,a8(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};Hx.displayName="Presence";function o8(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=i8(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=wu(r.current);i.current=l==="mounted"?d:"none"},[l]),Et(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,_=wu(d);t?c("MOUNT"):_==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==_?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Et(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=_=>{const v=wu(r.current).includes(CSS.escape(_.animationName));if(_.target===e&&v&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=_=>{_.target===e&&(i.current=wu(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function wu(t){return(t==null?void 0:t.animationName)||"none"}function a8(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rf="Tabs",[l8]=mi(rf,[nf]),vj=nf(),[c8,Wx]=l8(rf),wj=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=tf(l),[f,m]=ma({prop:r,onChange:s,defaultProp:i??"",caller:rf});return o.jsx(c8,{scope:n,baseId:Pc(),value:f,onValueChange:m,orientation:a,dir:h,activationMode:c,children:o.jsx(Re.div,{dir:h,"data-orientation":a,...d,ref:e})})});wj.displayName=rf;var _j="TabsList",bj=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Wx(_j,n),a=vj(n);return o.jsx(yj,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Re.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});bj.displayName=_j;var Ej="TabsTrigger",Nj=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Wx(Ej,n),l=vj(n),c=Cj(a.baseId,r),d=jj(a.baseId,r),h=r===a.value;return o.jsx(xj,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(Re.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Ae(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:Ae(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:Ae(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});Nj.displayName=Ej;var Tj="TabsContent",Sj=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Wx(Tj,n),c=Cj(l.baseId,r),d=jj(l.baseId,r),h=r===l.value,f=g.useRef(h);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(Hx,{present:s||h,children:({present:m})=>o.jsx(Re.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});Sj.displayName=Tj;function Cj(t,e){return`${t}-trigger-${e}`}function jj(t,e){return`${t}-content-${e}`}var u8=wj,Ij=bj,Aj=Nj,kj=Sj;const d8=u8,Rj=g.forwardRef(({className:t,...e},n)=>o.jsx(Ij,{ref:n,className:Le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Rj.displayName=Ij.displayName;const Ci=g.forwardRef(({className:t,...e},n)=>o.jsx(Aj,{ref:n,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Ci.displayName=Aj.displayName;const Pj=g.forwardRef(({className:t,...e},n)=>o.jsx(kj,{ref:n,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Pj.displayName=kj.displayName;const h8=({onBack:t})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState(!0),[d,h]=g.useState(""),[f,m]=g.useState("all"),[_,C]=g.useState(null);g.useEffect(()=>{v()},[]),g.useEffect(()=>{x()},[d,e,f]);const v=async()=>{try{const I=(await In(xt(ge,"users"))).docs.map(k=>({id:k.id,...k.data()}));console.log(" Fetched users:",I),n(I);const w=I.filter(k=>k.requestedHostRole===!0);a(w)}catch(y){console.error("Error fetching users:",y),C({type:"error",text:"Failed to load users"})}finally{c(!1)}},x=()=>{let y=[...e];f==="admins"?y=y.filter(I=>I.role==="admin"):f==="moderators"?y=y.filter(I=>I.role==="moderator"):f==="students"?y=y.filter(I=>I.role==="student"):f==="pending"?y=y.filter(I=>I.requestedHostRole===!0):f==="active"?y=y.filter(I=>I.isActive!==!1):f==="suspended"&&(y=y.filter(I=>I.isActive===!1)),d&&(y=y.filter(I=>{var w,k,j,A,F;return((w=I.displayName)==null?void 0:w.toLowerCase().includes(d.toLowerCase()))||((k=I.email)==null?void 0:k.toLowerCase().includes(d.toLowerCase()))||((j=I.role)==null?void 0:j.toLowerCase().includes(d.toLowerCase()))||((A=I.firstName)==null?void 0:A.toLowerCase().includes(d.toLowerCase()))||((F=I.lastName)==null?void 0:F.toLowerCase().includes(d.toLowerCase()))})),s(y)},N=async(y,I)=>{try{console.log(" Attempting to update user role:",{userId:y,newRole:I});const w={role:I};(I==="admin"||I==="moderator")&&(w.requestedHostRole=!1,w.hostRequestReason=null),await dn(Ve(ge,"users",y),w),n(e.map(k=>k.id===y?{...k,...w}:k)),console.log(" User role updated successfully"),C({type:"success",text:`User role updated to ${I}`}),setTimeout(()=>C(null),3e3)}catch(w){console.error(" Error updating user role:",w),console.error("Error code:",w.code),console.error("Error message:",w.message),C({type:"error",text:`Failed to update user role: ${w.message}`})}},b=async(y,I)=>{try{console.log(" Handling host request:",{userId:y,approved:I});const w={requestedHostRole:!1,hostRequestReason:null};I&&(w.role="moderator"),await dn(Ve(ge,"users",y),w),n(e.map(j=>j.id===y?{...j,...w}:j)),C({type:"success",text:`Host request ${I?"approved":"rejected"}`}),setTimeout(()=>C(null),3e3)}catch(w){console.error("Error handling host request:",w),C({type:"error",text:`Failed to process host request: ${w.message}`})}},S=async(y,I)=>{try{console.log(" Toggling user status:",{userId:y,currentStatus:I});const w=!I;await dn(Ve(ge,"users",y),{isActive:w}),n(e.map(j=>j.id===y?{...j,isActive:w}:j));const k=w?"activated":"suspended";console.log(" User status updated successfully:",k),C({type:"success",text:`User ${k}`}),setTimeout(()=>C(null),3e3)}catch(w){console.error(" Error updating user status:",w),console.error("Error code:",w.code),console.error("Error message:",w.message),C({type:"error",text:`Failed to update user status: ${w.message}`})}},D=y=>{switch(y){case"admin":return"destructive";case"moderator":return"default";case"student":return"secondary";default:return"outline"}},L=y=>{switch(y){case"admin":return o.jsx(ua,{className:"w-3 h-3"});case"moderator":return o.jsx(lt,{className:"w-3 h-3"});case"student":return o.jsx(Ux,{className:"w-3 h-3"});default:return o.jsx(An,{className:"w-3 h-3"})}},R=y=>y.requestedHostRole?"Pending Host":y.isActive===!1?"Suspended":"Active",T=y=>y.requestedHostRole?"default":y.isActive===!1?"destructive":"default";return l?o.jsx(re,{children:o.jsx(se,{className:"pt-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading users..."})]})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(J,{variant:"ghost",onClick:t,className:"mb-2 -ml-3",children:" Back to Admin"}),o.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and host requests"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]})]}),_&&o.jsxs(kc,{className:_.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200",children:[_.type==="success"?o.jsx(er,{className:"w-4 h-4 text-green-600"}):o.jsx(Ji,{className:"w-4 h-4 text-red-600"}),o.jsx(Rc,{className:_.type==="success"?"text-green-600":"text-red-600",children:_.text})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsx(re,{children:o.jsxs(se,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})}),o.jsx(re,{children:o.jsxs(se,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(y=>y.role==="admin").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Admins"})]})}),o.jsx(re,{children:o.jsxs(se,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(y=>y.role==="moderator").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Moderators"})]})}),o.jsx(re,{children:o.jsxs(se,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(y=>y.role==="student").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Students"})]})}),o.jsx(re,{children:o.jsxs(se,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending Hosts"})]})}),o.jsx(re,{children:o.jsxs(se,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(y=>y.isActive===!1).length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Suspended"})]})})]}),o.jsxs(d8,{value:f,onValueChange:m,className:"w-full",children:[o.jsxs(Rj,{className:"grid w-full grid-cols-6",children:[o.jsx(Ci,{value:"all",className:"text-xs",children:"All Users"}),o.jsx(Ci,{value:"admins",className:"text-xs",children:"Admins"}),o.jsx(Ci,{value:"moderators",className:"text-xs",children:"Moderators"}),o.jsx(Ci,{value:"students",className:"text-xs",children:"Students"}),o.jsxs(Ci,{value:"pending",className:"text-xs",children:["Pending ",i.length>0&&`(${i.length})`]}),o.jsx(Ci,{value:"suspended",className:"text-xs",children:"Suspended"})]}),o.jsx(Pj,{value:f,className:"mt-6",children:o.jsxs(re,{children:[o.jsx(Pe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs(De,{children:[f==="all"&&"All Users",f==="admins"&&"Administrators",f==="moderators"&&"Moderators",f==="students"&&"Students",f==="pending"&&"Pending Host Requests",f==="suspended"&&"Suspended Users"]}),o.jsxs(Wt,{children:[r.length," user",r.length!==1?"s":""," found"]})]}),o.jsxs("div",{className:"relative w-64",children:[o.jsx(ha,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(he,{placeholder:"Search users...",value:d,onChange:y=>h(y.target.value),className:"pl-10"})]})]})}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[r.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:L(y.role)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("p",{className:"font-medium truncate",children:y.displayName||"No Name"}),y.role==="admin"&&o.jsx(ua,{className:"w-4 h-4 text-yellow-600"})]}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:y.email}),y.institution&&o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.institution}),y.requestedHostRole&&y.hostRequestReason&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[o.jsx("strong",{children:"Host Request:"})," ",y.hostRequestReason]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs(ve,{variant:D(y.role),className:"flex items-center gap-1",children:[L(y.role),y.role]}),o.jsx(ve,{variant:T(y),children:R(y)})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs("select",{value:y.role,onChange:I=>N(y.id,I.target.value),className:"p-2 border rounded text-sm bg-background",children:[o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"moderator",children:"Moderator"}),o.jsx("option",{value:"admin",children:"Admin"})]}),y.requestedHostRole&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx(J,{variant:"outline",size:"sm",onClick:()=>b(y.id,!0),className:"h-9 w-9 p-0 text-green-600 border-green-200",children:o.jsx(er,{className:"w-4 h-4"})}),o.jsx(J,{variant:"outline",size:"sm",onClick:()=>b(y.id,!1),className:"h-9 w-9 p-0 text-red-600 border-red-200",children:o.jsx(Ji,{className:"w-4 h-4"})})]}),!y.requestedHostRole&&o.jsx(J,{variant:"outline",size:"sm",onClick:()=>S(y.id,y.isActive??!0),className:`flex items-center gap-1 ${y.isActive===!1?"text-green-600 border-green-200 hover:bg-green-50":"text-red-600 border-red-200 hover:bg-red-50"}`,children:y.isActive===!1?o.jsxs(o.Fragment,{children:[o.jsx(UU,{className:"w-3 h-3"}),"Activate"]}):o.jsxs(o.Fragment,{children:[o.jsx(FU,{className:"w-3 h-3"}),"Suspend"]})})]})]},y.id)),r.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(jt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No users found matching your criteria."})]})]})})]})})]})]})},Ia=g.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Ia.displayName="Textarea";var f8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],m8=f8.reduce((t,e)=>{const n=Vx(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),p8="Label",Dj=g.forwardRef((t,e)=>o.jsx(m8.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Dj.displayName=p8;var Lj=Dj;const g8=ef("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),K=g.forwardRef(({className:t,...e},n)=>o.jsx(Lj,{ref:n,className:Le(g8(),t),...e}));K.displayName=Lj.displayName;function Eb(t,[e,n]){return Math.min(n,Math.max(e,t))}function y8(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var x8="DismissableLayer",yg="dismissableLayer.update",v8="dismissableLayer.pointerDownOutside",w8="dismissableLayer.focusOutside",Nb,Oj=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mj=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(Oj),[h,f]=g.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,_]=g.useState({}),C=Je(e,T=>f(T)),v=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),N=v.indexOf(x),b=h?v.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,D=b>=N,L=E8(T=>{const y=T.target,I=[...d.branches].some(w=>w.contains(y));!D||I||(s==null||s(T),a==null||a(T),T.defaultPrevented||l==null||l())},m),R=N8(T=>{const y=T.target;[...d.branches].some(w=>w.contains(y))||(i==null||i(T),a==null||a(T),T.defaultPrevented||l==null||l())},m);return y8(T=>{b===d.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Nb=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Tb(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Nb)}},[h,m,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Tb())},[h,d]),g.useEffect(()=>{const T=()=>_({});return document.addEventListener(yg,T),()=>document.removeEventListener(yg,T)},[]),o.jsx(Re.div,{...c,ref:C,style:{pointerEvents:S?D?"auto":"none":void 0,...t.style},onFocusCapture:Ae(t.onFocusCapture,R.onFocusCapture),onBlurCapture:Ae(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Ae(t.onPointerDownCapture,L.onPointerDownCapture)})});Mj.displayName=x8;var _8="DismissableLayerBranch",b8=g.forwardRef((t,e)=>{const n=g.useContext(Oj),r=g.useRef(null),s=Je(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Re.div,{...t,ref:s})});b8.displayName=_8;function E8(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){Vj(v8,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function N8(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&Vj(w8,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Tb(){const t=new CustomEvent(yg);document.dispatchEvent(t)}function Vj(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?H9(s,i):s.dispatchEvent(i)}var jm=0;function T8(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Sb()),document.body.insertAdjacentElement("beforeend",t[1]??Sb()),jm++,()=>{jm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jm--}},[])}function Sb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Im="focusScope.autoFocusOnMount",Am="focusScope.autoFocusOnUnmount",Cb={bubbles:!1,cancelable:!0},S8="FocusScope",Fj=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=Zr(s),h=Zr(i),f=g.useRef(null),m=Je(e,v=>c(v)),_=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let v=function(S){if(_.paused||!l)return;const D=S.target;l.contains(D)?f.current=D:ys(f.current,{select:!0})},x=function(S){if(_.paused||!l)return;const D=S.relatedTarget;D!==null&&(l.contains(D)||ys(f.current,{select:!0}))},N=function(S){if(document.activeElement===document.body)for(const L of S)L.removedNodes.length>0&&ys(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(N);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,_.paused]),g.useEffect(()=>{if(l){Ib.add(_);const v=document.activeElement;if(!l.contains(v)){const N=new CustomEvent(Im,Cb);l.addEventListener(Im,d),l.dispatchEvent(N),N.defaultPrevented||(C8(R8(Uj(l)),{select:!0}),document.activeElement===v&&ys(l))}return()=>{l.removeEventListener(Im,d),setTimeout(()=>{const N=new CustomEvent(Am,Cb);l.addEventListener(Am,h),l.dispatchEvent(N),N.defaultPrevented||ys(v??document.body,{select:!0}),l.removeEventListener(Am,h),Ib.remove(_)},0)}}},[l,d,h,_]);const C=g.useCallback(v=>{if(!n&&!r||_.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,N=document.activeElement;if(x&&N){const b=v.currentTarget,[S,D]=j8(b);S&&D?!v.shiftKey&&N===D?(v.preventDefault(),n&&ys(S,{select:!0})):v.shiftKey&&N===S&&(v.preventDefault(),n&&ys(D,{select:!0})):N===b&&v.preventDefault()}},[n,r,_.paused]);return o.jsx(Re.div,{tabIndex:-1,...a,ref:m,onKeyDown:C})});Fj.displayName=S8;function C8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ys(r,{select:e}),document.activeElement!==n)return}function j8(t){const e=Uj(t),n=jb(e,t),r=jb(e.reverse(),t);return[n,r]}function Uj(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function jb(t,e){for(const n of t)if(!I8(n,{upTo:e}))return n}function I8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function A8(t){return t instanceof HTMLInputElement&&"select"in t}function ys(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&A8(t)&&e&&t.select()}}var Ib=k8();function k8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Ab(t,e),t.unshift(e)},remove(e){var n;t=Ab(t,e),(n=t[0])==null||n.resume()}}}function Ab(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function R8(t){return t.filter(e=>e.tagName!=="A")}const P8=["top","right","bottom","left"],ni=Math.min,bn=Math.max,Jd=Math.round,_u=Math.floor,Sr=t=>({x:t,y:t}),D8={left:"right",right:"left",bottom:"top",top:"bottom"},L8={start:"end",end:"start"};function xg(t,e,n){return bn(t,ni(e,n))}function es(t,e){return typeof t=="function"?t(e):t}function ts(t){return t.split("-")[0]}function Aa(t){return t.split("-")[1]}function qx(t){return t==="x"?"y":"x"}function Gx(t){return t==="y"?"height":"width"}const O8=new Set(["top","bottom"]);function yr(t){return O8.has(ts(t))?"y":"x"}function Kx(t){return qx(yr(t))}function M8(t,e,n){n===void 0&&(n=!1);const r=Aa(t),s=Kx(t),i=Gx(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Zd(a)),[a,Zd(a)]}function V8(t){const e=Zd(t);return[vg(t),e,vg(e)]}function vg(t){return t.replace(/start|end/g,e=>L8[e])}const kb=["left","right"],Rb=["right","left"],F8=["top","bottom"],U8=["bottom","top"];function B8(t,e,n){switch(t){case"top":case"bottom":return n?e?Rb:kb:e?kb:Rb;case"left":case"right":return e?F8:U8;default:return[]}}function $8(t,e,n,r){const s=Aa(t);let i=B8(ts(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(vg)))),i}function Zd(t){return t.replace(/left|right|bottom|top/g,e=>D8[e])}function z8(t){return{top:0,right:0,bottom:0,left:0,...t}}function Bj(t){return typeof t!="number"?z8(t):{top:t,right:t,bottom:t,left:t}}function eh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Pb(t,e,n){let{reference:r,floating:s}=t;const i=yr(e),a=Kx(e),l=Gx(a),c=ts(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let _;switch(c){case"top":_={x:h,y:r.y-s.height};break;case"bottom":_={x:h,y:r.y+r.height};break;case"right":_={x:r.x+r.width,y:f};break;case"left":_={x:r.x-s.width,y:f};break;default:_={x:r.x,y:r.y}}switch(Aa(e)){case"start":_[a]-=m*(n&&d?-1:1);break;case"end":_[a]+=m*(n&&d?-1:1);break}return _}const H8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=Pb(d,r,c),m=r,_={},C=0;for(let v=0;v<l.length;v++){const{name:x,fn:N}=l[v],{x:b,y:S,data:D,reset:L}=await N({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:_,rects:d,platform:a,elements:{reference:t,floating:e}});h=b??h,f=S??f,_={..._,[x]:{..._[x],...D}},L&&C<=50&&(C++,typeof L=="object"&&(L.placement&&(m=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=Pb(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:_}};async function dc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:_=0}=es(e,t),C=Bj(_),x=l[m?f==="floating"?"reference":"floating":f],N=eh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),b=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),D=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},L=eh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:S,strategy:c}):b);return{top:(N.top-L.top+C.top)/D.y,bottom:(L.bottom-N.bottom+C.bottom)/D.y,left:(N.left-L.left+C.left)/D.x,right:(L.right-N.right+C.right)/D.x}}const W8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=es(t,e)||{};if(d==null)return{};const f=Bj(h),m={x:n,y:r},_=Kx(s),C=Gx(_),v=await a.getDimensions(d),x=_==="y",N=x?"top":"left",b=x?"bottom":"right",S=x?"clientHeight":"clientWidth",D=i.reference[C]+i.reference[_]-m[_]-i.floating[C],L=m[_]-i.reference[_],R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let T=R?R[S]:0;(!T||!await(a.isElement==null?void 0:a.isElement(R)))&&(T=l.floating[S]||i.floating[C]);const y=D/2-L/2,I=T/2-v[C]/2-1,w=ni(f[N],I),k=ni(f[b],I),j=w,A=T-v[C]-k,F=T/2-v[C]/2+y,q=xg(j,F,A),B=!c.arrow&&Aa(s)!=null&&F!==q&&i.reference[C]/2-(F<j?w:k)-v[C]/2<0,$=B?F<j?F-j:F-A:0;return{[_]:m[_]+$,data:{[_]:q,centerOffset:F-q-$,...B&&{alignmentOffset:$}},reset:B}}}),q8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:_="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:v=!0,...x}=es(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const N=ts(s),b=yr(l),S=ts(l)===l,D=await(c.isRTL==null?void 0:c.isRTL(d.floating)),L=m||(S||!v?[Zd(l)]:V8(l)),R=C!=="none";!m&&R&&L.push(...$8(l,v,C,D));const T=[l,...L],y=await dc(e,x),I=[];let w=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(y[N]),f){const F=M8(s,a,D);I.push(y[F[0]],y[F[1]])}if(w=[...w,{placement:s,overflows:I}],!I.every(F=>F<=0)){var k,j;const F=(((k=i.flip)==null?void 0:k.index)||0)+1,q=T[F];if(q&&(!(f==="alignment"?b!==yr(q):!1)||w.every(O=>yr(O.placement)===b?O.overflows[0]>0:!0)))return{data:{index:F,overflows:w},reset:{placement:q}};let B=(j=w.filter($=>$.overflows[0]<=0).sort(($,O)=>$.overflows[1]-O.overflows[1])[0])==null?void 0:j.placement;if(!B)switch(_){case"bestFit":{var A;const $=(A=w.filter(O=>{if(R){const W=yr(O.placement);return W===b||W==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(W=>W>0).reduce((W,Y)=>W+Y,0)]).sort((O,W)=>O[1]-W[1])[0])==null?void 0:A[0];$&&(B=$);break}case"initialPlacement":B=l;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function Db(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Lb(t){return P8.some(e=>t[e]>=0)}const G8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=es(t,e);switch(r){case"referenceHidden":{const i=await dc(e,{...s,elementContext:"reference"}),a=Db(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Lb(a)}}}case"escaped":{const i=await dc(e,{...s,altBoundary:!0}),a=Db(i,n.floating);return{data:{escapedOffsets:a,escaped:Lb(a)}}}default:return{}}}}},$j=new Set(["left","top"]);async function K8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ts(n),l=Aa(n),c=yr(n)==="y",d=$j.has(a)?-1:1,h=i&&c?-1:1,f=es(e,t);let{mainAxis:m,crossAxis:_,alignmentAxis:C}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof C=="number"&&(_=l==="end"?C*-1:C),c?{x:_*h,y:m*d}:{x:m*d,y:_*h}}const Q8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await K8(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},Y8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:N,y:b}=x;return{x:N,y:b}}},...c}=es(t,e),d={x:n,y:r},h=await dc(e,c),f=yr(ts(s)),m=qx(f);let _=d[m],C=d[f];if(i){const x=m==="y"?"top":"left",N=m==="y"?"bottom":"right",b=_+h[x],S=_-h[N];_=xg(b,_,S)}if(a){const x=f==="y"?"top":"left",N=f==="y"?"bottom":"right",b=C+h[x],S=C-h[N];C=xg(b,C,S)}const v=l.fn({...e,[m]:_,[f]:C});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:a}}}}}},X8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=es(t,e),h={x:n,y:r},f=yr(s),m=qx(f);let _=h[m],C=h[f];const v=es(l,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=m==="y"?"height":"width",D=i.reference[m]-i.floating[S]+x.mainAxis,L=i.reference[m]+i.reference[S]-x.mainAxis;_<D?_=D:_>L&&(_=L)}if(d){var N,b;const S=m==="y"?"width":"height",D=$j.has(ts(s)),L=i.reference[f]-i.floating[S]+(D&&((N=a.offset)==null?void 0:N[f])||0)+(D?0:x.crossAxis),R=i.reference[f]+i.reference[S]+(D?0:((b=a.offset)==null?void 0:b[f])||0)-(D?x.crossAxis:0);C<L?C=L:C>R&&(C=R)}return{[m]:_,[f]:C}}}},J8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=es(t,e),h=await dc(e,d),f=ts(s),m=Aa(s),_=yr(s)==="y",{width:C,height:v}=i.floating;let x,N;f==="top"||f==="bottom"?(x=f,N=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(N=f,x=m==="end"?"top":"bottom");const b=v-h.top-h.bottom,S=C-h.left-h.right,D=ni(v-h[x],b),L=ni(C-h[N],S),R=!e.middlewareData.shift;let T=D,y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(y=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=b),R&&!m){const w=bn(h.left,0),k=bn(h.right,0),j=bn(h.top,0),A=bn(h.bottom,0);_?y=C-2*(w!==0||k!==0?w+k:bn(h.left,h.right)):T=v-2*(j!==0||A!==0?j+A:bn(h.top,h.bottom))}await c({...e,availableWidth:y,availableHeight:T});const I=await a.getDimensions(l.floating);return C!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function sf(){return typeof window<"u"}function ka(t){return zj(t)?(t.nodeName||"").toLowerCase():"#document"}function kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ar(t){var e;return(e=(zj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function zj(t){return sf()?t instanceof Node||t instanceof kn(t).Node:!1}function ar(t){return sf()?t instanceof Element||t instanceof kn(t).Element:!1}function Ir(t){return sf()?t instanceof HTMLElement||t instanceof kn(t).HTMLElement:!1}function Ob(t){return!sf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kn(t).ShadowRoot}const Z8=new Set(["inline","contents"]);function Lc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=lr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Z8.has(s)}const eB=new Set(["table","td","th"]);function tB(t){return eB.has(ka(t))}const nB=[":popover-open",":modal"];function of(t){return nB.some(e=>{try{return t.matches(e)}catch{return!1}})}const rB=["transform","translate","scale","rotate","perspective"],sB=["transform","translate","scale","rotate","perspective","filter"],iB=["paint","layout","strict","content"];function Qx(t){const e=Yx(),n=ar(t)?lr(t):t;return rB.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||sB.some(r=>(n.willChange||"").includes(r))||iB.some(r=>(n.contain||"").includes(r))}function oB(t){let e=ri(t);for(;Ir(e)&&!pa(e);){if(Qx(e))return e;if(of(e))return null;e=ri(e)}return null}function Yx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aB=new Set(["html","body","#document"]);function pa(t){return aB.has(ka(t))}function lr(t){return kn(t).getComputedStyle(t)}function af(t){return ar(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ri(t){if(ka(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ob(t)&&t.host||Ar(t);return Ob(e)?e.host:e}function Hj(t){const e=ri(t);return pa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ir(e)&&Lc(e)?e:Hj(e)}function hc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Hj(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=kn(s);if(i){const l=wg(a);return e.concat(a,a.visualViewport||[],Lc(s)?s:[],l&&n?hc(l):[])}return e.concat(s,hc(s,[],n))}function wg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Wj(t){const e=lr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ir(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Jd(n)!==i||Jd(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Xx(t){return ar(t)?t:t.contextElement}function Go(t){const e=Xx(t);if(!Ir(e))return Sr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=Wj(e);let a=(i?Jd(n.width):n.width)/r,l=(i?Jd(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const lB=Sr(0);function qj(t){const e=kn(t);return!Yx()||!e.visualViewport?lB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==kn(t)?!1:e}function eo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Xx(t);let a=Sr(1);e&&(r?ar(r)&&(a=Go(r)):a=Go(t));const l=cB(i,n,r)?qj(i):Sr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const m=kn(i),_=r&&ar(r)?kn(r):r;let C=m,v=wg(C);for(;v&&r&&_!==C;){const x=Go(v),N=v.getBoundingClientRect(),b=lr(v),S=N.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,D=N.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,d*=x.y,h*=x.x,f*=x.y,c+=S,d+=D,C=kn(v),v=wg(C)}}return eh({width:h,height:f,x:c,y:d})}function lf(t,e){const n=af(t).scrollLeft;return e?e.left+n:eo(Ar(t)).left+n}function Gj(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-lf(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function uB(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Ar(r),l=e?of(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Sr(1);const h=Sr(0),f=Ir(r);if((f||!f&&!i)&&((ka(r)!=="body"||Lc(a))&&(c=af(r)),Ir(r))){const _=eo(r);d=Go(r),h.x=_.x+r.clientLeft,h.y=_.y+r.clientTop}const m=a&&!f&&!i?Gj(a,c):Sr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function dB(t){return Array.from(t.getClientRects())}function hB(t){const e=Ar(t),n=af(t),r=t.ownerDocument.body,s=bn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=bn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+lf(t);const l=-n.scrollTop;return lr(r).direction==="rtl"&&(a+=bn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}const Mb=25;function fB(t,e){const n=kn(t),r=Ar(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=Yx();(!h||h&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=lf(r);if(d<=0){const h=r.ownerDocument,f=h.body,m=getComputedStyle(f),_=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,C=Math.abs(r.clientWidth-f.clientWidth-_);C<=Mb&&(i-=C)}else d<=Mb&&(i+=d);return{width:i,height:a,x:l,y:c}}const mB=new Set(["absolute","fixed"]);function pB(t,e){const n=eo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ir(t)?Go(t):Sr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function Vb(t,e,n){let r;if(e==="viewport")r=fB(t,n);else if(e==="document")r=hB(Ar(t));else if(ar(e))r=pB(e,n);else{const s=qj(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return eh(r)}function Kj(t,e){const n=ri(t);return n===e||!ar(n)||pa(n)?!1:lr(n).position==="fixed"||Kj(n,e)}function gB(t,e){const n=e.get(t);if(n)return n;let r=hc(t,[],!1).filter(l=>ar(l)&&ka(l)!=="body"),s=null;const i=lr(t).position==="fixed";let a=i?ri(t):t;for(;ar(a)&&!pa(a);){const l=lr(a),c=Qx(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&mB.has(s.position)||Lc(a)&&!c&&Kj(t,a))?r=r.filter(h=>h!==a):s=l,a=ri(a)}return e.set(t,r),r}function yB(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?of(e)?[]:gB(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=Vb(e,h,s);return d.top=bn(f.top,d.top),d.right=ni(f.right,d.right),d.bottom=ni(f.bottom,d.bottom),d.left=bn(f.left,d.left),d},Vb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function xB(t){const{width:e,height:n}=Wj(t);return{width:e,height:n}}function vB(t,e,n){const r=Ir(e),s=Ar(e),i=n==="fixed",a=eo(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Sr(0);function d(){c.x=lf(s)}if(r||!r&&!i)if((ka(e)!=="body"||Lc(s))&&(l=af(e)),r){const _=eo(e,!0,i,e);c.x=_.x+e.clientLeft,c.y=_.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?Gj(s,l):Sr(0),f=a.left+l.scrollLeft-c.x-h.x,m=a.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:a.width,height:a.height}}function km(t){return lr(t).position==="static"}function Fb(t,e){if(!Ir(t)||lr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ar(t)===n&&(n=n.ownerDocument.body),n}function Qj(t,e){const n=kn(t);if(of(t))return n;if(!Ir(t)){let s=ri(t);for(;s&&!pa(s);){if(ar(s)&&!km(s))return s;s=ri(s)}return n}let r=Fb(t,e);for(;r&&tB(r)&&km(r);)r=Fb(r,e);return r&&pa(r)&&km(r)&&!Qx(r)?n:r||oB(t)||n}const wB=async function(t){const e=this.getOffsetParent||Qj,n=this.getDimensions,r=await n(t.floating);return{reference:vB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _B(t){return lr(t).direction==="rtl"}const bB={convertOffsetParentRelativeRectToViewportRelativeRect:uB,getDocumentElement:Ar,getClippingRect:yB,getOffsetParent:Qj,getElementRects:wB,getClientRects:dB,getDimensions:xB,getScale:Go,isElement:ar,isRTL:_B};function Yj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function EB(t,e){let n=null,r;const s=Ar(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:_}=d;if(l||e(),!m||!_)return;const C=_u(f),v=_u(s.clientWidth-(h+m)),x=_u(s.clientHeight-(f+_)),N=_u(h),S={rootMargin:-C+"px "+-v+"px "+-x+"px "+-N+"px",threshold:bn(0,ni(1,c))||1};let D=!0;function L(R){const T=R[0].intersectionRatio;if(T!==c){if(!D)return a();T?a(!1,T):r=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!Yj(d,t.getBoundingClientRect())&&a(),D=!1}try{n=new IntersectionObserver(L,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,S)}n.observe(t)}return a(!0),i}function NB(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Xx(t),h=s||i?[...d?hc(d):[],...hc(e)]:[];h.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),i&&N.addEventListener("resize",n)});const f=d&&l?EB(d,n):null;let m=-1,_=null;a&&(_=new ResizeObserver(N=>{let[b]=N;b&&b.target===d&&_&&(_.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=_)==null||S.observe(e)})),n()}),d&&!c&&_.observe(d),_.observe(e));let C,v=c?eo(t):null;c&&x();function x(){const N=eo(t);v&&!Yj(v,N)&&n(),v=N,C=requestAnimationFrame(x)}return n(),()=>{var N;h.forEach(b=>{s&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),f==null||f(),(N=_)==null||N.disconnect(),_=null,c&&cancelAnimationFrame(C)}}const TB=Q8,SB=Y8,CB=q8,jB=J8,IB=G8,Ub=W8,AB=X8,kB=(t,e,n)=>{const r=new Map,s={platform:bB,...n},i={...s.platform,_c:r};return H8(t,e,{...s,platform:i})};var RB=typeof document<"u",PB=function(){},Ku=RB?g.useLayoutEffect:PB;function th(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!th(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!th(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Xj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Bb(t,e){const n=Xj(t);return Math.round(e*n)/n}function Rm(t){const e=g.useRef(t);return Ku(()=>{e.current=t}),e}function DB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,_]=g.useState(r);th(m,r)||_(r);const[C,v]=g.useState(null),[x,N]=g.useState(null),b=g.useCallback(O=>{O!==R.current&&(R.current=O,v(O))},[]),S=g.useCallback(O=>{O!==T.current&&(T.current=O,N(O))},[]),D=i||C,L=a||x,R=g.useRef(null),T=g.useRef(null),y=g.useRef(h),I=c!=null,w=Rm(c),k=Rm(s),j=Rm(d),A=g.useCallback(()=>{if(!R.current||!T.current)return;const O={placement:e,strategy:n,middleware:m};k.current&&(O.platform=k.current),kB(R.current,T.current,O).then(W=>{const Y={...W,isPositioned:j.current!==!1};F.current&&!th(y.current,Y)&&(y.current=Y,va.flushSync(()=>{f(Y)}))})},[m,e,n,k,j]);Ku(()=>{d===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[d]);const F=g.useRef(!1);Ku(()=>(F.current=!0,()=>{F.current=!1}),[]),Ku(()=>{if(D&&(R.current=D),L&&(T.current=L),D&&L){if(w.current)return w.current(D,L,A);A()}},[D,L,A,w,I]);const q=g.useMemo(()=>({reference:R,floating:T,setReference:b,setFloating:S}),[b,S]),B=g.useMemo(()=>({reference:D,floating:L}),[D,L]),$=g.useMemo(()=>{const O={position:n,left:0,top:0};if(!B.floating)return O;const W=Bb(B.floating,h.x),Y=Bb(B.floating,h.y);return l?{...O,transform:"translate("+W+"px, "+Y+"px)",...Xj(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:Y}},[n,l,B.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:A,refs:q,elements:B,floatingStyles:$}),[h,A,q,B,$])}const LB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Ub({element:r.current,padding:s}).fn(n):{}:r?Ub({element:r,padding:s}).fn(n):{}}}},OB=(t,e)=>({...TB(t),options:[t,e]}),MB=(t,e)=>({...SB(t),options:[t,e]}),VB=(t,e)=>({...AB(t),options:[t,e]}),FB=(t,e)=>({...CB(t),options:[t,e]}),UB=(t,e)=>({...jB(t),options:[t,e]}),BB=(t,e)=>({...IB(t),options:[t,e]}),$B=(t,e)=>({...LB(t),options:[t,e]});var zB="Arrow",Jj=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(Re.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Jj.displayName=zB;var HB=Jj;function Jx(t){const[e,n]=g.useState(void 0);return Et(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Zx="Popper",[Zj,eI]=mi(Zx),[WB,tI]=Zj(Zx),nI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(WB,{scope:e,anchor:r,onAnchorChange:s,children:n})};nI.displayName=Zx;var rI="PopperAnchor",sI=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=tI(rI,n),a=g.useRef(null),l=Je(e,a),c=g.useRef(null);return g.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||a.current,d!==c.current&&i.onAnchorChange(c.current)}),r?null:o.jsx(Re.div,{...s,ref:l})});sI.displayName=rI;var ev="PopperContent",[qB,GB]=Zj(ev),iI=g.forwardRef((t,e)=>{var X,de,Me,Ce,Ee,je;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:_="optimized",onPlaced:C,...v}=t,x=tI(ev,n),[N,b]=g.useState(null),S=Je(e,It=>b(It)),[D,L]=g.useState(null),R=Jx(D),T=(R==null?void 0:R.width)??0,y=(R==null?void 0:R.height)??0,I=r+(i!=="center"?"-"+i:""),w=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},k=Array.isArray(d)?d:[d],j=k.length>0,A={padding:w,boundary:k.filter(QB),altBoundary:j},{refs:F,floatingStyles:q,placement:B,isPositioned:$,middlewareData:O}=DB({strategy:"fixed",placement:I,whileElementsMounted:(...It)=>NB(...It,{animationFrame:_==="always"}),elements:{reference:x.anchor},middleware:[OB({mainAxis:s+y,alignmentAxis:a}),c&&MB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?VB():void 0,...A}),c&&FB({...A}),UB({...A,apply:({elements:It,rects:xn,availableWidth:yi,availableHeight:kr})=>{const{width:Rr,height:Oc}=xn.reference,ut=It.floating.style;ut.setProperty("--radix-popper-available-width",`${yi}px`),ut.setProperty("--radix-popper-available-height",`${kr}px`),ut.setProperty("--radix-popper-anchor-width",`${Rr}px`),ut.setProperty("--radix-popper-anchor-height",`${Oc}px`)}}),D&&$B({element:D,padding:l}),YB({arrowWidth:T,arrowHeight:y}),m&&BB({strategy:"referenceHidden",...A})]}),[W,Y]=lI(B),M=Zr(C);Et(()=>{$&&(M==null||M())},[$,M]);const G=(X=O.arrow)==null?void 0:X.x,ce=(de=O.arrow)==null?void 0:de.y,pe=((Me=O.arrow)==null?void 0:Me.centerOffset)!==0,[Z,ne]=g.useState();return Et(()=>{N&&ne(window.getComputedStyle(N).zIndex)},[N]),o.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:$?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Z,"--radix-popper-transform-origin":[(Ce=O.transformOrigin)==null?void 0:Ce.x,(Ee=O.transformOrigin)==null?void 0:Ee.y].join(" "),...((je=O.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(qB,{scope:n,placedSide:W,onArrowChange:L,arrowX:G,arrowY:ce,shouldHideArrow:pe,children:o.jsx(Re.div,{"data-side":W,"data-align":Y,...v,ref:S,style:{...v.style,animation:$?void 0:"none"}})})})});iI.displayName=ev;var oI="PopperArrow",KB={top:"bottom",right:"left",bottom:"top",left:"right"},aI=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=GB(oI,r),a=KB[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(HB,{...s,ref:n,style:{...s.style,display:"block"}})})});aI.displayName=oI;function QB(t){return t!==null}var YB=t=>({name:"transformOrigin",options:t,fn(e){var x,N,b;const{placement:n,rects:r,middlewareData:s}=e,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=lI(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((N=s.arrow)==null?void 0:N.x)??0)+l/2,_=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let C="",v="";return d==="bottom"?(C=a?f:`${m}px`,v=`${-c}px`):d==="top"?(C=a?f:`${m}px`,v=`${r.floating.height+c}px`):d==="right"?(C=`${-c}px`,v=a?f:`${_}px`):d==="left"&&(C=`${r.floating.width+c}px`,v=a?f:`${_}px`),{data:{x:C,y:v}}}});function lI(t){const[e,n="center"]=t.split("-");return[e,n]}var XB=nI,JB=sI,ZB=iI,e$=aI,t$="Portal",cI=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);Et(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?bR.createPortal(o.jsx(Re.div,{...r,ref:e}),a):null});cI.displayName=t$;function n$(t){const e=r$(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(i$);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function r$(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=a$(s),l=o$(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ac(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var s$=Symbol("radix.slottable");function i$(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===s$}function o$(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function a$(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function tv(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var uI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),l$="VisuallyHidden",c$=g.forwardRef((t,e)=>o.jsx(Re.span,{...t,ref:e,style:{...uI,...t.style}}));c$.displayName=l$;var u$=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yo=new WeakMap,bu=new WeakMap,Eu={},Pm=0,dI=function(t){return t&&(t.host||dI(t.parentNode))},d$=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=dI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},h$=function(t,e,n,r){var s=d$(e,Array.isArray(t)?t:[t]);Eu[n]||(Eu[n]=new WeakMap);var i=Eu[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var _=m.getAttribute(r),C=_!==null&&_!=="false",v=(yo.get(m)||0)+1,x=(i.get(m)||0)+1;yo.set(m,v),i.set(m,x),a.push(m),v===1&&C&&bu.set(m,!0),x===1&&m.setAttribute(n,"true"),C||m.setAttribute(r,"true")}catch(N){console.error("aria-hidden: cannot operate on ",m,N)}})};return h(e),l.clear(),Pm++,function(){a.forEach(function(f){var m=yo.get(f)-1,_=i.get(f)-1;yo.set(f,m),i.set(f,_),m||(bu.has(f)||f.removeAttribute(r),bu.delete(f)),_||f.removeAttribute(n)}),Pm--,Pm||(yo=new WeakMap,yo=new WeakMap,bu=new WeakMap,Eu={})}},f$=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=u$(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),h$(r,s,n,"aria-hidden")):function(){return null}},pr=function(){return pr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pr.apply(this,arguments)};function hI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function m$(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Qu="right-scroll-bar-position",Yu="width-before-scroll-bar",p$="with-scroll-bars-hidden",g$="--removed-body-scroll-bar-size";function Dm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function y$(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var x$=typeof window<"u"?g.useLayoutEffect:g.useEffect,$b=new WeakMap;function v$(t,e){var n=y$(null,function(r){return t.forEach(function(s){return Dm(s,r)})});return x$(function(){var r=$b.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Dm(l,null)}),i.forEach(function(l){s.has(l)||Dm(l,a)})}$b.set(n,t)},[t]),n}function w$(t){return t}function _$(t,e){e===void 0&&(e=w$);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function b$(t){t===void 0&&(t={});var e=_$(null);return e.options=pr({async:!0,ssr:!1},t),e}var fI=function(t){var e=t.sideCar,n=hI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,pr({},n))};fI.isSideCarExport=!0;function E$(t,e){return t.useMedium(e),fI}var mI=b$(),Lm=function(){},cf=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Lm,onWheelCapture:Lm,onTouchMoveCapture:Lm}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,_=t.noRelative,C=t.noIsolation,v=t.inert,x=t.allowPinchZoom,N=t.as,b=N===void 0?"div":N,S=t.gapMode,D=hI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=m,R=v$([n,e]),T=pr(pr({},D),s);return g.createElement(g.Fragment,null,h&&g.createElement(L,{sideCar:mI,removeScrollBar:d,shards:f,noRelative:_,noIsolation:C,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:S}),a?g.cloneElement(g.Children.only(l),pr(pr({},T),{ref:R})):g.createElement(b,pr({},T,{className:c,ref:R}),l))});cf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cf.classNames={fullWidth:Yu,zeroRight:Qu};var N$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function T$(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=N$();return e&&t.setAttribute("nonce",e),t}function S$(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function C$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var j$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=T$())&&(S$(e,n),C$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},I$=function(){var t=j$();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},pI=function(){var t=I$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},A$={left:0,top:0,right:0,gap:0},Om=function(t){return parseInt(t||"",10)||0},k$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Om(n),Om(r),Om(s)]},R$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return A$;var e=k$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},P$=pI(),Ko="data-scroll-locked",D$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(p$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ko,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Yu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Qu," .").concat(Qu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yu," .").concat(Yu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ko,`] {
    `).concat(g$,": ").concat(l,`px;
  }
`)},zb=function(){var t=parseInt(document.body.getAttribute(Ko)||"0",10);return isFinite(t)?t:0},L$=function(){g.useEffect(function(){return document.body.setAttribute(Ko,(zb()+1).toString()),function(){var t=zb()-1;t<=0?document.body.removeAttribute(Ko):document.body.setAttribute(Ko,t.toString())}},[])},O$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;L$();var i=g.useMemo(function(){return R$(s)},[s]);return g.createElement(P$,{styles:D$(i,!e,s,n?"":"!important")})},_g=!1;if(typeof window<"u")try{var Nu=Object.defineProperty({},"passive",{get:function(){return _g=!0,!0}});window.addEventListener("test",Nu,Nu),window.removeEventListener("test",Nu,Nu)}catch{_g=!1}var xo=_g?{passive:!1}:!1,M$=function(t){return t.tagName==="TEXTAREA"},gI=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!M$(t)&&n[e]==="visible")},V$=function(t){return gI(t,"overflowY")},F$=function(t){return gI(t,"overflowX")},Hb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=yI(t,r);if(s){var i=xI(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},U$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},B$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},yI=function(t,e){return t==="v"?V$(e):F$(e)},xI=function(t,e){return t==="v"?U$(e):B$(e)},$$=function(t,e){return t==="h"&&e==="rtl"?-1:1},z$=function(t,e,n,r,s){var i=$$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,m=0;do{if(!l)break;var _=xI(t,l),C=_[0],v=_[1],x=_[2],N=v-x-i*C;(C||N)&&yI(t,l)&&(f+=N,m+=C);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(d=!0),d},Tu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Wb=function(t){return[t.deltaX,t.deltaY]},qb=function(t){return t&&"current"in t?t.current:t},H$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},W$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},q$=0,vo=[];function G$(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(q$++)[0],i=g.useState(pI)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=m$([t.lockRef.current],(t.shards||[]).map(qb),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var N=Tu(v),b=n.current,S="deltaX"in v?v.deltaX:b[0]-N[0],D="deltaY"in v?v.deltaY:b[1]-N[1],L,R=v.target,T=Math.abs(S)>Math.abs(D)?"h":"v";if("touches"in v&&T==="h"&&R.type==="range")return!1;var y=Hb(T,R);if(!y)return!0;if(y?L=T:(L=T==="v"?"h":"v",y=Hb(T,R)),!y)return!1;if(!r.current&&"changedTouches"in v&&(S||D)&&(r.current=L),!L)return!0;var I=r.current||L;return z$(I,x,v,I==="h"?S:D)},[]),c=g.useCallback(function(v){var x=v;if(!(!vo.length||vo[vo.length-1]!==i)){var N="deltaY"in x?Wb(x):Tu(x),b=e.current.filter(function(L){return L.name===x.type&&(L.target===x.target||x.target===L.shadowParent)&&H$(L.delta,N)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var S=(a.current.shards||[]).map(qb).filter(Boolean).filter(function(L){return L.contains(x.target)}),D=S.length>0?l(x,S[0]):!a.current.noIsolation;D&&x.cancelable&&x.preventDefault()}}},[]),d=g.useCallback(function(v,x,N,b){var S={name:v,delta:x,target:N,should:b,shadowParent:K$(N)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(D){return D!==S})},1)},[]),h=g.useCallback(function(v){n.current=Tu(v),r.current=void 0},[]),f=g.useCallback(function(v){d(v.type,Wb(v),v.target,l(v,t.lockRef.current))},[]),m=g.useCallback(function(v){d(v.type,Tu(v),v.target,l(v,t.lockRef.current))},[]);g.useEffect(function(){return vo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,xo),document.addEventListener("touchmove",c,xo),document.addEventListener("touchstart",h,xo),function(){vo=vo.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,xo),document.removeEventListener("touchmove",c,xo),document.removeEventListener("touchstart",h,xo)}},[]);var _=t.removeScrollBar,C=t.inert;return g.createElement(g.Fragment,null,C?g.createElement(i,{styles:W$(s)}):null,_?g.createElement(O$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function K$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Q$=E$(mI,G$);var vI=g.forwardRef(function(t,e){return g.createElement(cf,pr({},t,{ref:e,sideCar:Q$}))});vI.classNames=cf.classNames;var Y$=[" ","Enter","ArrowUp","ArrowDown"],X$=[" ","Enter"],to="Select",[uf,df,J$]=dj(to),[Ra]=mi(to,[J$,eI]),hf=eI(),[Z$,pi]=Ra(to),[ez,tz]=Ra(to),wI=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:_,form:C}=t,v=hf(e),[x,N]=g.useState(null),[b,S]=g.useState(null),[D,L]=g.useState(!1),R=tf(d),[T,y]=ma({prop:r,defaultProp:s??!1,onChange:i,caller:to}),[I,w]=ma({prop:a,defaultProp:l,onChange:c,caller:to}),k=g.useRef(null),j=x?C||!!x.closest("form"):!0,[A,F]=g.useState(new Set),q=Array.from(A).map(B=>B.props.value).join(";");return o.jsx(XB,{...v,children:o.jsxs(Z$,{required:_,scope:e,trigger:x,onTriggerChange:N,valueNode:b,onValueNodeChange:S,valueNodeHasChildren:D,onValueNodeHasChildrenChange:L,contentId:Pc(),value:I,onValueChange:w,open:T,onOpenChange:y,dir:R,triggerPointerDownPosRef:k,disabled:m,children:[o.jsx(uf.Provider,{scope:e,children:o.jsx(ez,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(B=>{F($=>new Set($).add(B))},[]),onNativeOptionRemove:g.useCallback(B=>{F($=>{const O=new Set($);return O.delete(B),O})},[]),children:n})}),j?o.jsxs(HI,{"aria-hidden":!0,required:_,tabIndex:-1,name:h,autoComplete:f,value:I,onChange:B=>w(B.target.value),disabled:m,form:C,children:[I===void 0?o.jsx("option",{value:""}):null,Array.from(A)]},q):null]})})};wI.displayName=to;var _I="SelectTrigger",bI=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=hf(n),a=pi(_I,n),l=a.disabled||r,c=Je(e,a.onTriggerChange),d=df(n),h=g.useRef("touch"),[f,m,_]=qI(v=>{const x=d().filter(S=>!S.disabled),N=x.find(S=>S.value===a.value),b=GI(x,v,N);b!==void 0&&a.onValueChange(b.value)}),C=v=>{l||(a.onOpenChange(!0),_()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return o.jsx(JB,{asChild:!0,...i,children:o.jsx(Re.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":WI(a.value)?"":void 0,...s,ref:c,onClick:Ae(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&C(v)}),onPointerDown:Ae(s.onPointerDown,v=>{h.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(C(v),v.preventDefault())}),onKeyDown:Ae(s.onKeyDown,v=>{const x=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&Y$.includes(v.key)&&(C(),v.preventDefault())})})})});bI.displayName=_I;var EI="SelectValue",NI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=pi(EI,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Je(e,c.onValueNodeChange);return Et(()=>{d(h)},[d,h]),o.jsx(Re.span,{...l,ref:f,style:{pointerEvents:"none"},children:WI(c.value)?o.jsx(o.Fragment,{children:a}):i})});NI.displayName=EI;var nz="SelectIcon",TI=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Re.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});TI.displayName=nz;var rz="SelectPortal",SI=t=>o.jsx(cI,{asChild:!0,...t});SI.displayName=rz;var no="SelectContent",CI=g.forwardRef((t,e)=>{const n=pi(no,t.__scopeSelect),[r,s]=g.useState();if(Et(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?va.createPortal(o.jsx(jI,{scope:t.__scopeSelect,children:o.jsx(uf.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(II,{...t,ref:e})});CI.displayName=no;var Kn=10,[jI,gi]=Ra(no),sz="SelectContentImpl",iz=n$("SelectContent.RemoveScroll"),II=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:_,sticky:C,hideWhenDetached:v,avoidCollisions:x,...N}=t,b=pi(no,n),[S,D]=g.useState(null),[L,R]=g.useState(null),T=Je(e,X=>D(X)),[y,I]=g.useState(null),[w,k]=g.useState(null),j=df(n),[A,F]=g.useState(!1),q=g.useRef(!1);g.useEffect(()=>{if(S)return f$(S)},[S]),T8();const B=g.useCallback(X=>{const[de,...Me]=j().map(je=>je.ref.current),[Ce]=Me.slice(-1),Ee=document.activeElement;for(const je of X)if(je===Ee||(je==null||je.scrollIntoView({block:"nearest"}),je===de&&L&&(L.scrollTop=0),je===Ce&&L&&(L.scrollTop=L.scrollHeight),je==null||je.focus(),document.activeElement!==Ee))return},[j,L]),$=g.useCallback(()=>B([y,S]),[B,y,S]);g.useEffect(()=>{A&&$()},[A,$]);const{onOpenChange:O,triggerPointerDownPosRef:W}=b;g.useEffect(()=>{if(S){let X={x:0,y:0};const de=Ce=>{var Ee,je;X={x:Math.abs(Math.round(Ce.pageX)-(((Ee=W.current)==null?void 0:Ee.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((je=W.current)==null?void 0:je.y)??0))}},Me=Ce=>{X.x<=10&&X.y<=10?Ce.preventDefault():S.contains(Ce.target)||O(!1),document.removeEventListener("pointermove",de),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",Me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",Me,{capture:!0})}}},[S,O,W]),g.useEffect(()=>{const X=()=>O(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[O]);const[Y,M]=qI(X=>{const de=j().filter(Ee=>!Ee.disabled),Me=de.find(Ee=>Ee.ref.current===document.activeElement),Ce=GI(de,X,Me);Ce&&setTimeout(()=>Ce.ref.current.focus())}),G=g.useCallback((X,de,Me)=>{const Ce=!q.current&&!Me;(b.value!==void 0&&b.value===de||Ce)&&(I(X),Ce&&(q.current=!0))},[b.value]),ce=g.useCallback(()=>S==null?void 0:S.focus(),[S]),pe=g.useCallback((X,de,Me)=>{const Ce=!q.current&&!Me;(b.value!==void 0&&b.value===de||Ce)&&k(X)},[b.value]),Z=r==="popper"?bg:AI,ne=Z===bg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:_,sticky:C,hideWhenDetached:v,avoidCollisions:x}:{};return o.jsx(jI,{scope:n,content:S,viewport:L,onViewportChange:R,itemRefCallback:G,selectedItem:y,onItemLeave:ce,itemTextRefCallback:pe,focusSelectedItem:$,selectedItemText:w,position:r,isPositioned:A,searchRef:Y,children:o.jsx(vI,{as:iz,allowPinchZoom:!0,children:o.jsx(Fj,{asChild:!0,trapped:b.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:Ae(s,X=>{var de;(de=b.trigger)==null||de.focus({preventScroll:!0}),X.preventDefault()}),children:o.jsx(Mj,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:o.jsx(Z,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:X=>X.preventDefault(),...N,...ne,onPlaced:()=>F(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:Ae(N.onKeyDown,X=>{const de=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!de&&X.key.length===1&&M(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let Ce=j().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(X.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const Ee=X.target,je=Ce.indexOf(Ee);Ce=Ce.slice(je+1)}setTimeout(()=>B(Ce)),X.preventDefault()}})})})})})})});II.displayName=sz;var oz="SelectItemAlignedPosition",AI=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=pi(no,n),a=gi(no,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=Je(e,T=>h(T)),m=df(n),_=g.useRef(!1),C=g.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:N,focusSelectedItem:b}=a,S=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&x&&N){const T=i.trigger.getBoundingClientRect(),y=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),w=N.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=w.left-y.left,je=I.left-Ee,It=T.left-je,xn=T.width+It,yi=Math.max(xn,y.width),kr=window.innerWidth-Kn,Rr=Eb(je,[Kn,Math.max(Kn,kr-yi)]);l.style.minWidth=xn+"px",l.style.left=Rr+"px"}else{const Ee=y.right-w.right,je=window.innerWidth-I.right-Ee,It=window.innerWidth-T.right-je,xn=T.width+It,yi=Math.max(xn,y.width),kr=window.innerWidth-Kn,Rr=Eb(je,[Kn,Math.max(Kn,kr-yi)]);l.style.minWidth=xn+"px",l.style.right=Rr+"px"}const k=m(),j=window.innerHeight-Kn*2,A=v.scrollHeight,F=window.getComputedStyle(d),q=parseInt(F.borderTopWidth,10),B=parseInt(F.paddingTop,10),$=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),W=q+B+A+O+$,Y=Math.min(x.offsetHeight*5,W),M=window.getComputedStyle(v),G=parseInt(M.paddingTop,10),ce=parseInt(M.paddingBottom,10),pe=T.top+T.height/2-Kn,Z=j-pe,ne=x.offsetHeight/2,X=x.offsetTop+ne,de=q+B+X,Me=W-de;if(de<=pe){const Ee=k.length>0&&x===k[k.length-1].ref.current;l.style.bottom="0px";const je=d.clientHeight-v.offsetTop-v.offsetHeight,It=Math.max(Z,ne+(Ee?ce:0)+je+$),xn=de+It;l.style.height=xn+"px"}else{const Ee=k.length>0&&x===k[0].ref.current;l.style.top="0px";const It=Math.max(pe,q+v.offsetTop+(Ee?G:0)+ne)+Me;l.style.height=It+"px",v.scrollTop=de-pe+v.offsetTop}l.style.margin=`${Kn}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>_.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,x,N,i.dir,r]);Et(()=>S(),[S]);const[D,L]=g.useState();Et(()=>{d&&L(window.getComputedStyle(d).zIndex)},[d]);const R=g.useCallback(T=>{T&&C.current===!0&&(S(),b==null||b(),C.current=!1)},[S,b]);return o.jsx(lz,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:_,onScrollButtonChange:R,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:o.jsx(Re.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AI.displayName=oz;var az="SelectPopperPosition",bg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Kn,...i}=t,a=hf(n);return o.jsx(ZB,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bg.displayName=az;var[lz,nv]=Ra(no,{}),Eg="SelectViewport",kI=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=gi(Eg,n),a=nv(Eg,n),l=Je(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(uf.Slot,{scope:n,children:o.jsx(Re.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ae(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const _=Math.abs(c.current-h.scrollTop);if(_>0){const C=window.innerHeight-Kn*2,v=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),N=Math.max(v,x);if(N<C){const b=N+_,S=Math.min(C,b),D=b-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=D>0?D:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});kI.displayName=Eg;var RI="SelectGroup",[cz,uz]=Ra(RI),dz=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Pc();return o.jsx(cz,{scope:n,id:s,children:o.jsx(Re.div,{role:"group","aria-labelledby":s,...r,ref:e})})});dz.displayName=RI;var PI="SelectLabel",DI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=uz(PI,n);return o.jsx(Re.div,{id:s.id,...r,ref:e})});DI.displayName=PI;var nh="SelectItem",[hz,LI]=Ra(nh),OI=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=pi(nh,n),c=gi(nh,n),d=l.value===r,[h,f]=g.useState(i??""),[m,_]=g.useState(!1),C=Je(e,b=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,b,r,s)}),v=Pc(),x=g.useRef("touch"),N=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(hz,{scope:n,value:r,disabled:s,textId:v,isSelected:d,onItemTextChange:g.useCallback(b=>{f(S=>S||((b==null?void 0:b.textContent)??"").trim())},[]),children:o.jsx(uf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(Re.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:C,onFocus:Ae(a.onFocus,()=>_(!0)),onBlur:Ae(a.onBlur,()=>_(!1)),onClick:Ae(a.onClick,()=>{x.current!=="mouse"&&N()}),onPointerUp:Ae(a.onPointerUp,()=>{x.current==="mouse"&&N()}),onPointerDown:Ae(a.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Ae(a.onPointerMove,b=>{var S;x.current=b.pointerType,s?(S=c.onItemLeave)==null||S.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(a.onPointerLeave,b=>{var S;b.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:Ae(a.onKeyDown,b=>{var D;((D=c.searchRef)==null?void 0:D.current)!==""&&b.key===" "||(X$.includes(b.key)&&N(),b.key===" "&&b.preventDefault())})})})})});OI.displayName=nh;var gl="SelectItemText",MI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=pi(gl,n),l=gi(gl,n),c=LI(gl,n),d=tz(gl,n),[h,f]=g.useState(null),m=Je(e,N=>f(N),c.onItemTextChange,N=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,N,c.value,c.disabled)}),_=h==null?void 0:h.textContent,C=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:_},c.value),[c.disabled,c.value,_]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=d;return Et(()=>(v(C),()=>x(C)),[v,x,C]),o.jsxs(o.Fragment,{children:[o.jsx(Re.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?va.createPortal(i.children,a.valueNode):null]})});MI.displayName=gl;var VI="SelectItemIndicator",FI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return LI(VI,n).isSelected?o.jsx(Re.span,{"aria-hidden":!0,...r,ref:e}):null});FI.displayName=VI;var Ng="SelectScrollUpButton",UI=g.forwardRef((t,e)=>{const n=gi(Ng,t.__scopeSelect),r=nv(Ng,t.__scopeSelect),[s,i]=g.useState(!1),a=Je(e,r.onScrollButtonChange);return Et(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx($I,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});UI.displayName=Ng;var Tg="SelectScrollDownButton",BI=g.forwardRef((t,e)=>{const n=gi(Tg,t.__scopeSelect),r=nv(Tg,t.__scopeSelect),[s,i]=g.useState(!1),a=Je(e,r.onScrollButtonChange);return Et(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx($I,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});BI.displayName=Tg;var $I=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=gi("SelectScrollButton",n),a=g.useRef(null),l=df(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Et(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Re.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ae(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Ae(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Ae(s.onPointerLeave,()=>{c()})})}),fz="SelectSeparator",zI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Re.div,{"aria-hidden":!0,...r,ref:e})});zI.displayName=fz;var Sg="SelectArrow",mz=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=hf(n),i=pi(Sg,n),a=gi(Sg,n);return i.open&&a.position==="popper"?o.jsx(e$,{...s,...r,ref:e}):null});mz.displayName=Sg;var pz="SelectBubbleInput",HI=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),i=Je(r,s),a=tv(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(Re.select,{...n,style:{...uI,...n.style},ref:i,defaultValue:e})});HI.displayName=pz;function WI(t){return t===""||t===void 0}function qI(t){const e=Zr(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function GI(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=gz(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function gz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yz=wI,KI=bI,xz=NI,vz=TI,wz=SI,QI=CI,_z=kI,YI=DI,XI=OI,bz=MI,Ez=FI,JI=UI,ZI=BI,e2=zI;const Zt=yz,en=xz,zt=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(KI,{ref:r,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(vz,{asChild:!0,children:o.jsx(GC,{className:"h-4 w-4 opacity-50"})})]}));zt.displayName=KI.displayName;const t2=g.forwardRef(({className:t,...e},n)=>o.jsx(JI,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(TU,{className:"h-4 w-4"})}));t2.displayName=JI.displayName;const n2=g.forwardRef(({className:t,...e},n)=>o.jsx(ZI,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(GC,{className:"h-4 w-4"})}));n2.displayName=ZI.displayName;const Ht=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(wz,{children:o.jsxs(QI,{ref:s,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(t2,{}),o.jsx(_z,{className:Le("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(n2,{})]})}));Ht.displayName=QI.displayName;const Nz=g.forwardRef(({className:t,...e},n)=>o.jsx(YI,{ref:n,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Nz.displayName=YI.displayName;const le=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(XI,{ref:r,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Ez,{children:o.jsx(NU,{className:"h-4 w-4"})})}),o.jsx(bz,{children:e})]}));le.displayName=XI.displayName;const Tz=g.forwardRef(({className:t,...e},n)=>o.jsx(e2,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));Tz.displayName=e2.displayName;var ff="Switch",[Sz]=mi(ff),[Cz,jz]=Sz(ff),r2=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,_]=g.useState(null),C=Je(e,S=>_(S)),v=g.useRef(!1),x=m?h||!!m.closest("form"):!0,[N,b]=ma({prop:s,defaultProp:i??!1,onChange:d,caller:ff});return o.jsxs(Cz,{scope:n,checked:N,disabled:l,children:[o.jsx(Re.button,{type:"button",role:"switch","aria-checked":N,"aria-required":a,"data-state":a2(N),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:C,onClick:Ae(t.onClick,S=>{b(D=>!D),x&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),x&&o.jsx(o2,{control:m,bubbles:!v.current,name:r,value:c,checked:N,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});r2.displayName=ff;var s2="SwitchThumb",i2=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=jz(s2,n);return o.jsx(Re.span,{"data-state":a2(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});i2.displayName=s2;var Iz="SwitchBubbleInput",o2=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=Je(a,i),c=tv(n),d=Jx(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&_){const C=new Event("click",{bubbles:r});_.call(h,n),h.dispatchEvent(C)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});o2.displayName=Iz;function a2(t){return t?"checked":"unchecked"}var l2=r2,Az=i2;const Pt=g.forwardRef(({className:t,...e},n)=>o.jsx(l2,{className:Le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:o.jsx(Az,{className:Le("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Pt.displayName=l2.displayName;const kz=({onBack:t})=>{const{user:e}=Ln(),[n,r]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[s,i]=g.useState([{id:"1",question:"",points:0,flag:""}]),[a,l]=g.useState(!1),[c,d]=g.useState(!1),h=async R=>{R.preventDefault(),l(!0);try{const T={...n,finalCategory:c?n.customCategory:n.category,questions:n.hasMultipleQuestions?s:[],createdAt:new Date,isActive:!0,solvedBy:[],hints:n.hints.filter(y=>y.trim()!==""),totalPoints:n.hasMultipleQuestions?s.reduce((y,I)=>y+I.points,0):n.points,createdBy:e==null?void 0:e.uid,createdByName:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),featuredOnPractice:n.featuredOnPractice,availableInPractice:n.availableInPractice,challengeType:n.challengeType,...n.isExternalChallenge&&{attribution:{...n.externalSource,importedBy:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),importedById:e==null?void 0:e.uid,importedAt:new Date}},...n.creator&&{originalCreator:{name:n.creator,url:n.creatorUrl}}};await kx(xt(ge,"challenges"),T),alert("Challenge created successfully!"),f()}catch(T){console.error("Error creating challenge:",T),alert("Error creating challenge. Please try again.")}finally{l(!1)}},f=()=>{r({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),i([{id:"1",question:"",points:0,flag:""}]),d(!1)},m=()=>{r({...n,hints:[...n.hints,""]})},_=(R,T)=>{const y=[...n.hints];y[R]=T,r({...n,hints:y})},C=R=>{const T=n.hints.filter((y,I)=>I!==R);r({...n,hints:T})},v=()=>{const R={id:Date.now().toString(),question:"",points:0,flag:""};i([...s,R])},x=(R,T,y)=>{i(s.map(I=>I.id===R?{...I,[T]:y}:I))},N=R=>{s.length>1&&i(s.filter(T=>T.id!==R))},b=R=>{if(R==="link"){const T=prompt("Enter the URL:");if(T){const y={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:T,type:"link"};r({...n,files:[...n.files,y]})}}else{const T=document.createElement("input");T.type="file",T.onchange=y=>{var w;const I=(w=y.target.files)==null?void 0:w[0];if(I){const k={id:Date.now().toString(),name:I.name,url:URL.createObjectURL(I),type:"file"};r({...n,files:[...n.files,k]})}},T.click()}},S=R=>{r({...n,files:n.files.filter(T=>T.id!==R)})},D=R=>{R==="custom"?(d(!0),r({...n,category:"custom"})):(d(!1),r({...n,category:R}))},L=(R,T)=>{r({...n,externalSource:{...n.externalSource,[R]:T}})};return o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Create New Challenge"}),o.jsx(Wt,{children:"Add a new CTF challenge to the platform with advanced options"})]}),o.jsx(se,{children:o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(he,{id:"title",value:n.title,onChange:R=>r({...n,title:R.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"category",children:"Category"}),o.jsxs(Zt,{value:n.category,onValueChange:D,children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"web",children:"Web"}),o.jsx(le,{value:"crypto",children:"Cryptography"}),o.jsx(le,{value:"forensics",children:"Forensics"}),o.jsx(le,{value:"pwn",children:"Pwn"}),o.jsx(le,{value:"reversing",children:"Reverse Engineering"}),o.jsx(le,{value:"misc",children:"Miscellaneous"}),o.jsx(le,{value:"custom",children:"Custom Category"})]})]})]}),c&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(he,{id:"customCategory",value:n.customCategory,onChange:R=>r({...n,customCategory:R.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Zt,{value:n.difficulty,onValueChange:R=>r({...n,difficulty:R}),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(le,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(le,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"points",children:"Points *"}),o.jsx(he,{id:"points",type:"number",value:n.points,onChange:R=>r({...n,points:parseInt(R.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(K,{htmlFor:"description",children:"Description *"}),o.jsx(Ia,{id:"description",value:n.description,onChange:R=>r({...n,description:R.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(lt,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pt,{id:"availableInPractice",checked:n.availableInPractice,onCheckedChange:R=>r({...n,availableInPractice:R})}),o.jsx(K,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pt,{id:"featuredOnPractice",checked:n.featuredOnPractice,onCheckedChange:R=>r({...n,featuredOnPractice:R})}),o.jsxs(K,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Bx,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Zt,{value:n.challengeType,onValueChange:R=>r({...n,challengeType:R}),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"practice",children:"Practice Challenge"}),o.jsx(le,{value:"live",children:"Live Event Challenge"}),o.jsx(le,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(An,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(he,{id:"creator",value:n.creator,onChange:R=>r({...n,creator:R.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(he,{id:"creatorUrl",value:n.creatorUrl,onChange:R=>r({...n,creatorUrl:R.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yd,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Pt,{checked:n.isExternalChallenge,onCheckedChange:R=>r({...n,isExternalChallenge:R})})]}),n.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(he,{id:"ctfName",value:n.externalSource.ctfName,onChange:R=>L("ctfName",R.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(he,{id:"ctfUrl",value:n.externalSource.ctfUrl,onChange:R=>L("ctfUrl",R.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(he,{id:"originalAuthor",value:n.externalSource.originalAuthor,onChange:R=>L("originalAuthor",R.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(he,{id:"authorUrl",value:n.externalSource.authorUrl,onChange:R=>L("authorUrl",R.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"license",children:"License"}),o.jsxs(Zt,{value:n.externalSource.license,onValueChange:R=>L("license",R),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"unknown",children:"Unknown"}),o.jsx(le,{value:"MIT",children:"MIT License"}),o.jsx(le,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(le,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(le,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(le,{value:"custom",children:"Custom License"})]})]}),n.externalSource.license==="custom"&&o.jsx(he,{placeholder:"Specify custom license",className:"mt-2",onChange:R=>L("license",R.target.value)})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Attribution Notice:"})," This challenge will be displayed with proper attribution to the original author and CTF platform."]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Pt,{id:"multipleQuestions",checked:n.hasMultipleQuestions,onCheckedChange:R=>r({...n,hasMultipleQuestions:R})})]}),n.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{className:"text-base",children:"Challenge Questions"}),o.jsxs(J,{type:"button",onClick:v,variant:"outline",size:"sm",children:[o.jsx(ti,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),s.map((R,T)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{children:["Question ",T+1]}),s.length>1&&o.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(R.id),children:o.jsx(Zi,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`question-${R.id}`,children:"Question Text *"}),o.jsx(he,{id:`question-${R.id}`,value:R.question,onChange:y=>x(R.id,"question",y.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:`points-${R.id}`,children:"Points *"}),o.jsx(he,{id:`points-${R.id}`,type:"number",value:R.points,onChange:y=>x(R.id,"points",parseInt(y.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`flag-${R.id}`,children:"Flag *"}),o.jsx(he,{id:`flag-${R.id}`,value:R.flag,onChange:y=>x(R.id,"flag",y.target.value),placeholder:"Flag for this question",required:!0})]})]})]},R.id)),s.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",s.reduce((R,T)=>R+T.points,0)]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flag",children:"Flag *"}),o.jsx(he,{id:"flag",value:n.flag,onChange:R=>r({...n,flag:R.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Zt,{value:n.flagFormat,onValueChange:R=>r({...n,flagFormat:R}),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsxs(le,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(le,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(le,{value:".*",children:"Any format"}),o.jsx(le,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(le,{value:"custom",children:"Custom Regex"})]})]}),n.flagFormat==="custom"&&o.jsx(he,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:R=>r({...n,flagFormat:R.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(K,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(J,{type:"button",variant:"outline",onClick:()=>b("file"),children:[o.jsx(ZC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(J,{type:"button",variant:"outline",onClick:()=>b("link"),children:[o.jsx(da,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),n.files.length>0&&o.jsx("div",{className:"space-y-2",children:n.files.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[R.type==="file"?o.jsx(uc,{className:"w-4 h-4"}):o.jsx(da,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:R.name}),R.type==="link"&&o.jsx("a",{href:R.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(R.id),children:o.jsx(Zi,{className:"w-4 h-4"})})]},R.id))})]}),o.jsxs("div",{children:[o.jsx(K,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[n.hints.map((R,T)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(he,{value:R,onChange:y=>_(T,y.target.value),placeholder:`Hint ${T+1}`}),n.hints.length>1&&o.jsx(J,{type:"button",variant:"outline",onClick:()=>C(T),children:"Remove"})]},T)),o.jsx(J,{type:"button",variant:"outline",onClick:m,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(J,{type:"submit",disabled:a,children:a?"Creating...":"Create Challenge"}),o.jsx(J,{type:"button",variant:"outline",onClick:f,children:"Reset Form"}),o.jsx(J,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},Rz=({onBack:t,onCreateNew:e,onEditChallenge:n})=>{const{user:r}=Ln(),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[m,_]=g.useState("all"),[C,v]=g.useState("all"),[x,N]=g.useState("all"),[b,S]=g.useState("all"),[D,L]=g.useState([]),[R,T]=g.useState(!1);g.useEffect(()=>{y(),I()},[]),g.useEffect(()=>{w()},[h,m,C,x,b,s]);const y=async()=>{try{const M=jn(xt(ge,"challenges"),Yi("createdAt","desc")),ce=(await In(M)).docs.map(pe=>({id:pe.id,...pe.data()}));i(ce)}catch(M){console.error("Error fetching challenges:",M)}finally{d(!1)}},I=async()=>{try{T(!0);const M=jn(xt(ge,"events"),_n("status","in",["LIVE","UPCOMING"]),Yi("startTime","asc")),ce=(await In(M)).docs.map(pe=>({id:pe.id,...pe.data()}));L(ce)}catch(M){console.error("Error fetching events:",M),L([])}finally{T(!1)}},w=()=>{let M=s;h&&(M=M.filter(G=>G.title.toLowerCase().includes(h.toLowerCase())||G.description.toLowerCase().includes(h.toLowerCase())||(G.finalCategory||G.category).toLowerCase().includes(h.toLowerCase()))),m!=="all"&&(M=M.filter(G=>(G.finalCategory||G.category)===m)),C!=="all"&&(M=M.filter(G=>G.difficulty===C)),x!=="all"&&(M=M.filter(G=>x==="active"?G.isActive:!G.isActive)),b!=="all"&&(M=M.filter(G=>{switch(b){case"practice":return G.challengeType==="practice"||G.featuredOnPractice||G.availableInPractice;case"live":return G.challengeType==="live";case"upcoming":return G.challengeType==="upcoming";case"past":return G.challengeType==="past_event";case"featured":return G.featuredOnPractice;default:return!0}})),l(M)},k=async(M,G)=>{try{await dn(Ve(ge,"challenges",M),{isActive:!G}),i(s.map(ce=>ce.id===M?{...ce,isActive:!G}:ce))}catch(ce){console.error("Error updating challenge status:",ce)}},j=async(M,G)=>{try{await dn(Ve(ge,"challenges",M),{featuredOnPractice:!G,availableInPractice:!0,challengeType:G?void 0:"practice"}),i(s.map(ce=>ce.id===M?{...ce,featuredOnPractice:!G,availableInPractice:!0,challengeType:G?ce.challengeType:"practice"}:ce))}catch(ce){console.error("Error updating featured status:",ce)}},A=async(M,G,ce)=>{try{const pe=D.find(Z=>Z.id===G);await dn(Ve(ge,"challenges",M),{eventId:G,eventName:ce,challengeType:(pe==null?void 0:pe.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}),i(s.map(Z=>Z.id===M?{...Z,eventId:G,eventName:ce,challengeType:(pe==null?void 0:pe.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}:Z))}catch(pe){console.error("Error assigning challenge to event:",pe)}},F=async M=>{try{await dn(Ve(ge,"challenges",M),{eventId:null,eventName:null,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}),i(s.map(G=>G.id===M?{...G,eventId:void 0,eventName:void 0,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}:G))}catch(G){console.error("Error removing challenge from event:",G)}},q=async(M,G)=>{try{await dn(Ve(ge,"challenges",M),{availableInPractice:G,challengeType:G?"practice":void 0,featuredOnPractice:G?!1:void 0}),i(s.map(ce=>ce.id===M?{...ce,availableInPractice:G,challengeType:G?"practice":ce.challengeType,featuredOnPractice:G?ce.featuredOnPractice:!1}:ce))}catch(ce){console.error("Error updating practice availability:",ce)}},B=async M=>{if(confirm("Are you sure you want to delete this challenge? This action cannot be undone."))try{await cF(Ve(ge,"challenges",M)),i(s.filter(G=>G.id!==M))}catch(G){console.error("Error deleting challenge:",G)}},$=M=>{switch(M){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},O=M=>({web:"bg-blue-100 text-blue-800",crypto:"bg-purple-100 text-purple-800",forensics:"bg-orange-100 text-orange-800",pwn:"bg-red-100 text-red-800",reversing:"bg-indigo-100 text-indigo-800",misc:"bg-gray-100 text-gray-800"})[M]||"bg-gray-100 text-gray-800",W=M=>M.challengeType==="live"?o.jsxs(ve,{className:"bg-red-100 text-red-800",children:[o.jsx(Jn,{className:"w-3 h-3 mr-1"}),"Live Event"]}):M.challengeType==="upcoming"?o.jsxs(ve,{className:"bg-yellow-100 text-yellow-800",children:[o.jsx(zr,{className:"w-3 h-3 mr-1"}),"Upcoming"]}):M.challengeType==="past_event"?o.jsx(ve,{className:"bg-gray-100 text-gray-800",children:"Past Event"}):M.featuredOnPractice?o.jsxs(ve,{className:"bg-purple-100 text-purple-800",children:[o.jsx(lt,{className:"w-3 h-3 mr-1"}),"Featured"]}):M.availableInPractice?o.jsx(ve,{className:"bg-green-100 text-green-800",children:"Practice"}):null,Y=()=>{const M=s.map(G=>G.finalCategory||G.category);return Array.from(new Set(M)).filter(Boolean)};return c?o.jsx(re,{children:o.jsx(se,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenges..."})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Challenge Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage challenges, assign to events, and feature on practice page (",s.length," total)"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(J,{onClick:e,children:[o.jsx(ti,{className:"w-4 h-4 mr-2"}),"Create New"]}),o.jsx(J,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]}),o.jsxs(re,{children:[o.jsx(Pe,{children:o.jsx(De,{className:"text-lg",children:"Search & Filter"})}),o.jsx(se,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ha,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(he,{placeholder:"Search challenges...",value:h,onChange:M=>f(M.target.value),className:"pl-10"})]}),o.jsx("div",{children:o.jsxs(Zt,{value:m,onValueChange:_,children:[o.jsx(zt,{children:o.jsx(en,{placeholder:"All Categories"})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"all",children:"All Categories"}),Y().map(M=>o.jsx(le,{value:M,children:M},M))]})]})}),o.jsx("div",{children:o.jsxs(Zt,{value:C,onValueChange:v,children:[o.jsx(zt,{children:o.jsx(en,{placeholder:"All Difficulties"})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"all",children:"All Difficulties"}),o.jsx(le,{value:"easy",children:"Easy"}),o.jsx(le,{value:"medium",children:"Medium"}),o.jsx(le,{value:"hard",children:"Hard"}),o.jsx(le,{value:"expert",children:"Expert"})]})]})}),o.jsx("div",{children:o.jsxs(Zt,{value:x,onValueChange:N,children:[o.jsx(zt,{children:o.jsx(en,{placeholder:"All Status"})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"all",children:"All Status"}),o.jsx(le,{value:"active",children:"Active"}),o.jsx(le,{value:"inactive",children:"Inactive"})]})]})}),o.jsx("div",{children:o.jsxs(Zt,{value:b,onValueChange:S,children:[o.jsx(zt,{children:o.jsx(en,{placeholder:"All Types"})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"all",children:"All Types"}),o.jsx(le,{value:"practice",children:"Practice"}),o.jsx(le,{value:"live",children:"Live Event"}),o.jsx(le,{value:"upcoming",children:"Upcoming Event"}),o.jsx(le,{value:"past",children:"Past Event"}),o.jsx(le,{value:"featured",children:"Featured"})]})]})})]})})]}),o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Challenges"}),o.jsxs(Wt,{children:[a.length," of ",s.length," challenges shown",D.length>0&&`  ${D.length} events available`]})]}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-4",children:[a.map(M=>{var G,ce,pe,Z;return o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("h3",{className:"font-semibold text-lg",children:M.title}),o.jsx(ve,{variant:M.isActive?"default":"secondary",children:M.isActive?"Active":"Inactive"}),o.jsx(ve,{className:$(M.difficulty),children:M.difficulty}),o.jsx(ve,{className:O(M.finalCategory||M.category),children:M.finalCategory||M.category}),o.jsxs(ve,{variant:"outline",children:[M.points," pts"]}),W(M)]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:M.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Created by: ",M.createdByName]}),o.jsx("span",{children:""}),o.jsx("span",{children:((pe=(ce=(G=M.createdAt)==null?void 0:G.toDate)==null?void 0:ce.call(G))==null?void 0:pe.toLocaleDateString())||new Date(M.createdAt).toLocaleDateString()}),o.jsx("span",{children:""}),o.jsxs("span",{children:[((Z=M.solvedBy)==null?void 0:Z.length)||0," solves"]}),M.eventName&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Event: ",M.eventName]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pt,{id:`featured-${M.id}`,checked:M.featuredOnPractice||!1,onCheckedChange:ne=>j(M.id,M.featuredOnPractice||!1)}),o.jsx(K,{htmlFor:`featured-${M.id}`,className:"text-sm",children:"Featured on Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pt,{id:`practice-${M.id}`,checked:M.availableInPractice||!1,onCheckedChange:ne=>q(M.id,ne)}),o.jsx(K,{htmlFor:`practice-${M.id}`,className:"text-sm",children:"Available in Practice"})]}),!M.eventId&&D.length>0&&o.jsx("div",{className:"flex items-center space-x-2",children:o.jsxs(Zt,{value:"",onValueChange:ne=>{const X=D.find(de=>de.id===ne);X&&A(M.id,ne,X.title)},children:[o.jsx(zt,{className:"w-40",children:o.jsx(en,{placeholder:"Assign to Event"})}),o.jsx(Ht,{children:D.map(ne=>o.jsxs(le,{value:ne.id,children:[ne.title," (",ne.status,")"]},ne.id))})]})}),M.eventId&&o.jsx(J,{variant:"outline",size:"sm",onClick:()=>F(M.id),children:"Remove from Event"}),D.length===0&&o.jsx(ve,{variant:"outline",className:"text-xs",children:"No events available"})]})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsxs(J,{variant:"outline",size:"sm",onClick:()=>n(M),children:[o.jsx(BU,{className:"w-4 h-4 mr-1"}),"Edit"]}),o.jsx(J,{variant:"outline",size:"sm",onClick:()=>k(M.id,M.isActive),children:M.isActive?"Deactivate":"Activate"}),o.jsx(J,{variant:"destructive",size:"sm",onClick:()=>B(M.id),children:o.jsx($U,{className:"w-4 h-4"})})]})]})},M.id)}),a.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.length===0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{children:"No challenges created yet."}),o.jsxs(J,{onClick:e,children:[o.jsx(ti,{className:"w-4 h-4 mr-2"}),"Create Your First Challenge"]})]}):"No challenges match your filters."})]})})]})]})},Pz=({challengeId:t,onBack:e,onSave:n})=>{const{user:r}=Ln(),[s,i]=g.useState(!0),[a,l]=g.useState(!1),[c,d]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,isActive:!0,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[h,f]=g.useState([]),[m,_]=g.useState(!1);g.useEffect(()=>{C()},[t]);const C=async()=>{var w,k,j,A,F,q,B;try{const $=await Zs(Ve(ge,"challenges",t));if($.exists()){const O=$.data();d({title:O.title||"",description:O.description||"",category:O.category||"web",customCategory:O.finalCategory||"",difficulty:O.difficulty||"easy",points:O.points||100,flag:O.flag||"",flagFormat:O.flagFormat||"CTF{.*}",hasMultipleQuestions:O.hasMultipleQuestions||!1,isExternalChallenge:!!O.attribution,isActive:O.isActive!==!1,hints:O.hints||[""],files:O.files||[],creator:((w=O.originalCreator)==null?void 0:w.name)||"",creatorUrl:((k=O.originalCreator)==null?void 0:k.url)||"",featuredOnPractice:O.featuredOnPractice||!1,availableInPractice:O.availableInPractice!==!1,challengeType:O.challengeType||"practice",externalSource:{ctfName:((j=O.attribution)==null?void 0:j.ctfName)||"",ctfUrl:((A=O.attribution)==null?void 0:A.ctfUrl)||"",originalAuthor:((F=O.attribution)==null?void 0:F.originalAuthor)||"",authorUrl:((q=O.attribution)==null?void 0:q.authorUrl)||"",license:((B=O.attribution)==null?void 0:B.license)||"unknown"}}),O.hasMultipleQuestions&&O.questions&&f(O.questions),O.finalCategory&&(_(!0),d(W=>({...W,category:"custom"})))}}catch($){console.error("Error loading challenge:",$)}finally{i(!1)}},v=async w=>{w.preventDefault(),l(!0);try{const k={...c,finalCategory:m?c.customCategory:c.category,questions:c.hasMultipleQuestions?h:[],hints:c.hints.filter(j=>j.trim()!==""),totalPoints:c.hasMultipleQuestions?h.reduce((j,A)=>j+A.points,0):c.points,updatedAt:new Date,updatedBy:r==null?void 0:r.uid,updatedByName:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),featuredOnPractice:c.featuredOnPractice,availableInPractice:c.availableInPractice,challengeType:c.challengeType,...c.isExternalChallenge&&{attribution:{...c.externalSource,importedBy:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),importedById:r==null?void 0:r.uid,importedAt:new Date}},...c.creator&&{originalCreator:{name:c.creator,url:c.creatorUrl}}};await dn(Ve(ge,"challenges",t),k),alert("Challenge updated successfully!"),n()}catch(k){console.error("Error updating challenge:",k),alert("Error updating challenge. Please try again.")}finally{l(!1)}},x=()=>{d({...c,hints:[...c.hints,""]})},N=(w,k)=>{const j=[...c.hints];j[w]=k,d({...c,hints:j})},b=w=>{const k=c.hints.filter((j,A)=>A!==w);d({...c,hints:k})},S=()=>{const w={id:Date.now().toString(),question:"",points:0,flag:""};f([...h,w])},D=(w,k,j)=>{f(h.map(A=>A.id===w?{...A,[k]:j}:A))},L=w=>{h.length>1&&f(h.filter(k=>k.id!==w))},R=w=>{if(w==="link"){const k=prompt("Enter the URL:");if(k){const j={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:k,type:"link"};d({...c,files:[...c.files,j]})}}else{const k=document.createElement("input");k.type="file",k.onchange=j=>{var F;const A=(F=j.target.files)==null?void 0:F[0];if(A){const q={id:Date.now().toString(),name:A.name,url:URL.createObjectURL(A),type:"file"};d({...c,files:[...c.files,q]})}},k.click()}},T=w=>{d({...c,files:c.files.filter(k=>k.id!==w)})},y=w=>{w==="custom"?(_(!0),d({...c,category:"custom"})):(_(!1),d({...c,category:w}))},I=(w,k)=>{d({...c,externalSource:{...c.externalSource,[w]:k}})};return s?o.jsx(re,{children:o.jsx(se,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenge..."})})}):o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Edit Challenge"}),o.jsx(Wt,{children:"Update challenge details and configuration"})]}),o.jsx(se,{children:o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(K,{className:"text-base",children:"Challenge Status"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active challenges are visible to users"})]}),o.jsx(Pt,{checked:c.isActive,onCheckedChange:w=>d({...c,isActive:w})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(lt,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pt,{id:"availableInPractice",checked:c.availableInPractice,onCheckedChange:w=>d({...c,availableInPractice:w})}),o.jsx(K,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Pt,{id:"featuredOnPractice",checked:c.featuredOnPractice,onCheckedChange:w=>d({...c,featuredOnPractice:w})}),o.jsxs(K,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Bx,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Zt,{value:c.challengeType,onValueChange:w=>d({...c,challengeType:w}),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"practice",children:"Practice Challenge"}),o.jsx(le,{value:"live",children:"Live Event Challenge"}),o.jsx(le,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(he,{id:"title",value:c.title,onChange:w=>d({...c,title:w.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"category",children:"Category"}),o.jsxs(Zt,{value:c.category,onValueChange:y,children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"web",children:"Web"}),o.jsx(le,{value:"crypto",children:"Cryptography"}),o.jsx(le,{value:"forensics",children:"Forensics"}),o.jsx(le,{value:"pwn",children:"Pwn"}),o.jsx(le,{value:"reversing",children:"Reverse Engineering"}),o.jsx(le,{value:"misc",children:"Miscellaneous"}),o.jsx(le,{value:"custom",children:"Custom Category"})]})]})]}),m&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(he,{id:"customCategory",value:c.customCategory,onChange:w=>d({...c,customCategory:w.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Zt,{value:c.difficulty,onValueChange:w=>d({...c,difficulty:w}),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(le,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(le,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"points",children:"Points *"}),o.jsx(he,{id:"points",type:"number",value:c.points,onChange:w=>d({...c,points:parseInt(w.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(K,{htmlFor:"description",children:"Description *"}),o.jsx(Ia,{id:"description",value:c.description,onChange:w=>d({...c,description:w.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(An,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(he,{id:"creator",value:c.creator,onChange:w=>d({...c,creator:w.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(he,{id:"creatorUrl",value:c.creatorUrl,onChange:w=>d({...c,creatorUrl:w.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Yd,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Pt,{checked:c.isExternalChallenge,onCheckedChange:w=>d({...c,isExternalChallenge:w})})]}),c.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(he,{id:"ctfName",value:c.externalSource.ctfName,onChange:w=>I("ctfName",w.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(he,{id:"ctfUrl",value:c.externalSource.ctfUrl,onChange:w=>I("ctfUrl",w.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(he,{id:"originalAuthor",value:c.externalSource.originalAuthor,onChange:w=>I("originalAuthor",w.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(he,{id:"authorUrl",value:c.externalSource.authorUrl,onChange:w=>I("authorUrl",w.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"license",children:"License"}),o.jsxs(Zt,{value:c.externalSource.license,onValueChange:w=>I("license",w),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsx(le,{value:"unknown",children:"Unknown"}),o.jsx(le,{value:"MIT",children:"MIT License"}),o.jsx(le,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(le,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(le,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(le,{value:"custom",children:"Custom License"})]})]}),c.externalSource.license==="custom"&&o.jsx(he,{placeholder:"Specify custom license",className:"mt-2",onChange:w=>I("license",w.target.value)})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Pt,{id:"multipleQuestions",checked:c.hasMultipleQuestions,onCheckedChange:w=>d({...c,hasMultipleQuestions:w})})]}),c.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{className:"text-base",children:"Challenge Questions"}),o.jsxs(J,{type:"button",onClick:S,variant:"outline",size:"sm",children:[o.jsx(ti,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),h.map((w,k)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{children:["Question ",k+1]}),h.length>1&&o.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(w.id),children:o.jsx(Zi,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`question-${w.id}`,children:"Question Text *"}),o.jsx(he,{id:`question-${w.id}`,value:w.question,onChange:j=>D(w.id,"question",j.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:`points-${w.id}`,children:"Points *"}),o.jsx(he,{id:`points-${w.id}`,type:"number",value:w.points,onChange:j=>D(w.id,"points",parseInt(j.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`flag-${w.id}`,children:"Flag *"}),o.jsx(he,{id:`flag-${w.id}`,value:w.flag,onChange:j=>D(w.id,"flag",j.target.value),placeholder:"Flag for this question",required:!0})]})]})]},w.id)),h.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",h.reduce((w,k)=>w+k.points,0)]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flag",children:"Flag *"}),o.jsx(he,{id:"flag",value:c.flag,onChange:w=>d({...c,flag:w.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Zt,{value:c.flagFormat,onValueChange:w=>d({...c,flagFormat:w}),children:[o.jsx(zt,{children:o.jsx(en,{})}),o.jsxs(Ht,{children:[o.jsxs(le,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(le,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(le,{value:".*",children:"Any format"}),o.jsx(le,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(le,{value:"custom",children:"Custom Regex"})]})]}),c.flagFormat==="custom"&&o.jsx(he,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:w=>d({...c,flagFormat:w.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(K,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(J,{type:"button",variant:"outline",onClick:()=>R("file"),children:[o.jsx(ZC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(J,{type:"button",variant:"outline",onClick:()=>R("link"),children:[o.jsx(da,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),c.files.length>0&&o.jsx("div",{className:"space-y-2",children:c.files.map(w=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[w.type==="file"?o.jsx(uc,{className:"w-4 h-4"}):o.jsx(da,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:w.name}),w.type==="link"&&o.jsx("a",{href:w.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(J,{type:"button",variant:"ghost",size:"sm",onClick:()=>T(w.id),children:o.jsx(Zi,{className:"w-4 h-4"})})]},w.id))})]}),o.jsxs("div",{children:[o.jsx(K,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[c.hints.map((w,k)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(he,{value:w,onChange:j=>N(k,j.target.value),placeholder:`Hint ${k+1}`}),c.hints.length>1&&o.jsx(J,{type:"button",variant:"outline",onClick:()=>b(k),children:"Remove"})]},k)),o.jsx(J,{type:"button",variant:"outline",onClick:x,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(J,{type:"submit",disabled:a,children:[o.jsx(XC,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]}),o.jsx(J,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})},Dz=1,Lz=1e6;let Mm=0;function Oz(){return Mm=(Mm+1)%Number.MAX_SAFE_INTEGER,Mm.toString()}const Vm=new Map,Gb=t=>{if(Vm.has(t))return;const e=setTimeout(()=>{Vm.delete(t),Pl({type:"REMOVE_TOAST",toastId:t})},Lz);Vm.set(t,e)},Mz=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Dz)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Gb(n):t.toasts.forEach(r=>{Gb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Xu=[];let Ju={toasts:[]};function Pl(t){Ju=Mz(Ju,t),Xu.forEach(e=>{e(Ju)})}function Vz({...t}){const e=Oz(),n=s=>Pl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Pl({type:"DISMISS_TOAST",toastId:e});return Pl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Fz(){const[t,e]=g.useState(Ju);return g.useEffect(()=>(Xu.push(e),()=>{const n=Xu.indexOf(e);n>-1&&Xu.splice(n,1)}),[t]),{...t,toast:Vz,dismiss:n=>Pl({type:"DISMISS_TOAST",toastId:n})}}var rv="Radio",[Uz,c2]=mi(rv),[Bz,$z]=Uz(rv),u2=g.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:i,disabled:a,value:l="on",onCheck:c,form:d,...h}=t,[f,m]=g.useState(null),_=Je(e,x=>m(x)),C=g.useRef(!1),v=f?d||!!f.closest("form"):!0;return o.jsxs(Bz,{scope:n,checked:s,disabled:a,children:[o.jsx(Re.button,{type:"button",role:"radio","aria-checked":s,"data-state":m2(s),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:_,onClick:Ae(t.onClick,x=>{s||c==null||c(),v&&(C.current=x.isPropagationStopped(),C.current||x.stopPropagation())})}),v&&o.jsx(f2,{control:f,bubbles:!C.current,name:r,value:l,checked:s,required:i,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});u2.displayName=rv;var d2="RadioIndicator",h2=g.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...s}=t,i=$z(d2,n);return o.jsx(Hx,{present:r||i.checked,children:o.jsx(Re.span,{"data-state":m2(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})})});h2.displayName=d2;var zz="RadioBubbleInput",f2=g.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=Je(a,i),c=tv(n),d=Jx(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&_){const C=new Event("click",{bubbles:r});_.call(h,n),h.dispatchEvent(C)}},[c,n,r]),o.jsx(Re.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});f2.displayName=zz;function m2(t){return t?"checked":"unchecked"}var Hz=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mf="RadioGroup",[Wz]=mi(mf,[nf,c2]),p2=nf(),g2=c2(),[qz,Gz]=Wz(mf),y2=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:i,required:a=!1,disabled:l=!1,orientation:c,dir:d,loop:h=!0,onValueChange:f,...m}=t,_=p2(n),C=tf(d),[v,x]=ma({prop:i,defaultProp:s??null,onChange:f,caller:mf});return o.jsx(qz,{scope:n,name:r,required:a,disabled:l,value:v,onValueChange:x,children:o.jsx(yj,{asChild:!0,..._,orientation:c,dir:C,loop:h,children:o.jsx(Re.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":l?"":void 0,dir:C,...m,ref:e})})})});y2.displayName=mf;var x2="RadioGroupItem",v2=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...s}=t,i=Gz(x2,n),a=i.disabled||r,l=p2(n),c=g2(n),d=g.useRef(null),h=Je(e,d),f=i.value===s.value,m=g.useRef(!1);return g.useEffect(()=>{const _=v=>{Hz.includes(v.key)&&(m.current=!0)},C=()=>m.current=!1;return document.addEventListener("keydown",_),document.addEventListener("keyup",C),()=>{document.removeEventListener("keydown",_),document.removeEventListener("keyup",C)}},[]),o.jsx(xj,{asChild:!0,...l,focusable:!a,active:f,children:o.jsx(u2,{disabled:a,required:i.required,checked:f,...c,...s,name:i.name,ref:h,onCheck:()=>i.onValueChange(s.value),onKeyDown:Ae(_=>{_.key==="Enter"&&_.preventDefault()}),onFocus:Ae(s.onFocus,()=>{var _;m.current&&((_=d.current)==null||_.click())})})})});v2.displayName=x2;var Kz="RadioGroupIndicator",w2=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,s=g2(n);return o.jsx(h2,{...s,...r,ref:e})});w2.displayName=Kz;var _2=y2,b2=v2,Qz=w2;const E2=g.forwardRef(({className:t,...e},n)=>o.jsx(_2,{className:Le("grid gap-2",t),...e,ref:n}));E2.displayName=_2.displayName;const Zu=g.forwardRef(({className:t,...e},n)=>o.jsx(b2,{ref:n,className:Le("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:o.jsx(Qz,{className:"flex items-center justify-center",children:o.jsx(SU,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Zu.displayName=b2.displayName;const Yz=({onBack:t,userRole:e,onEventCreated:n})=>{const{toast:r}=Fz(),{user:s}=DC(),[i,a]=g.useState(!1),[l,c]=g.useState({name:"",description:"",startDate:"",endDate:"",participationType:"both",maxIndividuals:100,individualPrice:0,maxTeams:20,teamSize:5,teamPrice:0,requiresParticipantPayment:!1,hostingFee:e==="user"?100:0}),d=v=>{c(x=>({...x,participationType:v}))},h=()=>{const v=new Date;return v.setMinutes(v.getMinutes()-v.getTimezoneOffset()),v.toISOString().slice(0,16)},f=async v=>{if(v.preventDefault(),!s){r({title:"Authentication required",description:"Please log in to create an event",variant:"destructive"});return}a(!0);try{if(!l.name.trim()){r({title:"Event name required",description:"Please enter an event name",variant:"destructive"}),a(!1);return}if(!l.startDate||!l.endDate){r({title:"Dates required",description:"Please select both start and end dates",variant:"destructive"}),a(!1);return}const x=new Date(l.startDate),N=new Date(l.endDate);if(x>=N){r({title:"Invalid dates",description:"End date must be after start date",variant:"destructive"}),a(!1);return}const b={name:l.name.trim(),description:l.description.trim(),startDate:l.startDate,endDate:l.endDate,participationType:l.participationType,maxIndividuals:l.maxIndividuals,individualPrice:l.individualPrice,maxTeams:l.maxTeams,teamSize:l.teamSize,teamPrice:l.teamPrice,requiresParticipantPayment:l.requiresParticipantPayment,hostingFee:l.hostingFee,currency:"ZMW",status:e==="admin"?"approved":"pending",createdBy:e,createdById:s.uid,createdAt:new Date().toISOString(),requiresHostingPayment:e==="user",hostingPaymentStatus:e==="user"?"pending":"not_required",createdByUser:{uid:s.uid,email:s.email||"",name:s.displayName||"Event Creator"},participants:[],totalParticipants:0,totalTeams:0,challenges:[],challengeCount:0},S=await m(b);S&&(r({title:e==="admin"?"Event Scheduled!":"Event Submitted!",description:e==="admin"?"Your event has been successfully scheduled and is now live.":"Your event has been submitted for admin approval. You will be notified once approved."}),n&&n(S.id,S))}catch(x){console.error("Error creating event:",x),r({title:"Error",description:"Failed to schedule event. Please try again.",variant:"destructive"})}finally{a(!1)}},m=async v=>{try{const x=Ve(xt(ge,"events"));return await Ax(x,v),{id:x.id,...v}}catch(x){throw console.error("Firestore error:",x),x.code==="permission-denied"?new Error("Permission denied. Check your Firestore security rules."):x.code==="invalid-argument"?new Error("Invalid data format. Please check all field values."):new Error(`Firestore error: ${x.message}`)}},_=(v,x)=>{const N=x===""?0:parseInt(x)||0;c(b=>({...b,[v]:N}))},C=(v,x)=>{const N=x===""?0:parseFloat(x)||0;c(b=>({...b,[v]:N}))};return o.jsxs(re,{className:"w-full max-w-2xl mx-auto",children:[o.jsx(Pe,{className:"px-4 sm:px-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[o.jsxs("div",{children:[o.jsx(De,{className:"text-xl sm:text-2xl",children:"Schedule New Event"}),o.jsx(Wt,{className:"text-sm sm:text-base",children:e==="admin"?"Create and schedule events instantly":"Submit events for hosting - hosting fee required"})]}),o.jsx(ve,{variant:e==="admin"?"default":"secondary",className:"self-start",children:e==="admin"?"Admin":"Event Host"})]})}),o.jsx(se,{className:"px-4 sm:px-6",children:o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Event Information"}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"name",className:"text-sm sm:text-base",children:"Event Name *"}),o.jsx(he,{id:"name",value:l.name,onChange:v=>c({...l,name:v.target.value}),placeholder:"Enter event name",required:!0,className:"mt-1",disabled:i})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"description",className:"text-sm sm:text-base",children:"Event Description"}),o.jsx(Ia,{id:"description",value:l.description,onChange:v=>c({...l,description:v.target.value}),placeholder:"Describe the event, rules, and objectives...",rows:4,className:"mt-1",disabled:i})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"startDate",className:"text-sm sm:text-base",children:"Start Date & Time *"}),o.jsx(he,{id:"startDate",type:"datetime-local",value:l.startDate,onChange:v=>c({...l,startDate:v.target.value}),min:h(),required:!0,className:"mt-1",disabled:i})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"endDate",className:"text-sm sm:text-base",children:"End Date & Time *"}),o.jsx(he,{id:"endDate",type:"datetime-local",value:l.endDate,onChange:v=>c({...l,endDate:v.target.value}),min:l.startDate||h(),required:!0,className:"mt-1",disabled:i})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Participation Settings"}),o.jsxs("div",{children:[o.jsx(K,{className:"mb-3 block text-sm sm:text-base",children:"Participation Type"}),o.jsxs(E2,{value:l.participationType,onValueChange:d,className:"flex flex-col space-y-3",disabled:i,children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Zu,{value:"individual",id:"individual"}),o.jsx(K,{htmlFor:"individual",className:"text-sm sm:text-base",children:"Individual Participation Only"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Zu,{value:"team",id:"team"}),o.jsx(K,{htmlFor:"team",className:"text-sm sm:text-base",children:"Team Participation Only"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Zu,{value:"both",id:"both"}),o.jsx(K,{htmlFor:"both",className:"text-sm sm:text-base",children:"Both Individual and Team"})]})]})]}),(l.participationType==="individual"||l.participationType==="both")&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pl-4 sm:pl-6 border-l-2 border-blue-200",children:[o.jsx("div",{className:"sm:col-span-2",children:o.jsx(K,{className:"font-semibold text-sm sm:text-base",children:"Individual Participation"})}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"maxIndividuals",className:"text-sm sm:text-base",children:"Max Individuals"}),o.jsx(he,{id:"maxIndividuals",type:"number",value:l.maxIndividuals===void 0?"":l.maxIndividuals,onChange:v=>_("maxIndividuals",v.target.value),min:"0",placeholder:"0 for unlimited",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for unlimited participants"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"individualPrice",className:"text-sm sm:text-base",children:"Individual Fee (ZMW)"}),o.jsx(he,{id:"individualPrice",type:"number",value:l.individualPrice,onChange:v=>C("individualPrice",v.target.value),min:"0",step:"1",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for free participation"})]})]}),(l.participationType==="team"||l.participationType==="both")&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 pl-4 sm:pl-6 border-l-2 border-green-200",children:[o.jsx("div",{className:"sm:col-span-3",children:o.jsx(K,{className:"font-semibold text-sm sm:text-base",children:"Team Participation"})}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"maxTeams",className:"text-sm sm:text-base",children:"Max Teams"}),o.jsx(he,{id:"maxTeams",type:"number",value:l.maxTeams===void 0?"":l.maxTeams,onChange:v=>_("maxTeams",v.target.value),min:"0",placeholder:"0 for unlimited",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for unlimited teams"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"teamSize",className:"text-sm sm:text-base",children:"Team Size"}),o.jsx(he,{id:"teamSize",type:"number",value:l.teamSize,onChange:v=>_("teamSize",v.target.value),min:"1",className:"mt-1",disabled:i})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"teamPrice",className:"text-sm sm:text-base",children:"Team Fee (ZMW)"}),o.jsx(he,{id:"teamPrice",type:"number",value:l.teamPrice,onChange:v=>C("teamPrice",v.target.value),min:"0",step:"1",className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for free participation"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Payment Settings"}),e==="user"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"hostingFee",className:"text-sm sm:text-base",children:"Hosting Fee (ZMW) *"}),o.jsx(he,{id:"hostingFee",type:"number",value:l.hostingFee,onChange:v=>C("hostingFee",v.target.value),min:"1",step:"1",required:!0,className:"mt-1",disabled:i}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Fee paid to admin for event hosting via Mobile Money"})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("div",{className:"flex items-start space-x-2 text-blue-800",children:[o.jsx("span",{className:"mt-0.5",children:""}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-medium",children:["Hosting Fee: ",l.hostingFee," ZMW"]}),o.jsx("p",{className:"text-xs",children:"You'll pay this fee to the admin via Mobile Money (Flutterwave) to host your event"})]})]})})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"requiresParticipantPayment",checked:l.requiresParticipantPayment,onChange:v=>c({...l,requiresParticipantPayment:v.target.checked}),className:"rounded",disabled:i}),o.jsx(K,{htmlFor:"requiresParticipantPayment",className:"font-semibold text-sm sm:text-base",children:"Require participants to pay registration fees"})]}),l.requiresParticipantPayment&&o.jsxs("div",{className:"pl-6",children:[o.jsx(ve,{variant:"outline",className:"bg-green-50 text-green-700 text-xs",children:" Participant payments will be collected via Flutterwave"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Participants will pay registration fees directly to you when they register"})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[o.jsx(J,{type:"submit",disabled:i,className:"flex-1 order-2 sm:order-1",children:i?"Processing...":e==="admin"?"Create Event & Add Challenges":"Submit Event"}),o.jsx(J,{type:"button",variant:"outline",onClick:t,className:"order-1 sm:order-2",disabled:i,children:"Cancel"})]})]})})]})},Xz=({onBack:t})=>{const e=[{id:"1",user:"john_doe",challenge:"SQL Injection Master",submittedAt:"2024-01-15",status:"pending",content:"This is a mock write-up content...",rating:0},{id:"2",user:"jane_smith",challenge:"Crypto Challenge 1",submittedAt:"2024-01-14",status:"approved",content:"Another mock write-up...",rating:4}],n=i=>{console.log("Approving writeup:",i),alert(`Write-up ${i} approved!`)},r=i=>{console.log("Rejecting writeup:",i),alert(`Write-up ${i} rejected!`)},s=i=>{switch(i){case"pending":return o.jsx(ve,{variant:"secondary",children:"Pending"});case"approved":return o.jsx(ve,{variant:"default",children:"Approved"});case"rejected":return o.jsx(ve,{variant:"destructive",children:"Rejected"});default:return o.jsx(ve,{variant:"secondary",children:i})}};return o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Review Write-ups"}),o.jsxs(Wt,{children:["Review and approve user write-ups for challenges (",e.length," total)"]})]}),o.jsx(se,{children:o.jsxs("div",{className:"space-y-6",children:[e.map(i=>o.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:i.challenge}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by ",i.user," on ",i.submittedAt]})]}),s(i.status)]}),o.jsxs("div",{children:[o.jsx(K,{children:"Write-up Content"}),o.jsx("div",{className:"mt-1 p-3 border rounded bg-muted/50",children:i.content})]}),i.status==="pending"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(K,{htmlFor:`feedback-${i.id}`,children:"Feedback (Optional)"}),o.jsx(Ia,{id:`feedback-${i.id}`,placeholder:"Provide feedback for the user...",rows:3}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(J,{onClick:()=>n(i.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),o.jsx(J,{variant:"outline",onClick:()=>r(i.id),children:"Request Changes"}),o.jsx(J,{variant:"destructive",onClick:()=>r(i.id),children:"Reject"})]})]}),i.status!=="pending"&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Write-up has been ",i.status,". ",i.rating>0&&`Rating: ${i.rating}/5`]})]},i.id)),e.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No write-ups to review at this time."})]})})]})},Jz=({onBack:t})=>{const e={totalUsers:150,activeUsers:47,totalChallenges:25,solvedChallenges:189,averageSolveTime:"2h 15m",popularCategory:"Web Security"},n=[{title:"Total Users",value:e.totalUsers,description:"Registered users",icon:jt,color:"text-blue-600"},{title:"Active Users (30d)",value:e.activeUsers,description:"Recently active users",icon:jt,color:"text-green-600"},{title:"Total Challenges",value:e.totalChallenges,description:"Available challenges",icon:lt,color:"text-purple-600"},{title:"Challenge Solves",value:e.solvedChallenges,description:"Total solutions submitted",icon:ks,color:"text-orange-600"},{title:"Avg Solve Time",value:e.averageSolveTime,description:"Average time to solve challenges",icon:ei,color:"text-red-600"},{title:"Popular Category",value:e.popularCategory,description:"Most solved category",icon:qC,color:"text-indigo-600"}];return o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Platform Analytics"}),o.jsx(Wt,{children:"Comprehensive overview of platform performance and user engagement"})]}),o.jsxs(se,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:n.map((r,s)=>o.jsx(re,{children:o.jsx(se,{className:"pt-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r.title}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),o.jsx("div",{className:`p-3 rounded-full bg-muted ${r.color}`,children:o.jsx(r.icon,{className:"w-6 h-6"})})]})})},s))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{className:"text-lg",children:"User Growth"}),o.jsx(Wt,{children:"Last 30 days"})]}),o.jsx(se,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"User growth chart will be displayed here"})})]}),o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{className:"text-lg",children:"Challenge Performance"}),o.jsx(Wt,{children:"Solve rates by category"})]}),o.jsx(se,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Challenge performance chart will be displayed here"})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(J,{variant:"outline",onClick:t,children:"Back to Dashboard"}),o.jsx(J,{children:"Export Analytics"})]})]})]})},Zz=({onBack:t})=>{const[e,n]=g.useState({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1}),[r,s]=g.useState(!1),i=async()=>{s(!0),setTimeout(()=>{alert("Settings saved successfully!"),s(!1)},1e3)},a=()=>{confirm("Are you sure you want to reset all settings to default?")&&n({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1})},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"General Settings"}),o.jsx(Wt,{children:"Basic platform configuration"})]}),o.jsxs(se,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"siteName",children:"Site Name"}),o.jsx(he,{id:"siteName",value:e.siteName,onChange:c=>l("siteName",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"siteDescription",children:"Site Description"}),o.jsx(Ia,{id:"siteDescription",value:e.siteDescription,onChange:c=>l("siteDescription",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"contactEmail",children:"Contact Email"}),o.jsx(he,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:c=>l("contactEmail",c.target.value)})]})]})]}),o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Security Settings"}),o.jsx(Wt,{children:"Authentication and security configuration"})]}),o.jsxs(se,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"requireEmailVerification",children:"Require Email Verification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must verify their email address before accessing the platform"})]}),o.jsx(Pt,{id:"requireEmailVerification",checked:e.requireEmailVerification,onCheckedChange:c=>l("requireEmailVerification",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"allowRegistrations",children:"Allow New Registrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register on the platform"})]}),o.jsx(Pt,{id:"allowRegistrations",checked:e.allowRegistrations,onCheckedChange:c=>l("allowRegistrations",c)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),o.jsx(he,{id:"maxLoginAttempts",type:"number",value:e.maxLoginAttempts,onChange:c=>l("maxLoginAttempts",parseInt(c.target.value)),min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),o.jsx(he,{id:"sessionTimeout",type:"number",value:e.sessionTimeout,onChange:c=>l("sessionTimeout",parseInt(c.target.value)),min:"1",max:"720"})]})]})]})]}),o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Challenge Settings"}),o.jsx(Wt,{children:"Challenge and write-up configuration"})]}),o.jsxs(se,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"defaultPoints",children:"Default Points for New Challenges"}),o.jsx(he,{id:"defaultPoints",type:"number",value:e.defaultPoints,onChange:c=>l("defaultPoints",parseInt(c.target.value)),min:"1"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"allowWriteups",children:"Allow Write-ups"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users can submit write-ups for challenges"})]}),o.jsx(Pt,{id:"allowWriteups",checked:e.allowWriteups,onCheckedChange:c=>l("allowWriteups",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"writeupRequired",children:"Write-ups Required"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must submit a write-up to get points"})]}),o.jsx(Pt,{id:"writeupRequired",checked:e.writeupRequired,onCheckedChange:c=>l("writeupRequired",c),disabled:!e.allowWriteups})]})]})]}),o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Maintenance Mode"}),o.jsx(Wt,{children:"Take the platform offline for maintenance"})]}),o.jsxs(se,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform will be unavailable to regular users"})]}),o.jsx(Pt,{id:"maintenanceMode",checked:e.maintenanceMode,onCheckedChange:c=>l("maintenanceMode",c)})]}),e.maintenanceMode&&o.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-yellow-800",children:" Maintenance mode is enabled. Only administrators can access the platform."})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(J,{onClick:i,disabled:r,children:r?"Saving...":"Save Settings"}),o.jsx(J,{variant:"outline",onClick:a,children:"Reset to Defaults"}),o.jsx(J,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]})},e7=()=>{const{isAdmin:t,isModerator:e}=Zh(),n=yn(),[r,s]=g.useState("overview"),[i,a]=g.useState(null),[l,c]=g.useState(null),d=(m,_)=>{c({id:m,..._}),s("challenge-management"),console.log("Event created, redirecting to challenge management:",_)};if(!t&&!e)return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen",children:o.jsx("div",{className:"container px-4 mx-auto text-center",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(lt,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have permission to access the admin dashboard."}),o.jsx(J,{onClick:()=>n("/dashboard"),children:"Return to Dashboard"})]})})}),o.jsx(tt,{})]});const h=()=>{switch(r){case"users":return o.jsx(h8,{onBack:()=>s("overview")});case"challenge-management":return o.jsx(Rz,{onBack:()=>s("overview"),onCreateNew:()=>s("create-challenge"),onEditChallenge:m=>{a(m),s("edit-challenge")}});case"create-challenge":return o.jsx(kz,{onBack:()=>s("challenge-management")});case"edit-challenge":return o.jsx(Pz,{challengeId:i.id,onBack:()=>s("challenge-management"),onSave:()=>s("challenge-management")});case"schedule-event":return o.jsx(Yz,{onBack:()=>s("overview"),userRole:t?"admin":"user",onEventCreated:d});case"review-writeups":return o.jsx(Xz,{onBack:()=>s("overview")});case"analytics":return o.jsx(Jz,{onBack:()=>s("overview")});case"settings":return o.jsx(Zz,{onBack:()=>s("overview")});default:return f()}},f=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(re,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(jt,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),o.jsxs(re,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Active Challenges"}),o.jsx(lt,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No challenges yet"})]})]}),o.jsxs(re,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Live Events"}),o.jsx(zr,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No events yet"})]})]}),o.jsxs(re,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Pending Write-ups"}),o.jsx(uc,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(se,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No write-ups yet"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Content Management"}),o.jsx(Wt,{children:"Create and manage platform content"})]}),o.jsxs(se,{className:"space-y-4",children:[o.jsxs(J,{className:"w-full justify-start gap-2",onClick:()=>s("create-challenge"),children:[o.jsx(ti,{className:"w-4 h-4"}),"Create New Challenge"]}),o.jsxs(J,{className:"w-full justify-start gap-2",onClick:()=>s("challenge-management"),children:[o.jsx(dg,{className:"w-4 h-4"}),"Manage Challenges"]}),o.jsxs(J,{className:"w-full justify-start gap-2",onClick:()=>s("schedule-event"),children:[o.jsx(ti,{className:"w-4 h-4"}),"Schedule New Event"]}),o.jsxs(J,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("review-writeups"),children:[o.jsx(uc,{className:"w-4 h-4"}),"Review Write-ups"]})]})]}),o.jsxs(re,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"User Management"}),o.jsx(Wt,{children:"Manage users and permissions"})]}),o.jsxs(se,{className:"space-y-4",children:[o.jsxs(J,{className:"w-full justify-start gap-2",onClick:()=>s("users"),children:[o.jsx(jt,{className:"w-4 h-4"}),"View All Users"]}),t&&o.jsxs(J,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("analytics"),children:[o.jsx(qC,{className:"w-4 h-4"}),"Platform Analytics"]}),o.jsxs(J,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("settings"),children:[o.jsx(JC,{className:"w-4 h-4"}),"System Settings"]})]})]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:r==="overview"?"Admin Dashboard":r==="users"?"User Management":r==="challenge-management"?"Challenge Management":r==="create-challenge"?"Create Challenge":r==="edit-challenge"?"Edit Challenge":r==="schedule-event"?"Schedule Event":r==="review-writeups"?"Review Write-ups":r==="analytics"?"Platform Analytics":r==="settings"?"System Settings":"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:r==="overview"?"Manage your CTF platform, users, challenges, and events":r==="challenge-management"?"Create new challenges or add existing ones to your events":"Admin management panel"})]}),r!=="overview"&&o.jsx(J,{variant:"outline",onClick:()=>{s(r==="create-challenge"||r==="edit-challenge"?"challenge-management":"overview")},children:r==="create-challenge"||r==="edit-challenge"?"Back to Challenges":"Back to Dashboard"})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${t?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t?"Administrator":"Moderator"}),l&&r==="challenge-management"&&o.jsxs("div",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:["Event: ",l.name]})]})]}),h()]})}),o.jsx(tt,{})]})},t7=()=>{var q,B,$,O,W,Y,M,G,ce,pe;const{challengeId:t}=fN(),e=yn(),{user:n}=Ln(),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(!1),[d,h]=g.useState(""),[f,m]=g.useState(null),[_,C]=g.useState([]),[v,x]=g.useState([]),[N,b]=g.useState("description");g.useEffect(()=>{if(t){S(),D();const Z=Ve(ge,"challenges",t),ne=Rx(Z,X=>{if(X.exists()){const de={id:X.id,...X.data()};s(de)}});return()=>ne()}},[t]);const S=async()=>{try{a(!0),console.log(" Fetching challenge:",t);const Z=await Zs(Ve(ge,"challenges",t));if(Z.exists()){const ne={id:Z.id,...Z.data()};console.log(" Challenge found:",ne),s(ne),ne.hints&&C(new Array(ne.hints.length).fill(!1))}else console.log(" Challenge not found in Firestore"),m({type:"error",text:"Challenge not found"})}catch(Z){console.error(" Error fetching challenge:",Z),m({type:"error",text:"Failed to load challenge"})}finally{a(!1)}},D=async()=>{if(!(!n||!t))try{const Z=jn(xt(ge,"submissions"),_n("challengeId","==",t),_n("userId","==",n.uid),Yi("submittedAt","desc")),X=(await In(Z)).docs.map(de=>({id:de.id,...de.data()}));x(X)}catch(Z){console.error("Error fetching submissions:",Z)}},L=async(Z,ne)=>{try{const X=jn(xt(ge,"submissions"),_n("challengeId","==",ne),_n("userId","==",Z),_n("isCorrect","==",!0),_n("pointsAwarded",">",0));return!(await In(X)).empty}catch(X){return console.error("Error checking user solve status:",X),!1}},R=async()=>{var Z,ne;if(!(!r||!n||!d.trim())){c(!0),m(null);try{let X=!1;r.hasMultipleQuestions&&r.questions?X=!!r.questions.find(je=>je.flag&&je.flag.trim()===d.trim()):X=((Z=r.flag)==null?void 0:Z.trim())===d.trim();const de=await L(n.uid,r.id);let Me=0;X&&!de&&(Me=r.points||0);const Ce={challengeId:r.id,challengeTitle:r.title,userId:n.uid,userName:n.displayName||n.email,flag:d,isCorrect:X,submittedAt:new Date,pointsAwarded:Me};await kx(xt(ge,"submissions"),Ce),X?((ne=r.solvedBy)!=null&&ne.includes(n.uid)||await dn(Ve(ge,"challenges",r.id),{solvedBy:ag(n.uid)}),Me>0&&await dn(Ve(ge,"users",n.uid),{totalPoints:mC(Me),challengesSolved:ag(r.id)}),m({type:"success",text:Me>0?`Congratulations! Flag is correct! +${Me} points awarded!`:"Congratulations! Flag is correct! (No additional points - already solved)"}),h(""),D()):m({type:"error",text:"Incorrect flag. Please try again."})}catch(X){console.error("Error submitting flag:",X),m({type:"error",text:"Failed to submit flag. Please try again."})}finally{c(!1)}}},T=Z=>{const ne=[..._];ne[Z]=!ne[Z],C(ne)},y=()=>{e("/practice")},I=Z=>{navigator.clipboard.writeText(Z)},w=(q=r==null?void 0:r.solvedBy)==null?void 0:q.includes((n==null?void 0:n.uid)||""),k=()=>{if(!r.description)return null;const Z=r.description.split(`
`),ne=[];for(let X=0;X<Z.length;X++){const de=Z[X].trim();if(de.startsWith("n =")||de.startsWith("e =")||de.startsWith("c =")){const[Me,...Ce]=de.split("="),Ee=Ce.join("=").trim();ne.push(o.jsxs("div",{className:"mb-3 p-3 bg-muted/30 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"font-mono font-semibold text-xs",children:[Me,"="]}),o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>I(Ee),className:"h-6 px-2",children:o.jsx(mb,{className:"w-3 h-3"})})]}),o.jsx("div",{className:"font-mono text-xs bg-background p-2 rounded border break-all overflow-x-auto",children:o.jsx("pre",{className:"whitespace-pre-wrap break-words m-0",children:Ee})})]},X))}else if(de.includes("=")&&de.length>50){const[Me,...Ce]=de.split("="),Ee=Ce.join("=").trim();ne.push(o.jsxs("div",{className:"mb-2",children:[o.jsxs("strong",{className:"text-sm",children:[Me,"="]}),o.jsx("div",{className:"font-mono text-xs bg-muted/30 p-2 rounded border break-all overflow-x-auto mt-1",children:o.jsx("pre",{className:"whitespace-pre-wrap break-words m-0",children:Ee})})]},X))}else de?ne.push(o.jsx("p",{className:"mb-2 text-sm leading-relaxed break-words",children:de},X)):ne.push(o.jsx("div",{className:"mb-2"},X))}return ne},j=v.some(Z=>Z.isCorrect&&Z.pointsAwarded&&Z.pointsAwarded>0);if(i)return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading challenge..."})]})})}),o.jsx(tt,{})]});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx(re,{className:"max-w-md mx-auto border",children:o.jsxs(se,{className:"p-6 text-center",children:[o.jsx(lt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("h2",{className:"text-lg font-bold mb-2",children:"Challenge Not Found"}),o.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"The challenge you're looking for doesn't exist or you don't have permission to view it."}),o.jsxs(J,{onClick:y,variant:"terminal",size:"sm",children:[o.jsx(Kd,{className:"w-3 h-3 mr-1"}),"Back to Practice"]})]})})})}),o.jsx(tt,{})]});const A=Z=>{switch(Z){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},F=Z=>({web:"bg-blue-500/20 text-blue-600 border-blue-200",crypto:"bg-purple-500/20 text-purple-600 border-purple-200",forensics:"bg-orange-500/20 text-orange-600 border-orange-200",pwn:"bg-red-500/20 text-red-600 border-red-200",reversing:"bg-indigo-500/20 text-indigo-600 border-indigo-200",misc:"bg-gray-500/20 text-gray-600 border-gray-200"})[Z]||"bg-gray-500/20 text-gray-600 border-gray-200";return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(J,{variant:"ghost",onClick:y,size:"sm",className:"h-8 px-2 sm:px-3 -ml-2",children:[o.jsx(Kd,{className:"w-3 h-3 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Practice"}),o.jsx("span",{className:"sm:hidden",children:"Back"})]}),o.jsx("h1",{className:"text-lg sm:text-xl font-bold truncate",children:r.title})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[w&&o.jsxs(ve,{className:"bg-green-500/20 text-green-600 border-green-200 text-xs",children:[o.jsx(er,{className:"w-3 h-3 mr-1"}),j?"Solved + Points":"Solved"]}),r.featuredOnPractice&&o.jsxs(ve,{className:"bg-yellow-500/20 text-yellow-600 border-yellow-200 text-xs",children:[o.jsx(Bx,{className:"w-3 h-3 mr-1"}),"Featured"]})]})]}),o.jsx(re,{className:"mb-4 border",children:o.jsxs(se,{className:"p-3 sm:p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[o.jsx(ve,{className:`${A(r.difficulty)} text-xs`,children:r.difficulty}),o.jsx(ve,{className:`${F(r.finalCategory||r.category)} text-xs`,children:r.finalCategory||r.category}),o.jsxs(ve,{variant:"outline",className:"font-mono font-semibold text-xs",children:[r.totalPoints||r.points," pts"]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(jt,{className:"w-3 h-3"}),o.jsxs("span",{children:[((B=r.solvedBy)==null?void 0:B.length)||0," solves"]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(ei,{className:"w-3 h-3"}),o.jsx("span",{className:"hidden sm:inline",children:((W=(O=($=r.createdAt)==null?void 0:$.toDate)==null?void 0:O.call($))==null?void 0:W.toLocaleDateString())||new Date(r.createdAt).toLocaleDateString()}),o.jsx("span",{className:"sm:hidden",children:((G=(M=(Y=r.createdAt)==null?void 0:Y.toDate)==null?void 0:M.call(Y))==null?void 0:G.toLocaleDateString("en-US",{month:"short",day:"numeric"}))||new Date(r.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-2 text-xs text-muted-foreground",children:[o.jsxs("div",{children:["By: ",r.createdByName||"Unknown"]}),r.originalCreator&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{children:"Original: "}),r.originalCreator.url?o.jsxs("a",{href:r.originalCreator.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:[r.originalCreator.name,o.jsx(Yd,{className:"w-3 h-3"})]}):o.jsx("span",{children:r.originalCreator.name})]})]})]})}),o.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide mb-4 bg-muted/30 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>b("description"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${N==="description"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Description"}),o.jsxs("button",{onClick:()=>b("hints"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${N==="hints"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Hints (",((ce=r.hints)==null?void 0:ce.length)||0,")"]}),o.jsxs("button",{onClick:()=>b("files"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${N==="files"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Files (",((pe=r.files)==null?void 0:pe.length)||0,")"]})]}),o.jsxs("div",{className:"space-y-4",children:[N==="description"&&o.jsx(re,{className:"border",children:o.jsx(se,{className:"p-4 sm:p-6",children:o.jsx("div",{className:"space-y-3",children:r.hasMultipleQuestions&&r.questions?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),r.questions.map((Z,ne)=>{var X;return o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("h4",{className:"font-semibold text-sm mb-1",children:["Question ",ne+1]}),o.jsx("p",{className:"mb-2 text-xs text-muted-foreground break-words",children:Z.question}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"font-mono font-semibold",children:[Z.points," points"]}),((X=r.solvedBy)==null?void 0:X.includes((n==null?void 0:n.uid)||""))&&o.jsxs(ve,{variant:"outline",className:"font-mono text-xs",children:["Flag: ",Z.flag]})]})]},Z.id)})]}):o.jsxs("div",{className:"space-y-3 break-words",children:[k(),r.flagFormat&&o.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-200 rounded text-xs",children:o.jsxs("p",{className:"text-blue-600 break-words",children:[o.jsx("strong",{children:"Flag Format:"})," ",r.flagFormat]})}),w&&r.flag&&o.jsx("div",{className:"p-3 bg-green-500/10 border border-green-200 rounded break-words",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("p",{className:"text-xs text-green-600 font-mono break-all flex-1",children:[o.jsx("strong",{children:"Flag:"})," ",r.flag]}),o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>I(r.flag),className:"h-6 px-2 flex-shrink-0",children:o.jsx(mb,{className:"w-3 h-3"})})]})})]})})})}),N==="hints"&&o.jsx(re,{className:"border",children:o.jsx(se,{className:"p-4 sm:p-6",children:r.hints&&r.hints.length>0?o.jsx("div",{className:"space-y-3",children:r.hints.map((Z,ne)=>o.jsx(re,{className:"border",children:o.jsx(se,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(LU,{className:"w-3 h-3 text-primary"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold text-sm",children:["Hint ",ne+1]}),o.jsx(J,{variant:"ghost",size:"sm",onClick:()=>T(ne),className:"h-6 px-2 text-xs",children:_[ne]?"Hide":"Reveal"})]}),_[ne]&&o.jsx("p",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded border break-words",children:Z})]})]})})},ne))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No hints available."})})})}),N==="files"&&o.jsx(re,{className:"border",children:o.jsx(se,{className:"p-4 sm:p-6",children:r.files&&r.files.length>0?o.jsx("div",{className:"space-y-2",children:r.files.map((Z,ne)=>o.jsxs("a",{href:Z.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 text-sm border rounded hover:bg-accent transition-colors",children:[Z.type==="file"?o.jsx(uc,{className:"w-4 h-4"}):o.jsx(da,{className:"w-4 h-4"}),o.jsx("span",{className:"flex-1 truncate",children:Z.name}),o.jsx(Yd,{className:"w-3 h-3"})]},ne))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files or links available."})})})})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(re,{className:"border lg:sticky lg:top-4",children:[o.jsx(Pe,{className:"p-4 pb-2",children:o.jsxs(De,{className:"flex items-center gap-2 text-base",children:[o.jsx(QC,{className:"w-4 h-4"}),"Submit Flag"]})}),o.jsxs(se,{className:"p-4 pt-2 space-y-3",children:[f&&o.jsxs(kc,{className:`text-sm ${f.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200"}`,children:[f.type==="success"?o.jsx(er,{className:"w-4 h-4 text-green-600"}):o.jsx(Ji,{className:"w-4 h-4 text-red-600"}),o.jsx(Rc,{className:f.type==="success"?"text-green-600":"text-red-600",children:f.text})]}),w?o.jsxs("div",{className:"text-center p-3 bg-green-500/10 border border-green-200 rounded",children:[o.jsx(er,{className:"w-8 h-8 text-green-600 mx-auto mb-1"}),o.jsx("p",{className:"text-green-600 font-semibold text-sm",children:"Challenge Solved!"}),o.jsx("p",{className:"text-green-600 text-xs mt-1",children:j?`+${r.totalPoints||r.points} points awarded`:"Already solved - no additional points"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{htmlFor:"flag",className:"text-xs font-medium",children:"Enter Flag"}),o.jsx(he,{id:"flag",placeholder:"CTF{...} or flag content",value:d,onChange:Z=>h(Z.target.value),onKeyPress:Z=>Z.key==="Enter"&&R(),className:"font-mono text-sm h-9"})]}),o.jsx(J,{onClick:R,disabled:l||!d.trim(),className:"w-full h-9",variant:"terminal",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-2"}),"Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(lt,{className:"w-3 h-3 mr-1"}),"Submit Flag"]})})]})]})]}),v.length>0&&o.jsxs(re,{className:"border",children:[o.jsx(Pe,{className:"p-4 pb-2",children:o.jsx(De,{className:"text-base",children:"Submission History"})}),o.jsx(se,{className:"p-4 pt-2",children:o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:v.map(Z=>{var ne,X,de;return o.jsxs("div",{className:"flex items-center justify-between p-2 border rounded text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[Z.isCorrect?o.jsx(er,{className:"w-3 h-3 text-green-600 flex-shrink-0"}):o.jsx(Ji,{className:"w-3 h-3 text-red-600 flex-shrink-0"}),o.jsx("code",{className:"truncate font-mono text-xs",children:Z.flag}),Z.pointsAwarded&&Z.pointsAwarded>0&&o.jsxs(ve,{variant:"outline",className:"ml-1 text-xs bg-green-500/10 text-green-600",children:["+",Z.pointsAwarded]})]}),o.jsx("span",{className:"text-muted-foreground flex-shrink-0 ml-1 text-xs",children:((de=(X=(ne=Z.submittedAt)==null?void 0:ne.toDate)==null?void 0:X.call(ne))==null?void 0:de.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||new Date(Z.submittedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Z.id)})})})]})]})]})]})}),o.jsx(tt,{})]})},n7=()=>{const{eventId:t}=fN(),e=yn(),{user:n}=Ln(),[r,s]=g.useState(null),[i,a]=g.useState([]),[l,c]=g.useState(!0),[d,h]=g.useState(!1),[f,m]=g.useState(null),[_,C]=g.useState(!1);g.useEffect(()=>{if(!t){console.log(" No eventId in URL parameters"),m({type:"error",text:"Invalid event URL"}),c(!1);return}console.log(" Loading event:",t),(async()=>{await v(),await x()})();const O=Ve(ge,"events",t),W=Rx(O,Y=>{var M,G;if(Y.exists()){const ce={id:Y.id,...Y.data()};if(console.log(" Real-time update:",ce),s(ce),n){const pe=((M=ce.participants)==null?void 0:M.includes(n.uid))||((G=ce.registeredUsers)==null?void 0:G.includes(n.uid));C(!!pe)}}},Y=>{console.error(" Real-time listener error:",Y)});return()=>W()},[t,n]);const v=async()=>{var $,O;try{c(!0),console.log(" Fetching event data for:",t);const W=Ve(ge,"events",t),Y=await Zs(W);if(Y.exists()){const M={id:Y.id,...Y.data()};if(console.log(" Event found:",M),s(M),n){const G=(($=M.participants)==null?void 0:$.includes(n.uid))||((O=M.registeredUsers)==null?void 0:O.includes(n.uid));C(!!G),console.log(" User registration status:",G)}}else console.log(" Event not found in Firestore"),m({type:"error",text:"Event not found"})}catch(W){console.error(" Error fetching event:",W),m({type:"error",text:`Failed to load event: ${W.message}`})}finally{c(!1)}},x=async()=>{if(t)try{console.log(" Fetching challenges for event:",t);const $=jn(xt(ge,"challenges"),_n("eventId","==",t),_n("isActive","==",!0),Yi("points","asc")),O=await In($),W=[];O.forEach(Y=>{const M=Y.data();W.push({id:Y.id,title:M.title,description:M.description,category:M.category,points:M.points,difficulty:M.difficulty,solvedBy:M.solvedBy,isActive:M.isActive,eventId:M.eventId})}),console.log(" Challenges fetched:",W.length),a(W)}catch($){console.error(" Error fetching challenges:",$),a([])}},N=$=>{try{const O=new Date($);return isNaN(O.getTime())?"Invalid date":O.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}},b=$=>{try{const O=new Date($);return isNaN(O.getTime())?"Invalid time":O.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch{return"Invalid time"}},S=($,O)=>{try{const W=new Date,Y=new Date($),M=new Date(O);return isNaN(Y.getTime())||isNaN(M.getTime())||W<Y?"UPCOMING":W>M?"ENDED":"LIVE"}catch{return"UPCOMING"}},D=async()=>{var $,O;if(!n||!r){alert("Please log in to register for events"),e("/login");return}h(!0),m(null);try{if((($=r.participants)==null?void 0:$.includes(n.uid))||((O=r.registeredUsers)==null?void 0:O.includes(n.uid))){m({type:"error",text:"You are already registered for this event."}),C(!0);return}console.log(" Attempting registration for user:",n.uid);const Y=Ve(ge,"events",r.id);await dn(Y,{participants:ag(n.uid),totalParticipants:mC(1)}),console.log(" Registration successful"),C(!0),m({type:"success",text:"Successfully registered for the event!"})}catch(W){console.error(" Error registering for event:",W),m({type:"error",text:`Failed to register: ${W.message}. Please try again.`})}finally{h(!1)}},L=()=>{if(!r)return;if(!_){m({type:"error",text:"You need to register for this event first."});return}if(S(r.startDate,r.endDate)!=="LIVE"){m({type:"error",text:"This event is not currently live."});return}e(`/competition/${r.id}`)},R=()=>{e("/events")},T=$=>{switch($.toLowerCase()){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},y=$=>({web:"bg-blue-500/20 text-blue-600 border-blue-200",crypto:"bg-purple-500/20 text-purple-600 border-purple-200",forensics:"bg-orange-500/20 text-orange-600 border-orange-200",pwn:"bg-red-500/20 text-red-600 border-red-200",reversing:"bg-indigo-500/20 text-indigo-600 border-indigo-200",misc:"bg-gray-500/20 text-gray-600 border-gray-200"})[$.toLowerCase()]||"bg-gray-500/20 text-gray-600 border-gray-200",I=$=>$.participants&&Array.isArray($.participants)?$.participants.length:$.registeredUsers&&Array.isArray($.registeredUsers)?$.registeredUsers.length:$.totalParticipants||0,w=$=>$.currency||"ZMW";if(l)return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading event details..."}),o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Event ID: ",t]})]})})}),o.jsx(tt,{})]});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx(re,{className:"max-w-md mx-auto border",children:o.jsxs(se,{className:"p-6 text-center",children:[o.jsx(zr,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("h2",{className:"text-lg font-bold mb-2",children:"Event Not Found"}),o.jsxs("p",{className:"text-muted-foreground text-sm mb-2",children:["Event ID: ",t]}),o.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"The event doesn't exist or you don't have permission to view it."}),o.jsxs(J,{onClick:R,variant:"terminal",size:"sm",children:[o.jsx(Kd,{className:"w-3 h-3 mr-1"}),"Back to Events"]})]})})})}),o.jsx(tt,{})]});const k=S(r.startDate,r.endDate),j=k==="LIVE",A=k==="ENDED",F=k==="UPCOMING",q=I(r),B=w(r);return o.jsxs(o.Fragment,{children:[o.jsx(Xe,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(J,{variant:"ghost",onClick:R,size:"sm",className:"h-8 px-2 sm:px-3 -ml-2",children:[o.jsx(Kd,{className:"w-3 h-3 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Events"}),o.jsx("span",{className:"sm:hidden",children:"Back"})]}),o.jsx("h1",{className:"text-lg sm:text-xl font-bold truncate",children:r.name})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(ve,{className:j?"bg-primary text-primary-foreground":A?"bg-destructive text-destructive-foreground":"bg-blue-500 text-blue-foreground",children:k}),r.createdBy==="user"&&o.jsxs(ve,{variant:"outline",className:"text-xs",children:[o.jsx(ua,{className:"w-3 h-3 mr-1"}),"Community Hosted"]}),_&&n&&o.jsxs(ve,{className:"bg-green-500/20 text-green-600 border-green-200 text-xs",children:[o.jsx(er,{className:"w-3 h-3 mr-1"}),"Registered"]})]})]}),o.jsx(re,{className:"mb-4 border",children:o.jsxs(se,{className:"p-3 sm:p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs mb-3",children:[o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(zr,{className:"w-3 h-3"}),o.jsxs("span",{children:[N(r.startDate)," at ",b(r.startDate)]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(ei,{className:"w-3 h-3"}),o.jsxs("span",{children:["Ends: ",N(r.endDate)," at ",b(r.endDate)]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(jt,{className:"w-3 h-3"}),o.jsxs("span",{children:[q," registered",r.maxParticipants&&` / ${r.maxParticipants} max`]})]}),r.participationType&&o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"capitalize",children:r.participationType})]})]}),r.description&&o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed break-words",children:r.description})]})}),r.requiresParticipantPayment&&r.individualPrice&&o.jsx(re,{className:"mb-4 border border-yellow-200 bg-yellow-50",children:o.jsx(se,{className:"p-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ve,{variant:"outline",className:"bg-yellow-100 text-yellow-800",children:"Paid Event"}),o.jsxs("span",{className:"text-sm text-yellow-800",children:["Registration fee: ",r.individualPrice," ",B]})]})})}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-6",children:[j&&_&&n&&o.jsxs(J,{onClick:L,className:"bg-primary flex-1",children:[o.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Join Event Now"]}),F&&!_&&n&&o.jsx(J,{onClick:D,disabled:d,className:"flex-1",variant:"terminal",children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border border-white border-t-transparent rounded-full mr-2"}),"Registering..."]}):o.jsxs(o.Fragment,{children:[o.jsx(fg,{className:"w-4 h-4 mr-2"}),"Register for Event"]})}),F&&!n&&o.jsxs(J,{onClick:()=>e("/login"),className:"flex-1",variant:"terminal",children:[o.jsx(fg,{className:"w-4 h-4 mr-2"}),"Login to Register"]}),A&&o.jsx(J,{disabled:!0,variant:"outline",className:"flex-1",children:"Event Ended"})]}),f&&o.jsx(kc,{className:`mb-4 ${f.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[f.type==="success"?o.jsx(er,{className:"w-4 h-4 text-green-600"}):o.jsx(Ji,{className:"w-4 h-4 text-red-600"}),o.jsx(Rc,{className:f.type==="success"?"text-green-600":"text-red-600",children:f.text})]})}),o.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.jsxs(re,{className:"border",children:[o.jsx(Pe,{className:"p-4 pb-2",children:o.jsxs(De,{className:"flex items-center gap-2 text-base",children:[o.jsx(lt,{className:"w-4 h-4"}),"Event Challenges (",i.length,")"]})}),o.jsx(se,{className:"p-4 pt-2",children:i.length===0?o.jsxs("div",{className:"text-center py-4",children:[o.jsx(lt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"No challenges available for this event yet."}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Check back later or contact the event organizer."})]}):o.jsx("div",{className:"space-y-3",children:i.map($=>o.jsx(re,{className:"border-border hover:border-primary/30 cursor-pointer transition-colors",onClick:()=>n&&e(`/challenge/${$.id}`),children:o.jsxs(se,{className:"p-3",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"font-semibold text-sm",children:$.title}),o.jsxs(ve,{variant:"outline",className:"font-mono text-xs",children:[$.points," pts"]})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ve,{variant:"secondary",className:`${T($.difficulty)} text-xs`,children:$.difficulty}),o.jsx(ve,{variant:"secondary",className:`${y($.category)} text-xs`,children:$.category})]}),o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:$.description}),!n&&o.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"Login to view challenge details"})]})},$.id))})})]})}),o.jsx("div",{className:"space-y-4",children:o.jsxs(re,{className:"border lg:sticky lg:top-4",children:[o.jsx(Pe,{className:"p-4 pb-2",children:o.jsx(De,{className:"text-base",children:"Event Information"})}),o.jsxs(se,{className:"p-4 pt-2 space-y-3",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-xs text-muted-foreground",children:"Status"}),o.jsx("p",{className:"capitalize text-sm",children:k.toLowerCase()})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-xs text-muted-foreground",children:"Duration"}),o.jsxs("p",{className:"text-sm",children:[N(r.startDate)," - ",N(r.endDate)]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-xs text-muted-foreground",children:"Participants"}),o.jsxs("p",{className:"text-sm",children:[q," registered",r.maxParticipants&&` of ${r.maxParticipants} max`]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-xs text-muted-foreground",children:"Challenges"}),o.jsxs("p",{className:"text-sm",children:[i.length," available"]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-xs text-muted-foreground",children:"Participation"}),o.jsx("p",{className:"text-sm capitalize",children:r.participationType||"individual"})]}),r.requiresParticipantPayment&&r.individualPrice&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-xs text-muted-foreground",children:"Fee"}),o.jsxs("p",{className:"text-sm",children:[r.individualPrice," ",B]})]})]})]})})]})]})}),o.jsx(tt,{})]})};function r7(){return o.jsx(PC,{children:o.jsx(C5,{children:o.jsx(j5,{children:o.jsx(_P,{children:o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(Xe,{}),o.jsx("main",{className:"flex-1",children:o.jsxs(mP,{children:[o.jsx(Xt,{path:"/",element:o.jsx(KU,{})}),o.jsx(Xt,{path:"/login",element:o.jsx(QU,{})}),o.jsx(Xt,{path:"/signup",element:o.jsx(YU,{})}),o.jsx(Xt,{path:"/auth/github/callback",element:o.jsx(ZU,{})}),o.jsx(Xt,{path:"/leaderboard",element:o.jsx(j9,{})}),o.jsx(Xt,{path:"/writeups",element:o.jsx(XU,{})}),o.jsx(Xt,{path:"/dashboard",element:o.jsx(Ei,{children:o.jsx(go,{children:o.jsx(r9,{})})})}),o.jsx(Xt,{path:"/practice",element:o.jsx(Ei,{children:o.jsx(go,{children:o.jsx(i9,{})})})}),o.jsx(Xt,{path:"/live",element:o.jsx(Ei,{children:o.jsx(go,{children:o.jsx(o9,{})})})}),o.jsx(Xt,{path:"/writeups/create",element:o.jsx(Ei,{children:o.jsx(go,{children:o.jsx(JU,{})})})}),o.jsx(Xt,{path:"/challenge/:challengeId",element:o.jsx(Ei,{children:o.jsx(go,{children:o.jsx(t7,{})})})}),o.jsx(Xt,{path:"/event/:eventId",element:o.jsx(Ei,{children:o.jsx(go,{children:o.jsx(n7,{})})})}),o.jsx(Xt,{path:"/admin",element:o.jsx(Ei,{children:o.jsx(I5,{children:o.jsx(e7,{})})})}),o.jsx(Xt,{path:"*",element:o.jsx(e9,{})})]})})]})})})})})}aN(document.getElementById("root")).render(o.jsx(PC,{children:o.jsx(r7,{})}));
