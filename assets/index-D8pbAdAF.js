function gA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ab(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kb={exports:{}},Jd={},Rb={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),yA=Symbol.for("react.portal"),vA=Symbol.for("react.fragment"),xA=Symbol.for("react.strict_mode"),wA=Symbol.for("react.profiler"),_A=Symbol.for("react.provider"),bA=Symbol.for("react.context"),EA=Symbol.for("react.forward_ref"),NA=Symbol.for("react.suspense"),TA=Symbol.for("react.memo"),SA=Symbol.for("react.lazy"),Dx=Symbol.iterator;function CA(t){return t===null||typeof t!="object"?null:(t=Dx&&t[Dx]||t["@@iterator"],typeof t=="function"?t:null)}var Pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Db=Object.assign,Lb={};function da(t,e,n){this.props=t,this.context=e,this.refs=Lb,this.updater=n||Pb}da.prototype.isReactComponent={};da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ob(){}Ob.prototype=da.prototype;function fg(t,e,n){this.props=t,this.context=e,this.refs=Lb,this.updater=n||Pb}var pg=fg.prototype=new Ob;pg.constructor=fg;Db(pg,da.prototype);pg.isPureReactComponent=!0;var Lx=Array.isArray,Mb=Object.prototype.hasOwnProperty,mg={current:null},Vb={key:!0,ref:!0,__self:!0,__source:!0};function Fb(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Mb.call(e,r)&&!Vb.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:dc,type:t,key:i,ref:a,props:s,_owner:mg.current}}function IA(t,e){return{$$typeof:dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gg(t){return typeof t=="object"&&t!==null&&t.$$typeof===dc}function jA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ox=/\/+/g;function Tf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jA(""+t.key):e.toString(36)}function Eu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case dc:case yA:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Tf(a,0):r,Lx(s)?(n="",t!=null&&(n=t.replace(Ox,"$&/")+"/"),Eu(s,e,n,"",function(d){return d})):s!=null&&(gg(s)&&(s=IA(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ox,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Lx(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Tf(i,l);a+=Eu(i,e,n,c,s)}else if(c=CA(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Tf(i,l++),a+=Eu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Hc(t,e,n){if(t==null)return t;var r=[],s=0;return Eu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function AA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Nu={transition:null},kA={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Nu,ReactCurrentOwner:mg};function Ub(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Hc,forEach:function(t,e,n){Hc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hc(t,function(){e++}),e},toArray:function(t){return Hc(t,function(e){return e})||[]},only:function(t){if(!gg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=da;ve.Fragment=vA;ve.Profiler=wA;ve.PureComponent=fg;ve.StrictMode=xA;ve.Suspense=NA;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kA;ve.act=Ub;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Db({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=mg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Mb.call(e,c)&&!Vb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:dc,type:t.type,key:s,ref:i,props:r,_owner:a}};ve.createContext=function(t){return t={$$typeof:bA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_A,_context:t},t.Consumer=t};ve.createElement=Fb;ve.createFactory=function(t){var e=Fb.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:EA,render:t}};ve.isValidElement=gg;ve.lazy=function(t){return{$$typeof:SA,_payload:{_status:-1,_result:t},_init:AA}};ve.memo=function(t,e){return{$$typeof:TA,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Nu.transition;Nu.transition={};try{t()}finally{Nu.transition=e}};ve.unstable_act=Ub;ve.useCallback=function(t,e){return rn.current.useCallback(t,e)};ve.useContext=function(t){return rn.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};ve.useEffect=function(t,e){return rn.current.useEffect(t,e)};ve.useId=function(){return rn.current.useId()};ve.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return rn.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};ve.useRef=function(t){return rn.current.useRef(t)};ve.useState=function(t){return rn.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return rn.current.useTransition()};ve.version="18.3.1";Rb.exports=ve;var g=Rb.exports;const ys=Ab(g),Zd=gA({__proto__:null,default:ys},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA=g,PA=Symbol.for("react.element"),DA=Symbol.for("react.fragment"),LA=Object.prototype.hasOwnProperty,OA=RA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MA={key:!0,ref:!0,__self:!0,__source:!0};function Bb(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)LA.call(e,r)&&!MA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:PA,type:t,key:i,ref:a,props:s,_owner:OA.current}}Jd.Fragment=DA;Jd.jsx=Bb;Jd.jsxs=Bb;kb.exports=Jd;var o=kb.exports,$b={exports:{}},In={},zb={exports:{}},Hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,q){var $=M.length;M.push(q);e:for(;0<$;){var O=$-1>>>1,z=M[O];if(0<s(z,q))M[O]=q,M[$]=z,$=O;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var q=M[0],$=M.pop();if($!==q){M[0]=$;e:for(var O=0,z=M.length,ie=z>>>1;O<ie;){var de=2*(O+1)-1,Oe=M[de],be=de+1,oe=M[be];if(0>s(Oe,$))be<z&&0>s(oe,Oe)?(M[O]=oe,M[be]=$,O=be):(M[O]=Oe,M[de]=$,O=de);else if(be<z&&0>s(oe,$))M[O]=oe,M[be]=$,O=be;else break e}}return q}function s(M,q){var $=M.sortIndex-q.sortIndex;return $!==0?$:M.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,p=3,v=!1,I=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(M){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=M)r(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(d)}}function R(M){if(_=!1,C(M),!I)if(n(c)!==null)I=!0,J(L);else{var q=n(d);q!==null&&le(R,q.startTime-M)}}function L(M,q){I=!1,_&&(_=!1,E(y),y=-1),v=!0;var $=p;try{for(C(q),f=n(c);f!==null&&(!(f.expirationTime>q)||M&&!j());){var O=f.callback;if(typeof O=="function"){f.callback=null,p=f.priorityLevel;var z=O(f.expirationTime<=q);q=t.unstable_now(),typeof z=="function"?f.callback=z:f===n(c)&&r(c),C(q)}else r(c);f=n(c)}if(f!==null)var ie=!0;else{var de=n(d);de!==null&&le(R,de.startTime-q),ie=!1}return ie}finally{f=null,p=$,v=!1}}var A=!1,N=null,y=-1,T=5,b=-1;function j(){return!(t.unstable_now()-b<T)}function k(){if(N!==null){var M=t.unstable_now();b=M;var q=!0;try{q=N(!0,M)}finally{q?P():(A=!1,N=null)}}else A=!1}var P;if(typeof w=="function")P=function(){w(k)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,se=W.port2;W.port1.onmessage=k,P=function(){se.postMessage(null)}}else P=function(){S(k,0)};function J(M){N=M,A||(A=!0,P())}function le(M,q){y=S(function(){M(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){I||v||(I=!0,J(L))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var $=p;p=q;try{return M()}finally{p=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,q){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=p;p=M;try{return q()}finally{p=$}},t.unstable_scheduleCallback=function(M,q,$){var O=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?O+$:O):$=O,M){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=$+z,M={id:h++,callback:q,priorityLevel:M,startTime:$,expirationTime:z,sortIndex:-1},$>O?(M.sortIndex=$,e(d,M),n(c)===null&&M===n(d)&&(_?(E(y),y=-1):_=!0,le(R,$-O))):(M.sortIndex=z,e(c,M),I||v||(I=!0,J(L))),M},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(M){var q=p;return function(){var $=p;p=q;try{return M.apply(this,arguments)}finally{p=$}}}})(Hb);zb.exports=Hb;var VA=zb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FA=g,Cn=VA;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wb=new Set,kl={};function Ji(t,e){zo(t,e),zo(t+"Capture",e)}function zo(t,e){for(kl[t]=e,t=0;t<e.length;t++)Wb.add(e[t])}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ap=Object.prototype.hasOwnProperty,UA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Vx={};function BA(t){return Ap.call(Vx,t)?!0:Ap.call(Mx,t)?!1:UA.test(t)?Vx[t]=!0:(Mx[t]=!0,!1)}function $A(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zA(t,e,n,r){if(e===null||typeof e>"u"||$A(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var yg=/[\-:]([a-z])/g;function vg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yg,vg);Dt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yg,vg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yg,vg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function xg(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zA(e,n,s,r)&&(n=null),r||s===null?BA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=FA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wc=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),kp=Symbol.for("react.profiler"),qb=Symbol.for("react.provider"),Gb=Symbol.for("react.context"),_g=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Pp=Symbol.for("react.suspense_list"),bg=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),Kb=Symbol.for("react.offscreen"),Fx=Symbol.iterator;function qa(t){return t===null||typeof t!="object"?null:(t=Fx&&t[Fx]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Object.assign,Sf;function rl(t){if(Sf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sf=e&&e[1]||""}return`
`+Sf+t}var Cf=!1;function If(t,e){if(!t||Cf)return"";Cf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Cf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function HA(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=If(t.type,!1),t;case 11:return t=If(t.type.render,!1),t;case 1:return t=If(t.type,!0),t;default:return""}}function Dp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case yo:return"Portal";case kp:return"Profiler";case wg:return"StrictMode";case Rp:return"Suspense";case Pp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gb:return(t.displayName||"Context")+".Consumer";case qb:return(t._context.displayName||"Context")+".Provider";case _g:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bg:return e=t.displayName||null,e!==null?e:Dp(t.type)||"Memo";case xs:e=t._payload,t=t._init;try{return Dp(t(e))}catch{}}return null}function WA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dp(e);case 8:return e===wg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qA(t){var e=Qb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qc(t){t._valueTracker||(t._valueTracker=qA(t))}function Yb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lp(t,e){var n=e.checked;return Ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ux(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xb(t,e){e=e.checked,e!=null&&xg(t,"checked",e,!1)}function Op(t,e){Xb(t,e);var n=Gs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mp(t,e.type,Gs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mp(t,e,n){(e!=="number"||Ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function jo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Vp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $x(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(sl(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gs(n)}}function Jb(t,e){var n=Gs(e.value),r=Gs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gc,e1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gc=Gc||document.createElement("div"),Gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GA=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){GA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function t1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function n1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var KA=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Up(t,e){if(e){if(KA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Bp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $p=null;function Eg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zp=null,Ao=null,ko=null;function Hx(t){if(t=pc(t)){if(typeof zp!="function")throw Error(H(280));var e=t.stateNode;e&&(e=sh(e),zp(t.stateNode,t.type,e))}}function r1(t){Ao?ko?ko.push(t):ko=[t]:Ao=t}function s1(){if(Ao){var t=Ao,e=ko;if(ko=Ao=null,Hx(t),e)for(t=0;t<e.length;t++)Hx(e[t])}}function i1(t,e){return t(e)}function o1(){}var jf=!1;function a1(t,e,n){if(jf)return t(e,n);jf=!0;try{return i1(t,e,n)}finally{jf=!1,(Ao!==null||ko!==null)&&(o1(),s1())}}function Pl(t,e){var n=t.stateNode;if(n===null)return null;var r=sh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Hp=!1;if(Hr)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){Hp=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{Hp=!1}function QA(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ml=!1,Qu=null,Yu=!1,Wp=null,YA={onError:function(t){ml=!0,Qu=t}};function XA(t,e,n,r,s,i,a,l,c){ml=!1,Qu=null,QA.apply(YA,arguments)}function JA(t,e,n,r,s,i,a,l,c){if(XA.apply(this,arguments),ml){if(ml){var d=Qu;ml=!1,Qu=null}else throw Error(H(198));Yu||(Yu=!0,Wp=d)}}function Zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wx(t){if(Zi(t)!==t)throw Error(H(188))}function ZA(t){var e=t.alternate;if(!e){if(e=Zi(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Wx(s),t;if(i===r)return Wx(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function c1(t){return t=ZA(t),t!==null?u1(t):null}function u1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u1(t);if(e!==null)return e;t=t.sibling}return null}var d1=Cn.unstable_scheduleCallback,qx=Cn.unstable_cancelCallback,e2=Cn.unstable_shouldYield,t2=Cn.unstable_requestPaint,lt=Cn.unstable_now,n2=Cn.unstable_getCurrentPriorityLevel,Ng=Cn.unstable_ImmediatePriority,h1=Cn.unstable_UserBlockingPriority,Xu=Cn.unstable_NormalPriority,r2=Cn.unstable_LowPriority,f1=Cn.unstable_IdlePriority,eh=null,gr=null;function s2(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(eh,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:a2,i2=Math.log,o2=Math.LN2;function a2(t){return t>>>=0,t===0?32:31-(i2(t)/o2|0)|0}var Kc=64,Qc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ju(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=il(l):(i&=a,i!==0&&(r=il(i)))}else a=n&~s,a!==0?r=il(a):i!==0&&(r=il(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),s=1<<n,r|=t[n],e&=~s;return r}function l2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Xn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=l2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p1(){var t=Kc;return Kc<<=1,!(Kc&4194240)&&(Kc=64),t}function Af(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function u2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Xn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Pe=0;function m1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g1,Sg,y1,v1,x1,Gp=!1,Yc=[],Ps=null,Ds=null,Ls=null,Dl=new Map,Ll=new Map,_s=[],d2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gx(t,e){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ll.delete(e.pointerId)}}function Ka(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pc(e),e!==null&&Sg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function h2(t,e,n,r,s){switch(e){case"focusin":return Ps=Ka(Ps,t,e,n,r,s),!0;case"dragenter":return Ds=Ka(Ds,t,e,n,r,s),!0;case"mouseover":return Ls=Ka(Ls,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Dl.set(i,Ka(Dl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ll.set(i,Ka(Ll.get(i)||null,t,e,n,r,s)),!0}return!1}function w1(t){var e=Si(t.target);if(e!==null){var n=Zi(e);if(n!==null){if(e=n.tag,e===13){if(e=l1(n),e!==null){t.blockedOn=e,x1(t.priority,function(){y1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$p=r,n.target.dispatchEvent(r),$p=null}else return e=pc(n),e!==null&&Sg(e),t.blockedOn=n,!1;e.shift()}return!0}function Kx(t,e,n){Tu(t)&&n.delete(e)}function f2(){Gp=!1,Ps!==null&&Tu(Ps)&&(Ps=null),Ds!==null&&Tu(Ds)&&(Ds=null),Ls!==null&&Tu(Ls)&&(Ls=null),Dl.forEach(Kx),Ll.forEach(Kx)}function Qa(t,e){t.blockedOn===e&&(t.blockedOn=null,Gp||(Gp=!0,Cn.unstable_scheduleCallback(Cn.unstable_NormalPriority,f2)))}function Ol(t){function e(s){return Qa(s,t)}if(0<Yc.length){Qa(Yc[0],t);for(var n=1;n<Yc.length;n++){var r=Yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ps!==null&&Qa(Ps,t),Ds!==null&&Qa(Ds,t),Ls!==null&&Qa(Ls,t),Dl.forEach(e),Ll.forEach(e),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)w1(n),n.blockedOn===null&&_s.shift()}var Ro=ns.ReactCurrentBatchConfig,Zu=!0;function p2(t,e,n,r){var s=Pe,i=Ro.transition;Ro.transition=null;try{Pe=1,Cg(t,e,n,r)}finally{Pe=s,Ro.transition=i}}function m2(t,e,n,r){var s=Pe,i=Ro.transition;Ro.transition=null;try{Pe=4,Cg(t,e,n,r)}finally{Pe=s,Ro.transition=i}}function Cg(t,e,n,r){if(Zu){var s=Kp(t,e,n,r);if(s===null)Uf(t,e,r,ed,n),Gx(t,r);else if(h2(s,t,e,n,r))r.stopPropagation();else if(Gx(t,r),e&4&&-1<d2.indexOf(t)){for(;s!==null;){var i=pc(s);if(i!==null&&g1(i),i=Kp(t,e,n,r),i===null&&Uf(t,e,r,ed,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Uf(t,e,r,null,n)}}var ed=null;function Kp(t,e,n,r){if(ed=null,t=Eg(r),t=Si(t),t!==null)if(e=Zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ed=t,null}function _1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n2()){case Ng:return 1;case h1:return 4;case Xu:case r2:return 16;case f1:return 536870912;default:return 16}default:return 16}}var Is=null,Ig=null,Su=null;function b1(){if(Su)return Su;var t,e=Ig,n=e.length,r,s="value"in Is?Is.value:Is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Su=s.slice(t,1<r?1-r:void 0)}function Cu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xc(){return!0}function Qx(){return!1}function jn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xc:Qx,this.isPropagationStopped=Qx,this}return Ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jg=jn(ha),fc=Ze({},ha,{view:0,detail:0}),g2=jn(fc),kf,Rf,Ya,th=Ze({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ya&&(Ya&&t.type==="mousemove"?(kf=t.screenX-Ya.screenX,Rf=t.screenY-Ya.screenY):Rf=kf=0,Ya=t),kf)},movementY:function(t){return"movementY"in t?t.movementY:Rf}}),Yx=jn(th),y2=Ze({},th,{dataTransfer:0}),v2=jn(y2),x2=Ze({},fc,{relatedTarget:0}),Pf=jn(x2),w2=Ze({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),_2=jn(w2),b2=Ze({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E2=jn(b2),N2=Ze({},ha,{data:0}),Xx=jn(N2),T2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function I2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=C2[t])?!!e[t]:!1}function Ag(){return I2}var j2=Ze({},fc,{key:function(t){if(t.key){var e=T2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(t){return t.type==="keypress"?Cu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),A2=jn(j2),k2=Ze({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jx=jn(k2),R2=Ze({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),P2=jn(R2),D2=Ze({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),L2=jn(D2),O2=Ze({},th,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M2=jn(O2),V2=[9,13,27,32],kg=Hr&&"CompositionEvent"in window,gl=null;Hr&&"documentMode"in document&&(gl=document.documentMode);var F2=Hr&&"TextEvent"in window&&!gl,E1=Hr&&(!kg||gl&&8<gl&&11>=gl),Zx=" ",ew=!1;function N1(t,e){switch(t){case"keyup":return V2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xo=!1;function U2(t,e){switch(t){case"compositionend":return T1(e);case"keypress":return e.which!==32?null:(ew=!0,Zx);case"textInput":return t=e.data,t===Zx&&ew?null:t;default:return null}}function B2(t,e){if(xo)return t==="compositionend"||!kg&&N1(t,e)?(t=b1(),Su=Ig=Is=null,xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E1&&e.locale!=="ko"?null:e.data;default:return null}}var $2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$2[t.type]:e==="textarea"}function S1(t,e,n,r){r1(r),e=td(e,"onChange"),0<e.length&&(n=new jg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yl=null,Ml=null;function z2(t){M1(t,0)}function nh(t){var e=bo(t);if(Yb(e))return t}function H2(t,e){if(t==="change")return e}var C1=!1;if(Hr){var Df;if(Hr){var Lf="oninput"in document;if(!Lf){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),Lf=typeof nw.oninput=="function"}Df=Lf}else Df=!1;C1=Df&&(!document.documentMode||9<document.documentMode)}function rw(){yl&&(yl.detachEvent("onpropertychange",I1),Ml=yl=null)}function I1(t){if(t.propertyName==="value"&&nh(Ml)){var e=[];S1(e,Ml,t,Eg(t)),a1(z2,e)}}function W2(t,e,n){t==="focusin"?(rw(),yl=e,Ml=n,yl.attachEvent("onpropertychange",I1)):t==="focusout"&&rw()}function q2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nh(Ml)}function G2(t,e){if(t==="click")return nh(e)}function K2(t,e){if(t==="input"||t==="change")return nh(e)}function Q2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:Q2;function Vl(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ap.call(e,s)||!tr(t[s],e[s]))return!1}return!0}function sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iw(t,e){var n=sw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sw(n)}}function j1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A1(){for(var t=window,e=Ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ku(t.document)}return e}function Rg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Y2(t){var e=A1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j1(n.ownerDocument.documentElement,n)){if(r!==null&&Rg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=iw(n,i);var a=iw(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var X2=Hr&&"documentMode"in document&&11>=document.documentMode,wo=null,Qp=null,vl=null,Yp=!1;function ow(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yp||wo==null||wo!==Ku(r)||(r=wo,"selectionStart"in r&&Rg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vl&&Vl(vl,r)||(vl=r,r=td(Qp,"onSelect"),0<r.length&&(e=new jg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wo)))}function Jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _o={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionend:Jc("Transition","TransitionEnd")},Of={},k1={};Hr&&(k1=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function rh(t){if(Of[t])return Of[t];if(!_o[t])return t;var e=_o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k1)return Of[t]=e[n];return t}var R1=rh("animationend"),P1=rh("animationiteration"),D1=rh("animationstart"),L1=rh("transitionend"),O1=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){O1.set(t,e),Ji(e,[t])}for(var Mf=0;Mf<aw.length;Mf++){var Vf=aw[Mf],J2=Vf.toLowerCase(),Z2=Vf[0].toUpperCase()+Vf.slice(1);si(J2,"on"+Z2)}si(R1,"onAnimationEnd");si(P1,"onAnimationIteration");si(D1,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(L1,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ek=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function lw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JA(r,e,void 0,t),t.currentTarget=null}function M1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;lw(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;lw(s,l,d),i=c}}}if(Yu)throw t=Wp,Yu=!1,Wp=null,t}function We(t,e){var n=e[tm];n===void 0&&(n=e[tm]=new Set);var r=t+"__bubble";n.has(r)||(V1(e,t,2,!1),n.add(r))}function Ff(t,e,n){var r=0;e&&(r|=4),V1(n,t,r,e)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function Fl(t){if(!t[Zc]){t[Zc]=!0,Wb.forEach(function(n){n!=="selectionchange"&&(ek.has(n)||Ff(n,!1,t),Ff(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zc]||(e[Zc]=!0,Ff("selectionchange",!1,e))}}function V1(t,e,n,r){switch(_1(e)){case 1:var s=p2;break;case 4:s=m2;break;default:s=Cg}n=s.bind(null,e,n,t),s=void 0,!Hp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Uf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Si(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}a1(function(){var d=i,h=Eg(n),f=[];e:{var p=O1.get(t);if(p!==void 0){var v=jg,I=t;switch(t){case"keypress":if(Cu(n)===0)break e;case"keydown":case"keyup":v=A2;break;case"focusin":I="focus",v=Pf;break;case"focusout":I="blur",v=Pf;break;case"beforeblur":case"afterblur":v=Pf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Yx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=v2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=P2;break;case R1:case P1:case D1:v=_2;break;case L1:v=L2;break;case"scroll":v=g2;break;case"wheel":v=M2;break;case"copy":case"cut":case"paste":v=E2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Jx}var _=(e&4)!==0,S=!_&&t==="scroll",E=_?p!==null?p+"Capture":null:p;_=[];for(var w=d,C;w!==null;){C=w;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,E!==null&&(R=Pl(w,E),R!=null&&_.push(Ul(w,R,C)))),S)break;w=w.return}0<_.length&&(p=new v(p,I,null,n,h),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==$p&&(I=n.relatedTarget||n.fromElement)&&(Si(I)||I[Wr]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(I=n.relatedTarget||n.toElement,v=d,I=I?Si(I):null,I!==null&&(S=Zi(I),I!==S||I.tag!==5&&I.tag!==6)&&(I=null)):(v=null,I=d),v!==I)){if(_=Yx,R="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=Jx,R="onPointerLeave",E="onPointerEnter",w="pointer"),S=v==null?p:bo(v),C=I==null?p:bo(I),p=new _(R,w+"leave",v,n,h),p.target=S,p.relatedTarget=C,R=null,Si(h)===d&&(_=new _(E,w+"enter",I,n,h),_.target=C,_.relatedTarget=S,R=_),S=R,v&&I)t:{for(_=v,E=I,w=0,C=_;C;C=co(C))w++;for(C=0,R=E;R;R=co(R))C++;for(;0<w-C;)_=co(_),w--;for(;0<C-w;)E=co(E),C--;for(;w--;){if(_===E||E!==null&&_===E.alternate)break t;_=co(_),E=co(E)}_=null}else _=null;v!==null&&cw(f,p,v,_,!1),I!==null&&S!==null&&cw(f,S,I,_,!0)}}e:{if(p=d?bo(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var L=H2;else if(tw(p))if(C1)L=K2;else{L=q2;var A=W2}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=G2);if(L&&(L=L(t,d))){S1(f,L,n,h);break e}A&&A(t,p,d),t==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&Mp(p,"number",p.value)}switch(A=d?bo(d):window,t){case"focusin":(tw(A)||A.contentEditable==="true")&&(wo=A,Qp=d,vl=null);break;case"focusout":vl=Qp=wo=null;break;case"mousedown":Yp=!0;break;case"contextmenu":case"mouseup":case"dragend":Yp=!1,ow(f,n,h);break;case"selectionchange":if(X2)break;case"keydown":case"keyup":ow(f,n,h)}var N;if(kg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else xo?N1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(E1&&n.locale!=="ko"&&(xo||y!=="onCompositionStart"?y==="onCompositionEnd"&&xo&&(N=b1()):(Is=h,Ig="value"in Is?Is.value:Is.textContent,xo=!0)),A=td(d,y),0<A.length&&(y=new Xx(y,t,null,n,h),f.push({event:y,listeners:A}),N?y.data=N:(N=T1(n),N!==null&&(y.data=N)))),(N=F2?U2(t,n):B2(t,n))&&(d=td(d,"onBeforeInput"),0<d.length&&(h=new Xx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=N))}M1(f,e)})}function Ul(t,e,n){return{instance:t,listener:e,currentTarget:n}}function td(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Pl(t,n),i!=null&&r.unshift(Ul(t,i,s)),i=Pl(t,e),i!=null&&r.push(Ul(t,i,s))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cw(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Pl(n,i),c!=null&&a.unshift(Ul(n,c,l))):s||(c=Pl(n,i),c!=null&&a.push(Ul(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var tk=/\r\n?/g,nk=/\u0000|\uFFFD/g;function uw(t){return(typeof t=="string"?t:""+t).replace(tk,`
`).replace(nk,"")}function eu(t,e,n){if(e=uw(e),uw(t)!==e&&n)throw Error(H(425))}function nd(){}var Xp=null,Jp=null;function Zp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var em=typeof setTimeout=="function"?setTimeout:void 0,rk=typeof clearTimeout=="function"?clearTimeout:void 0,dw=typeof Promise=="function"?Promise:void 0,sk=typeof queueMicrotask=="function"?queueMicrotask:typeof dw<"u"?function(t){return dw.resolve(null).then(t).catch(ik)}:em;function ik(t){setTimeout(function(){throw t})}function Bf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ol(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ol(e)}function Os(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fa=Math.random().toString(36).slice(2),hr="__reactFiber$"+fa,Bl="__reactProps$"+fa,Wr="__reactContainer$"+fa,tm="__reactEvents$"+fa,ok="__reactListeners$"+fa,ak="__reactHandles$"+fa;function Si(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hw(t);t!==null;){if(n=t[hr])return n;t=hw(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[hr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function sh(t){return t[Bl]||null}var nm=[],Eo=-1;function ii(t){return{current:t}}function Ge(t){0>Eo||(t.current=nm[Eo],nm[Eo]=null,Eo--)}function $e(t,e){Eo++,nm[Eo]=t.current,t.current=e}var Ks={},Wt=ii(Ks),hn=ii(!1),Mi=Ks;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fn(t){return t=t.childContextTypes,t!=null}function rd(){Ge(hn),Ge(Wt)}function fw(t,e,n){if(Wt.current!==Ks)throw Error(H(168));$e(Wt,e),$e(hn,n)}function F1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,WA(t)||"Unknown",s));return Ze({},n,r)}function sd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,Mi=Wt.current,$e(Wt,t),$e(hn,hn.current),!0}function pw(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=F1(t,e,Mi),r.__reactInternalMemoizedMergedChildContext=t,Ge(hn),Ge(Wt),$e(Wt,t)):Ge(hn),$e(hn,n)}var Dr=null,ih=!1,$f=!1;function U1(t){Dr===null?Dr=[t]:Dr.push(t)}function lk(t){ih=!0,U1(t)}function oi(){if(!$f&&Dr!==null){$f=!0;var t=0,e=Pe;try{var n=Dr;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,ih=!1}catch(s){throw Dr!==null&&(Dr=Dr.slice(t+1)),d1(Ng,oi),s}finally{Pe=e,$f=!1}}return null}var No=[],To=0,id=null,od=0,An=[],kn=0,Vi=null,Or=1,Mr="";function Ei(t,e){No[To++]=od,No[To++]=id,id=t,od=e}function B1(t,e,n){An[kn++]=Or,An[kn++]=Mr,An[kn++]=Vi,Vi=t;var r=Or;t=Mr;var s=32-Xn(r)-1;r&=~(1<<s),n+=1;var i=32-Xn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Or=1<<32-Xn(e)+s|n<<s|r,Mr=i+t}else Or=1<<i|n<<s|r,Mr=t}function Pg(t){t.return!==null&&(Ei(t,1),B1(t,1,0))}function Dg(t){for(;t===id;)id=No[--To],No[To]=null,od=No[--To],No[To]=null;for(;t===Vi;)Vi=An[--kn],An[kn]=null,Mr=An[--kn],An[kn]=null,Or=An[--kn],An[kn]=null}var En=null,wn=null,Ke=!1,Kn=null;function $1(t,e){var n=Dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,wn=Os(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:Or,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,wn=null,!0):!1;default:return!1}}function rm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sm(t){if(Ke){var e=wn;if(e){var n=e;if(!mw(t,e)){if(rm(t))throw Error(H(418));e=Os(n.nextSibling);var r=En;e&&mw(t,e)?$1(r,n):(t.flags=t.flags&-4097|2,Ke=!1,En=t)}}else{if(rm(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ke=!1,En=t}}}function gw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function tu(t){if(t!==En)return!1;if(!Ke)return gw(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zp(t.type,t.memoizedProps)),e&&(e=wn)){if(rm(t))throw z1(),Error(H(418));for(;e;)$1(t,e),e=Os(e.nextSibling)}if(gw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Os(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=En?Os(t.stateNode.nextSibling):null;return!0}function z1(){for(var t=wn;t;)t=Os(t.nextSibling)}function Wo(){wn=En=null,Ke=!1}function Lg(t){Kn===null?Kn=[t]:Kn.push(t)}var ck=ns.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function nu(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yw(t){var e=t._init;return e(t._payload)}function H1(t){function e(E,w){if(t){var C=E.deletions;C===null?(E.deletions=[w],E.flags|=16):C.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=Us(E,w),E.index=0,E.sibling=null,E}function i(E,w,C){return E.index=C,t?(C=E.alternate,C!==null?(C=C.index,C<w?(E.flags|=2,w):C):(E.flags|=2,w)):(E.flags|=1048576,w)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,C,R){return w===null||w.tag!==6?(w=Qf(C,E.mode,R),w.return=E,w):(w=s(w,C),w.return=E,w)}function c(E,w,C,R){var L=C.type;return L===vo?h(E,w,C.props.children,R,C.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xs&&yw(L)===w.type)?(R=s(w,C.props),R.ref=Xa(E,w,C),R.return=E,R):(R=Du(C.type,C.key,C.props,null,E.mode,R),R.ref=Xa(E,w,C),R.return=E,R)}function d(E,w,C,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Yf(C,E.mode,R),w.return=E,w):(w=s(w,C.children||[]),w.return=E,w)}function h(E,w,C,R,L){return w===null||w.tag!==7?(w=Pi(C,E.mode,R,L),w.return=E,w):(w=s(w,C),w.return=E,w)}function f(E,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qf(""+w,E.mode,C),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wc:return C=Du(w.type,w.key,w.props,null,E.mode,C),C.ref=Xa(E,null,w),C.return=E,C;case yo:return w=Yf(w,E.mode,C),w.return=E,w;case xs:var R=w._init;return f(E,R(w._payload),C)}if(sl(w)||qa(w))return w=Pi(w,E.mode,C,null),w.return=E,w;nu(E,w)}return null}function p(E,w,C,R){var L=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(E,w,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wc:return C.key===L?c(E,w,C,R):null;case yo:return C.key===L?d(E,w,C,R):null;case xs:return L=C._init,p(E,w,L(C._payload),R)}if(sl(C)||qa(C))return L!==null?null:h(E,w,C,R,null);nu(E,C)}return null}function v(E,w,C,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(C)||null,l(w,E,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Wc:return E=E.get(R.key===null?C:R.key)||null,c(w,E,R,L);case yo:return E=E.get(R.key===null?C:R.key)||null,d(w,E,R,L);case xs:var A=R._init;return v(E,w,C,A(R._payload),L)}if(sl(R)||qa(R))return E=E.get(C)||null,h(w,E,R,L,null);nu(w,R)}return null}function I(E,w,C,R){for(var L=null,A=null,N=w,y=w=0,T=null;N!==null&&y<C.length;y++){N.index>y?(T=N,N=null):T=N.sibling;var b=p(E,N,C[y],R);if(b===null){N===null&&(N=T);break}t&&N&&b.alternate===null&&e(E,N),w=i(b,w,y),A===null?L=b:A.sibling=b,A=b,N=T}if(y===C.length)return n(E,N),Ke&&Ei(E,y),L;if(N===null){for(;y<C.length;y++)N=f(E,C[y],R),N!==null&&(w=i(N,w,y),A===null?L=N:A.sibling=N,A=N);return Ke&&Ei(E,y),L}for(N=r(E,N);y<C.length;y++)T=v(N,E,y,C[y],R),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?y:T.key),w=i(T,w,y),A===null?L=T:A.sibling=T,A=T);return t&&N.forEach(function(j){return e(E,j)}),Ke&&Ei(E,y),L}function _(E,w,C,R){var L=qa(C);if(typeof L!="function")throw Error(H(150));if(C=L.call(C),C==null)throw Error(H(151));for(var A=L=null,N=w,y=w=0,T=null,b=C.next();N!==null&&!b.done;y++,b=C.next()){N.index>y?(T=N,N=null):T=N.sibling;var j=p(E,N,b.value,R);if(j===null){N===null&&(N=T);break}t&&N&&j.alternate===null&&e(E,N),w=i(j,w,y),A===null?L=j:A.sibling=j,A=j,N=T}if(b.done)return n(E,N),Ke&&Ei(E,y),L;if(N===null){for(;!b.done;y++,b=C.next())b=f(E,b.value,R),b!==null&&(w=i(b,w,y),A===null?L=b:A.sibling=b,A=b);return Ke&&Ei(E,y),L}for(N=r(E,N);!b.done;y++,b=C.next())b=v(N,E,y,b.value,R),b!==null&&(t&&b.alternate!==null&&N.delete(b.key===null?y:b.key),w=i(b,w,y),A===null?L=b:A.sibling=b,A=b);return t&&N.forEach(function(k){return e(E,k)}),Ke&&Ei(E,y),L}function S(E,w,C,R){if(typeof C=="object"&&C!==null&&C.type===vo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Wc:e:{for(var L=C.key,A=w;A!==null;){if(A.key===L){if(L=C.type,L===vo){if(A.tag===7){n(E,A.sibling),w=s(A,C.props.children),w.return=E,E=w;break e}}else if(A.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===xs&&yw(L)===A.type){n(E,A.sibling),w=s(A,C.props),w.ref=Xa(E,A,C),w.return=E,E=w;break e}n(E,A);break}else e(E,A);A=A.sibling}C.type===vo?(w=Pi(C.props.children,E.mode,R,C.key),w.return=E,E=w):(R=Du(C.type,C.key,C.props,null,E.mode,R),R.ref=Xa(E,w,C),R.return=E,E=R)}return a(E);case yo:e:{for(A=C.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(E,w.sibling),w=s(w,C.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Yf(C,E.mode,R),w.return=E,E=w}return a(E);case xs:return A=C._init,S(E,w,A(C._payload),R)}if(sl(C))return I(E,w,C,R);if(qa(C))return _(E,w,C,R);nu(E,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,C),w.return=E,E=w):(n(E,w),w=Qf(C,E.mode,R),w.return=E,E=w),a(E)):n(E,w)}return S}var qo=H1(!0),W1=H1(!1),ad=ii(null),ld=null,So=null,Og=null;function Mg(){Og=So=ld=null}function Vg(t){var e=ad.current;Ge(ad),t._currentValue=e}function im(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Po(t,e){ld=t,Og=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(Og!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(ld===null)throw Error(H(308));So=t,ld.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var Ci=null;function Fg(t){Ci===null?Ci=[t]:Ci.push(t)}function q1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Fg(e)):(n.next=s.next,s.next=n),e.interleaved=n,qr(t,r)}function qr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ws=!1;function Ug(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qr(t,n)}return s=r.interleaved,s===null?(e.next=e,Fg(r)):(e.next=s.next,s.next=e),r.interleaved=e,qr(t,n)}function Iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tg(t,n)}}function vw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cd(t,e,n,r){var s=t.updateQueue;ws=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,_=l;switch(p=e,v=n,_.tag){case 1:if(I=_.payload,typeof I=="function"){f=I.call(v,f,p);break e}f=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=_.payload,p=typeof I=="function"?I.call(v,f,p):I,p==null)break e;f=Ze({},f,p);break e;case 2:ws=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=f):h=h.next=v,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ui|=a,t.lanes=a,t.memoizedState=f}}function xw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var mc={},yr=ii(mc),$l=ii(mc),zl=ii(mc);function Ii(t){if(t===mc)throw Error(H(174));return t}function Bg(t,e){switch($e(zl,e),$e($l,t),$e(yr,mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fp(e,t)}Ge(yr),$e(yr,e)}function Go(){Ge(yr),Ge($l),Ge(zl)}function K1(t){Ii(zl.current);var e=Ii(yr.current),n=Fp(e,t.type);e!==n&&($e($l,t),$e(yr,n))}function $g(t){$l.current===t&&(Ge(yr),Ge($l))}var Ye=ii(0);function ud(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zf=[];function zg(){for(var t=0;t<zf.length;t++)zf[t]._workInProgressVersionPrimary=null;zf.length=0}var ju=ns.ReactCurrentDispatcher,Hf=ns.ReactCurrentBatchConfig,Fi=0,Je=null,xt=null,Tt=null,dd=!1,xl=!1,Hl=0,uk=0;function Ot(){throw Error(H(321))}function Hg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function Wg(t,e,n,r,s,i){if(Fi=i,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ju.current=t===null||t.memoizedState===null?pk:mk,t=n(r,s),xl){i=0;do{if(xl=!1,Hl=0,25<=i)throw Error(H(301));i+=1,Tt=xt=null,e.updateQueue=null,ju.current=gk,t=n(r,s)}while(xl)}if(ju.current=hd,e=xt!==null&&xt.next!==null,Fi=0,Tt=xt=Je=null,dd=!1,e)throw Error(H(300));return t}function qg(){var t=Hl!==0;return Hl=0,t}function cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Je.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Vn(){if(xt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Tt===null?Je.memoizedState:Tt.next;if(e!==null)Tt=e,xt=t;else{if(t===null)throw Error(H(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Tt===null?Je.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Wl(t,e){return typeof e=="function"?e(t):e}function Wf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=xt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Fi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Je.lanes|=h,Ui|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,tr(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Je.lanes|=i,Ui|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);tr(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q1(){}function Y1(t,e){var n=Je,r=Vn(),s=e(),i=!tr(r.memoizedState,s);if(i&&(r.memoizedState=s,dn=!0),r=r.queue,Gg(Z1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,ql(9,J1.bind(null,n,r,s,e),void 0,null),St===null)throw Error(H(349));Fi&30||X1(n,e,s)}return s}function X1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J1(t,e,n,r){e.value=n,e.getSnapshot=r,eE(e)&&tE(t)}function Z1(t,e,n){return n(function(){eE(e)&&tE(t)})}function eE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function tE(t){var e=qr(t,1);e!==null&&Jn(e,t,1,-1)}function ww(t){var e=cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:t},e.queue=t,t=t.dispatch=fk.bind(null,Je,t),[e.memoizedState,t]}function ql(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nE(){return Vn().memoizedState}function Au(t,e,n,r){var s=cr();Je.flags|=t,s.memoizedState=ql(1|e,n,void 0,r===void 0?null:r)}function oh(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(xt!==null){var a=xt.memoizedState;if(i=a.destroy,r!==null&&Hg(r,a.deps)){s.memoizedState=ql(e,n,i,r);return}}Je.flags|=t,s.memoizedState=ql(1|e,n,i,r)}function _w(t,e){return Au(8390656,8,t,e)}function Gg(t,e){return oh(2048,8,t,e)}function rE(t,e){return oh(4,2,t,e)}function sE(t,e){return oh(4,4,t,e)}function iE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oE(t,e,n){return n=n!=null?n.concat([t]):null,oh(4,4,iE.bind(null,e,t),n)}function Kg(){}function aE(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lE(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cE(t,e,n){return Fi&21?(tr(n,e)||(n=p1(),Je.lanes|=n,Ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function dk(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Hf.transition;Hf.transition={};try{t(!1),e()}finally{Pe=n,Hf.transition=r}}function uE(){return Vn().memoizedState}function hk(t,e,n){var r=Fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dE(t))hE(e,n);else if(n=q1(t,e,n,r),n!==null){var s=Zt();Jn(n,t,r,s),fE(n,e,r)}}function fk(t,e,n){var r=Fs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dE(t))hE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,tr(l,a)){var c=e.interleaved;c===null?(s.next=s,Fg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=q1(t,e,s,r),n!==null&&(s=Zt(),Jn(n,t,r,s),fE(n,e,r))}}function dE(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function hE(t,e){xl=dd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tg(t,n)}}var hd={readContext:Mn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},pk={readContext:Mn,useCallback:function(t,e){return cr().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:_w,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Au(4194308,4,iE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Au(4194308,4,t,e)},useInsertionEffect:function(t,e){return Au(4,2,t,e)},useMemo:function(t,e){var n=cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hk.bind(null,Je,t),[r.memoizedState,t]},useRef:function(t){var e=cr();return t={current:t},e.memoizedState=t},useState:ww,useDebugValue:Kg,useDeferredValue:function(t){return cr().memoizedState=t},useTransition:function(){var t=ww(!1),e=t[0];return t=dk.bind(null,t[1]),cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Je,s=cr();if(Ke){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),St===null)throw Error(H(349));Fi&30||X1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_w(Z1.bind(null,r,i,t),[t]),r.flags|=2048,ql(9,J1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=cr(),e=St.identifierPrefix;if(Ke){var n=Mr,r=Or;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mk={readContext:Mn,useCallback:aE,useContext:Mn,useEffect:Gg,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:Wf,useRef:nE,useState:function(){return Wf(Wl)},useDebugValue:Kg,useDeferredValue:function(t){var e=Vn();return cE(e,xt.memoizedState,t)},useTransition:function(){var t=Wf(Wl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:Y1,useId:uE,unstable_isNewReconciler:!1},gk={readContext:Mn,useCallback:aE,useContext:Mn,useEffect:Gg,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:qf,useRef:nE,useState:function(){return qf(Wl)},useDebugValue:Kg,useDeferredValue:function(t){var e=Vn();return xt===null?e.memoizedState=t:cE(e,xt.memoizedState,t)},useTransition:function(){var t=qf(Wl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:Y1,useId:uE,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=Ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function om(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ah={isMounted:function(t){return(t=t._reactInternals)?Zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Fs(t),i=Br(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ms(t,i,s),e!==null&&(Jn(e,t,s,r),Iu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Fs(t),i=Br(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ms(t,i,s),e!==null&&(Jn(e,t,s,r),Iu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=Fs(t),s=Br(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ms(t,s,r),e!==null&&(Jn(e,t,r,n),Iu(e,t,r))}};function bw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Vl(n,r)||!Vl(s,i):!0}function pE(t,e,n){var r=!1,s=Ks,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=fn(e)?Mi:Wt.current,r=e.contextTypes,i=(r=r!=null)?Ho(t,s):Ks),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ah,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ew(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ah.enqueueReplaceState(e,e.state,null)}function am(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ug(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=fn(e)?Mi:Wt.current,s.context=Ho(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(om(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ah.enqueueReplaceState(s,s.state,null),cd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ko(t,e){try{var n="",r=e;do n+=HA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Gf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yk=typeof WeakMap=="function"?WeakMap:Map;function mE(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pd||(pd=!0,vm=r),lm(t,e)},n}function gE(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lm(t,e),typeof r!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Nw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=kk.bind(null,t,e,n),e.then(t,t))}function Tw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Ms(n,e,1))),n.lanes|=1),t)}var vk=ns.ReactCurrentOwner,dn=!1;function Yt(t,e,n,r){e.child=t===null?W1(e,null,n,r):qo(e,t.child,n,r)}function Cw(t,e,n,r,s){n=n.render;var i=e.ref;return Po(e,s),r=Wg(t,e,n,r,i,s),n=qg(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Ke&&n&&Pg(e),e.flags|=1,Yt(t,e,r,s),e.child)}function Iw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ny(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yE(t,e,i,r,s)):(t=Du(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Vl,n(a,r)&&t.ref===e.ref)return Gr(t,e,s)}return e.flags|=1,t=Us(i,r),t.ref=e.ref,t.return=e,e.child=t}function yE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Vl(i,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Gr(t,e,s)}return cm(t,e,n,r,s)}function vE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Io,vn),vn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Io,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(Io,vn),vn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(Io,vn),vn|=r;return Yt(t,e,s,n),e.child}function xE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cm(t,e,n,r,s){var i=fn(n)?Mi:Wt.current;return i=Ho(e,i),Po(e,s),n=Wg(t,e,n,r,i,s),r=qg(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gr(t,e,s)):(Ke&&r&&Pg(e),e.flags|=1,Yt(t,e,n,s),e.child)}function jw(t,e,n,r,s){if(fn(n)){var i=!0;sd(e)}else i=!1;if(Po(e,s),e.stateNode===null)ku(t,e),pE(e,n,r),am(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mn(d):(d=fn(n)?Mi:Wt.current,d=Ho(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Ew(e,a,r,d),ws=!1;var p=e.memoizedState;a.state=p,cd(e,r,a,s),c=e.memoizedState,l!==r||p!==c||hn.current||ws?(typeof h=="function"&&(om(e,n,h,r),c=e.memoizedState),(l=ws||bw(e,n,l,r,p,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,G1(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:qn(e.type,l),a.props=d,f=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=fn(n)?Mi:Wt.current,c=Ho(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Ew(e,a,r,c),ws=!1,p=e.memoizedState,a.state=p,cd(e,r,a,s);var I=e.memoizedState;l!==f||p!==I||hn.current||ws?(typeof v=="function"&&(om(e,n,v,r),I=e.memoizedState),(d=ws||bw(e,n,d,r,p,I,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,I,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,I,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),a.props=r,a.state=I,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return um(t,e,n,r,i,s)}function um(t,e,n,r,s,i){xE(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&pw(e,n,!1),Gr(t,e,i);r=e.stateNode,vk.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=qo(e,t.child,null,i),e.child=qo(e,null,l,i)):Yt(t,e,l,i),e.memoizedState=r.state,s&&pw(e,n,!0),e.child}function wE(t){var e=t.stateNode;e.pendingContext?fw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fw(t,e.context,!1),Bg(t,e.containerInfo)}function Aw(t,e,n,r,s){return Wo(),Lg(s),e.flags|=256,Yt(t,e,n,r),e.child}var dm={dehydrated:null,treeContext:null,retryLane:0};function hm(t){return{baseLanes:t,cachePool:null,transitions:null}}function _E(t,e,n){var r=e.pendingProps,s=Ye.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ye,s&1),t===null)return sm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=uh(a,r,0,null),t=Pi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=hm(n),e.memoizedState=dm,t):Qg(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return xk(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Us(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Us(l,i):(i=Pi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?hm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=dm,r}return i=t.child,t=i.sibling,r=Us(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qg(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ru(t,e,n,r){return r!==null&&Lg(r),qo(e,t.child,null,n),t=Qg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xk(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Gf(Error(H(422))),ru(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=uh({mode:"visible",children:r.children},s,0,null),i=Pi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qo(e,t.child,null,a),e.child.memoizedState=hm(a),e.memoizedState=dm,i);if(!(e.mode&1))return ru(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=Gf(i,r,void 0),ru(t,e,a,r)}if(l=(a&t.childLanes)!==0,dn||l){if(r=St,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qr(t,s),Jn(r,t,s,-1))}return ty(),r=Gf(Error(H(421))),ru(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Rk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wn=Os(s.nextSibling),En=e,Ke=!0,Kn=null,t!==null&&(An[kn++]=Or,An[kn++]=Mr,An[kn++]=Vi,Or=t.id,Mr=t.overflow,Vi=e),e=Qg(e,r.children),e.flags|=4096,e)}function kw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),im(t.return,e,n)}function Kf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kw(t,n,e);else if(t.tag===19)kw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ud(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Kf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ud(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Kf(e,!0,n,null,i);break;case"together":Kf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ku(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Us(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Us(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wk(t,e,n){switch(e.tag){case 3:wE(e),Wo();break;case 5:K1(e);break;case 1:fn(e.type)&&sd(e);break;case 4:Bg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(ad,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?_E(t,e,n):($e(Ye,Ye.current&1),t=Gr(t,e,n),t!==null?t.sibling:null);$e(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,vE(t,e,n)}return Gr(t,e,n)}var EE,fm,NE,TE;EE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fm=function(){};NE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ii(yr.current);var i=null;switch(n){case"input":s=Lp(t,s),r=Lp(t,r),i=[];break;case"select":s=Ze({},s,{value:void 0}),r=Ze({},r,{value:void 0}),i=[];break;case"textarea":s=Vp(t,s),r=Vp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nd)}Up(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(kl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(kl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&We("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};TE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ja(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function _k(t,e,n){var r=e.pendingProps;switch(Dg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return fn(e.type)&&rd(),Mt(e),null;case 3:return r=e.stateNode,Go(),Ge(hn),Ge(Wt),zg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(_m(Kn),Kn=null))),fm(t,e),Mt(e),null;case 5:$g(e);var s=Ii(zl.current);if(n=e.type,t!==null&&e.stateNode!=null)NE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Mt(e),null}if(t=Ii(yr.current),tu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hr]=e,r[Bl]=i,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(s=0;s<ol.length;s++)We(ol[s],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":Ux(r,i),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},We("invalid",r);break;case"textarea":$x(r,i),We("invalid",r)}Up(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&eu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&eu(r.textContent,l,t),s=["children",""+l]):kl.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&We("scroll",r)}switch(n){case"input":qc(r),Bx(r,i,!0);break;case"textarea":qc(r),zx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[hr]=e,t[Bl]=r,EE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bp(n,r),n){case"dialog":We("cancel",t),We("close",t),s=r;break;case"iframe":case"object":case"embed":We("load",t),s=r;break;case"video":case"audio":for(s=0;s<ol.length;s++)We(ol[s],t);s=r;break;case"source":We("error",t),s=r;break;case"img":case"image":case"link":We("error",t),We("load",t),s=r;break;case"details":We("toggle",t),s=r;break;case"input":Ux(t,r),s=Lp(t,r),We("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ze({},r,{value:void 0}),We("invalid",t);break;case"textarea":$x(t,r),s=Vp(t,r),We("invalid",t);break;default:s=r}Up(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?n1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rl(t,c):typeof c=="number"&&Rl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&We("scroll",t):c!=null&&xg(t,i,c,a))}switch(n){case"input":qc(t),Bx(t,r,!1);break;case"textarea":qc(t),zx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?jo(t,!!r.multiple,i,!1):r.defaultValue!=null&&jo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)TE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ii(zl.current),Ii(yr.current),tu(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(i=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:eu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ge(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&wn!==null&&e.mode&1&&!(e.flags&128))z1(),Wo(),e.flags|=98560,i=!1;else if(i=tu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[hr]=e}else Wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Kn!==null&&(_m(Kn),Kn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?wt===0&&(wt=3):ty())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Go(),fm(t,e),t===null&&Fl(e.stateNode.containerInfo),Mt(e),null;case 10:return Vg(e.type._context),Mt(e),null;case 17:return fn(e.type)&&rd(),Mt(e),null;case 19:if(Ge(Ye),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ja(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ud(t),a!==null){for(e.flags|=128,Ja(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ye,Ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&lt()>Qo&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304)}else{if(!r)if(t=ud(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ja(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ke)return Mt(e),null}else 2*lt()-i.renderingStartTime>Qo&&n!==1073741824&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=lt(),e.sibling=null,n=Ye.current,$e(Ye,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return ey(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function bk(t,e){switch(Dg(e),e.tag){case 1:return fn(e.type)&&rd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Go(),Ge(hn),Ge(Wt),zg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $g(e),null;case 13:if(Ge(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ye),null;case 4:return Go(),null;case 10:return Vg(e.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var su=!1,Ut=!1,Ek=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function pm(t,e,n){try{n()}catch(r){nt(t,e,r)}}var Rw=!1;function Nk(t,e){if(Xp=Zu,t=A1(),Rg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++d===s&&(l=a),p===i&&++h===r&&(c=a),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jp={focusedElem:t,selectionRange:n},Zu=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var _=I.memoizedProps,S=I.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?_:qn(e.type,_),S);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(R){nt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return I=Rw,Rw=!1,I}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pm(e,n,i)}s=s.next}while(s!==r)}}function lh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SE(t){var e=t.alternate;e!==null&&(t.alternate=null,SE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[Bl],delete e[tm],delete e[ok],delete e[ak])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CE(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nd));else if(r!==4&&(t=t.child,t!==null))for(gm(t,e,n),t=t.sibling;t!==null;)gm(t,e,n),t=t.sibling}function ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ym(t,e,n),t=t.sibling;t!==null;)ym(t,e,n),t=t.sibling}var It=null,Gn=!1;function hs(t,e,n){for(n=n.child;n!==null;)IE(t,e,n),n=n.sibling}function IE(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(eh,n)}catch{}switch(n.tag){case 5:Ut||Co(n,e);case 6:var r=It,s=Gn;It=null,hs(t,e,n),It=r,Gn=s,It!==null&&(Gn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Gn?(t=It,n=n.stateNode,t.nodeType===8?Bf(t.parentNode,n):t.nodeType===1&&Bf(t,n),Ol(t)):Bf(It,n.stateNode));break;case 4:r=It,s=Gn,It=n.stateNode.containerInfo,Gn=!0,hs(t,e,n),It=r,Gn=s;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&pm(n,e,a),s=s.next}while(s!==r)}hs(t,e,n);break;case 1:if(!Ut&&(Co(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){nt(n,e,l)}hs(t,e,n);break;case 21:hs(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,hs(t,e,n),Ut=r):hs(t,e,n);break;default:hs(t,e,n)}}function Dw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ek),e.forEach(function(r){var s=Pk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,Gn=!1;break e;case 3:It=l.stateNode.containerInfo,Gn=!0;break e;case 4:It=l.stateNode.containerInfo,Gn=!0;break e}l=l.return}if(It===null)throw Error(H(160));IE(i,a,s),It=null,Gn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){nt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jE(e,t),e=e.sibling}function jE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),lr(t),r&4){try{wl(3,t,t.return),lh(3,t)}catch(_){nt(t,t.return,_)}try{wl(5,t,t.return)}catch(_){nt(t,t.return,_)}}break;case 1:Hn(e,t),lr(t),r&512&&n!==null&&Co(n,n.return);break;case 5:if(Hn(e,t),lr(t),r&512&&n!==null&&Co(n,n.return),t.flags&32){var s=t.stateNode;try{Rl(s,"")}catch(_){nt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Xb(s,i),Bp(l,a);var d=Bp(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?n1(s,f):h==="dangerouslySetInnerHTML"?e1(s,f):h==="children"?Rl(s,f):xg(s,h,f,d)}switch(l){case"input":Op(s,i);break;case"textarea":Jb(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?jo(s,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?jo(s,!!i.multiple,i.defaultValue,!0):jo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bl]=i}catch(_){nt(t,t.return,_)}}break;case 6:if(Hn(e,t),lr(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){nt(t,t.return,_)}}break;case 3:if(Hn(e,t),lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ol(e.containerInfo)}catch(_){nt(t,t.return,_)}break;case 4:Hn(e,t),lr(t);break;case 13:Hn(e,t),lr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Jg=lt())),r&4&&Dw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||h,Hn(e,t),Ut=d):Hn(e,t),lr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(p=Z,v=p.child,p.tag){case 0:case 11:case 14:case 15:wl(4,p,p.return);break;case 1:Co(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(_){nt(r,n,_)}}break;case 5:Co(p,p.return);break;case 22:if(p.memoizedState!==null){Ow(f);continue}}v!==null?(v.return=p,Z=v):Ow(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=t1("display",a))}catch(_){nt(t,t.return,_)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(_){nt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hn(e,t),lr(t),r&4&&Dw(t);break;case 21:break;default:Hn(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CE(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Rl(s,""),r.flags&=-33);var i=Pw(t);ym(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Pw(t);gm(t,l,a);break;default:throw Error(H(161))}}catch(c){nt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tk(t,e,n){Z=t,AE(t)}function AE(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||su;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=su;var d=Ut;if(su=a,(Ut=c)&&!d)for(Z=s;Z!==null;)a=Z,c=a.child,a.tag===22&&a.memoizedState!==null?Mw(s):c!==null?(c.return=a,Z=c):Mw(s);for(;i!==null;)Z=i,AE(i),i=i.sibling;Z=s,su=l,Ut=d}Lw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):Lw(t)}}function Lw(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||lh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xw(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xw(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ol(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ut||e.flags&512&&mm(e)}catch(p){nt(e,e.return,p)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Ow(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Mw(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lh(4,e)}catch(c){nt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){nt(e,s,c)}}var i=e.return;try{mm(e)}catch(c){nt(e,i,c)}break;case 5:var a=e.return;try{mm(e)}catch(c){nt(e,a,c)}}}catch(c){nt(e,e.return,c)}if(e===t){Z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Z=l;break}Z=e.return}}var Sk=Math.ceil,fd=ns.ReactCurrentDispatcher,Yg=ns.ReactCurrentOwner,Ln=ns.ReactCurrentBatchConfig,Se=0,St=null,pt=null,Pt=0,vn=0,Io=ii(0),wt=0,Gl=null,Ui=0,ch=0,Xg=0,_l=null,ln=null,Jg=0,Qo=1/0,Pr=null,pd=!1,vm=null,Vs=null,iu=!1,js=null,md=0,bl=0,xm=null,Ru=-1,Pu=0;function Zt(){return Se&6?lt():Ru!==-1?Ru:Ru=lt()}function Fs(t){return t.mode&1?Se&2&&Pt!==0?Pt&-Pt:ck.transition!==null?(Pu===0&&(Pu=p1()),Pu):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:_1(t.type)),t):1}function Jn(t,e,n,r){if(50<bl)throw bl=0,xm=null,Error(H(185));hc(t,n,r),(!(Se&2)||t!==St)&&(t===St&&(!(Se&2)&&(ch|=n),wt===4&&bs(t,Pt)),pn(t,r),n===1&&Se===0&&!(e.mode&1)&&(Qo=lt()+500,ih&&oi()))}function pn(t,e){var n=t.callbackNode;c2(t,e);var r=Ju(t,t===St?Pt:0);if(r===0)n!==null&&qx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qx(n),e===1)t.tag===0?lk(Vw.bind(null,t)):U1(Vw.bind(null,t)),sk(function(){!(Se&6)&&oi()}),n=null;else{switch(m1(r)){case 1:n=Ng;break;case 4:n=h1;break;case 16:n=Xu;break;case 536870912:n=f1;break;default:n=Xu}n=VE(n,kE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kE(t,e){if(Ru=-1,Pu=0,Se&6)throw Error(H(327));var n=t.callbackNode;if(Do()&&t.callbackNode!==n)return null;var r=Ju(t,t===St?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gd(t,r);else{e=r;var s=Se;Se|=2;var i=PE();(St!==t||Pt!==e)&&(Pr=null,Qo=lt()+500,Ri(t,e));do try{jk();break}catch(l){RE(t,l)}while(!0);Mg(),fd.current=i,Se=s,pt!==null?e=0:(St=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=qp(t),s!==0&&(r=s,e=wm(t,s))),e===1)throw n=Gl,Ri(t,0),bs(t,r),pn(t,lt()),n;if(e===6)bs(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ck(s)&&(e=gd(t,r),e===2&&(i=qp(t),i!==0&&(r=i,e=wm(t,i))),e===1))throw n=Gl,Ri(t,0),bs(t,r),pn(t,lt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Ni(t,ln,Pr);break;case 3:if(bs(t,r),(r&130023424)===r&&(e=Jg+500-lt(),10<e)){if(Ju(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=em(Ni.bind(null,t,ln,Pr),e);break}Ni(t,ln,Pr);break;case 4:if(bs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Xn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sk(r/1960))-r,10<r){t.timeoutHandle=em(Ni.bind(null,t,ln,Pr),r);break}Ni(t,ln,Pr);break;case 5:Ni(t,ln,Pr);break;default:throw Error(H(329))}}}return pn(t,lt()),t.callbackNode===n?kE.bind(null,t):null}function wm(t,e){var n=_l;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=gd(t,e),t!==2&&(e=ln,ln=n,e!==null&&_m(e)),t}function _m(t){ln===null?ln=t:ln.push.apply(ln,t)}function Ck(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~Xg,e&=~ch,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function Vw(t){if(Se&6)throw Error(H(327));Do();var e=Ju(t,0);if(!(e&1))return pn(t,lt()),null;var n=gd(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=wm(t,r))}if(n===1)throw n=Gl,Ri(t,0),bs(t,e),pn(t,lt()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,ln,Pr),pn(t,lt()),null}function Zg(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Qo=lt()+500,ih&&oi())}}function Bi(t){js!==null&&js.tag===0&&!(Se&6)&&Do();var e=Se;Se|=1;var n=Ln.transition,r=Pe;try{if(Ln.transition=null,Pe=1,t)return t()}finally{Pe=r,Ln.transition=n,Se=e,!(Se&6)&&oi()}}function ey(){vn=Io.current,Ge(Io)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rk(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(Dg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rd();break;case 3:Go(),Ge(hn),Ge(Wt),zg();break;case 5:$g(r);break;case 4:Go();break;case 13:Ge(Ye);break;case 19:Ge(Ye);break;case 10:Vg(r.type._context);break;case 22:case 23:ey()}n=n.return}if(St=t,pt=t=Us(t.current,null),Pt=vn=e,wt=0,Gl=null,Xg=ch=Ui=0,ln=_l=null,Ci!==null){for(e=0;e<Ci.length;e++)if(n=Ci[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ci=null}return t}function RE(t,e){do{var n=pt;try{if(Mg(),ju.current=hd,dd){for(var r=Je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dd=!1}if(Fi=0,Tt=xt=Je=null,xl=!1,Hl=0,Yg.current=null,n===null||n.return===null){wt=1,Gl=e,pt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Tw(a);if(v!==null){v.flags&=-257,Sw(v,a,l,i,e),v.mode&1&&Nw(i,d,e),e=v,c=d;var I=e.updateQueue;if(I===null){var _=new Set;_.add(c),e.updateQueue=_}else I.add(c);break e}else{if(!(e&1)){Nw(i,d,e),ty();break e}c=Error(H(426))}}else if(Ke&&l.mode&1){var S=Tw(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Sw(S,a,l,i,e),Lg(Ko(c,l));break e}}i=c=Ko(c,l),wt!==4&&(wt=2),_l===null?_l=[i]:_l.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=mE(i,c,e);vw(i,E);break e;case 1:l=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Vs===null||!Vs.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=gE(i,l,e);vw(i,R);break e}}i=i.return}while(i!==null)}LE(n)}catch(L){e=L,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function PE(){var t=fd.current;return fd.current=hd,t===null?hd:t}function ty(){(wt===0||wt===3||wt===2)&&(wt=4),St===null||!(Ui&268435455)&&!(ch&268435455)||bs(St,Pt)}function gd(t,e){var n=Se;Se|=2;var r=PE();(St!==t||Pt!==e)&&(Pr=null,Ri(t,e));do try{Ik();break}catch(s){RE(t,s)}while(!0);if(Mg(),Se=n,fd.current=r,pt!==null)throw Error(H(261));return St=null,Pt=0,wt}function Ik(){for(;pt!==null;)DE(pt)}function jk(){for(;pt!==null&&!e2();)DE(pt)}function DE(t){var e=ME(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?LE(t):pt=e,Yg.current=null}function LE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bk(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,pt=null;return}}else if(n=_k(n,e,vn),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);wt===0&&(wt=5)}function Ni(t,e,n){var r=Pe,s=Ln.transition;try{Ln.transition=null,Pe=1,Ak(t,e,n,r)}finally{Ln.transition=s,Pe=r}return null}function Ak(t,e,n,r){do Do();while(js!==null);if(Se&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(u2(t,i),t===St&&(pt=St=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||iu||(iu=!0,VE(Xu,function(){return Do(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var a=Pe;Pe=1;var l=Se;Se|=4,Yg.current=null,Nk(t,n),jE(n,t),Y2(Jp),Zu=!!Xp,Jp=Xp=null,t.current=n,Tk(n),t2(),Se=l,Pe=a,Ln.transition=i}else t.current=n;if(iu&&(iu=!1,js=t,md=s),i=t.pendingLanes,i===0&&(Vs=null),s2(n.stateNode),pn(t,lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pd)throw pd=!1,t=vm,vm=null,t;return md&1&&t.tag!==0&&Do(),i=t.pendingLanes,i&1?t===xm?bl++:(bl=0,xm=t):bl=0,oi(),null}function Do(){if(js!==null){var t=m1(md),e=Ln.transition,n=Pe;try{if(Ln.transition=null,Pe=16>t?16:t,js===null)var r=!1;else{if(t=js,js=null,md=0,Se&6)throw Error(H(331));var s=Se;for(Se|=4,Z=t.current;Z!==null;){var i=Z,a=i.child;if(Z.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Z=d;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:wl(8,h,i)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var p=h.sibling,v=h.return;if(SE(h),h===d){Z=null;break}if(p!==null){p.return=v,Z=p;break}Z=v}}}var I=i.alternate;if(I!==null){var _=I.child;if(_!==null){I.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}Z=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Z=a;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Z=E;break e}Z=i.return}}var w=t.current;for(Z=w;Z!==null;){a=Z;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,Z=C;else e:for(a=w;Z!==null;){if(l=Z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lh(9,l)}}catch(L){nt(l,l.return,L)}if(l===a){Z=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,Z=R;break e}Z=l.return}}if(Se=s,oi(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(eh,t)}catch{}r=!0}return r}finally{Pe=n,Ln.transition=e}}return!1}function Fw(t,e,n){e=Ko(n,e),e=mE(t,e,1),t=Ms(t,e,1),e=Zt(),t!==null&&(hc(t,1,e),pn(t,e))}function nt(t,e,n){if(t.tag===3)Fw(t,t,n);else for(;e!==null;){if(e.tag===3){Fw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vs===null||!Vs.has(r))){t=Ko(n,t),t=gE(e,t,1),e=Ms(e,t,1),t=Zt(),e!==null&&(hc(e,1,t),pn(e,t));break}}e=e.return}}function kk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>lt()-Jg?Ri(t,0):Xg|=n),pn(t,e)}function OE(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var n=Zt();t=qr(t,e),t!==null&&(hc(t,e,n),pn(t,n))}function Rk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OE(t,n)}function Pk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),OE(t,n)}var ME;ME=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,wk(t,e,n);dn=!!(t.flags&131072)}else dn=!1,Ke&&e.flags&1048576&&B1(e,od,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ku(t,e),t=e.pendingProps;var s=Ho(e,Wt.current);Po(e,n),s=Wg(null,e,r,t,s,n);var i=qg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(i=!0,sd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ug(e),s.updater=ah,e.stateNode=s,s._reactInternals=e,am(e,r,t,n),e=um(null,e,r,!0,i,n)):(e.tag=0,Ke&&i&&Pg(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ku(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Lk(r),t=qn(r,t),s){case 0:e=cm(null,e,r,t,n);break e;case 1:e=jw(null,e,r,t,n);break e;case 11:e=Cw(null,e,r,t,n);break e;case 14:e=Iw(null,e,r,qn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),cm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),jw(t,e,r,s,n);case 3:e:{if(wE(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,G1(t,e),cd(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ko(Error(H(423)),e),e=Aw(t,e,r,n,s);break e}else if(r!==s){s=Ko(Error(H(424)),e),e=Aw(t,e,r,n,s);break e}else for(wn=Os(e.stateNode.containerInfo.firstChild),En=e,Ke=!0,Kn=null,n=W1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wo(),r===s){e=Gr(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return K1(e),t===null&&sm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Zp(r,s)?a=null:i!==null&&Zp(r,i)&&(e.flags|=32),xE(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&sm(e),null;case 13:return _E(t,e,n);case 4:return Bg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qo(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Cw(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,$e(ad,r._currentValue),r._currentValue=a,i!==null)if(tr(i.value,a)){if(i.children===s.children&&!hn.current){e=Gr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Br(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),im(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),im(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Po(e,n),s=Mn(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=qn(r,e.pendingProps),s=qn(r.type,s),Iw(t,e,r,s,n);case 15:return yE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),ku(t,e),e.tag=1,fn(r)?(t=!0,sd(e)):t=!1,Po(e,n),pE(e,r,s),am(e,r,s,n),um(null,e,r,!0,t,n);case 19:return bE(t,e,n);case 22:return vE(t,e,n)}throw Error(H(156,e.tag))};function VE(t,e){return d1(t,e)}function Dk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,e,n,r){return new Dk(t,e,n,r)}function ny(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lk(t){if(typeof t=="function")return ny(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_g)return 11;if(t===bg)return 14}return 2}function Us(t,e){var n=t.alternate;return n===null?(n=Dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Du(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")ny(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case vo:return Pi(n.children,s,i,e);case wg:a=8,s|=8;break;case kp:return t=Dn(12,n,e,s|2),t.elementType=kp,t.lanes=i,t;case Rp:return t=Dn(13,n,e,s),t.elementType=Rp,t.lanes=i,t;case Pp:return t=Dn(19,n,e,s),t.elementType=Pp,t.lanes=i,t;case Kb:return uh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qb:a=10;break e;case Gb:a=9;break e;case _g:a=11;break e;case bg:a=14;break e;case xs:a=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Dn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Pi(t,e,n,r){return t=Dn(7,t,r,e),t.lanes=n,t}function uh(t,e,n,r){return t=Dn(22,t,r,e),t.elementType=Kb,t.lanes=n,t.stateNode={isHidden:!1},t}function Qf(t,e,n){return t=Dn(6,t,null,e),t.lanes=n,t}function Yf(t,e,n){return e=Dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ok(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Af(0),this.expirationTimes=Af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Af(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ry(t,e,n,r,s,i,a,l,c){return t=new Ok(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ug(i),t}function Mk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FE(t){if(!t)return Ks;t=t._reactInternals;e:{if(Zi(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(fn(n))return F1(t,n,e)}return e}function UE(t,e,n,r,s,i,a,l,c){return t=ry(n,r,!0,t,s,i,a,l,c),t.context=FE(null),n=t.current,r=Zt(),s=Fs(n),i=Br(r,s),i.callback=e??null,Ms(n,i,s),t.current.lanes=s,hc(t,s,r),pn(t,r),t}function dh(t,e,n,r){var s=e.current,i=Zt(),a=Fs(s);return n=FE(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ms(s,e,a),t!==null&&(Jn(t,s,a,i),Iu(t,s,a)),a}function yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sy(t,e){Uw(t,e),(t=t.alternate)&&Uw(t,e)}function Vk(){return null}var BE=typeof reportError=="function"?reportError:function(t){console.error(t)};function iy(t){this._internalRoot=t}hh.prototype.render=iy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));dh(t,e,null,null)};hh.prototype.unmount=iy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bi(function(){dh(null,t,null,null)}),e[Wr]=null}};function hh(t){this._internalRoot=t}hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=v1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&w1(t)}};function oy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bw(){}function Fk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=yd(a);i.call(d)}}var a=UE(e,r,t,0,null,!1,!1,"",Bw);return t._reactRootContainer=a,t[Wr]=a.current,Fl(t.nodeType===8?t.parentNode:t),Bi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=yd(c);l.call(d)}}var c=ry(t,0,!1,null,null,!1,!1,"",Bw);return t._reactRootContainer=c,t[Wr]=c.current,Fl(t.nodeType===8?t.parentNode:t),Bi(function(){dh(e,c,n,r)}),c}function ph(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=yd(a);l.call(c)}}dh(e,a,t,s)}else a=Fk(n,e,t,s,r);return yd(a)}g1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(Tg(e,n|1),pn(e,lt()),!(Se&6)&&(Qo=lt()+500,oi()))}break;case 13:Bi(function(){var r=qr(t,1);if(r!==null){var s=Zt();Jn(r,t,1,s)}}),sy(t,1)}};Sg=function(t){if(t.tag===13){var e=qr(t,134217728);if(e!==null){var n=Zt();Jn(e,t,134217728,n)}sy(t,134217728)}};y1=function(t){if(t.tag===13){var e=Fs(t),n=qr(t,e);if(n!==null){var r=Zt();Jn(n,t,e,r)}sy(t,e)}};v1=function(){return Pe};x1=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};zp=function(t,e,n){switch(e){case"input":if(Op(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sh(r);if(!s)throw Error(H(90));Yb(r),Op(r,s)}}}break;case"textarea":Jb(t,n);break;case"select":e=n.value,e!=null&&jo(t,!!n.multiple,e,!1)}};i1=Zg;o1=Bi;var Uk={usingClientEntryPoint:!1,Events:[pc,bo,sh,r1,s1,Zg]},Za={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bk={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c1(t),t===null?null:t.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||Vk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{eh=ou.inject(Bk),gr=ou}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uk;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oy(e))throw Error(H(200));return Mk(t,e,null,n)};In.createRoot=function(t,e){if(!oy(t))throw Error(H(299));var n=!1,r="",s=BE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ry(t,1,!1,null,null,n,!1,r,s),t[Wr]=e.current,Fl(t.nodeType===8?t.parentNode:t),new iy(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=c1(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return Bi(t)};In.hydrate=function(t,e,n){if(!fh(e))throw Error(H(200));return ph(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!oy(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=BE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=UE(e,null,t,1,n??null,s,!1,i,a),t[Wr]=e.current,Fl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hh(e)};In.render=function(t,e,n){if(!fh(e))throw Error(H(200));return ph(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!fh(t))throw Error(H(40));return t._reactRootContainer?(Bi(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};In.unstable_batchedUpdates=Zg;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fh(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return ph(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(t){console.error(t)}}$E(),$b.exports=In;var pa=$b.exports;const $k=Ab(pa);var zE,$w=pa;zE=$w.createRoot,$w.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kl.apply(this,arguments)}var As;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(As||(As={}));const zw="popstate";function zk(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:l="",hash:c=""}=eo(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),bm("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:vd(i))}function r(s,i){mh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Wk(e,n,r,t)}function ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Hk(){return Math.random().toString(36).substr(2,8)}function Hw(t,e){return{usr:t.state,key:t.key,idx:e}}function bm(t,e,n,r){return n===void 0&&(n=null),Kl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:n,key:e&&e.key||r||Hk()})}function vd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Wk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=As.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Kl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=As.Pop;let S=h(),E=S==null?null:S-d;d=S,c&&c({action:l,location:_.location,delta:E})}function p(S,E){l=As.Push;let w=bm(_.location,S,E);n&&n(w,S),d=h()+1;let C=Hw(w,d),R=_.createHref(w);try{a.pushState(C,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&c&&c({action:l,location:_.location,delta:1})}function v(S,E){l=As.Replace;let w=bm(_.location,S,E);n&&n(w,S),d=h();let C=Hw(w,d),R=_.createHref(w);a.replaceState(C,"",R),i&&c&&c({action:l,location:_.location,delta:0})}function I(S){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof S=="string"?S:vd(S);return w=w.replace(/ $/,"%20"),ct(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let _={get action(){return l},get location(){return t(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(zw,f),c=S,()=>{s.removeEventListener(zw,f),c=null}},createHref(S){return e(s,S)},createURL:I,encodeLocation(S){let E=I(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:v,go(S){return a.go(S)}};return _}var Ww;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ww||(Ww={}));function qk(t,e,n){return n===void 0&&(n="/"),Gk(t,e,n)}function Gk(t,e,n,r){let s=typeof e=="string"?eo(e):e,i=ay(s.pathname||"/",n);if(i==null)return null;let a=HE(t);Kk(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=oR(i);l=rR(a[c],d)}return l}function HE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ct(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Bs([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),HE(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:tR(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of WE(i.path))s(i,a,c)}),e}function WE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=WE(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Kk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Qk=/^:[\w-]+$/,Yk=3,Xk=2,Jk=1,Zk=10,eR=-2,qw=t=>t==="*";function tR(t,e){let n=t.split("/"),r=n.length;return n.some(qw)&&(r+=eR),e&&(r+=Xk),n.filter(s=>!qw(s)).reduce((s,i)=>s+(Qk.test(i)?Yk:i===""?Jk:Zk),r)}function nR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function rR(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=sR({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Bs([i,f.pathname]),pathnameBase:dR(Bs([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Bs([i,f.pathnameBase]))}return a}function sR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let _=l[f]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const I=l[f];return v&&!I?d[p]=void 0:d[p]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function iR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function oR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ay(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const aR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lR=t=>aR.test(t);function cR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?eo(t):t,i;if(n)if(lR(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),mh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=Gw(n.substring(1),"/"):i=Gw(n,e)}else i=e;return{pathname:i,search:hR(r),hash:fR(s)}}function Gw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ly(t,e){let n=uR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=eo(t):(s=Kl({},t),ct(!s.pathname||!s.pathname.includes("?"),Xf("?","pathname","search",s)),ct(!s.pathname||!s.pathname.includes("#"),Xf("#","pathname","hash",s)),ct(!s.search||!s.search.includes("#"),Xf("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=cR(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Bs=t=>t.join("/").replace(/\/\/+/g,"/"),dR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qE=["post","put","patch","delete"];new Set(qE);const mR=["get",...qE];new Set(mR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ql(){return Ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ql.apply(this,arguments)}const uy=g.createContext(null),gR=g.createContext(null),ai=g.createContext(null),gh=g.createContext(null),rs=g.createContext({outlet:null,matches:[],isDataRoute:!1}),GE=g.createContext(null);function yR(t,e){let{relative:n}=e===void 0?{}:e;ma()||ct(!1);let{basename:r,navigator:s}=g.useContext(ai),{hash:i,pathname:a,search:l}=QE(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Bs([r,a])),s.createHref({pathname:c,search:l,hash:i})}function ma(){return g.useContext(gh)!=null}function to(){return ma()||ct(!1),g.useContext(gh).location}function KE(t){g.useContext(ai).static||g.useLayoutEffect(t)}function Bn(){let{isDataRoute:t}=g.useContext(rs);return t?kR():vR()}function vR(){ma()||ct(!1);let t=g.useContext(uy),{basename:e,future:n,navigator:r}=g.useContext(ai),{matches:s}=g.useContext(rs),{pathname:i}=to(),a=JSON.stringify(ly(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return KE(()=>{l.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=cy(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Bs([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}function xR(){let{matches:t}=g.useContext(rs),e=t[t.length-1];return e?e.params:{}}function QE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(ai),{matches:s}=g.useContext(rs),{pathname:i}=to(),a=JSON.stringify(ly(s,r.v7_relativeSplatPath));return g.useMemo(()=>cy(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function wR(t,e){return _R(t,e)}function _R(t,e,n,r){ma()||ct(!1);let{navigator:s}=g.useContext(ai),{matches:i}=g.useContext(rs),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=to(),h;if(e){var f;let S=typeof e=="string"?eo(e):e;c==="/"||(f=S.pathname)!=null&&f.startsWith(c)||ct(!1),h=S}else h=d;let p=h.pathname||"/",v=p;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let I=qk(t,{pathname:v}),_=SR(I&&I.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Bs([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Bs([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&_?g.createElement(gh.Provider,{value:{location:Ql({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:As.Pop}},_):_}function bR(){let t=AR(),e=pR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const ER=g.createElement(bR,null);class NR extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(rs.Provider,{value:this.props.routeContext},g.createElement(GE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TR(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(uy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(rs.Provider,{value:e},r)}function SR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||ct(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:v}=n,I=f.route.loader&&p[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||I){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let v,I=!1,_=null,S=null;n&&(v=l&&f.route.id?l[f.route.id]:void 0,_=f.route.errorElement||ER,c&&(d<0&&p===0?(RR("route-fallback"),I=!0,S=null):d===p&&(I=!0,S=f.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,p+1)),w=()=>{let C;return v?C=_:I?C=S:f.route.Component?C=g.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,g.createElement(TR,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(NR,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var YE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YE||{}),XE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XE||{});function CR(t){let e=g.useContext(uy);return e||ct(!1),e}function IR(t){let e=g.useContext(gR);return e||ct(!1),e}function jR(t){let e=g.useContext(rs);return e||ct(!1),e}function JE(t){let e=jR(),n=e.matches[e.matches.length-1];return n.route.id||ct(!1),n.route.id}function AR(){var t;let e=g.useContext(GE),n=IR(),r=JE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kR(){let{router:t}=CR(YE.UseNavigateStable),e=JE(XE.UseNavigateStable),n=g.useRef(!1);return KE(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ql({fromRouteId:e},i)))},[t,e])}const Kw={};function RR(t,e,n){Kw[t]||(Kw[t]=!0)}function PR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function dy(t){let{to:e,replace:n,state:r,relative:s}=t;ma()||ct(!1);let{future:i,static:a}=g.useContext(ai),{matches:l}=g.useContext(rs),{pathname:c}=to(),d=Bn(),h=cy(e,ly(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function on(t){ct(!1)}function DR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=As.Pop,navigator:i,static:a=!1,future:l}=t;ma()&&ct(!1);let c=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:a,future:Ql({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=eo(r));let{pathname:h="/",search:f="",hash:p="",state:v=null,key:I="default"}=r,_=g.useMemo(()=>{let S=ay(h,c);return S==null?null:{location:{pathname:S,search:f,hash:p,state:v,key:I},navigationType:s}},[c,h,f,p,v,I,s]);return _==null?null:g.createElement(ai.Provider,{value:d},g.createElement(gh.Provider,{children:n,value:_}))}function LR(t){let{children:e,location:n}=t;return wR(Em(e),n)}new Promise(()=>{});function Em(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,Em(r.props.children,i));return}r.type!==on&&ct(!1),!r.props.index||!r.props.children||ct(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Em(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nm.apply(this,arguments)}function OR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function MR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VR(t,e){return t.button===0&&(!e||e==="_self")&&!MR(t)}const FR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UR="6";try{window.__reactRouterVersion=UR}catch{}const BR="startTransition",Qw=Zd[BR];function $R(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=zk({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=g.useCallback(f=>{d&&Qw?Qw(()=>c(f)):c(f)},[c,d]);return g.useLayoutEffect(()=>a.listen(h),[a,h]),g.useEffect(()=>PR(r),[r]),g.createElement(DR,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const zR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=OR(e,FR),{basename:v}=g.useContext(ai),I,_=!1;if(typeof d=="string"&&HR.test(d)&&(I=d,zR))try{let C=new URL(window.location.href),R=d.startsWith("//")?new URL(C.protocol+d):new URL(d),L=ay(R.pathname,v);R.origin===C.origin&&L!=null?d=L+R.search+R.hash:_=!0}catch{}let S=yR(d,{relative:s}),E=WR(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function w(C){r&&r(C),C.defaultPrevented||E(C)}return g.createElement("a",Nm({},p,{href:I||S,onClick:_||i?r:w,ref:n,target:c}))});var Yw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yw||(Yw={}));var Xw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xw||(Xw={}));function WR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=Bn(),d=to(),h=QE(t,{relative:a});return g.useCallback(f=>{if(VR(f,n)){f.preventDefault();let p=r!==void 0?r:vd(d)===vd(h);c(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}const qR=()=>{};var Jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},GR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},eN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,v=d&63;c||(v=64,a||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new KR;const p=i<<2|l>>4;if(r.push(p),d!==64){const v=l<<4&240|d>>2;if(r.push(v),f!==64){const I=d<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QR=function(t){const e=ZE(t);return eN.encodeByteArray(e,!0)},xd=function(t){return QR(t).replace(/\./g,"")},tN=function(t){try{return eN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=()=>YR().__FIREBASE_DEFAULTS__,JR=()=>{if(typeof process>"u"||typeof Jw>"u")return;const t=Jw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tN(t[1]);return e&&JSON.parse(e)},yh=()=>{try{return qR()||XR()||JR()||ZR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nN=t=>{var e,n;return(n=(e=yh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rN=t=>{const e=nN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sN=()=>{var t;return(t=yh())==null?void 0:t.config},iN=t=>{var e;return(e=yh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xd(JSON.stringify(n)),xd(JSON.stringify(a)),""].join(".")}const El={};function tP(){const t={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?t.emulator.push(e):t.prod.push(e);return t}function nP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zw=!1;function fy(t,e){if(typeof window>"u"||typeof document>"u"||!li(window.location.host)||El[t]===e||El[t]||Zw)return;El[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=tP().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Zw=!0,a()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=nP(r),v=n("text"),I=document.getElementById(v)||document.createElement("span"),_=n("learnmore"),S=document.getElementById(_)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const C=p.element;l(C),h(S,_);const R=d();c(w,E),C.append(w,I,S,R),document.body.appendChild(C)}i?(I.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function sP(){var e;const t=(e=yh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aP(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lP(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lN(){try{return typeof indexedDB=="object"}catch{return!1}}function cN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function cP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uP,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,no.prototype.create)}}class no{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?dP(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new $n(s,l,r)}}function dP(t,e){return t.replace(hP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hP=/\{\$([^}]+)}/g;function fP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Kr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(e0(i)&&e0(a)){if(!Kr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function e0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pP(t,e){const n=new mP(t,e);return n.subscribe.bind(n)}class mP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Jf),s.error===void 0&&(s.error=Jf),s.complete===void 0&&(s.complete=Jf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=1e3,vP=2,xP=4*60*60*1e3,wP=.5;function t0(t,e=yP,n=vP){const r=e*Math.pow(n,t),s=Math.round(wP*r*(Math.random()-.5)*2);return Math.min(xP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t){return t&&t._delegate?t._delegate:t}class Fn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EP(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bP(t){return t===Ti?void 0:t}function EP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _P(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const TP={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},SP=xe.INFO,CP={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},IP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=CP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vh{constructor(e){this.name=e,this._logLevel=SP,this._logHandler=IP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const jP=(t,e)=>e.some(n=>t instanceof n);let n0,r0;function AP(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kP(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uN=new WeakMap,Tm=new WeakMap,dN=new WeakMap,Zf=new WeakMap,py=new WeakMap;function RP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n($s(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uN.set(n,t)}).catch(()=>{}),py.set(e,t),e}function PP(t){if(Tm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Tm.set(t,e)}let Sm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DP(t){Sm=t(Sm)}function LP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ep(this),e,...n);return dN.set(r,e.sort?e.sort():[e]),$s(r)}:kP().includes(t)?function(...e){return t.apply(ep(this),e),$s(uN.get(this))}:function(...e){return $s(t.apply(ep(this),e))}}function OP(t){return typeof t=="function"?LP(t):(t instanceof IDBTransaction&&PP(t),jP(t,AP())?new Proxy(t,Sm):t)}function $s(t){if(t instanceof IDBRequest)return RP(t);if(Zf.has(t))return Zf.get(t);const e=OP(t);return e!==t&&(Zf.set(t,e),py.set(e,t)),e}const ep=t=>py.get(t);function hN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=$s(a);return r&&a.addEventListener("upgradeneeded",c=>{r($s(a.result),c.oldVersion,c.newVersion,$s(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const MP=["get","getKey","getAll","getAllKeys","count"],VP=["put","add","delete","clear"],tp=new Map;function s0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=VP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||MP.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return tp.set(e,i),i}DP(t=>({...t,get:(e,n,r)=>s0(e,n)||t.get(e,n,r),has:(e,n)=>!!s0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cm="@firebase/app",i0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new vh("@firebase/app"),BP="@firebase/app-compat",$P="@firebase/analytics-compat",zP="@firebase/analytics",HP="@firebase/app-check-compat",WP="@firebase/app-check",qP="@firebase/auth",GP="@firebase/auth-compat",KP="@firebase/database",QP="@firebase/data-connect",YP="@firebase/database-compat",XP="@firebase/functions",JP="@firebase/functions-compat",ZP="@firebase/installations",e4="@firebase/installations-compat",t4="@firebase/messaging",n4="@firebase/messaging-compat",r4="@firebase/performance",s4="@firebase/performance-compat",i4="@firebase/remote-config",o4="@firebase/remote-config-compat",a4="@firebase/storage",l4="@firebase/storage-compat",c4="@firebase/firestore",u4="@firebase/ai",d4="@firebase/firestore-compat",h4="firebase",f4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",p4={[Cm]:"fire-core",[BP]:"fire-core-compat",[zP]:"fire-analytics",[$P]:"fire-analytics-compat",[WP]:"fire-app-check",[HP]:"fire-app-check-compat",[qP]:"fire-auth",[GP]:"fire-auth-compat",[KP]:"fire-rtdb",[QP]:"fire-data-connect",[YP]:"fire-rtdb-compat",[XP]:"fire-fn",[JP]:"fire-fn-compat",[ZP]:"fire-iid",[e4]:"fire-iid-compat",[t4]:"fire-fcm",[n4]:"fire-fcm-compat",[r4]:"fire-perf",[s4]:"fire-perf-compat",[i4]:"fire-rc",[o4]:"fire-rc-compat",[a4]:"fire-gcs",[l4]:"fire-gcs-compat",[c4]:"fire-fst",[d4]:"fire-fst-compat",[u4]:"fire-vertex","fire-js":"fire-js",[h4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,m4=new Map,jm=new Map;function o0(t,e){try{t.container.addComponent(e)}catch(n){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nr(t){const e=t.name;if(jm.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,t);for(const n of wd.values())o0(n,t);for(const n of m4.values())o0(n,t);return!0}function ci(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new no("app","Firebase",g4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=f4;function fN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Im,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw zs.create("bad-app-name",{appName:String(s)});if(n||(n=sN()),!n)throw zs.create("no-options");const i=wd.get(s);if(i){if(Kr(n,i.options)&&Kr(r,i.config))return i;throw zs.create("duplicate-app",{appName:s})}const a=new NP(s);for(const c of jm.values())a.addComponent(c);const l=new y4(n,r,a);return wd.set(s,l),l}function xh(t=Im){const e=wd.get(t);if(!e&&t===Im&&sN())return fN();if(!e)throw zs.create("no-app",{appName:t});return e}function mn(t,e,n){let r=p4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(a.join(" "));return}nr(new Fn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="firebase-heartbeat-database",x4=1,Yl="firebase-heartbeat-store";let np=null;function pN(){return np||(np=hN(v4,x4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yl)}catch(n){console.warn(n)}}}}).catch(t=>{throw zs.create("idb-open",{originalErrorMessage:t.message})})),np}async function w4(t){try{const n=(await pN()).transaction(Yl),r=await n.objectStore(Yl).get(mN(t));return await n.done,r}catch(e){if(e instanceof $n)Qr.warn(e.message);else{const n=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(n.message)}}}async function a0(t,e){try{const r=(await pN()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(e,mN(t)),await r.done}catch(n){if(n instanceof $n)Qr.warn(n.message);else{const r=zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qr.warn(r.message)}}}function mN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=1024,b4=30;class E4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new T4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=l0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>b4){const a=S4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=l0(),{heartbeatsToSend:r,unsentEntries:s}=N4(this._heartbeatsCache.heartbeats),i=xd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qr.warn(n),""}}}function l0(){return new Date().toISOString().substring(0,10)}function N4(t,e=_4){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),c0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),c0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class T4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lN()?cN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function c0(t){return xd(JSON.stringify({version:2,heartbeats:t})).length}function S4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t){nr(new Fn("platform-logger",e=>new FP(e),"PRIVATE")),nr(new Fn("heartbeat",e=>new E4(e),"PRIVATE")),mn(Cm,i0,t),mn(Cm,i0,"esm2020"),mn("fire-js","")}C4("");function gN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const I4=gN,yN=new no("auth","Firebase",gN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new vh("@firebase/auth");function j4(t,...e){_d.logLevel<=xe.WARN&&_d.warn(`Auth (${ro}): ${t}`,...e)}function Lu(t,...e){_d.logLevel<=xe.ERROR&&_d.error(`Auth (${ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw gy(t,...e)}function Zn(t,...e){return gy(t,...e)}function my(t,e,n){const r={...I4(),[e]:n};return new no("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return my(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function A4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(t,"argument-error"),my(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yN.create(t,...e)}function ce(t,e,...n){if(!t)throw gy(e,...n)}function Vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lu(e),new Error(e)}function Yr(t,e){t||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function k4(){return u0()==="http:"||u0()==="https:"}function u0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(k4()||aN()||"connection"in navigator)?navigator.onLine:!0}function P4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=rP()||oP()}get(){return R4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],O4=new yc(3e4,6e4);function ui(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ss(t,e,n,r,s={}){return xN(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=gc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return iP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&li(t.emulatorConfig.host)&&(d.credentials="include"),vN.fetch()(await wN(t,t.config.apiHost,n,l),d)})}async function xN(t,e,n){t._canInitEmulator=!1;const r={...D4,...e};try{const s=new V4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw au(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw au(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw au(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw au(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw my(t,h,d);Un(t,h)}}catch(s){if(s instanceof $n)throw s;Un(t,"network-request-failed",{message:String(s)})}}async function vc(t,e,n,r,s={}){const i=await ss(t,e,n,r,s);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wN(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?yy(t.config,s):`${t.config.apiScheme}://${s}`;return L4.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function M4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),O4.get())})}}function au(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zn(t,e,r);return s.customData._tokenResponse=n,s}function d0(t){return t!==void 0&&t.enterprise!==void 0}class F4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return M4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function U4(t,e){return ss(t,"GET","/v2/recaptchaConfig",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B4(t,e){return ss(t,"POST","/v1/accounts:delete",e)}async function bd(t,e){return ss(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $4(t,e=!1){const n=Fe(t),r=await n.getIdToken(e),s=vy(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Nl(rp(s.auth_time)),issuedAtTime:Nl(rp(s.iat)),expirationTime:Nl(rp(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function rp(t){return Number(t)*1e3}function vy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lu("JWT malformed, contained fewer than 3 sections"),null;try{const s=tN(n);return s?JSON.parse(s):(Lu("Failed to decode base64 JWT payload"),null)}catch(s){return Lu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function h0(t){const e=vy(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&z4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function z4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Yo(t,bd(e,{idToken:n}));ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?_N(s.providerUserInfo):[],a=q4(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new km(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function W4(t){const e=Fe(t);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function _N(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(t,e){const n=await xN(t,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await wN(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&li(t.emulatorConfig.host)&&(c.credentials="include"),vN.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function K4(t,e){return ss(t,"POST","/v2/accounts:revokeToken",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=h0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await G4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Lo;return r&&(ce(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new H4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new km(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $4(this,e)}reload(){return W4(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ed(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await Yo(this,B4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:v,providerData:I,stsTokenManager:_}=n;ce(f&&_,e,"internal-error");const S=Lo.fromJSON(this.name,_);ce(typeof f=="string",e,"internal-error"),fs(r,e.name),fs(s,e.name),ce(typeof p=="boolean",e,"internal-error"),ce(typeof v=="boolean",e,"internal-error"),fs(i,e.name),fs(a,e.name),fs(l,e.name),fs(c,e.name),fs(d,e.name),fs(h,e.name);const E=new Qn({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:S,createdAt:d,lastLoginAt:h});return I&&Array.isArray(I)&&(E.providerData=I.map(w=>({...w}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Lo;s.updateFromServerResponse(n);const i=new Qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ed(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?_N(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Lo;l.updateFromIdToken(r);const c=new Qn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new km(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function Fr(t){Yr(t instanceof Function,"Expected a class definition");let e=f0.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,f0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bN.type="NONE";const p0=bN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t,e,n){return`firebase:${t}:${e}:${n}`}class Oo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ou(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ou("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bd(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oo(Fr(p0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fr(p0);const a=Ou(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const p=await bd(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Qn._fromGetAccountInfoResponse(e,p,h)}else f=Qn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Oo(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Oo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IN(e))return"Blackberry";if(jN(e))return"Webos";if(NN(e))return"Safari";if((e.includes("chrome/")||TN(e))&&!e.includes("edge/"))return"Chrome";if(CN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EN(t=qt()){return/firefox\//i.test(t)}function NN(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TN(t=qt()){return/crios\//i.test(t)}function SN(t=qt()){return/iemobile/i.test(t)}function CN(t=qt()){return/android/i.test(t)}function IN(t=qt()){return/blackberry/i.test(t)}function jN(t=qt()){return/webos/i.test(t)}function xy(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Q4(t=qt()){var e;return xy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Y4(){return aP()&&document.documentMode===10}function AN(t=qt()){return xy(t)||CN(t)||jN(t)||IN(t)||/windows phone/i.test(t)||SN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t,e=[]){let n;switch(t){case"Browser":n=m0(qt());break;case"Worker":n=`${m0(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J4(t,e={}){return ss(t,"GET","/v2/passwordPolicy",ui(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=6;class eD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Z4,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new X4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bd(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(cn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject($r(this));const n=e?Fe(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await J4(this),n=new eD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new no("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await K4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&j4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function di(t){return Fe(t)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=pP(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nD(t){wh=t}function RN(t){return wh.loadJS(t)}function rD(){return wh.recaptchaEnterpriseScript}function sD(){return wh.gapiScript}function iD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class oD{constructor(){this.enterprise=new aD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class aD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const lD="recaptcha-enterprise",PN="NO_RECAPTCHA";class cD{constructor(e){this.type=lD,this.auth=di(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{U4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new F4(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;d0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(PN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oD().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&d0(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=rD();c.length!==0&&(c+=l),RN(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function y0(t,e,n,r=!1,s=!1){const i=new cD(t);let a;if(s)a=PN;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Rm(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await y0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await y0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e){const n=ci(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Kr(i,e??{}))return s;Un(s,"already-initialized")}return n.initialize({options:e})}function dD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hD(t,e,n){const r=di(t);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=DN(e),{host:a,port:l}=fD(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(Kr(d,r.config.emulator)&&Kr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,li(a)?(hy(`${i}//${a}${c}`),fy("Auth",!0)):pD()}function DN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fD(t){const e=DN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:v0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:v0(a)}}}function v0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,n){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function mD(t,e){return ss(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e){return vc(t,"POST","/v1/accounts:signInWithPassword",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return vc(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}async function vD(t,e){return vc(t,"POST","/v1/accounts:signInWithEmailLink",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends wy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,n,"signInWithPassword",gD);case"emailLink":return yD(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rm(e,r,"signUpPassword",mD);case"emailLink":return vD(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e){return vc(t,"POST","/v1/accounts:signInWithIdp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="http://localhost";class $i extends wy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new $i(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mo(e,n)}buildRequest(){const e={requestUri:xD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _D(t){const e=al(ll(t)).link,n=e?al(ll(e)).deep_link_id:null,r=al(ll(t)).deep_link_id;return(r?al(ll(r)).link:null)||r||n||e||t}class _y{constructor(e){const n=al(ll(e)),r=n.apiKey??null,s=n.oobCode??null,i=wD(n.mode??null);ce(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_D(e);try{return new _y(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,n){return Xl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_y.parseLink(n);return ce(r,"argument-error"),Xl._fromEmailAndCode(e,r.code,r.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends by{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends xc{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $i._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.GOOGLE_SIGN_IN_METHOD="google.com";Ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends xc{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends xc{constructor(){super("twitter.com")}static credential(e,n){return $i._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ts.credential(n,r)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t,e){return vc(t,"POST","/v1/accounts:signUp",ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qn._fromIdTokenResponse(e,r,s),a=x0(r);return new zi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=x0(r);return new zi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function x0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends $n{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nd(e,n,r,s)}}function LN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(t,i,e,r):i})}async function ED(t,e,n=!1){const r=await Yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e,n=!1){const{auth:r}=t;if(cn(r.app))return Promise.reject($r(r));const s="reauthenticate";try{const i=await Yo(t,LN(r,s,e,t),n);ce(i.idToken,r,"internal-error");const a=vy(i.idToken);ce(a,r,"internal-error");const{sub:l}=a;return ce(t.uid===l,r,"user-mismatch"),zi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e,n=!1){if(cn(t.app))return Promise.reject($r(t));const r="signIn",s=await LN(t,r,e),i=await zi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function TD(t,e){return ON(di(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t){const e=di(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SD(t,e,n){if(cn(t.app))return Promise.reject($r(t));const r=di(t),a=await Rm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&MN(t),c}),l=await zi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function CD(t,e,n){return cn(t.app)?Promise.reject($r(t)):TD(Fe(t),ga.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e){return ss(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Fe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Yo(r,ID(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function jD(t,e,n,r){return Fe(t).onIdTokenChanged(e,n,r)}function AD(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function kD(t,e,n,r){return Fe(t).onAuthStateChanged(e,n,r)}function RD(t){return Fe(t).signOut()}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=1e3,DD=10;class UN extends FN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Y4()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,DD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UN.type="LOCAL";const LD=UN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN extends FN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BN.type="SESSION";const $N=BN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await OD(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Ey("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function VD(t){vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function FD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function BD(){return zN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebaseLocalStorageDb",$D=1,Sd="firebaseLocalStorage",WN="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bh(t,e){return t.transaction([Sd],e?"readwrite":"readonly").objectStore(Sd)}function zD(){const t=indexedDB.deleteDatabase(HN);return new wc(t).toPromise()}function Pm(){const t=indexedDB.open(HN,$D);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Sd,{keyPath:WN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Sd)?e(r):(r.close(),await zD(),e(await Pm()))})})}async function w0(t,e,n){const r=bh(t,!0).put({[WN]:e,value:n});return new wc(r).toPromise()}async function HD(t,e){const n=bh(t,!1).get(e),r=await new wc(n).toPromise();return r===void 0?null:r.value}function _0(t,e){const n=bh(t,!0).delete(e);return new wc(n).toPromise()}const WD=800,qD=3;class qN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(BD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await FD(),!this.activeServiceWorker)return;this.sender=new MD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pm();return await w0(e,Td,"1"),await _0(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>HD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bh(s,!1).getAll();return new wc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qN.type="LOCAL";const GD=qN;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e){return e?Fr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny extends wy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KD(t){return ON(t.auth,new Ny(t),t.bypassAuthState)}function QD(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),ND(n,new Ny(t),t.bypassAuthState)}async function YD(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),ED(n,new Ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KD;case"linkViaPopup":case"linkViaRedirect":return YD;case"reauthViaPopup":case"reauthViaRedirect":return QD;default:Un(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new yc(2e3,1e4);async function JD(t,e,n){if(cn(t.app))return Promise.reject(Zn(t,"operation-not-supported-in-this-environment"));const r=di(t);A4(t,e,by);const s=GN(r,n);return new ji(r,"signInViaPopup",e,s).executeNotNull()}class ji extends KN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XD.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="pendingRedirect",Mu=new Map;class eL extends KN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const r=await tL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tL(t,e){const n=sL(e),r=rL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function nL(t,e){Mu.set(t._key(),e)}function rL(t){return Fr(t._redirectPersistence)}function sL(t){return Ou(ZD,t.config.apiKey,t.name)}async function iL(t,e,n=!1){if(cn(t.app))return Promise.reject($r(t));const r=di(t),s=GN(r,e),a=await new eL(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=10*60*1e3;class aL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oL&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e={}){return ss(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dL=/^https?/;async function hL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cL(t);for(const n of e)try{if(fL(n))return}catch{}Un(t,"unauthorized-domain")}function fL(t){const e=Am(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!dL.test(n))return!1;if(uL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new yc(3e4,6e4);function E0(){const t=vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mL(t){return new Promise((e,n)=>{var s,i,a;function r(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),n(Zn(t,"network-request-failed"))},timeout:pL.get()})}if((i=(s=vr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=vr().gapi)!=null&&a.load)r();else{const l=iD("iframefcb");return vr()[l]=()=>{gapi.load?r():n(Zn(t,"network-request-failed"))},RN(`${sD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function gL(t){return Vu=Vu||mL(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new yc(5e3,15e3),vL="__/auth/iframe",xL="emulator/auth/iframe",wL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_L=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bL(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yy(e,xL):`https://${t.config.authDomain}/${vL}`,r={apiKey:e.apiKey,appName:t.name,v:ro},s=_L.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${gc(r).slice(1)}`}async function EL(t){const e=await gL(t),n=vr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:bL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Zn(t,"network-request-failed"),l=vr().setTimeout(()=>{i(a)},yL.get());function c(){vr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TL=500,SL=600,CL="_blank",IL="http://localhost";class N0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jL(t,e,n,r=TL,s=SL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...NL,width:r.toString(),height:s.toString(),top:i,left:a},d=qt().toLowerCase();n&&(l=TN(d)?CL:n),EN(d)&&(e=e||IL,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[v,I])=>`${p}${v}=${I},`,"");if(Q4(d)&&l!=="_self")return AL(e||"",l),new N0(null);const f=window.open(e||"",l,h);ce(f,t,"popup-blocked");try{f.focus()}catch{}return new N0(f)}function AL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="__/auth/handler",RL="emulator/auth/handler",PL=encodeURIComponent("fac");async function T0(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ro,eventId:s};if(e instanceof by){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof xc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${PL}=${encodeURIComponent(c)}`:"";return`${DL(t)}?${gc(l).slice(1)}${d}`}function DL({config:t}){return t.emulator?yy(t,RL):`https://${t.authDomain}/${kL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="webStorageSupport";class LL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$N,this._completeRedirectFn=iL,this._overrideRedirectResult=nL}async _openPopup(e,n,r,s){var a;Yr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await T0(e,n,r,Am(),s);return jL(e,i,Ey())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await T0(e,n,r,Am(),s);return VD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await EL(e),r=new aL(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(sp,{type:sp},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[sp];i!==void 0&&n(!!i),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AN()||NN()||xy()}}const OL=LL;var S0="@firebase/auth",C0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FL(t){nr(new Fn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ce(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kN(t)},d=new tD(r,s,i,c);return dD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nr(new Fn("auth-internal",e=>{const n=di(e.getProvider("auth").getImmediate());return(r=>new ML(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mn(S0,C0,VL(t)),mn(S0,C0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=5*60,BL=iN("authIdTokenMaxAge")||UL;let I0=null;const $L=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BL)return;const s=n==null?void 0:n.token;I0!==s&&(I0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zL(t=xh()){const e=ci(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uD(t,{popupRedirectResolver:OL,persistence:[GD,LD,$N]}),r=iN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=$L(i.toString());AD(n,a,()=>a(n.currentUser)),jD(n,l=>a(l))}}const s=nN("auth");return s&&hD(n,`http://${s}`),n}function HL(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}nD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",HL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FL("Browser");var WL="firebase",qL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn(WL,qL,"app");const YN="@firebase/installations",Ty="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=1e4,JN=`w:${Ty}`,ZN="FIS_v2",GL="https://firebaseinstallations.googleapis.com/v1",KL=60*60*1e3,QL="installations",YL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Hi=new no(QL,YL,XL);function eT(t){return t instanceof $n&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT({projectId:t}){return`${GL}/projects/${t}/installations`}function nT(t){return{token:t.token,requestStatus:2,expiresIn:ZL(t.expiresIn),creationTime:Date.now()}}async function rT(t,e){const r=(await e.json()).error;return Hi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function sT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function JL(t,{refreshToken:e}){const n=sT(t);return n.append("Authorization",eO(e)),n}async function iT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ZL(t){return Number(t.replace("s","000"))}function eO(t){return`${ZN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=tT(t),s=sT(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:ZN,appId:t.appId,sdkVersion:JN},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await iT(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:nT(d.authToken)}}else throw await rT("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=/^[cdef][\w-]{21}$/,Dm="";function sO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=iO(t);return rO.test(n)?n:Dm}catch{return Dm}}function iO(t){return nO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Map;function lT(t,e){const n=Eh(t);cT(n,e),oO(n,e)}function cT(t,e){const n=aT.get(t);if(n)for(const r of n)r(e)}function oO(t,e){const n=aO();n&&n.postMessage({key:t,fid:e}),lO()}let Ai=null;function aO(){return!Ai&&"BroadcastChannel"in self&&(Ai=new BroadcastChannel("[Firebase] FID Change"),Ai.onmessage=t=>{cT(t.data.key,t.data.fid)}),Ai}function lO(){aT.size===0&&Ai&&(Ai.close(),Ai=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="firebase-installations-database",uO=1,Wi="firebase-installations-store";let ip=null;function Sy(){return ip||(ip=hN(cO,uO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wi)}}})),ip}async function Cd(t,e){const n=Eh(t),s=(await Sy()).transaction(Wi,"readwrite"),i=s.objectStore(Wi),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&lT(t,e.fid),e}async function uT(t){const e=Eh(t),r=(await Sy()).transaction(Wi,"readwrite");await r.objectStore(Wi).delete(e),await r.done}async function Nh(t,e){const n=Eh(t),s=(await Sy()).transaction(Wi,"readwrite"),i=s.objectStore(Wi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&lT(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cy(t){let e;const n=await Nh(t.appConfig,r=>{const s=dO(r),i=hO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Dm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function dO(t){const e=t||{fid:sO(),registrationStatus:0};return dT(e)}function hO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Hi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=fO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pO(t)}:{installationEntry:e}}async function fO(t,e){try{const n=await tO(t,e);return Cd(t.appConfig,n)}catch(n){throw eT(n)&&n.customData.serverCode===409?await uT(t.appConfig):await Cd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function pO(t){let e=await j0(t.appConfig);for(;e.registrationStatus===1;)await oT(100),e=await j0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Cy(t);return r||n}return e}function j0(t){return Nh(t,e=>{if(!e)throw Hi.create("installation-not-found");return dT(e)})}function dT(t){return mO(t)?{fid:t.fid,registrationStatus:0}:t}function mO(t){return t.registrationStatus===1&&t.registrationTime+XN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO({appConfig:t,heartbeatServiceProvider:e},n){const r=yO(t,n),s=JL(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:JN,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await iT(()=>fetch(r,l));if(c.ok){const d=await c.json();return nT(d)}else throw await rT("Generate Auth Token",c)}function yO(t,{fid:e}){return`${tT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iy(t,e=!1){let n;const r=await Nh(t.appConfig,i=>{if(!hT(i))throw Hi.create("not-registered");const a=i.authToken;if(!e&&wO(a))return i;if(a.requestStatus===1)return n=vO(t,e),i;{if(!navigator.onLine)throw Hi.create("app-offline");const l=bO(i);return n=xO(t,l),l}});return n?await n:r.authToken}async function vO(t,e){let n=await A0(t.appConfig);for(;n.authToken.requestStatus===1;)await oT(100),n=await A0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Iy(t,e):r}function A0(t){return Nh(t,e=>{if(!hT(e))throw Hi.create("not-registered");const n=e.authToken;return EO(n)?{...e,authToken:{requestStatus:0}}:e})}async function xO(t,e){try{const n=await gO(t,e),r={...e,authToken:n};return await Cd(t.appConfig,r),n}catch(n){if(eT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await uT(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Cd(t.appConfig,r)}throw n}}function hT(t){return t!==void 0&&t.registrationStatus===2}function wO(t){return t.requestStatus===2&&!_O(t)}function _O(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+KL}function bO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function EO(t){return t.requestStatus===1&&t.requestTime+XN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(t){const e=t,{installationEntry:n,registrationPromise:r}=await Cy(e);return r?r.catch(console.error):Iy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e=!1){const n=t;return await SO(n),(await Iy(n,e)).token}async function SO(t){const{registrationPromise:e}=await Cy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){if(!t||!t.options)throw op("App Configuration");if(!t.name)throw op("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw op(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function op(t){return Hi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="installations",IO="installations-internal",jO=t=>{const e=t.getProvider("app").getImmediate(),n=CO(e),r=ci(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},AO=t=>{const e=t.getProvider("app").getImmediate(),n=ci(e,fT).getImmediate();return{getId:()=>NO(n),getToken:s=>TO(n,s)}};function kO(){nr(new Fn(fT,jO,"PUBLIC")),nr(new Fn(IO,AO,"PRIVATE"))}kO();mn(YN,Ty);mn(YN,Ty,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="analytics",RO="firebase_id",PO="origin",DO=60*1e3,LO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new vh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Nn=new no("analytics","Analytics",OO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t){if(!t.startsWith(jy)){const e=Nn.create("invalid-gtag-resource",{gtagURL:t});return en.warn(e.message),""}return t}function pT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function VO(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function FO(t,e){const n=VO("firebase-js-sdk-policy",{createScriptURL:MO}),r=document.createElement("script"),s=`${jy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function UO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function BO(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await pT(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){en.error(l)}t("config",s,i)}async function $O(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await pT(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){en.error(i)}}function zO(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await $O(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await BO(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){en.error(l)}}return s}function HO(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=zO(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function WO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(jy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=30,GO=1e3;class KO{constructor(e={},n=GO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const mT=new KO;function QO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function YO(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:QO(n)},s=LO.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Nn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function XO(t,e=mT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Nn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Nn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new eM;return setTimeout(async()=>{l.abort()},DO),gT({appId:r,apiKey:s,measurementId:i},a,l,e)}async function gT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=mT){var l;const{appId:i,measurementId:a}=t;try{await JO(r,e)}catch(c){if(a)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await YO(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!ZO(d)){if(s.deleteThrottleMetadata(i),a)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?t0(n,s.intervalMillis,qO):t0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),en.debug(`Calling attemptFetch again in ${h} millis`),gT(t,f,r,s)}}function JO(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZO(t){if(!(t instanceof $n)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class eM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function tM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function nM(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(){if(lN())try{await cN()}catch(t){return en.warn(Nn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return en.warn(Nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function sM(t,e,n,r,s,i,a){const l=XO(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>en.error(p)),e.push(l);const c=rM().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([l,c]);WO(i)||FO(i,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[PO]="firebase",f.update=!0,h!=null&&(f[RO]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.app=e}_delete(){return delete Vo[this.app.options.appId],Promise.resolve()}}let Vo={},k0=[];const R0={};let ap="dataLayer",oM="gtag",P0,Ay,D0=!1;function aM(){const t=[];if(aN()&&t.push("This is a browser extension environment."),cP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Nn.create("invalid-analytics-context",{errorInfo:e});en.warn(n.message)}}function lM(t,e,n){aM();const r=t.options.appId;if(!r)throw Nn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Nn.create("no-api-key");if(Vo[r]!=null)throw Nn.create("already-exists",{id:r});if(!D0){UO(ap);const{wrappedGtag:i,gtagCore:a}=HO(Vo,k0,R0,ap,oM);Ay=i,P0=a,D0=!0}return Vo[r]=sM(t,k0,R0,e,P0,ap,n),new iM(t)}function cM(t=xh()){t=Fe(t);const e=ci(t,Id);return e.isInitialized()?e.getImmediate():uM(t)}function uM(t,e={}){const n=ci(t,Id);if(n.isInitialized()){const s=n.getImmediate();if(Kr(e,n.getOptions()))return s;throw Nn.create("already-initialized")}return n.initialize({options:e})}function dM(t,e,n){t=Fe(t),nM(Ay,Vo[t.app.options.appId],e,n).catch(r=>en.error(r))}function hM(t,e,n,r){t=Fe(t),tM(Ay,Vo[t.app.options.appId],e,n,r).catch(s=>en.error(s))}const L0="@firebase/analytics",O0="0.10.19";function fM(){nr(new Fn(Id,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return lM(r,s,n)},"PUBLIC")),nr(new Fn("analytics-internal",t,"PRIVATE")),mn(L0,O0),mn(L0,O0,"esm2020");function t(e){try{const n=e.getProvider(Id).getImmediate();return{logEvent:(r,s,i)=>hM(n,r,s,i),setUserProperties:(r,s)=>dM(n,r,s)}}catch(n){throw Nn.create("interop-component-reg-failed",{reason:n})}}}fM();var M0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hs,yT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,y){function T(){}T.prototype=y.prototype,N.F=y.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(b,j,k){for(var P=Array(arguments.length-2),W=2;W<arguments.length;W++)P[W-2]=arguments[W];return y.prototype[j].apply(b,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,y,T){T||(T=0);const b=Array(16);if(typeof y=="string")for(var j=0;j<16;++j)b[j]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(j=0;j<16;++j)b[j]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=N.g[0],T=N.g[1],j=N.g[2];let k=N.g[3],P;P=y+(k^T&(j^k))+b[0]+3614090360&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[1]+3905402710&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[2]+606105819&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[3]+3250441966&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+b[4]+4118548399&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[5]+1200080426&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[6]+2821735955&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[7]+4249261313&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+b[8]+1770035416&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[9]+2336552879&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[10]+4294925233&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[11]+2304563134&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+b[12]+1804603682&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+b[13]+4254626195&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+b[14]+2792965006&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+b[15]+1236535329&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(j^k&(T^j))+b[1]+4129170786&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[6]+3225465664&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[11]+643717713&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[0]+3921069994&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+b[5]+3593408605&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[10]+38016083&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[15]+3634488961&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[4]+3889429448&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+b[9]+568446438&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[14]+3275163606&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[3]+4107603335&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[8]+1163531501&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+b[13]+2850285829&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+b[2]+4243563512&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+b[7]+1735328473&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+b[12]+2368359562&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(T^j^k)+b[5]+4294588738&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[8]+2272392833&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[11]+1839030562&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[14]+4259657740&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+b[1]+2763975236&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[4]+1272893353&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[7]+4139469664&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[10]+3200236656&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+b[13]+681279174&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[0]+3936430074&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[3]+3572445317&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[6]+76029189&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+b[9]+3654602809&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+b[12]+3873151461&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+b[15]+530742520&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+b[2]+3299628645&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(j^(T|~k))+b[0]+4096336452&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[7]+1126891415&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[14]+2878612391&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[5]+4237533241&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+b[12]+1700485571&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[3]+2399980690&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[10]+4293915773&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[1]+2240044497&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+b[8]+1873313359&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[15]+4264355552&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[6]+2734768916&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[13]+1309151649&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+b[4]+4149444226&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+b[11]+3174756917&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+b[2]+718787259&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+b[9]+3951481745&4294967295,N.g[0]=N.g[0]+y&4294967295,N.g[1]=N.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+k&4294967295}r.prototype.v=function(N,y){y===void 0&&(y=N.length);const T=y-this.blockSize,b=this.C;let j=this.h,k=0;for(;k<y;){if(j==0)for(;k<=T;)s(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<y;)if(b[j++]=N.charCodeAt(k++),j==this.blockSize){s(this,b),j=0;break}}else for(;k<y;)if(b[j++]=N[k++],j==this.blockSize){s(this,b),j=0;break}}this.h=j,this.o+=y},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var y=1;y<N.length-8;++y)N[y]=0;y=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=y&255,y/=256;for(this.v(N),N=Array(16),y=0,T=0;T<4;++T)for(let b=0;b<32;b+=8)N[y++]=this.g[T]>>>b&255;return N};function i(N,y){var T=l;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=y(N)}function a(N,y){this.h=y;const T=[];let b=!0;for(let j=N.length-1;j>=0;j--){const k=N[j]|0;b&&k==y||(T[j]=k,b=!1)}this.g=T}var l={};function c(N){return-128<=N&&N<128?i(N,function(y){return new a([y|0],y<0?-1:0)}):new a([N|0],N<0?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return f;if(N<0)return S(d(-N));const y=[];let T=1;for(let b=0;N>=T;b++)y[b]=N/T|0,T*=4294967296;return new a(y,0)}function h(N,y){if(N.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(N.charAt(0)=="-")return S(h(N.substring(1),y));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(y,8));let b=f;for(let k=0;k<N.length;k+=8){var j=Math.min(8,N.length-k);const P=parseInt(N.substring(k,k+j),y);j<8?(j=d(Math.pow(y,j)),b=b.j(j).add(d(P))):(b=b.j(T),b=b.add(d(P)))}return b}var f=c(0),p=c(1),v=c(16777216);t=a.prototype,t.m=function(){if(_(this))return-S(this).m();let N=0,y=1;for(let T=0;T<this.g.length;T++){const b=this.i(T);N+=(b>=0?b:4294967296+b)*y,y*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(I(this))return"0";if(_(this))return"-"+S(this).toString(N);const y=d(Math.pow(N,6));var T=this;let b="";for(;;){const j=R(T,y).g;T=E(T,j.j(y));let k=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=j,I(T))return k+b;for(;k.length<6;)k="0"+k;b=k+b}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function I(N){if(N.h!=0)return!1;for(let y=0;y<N.g.length;y++)if(N.g[y]!=0)return!1;return!0}function _(N){return N.h==-1}t.l=function(N){return N=E(this,N),_(N)?-1:I(N)?0:1};function S(N){const y=N.g.length,T=[];for(let b=0;b<y;b++)T[b]=~N.g[b];return new a(T,~N.h).add(p)}t.abs=function(){return _(this)?S(this):this},t.add=function(N){const y=Math.max(this.g.length,N.g.length),T=[];let b=0;for(let j=0;j<=y;j++){let k=b+(this.i(j)&65535)+(N.i(j)&65535),P=(k>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);b=P>>>16,k&=65535,P&=65535,T[j]=P<<16|k}return new a(T,T[T.length-1]&-2147483648?-1:0)};function E(N,y){return N.add(S(y))}t.j=function(N){if(I(this)||I(N))return f;if(_(this))return _(N)?S(this).j(S(N)):S(S(this).j(N));if(_(N))return S(this.j(S(N)));if(this.l(v)<0&&N.l(v)<0)return d(this.m()*N.m());const y=this.g.length+N.g.length,T=[];for(var b=0;b<2*y;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(let j=0;j<N.g.length;j++){const k=this.i(b)>>>16,P=this.i(b)&65535,W=N.i(j)>>>16,se=N.i(j)&65535;T[2*b+2*j]+=P*se,w(T,2*b+2*j),T[2*b+2*j+1]+=k*se,w(T,2*b+2*j+1),T[2*b+2*j+1]+=P*W,w(T,2*b+2*j+1),T[2*b+2*j+2]+=k*W,w(T,2*b+2*j+2)}for(N=0;N<y;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=y;N<2*y;N++)T[N]=0;return new a(T,0)};function w(N,y){for(;(N[y]&65535)!=N[y];)N[y+1]+=N[y]>>>16,N[y]&=65535,y++}function C(N,y){this.g=N,this.h=y}function R(N,y){if(I(y))throw Error("division by zero");if(I(N))return new C(f,f);if(_(N))return y=R(S(N),y),new C(S(y.g),S(y.h));if(_(y))return y=R(N,S(y)),new C(S(y.g),y.h);if(N.g.length>30){if(_(N)||_(y))throw Error("slowDivide_ only works with positive integers.");for(var T=p,b=y;b.l(N)<=0;)T=L(T),b=L(b);var j=A(T,1),k=A(b,1);for(b=A(b,2),T=A(T,2);!I(b);){var P=k.add(b);P.l(N)<=0&&(j=j.add(T),k=P),b=A(b,1),T=A(T,1)}return y=E(N,j.j(y)),new C(j,y)}for(j=f;N.l(y)>=0;){for(T=Math.max(1,Math.floor(N.m()/y.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),k=d(T),P=k.j(y);_(P)||P.l(N)>0;)T-=b,k=d(T),P=k.j(y);I(k)&&(k=p),j=j.add(k),N=E(N,P)}return new C(j,N)}t.B=function(N){return R(this,N).h},t.and=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)&N.i(b);return new a(T,this.h&N.h)},t.or=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)|N.i(b);return new a(T,this.h|N.h)},t.xor=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)^N.i(b);return new a(T,this.h^N.h)};function L(N){const y=N.g.length+1,T=[];for(let b=0;b<y;b++)T[b]=N.i(b)<<1|N.i(b-1)>>>31;return new a(T,N.h)}function A(N,y){const T=y>>5;y%=32;const b=N.g.length-T,j=[];for(let k=0;k<b;k++)j[k]=y>0?N.i(k+T)>>>y|N.i(k+T+1)<<32-y:N.i(k+T);return new a(j,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Hs=a}).apply(typeof M0<"u"?M0:typeof self<"u"?self:typeof window<"u"?window:{});var lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,cl,xT,Fu,Lm,wT,_T,bT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof lu=="object"&&lu];for(var m=0;m<u.length;++m){var x=u[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var x=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var V=u[D];if(!(V in x))break e;x=x[V]}u=u[u.length-1],D=x[u],m=m(D),m!=D&&m!=null&&e(x,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var x=[],D;for(D in m)Object.prototype.hasOwnProperty.call(m,D)&&x.push([D,m[D]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function c(u,m,x){return u.call.apply(u.bind,arguments)}function d(u,m,x){return d=c,d.apply(null,arguments)}function h(u,m){var x=Array.prototype.slice.call(arguments,1);return function(){var D=x.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function f(u,m){function x(){}x.prototype=m.prototype,u.Z=m.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(D,V,F){for(var K=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)K[ge-2]=arguments[ge];return m.prototype[V].apply(D,K)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function v(u){const m=u.length;if(m>0){const x=Array(m);for(let D=0;D<m;D++)x[D]=u[D];return x}return[]}function I(u,m){for(let D=1;D<arguments.length;D++){const V=arguments[D];var x=typeof V;if(x=x!="object"?x:V?Array.isArray(V)?"array":x:"null",x=="array"||x=="object"&&typeof V.length=="number"){x=u.length||0;const F=V.length||0;u.length=x+F;for(let K=0;K<F;K++)u[x+K]=V[K]}else u.push(V)}}class _{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function S(u){a.setTimeout(()=>{throw u},0)}function E(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class w{constructor(){this.h=this.g=null}add(m,x){const D=C.get();D.set(m,x),this.h?this.h.next=D:this.g=D,this.h=D}}var C=new _(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let L,A=!1,N=new w,y=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(T)}};function T(){for(var u;u=E();){try{u.h.call(u.g)}catch(x){S(x)}var m=C;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}A=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};a.addEventListener("test",x,m),a.removeEventListener("test",x,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function W(u,m){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}f(W,j),W.prototype.init=function(u,m){const x=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(x=="mouseover"?m=u.fromElement:x=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),J=0;function le(u,m,x,D,V){this.listener=u,this.proxy=null,this.src=m,this.type=x,this.capture=!!D,this.ha=V,this.key=++J,this.da=this.fa=!1}function M(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u,m,x){for(const D in u)m.call(x,u[D],D,u)}function $(u,m){for(const x in u)m.call(void 0,u[x],x,u)}function O(u){const m={};for(const x in u)m[x]=u[x];return m}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(u,m){let x,D;for(let V=1;V<arguments.length;V++){D=arguments[V];for(x in D)u[x]=D[x];for(let F=0;F<z.length;F++)x=z[F],Object.prototype.hasOwnProperty.call(D,x)&&(u[x]=D[x])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,m,x,D,V){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const K=be(u,m,D,V);return K>-1?(m=u[K],x||(m.fa=!1)):(m=new le(m,this.src,F,!!D,V),m.fa=x,u.push(m)),m};function Oe(u,m){const x=m.type;if(x in u.g){var D=u.g[x],V=Array.prototype.indexOf.call(D,m,void 0),F;(F=V>=0)&&Array.prototype.splice.call(D,V,1),F&&(M(m),u.g[x].length==0&&(delete u.g[x],u.h--))}}function be(u,m,x,D){for(let V=0;V<u.length;++V){const F=u[V];if(!F.da&&F.listener==m&&F.capture==!!x&&F.ha==D)return V}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Ce={};function yt(u,m,x,D,V){if(Array.isArray(m)){for(let F=0;F<m.length;F++)yt(u,m[F],x,D,V);return null}return x=kc(x),u&&u[se]?u.J(m,x,l(D)?!!D.capture:!1,V):Le(u,m,x,!1,D,V)}function Le(u,m,x,D,V,F){if(!m)throw Error("Invalid event type");const K=l(V)?!!V.capture:!!V;let ge=Ar(u);if(ge||(u[oe]=ge=new de(u)),x=ge.add(m,x,D,K,F),x.proxy)return x;if(D=Ae(),x.proxy=D,D.src=u,D.listener=x,u.addEventListener)k||(V=K),V===void 0&&(V=!1),u.addEventListener(m.toString(),D,V);else if(u.attachEvent)u.attachEvent(gn(m.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ae(){function u(x){return m.call(u.src,u.listener,x)}const m=gi;return u}function Ie(u,m,x,D,V){if(Array.isArray(m))for(var F=0;F<m.length;F++)Ie(u,m[F],x,D,V);else D=l(D)?!!D.capture:!!D,x=kc(x),u&&u[se]?(u=u.i,F=String(m).toString(),F in u.g&&(m=u.g[F],x=be(m,x,D,V),x>-1&&(M(m[x]),Array.prototype.splice.call(m,x,1),m.length==0&&(delete u.g[F],u.h--)))):u&&(u=Ar(u))&&(m=u.g[m.toString()],u=-1,m&&(u=be(m,x,D,V)),(x=u>-1?m[u]:null)&&Ct(x))}function Ct(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[se])Oe(m.i,u);else{var x=u.type,D=u.proxy;m.removeEventListener?m.removeEventListener(x,D,u.capture):m.detachEvent?m.detachEvent(gn(x),D):m.addListener&&m.removeListener&&m.removeListener(D),(x=Ar(m))?(Oe(x,u),x.h==0&&(x.src=null,m[oe]=null)):M(u)}}}function gn(u){return u in Ce?Ce[u]:Ce[u]="on"+u}function gi(u,m){if(u.da)u=!0;else{m=new W(m,this);const x=u.listener,D=u.ha||u.src;u.fa&&Ct(u),u=x.call(D,m)}return u}function Ar(u){return u=u[oe],u instanceof de?u:null}var kr="__closure_events_fn_"+(Math.random()*1e9>>>0);function kc(u){return typeof u=="function"?u:(u[kr]||(u[kr]=function(m){return u.handleEvent(m)}),u[kr])}function ot(){b.call(this),this.i=new de(this),this.M=this,this.G=null}f(ot,b),ot.prototype[se]=!0,ot.prototype.removeEventListener=function(u,m,x,D){Ie(this,u,m,x,D)};function Gt(u,m){var x,D=u.G;if(D)for(x=[];D;D=D.G)x.push(D);if(u=u.M,D=m.type||m,typeof m=="string")m=new j(m,u);else if(m instanceof j)m.target=m.target||u;else{var V=m;m=new j(D,u),ie(m,V)}V=!0;let F,K;if(x)for(K=x.length-1;K>=0;K--)F=m.g=x[K],V=Rc(F,D,!0,m)&&V;if(F=m.g=u,V=Rc(F,D,!0,m)&&V,V=Rc(F,D,!1,m)&&V,x)for(K=0;K<x.length;K++)F=m.g=x[K],V=Rc(F,D,!1,m)&&V}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const x=u.g[m];for(let D=0;D<x.length;D++)M(x[D]);delete u.g[m],u.h--}}this.G=null},ot.prototype.J=function(u,m,x,D){return this.i.add(String(u),m,!1,x,D)},ot.prototype.K=function(u,m,x,D){return this.i.add(String(u),m,!0,x,D)};function Rc(u,m,x,D){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let V=!0;for(let F=0;F<m.length;++F){const K=m[F];if(K&&!K.da&&K.capture==x){const ge=K.listener,vt=K.ha||K.src;K.fa&&Oe(u.i,K),V=ge.call(vt,D)!==!1&&V}}return V&&!D.defaultPrevented}function Hj(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:a.setTimeout(u,m||0)}function Uv(u){u.g=Hj(()=>{u.g=null,u.i&&(u.i=!1,Uv(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Wj extends b{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Uv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(u){b.call(this),this.h=u,this.g={}}f(Aa,b);var Bv=[];function $v(u){q(u.g,function(m,x){this.g.hasOwnProperty(x)&&Ct(m)},u),u.g={}}Aa.prototype.N=function(){Aa.Z.N.call(this),$v(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lf=a.JSON.stringify,qj=a.JSON.parse,Gj=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function zv(){}function Hv(){}var ka={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cf(){j.call(this,"d")}f(cf,j);function uf(){j.call(this,"c")}f(uf,j);var yi={},Wv=null;function Pc(){return Wv=Wv||new ot}yi.Ia="serverreachability";function qv(u){j.call(this,yi.Ia,u)}f(qv,j);function Ra(u){const m=Pc();Gt(m,new qv(m))}yi.STAT_EVENT="statevent";function Gv(u,m){j.call(this,yi.STAT_EVENT,u),this.stat=m}f(Gv,j);function Kt(u){const m=Pc();Gt(m,new Gv(m,u))}yi.Ja="timingevent";function Kv(u,m){j.call(this,yi.Ja,u),this.size=m}f(Kv,j);function Pa(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function Da(){this.g=!0}Da.prototype.ua=function(){this.g=!1};function Kj(u,m,x,D,V,F){u.info(function(){if(u.g)if(F){var K="",ge=F.split("&");for(let Me=0;Me<ge.length;Me++){var vt=ge[Me].split("=");if(vt.length>1){const Et=vt[0];vt=vt[1];const ar=Et.split("_");K=ar.length>=2&&ar[1]=="type"?K+(Et+"="+vt+"&"):K+(Et+"=redacted&")}}}else K=null;else K=F;return"XMLHTTP REQ ("+D+") [attempt "+V+"]: "+m+`
`+x+`
`+K})}function Qj(u,m,x,D,V,F,K){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+V+"]: "+m+`
`+x+`
`+F+" "+K})}function oo(u,m,x,D){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Xj(u,x)+(D?" "+D:"")})}function Yj(u,m){u.info(function(){return"TIMEOUT: "+m})}Da.prototype.info=function(){};function Xj(u,m){if(!u.g)return m;if(!m)return null;try{const F=JSON.parse(m);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var x=F[u];if(!(x.length<2)){var D=x[1];if(Array.isArray(D)&&!(D.length<1)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(let K=1;K<D.length;K++)D[K]=""}}}}return lf(F)}catch{return m}}var Dc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yv;function df(){}f(df,zv),df.prototype.g=function(){return new XMLHttpRequest},Yv=new df;function La(u){return encodeURIComponent(String(u))}function Jj(u){var m=1;u=u.split(":");const x=[];for(;m>0&&u.length;)x.push(u.shift()),m--;return u.length&&x.push(u.join(":")),x}function os(u,m,x,D){this.j=u,this.i=m,this.l=x,this.S=D||1,this.V=new Aa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xv}function Xv(){this.i=null,this.g="",this.h=!1}var Jv={},hf={};function ff(u,m,x){u.M=1,u.A=Oc(or(m)),u.u=x,u.R=!0,Zv(u,null)}function Zv(u,m){u.F=Date.now(),Lc(u),u.B=or(u.A);var x=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),hx(x.i,"t",D),u.C=0,x=u.j.L,u.h=new Xv,u.g=Ax(u.j,x?m:null,!u.u),u.P>0&&(u.O=new Wj(d(u.Y,u,u.g),u.P)),m=u.V,x=u.g,D=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(Bv[0]=V.toString()),V=Bv);for(let F=0;F<V.length;F++){const K=yt(x,V[F],D||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ra(),Kj(u.i,u.v,u.B,u.l,u.S,u.u)}os.prototype.ba=function(u){u=u.target;const m=this.O;m&&cs(u)==3?m.j():this.Y(u)},os.prototype.Y=function(u){try{if(u==this.g)e:{const ge=cs(this.g),vt=this.g.ya(),Me=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||xx(this.g)))){this.K||ge!=4||vt==7||(vt==8||Me<=0?Ra(3):Ra(2)),pf(this);var m=this.g.ca();this.X=m;var x=Zj(this);if(this.o=m==200,Qj(this.i,this.v,this.B,this.l,this.S,ge,m),this.o){if(this.U&&!this.L){t:{if(this.g){var D,V=this.g;if((D=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(D)){var F=D;break t}}F=null}if(u=F)oo(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mf(this,u);else{this.o=!1,this.m=3,Kt(12),vi(this),Oa(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<x.length;)if(Et=eA(this,x),Et==hf){ge==4&&(this.m=4,Kt(14),u=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Jv){this.m=4,Kt(15),oo(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else oo(this.i,this.l,Et,null),mf(this,Et);if(ex(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||x.length!=0||this.h.h||(this.m=1,Kt(16),u=!1),this.o=this.o&&u,!u)oo(this.i,this.l,x,"[Invalid Chunked Response]"),vi(this),Oa(this);else if(x.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ef(K),K.P=!0,Kt(11))}}else oo(this.i,this.l,x,null),mf(this,x);ge==4&&vi(this),this.o&&!this.K&&(ge==4?Sx(this.j,this):(this.o=!1,Lc(this)))}else pA(this.g),m==400&&x.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),vi(this),Oa(this)}}}catch{}finally{}};function Zj(u){if(!ex(u))return u.g.la();const m=xx(u.g);if(m==="")return"";let x="";const D=m.length,V=cs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return vi(u),Oa(u),"";u.h.i=new a.TextDecoder}for(let F=0;F<D;F++)u.h.h=!0,x+=u.h.i.decode(m[F],{stream:!(V&&F==D-1)});return m.length=0,u.h.g+=x,u.C=0,u.h.g}function ex(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function eA(u,m){var x=u.C,D=m.indexOf(`
`,x);return D==-1?hf:(x=Number(m.substring(x,D)),isNaN(x)?Jv:(D+=1,D+x>m.length?hf:(m=m.slice(D,D+x),u.C=D+x,m)))}os.prototype.cancel=function(){this.K=!0,vi(this)};function Lc(u){u.T=Date.now()+u.H,tx(u,u.H)}function tx(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Pa(d(u.aa,u),m)}function pf(u){u.D&&(a.clearTimeout(u.D),u.D=null)}os.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Yj(this.i,this.B),this.M!=2&&(Ra(),Kt(17)),vi(this),this.m=2,Oa(this)):tx(this,this.T-u)};function Oa(u){u.j.I==0||u.K||Sx(u.j,u)}function vi(u){pf(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,$v(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function mf(u,m){try{var x=u.j;if(x.I!=0&&(x.g==u||gf(x.h,u))){if(!u.L&&gf(x.h,u)&&x.I==3){try{var D=x.Ba.g.parse(m)}catch{D=null}if(Array.isArray(D)&&D.length==3){var V=D;if(V[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)Bc(x),Fc(x);else break e;bf(x),Kt(18)}}else x.xa=V[1],0<x.xa-x.K&&V[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Pa(d(x.Va,x),6e3));sx(x.h)<=1&&x.ta&&(x.ta=void 0)}else wi(x,11)}else if((u.L||x.g==u)&&Bc(x),!P(m))for(V=x.Ba.g.parse(m),m=0;m<V.length;m++){let Me=V[m];const Et=Me[0];if(!(Et<=x.K))if(x.K=Et,Me=Me[1],x.I==2)if(Me[0]=="c"){x.M=Me[1],x.ba=Me[2];const ar=Me[3];ar!=null&&(x.ka=ar,x.j.info("VER="+x.ka));const _i=Me[4];_i!=null&&(x.za=_i,x.j.info("SVER="+x.za));const us=Me[5];us!=null&&typeof us=="number"&&us>0&&(D=1.5*us,x.O=D,x.j.info("backChannelRequestTimeoutMs_="+D)),D=x;const ds=u.g;if(ds){const zc=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zc){var F=D.h;F.g||zc.indexOf("spdy")==-1&&zc.indexOf("quic")==-1&&zc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(yf(F,F.h),F.h=null))}if(D.G){const Nf=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Nf&&(D.wa=Nf,ze(D.J,D.G,Nf))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),D=x;var K=u;if(D.na=jx(D,D.L?D.ba:null,D.W),K.L){ix(D.h,K);var ge=K,vt=D.O;vt&&(ge.H=vt),ge.D&&(pf(ge),Lc(ge)),D.g=K}else Nx(D);x.i.length>0&&Uc(x)}else Me[0]!="stop"&&Me[0]!="close"||wi(x,7);else x.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?wi(x,7):_f(x):Me[0]!="noop"&&x.l&&x.l.qa(Me),x.A=0)}}Ra(4)}catch{}}var tA=class{constructor(u,m){this.g=u,this.map=m}};function nx(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function sx(u){return u.h?1:u.g?u.g.size:0}function gf(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function yf(u,m){u.g?u.g.add(m):u.h=m}function ix(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}nx.prototype.cancel=function(){if(this.i=ox(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ox(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const x of u.g.values())m=m.concat(x.G);return m}return v(u.i)}var ax=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nA(u,m){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const D=u[x].indexOf("=");let V,F=null;D>=0?(V=u[x].substring(0,D),F=u[x].substring(D+1)):V=u[x],m(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function as(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof as?(this.l=u.l,Ma(this,u.j),this.o=u.o,this.g=u.g,Va(this,u.u),this.h=u.h,vf(this,fx(u.i)),this.m=u.m):u&&(m=String(u).match(ax))?(this.l=!1,Ma(this,m[1]||"",!0),this.o=Fa(m[2]||""),this.g=Fa(m[3]||"",!0),Va(this,m[4]),this.h=Fa(m[5]||"",!0),vf(this,m[6]||"",!0),this.m=Fa(m[7]||"")):(this.l=!1,this.i=new Ba(null,this.l))}as.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Ua(m,lx,!0),":");var x=this.g;return(x||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ua(m,lx,!0),"@"),u.push(La(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Ua(x,x.charAt(0)=="/"?iA:sA,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Ua(x,aA)),u.join("")},as.prototype.resolve=function(u){const m=or(this);let x=!!u.j;x?Ma(m,u.j):x=!!u.o,x?m.o=u.o:x=!!u.g,x?m.g=u.g:x=u.u!=null;var D=u.h;if(x)Va(m,u.u);else if(x=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var V=m.h.lastIndexOf("/");V!=-1&&(D=m.h.slice(0,V+1)+D)}if(V=D,V==".."||V==".")D="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){D=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let K=0;K<V.length;){const ge=V[K++];ge=="."?D&&K==V.length&&F.push(""):ge==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),D&&K==V.length&&F.push("")):(F.push(ge),D=!0)}D=F.join("/")}else D=V}return x?m.h=D:x=u.i.toString()!=="",x?vf(m,fx(u.i)):x=!!u.m,x&&(m.m=u.m),m};function or(u){return new as(u)}function Ma(u,m,x){u.j=x?Fa(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Va(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function vf(u,m,x){m instanceof Ba?(u.i=m,lA(u.i,u.l)):(x||(m=Ua(m,oA)),u.i=new Ba(m,u.l))}function ze(u,m,x){u.i.set(m,x)}function Oc(u){return ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Fa(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ua(u,m,x){return typeof u=="string"?(u=encodeURI(u).replace(m,rA),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function rA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var lx=/[#\/\?@]/g,sA=/[#\?:]/g,iA=/[#\?]/g,oA=/[#\?@]/g,aA=/#/g;function Ba(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function xi(u){u.g||(u.g=new Map,u.h=0,u.i&&nA(u.i,function(m,x){u.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}t=Ba.prototype,t.add=function(u,m){xi(this),this.i=null,u=ao(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(m),this.h+=1,this};function cx(u,m){xi(u),m=ao(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ux(u,m){return xi(u),m=ao(u,m),u.g.has(m)}t.forEach=function(u,m){xi(this),this.g.forEach(function(x,D){x.forEach(function(V){u.call(m,V,D,this)},this)},this)};function dx(u,m){xi(u);let x=[];if(typeof m=="string")ux(u,m)&&(x=x.concat(u.g.get(ao(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)x=x.concat(u[m]);return x}t.set=function(u,m){return xi(this),this.i=null,u=ao(this,u),ux(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=dx(this,u),u.length>0?String(u[0]):m):m};function hx(u,m,x){cx(u,m),x.length>0&&(u.i=null,u.g.set(ao(u,m),v(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let D=0;D<m.length;D++){var x=m[D];const V=La(x);x=dx(this,x);for(let F=0;F<x.length;F++){let K=V;x[F]!==""&&(K+="="+La(x[F])),u.push(K)}}return this.i=u.join("&")};function fx(u){const m=new Ba;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ao(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function lA(u,m){m&&!u.j&&(xi(u),u.i=null,u.g.forEach(function(x,D){const V=D.toLowerCase();D!=V&&(cx(this,D),hx(this,V,x))},u)),u.j=m}function cA(u,m){const x=new Da;if(a.Image){const D=new Image;D.onload=h(ls,x,"TestLoadImage: loaded",!0,m,D),D.onerror=h(ls,x,"TestLoadImage: error",!1,m,D),D.onabort=h(ls,x,"TestLoadImage: abort",!1,m,D),D.ontimeout=h(ls,x,"TestLoadImage: timeout",!1,m,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else m(!1)}function uA(u,m){const x=new Da,D=new AbortController,V=setTimeout(()=>{D.abort(),ls(x,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:D.signal}).then(F=>{clearTimeout(V),F.ok?ls(x,"TestPingServer: ok",!0,m):ls(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(V),ls(x,"TestPingServer: error",!1,m)})}function ls(u,m,x,D,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),D(x)}catch{}}function dA(){this.g=new Gj}function xf(u){this.i=u.Sb||null,this.h=u.ab||!1}f(xf,zv),xf.prototype.g=function(){return new Mc(this.i,this.h)};function Mc(u,m){ot.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Mc,ot),t=Mc.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||a).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;px(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function px(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$a(this):za(this),this.readyState==3&&px(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,$a(this))},t.Na=function(u){this.g&&(this.response=u,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(u){u.readyState=4,u.l=null,u.j=null,u.B=null,za(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=m.next();return u.join(`\r
`)};function za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mx(u){let m="";return q(u,function(x,D){m+=D,m+=":",m+=x,m+=`\r
`}),m}function wf(u,m,x){e:{for(D in x){var D=!1;break e}D=!0}D||(x=mx(x),typeof u=="string"?x!=null&&La(x):ze(u,m,x))}function tt(u){ot.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(tt,ot);var hA=/^https?$/i,fA=["POST","PUT"];t=tt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,x,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yv.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(F){gx(this,F);return}if(u=x||"",x=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var V in D)x.set(V,D[V]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const F of D.keys())x.set(F,D.get(F));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(x.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(fA,m,void 0)>=0)||D||V||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of x)this.g.setRequestHeader(F,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){gx(this,F)}};function gx(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,yx(u),Vc(u)}function yx(u){u.A||(u.A=!0,Gt(u,"complete"),Gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Gt(this,"complete"),Gt(this,"abort"),Vc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vc(this,!0)),tt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vx(this):this.Xa())},t.Xa=function(){vx(this)};function vx(u){if(u.h&&typeof i<"u"){if(u.v&&cs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Gt(u,"readystatechange"),cs(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var D;if(D=F===0){let K=String(u.D).match(ax)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),D=!hA.test(K?K.toLowerCase():"")}x=D}if(x)Gt(u,"complete"),Gt(u,"success");else{u.o=6;try{var V=cs(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",yx(u)}}finally{Vc(u)}}}}function Vc(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,m||Gt(u,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function cs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return cs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),qj(m)}};function xx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pA(u){const m={};u=(u.g&&cs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(P(u[D]))continue;var x=Jj(u[D]);const V=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const F=m[V]||[];m[V]=F,F.push(x)}$(m,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(u,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||m}function wx(u){this.za=0,this.i=[],this.j=new Da,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ha("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ha("baseRetryDelayMs",5e3,u),this.Za=Ha("retryDelaySeedMs",1e4,u),this.Ta=Ha("forwardChannelMaxRetries",2,u),this.va=Ha("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new nx(u&&u.concurrentRequestLimit),this.Ba=new dA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=wx.prototype,t.ka=8,t.I=1,t.connect=function(u,m,x,D){Kt(0),this.W=u,this.H=m||{},x&&D!==void 0&&(this.H.OSID=x,this.H.OAID=D),this.F=this.X,this.J=jx(this,null,this.W),Uc(this)};function _f(u){if(_x(u),u.I==3){var m=u.V++,x=or(u.J);if(ze(x,"SID",u.M),ze(x,"RID",m),ze(x,"TYPE","terminate"),Wa(u,x),m=new os(u,u.j,m),m.M=2,m.A=Oc(or(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(m.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=m.A,x=!0),x||(m.g=Ax(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Lc(m)}Ix(u)}function Fc(u){u.g&&(Ef(u),u.g.cancel(),u.g=null)}function _x(u){Fc(u),u.v&&(a.clearTimeout(u.v),u.v=null),Bc(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Uc(u){if(!rx(u.h)&&!u.m){u.m=!0;var m=u.Ea;L||y(),A||(L(),A=!0),N.add(m,u),u.D=0}}function mA(u,m){return sx(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Pa(d(u.Ea,u,m),Cx(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new os(this,this.j,u);let F=this.o;if(this.U&&(F?(F=O(F),ie(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var D=this.i[x];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(m+=D,m>4096){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=Ex(this,V,m),x=or(this.J),ze(x,"RID",u),ze(x,"CVER",22),this.G&&ze(x,"X-HTTP-Session-Id",this.G),Wa(this,x),F&&(this.R?m="headers="+La(mx(F))+"&"+m:this.u&&wf(x,this.u,F)),yf(this.h,V),this.Ra&&ze(x,"TYPE","init"),this.S?(ze(x,"$req",m),ze(x,"SID","null"),V.U=!0,ff(V,x,null)):ff(V,x,m),this.I=2}}else this.I==3&&(u?bx(this,u):this.i.length==0||rx(this.h)||bx(this))};function bx(u,m){var x;m?x=m.l:x=u.V++;const D=or(u.J);ze(D,"SID",u.M),ze(D,"RID",x),ze(D,"AID",u.K),Wa(u,D),u.u&&u.o&&wf(D,u.u,u.o),x=new os(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ex(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),yf(u.h,x),ff(x,D,m)}function Wa(u,m){u.H&&q(u.H,function(x,D){ze(m,D,x)}),u.l&&q({},function(x,D){ze(m,D,x)})}function Ex(u,m,x){x=Math.min(u.i.length,x);const D=u.l?d(u.l.Ka,u.l,u):null;e:{var V=u.i;let ge=-1;for(;;){const vt=["count="+x];ge==-1?x>0?(ge=V[0].g,vt.push("ofs="+ge)):ge=0:vt.push("ofs="+ge);let Me=!0;for(let Et=0;Et<x;Et++){var F=V[Et].g;const ar=V[Et].map;if(F-=ge,F<0)ge=Math.max(0,V[Et].g-100),Me=!1;else try{F="req"+F+"_"||"";try{var K=ar instanceof Map?ar:Object.entries(ar);for(const[_i,us]of K){let ds=us;l(us)&&(ds=lf(us)),vt.push(F+_i+"="+encodeURIComponent(ds))}}catch(_i){throw vt.push(F+"type="+encodeURIComponent("_badmap")),_i}}catch{D&&D(ar)}}if(Me){K=vt.join("&");break e}}K=void 0}return u=u.i.splice(0,x),m.G=u,K}function Nx(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;L||y(),A||(L(),A=!0),N.add(m,u),u.A=0}}function bf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Pa(d(u.Da,u),Cx(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Tx(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Pa(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Fc(this),Tx(this))};function Ef(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function Tx(u){u.g=new os(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=or(u.na);ze(m,"RID","rpc"),ze(m,"SID",u.M),ze(m,"AID",u.K),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ze(m,"TO",u.ia),ze(m,"TYPE","xmlhttp"),Wa(u,m),u.u&&u.o&&wf(m,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=Oc(or(m)),x.u=null,x.R=!0,Zv(x,u)}t.Va=function(){this.C!=null&&(this.C=null,Fc(this),bf(this),Kt(19))};function Bc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Sx(u,m){var x=null;if(u.g==m){Bc(u),Ef(u),u.g=null;var D=2}else if(gf(u.h,m))x=m.G,ix(u.h,m),D=1;else return;if(u.I!=0){if(m.o)if(D==1){x=m.u?m.u.length:0,m=Date.now()-m.F;var V=u.D;D=Pc(),Gt(D,new Kv(D,x)),Uc(u)}else Nx(u);else if(V=m.m,V==3||V==0&&m.X>0||!(D==1&&mA(u,m)||D==2&&bf(u)))switch(x&&x.length>0&&(m=u.h,m.i=m.i.concat(x)),V){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Cx(u,m){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var x=d(u.bb,u),D=u.Ua;const V=!D;D=new as(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ma(D,"https"),Oc(D),V?cA(D.toString(),x):uA(D.toString(),x)}else Kt(2);u.I=0,u.l&&u.l.pa(m),Ix(u),_x(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Ix(u){if(u.I=0,u.ja=[],u.l){const m=ox(u.h);(m.length!=0||u.i.length!=0)&&(I(u.ja,m),I(u.ja,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.oa()}}function jx(u,m,x){var D=x instanceof as?or(x):new as(x);if(D.g!="")m&&(D.g=m+"."+D.g),Va(D,D.u);else{var V=a.location;D=V.protocol,m=m?m+"."+V.hostname:V.hostname,V=+V.port;const F=new as(null);D&&Ma(F,D),m&&(F.g=m),V&&Va(F,V),x&&(F.h=x),D=F}return x=u.G,m=u.wa,x&&m&&ze(D,x,m),ze(D,"VER",u.ka),Wa(u,D),D}function Ax(u,m,x){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new tt(new xf({ab:x})):new tt(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kx(){}t=kx.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function $c(){}$c.prototype.g=function(u,m){return new yn(u,m)};function yn(u,m){ot.call(this),this.g=new wx(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new lo(this)}f(yn,ot),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){_f(this.g)},yn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=lf(u),u=x);m.i.push(new tA(m.Ya++,u)),m.I==3&&Uc(m)},yn.prototype.N=function(){this.g.l=null,delete this.j,_f(this.g),delete this.g,yn.Z.N.call(this)};function Rx(u){cf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const x in m){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}f(Rx,cf);function Px(){uf.call(this),this.status=1}f(Px,uf);function lo(u){this.g=u}f(lo,kx),lo.prototype.ra=function(){Gt(this.g,"a")},lo.prototype.qa=function(u){Gt(this.g,new Rx(u))},lo.prototype.pa=function(u){Gt(this.g,new Px)},lo.prototype.oa=function(){Gt(this.g,"b")},$c.prototype.createWebChannel=$c.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,bT=function(){return new $c},_T=function(){return Pc()},wT=yi,Lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dc.NO_ERROR=0,Dc.TIMEOUT=8,Dc.HTTP_ERROR=6,Fu=Dc,Qv.COMPLETE="complete",xT=Qv,Hv.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",ot.prototype.listen=ot.prototype.J,cl=Hv,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,vT=tt}).apply(typeof lu<"u"?lu:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore",F0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new vh("@firebase/firestore");function po(){return qi.logLevel}function X(t,...e){if(qi.logLevel<=xe.DEBUG){const n=e.map(ky);qi.debug(`Firestore (${ya}): ${t}`,...n)}}function Xr(t,...e){if(qi.logLevel<=xe.ERROR){const n=e.map(ky);qi.error(`Firestore (${ya}): ${t}`,...n)}}function Xo(t,...e){if(qi.logLevel<=xe.WARN){const n=e.map(ky);qi.warn(`Firestore (${ya}): ${t}`,...n)}}function ky(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ET(t,r,n)}function ET(t,e,n){let r=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xr(r),new Error(r)}function je(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ET(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class mM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gM{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new NT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class yM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=wM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Om(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return lp(s)===lp(i)?we(s,i):lp(s)?1:-1}return we(t.length,e.length)}const _M=55296,bM=57343;function lp(t){const e=t.charCodeAt(0);return e>=_M&&e<=bM}function Jo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class ur{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ur?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ur.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return we(e.length,n.length)}static compareSegments(e,n){const r=ur.isNumericId(e),s=ur.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ur.extractNumericId(e).compare(ur.extractNumericId(n)):Om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hs.fromString(e.substring(4,e.length-2))}}class Be extends ur{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const EM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends ur{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return EM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new At([B0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Y(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Be.fromString(e))}static fromName(e){return new ae(Be.fromString(e).popFirst(5))}static empty(){return new ae(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e,n){if(!n)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NM(t,e,n,r){if(e===!0&&r===!0)throw new Y(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $0(t){if(!ae.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(ae.isDocumentKey(t))throw new Y(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ST(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Th(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Th(t);throw new Y(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function TM(t,e){if(e<=0)throw new Y(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function _c(t,e){if(!ST(t))throw new Y(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=-62135596800,W0=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*W0);return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<H0)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W0}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_c(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:gt("string",qe._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new qe(0,0))}static max(){return new pe(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function SM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new Qs(s,ae.empty(),e)}function CM(t){return new Qs(t.readTime,t.key,Jl)}class Qs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qs(pe.min(),ae.empty(),Jl)}static max(){return new Qs(pe.max(),ae.empty(),Jl)}}function IM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==jM)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function kM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-1;function Ch(t){return t==null}function jd(t){return t===0&&1/t==-1/0}function RM(t){return typeof t=="number"&&Number.isInteger(t)&&!jd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="";function PM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=q0(e)),e=DM(t.get(n),e);return q0(e)}function DM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case CT:n+="";break;default:n+=i}}return n}function q0(t){return t+CT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function IT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??jt.RED,this.left=s??jt.EMPTY,this.right=i??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new jt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new _n([])}unionWith(e){let n=new _t(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jT("Invalid base64 string: "+i):i}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const OM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=OM.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xs(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",kT="__type__",RT="__previous_value__",PT="__local_write_time__";function Dy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kT])==null?void 0:r.stringValue)===AT}function Ih(t){const e=t.mapValue.fields[RT];return Dy(e)?Ih(e):e}function Zl(t){const e=Ys(t.mapValue.fields[PT].timestampValue);return new qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Ad="(default)";class ec{constructor(e,n){this.projectId=e,this.database=n||Ad}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Ad}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__type__",VM="__max__",uu={mapValue:{}},LT="__vector__",kd="value";function Js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dy(t)?4:UM(t)?9007199254740991:FM(t)?10:11:ue(28295,{value:t})}function Sr(t,e){if(t===e)return!0;const n=Js(t);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zl(t).isEqual(Zl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ys(s.timestampValue),l=Ys(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Xs(s.bytesValue).isEqual(Xs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return at(s.geoPointValue.latitude)===at(i.geoPointValue.latitude)&&at(s.geoPointValue.longitude)===at(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return at(s.integerValue)===at(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=at(s.doubleValue),l=at(i.doubleValue);return a===l?jd(a)===jd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Jo(t.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(G0(a)!==G0(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Sr(a[c],l[c])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function tc(t,e){return(t.values||[]).find(n=>Sr(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;const n=Js(t),r=Js(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=at(i.integerValue||i.doubleValue),c=at(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Q0(t.timestampValue,e.timestampValue);case 4:return Q0(Zl(t),Zl(e));case 5:return Om(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Xs(i),c=Xs(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=we(l[d],c[d]);if(h!==0)return h}return we(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=we(at(i.latitude),at(a.latitude));return l!==0?l:we(at(i.longitude),at(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Y0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,v,I,_;const l=i.fields||{},c=a.fields||{},d=(p=l[kd])==null?void 0:p.arrayValue,h=(v=c[kd])==null?void 0:v.arrayValue,f=we(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return f!==0?f:Y0(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===uu.mapValue&&a===uu.mapValue)return 0;if(i===uu.mapValue)return 1;if(a===uu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Om(c[f],h[f]);if(p!==0)return p;const v=Zo(l[c[f]],d[h[f]]);if(v!==0)return v}return we(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function Q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Ys(t),r=Ys(e),s=we(n.seconds,r.seconds);return s!==0?s:we(n.nanos,r.nanos)}function Y0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zo(n[s],r[s]);if(i)return i}return we(n.length,r.length)}function ea(t){return Mm(t)}function Mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ys(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Mm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Mm(n.fields[a])}`;return s+"}"}(t.mapValue):ue(61005,{value:t})}function Uu(t){switch(Js(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ih(t);return e?16+Uu(e):16;case 5:return 2*t.stringValue.length;case 6:return Xs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Uu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return hi(r.fields,(i,a)=>{s+=i.length+Uu(a)}),s}(t.mapValue);default:throw ue(13486,{value:t})}}function X0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vm(t){return!!t&&"integerValue"in t}function Ly(t){return!!t&&"arrayValue"in t}function J0(t){return!!t&&"nullValue"in t}function Z0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bu(t){return!!t&&"mapValue"in t}function FM(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[DT])==null?void 0:r.stringValue)===LT}function Tl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tl(t.arrayValue.values[n]);return e}return{...t}}function UM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===VM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Tl(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Bu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Bu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){hi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(Tl(this.value))}}function OT(t){const e=[];return hi(t.fields,(n,r)=>{const s=new At([n]);if(Bu(r)){const i=OT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Bt(e,0,pe.min(),pe.min(),pe.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new Bt(e,1,n,pe.min(),r,s,0)}static newNoDocument(e,n){return new Bt(e,2,n,pe.min(),pe.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,pe.min(),pe.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.position=e,this.inclusive=n}}function e_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(a.referenceValue),n.key):r=Zo(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function t_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function BM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class mt extends MT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new zM(e,n,r):n==="array-contains"?new qM(e,r):n==="in"?new GM(e,r):n==="not-in"?new KM(e,r):n==="array-contains-any"?new QM(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HM(e,r):new WM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zo(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends MT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new rr(e,n)}matches(e){return VT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function VT(t){return t.op==="and"}function FT(t){return $M(t)&&VT(t)}function $M(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function Fm(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+ea(t.value);if(FT(t))return t.filters.map(e=>Fm(e)).join(",");{const e=t.filters.map(n=>Fm(n)).join(",");return`${t.op}(${e})`}}function UT(t,e){return t instanceof mt?function(r,s){return s instanceof mt&&r.op===s.op&&r.field.isEqual(s.field)&&Sr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&UT(a,s.filters[l]),!0):!1}(t,e):void ue(19439)}function BT(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"}(t):"Filter"}class zM extends mt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class HM extends mt{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WM extends mt{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $T(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class qM extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ly(n)&&tc(n.arrayValue,this.value)}}class GM extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&tc(this.value.arrayValue,n)}}class KM extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tc(this.value.arrayValue,n)}}class QM extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>tc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function n_(t,e=null,n=[],r=[],s=null,i=null,a=null){return new YM(t,e,n,r,s,i,a)}function Oy(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ea(r)).join(",")),e.Te=n}return e.Te}function My(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t_(t.startAt,e.startAt)&&t_(t.endAt,e.endAt)}function Um(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XM(t,e,n,r,s,i,a,l){return new wa(t,e,n,r,s,i,a,l)}function jh(t){return new wa(t)}function r_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zT(t){return t.collectionGroup!==null}function Sl(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new _t(At.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new nc(i,r))}),n.has(At.keyField().canonicalString())||e.Ie.push(new nc(At.keyField(),r))}return e.Ie}function wr(t){const e=fe(t);return e.Ee||(e.Ee=HT(e,Sl(t))),e.Ee}function JM(t){const e=fe(t);return e.de||(e.de=HT(e,t.explicitOrderBy)),e.de}function HT(t,e){if(t.limitType==="F")return n_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new nc(s.field,i)});const n=t.endAt?new Rd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rd(t.startAt.position,t.startAt.inclusive):null;return n_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bm(t,e){const n=t.filters.concat([e]);return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Pd(t,e,n){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ah(t,e){return My(wr(t),wr(e))&&t.limitType===e.limitType}function WT(t){return`${Oy(wr(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BT(s)).join(", ")}]`),Ch(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Sl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=e_(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Sl(r),s)||r.endAt&&!function(a,l,c){const d=e_(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Sl(r),s))}(t,e)}function ZM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qT(t){return(e,n)=>{let r=!1;for(const s of Sl(t)){const i=eV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function eV(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Zo(c,d):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new et(ae.comparator);function Jr(){return tV}const GT=new et(ae.comparator);function ul(...t){let e=GT;for(const n of t)e=e.insert(n.key,n);return e}function KT(t){let e=GT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return Cl()}function QT(){return Cl()}function Cl(){return new so(t=>t.toString(),(t,e)=>t.isEqual(e))}const nV=new et(ae.comparator),rV=new _t(ae.comparator);function _e(...t){let e=rV;for(const n of t)e=e.add(n);return e}const sV=new _t(we);function iV(){return sV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jd(e)?"-0":e}}function YT(t){return{integerValue:""+t}}function oV(t,e){return RM(e)?YT(e):Vy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function aV(t,e,n){return t instanceof Dd?function(s,i){const a={fields:{[kT]:{stringValue:AT},[PT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Dy(i)&&(i=Ih(i)),i&&(a.fields[RT]=i),{mapValue:a}}(n,e):t instanceof ta?JT(t,e):t instanceof rc?ZT(t,e):function(s,i){const a=XT(s,i),l=s_(a)+s_(s.Ae);return Vm(a)&&Vm(s.Ae)?YT(l):Vy(s.serializer,l)}(t,e)}function lV(t,e,n){return t instanceof ta?JT(t,e):t instanceof rc?ZT(t,e):n}function XT(t,e){return t instanceof Ld?function(r){return Vm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Dd extends Rh{}class ta extends Rh{constructor(e){super(),this.elements=e}}function JT(t,e){const n=eS(e);for(const r of t.elements)n.some(s=>Sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class rc extends Rh{constructor(e){super(),this.elements=e}}function ZT(t,e){let n=eS(e);for(const r of t.elements)n=n.filter(s=>!Sr(s,r));return{arrayValue:{values:n}}}class Ld extends Rh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s_(t){return at(t.integerValue||t.doubleValue)}function eS(t){return Ly(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n){this.field=e,this.transform=n}}function uV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ta&&s instanceof ta||r instanceof rc&&s instanceof rc?Jo(r.elements,s.elements,Sr):r instanceof Ld&&s instanceof Ld?Sr(r.Ae,s.Ae):r instanceof Dd&&s instanceof Dd}(t.transform,e.transform)}class dV{constructor(e,n){this.version=e,this.transformResults=n}}class On{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new On}static exists(e){return new On(void 0,e)}static updateTime(e){return new On(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ph{}function tS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fy(t.key,On.none()):new bc(t.key,t.data,On.none());{const n=t.data,r=un.empty();let s=new _t(At.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new fi(t.key,r,new _n(s.toArray()),On.none())}}function hV(t,e,n){t instanceof bc?function(s,i,a){const l=s.value.clone(),c=o_(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(s,i,a){if(!$u(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=o_(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(nS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,r){return t instanceof bc?function(i,a,l,c){if(!$u(i.precondition,a))return l;const d=i.value.clone(),h=a_(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(i,a,l,c){if(!$u(i.precondition,a))return l;const d=a_(i.fieldTransforms,c,a),h=a.data;return h.setAll(nS(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return $u(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function fV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=XT(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function i_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jo(r,s,(i,a)=>uV(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bc extends Ph{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fi extends Ph{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function o_(t,e,n){const r=new Map;je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,lV(a,l,n[s]))}return r}function a_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,aV(i,a,e))}return r}class Fy extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pV extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&hV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=tS(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(n,r)=>i_(n,r))&&Jo(this.baseMutations,e.baseMutations,(n,r)=>i_(n,r))}}class Uy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return nV}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Uy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Ee;function xV(t){switch(t){case U.OK:return ue(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function rS(t){if(t===void 0)return Xr("GRPC error has no .code"),U.UNKNOWN;switch(t){case ft.OK:return U.OK;case ft.CANCELLED:return U.CANCELLED;case ft.UNKNOWN:return U.UNKNOWN;case ft.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case ft.INTERNAL:return U.INTERNAL;case ft.UNAVAILABLE:return U.UNAVAILABLE;case ft.UNAUTHENTICATED:return U.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case ft.NOT_FOUND:return U.NOT_FOUND;case ft.ALREADY_EXISTS:return U.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return U.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case ft.ABORTED:return U.ABORTED;case ft.OUT_OF_RANGE:return U.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return U.UNIMPLEMENTED;case ft.DATA_LOSS:return U.DATA_LOSS;default:return ue(39323,{code:t})}}(Ee=ft||(ft={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new Hs([4294967295,4294967295],0);function l_(t){const e=wV().encode(t),n=new yT;return n.update(e),new Uint8Array(n.digest())}function c_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hs([n,r],0),new Hs([s,i],0)]}class By{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(r<0)throw new dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hs.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hs.fromNumber(r)));return s.compare(_V)===1&&(s=new Hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=l_(e),[r,s]=c_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new By(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=l_(e),[r,s]=c_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dh(pe.min(),s,new et(we),Jr(),_e())}}class Ec{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ec(r,n,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class sS{constructor(e,n){this.targetId=e,this.Ce=n}}class iS{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class u_{constructor(){this.ve=0,this.Fe=d_(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=_e(),n=_e(),r=_e();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}}),new Ec(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=d_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jr(),this.Je=du(),this.He=du(),this.Ye=new et(we)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Um(i))if(r===0){const a=new ae(i.path);this.et(n,a,Bt.newNoDocument(a,pe.min()))}else je(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Xs(r).toUint8Array()}catch(c){if(c instanceof jT)return Xo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new By(a,s,i)}catch(c){return Xo(c instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Um(l.target)){const c=new ae(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Bt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=_e();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Dh(e,n,this.Ye,this.je,r);return this.je=Jr(),this.Je=du(),this.He=du(),this.Ye=new et(we),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new u_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(we),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(we),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function du(){return new et(ae.comparator)}function d_(){return new et(ae.comparator)}const EV={asc:"ASCENDING",desc:"DESCENDING"},NV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TV={and:"AND",or:"OR"};class SV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $m(t,e){return t.useProto3Json||Ch(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CV(t,e){return Od(t,e.toTimestamp())}function _r(t){return je(!!t,49232),pe.fromTimestamp(function(n){const r=Ys(n);return new qe(r.seconds,r.nanos)}(t))}function $y(t,e){return zm(t,e).canonicalString()}function zm(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aS(t){const e=Be.fromString(t);return je(fS(e),10190,{key:e.toString()}),e}function Hm(t,e){return $y(t.databaseId,e.path)}function cp(t,e){const n=aS(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(cS(n))}function lS(t,e){return $y(t.databaseId,e)}function IV(t){const e=aS(t);return e.length===4?Be.emptyPath():cS(e)}function Wm(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cS(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function h_(t,e,n){return{name:Hm(t,e),fields:n.value.mapValue.fields}}function jV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(je(h===void 0||typeof h=="string",58123),Lt.fromBase64String(h||"")):(je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?U.UNKNOWN:rS(d.code);return new Y(h,d.message||"")}(a);n=new iS(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=cp(t,r.document.name),i=_r(r.document.updateTime),a=r.document.createTime?_r(r.document.createTime):pe.min(),l=new un({mapValue:{fields:r.document.fields}}),c=Bt.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new zu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=cp(t,r.document),i=r.readTime?_r(r.readTime):pe.min(),a=Bt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new zu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=cp(t,r.document),i=r.removedTargetIds||[];n=new zu([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new vV(s,i),l=r.targetId;n=new sS(l,a)}}return n}function AV(t,e){let n;if(e instanceof bc)n={update:h_(t,e.key,e.value)};else if(e instanceof Fy)n={delete:Hm(t,e.key)};else if(e instanceof fi)n={update:h_(t,e.key,e.data),updateMask:FV(e.fieldMask)};else{if(!(e instanceof pV))return ue(16599,{Vt:e.type});n={verify:Hm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Dd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ta)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ld)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ue(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:CV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)}(t,e.precondition)),n}function kV(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?_r(s.updateTime):_r(i);return a.isEqual(pe.min())&&(a=_r(i)),new dV(a,s.transformResults||[])}(n,e))):[]}function RV(t,e){return{documents:[lS(t,e.path)]}}function uS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lS(t,s);const i=function(d){if(d.length!==0)return hS(rr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Ss(p.field),direction:OV(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=$m(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function PV(t,e,n,r){const{ft:s,parent:i}=uS(t,e),a={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;a[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:Ss(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:Ss(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},gt:a,parent:i}}function DV(t){let e=IV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){je(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=dS(f);return p instanceof rr&&FT(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(p=>function(I){return new nc(go(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Ch(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,v=f.values||[];return new Rd(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,v=f.values||[];return new Rd(v,p)}(n.endAt)),XM(e,s,a,i,l,"F",c,d)}function LV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=go(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=go(n.unaryFilter.field);return mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=go(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=go(n.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(go(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>dS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function OV(t){return EV[t]}function MV(t){return NV[t]}function VV(t){return TV[t]}function Ss(t){return{fieldPath:t.canonicalString()}}function go(t){return At.fromServerFormat(t.fieldPath)}function hS(t){return t instanceof mt?function(n){if(n.op==="=="){if(Z0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NAN"}};if(J0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NAN"}};if(J0(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(n.field),op:MV(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>hS(s));return r.length===1?r[0]:{compositeFilter:{op:VV(n.op),filters:r}}}(t):ue(54877,{filter:t})}function FV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r,s,i=pe.min(),a=pe.min(),l=Lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.yt=e}}function BV(t){const e=DV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.Cn=new zV}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Qs.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class zV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pS=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(pS,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="LruGarbageCollector",HV=1048576;function m_([t,e],[n,r]){const s=we(t,n);return s===0?we(e,r):s}class WV{constructor(e){this.Ir=e,this.buffer=new _t(m_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();m_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(p_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xa(n)?X(p_,"Ignoring IndexedDB error during garbage collection: ",n):await va(n)}await this.Vr(3e5)})}}class GV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Sh.ce);const r=new WV(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(f_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),po()<=xe.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function KV(t,e){return new GV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.changes=new so(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Il(r.mutation,s,_n.empty(),qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){const s=ki();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ul();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Jr();const a=Cl(),l=function(){return Cl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof fi)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Il(h.mutation,d,h.mutation.getFieldMask(),qe.now())):a.set(d.key,_n.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new YV(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Cl();let s=new et((a,l)=>a-l),i=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||_n.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||_e()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=QT();h.forEach(p=>{if(!i.has(p)){const v=tS(n.get(p),r.get(p));v!==null&&f.set(p,v),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ki());let l=Jl,c=i;return a.next(d=>B.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,_e())).next(h=>({batchId:l,changes:KT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ul();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,c=>{const d=function(f,p){return new wa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Bt.newInvalidDocument(h)))});let l=ul();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Il(h.mutation,d,_n.empty(),qe.now()),kh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_r(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:BV(s.bundledQuery),readTime:_r(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.overlays=new et(ae.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ki();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ki(),i=n.length+1,a=new ae(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new et((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ki(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ki(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return B.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new gV(n,r));let i=this.qr.get(n);i===void 0&&(i=_e(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.Qr=new _t(Nt.$r),this.Ur=new _t(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ae(new Be([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Be([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=_e();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||we(e.Yr,n.Yr)}static Kr(e,n){return we(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Nt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new mV(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Py:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(we);return n.forEach(s=>{const i=new Nt(s,0),a=new Nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const a=new Nt(new ae(i),0);let l=new _t(we);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.ri=e,this.docs=function(){return new et(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=Jr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Bt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jr();const a=n.path,l=new ae(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||IM(CM(h),r)<=0||(s.has(h.key)||kh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new r3(this)}getSize(e){return B.resolve(this.size)}}class r3 extends QV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.persistence=e,this.si=new so(n=>Oy(n),My),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.oi=0,this._i=new zy,this.targetCount=0,this.ai=na.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sh(0),this.li=!1,this.li=!0,this.hi=new e3,this.referenceDelegate=e(this),this.Pi=new s3(this),this.indexManager=new $V,this.remoteDocumentCache=function(s){return new n3(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new UV(n),this.Ii=new JV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new t3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new i3(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class i3 extends AM{constructor(e){super(),this.currentSequenceNumber=e}}class Hy{constructor(e){this.persistence=e,this.Ri=new zy,this.Vi=null}static mi(e){return new Hy(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=ae.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Md{constructor(e,n){this.persistence=e,this.pi=new so(r=>PM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=KV(this,n)}static mi(e,n){return new Md(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,pe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uu(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=_e(),s=_e();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lP()?8:kM(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new o3;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(po()<=xe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(po()<=xe.DEBUG&&X("QueryEngine","Query:",mo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(po()<=xe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(n))):B.resolve())}ys(e,n){if(r_(n))return B.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Pd(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=_e(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Pd(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return r_(n)||s.isEqual(pe.min())?B.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?B.resolve(null):(po()<=xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mo(n)),this.vs(e,a,n,SM(s,Jl)).next(l=>l))})}Ds(e,n){let r=new _t(qT(e));return n.forEach((s,i)=>{kh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return po()<=xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,Qs.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="LocalStore",l3=3e8;class c3{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new et(we),this.xs=new so(i=>Oy(i),My),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function u3(t,e,n,r){return new c3(t,e,n,r)}async function gS(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=_e();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function d3(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,p=f.keys();let v=B.resolve();return p.forEach(I=>{v=v.next(()=>h.getEntry(c,I)).next(_=>{const S=d.docVersions.get(I);je(S!==null,48541),_.version.compareTo(S)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=_e();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function yS(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function h3(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let v=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Lt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(_,S,E){return _.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=l3?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,v,h)&&l.push(n.Pi.updateTargetData(i,v))});let c=Jr(),d=_e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(f3(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(pe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function f3(t,e,n){let r=_e(),s=_e();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Jr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(pe.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):X(qy,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function p3(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Py),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function m3(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new ks(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function qm(t,e,n){const r=fe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!xa(a))throw a;X(qy,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function g_(t,e,n){const r=fe(t);let s=pe.min(),i=_e();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=fe(c),p=f.xs.get(h);return p!==void 0?B.resolve(f.Ms.get(p)):f.Pi.getTargetData(d,h)}(r,a,wr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:pe.min(),n?i:_e())).next(l=>(g3(r,ZM(e),l),{documents:l,Qs:i})))}function g3(t,e,n){let r=t.Os.get(e)||pe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class y_{constructor(){this.activeTargetIds=iV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y3{constructor(){this.Mo=new y_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="ConnectivityMonitor";class x_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(v_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(v_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu=null;function Gm(){return hu===null?hu=function(){return 268435456+Math.round(2147483648*Math.random())}():hu++,"0x"+hu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="RestConnection",x3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ad?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=Gm(),l=this.zo(e,n.toUriEncodedString());X(up,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=li(d);return this.Jo(e,l,c,r,h).then(f=>(X(up,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Xo(up,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=x3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class b3 extends w3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=Gm();return new Promise((l,c)=>{const d=new vT;d.setWithCredentials(!0),d.listenOnce(xT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Fu.NO_ERROR:const f=d.getResponseJson();X(Vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Fu.TIMEOUT:X(Vt,`RPC '${e}' ${a} timed out`),c(new Y(U.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const p=d.getStatus();if(X(Vt,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const _=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(I.status);c(new Y(_,I.message))}else c(new Y(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Y(U.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{X(Vt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);X(Vt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Gm(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bT(),l=_T(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");X(Vt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let p=!1,v=!1;const I=new _3({Yo:S=>{v?X(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(p||(X(Vt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),X(Vt,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},Zo:()=>f.close()}),_=(S,E,w)=>{S.listen(E,C=>{try{w(C)}catch(R){setTimeout(()=>{throw R},0)}})};return _(f,cl.EventType.OPEN,()=>{v||(X(Vt,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),_(f,cl.EventType.CLOSE,()=>{v||(v=!0,X(Vt,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(f))}),_(f,cl.EventType.ERROR,S=>{v||(v=!0,Xo(Vt,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),I.a_(new Y(U.UNAVAILABLE,"The operation could not be completed")))}),_(f,cl.EventType.MESSAGE,S=>{var E;if(!v){const w=S.data[0];je(!!w,16349);const C=w,R=(C==null?void 0:C.error)||((E=C[0])==null?void 0:E.error);if(R){X(Vt,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let A=function(T){const b=ft[T];if(b!==void 0)return rS(b)}(L),N=R.message;A===void 0&&(A=U.INTERNAL,N="Unknown error status: "+L+" with message "+R.message),v=!0,I.a_(new Y(A,N)),f.close()}else X(Vt,`RPC '${e}' stream ${s} received:`,w),I.u_(w)}}),_(l,wT.STAT_EVENT,S=>{S.stat===Lm.PROXY?X(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Lm.NOPROXY&&X(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){return new SV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="PersistentStream";class xS{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(w_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(w_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class E3 extends xS{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=jV(this.serializer,e),r=function(i){if(!("targetChange"in i))return pe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?pe.min():a.readTime?_r(a.readTime):pe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Wm(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Um(c)?{documents:RV(i,c)}:{query:uS(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=oS(i,a.resumeToken);const d=$m(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(pe.min())>0){l.readTime=Od(i,a.snapshotVersion.toTimestamp());const d=$m(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=LV(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Wm(this.serializer),n.removeTarget=e,this.q_(n)}}class N3 extends xS{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kV(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>AV(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{}class S3 extends T3{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,zm(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,zm(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class C3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xr(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="RemoteStore";class I3{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{io(this)&&(X(Gi,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.Ea.add(4),await Nc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Oh(d)}(this))})}),this.Ra=new C3(r,s)}}async function Oh(t){if(io(t))for(const e of t.da)await e(!0)}async function Nc(t){for(const e of t.da)await e(!1)}function wS(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yy(n)?Qy(n):_a(n).O_()&&Ky(n,e))}function Gy(t,e){const n=fe(t),r=_a(n);n.Ia.delete(e),r.O_()&&_S(n,e),n.Ia.size===0&&(r.O_()?r.L_():io(n)&&n.Ra.set("Unknown"))}function Ky(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_a(t).Y_(e)}function _S(t,e){t.Va.Ue(e),_a(t).Z_(e)}function Qy(t){t.Va=new bV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_a(t).start(),t.Ra.ua()}function Yy(t){return io(t)&&!_a(t).x_()&&t.Ia.size>0}function io(t){return fe(t).Ea.size===0}function bS(t){t.Va=void 0}async function j3(t){t.Ra.set("Online")}async function A3(t){t.Ia.forEach((e,n)=>{Ky(t,e)})}async function k3(t,e){bS(t),Yy(t)?(t.Ra.ha(e),Qy(t)):t.Ra.set("Unknown")}async function R3(t,e,n){if(t.Ra.set("Online"),e instanceof iS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){X(Gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vd(t,r)}else if(e instanceof zu?t.Va.Ze(e):e instanceof sS?t.Va.st(e):t.Va.tt(e),!n.isEqual(pe.min()))try{const r=await yS(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),_S(i,c);const f=new ks(h.target,c,d,h.sequenceNumber);Ky(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X(Gi,"Failed to raise snapshot:",r),await Vd(t,r)}}async function Vd(t,e,n){if(!xa(e))throw e;t.Ea.add(1),await Nc(t),t.Ra.set("Offline"),n||(n=()=>yS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(Gi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Oh(t)})}function ES(t,e){return e().catch(n=>Vd(t,n,e))}async function Mh(t){const e=fe(t),n=Zs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Py;for(;P3(e);)try{const s=await p3(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,D3(e,s)}catch(s){await Vd(e,s)}NS(e)&&TS(e)}function P3(t){return io(t)&&t.Ta.length<10}function D3(t,e){t.Ta.push(e);const n=Zs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function NS(t){return io(t)&&!Zs(t).x_()&&t.Ta.length>0}function TS(t){Zs(t).start()}async function L3(t){Zs(t).ra()}async function O3(t){const e=Zs(t);for(const n of t.Ta)e.ea(n.mutations)}async function M3(t,e,n){const r=t.Ta.shift(),s=Uy.from(r,e,n);await ES(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mh(t)}async function V3(t,e){e&&Zs(t).X_&&await async function(r,s){if(function(a){return xV(a)&&a!==U.ABORTED}(s.code)){const i=r.Ta.shift();Zs(r).B_(),await ES(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mh(r)}}(t,e),NS(t)&&TS(t)}async function __(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),X(Gi,"RemoteStore received new credentials");const r=io(n);n.Ea.add(3),await Nc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Oh(n)}async function F3(t,e){const n=fe(t);e?(n.Ea.delete(2),await Oh(n)):e||(n.Ea.add(2),await Nc(n),n.Ra.set("Unknown"))}function _a(t){return t.ma||(t.ma=function(n,r,s){const i=fe(n);return i.sa(),new E3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:j3.bind(null,t),t_:A3.bind(null,t),r_:k3.bind(null,t),H_:R3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Yy(t)?Qy(t):t.Ra.set("Unknown")):(await t.ma.stop(),bS(t))})),t.ma}function Zs(t){return t.fa||(t.fa=function(n,r,s){const i=fe(n);return i.sa(),new N3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:L3.bind(null,t),r_:V3.bind(null,t),ta:O3.bind(null,t),na:M3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Mh(t)):(await t.fa.stop(),t.Ta.length>0&&(X(Gi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Xy(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(t,e){if(Xr("AsyncQueue",`${e}: ${t}`),xa(t))return new Y(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.ga=new et(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ra{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ra(e,n,Fo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class B3{constructor(){this.queries=E_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=E_(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Y(U.ABORTED,"Firestore shutting down"))}}function E_(){return new so(t=>WT(t),Ah)}async function Zy(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new U3,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Jy(a,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&tv(n)}async function ev(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $3(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&tv(n)}function z3(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function tv(t){t.Ca.forEach(e=>{e.next()})}var Km,N_;(N_=Km||(Km={})).Ma="default",N_.Cache="cache";class nv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.key=e}}class CS{constructor(e){this.key=e}}class H3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=_e(),this.mutatedKeys=_e(),this.eu=qT(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new b_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),v=kh(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),_=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;p&&v?p.data.isEqual(v.data)?I!==_&&(r.track({type:3,doc:v}),S=!0):this.su(p,v)||(r.track({type:2,doc:v}),S=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(l=!0)):!p&&v?(r.track({type:0,doc:v}),S=!0):p&&!v&&(r.track({type:1,doc:p}),S=!0,(c||d)&&(l=!0)),S&&(v?(a=a.add(v),i=_?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(v,I){const _=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:S})}};return _(v)-_(I)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new ra(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=_e(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new CS(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new SS(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=_e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rv="SyncEngine";class W3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class q3{constructor(e){this.key=e,this.hu=!1}}class G3{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new so(l=>WT(l),Ah),this.Iu=new Map,this.Eu=new Set,this.du=new et(ae.comparator),this.Au=new Map,this.Ru=new zy,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K3(t,e,n=!0){const r=PS(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await IS(r,e,n,!0),s}async function Q3(t,e){const n=PS(t);await IS(n,e,!0,!1)}async function IS(t,e,n,r){const s=await m3(t.localStore,wr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Y3(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&wS(t.remoteStore,s),l}async function Y3(t,e,n,r,s){t.pu=(f,p,v)=>async function(_,S,E,w){let C=S.view.ru(E);C.Cs&&(C=await g_(_.localStore,S.query,!1).then(({documents:N})=>S.view.ru(N,C)));const R=w&&w.targetChanges.get(S.targetId),L=w&&w.targetMismatches.get(S.targetId)!=null,A=S.view.applyChanges(C,_.isPrimaryClient,R,L);return S_(_,S.targetId,A.au),A.snapshot}(t,f,p,v);const i=await g_(t.localStore,e,!0),a=new H3(e,i.Qs),l=a.ru(i.documents),c=Ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);S_(t,n,d.au);const h=new W3(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function X3(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Ah(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gy(r.remoteStore,s.targetId),Qm(r,s.targetId)}).catch(va)):(Qm(r,s.targetId),await qm(r.localStore,s.targetId,!0))}async function J3(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gy(n.remoteStore,r.targetId))}async function Z3(t,e,n){const r=o6(t);try{const s=await function(a,l){const c=fe(a),d=qe.now(),h=l.reduce((v,I)=>v.add(I.key),_e());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=Jr(),_=_e();return c.Ns.getEntries(v,h).next(S=>{I=S,I.forEach((E,w)=>{w.isValidDocument()||(_=_.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,I)).next(S=>{f=S;const E=[];for(const w of l){const C=fV(w,f.get(w.key).overlayedDocument);C!=null&&E.push(new fi(w.key,C,OT(C.value.mapValue),On.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,E,l)}).next(S=>{p=S;const E=S.applyToLocalDocumentSet(f,_);return c.documentOverlayCache.saveOverlays(v,S.batchId,E)})}).then(()=>({batchId:p.batchId,changes:KT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new et(we)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Tc(r,s.changes),await Mh(r.remoteStore)}catch(s){const i=Jy(s,"Failed to persist write");n.reject(i)}}async function jS(t,e){const n=fe(t);try{const r=await h3(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?je(a.hu,14607):s.removedDocuments.size>0&&(je(a.hu,42227),a.hu=!1))}),await Tc(n,r,e)}catch(r){await va(r)}}function T_(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=fe(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(d=!0)}),d&&tv(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function e6(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new et(ae.comparator);a=a.insert(i,Bt.newNoDocument(i,pe.min()));const l=_e().add(i),c=new Dh(pe.min(),new Map,new et(we),a,l);await jS(r,c),r.du=r.du.remove(i),r.Au.delete(e),sv(r)}else await qm(r.localStore,e,!1).then(()=>Qm(r,e,n)).catch(va)}async function t6(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await d3(n.localStore,e);kS(n,r,null),AS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tc(n,s)}catch(s){await va(s)}}async function n6(t,e,n){const r=fe(t);try{const s=await function(a,l){const c=fe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(je(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);kS(r,e,n),AS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tc(r,s)}catch(s){await va(s)}}function AS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function kS(t,e,n){const r=fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Qm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||RS(t,r)})}function RS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sv(t))}function S_(t,e,n){for(const r of n)r instanceof SS?(t.Ru.addReference(r.key,e),r6(t,r)):r instanceof CS?(X(rv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||RS(t,r.key)):ue(19791,{wu:r})}function r6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(rv,"New document in limbo: "+n),t.Eu.add(r),sv(t))}function sv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Be.fromString(e)),r=t.fu.next();t.Au.set(r,new q3(n)),t.du=t.du.insert(n,r),wS(t.remoteStore,new ks(wr(jh(n.path)),r,"TargetPurposeLimboResolution",Sh.ce))}}async function Tc(t,e,n){const r=fe(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Wy.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=fe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(d,p=>B.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>B.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!xa(f))throw f;X(qy,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const v=h.Ms.get(p),I=v.snapshotVersion,_=v.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(p,_)}}}(r.localStore,i))}async function s6(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){X(rv,"User change. New user:",e.toKey());const r=await gS(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Y(U.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tc(n,r.Ls)}}function i6(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return _e().add(r.key);{let s=_e();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function PS(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e6.bind(null,e),e.Pu.H_=$3.bind(null,e.eventManager),e.Pu.yu=z3.bind(null,e.eventManager),e}function o6(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n6.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return u3(this.persistence,new a3,e.initialUser,this.serializer)}Cu(e){return new mS(Hy.mi,this.serializer)}Du(e){return new y3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class a6 extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){je(this.persistence.referenceDelegate instanceof Md,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new mS(r=>Md.mi(r,n),this.serializer)}}class Ym{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>T_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s6.bind(null,this.syncEngine),await F3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new B3}()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=function(i){return new b3(i)}(e.databaseInfo);return function(i,a,l,c){return new S3(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new I3(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>T_(this.syncEngine,n,0),function(){return x_.v()?new x_:new v3}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new G3(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);X(Gi,"RemoteStore shutting down."),i.Ea.add(5),await Nc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ym.provider={build:()=>new Ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="FirestoreClient";class l6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=Ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X(ei,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X(ei,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hp(t,e){t.asyncQueue.verifyOperationInProgress(),X(ei,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await gS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function C_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c6(t);X(ei,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>__(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>__(e.remoteStore,s)),t._onlineComponents=e}async function c6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(ei,"Using user provided OfflineComponentProvider");try{await hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),await hp(t,new Fd)}}else X(ei,"Using default OfflineComponentProvider"),await hp(t,new a6(void 0));return t._offlineComponents}async function ov(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(ei,"Using user provided OnlineComponentProvider"),await C_(t,t._uninitializedComponentsProvider._online)):(X(ei,"Using default OnlineComponentProvider"),await C_(t,new Ym))),t._onlineComponents}function u6(t){return ov(t).then(e=>e.syncEngine)}function d6(t){return ov(t).then(e=>e.datastore)}async function Ud(t){const e=await ov(t),n=e.eventManager;return n.onListen=K3.bind(null,e.syncEngine),n.onUnlisten=X3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=J3.bind(null,e.syncEngine),n}function h6(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new iv({next:p=>{h.Nu(),a.enqueueAndForget(()=>ev(i,f));const v=p.docs.has(l);!v&&p.fromCache?d.reject(new Y(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&c&&c.source==="server"?d.reject(new Y(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new nv(jh(l.path),h,{includeMetadataChanges:!0,qa:!0});return Zy(i,f)}(await Ud(t),t.asyncQueue,e,n,r)),r.promise}function f6(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new iv({next:p=>{h.Nu(),a.enqueueAndForget(()=>ev(i,f)),p.fromCache&&c.source==="server"?d.reject(new Y(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new nv(l,h,{includeMetadataChanges:!0,qa:!0});return Zy(i,f)}(await Ud(t),t.asyncQueue,e,n,r)),r.promise}function p6(t,e,n){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await d6(t);r.resolve(async function(a,l,c){var _;const d=fe(a),{request:h,gt:f,parent:p}=PV(d.serializer,JM(l),c);d.connection.$o||delete h.parent;const v=(await d.Ho("RunAggregationQuery",d.serializer.databaseId,p,h,1)).filter(S=>!!S.result);je(v.length===1,64727);const I=(_=v[0].result)==null?void 0:_.aggregateFields;return Object.keys(I).reduce((S,E)=>(S[f[E]]=I[E],S),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firestore.googleapis.com",j_=!0;class A_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LS,this.ssl=j_}else this.host=e.host,this.ssl=e.ssl??j_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HV)throw new Y(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pM;switch(r.type){case"firstParty":return new vM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=I_.get(n);r&&(X("ComponentProvider","Removing Datastore"),I_.delete(n),r.terminate())}(this),Promise.resolve()}}function m6(t,e,n,r={}){var d;t=tn(t,Vh);const s=li(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(hy(`https://${l}`),fy("Firestore",!0)),i.host!==LS&&i.host!==l&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Kr(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ft.MOCK_USER;else{h=oN(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Y(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ft(p)}t._authCredentials=new mM(new NT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_c(n,rt._jsonSchema))return new rt(e,r||null,new ae(Be.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:gt("string",rt._jsonSchemaVersion),referencePath:gt("string")};class Ws extends is{constructor(e,n,r){super(e,n,jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new ae(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function kt(t,e,...n){if(t=Fe(t),TT("collection","path",e),t instanceof Vh){const r=Be.fromString(e,...n);return z0(r),new Ws(t,null,r)}{if(!(t instanceof rt||t instanceof Ws))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return z0(r),new Ws(t.firestore,null,r)}}function Xe(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=Ry.newId()),TT("doc","path",e),t instanceof Vh){const r=Be.fromString(e,...n);return $0(r),new rt(t,null,new ae(r))}{if(!(t instanceof rt||t instanceof Ws))throw new Y(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return $0(r),new rt(t.firestore,t instanceof Ws?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="AsyncQueue";class R_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vS(this,"async_queue_retry"),this._c=()=>{const r=dp();r&&X(k_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xa(e))throw e;X(k_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xr("INTERNAL UNHANDLED ERROR: ",P_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Xy.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:P_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function P_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Cr extends Vh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new R_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R_(e),this._firestoreClient=void 0,await e}}}function g6(t,e){const n=typeof t=="object"?t:xh(),r=typeof t=="string"?t:Ad,s=ci(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=rN("firestore");i&&m6(s,...i)}return s}function Sc(t){if(t._terminated)throw new Y(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y6(t),t._firestoreClient}function y6(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new MM(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new l6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class x6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Lt.fromBase64String(e))}catch(n){throw new Y(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_c(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:gt("string",Rn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(_c(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:gt("string",br._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_c(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new Y(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:gt("string",Er._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=/^__.*__$/;class _6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new bc(e,this.data,n,this.fieldTransforms)}}class OS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class Bh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MS(this.Ac)&&w6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class b6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}Cc(e,n,r,s=!1){return new Bh({Ac:e,methodName:n,Dc:r,path:At.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $h(t){const e=t._freezeSettings(),n=Lh(t._databaseId);return new b6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VS(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);lv("Data must be an object, but it was:",a,r);const l=FS(r,a);let c,d;if(i.merge)c=new _n(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Xm(e,f,n);if(!a.contains(p))throw new Y(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);BS(h,p)||h.push(p)}c=new _n(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new _6(new un(l),c,d)}class zh extends Uh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}function E6(t,e,n){return new Bh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class av extends Uh{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=E6(this,e,!0),r=this.vc.map(i=>ba(i,n)),s=new ta(r);return new cV(e.path,s)}isEqual(e){return e instanceof av&&Kr(this.vc,e.vc)}}function N6(t,e,n,r){const s=t.Cc(1,e,n);lv("Data must be an object, but it was:",s,r);const i=[],a=un.empty();hi(r,(c,d)=>{const h=cv(e,c,n);d=Fe(d);const f=s.yc(h);if(d instanceof zh)i.push(h);else{const p=ba(d,f);p!=null&&(i.push(h),a.set(h,p))}});const l=new _n(i);return new OS(a,l,s.fieldTransforms)}function T6(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[Xm(e,r,n)],c=[s];if(i.length%2!=0)throw new Y(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Xm(e,i[p])),c.push(i[p+1]);const d=[],h=un.empty();for(let p=l.length-1;p>=0;--p)if(!BS(d,l[p])){const v=l[p];let I=c[p];I=Fe(I);const _=a.yc(v);if(I instanceof zh)d.push(v);else{const S=ba(I,_);S!=null&&(d.push(v),h.set(v,S))}}const f=new _n(d);return new OS(h,f,a.fieldTransforms)}function S6(t,e,n,r=!1){return ba(n,t.Cc(r?4:3,e))}function ba(t,e){if(US(t=Fe(t)))return lv("Unsupported field value:",e,t),FS(t,e);if(t instanceof Uh)return function(r,s){if(!MS(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=ba(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:Od(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Od(s.serializer,i)}}if(r instanceof br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:oS(s.serializer,r._byteString)};if(r instanceof rt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$y(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(a,l){return{mapValue:{fields:{[DT]:{stringValue:LT},[kd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Vy(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Th(r)}`)}(t,e)}function FS(t,e){const n={};return IT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(t,(r,s)=>{const i=ba(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function US(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof br||t instanceof Rn||t instanceof rt||t instanceof Uh||t instanceof Er)}function lv(t,e,n){if(!US(n)||!ST(n)){const r=Th(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Xm(t,e,n){if((e=Fe(e))instanceof Fh)return e._internalPath;if(typeof e=="string")return cv(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const C6=new RegExp("[~\\*/\\[\\]]");function cv(t,e,n){if(e.search(C6)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fh(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Y(U.INVALID_ARGUMENT,l+t+c)}function BS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I6 extends $S{data(){return super.data()}}function Hh(t,e){return typeof e=="string"?cv(t,e):e instanceof Fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uv{}class dv extends uv{}function zr(t,e,...n){let r=[];e instanceof uv&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof hv).length,l=i.filter(c=>c instanceof Wh).length;if(a>1||a>0&&l>0)throw new Y(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wh extends dv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wh(e,n,r)}_apply(e){const n=this._parse(e);return HS(e._query,n),new is(e.firestore,e.converter,Bm(e._query,n))}_parse(e){const n=$h(e.firestore);return function(i,a,l,c,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){O_(f,h);const I=[];for(const _ of f)I.push(L_(c,i,_));p={arrayValue:{values:I}}}else p=L_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||O_(f,h),p=S6(l,a,f,h==="in"||h==="not-in");return mt.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Nr(t,e,n){const r=e,s=Hh("where",t);return Wh._create(s,r,n)}class hv extends uv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)HS(a,c),a=Bm(a,c)}(e._query,n),new is(e.firestore,e.converter,Bm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fv extends dv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fv(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(i,a)}(e._query,this._field,this._direction);return new is(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new wa(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qs(t,e="asc"){const n=e,r=Hh("orderBy",t);return fv._create(r,n)}class pv extends dv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new pv(e,n,r)}_apply(e){return new is(e.firestore,e.converter,Pd(e._query,this._limit,this._limitType))}}function fp(t){return TM("limit",t),pv._create("limit",t,"F")}function L_(t,e,n){if(typeof(n=Fe(n))=="string"){if(n==="")throw new Y(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&n.indexOf("/")!==-1)throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!ae.isDocumentKey(r))throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return X0(t,new ae(r))}if(n instanceof rt)return X0(t,n._key);throw new Y(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Th(n)}.`)}function O_(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function HS(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class j6{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return hi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[kd].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>at(a.doubleValue));return new Er(n)}convertGeoPoint(e){return new br(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ih(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zl(e));default:return null}}convertTimestamp(e){const n=Ys(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);je(fS(r),9688,{name:e});const s=new ec(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||Xr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function A6(){return new v6("count")}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends $S{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:gt("string",Di._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class Hu extends Di{data(e={}){return super.data(e)}}class Li{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hu(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Hu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Hu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:k6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Li._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function k6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){t=tn(t,rt);const e=tn(t.firestore,Cr);return h6(Sc(e),t._key).then(n=>KS(e,t,n))}Li._jsonSchemaVersion="firestore/querySnapshot/1.0",Li._jsonSchema={type:gt("string",Li._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class qh extends j6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function er(t){t=tn(t,is);const e=tn(t.firestore,Cr),n=Sc(e),r=new qh(e);return zS(t._query),f6(n,t._query).then(s=>new Li(e,r,t,s))}function qS(t,e,n){t=tn(t,rt);const r=tn(t.firestore,Cr),s=WS(t.converter,e);return Gh(r,[VS($h(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,On.none())])}function Pn(t,e,n,...r){t=tn(t,rt);const s=tn(t.firestore,Cr),i=$h(s);let a;return a=typeof(e=Fe(e))=="string"||e instanceof Fh?T6(i,"updateDoc",t._key,e,n,r):N6(i,"updateDoc",t._key,e),Gh(s,[a.toMutation(t._key,On.exists(!0))])}function R6(t){return Gh(tn(t.firestore,Cr),[new Fy(t._key,On.none())])}function GS(t,e){const n=tn(t.firestore,Cr),r=Xe(t),s=WS(t.converter,e);return Gh(n,[VS($h(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,On.exists(!1))]).then(()=>r)}function P6(t,...e){var c,d,h;t=Fe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||D_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(D_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof rt)a=tn(t.firestore,Cr),l=jh(t._key.path),i={next:f=>{e[r]&&e[r](KS(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=tn(t,is);a=tn(f.firestore,Cr),l=f._query;const p=new qh(a);i={next:v=>{e[r]&&e[r](new Li(a,p,f,v))},error:e[r+1],complete:e[r+2]},zS(t._query)}return function(p,v,I,_){const S=new iv(_),E=new nv(v,S,I);return p.asyncQueue.enqueueAndForget(async()=>Zy(await Ud(p),E)),()=>{S.Nu(),p.asyncQueue.enqueueAndForget(async()=>ev(await Ud(p),E))}}(Sc(a),l,s,i)}function Gh(t,e){return function(r,s){const i=new xr;return r.asyncQueue.enqueueAndForget(async()=>Z3(await u6(r),s,i)),i.promise}(Sc(t),e)}function KS(t,e,n){const r=n.docs.get(e._key),s=new qh(t);return new Di(t,s,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}function fu(t){return D6(t,{count:A6()})}function D6(t,e){const n=tn(t.firestore,Cr),r=Sc(n),s=LM(e,(i,a)=>new yV(a,i.aggregateType,i._internalFieldPath));return p6(r,t._query,s).then(i=>function(l,c,d){const h=new qh(l);return new x6(c,h,d)}(n,t,i))}function L6(...t){return new av("arrayUnion",t)}(function(e,n=!0){(function(s){ya=s})(ro),nr(new Fn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Cr(new gM(r.getProvider("auth-internal")),new xM(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),mn(V0,F0,e),mn(V0,F0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebasestorage.googleapis.com",YS="storageBucket",O6=2*60*1e3,M6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends $n{constructor(e,n,r=0){super(pp(e),`Firebase Storage: ${n} (${pp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function pp(t){return"storage/"+t}function mv(){const t="An unknown error occurred, please check the error payload for server response.";return new it(st.UNKNOWN,t)}function V6(t){return new it(st.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function F6(t){return new it(st.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(st.UNAUTHENTICATED,t)}function B6(){return new it(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $6(t){return new it(st.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function z6(){return new it(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H6(){return new it(st.CANCELED,"User canceled the upload/download.")}function W6(t){return new it(st.INVALID_URL,"Invalid URL '"+t+"'.")}function q6(t){return new it(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function G6(){return new it(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YS+"' property when initializing the app?")}function K6(){return new it(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q6(){return new it(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y6(t){return new it(st.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jm(t){return new it(st.INVALID_ARGUMENT,t)}function XS(){return new it(st.APP_DELETED,"The Firebase app was deleted.")}function X6(t){return new it(st.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new it(st.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function el(t){throw new it(st.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bn.makeFromUrl(e,n)}catch{return new bn(e,"")}if(r.path==="")return r;throw q6(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),I={bucket:1,path:3},_=n===QS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",E=new RegExp(`^https?://${_}/${s}/${S}`,"i"),C=[{regex:l,indices:c,postModify:i},{regex:v,indices:I,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<C.length;R++){const L=C[R],A=L.regex.exec(e);if(A){const N=A[L.indices.bucket];let y=A[L.indices.path];y||(y=""),r=new bn(N,y),L.postModify(r);break}}if(r==null)throw W6(e);return r}}class J6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...S){d||(d=!0,e.apply(null,S))}function f(S){s=setTimeout(()=>{s=null,t(v,c())},S)}function p(){i&&clearTimeout(i)}function v(S,...E){if(d){p();return}if(S){p(),h.call(null,S,...E);return}if(c()||a){p(),h.call(null,S,...E);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,f(C)}let I=!1;function _(S){I||(I=!0,p(),!d&&(s!==null?(S||(l=2),clearTimeout(s),f(0)):S||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,_(!0)},n),_}function eF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t){return t!==void 0}function nF(t){return typeof t=="object"&&!Array.isArray(t)}function gv(t){return typeof t=="string"||t instanceof String}function M_(t){return yv()&&t instanceof Blob}function yv(){return typeof Blob<"u"}function V_(t,e,n,r){if(r<e)throw Jm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function JS(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Oi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Oi||(Oi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,n,r,s,i,a,l,c,d,h,f,p=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,_)=>{this.resolve_=I,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===Oi.NO_ERROR,c=i.getStatus();if(!l||rF(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Oi.ABORT;r(!1,new pu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new pu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());tF(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=mv();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?XS():H6();a(c)}else{const c=z6();a(c)}};this.canceled_?n(!1,new pu(!1,null,!0)):this.backoffId_=Z6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function iF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cF(t,e,n,r,s,i,a=!0,l=!1){const c=JS(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return aF(h,e),iF(h,n),oF(h,i),lF(h,r),new sF(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dF(...t){const e=uF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(yv())return new Blob(t);throw new it(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(t){if(typeof atob>"u")throw Y6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mp{constructor(e,n){this.data=e,this.contentType=n||null}}function pF(t,e){switch(t){case pr.RAW:return new mp(ZS(e));case pr.BASE64:case pr.BASE64URL:return new mp(eC(t,e));case pr.DATA_URL:return new mp(gF(e),yF(e))}throw mv()}function ZS(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function mF(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(pr.DATA_URL,"Malformed data URL.")}return ZS(e)}function eC(t,e){switch(t){case pr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case pr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fF(e)}catch(s){throw s.message.includes("polyfill")?s:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class tC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=vF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gF(t){const e=new tC(t);return e.base64?eC(pr.BASE64,e.rest):mF(e.rest)}function yF(t){return new tC(t).contentType}function vF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){let r=0,s="";M_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(M_(this.data_)){const r=this.data_,s=hF(r,e,n);return s===null?null:new Cs(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Cs(r,!0)}}static getBlob(...e){if(yv()){const n=e.map(r=>r instanceof Cs?r.data_:r);return new Cs(dF.apply(null,n))}else{const n=e.map(a=>gv(a)?pF(pr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new Cs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){let e;try{e=JSON.parse(t)}catch{return null}return nF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function rC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t,e){return e}class Qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||_F}}let mu=null;function bF(t){return!gv(t)||t.length<2?t:rC(t)}function sC(){if(mu)return mu;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(i,a){return bF(a)}const n=new Qt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Qt("size");return s.xform=r,t.push(s),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),mu=t,mu}function EF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new bn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function NF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return EF(r,t),r}function iC(t,e,n){const r=nC(e);return r===null?null:NF(t,r,n)}function TF(t,e,n,r){const s=nC(e);if(s===null||!gv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,p="/b/"+a(h)+"/o/"+a(f),v=vv(p,n,r),I=JS({alt:"media",token:d});return v+I})[0]}function SF(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class oC{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(t){if(!t)throw mv()}function CF(t,e){function n(r,s){const i=iC(t,s,e);return aC(i!==null),i}return n}function IF(t,e){function n(r,s){const i=iC(t,s,e);return aC(i!==null),TF(i,s,t.host,t._protocol)}return n}function lC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=B6():s=U6():n.getStatus()===402?s=F6(t.bucket):n.getStatus()===403?s=$6(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function jF(t){const e=lC(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=V6(t.path)),i.serverResponse=s.serverResponse,i}return n}function AF(t,e,n){const r=e.fullServerUrl(),s=vv(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new oC(s,i,IF(t,n),a);return l.errorHandler=jF(e),l}function kF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function RF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kF(null,e)),r}function PF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let R=0;R<2;R++)C=C+Math.random().toString().slice(2);return C}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=RF(e,r,s),h=SF(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+c+"--",v=Cs.getBlob(f,r,p);if(v===null)throw K6();const I={name:d.fullPath},_=vv(i,t.host,t._protocol),S="POST",E=t.maxUploadRetryTime,w=new oC(_,S,CF(t,n),E);return w.urlParams=I,w.headers=a,w.body=v.uploadData(),w.errorHandler=lC(e),w}class DF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw el("cannot .send() more than once");if(li(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw el("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw el("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw el("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw el("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LF extends DF{initXhr(){this.xhr_.responseType="text"}}function cC(){return new LF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this._service=e,n instanceof bn?this._location=n:this._location=bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ki(e,n)}get root(){const e=new bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rC(this._location.path)}get storage(){return this._service}get parent(){const e=xF(this._location.path);if(e===null)return null;const n=new bn(this._location.bucket,e);return new Ki(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw X6(e)}}function OF(t,e,n){t._throwIfRoot("uploadBytes");const r=PF(t.storage,t._location,sC(),new Cs(e,!0),n);return t.storage.makeRequestWithTokens(r,cC).then(s=>({metadata:s,ref:t}))}function MF(t){t._throwIfRoot("getDownloadURL");const e=AF(t.storage,t._location,sC());return t.storage.makeRequestWithTokens(e,cC).then(n=>{if(n===null)throw Q6();return n})}function VF(t,e){const n=wF(t._location.path,e),r=new bn(t._location.bucket,n);return new Ki(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){return/^[A-Za-z]+:\/\//.test(t)}function UF(t,e){return new Ki(t,e)}function uC(t,e){if(t instanceof xv){const n=t;if(n._bucket==null)throw G6();const r=new Ki(n,n._bucket);return e!=null?uC(r,e):r}else return e!==void 0?VF(t,e):t}function BF(t,e){if(e&&FF(e)){if(t instanceof xv)return UF(t,e);throw Jm("To use ref(service, url), the first argument must be a Storage instance.")}else return uC(t,e)}function F_(t,e){const n=e==null?void 0:e[YS];return n==null?null:bn.makeFromBucketSpec(n,t)}function $F(t,e,n,r={}){t.host=`${e}:${n}`;const s=li(e);s&&(hy(`https://${t.host}/b`),fy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:oN(i,t.app.options.projectId))}class xv{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=QS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=O6,this._maxUploadRetryTime=M6,this._requests=new Set,s!=null?this._bucket=bn.makeFromBucketSpec(s,this._host):this._bucket=F_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bn.makeFromBucketSpec(this._url,e):this._bucket=F_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){V_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){V_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ki(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new J6(XS());{const a=cF(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const U_="@firebase/storage",B_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="storage";function zF(t,e,n){return t=Fe(t),OF(t,e,n)}function HF(t){return t=Fe(t),MF(t)}function WF(t,e){return t=Fe(t),BF(t,e)}function qF(t=xh(),e){t=Fe(t);const r=ci(t,dC).getImmediate({identifier:e}),s=rN("storage");return s&&GF(r,...s),r}function GF(t,e,n,r={}){$F(t,e,n,r)}function KF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new xv(n,r,s,e,ro)}function QF(){nr(new Fn(dC,KF,"PUBLIC").setMultipleInstances(!0)),mn(U_,B_,""),mn(U_,B_,"esm2020")}QF();const YF={apiKey:"AIzaSyAVk3CIK5hyAmjwVPh1p4i01vq-0Z5IsEA",authDomain:"zedctf.firebaseapp.com",projectId:"zedctf",storageBucket:"zedctf.firebasestorage.app",messagingSenderId:"574551910114",appId:"1:574551910114:web:8bcce937be224e1575a0bb",measurementId:"G-MEYRJGR69W"},Kh=fN(YF);cM(Kh);const sc=zL(Kh),ye=g6(Kh),XF=qF(Kh),hC=g.createContext({user:null,loading:!0}),fC=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(!0);return g.useEffect(()=>kD(sc,a=>{n(a),s(!1)}),[]),o.jsx(hC.Provider,{value:{user:e,loading:r},children:t})},zn=()=>{const t=g.useContext(hC);if(!t)throw new Error("useAuthContext must be used within an AuthProvider");return t},pC=g.createContext({isAdmin:!1,isModerator:!1,permissions:[],loading:!0}),JF=({children:t})=>{const{user:e}=zn(),[n,r]=g.useState({isAdmin:!1,isModerator:!1,permissions:[],loading:!0});return g.useEffect(()=>{if(!e){console.log(" AdminProvider: No user found"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1});return}return console.log(" AdminProvider: Checking user role for UID:",e.uid),P6(Xe(ye,"users",e.uid),i=>{if(i.exists()){const a=i.data();console.log(" User document found:",a);const l=a.role||"user",c=a.permissions||["read"];console.log(" User role:",l),console.log(" User permissions:",c),r({isAdmin:l==="admin",isModerator:l==="moderator"||l==="admin",permissions:c,loading:!1})}else console.log(" No user document found in Firestore"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})},i=>{console.error(" Firestore error in AdminContext:",i),console.error("Error details:",i.code,i.message),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})})},[e]),o.jsx(pC.Provider,{value:n,children:t})},Qh=()=>{const t=g.useContext(pC);if(!t)throw new Error("useAdminContext must be used within an AdminProvider");return t},ZF=({children:t})=>{const{loading:e}=zn();return e?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsx(o.Fragment,{children:t})},ps=({children:t})=>{const{user:e,loading:n}=zn();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(dy,{to:"/login",replace:!0})},e5=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Qh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):!e&&!n?o.jsx(dy,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:t})},bi=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Qh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):e||n?o.jsx(dy,{to:"/admin",replace:!0}):o.jsx(o.Fragment,{children:t})};function $_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Cc(...t){return e=>{let n=!1;const r=t.map(s=>{const i=$_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():$_(t[s],null)}}}}function ht(...t){return g.useCallback(Cc(...t),t)}var t5=Symbol.for("react.lazy"),$d=Zd[" use ".trim().toString()];function n5(t){return typeof t=="object"&&t!==null&&"then"in t}function mC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===t5&&"_payload"in t&&n5(t._payload)}function wv(t){const e=s5(t),n=g.forwardRef((r,s)=>{let{children:i,...a}=r;mC(i)&&typeof $d=="function"&&(i=$d(i._payload));const l=g.Children.toArray(i),c=l.find(o5);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var r5=wv("Slot");function s5(t){const e=g.forwardRef((n,r)=>{let{children:s,...i}=n;if(mC(s)&&typeof $d=="function"&&(s=$d(s._payload)),g.isValidElement(s)){const a=l5(s),l=a5(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var i5=Symbol("radix.slottable");function o5(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===i5}function a5(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function l5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function gC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=gC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function yC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=gC(t))&&(r&&(r+=" "),r+=e);return r}const z_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,H_=yC,Yh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return H_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const p=z_(h)||z_(f);return s[d][p]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:p,...v}=h;return Object.entries(v).every(I=>{let[_,S]=I;return Array.isArray(S)?S.includes({...i,...l}[_]):{...i,...l}[_]===S})?[...d,f,p]:d},[]);return H_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},_v="-",c5=t=>{const e=d5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(_v);return l[0]===""&&l.length!==1&&l.shift(),vC(l,e)||u5(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},vC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?vC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(_v);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},W_=/^\[(.+)\]$/,u5=t=>{if(W_.test(t)){const e=W_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},d5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return f5(Object.entries(t.classGroups),n).forEach(([i,a])=>{Zm(a,r,i,e)}),r},Zm=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:q_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(h5(s)){Zm(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Zm(a,q_(e,i),n,r)})})},q_=(t,e)=>{let n=t;return e.split(_v).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},h5=t=>t.isThemeGetter,f5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,p5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},xC="!",m5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let S=0;S<l.length;S++){let E=l[S];if(d===0){if(E===s&&(r||l.slice(S,S+i)===e)){c.push(l.slice(h,S)),h=S+i;continue}if(E==="/"){f=S;continue}}E==="["?d++:E==="]"&&d--}const p=c.length===0?l:l.substring(h),v=p.startsWith(xC),I=v?p.substring(1):p,_=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:I,maybePostfixModifierPosition:_}};return n?l=>n({className:l,parseClassName:a}):a},g5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},y5=t=>({cache:p5(t.cacheSize),parseClassName:m5(t),...c5(t)}),v5=/\s+/,x5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(v5);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(d);let I=!!v,_=r(I?p.substring(0,v):p);if(!_){if(!I){l=d+(l.length>0?" "+l:l);continue}if(_=r(p),!_){l=d+(l.length>0?" "+l:l);continue}I=!1}const S=g5(h).join(":"),E=f?S+xC:S,w=E+_;if(i.includes(w))continue;i.push(w);const C=s(_,I);for(let R=0;R<C.length;++R){const L=C[R];i.push(E+L)}l=d+(l.length>0?" "+l:l)}return l};function w5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wC(e))&&(r&&(r+=" "),r+=n);return r}const wC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wC(t[r]))&&(n&&(n+=" "),n+=e);return n};function _5(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=y5(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=x5(c,n);return s(c,h),h}return function(){return i(w5.apply(null,arguments))}}const He=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},_C=/^\[(?:([a-z-]+):)?(.+)\]$/i,b5=/^\d+\/\d+$/,E5=new Set(["px","full","screen"]),N5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,T5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rr=t=>Uo(t)||E5.has(t)||b5.test(t),ms=t=>Ea(t,"length",O5),Uo=t=>!!t&&!Number.isNaN(Number(t)),gp=t=>Ea(t,"number",Uo),tl=t=>!!t&&Number.isInteger(Number(t)),j5=t=>t.endsWith("%")&&Uo(t.slice(0,-1)),me=t=>_C.test(t),gs=t=>N5.test(t),A5=new Set(["length","size","percentage"]),k5=t=>Ea(t,A5,bC),R5=t=>Ea(t,"position",bC),P5=new Set(["image","url"]),D5=t=>Ea(t,P5,V5),L5=t=>Ea(t,"",M5),nl=()=>!0,Ea=(t,e,n)=>{const r=_C.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},O5=t=>T5.test(t)&&!S5.test(t),bC=()=>!1,M5=t=>C5.test(t),V5=t=>I5.test(t),F5=()=>{const t=He("colors"),e=He("spacing"),n=He("blur"),r=He("brightness"),s=He("borderColor"),i=He("borderRadius"),a=He("borderSpacing"),l=He("borderWidth"),c=He("contrast"),d=He("grayscale"),h=He("hueRotate"),f=He("invert"),p=He("gap"),v=He("gradientColorStops"),I=He("gradientColorStopPositions"),_=He("inset"),S=He("margin"),E=He("opacity"),w=He("padding"),C=He("saturate"),R=He("scale"),L=He("sepia"),A=He("skew"),N=He("space"),y=He("translate"),T=()=>["auto","contain","none"],b=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",me,e],k=()=>[me,e],P=()=>["",Rr,ms],W=()=>["auto",Uo,me],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",me],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>[Uo,me];return{cacheSize:500,separator:":",theme:{colors:[nl],spacing:[Rr,ms],blur:["none","",gs,me],brightness:O(),borderColor:[t],borderRadius:["none","","full",gs,me],borderSpacing:k(),borderWidth:P(),contrast:O(),grayscale:q(),hueRotate:O(),invert:q(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[j5,ms],inset:j(),margin:j(),opacity:O(),padding:k(),saturate:O(),scale:O(),sepia:q(),skew:O(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[gs]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),me]}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tl,me]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",tl,me]}],"grid-cols":[{"grid-cols":[nl]}],"col-start-end":[{col:["auto",{span:["full",tl,me]},me]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[nl]}],"row-start-end":[{row:["auto",{span:[tl,me]},me]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",me,e]}],"min-w":[{"min-w":[me,e,"min","max","fit"]}],"max-w":[{"max-w":[me,e,"none","full","min","max","fit","prose",{screen:[gs]},gs]}],h:[{h:[me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",gs,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gp]}],"font-family":[{font:[nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",Uo,gp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rr,me]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rr,ms]}],"underline-offset":[{"underline-offset":["auto",Rr,me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),R5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",k5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},D5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Rr,me]}],"outline-w":[{outline:[Rr,ms]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Rr,ms]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",gs,L5]}],"shadow-color":[{shadow:[nl]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",gs,me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[tl,me]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rr,ms,gp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},U5=_5(F5);function Re(...t){return U5(yC(t))}const B5=Yh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-all duration-300 shadow-[0_0_20px_rgba(0,255,136,0.3)] hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",terminal:"bg-card border border-primary/30 text-primary hover:border-primary hover:bg-primary/10 font-mono"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Q=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?r5:"button";return o.jsx(a,{className:Re(B5({variant:e,size:n,className:t})),ref:i,...s})});Q.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...z5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:EC("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(H5,{ref:i,iconNode:e,className:EC(`lucide-${$5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=te("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=te("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=te("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=te("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=te("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=te("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=te("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=te("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=te("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=te("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=te("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=te("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=te("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=te("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=te("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=te("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=te("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=te("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=te("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mU="/ZedCTF/favicon.png",ut=()=>{var I;const[t,e]=g.useState(!1),{user:n}=zn(),{isAdmin:r,isModerator:s,loading:i}=Qh(),a=Bn(),l=to(),[c,d]=g.useState(!1),h=async()=>{d(!0);try{await RD(sc),a("/"),e(!1)}catch(_){console.error("Error signing out:",_)}finally{d(!1)}},f=_=>l.pathname===_,p=!i&&(r||s),v=!i&&!r&&!s;return o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-border bg-background/95 backdrop-blur-lg supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(Ve,{to:"/",className:"flex items-center gap-2",children:[o.jsx("img",{src:mU,alt:"ZedCTF",className:"w-8 h-8"}),o.jsx("span",{className:"text-2xl font-bold text-green-600",children:"ZedCTF"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[o.jsxs(Ve,{to:"/",className:`flex items-center gap-2 transition-colors group ${f("/")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(J_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Home"]}),v&&o.jsxs(Ve,{to:"/dashboard",className:`flex items-center gap-2 transition-colors group ${f("/dashboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(zd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Dashboard"]}),v&&o.jsxs(Ve,{to:"/practice",className:`flex items-center gap-2 transition-colors group ${f("/practice")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Yn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Practice"]}),v&&o.jsxs(Ve,{to:"/live",className:`flex items-center gap-2 transition-colors group ${f("/live")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(X_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"LIVE CTF"]}),v&&o.jsxs(Ve,{to:"/leaderboard",className:`flex items-center gap-2 transition-colors group ${f("/leaderboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(nn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Leaderboard"]}),v&&o.jsxs(Ve,{to:"/writeups",className:`flex items-center gap-2 transition-colors group ${f("/writeups")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Hd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Writeups"]}),p&&o.jsxs(Ve,{to:"/admin",className:`flex items-center gap-2 transition-colors group ${f("/admin")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Qe,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Admin"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[v&&o.jsx(Q,{variant:"ghost",size:"icon",className:"hidden sm:flex",children:o.jsx(la,{className:"w-5 h-5"})}),v&&o.jsxs(Q,{variant:"ghost",size:"icon",className:"relative",children:[o.jsx(q5,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx(Q,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>e(!t),children:o.jsx(aU,{className:"w-5 h-5"})}),n?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-foreground/80 hidden sm:block",children:[n.displayName||((I=n.email)==null?void 0:I.split("@")[0]),p&&" (Admin)"]}),o.jsxs(Q,{variant:"default",size:"sm",className:"bg-red-500 hover:bg-red-600 text-white gap-2",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(eb,{className:"w-4 h-4"}),c?"...":"Logout"]})]}):o.jsx(Ve,{to:"/login",children:o.jsxs(Q,{variant:"default",size:"sm",className:"bg-green-500 hover:bg-green-600 text-white gap-2",children:[o.jsx(Tn,{className:"w-4 h-4"}),"Sign In"]})})]})]}),t&&o.jsx("div",{className:"md:hidden border-t border-border bg-background/95 backdrop-blur-lg animate-fade-in",children:o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs(Ve,{to:"/",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(J_,{className:"w-5 h-5"}),"Home"]}),v&&o.jsxs(Ve,{to:"/dashboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/dashboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(zd,{className:"w-5 h-5"}),"Dashboard"]}),v&&o.jsxs(Ve,{to:"/practice",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/practice")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Yn,{className:"w-5 h-5"}),"Practice"]}),v&&o.jsxs(Ve,{to:"/live",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/live")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(X_,{className:"w-5 h-5"}),"LIVE CTF"]}),v&&o.jsxs(Ve,{to:"/leaderboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/leaderboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(nn,{className:"w-5 h-5"}),"Leaderboard"]}),v&&o.jsxs(Ve,{to:"/writeups",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/writeups")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Hd,{className:"w-5 h-5"}),"Writeups"]}),p&&o.jsxs(Ve,{to:"/admin",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/admin")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Qe,{className:"w-5 h-5"}),"Admin"]}),o.jsx("div",{className:"px-4 pt-2 border-t border-border",children:n?o.jsxs(Q,{variant:"default",className:"w-full justify-start gap-2 bg-red-500 hover:bg-red-600",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(eb,{className:"w-4 h-4"}),c?"Signing out...":"Logout"]}):o.jsx(Ve,{to:"/login",onClick:()=>e(!1),children:o.jsxs(Q,{variant:"default",className:"w-full justify-start gap-2 bg-green-500 hover:bg-green-600",children:[o.jsx(Tn,{className:"w-4 h-4"}),"Sign In"]})})})]})})]})})},gU="/ZedCTF/assets/hero-bg-x4dJ88o_.jpg",yU=()=>{const[t,e]=g.useState({totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0}),[n,r]=g.useState(!0),s=Bn(),i=async()=>{try{const c={totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0},d=["users","user","members","profiles"];for(const v of d)try{const _=(await fu(kt(ye,v))).data().count;if(_>0){c.totalUsers=_;break}}catch{continue}const h=["challenges","challenge","ctfChallenges","practice"];for(const v of h)try{const _=(await fu(kt(ye,v))).data().count;if(_>0){c.totalChallenges=_;break}}catch{continue}const f=["events","event","liveEvents","competitions"];for(const v of f)try{const _=(await fu(kt(ye,v))).data().count;if(_>0){c.liveEvents=_;break}}catch{continue}const p=["submissions","submission","solves","completions"];for(const v of p)try{const _=(await fu(kt(ye,v))).data().count;if(_>0){c.totalCompletions=_;break}}catch{continue}if(c.totalCompletions===0&&c.totalUsers>0)try{const v=await er(kt(ye,"users"));let I=0;v.forEach(_=>{const S=_.data();I+=S.challengesSolved||S.solvedChallenges||S.totalSolved||0}),c.totalCompletions=I}catch{}e(c)}catch{console.log("Stats loading completed")}finally{r(!1)}};g.useEffect(()=>{i()},[]);const a=()=>{s("/practice")},l=()=>{s("/live")};return o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:`url(${gU})`}}),o.jsx("div",{className:"absolute inset-0 cyber-grid opacity-10"}),o.jsx("div",{className:"container relative z-10 px-4 py-32",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border border-primary/30 bg-primary/5 mb-4",children:[o.jsx(CC,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm text-primary font-mono",children:"Zambia's Premier CTF Platform"})]}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:["Master Cybersecurity",o.jsx("br",{}),o.jsx("span",{className:"neon-text animate-pulse-glow",children:"Capture The Flag"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Sharpen your hacking skills, compete in real-time challenges, and climb the leaderboard. From beginner to expert, ZedCTF is your gateway to cybersecurity mastery."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[o.jsxs(Q,{onClick:a,variant:"neon",size:"lg",className:"group",children:["Start Practicing",o.jsx(W5,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),o.jsxs(Q,{onClick:l,variant:"terminal",size:"lg",children:[o.jsx(J5,{className:"w-5 h-5"}),"Join LIVE Event"]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 pt-12 max-w-3xl mx-auto",children:[o.jsx(gu,{loading:n,value:t.totalUsers,label:"Registered Users",icon:o.jsx(nn,{className:"w-5 h-5"})}),o.jsx(gu,{loading:n,value:t.totalChallenges,label:"Challenges",icon:o.jsx(Qe,{className:"w-5 h-5"})}),o.jsx(gu,{loading:n,value:t.liveEvents,label:"Live Events",icon:o.jsx(Na,{className:"w-5 h-5"})}),o.jsx(gu,{loading:n,value:t.totalCompletions,label:"Completions",icon:o.jsx(Yn,{className:"w-5 h-5"})})]}),!n&&o.jsx("div",{className:"mt-4",children:o.jsx(Q,{variant:"outline",size:"sm",onClick:i,children:"Refresh Stats"})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent"})]})},gu=({loading:t,value:e,label:n,icon:r})=>t?o.jsxs("div",{className:"text-center animate-pulse",children:[o.jsx("div",{className:"h-8 bg-muted rounded w-16 mx-auto mb-2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-20 mx-auto"})]}):o.jsxs("div",{className:"text-center group",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl md:text-3xl font-bold text-primary mb-1",children:[r,e.toLocaleString()]}),o.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:n})]}),dt=()=>o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Qe,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-2xl font-bold neon-text",children:"ZedCTF"})]}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Zambia's premier platform for cybersecurity challenges and training."}),o.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:"An initiative by IT Society of Kapasa Makasa University"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Platform"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsx(Ve,{to:"/dashboard",className:"hover:text-primary transition-colors",children:"Dashboard"})}),o.jsx("li",{children:o.jsx(Ve,{to:"/practice",className:"hover:text-primary transition-colors",children:"Practice"})}),o.jsx("li",{children:o.jsx(Ve,{to:"/live",className:"hover:text-primary transition-colors",children:"LIVE Events"})}),o.jsx("li",{children:o.jsx(Ve,{to:"/leaderboard",className:"hover:text-primary transition-colors",children:"Leaderboard"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Resources"}),o.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:o.jsx("li",{children:o.jsx(Ve,{to:"/writeups",className:"hover:text-primary transition-colors",children:"Walkthroughs"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Connect"}),o.jsxs("div",{className:"flex gap-4 mb-4",children:[o.jsx("a",{href:"https://github.com/ZedCTF/ZedCTF",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(tU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(fU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(iU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(IC,{className:"w-5 h-5"})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-sm mb-2 text-primary flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),"Contributors"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[o.jsx("a",{href:"https://github.com/SokoJames",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"James Soko"}),o.jsx("a",{href:"https://github.com/abbymwale24",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Abby Mwale"}),o.jsx("a",{href:"https://github.com/Joylad-Jangazya",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Joylad Jangazya"}),o.jsx("a",{href:"https://github.com/Kono-hub",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Mary Chanda"}),o.jsx("a",{href:"https://github.com/ronny-brawn",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Aaron Nyakapanda"}),o.jsx("a",{href:"https://github.com/threat23",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Humphery Chileshe"})]})]})]})]}),o.jsxs("div",{className:"pt-8 border-t border-border text-center text-sm text-muted-foreground",children:[o.jsx("p",{children:" 2025 ZedCTF. All rights reserved. Made with  in Zambia"}),o.jsx("p",{className:"mt-1",children:"IT Society of Kapasa Makasa University"})]})]})}),vU=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(ut,{}),o.jsx(yU,{}),o.jsx(dt,{})]}),xU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({email:"",password:"",rememberMe:!1}),h=Bn(),f=new Lr;f.addScope("read:user"),f.addScope("user:email");const p=async E=>{try{const w=await sa(Xe(ye,"users",E));if(w.exists()){const C=w.data();if(C.role==="admin"||C.role==="moderator")return"/admin"}return"/dashboard"}catch(w){return console.error("Error checking user role:",w),"/dashboard"}},v=async E=>{E.preventDefault(),l(""),i(!0);try{const w=await CD(sc,c.email,c.password),C=await p(w.user.uid);h(C)}catch(w){console.error("Login error:",w),l(_(w.code))}finally{i(!1)}},I=async()=>{var E,w,C;r(!0),l("");try{const L=(await JD(sc,f)).user;if(!(await sa(Xe(ye,"users",L.uid))).exists())await qS(Xe(ye,"users",L.uid),{uid:L.uid,firstName:((E=L.displayName)==null?void 0:E.split(" ")[0])||"GitHub",lastName:((w=L.displayName)==null?void 0:w.split(" ").slice(1).join(" "))||"User",username:((C=L.email)==null?void 0:C.split("@")[0])||`github_${L.uid.slice(0,8)}`,email:L.email,displayName:L.displayName||"GitHub User",photoURL:L.photoURL,provider:"github",role:"user",isActive:!0,createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard");else{const N=await p(L.uid);h(N)}}catch(R){console.error("GitHub login error:",R),R.code==="auth/account-exists-with-different-credential"?l("An account already exists with the same email address but different sign-in credentials."):R.code==="auth/popup-closed-by-user"?console.log("GitHub login popup closed by user"):l("GitHub login failed. Please try again.")}finally{r(!1)}},_=E=>{switch(E){case"auth/invalid-email":return"Invalid email address format.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/account-exists-with-different-credential":return"An account already exists with the same email address but different sign-in credentials.";default:return"Login failed. Please try again."}},S=E=>{const{name:w,value:C,type:R,checked:L}=E.target;d(A=>({...A,[w]:R==="checkbox"?L:C}))};return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Qe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-muted-foreground",children:"Access your cybersecurity dashboard"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsx("div",{className:"relative",children:o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:S,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:S,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all pr-12",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(eg,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{name:"rememberMe",type:"checkbox",checked:c.rememberMe,onChange:S,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2",disabled:s}),o.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Remember me"})]}),o.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"})]}),o.jsxs("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(qd,{className:"w-5 h-5 animate-spin"}):o.jsx(oU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),s?"Signing in...":"Sign In"]})]}),o.jsxs("div",{className:"my-6 flex items-center",children:[o.jsx("div",{className:"flex-1 border-t border-border"}),o.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"or continue with"}),o.jsx("div",{className:"flex-1 border-t border-border"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.jsxs("button",{onClick:I,disabled:n||s,className:"flex items-center justify-center gap-2 px-4 py-3 bg-muted/50 border border-border rounded-lg text-foreground hover:bg-muted transition-colors hover:border-primary group disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(qd,{className:"w-5 h-5 animate-spin"}):o.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),n?"Signing in with GitHub...":"Continue with GitHub"]})}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["New to ZedCTF?"," ",o.jsx(Ve,{to:"/signup",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Create an account"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(dt,{})]})},wU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:"",agreeToTerms:!1}),h=Bn(),f=async I=>{if(I.preventDefault(),l(""),c.password!==c.confirmPassword){l("Passwords don't match!");return}if(c.password.length<6){l("Password should be at least 6 characters");return}if(!c.agreeToTerms){l("Please agree to the terms and conditions");return}i(!0);try{const S=(await SD(sc,c.email,c.password)).user;await VN(S,{displayName:`${c.firstName} ${c.lastName}`.trim()}),await qS(Xe(ye,"users",S.uid),{uid:S.uid,firstName:c.firstName,lastName:c.lastName,username:c.username,email:c.email,displayName:`${c.firstName} ${c.lastName}`.trim(),createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard")}catch(_){console.error("Registration error:",_),l(p(_.code))}finally{i(!1)}},p=I=>{switch(I){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak.";default:return"Registration failed. Please try again."}},v=I=>{const{name:_,value:S,type:E,checked:w}=I.target;d(C=>({...C,[_]:E==="checkbox"?w:S}))};return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Qe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Join the Community"}),o.jsx("p",{className:"text-muted-foreground",children:"Start your cybersecurity journey today"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground mb-2",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:c.firstName,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"John",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground mb-2",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:c.lastName,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Doe",disabled:s})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(IC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-foreground mb-2",children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"cyber_hacker",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Z_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:v,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(eg,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Z_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",required:!0,value:c.confirmPassword,onChange:v,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:n?o.jsx(eg,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-start",children:o.jsxs("label",{className:"flex items-start",children:[o.jsx("input",{name:"agreeToTerms",type:"checkbox",checked:c.agreeToTerms,onChange:v,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2 mt-1",disabled:s}),o.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["I agree to the"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Terms of Service"})," ","and"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Privacy Policy"})]})]})}),o.jsxs("button",{type:"submit",disabled:s||!c.agreeToTerms,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(qd,{className:"w-5 h-5 animate-spin"}):o.jsx(pU,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),s?"Creating Account...":"Create Account"]})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",o.jsx(Ve,{to:"/login",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(dt,{})]})},_U=()=>{const[t,e]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(""),[h,f]=g.useState("all"),[p,v]=g.useState("all"),[I,_]=g.useState("all"),[S,E]=g.useState(!0),[w]=g.useState(!1),C=async()=>{try{E(!0);const N=await fetch("/api/writeups");if(N.ok){const y=await N.json();e(y),r(y);const T=Array.from(new Set(y.map(j=>j.category))).filter(Boolean),b=Array.from(new Set(y.map(j=>j.difficulty))).filter(Boolean);i(T),l(b)}else e([]),r([]),i([]),l([])}catch{e([]),r([]),i([]),l([])}finally{E(!1)}};g.useEffect(()=>{C()},[]),g.useEffect(()=>{let A=t;c&&(A=A.filter(N=>N.title.toLowerCase().includes(c.toLowerCase())||N.description.toLowerCase().includes(c.toLowerCase())||N.tags.some(y=>y.toLowerCase().includes(c.toLowerCase())))),h!=="all"&&(A=A.filter(N=>N.category===h)),p!=="all"&&(A=A.filter(N=>N.difficulty===p)),I!=="all"&&(A=A.filter(N=>N.status===I)),r(A)},[c,h,p,I,t]);const R=A=>{switch(A){case"approved":return o.jsx(Ur,{className:"w-4 h-4 text-green-400"});case"rejected":return o.jsx(oa,{className:"w-4 h-4 text-red-400"});default:return o.jsx(Na,{className:"w-4 h-4 text-yellow-400"})}},L=A=>{switch(A.toLowerCase()){case"easy":return"bg-primary/20 text-primary border-primary/30";case"medium":return"bg-secondary/20 text-secondary border-secondary/30";case"hard":return"bg-destructive/20 text-destructive border-destructive/30";case"insane":return"bg-purple-500/20 text-purple-500 border-purple-500/30";case"expert":return"bg-red-500/20 text-red-500 border-red-500/30";case"beginner":return"bg-green-500/20 text-green-500 border-green-500/30";default:return"bg-muted/20 text-muted-foreground border-muted/30"}};return S?o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading writeups..."})]})}),o.jsx(dt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Qe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Community ",o.jsx("span",{className:"text-primary",children:"Writeups"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Learn from other players' solutions and share your own approaches"})]}),o.jsxs("div",{className:"bg-muted/20 border border-border rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"Search writeups, tags, challenges...",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:A=>f(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Categories"}),s.map(A=>o.jsx("option",{value:A,children:A},A))]})}),o.jsx("div",{children:o.jsxs("select",{value:p,onChange:A=>v(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Difficulties"}),a.map(A=>o.jsx("option",{value:A,children:A},A))]})})]}),w&&o.jsx("div",{className:"mt-4",children:o.jsxs("select",{value:I,onChange:A=>_(A.target.value),className:"w-full md:w-auto px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"}),o.jsx("option",{value:"rejected",children:"Rejected"})]})})]}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(Ve,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center gap-2",children:[o.jsx(ti,{className:"w-5 h-5"}),"New Writeup"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${L(A.difficulty)}`,children:A.difficulty}),o.jsxs("div",{className:"flex items-center gap-1",children:[R(A.status),o.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:A.status})]})]}),o.jsx("span",{className:"inline-block px-2 py-1 bg-primary/10 text-primary text-xs rounded border border-primary/20 mb-3",children:A.category}),o.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-3 group-hover:text-primary transition-colors line-clamp-2",children:A.title}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:A.description}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[o.jsx(Hd,{className:"w-4 h-4"}),o.jsxs("span",{children:["Challenge: ",A.challenge]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[A.tags.slice(0,3).map((N,y)=>o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["#",N]},y)),A.tags.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["+",A.tags.length-3]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:o.jsx(Tn,{className:"w-3 h-3 text-primary"})}),o.jsx("span",{className:"text-sm text-muted-foreground",children:A.author.name})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ic,{className:"w-4 h-4"}),o.jsx("span",{children:A.views})]}),o.jsx("span",{children:new Date(A.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(Ve,{to:`/writeups/${A.id}`,className:"flex-1 bg-primary/10 text-primary border border-primary/20 py-2 px-4 rounded-lg text-center hover:bg-primary/20 transition-colors",children:"Read"}),w&&A.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 bg-green-500/10 text-green-500 border border-green-500/20 py-2 px-4 rounded-lg hover:bg-green-500/20 transition-colors",children:"Approve"}),o.jsx("button",{className:"flex-1 bg-red-500/10 text-red-500 border border-red-500/20 py-2 px-4 rounded-lg hover:bg-red-500/20 transition-colors",children:"Reject"})]})]})]},A.id))}),n.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Hd,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No writeups found"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:t.length===0?"No writeups have been submitted yet. Be the first to share your solution!":"Try adjusting your search or filters"}),o.jsxs(Ve,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 inline-flex items-center gap-2",children:[o.jsx(ti,{className:"w-5 h-5"}),"Create First Writeup"]})]})]})}),o.jsx(dt,{})]})},bU=()=>{const t=Bn(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(""),[f,p]=g.useState(""),[v,I]=g.useState(""),[_,S]=g.useState(!1),[E,w]=g.useState([]),[C,R]=g.useState([]),[L,A]=g.useState([]),[N,y]=g.useState(!0),T=async()=>{try{y(!0);const k="/api/challenges/available",P="/api/categories",W="/api/difficulties",[se,J,le]=await Promise.all([fetch(k),fetch(P),fetch(W)]);if(se.ok){const M=await se.json();w(M)}else w([]);if(J.ok){const M=await J.json();R(M),M.length>0&&h(M[0])}else R([]);if(le.ok){const M=await le.json();A(M),M.length>0&&p(M[0])}else A([])}catch{w([]),R([]),A([])}finally{y(!1)}},b=async k=>{k.preventDefault(),S(!0);try{(await fetch("/api/writeups/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:r,content:i,challengeId:l,category:d,difficulty:f,tags:v.split(",").map(W=>W.trim()).filter(W=>W)})})).ok?t("/writeups"):console.error("Failed to create writeup")}catch(P){console.error("Error creating writeup:",P)}finally{S(!1)}},j=(k,P)=>{document.execCommand(k,!1,P)};return g.useEffect(()=>{if(l){const k=E.find(P=>P.id===l);k&&(h(k.category),p(k.difficulty))}},[l,E]),g.useEffect(()=>{T()},[]),N?o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading form data..."})]})}),o.jsx(dt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto max-w-4xl",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Qe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Create ",o.jsx("span",{className:"text-primary",children:"Writeup"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Share your solution and help others learn from your approach"})]}),o.jsxs("form",{id:"writeup-form",onSubmit:b,className:"space-y-8",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Basic Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Writeup Title *"}),o.jsx("input",{type:"text",required:!0,value:e,onChange:k=>n(k.target.value),placeholder:"Enter a compelling title for your writeup...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),o.jsx("textarea",{required:!0,value:r,onChange:k=>s(k.target.value),placeholder:"Brief description of your writeup...",rows:3,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Challenge *"}),o.jsxs("select",{required:!0,value:l,onChange:k=>c(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"",children:"Select a challenge"}),E.map(k=>o.jsx("option",{value:k.id,children:k.title},k.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category *"}),o.jsx("select",{required:!0,value:d,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:C.map(k=>o.jsx("option",{value:k,children:k},k))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty *"}),o.jsx("select",{required:!0,value:f,onChange:k=>p(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:L.map(k=>o.jsx("option",{value:k,children:k},k))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("input",{type:"text",value:v,onChange:k=>I(k.target.value),placeholder:"Comma-separated tags (e.g., sql-injection, web, bypass)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Writeup Content"}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-3 bg-muted/20 rounded-lg border border-border",children:[o.jsx("button",{type:"button",onClick:()=>j("bold"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bold",children:o.jsx(G5,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("italic"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Italic",children:o.jsx(rU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("insertUnorderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bullet List",children:o.jsx(tg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("insertOrderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Numbered List",children:o.jsx(tg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const k=prompt("Enter URL:");k&&j("createLink",k)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Link",children:o.jsx(aa,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("formatBlock","<pre>"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Code Block",children:o.jsx(Z5,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const k=prompt("Enter image URL:");k&&j("insertImage",k)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Image",children:o.jsx(nU,{className:"w-4 h-4 text-foreground"})})]}),o.jsx("div",{contentEditable:!0,onInput:k=>a(k.currentTarget.innerHTML),className:"min-h-[400px] px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all prose prose-invert max-w-none",style:{fontFamily:"Georgia, serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":"Start writing your amazing writeup here... You can include code snippets, images, and formatted text."}),o.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Pro tips:"})]}),o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsx("li",{children:"Use the toolbar above to format your text"}),o.jsx("li",{children:"Include code snippets using the code block button"}),o.jsx("li",{children:"Add images to illustrate your steps"}),o.jsx("li",{children:"Break down complex solutions into clear steps"}),o.jsx("li",{children:"Share your thought process and learning moments"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsxs("button",{type:"button",className:"flex items-center gap-2 px-6 py-3 bg-muted text-muted-foreground rounded-lg font-semibold hover:bg-muted/80 transition-colors",onClick:()=>t("/writeups"),children:[o.jsx(ic,{className:"w-4 h-4"}),"Cancel"]}),o.jsxs("button",{type:"submit",disabled:_,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[_?o.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}):o.jsx(jC,{className:"w-4 h-4"}),_?"Publishing...":"Publish Writeup"]})]})]})]})}),o.jsx(dt,{})]})},nb=()=>new Promise(t=>{setTimeout(()=>{const e={id:"github-"+Date.now(),username:"zedctf_user",email:"user@zedctf.com",name:"ZedCTF User",avatar:"https://github.com/github.png",provider:"github"};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true"),t(e)},1500)}),EU=()=>{const[t,e]=g.useState("loading"),[n,r]=g.useState(""),s=Bn();return g.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search),l=a.get("code");if(a.get("error")){e("error"),r("GitHub authentication failed. Please try again.");return}try{if(await new Promise(d=>setTimeout(d,2e3)),l){const d=await nb();e("success"),r(`Welcome, ${d.username}! Successfully authenticated with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}else{const d=await nb();e("success"),r(`Welcome, ${d.username}! Successfully signed in with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}}catch(d){e("error"),r("Authentication failed. Please try again."),console.error("GitHub callback error:",d)}})()},[s]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx(Qe,{className:"w-10 h-10 text-green-400"}),o.jsx("span",{className:"text-3xl font-bold text-white",children:"ZedCTF"})]}),o.jsxs("div",{className:"space-y-4",children:[t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx(qd,{className:"w-12 h-12 text-green-400 animate-spin mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Connecting to GitHub..."}),o.jsx("p",{className:"text-gray-300",children:"Please wait while we authenticate your account."})]}),t==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Ur,{className:"w-12 h-12 text-green-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Successful!"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Redirecting to homepage..."})]}),t==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(oa,{className:"w-12 h-12 text-red-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Failed"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Back to Login"}),o.jsx("button",{onClick:()=>s("/signup"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Try Sign Up"})]})]})]})]})})},NU=()=>{const t=to();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},ne=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Re("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ne.displayName="Card";const Ne=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Re("flex flex-col space-y-1.5 p-6",t),...e}));Ne.displayName="CardHeader";const Te=g.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Re("text-2xl font-semibold leading-none tracking-tight",t),...e}));Te.displayName="CardTitle";const Ht=g.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:Re("text-sm text-muted-foreground",t),...e}));Ht.displayName="CardDescription";const re=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Re("p-6 pt-0",t),...e}));re.displayName="CardContent";const TU=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Re("flex items-center p-6 pt-0",t),...e}));TU.displayName="CardFooter";const SU=({isOpen:t,onClose:e})=>{const{user:n}=zn(),[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),d=g.useRef(null),[h,f]=g.useState({displayName:"",bio:"",role:"student",institution:""}),[p,v]=g.useState(null),[I,_]=g.useState("");g.useEffect(()=>{t&&n&&(async()=>{try{const N=await sa(Xe(ye,"users",n.uid));if(N.exists()){const y=N.data();f({displayName:y.displayName||n.displayName||"",bio:y.bio||"",role:y.role||"student",institution:y.institution||""}),_(y.photoURL||n.photoURL||"")}else f({displayName:n.displayName||"",bio:"",role:"student",institution:""}),_(n.photoURL||"")}catch(N){console.error("Error fetching user data:",N)}})()},[t,n]);const S=A=>{const{name:N,value:y}=A.target;f(T=>({...T,[N]:y}))},E=async A=>{var y;const N=(y=A.target.files)==null?void 0:y[0];if(N){if(!N.type.startsWith("image/")){alert("Please select an image file");return}if(N.size>2*1024*1024){alert("Image size should be less than 2MB for faster upload");return}v(N);const T=URL.createObjectURL(N);_(T)}},w=(A,N=800,y=.8)=>new Promise((T,b)=>{const j=document.createElement("canvas"),k=j.getContext("2d"),P=new Image;P.onload=()=>{let W=P.width,se=P.height;W>N&&(se=se*N/W,W=N),j.width=W,j.height=se,k==null||k.drawImage(P,0,0,W,se),j.toBlob(J=>{if(J){const le=new File([J],A.name,{type:"image/jpeg",lastModified:Date.now()});T(le)}else b(new Error("Image compression failed"))},"image/jpeg",y)},P.onerror=b,P.src=URL.createObjectURL(A)}),C=async(A,N)=>{const y=await w(A),b=`profile_${Date.now()}.jpg`,j=WF(XF,`profile-pictures/${N}/${b}`),k=await zF(j,y);return await HF(k.ref)},R=async A=>{if(A.preventDefault(),!!n){s(!0),c(!1);try{let N=n.photoURL;if(p){a(!0);try{N=await C(p,n.uid),console.log("Profile image uploaded successfully")}catch(T){console.error("Error uploading image:",T)}finally{a(!1)}}const y=[];(h.displayName!==n.displayName||N!==n.photoURL)&&y.push(VN(n,{displayName:h.displayName,photoURL:N})),y.push(Pn(Xe(ye,"users",n.uid),{displayName:h.displayName,bio:h.bio,role:h.role,institution:h.institution,photoURL:N,updatedAt:new Date})),await Promise.all(y),console.log("Profile updated successfully"),c(!0),setTimeout(()=>{e(),window.location.reload()},1e3)}catch(N){console.error("Error updating profile:",N),alert("Failed to update profile. Please try again.")}finally{s(!1)}}},L=()=>{var A;(A=d.current)==null||A.click()};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",disabled:r,children:o.jsx(ac,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[l&&o.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded flex items-center gap-2",children:[o.jsx(Ur,{className:"w-5 h-5"}),"Profile updated successfully!"]}),o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full bg-muted/50 border-2 border-border flex items-center justify-center overflow-hidden",children:I?o.jsx("img",{src:I,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Tn,{className:"w-12 h-12 text-muted-foreground"})}),o.jsx("button",{type:"button",onClick:L,disabled:i||r,className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 hover:bg-primary/90 transition-colors disabled:opacity-50",children:i?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(K5,{className:"w-4 h-4"})}),o.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:i||r})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:i?"Uploading image...":"Click the camera icon to upload a profile picture (max 2MB)"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-foreground mb-2",children:"Display Name"}),o.jsx("input",{id:"displayName",name:"displayName",type:"text",value:h.displayName,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Enter your display name",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-foreground mb-2",children:"Bio"}),o.jsx("textarea",{id:"bio",name:"bio",rows:3,value:h.bio,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none",placeholder:"Tell us about yourself...",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:"I am a"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"student",label:"Student",icon:bv},{value:"lecturer",label:"Lecturer",icon:nn},{value:"expert",label:"Expert",icon:NC},{value:"general",label:"General User",icon:Tn}].map(({value:A,label:N,icon:y})=>o.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-all ${h.role===A?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 text-foreground"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:A,checked:h.role===A,onChange:S,className:"hidden",disabled:r}),o.jsx(y,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:N})]},A))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-foreground mb-2",children:"Institution"}),o.jsx("input",{id:"institution",name:"institution",type:"text",value:h.institution,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Your school, university, or organization",disabled:r})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,disabled:r,className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r||i,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},CU=()=>{var w,C;const{user:t}=zn();Bn();const[e,n]=g.useState(null),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState([]),[d,h]=g.useState(!0),[f,p]=g.useState(!1),[v,I]=g.useState(null),_=R=>{switch(R){case"student":return o.jsx(bv,{className:"w-4 h-4"});case"lecturer":return o.jsx(nn,{className:"w-4 h-4"});case"expert":return o.jsx(NC,{className:"w-4 h-4"});default:return o.jsx(Tn,{className:"w-4 h-4"})}},S=R=>{switch(R){case"student":return"Student";case"lecturer":return"Lecturer";case"expert":return"Expert";default:return"General User"}},E=async()=>{var R,L,A;if(t)try{h(!0),console.log("Fetching real dashboard data for user:",t.uid);const N=await sa(Xe(ye,"users",t.uid));if(N.exists()){const y=N.data();console.log("Real user data from Firestore:",y),I(y),n({totalPoints:y.totalPoints||0,challengesSolved:y.challengesSolved||0,currentRank:y.currentRank||0,timeSpent:y.timeSpent||"0h 0m",username:y.username||((R=t==null?void 0:t.email)==null?void 0:R.split("@")[0])||"Hacker",joinDate:y.createdAt||(t==null?void 0:t.metadata.creationTime)||new Date().toISOString(),firstName:y.firstName,lastName:y.lastName,displayName:y.displayName,bio:y.bio,role:y.role,institution:y.institution,photoURL:y.photoURL})}else console.log("No user document found in Firestore"),n({totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m",username:((L=t==null?void 0:t.email)==null?void 0:L.split("@")[0])||"Hacker",joinDate:(t==null?void 0:t.metadata.creationTime)||new Date().toISOString()});try{const y=zr(kt(ye,"challenges"),Nr("solvedBy","array-contains",t.uid),qs("solvedAt","desc"),fp(5)),b=(await er(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real solved challenges:",b),s(b)}catch{console.log("No challenges collection or no solved challenges yet"),s([])}try{const y=zr(kt(ye,"events"),Nr("participants","array-contains",t.uid),qs("date","desc"),fp(5)),b=(await er(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real events participated:",b),a(b)}catch{console.log("No events collection or no events participated yet"),a([])}try{const y=zr(kt(ye,"activity"),Nr("userId","==",t.uid),qs("timestamp","desc"),fp(10)),b=(await er(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real user activity:",b),c(b)}catch{console.log("No activity collection yet, creating default activity");const T={id:"welcome",action:"Account Created",description:"Welcome to ZedCTF! Start your cybersecurity journey.",timestamp:(t==null?void 0:t.metadata.creationTime)||new Date,userId:t.uid};c([T])}}catch(N){console.error("Error fetching real dashboard data:",N),n({totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m",username:((A=t==null?void 0:t.email)==null?void 0:A.split("@")[0])||"Hacker",joinDate:(t==null?void 0:t.metadata.creationTime)||new Date().toISOString()}),s([]),a([]),c([{id:"welcome",action:"Account Created",description:"Welcome to ZedCTF! Start your cybersecurity journey.",timestamp:(t==null?void 0:t.metadata.creationTime)||new Date}])}finally{h(!1)}};return g.useEffect(()=>{t&&E()},[t]),d?o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{id:"dashboard",className:"pt-24 pb-16 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading your dashboard..."})]})}),o.jsx(dt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{id:"dashboard",className:"pt-24 pb-16 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center overflow-hidden border-2 border-primary/30",children:t!=null&&t.photoURL||v!=null&&v.photoURL?o.jsx("img",{src:(t==null?void 0:t.photoURL)||(v==null?void 0:v.photoURL),alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Tn,{className:"w-8 h-8 text-primary"})}),o.jsx("button",{onClick:()=>p(!0),className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground rounded-full p-1 hover:bg-primary/90 transition-colors",title:"Edit Profile",children:o.jsx(AC,{className:"w-3 h-3"})})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-4xl font-bold",children:["Welcome back,"," ",o.jsx("span",{className:"text-primary",children:(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||(e==null?void 0:e.username)||((w=t==null?void 0:t.email)==null?void 0:w.split("@")[0])||"Hacker"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx("span",{children:t==null?void 0:t.email}),(v==null?void 0:v.role)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("div",{className:"flex items-center gap-1",children:[_(v.role),o.jsx("span",{children:S(v.role)})]})]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Member since"," ",e!=null&&e.joinDate?new Date(e.joinDate).toLocaleDateString():"recently"]})]}),(v==null?void 0:v.institution)&&o.jsx("p",{className:"text-sm text-muted-foreground",children:v.institution}),(v==null?void 0:v.bio)&&o.jsx("p",{className:"text-sm text-muted-foreground mt-1 max-w-md",children:v.bio})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(ne,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium text-muted-foreground",children:"Total Points"}),o.jsx(Yn,{className:"w-5 h-5 text-primary"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:((C=e==null?void 0:e.totalPoints)==null?void 0:C.toLocaleString())||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Lifetime points earned"})]})]}),o.jsxs(ne,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium text-muted-foreground",children:"Challenges Solved"}),o.jsx(vp,{className:"w-5 h-5 text-secondary"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:(e==null?void 0:e.challengesSolved)||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Total challenges completed"})]})]}),o.jsxs(ne,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium text-muted-foreground",children:"Current Rank"}),o.jsx(hU,{className:"w-5 h-5 text-primary"})]}),o.jsxs(re,{children:[o.jsxs("div",{className:"text-3xl font-bold mb-2",children:["#",(e==null?void 0:e.currentRank)||"0"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Global leaderboard position"})]})]}),o.jsxs(ne,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium text-muted-foreground",children:"Time Spent"}),o.jsx(Na,{className:"w-5 h-5 text-muted-foreground"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:(e==null?void 0:e.timeSpent)||"0h 0m"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Total practice time"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ne,{className:"border-border",children:[o.jsx(Ne,{children:o.jsxs(Te,{className:"flex items-center gap-2",children:[o.jsx(vp,{className:"w-5 h-5 text-primary"}),"Recently Solved Challenges"]})}),o.jsx(re,{children:r.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(vp,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No challenges solved yet"}),o.jsx("p",{className:"text-sm mt-2",children:"Start practicing to see your progress here"})]}):o.jsx("div",{className:"space-y-4",children:r.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.title}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:R.category}),o.jsx("span",{children:""}),o.jsx("span",{children:R.difficulty}),o.jsx("span",{children:""}),o.jsx("span",{children:R.solvedAt?new Date(R.solvedAt.toDate?R.solvedAt.toDate():R.solvedAt).toLocaleDateString():"Recently"})]})]}),o.jsxs("div",{className:"text-primary font-bold",children:["+",R.points]})]},R.id))})})]}),o.jsxs(ne,{className:"border-border",children:[o.jsx(Ne,{children:o.jsxs(Te,{className:"flex items-center gap-2",children:[o.jsx(ia,{className:"w-5 h-5 text-primary"}),"Events Participated In"]})}),o.jsx(re,{children:i.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(ia,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No events participated yet"}),o.jsx("p",{className:"text-sm mt-2",children:"Join live events to appear here"})]}):o.jsx("div",{className:"space-y-4",children:i.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.name}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:R.date}),R.position&&o.jsxs("span",{children:[" Position: #",R.position]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-secondary font-bold",children:R.prize}),R.pointsEarned>0&&o.jsxs("div",{className:"text-xs text-primary",children:["+",R.pointsEarned," pts"]})]})]},R.id))})})]}),o.jsxs(ne,{className:"border-border lg:col-span-2",children:[o.jsx(Ne,{children:o.jsxs(Te,{className:"flex items-center gap-2",children:[o.jsx(zd,{className:"w-5 h-5 text-primary"}),"Recent Activity"]})}),o.jsx(re,{children:l.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(zd,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No recent activity"}),o.jsx("p",{className:"text-sm mt-2",children:"Your activity will appear here"})]}):o.jsx("div",{className:"space-y-3",children:l.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.action}),o.jsx("div",{className:"text-sm text-muted-foreground",children:R.description})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:R.timestamp?new Date(R.timestamp.toDate?R.timestamp.toDate():R.timestamp).toLocaleDateString():"Recently"}),R.points&&o.jsxs("div",{className:"text-sm text-primary font-bold",children:["+",R.points]})]})]},R.id))})})]})]})]})}),o.jsx(dt,{}),o.jsx(SU,{isOpen:f,onClose:()=>p(!1)})]})},IU=Yh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ue({className:t,variant:e,...n}){return o.jsx("div",{className:Re(IU({variant:e}),t),...n})}const he=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));he.displayName="Input";const jU=()=>{const{user:t}=zn(),e=Bn(),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[p,v]=g.useState(null),[I,_]=g.useState("");g.useEffect(()=>{S()},[]),g.useEffect(()=>{w()},[h,p,n]);const S=async()=>{try{d(!0),_("");const T=zr(kt(ye,"challenges"),Nr("isActive","==",!0),Nr("availableInPractice","==",!0)),j=(await er(T)).docs.map(k=>({id:k.id,...k.data()}));r(j),E(j)}catch(T){console.error("Error fetching practice challenges:",T),_("Failed to load challenges. Please check your permissions.")}finally{d(!1)}},E=T=>{const b=new Map;T.forEach(P=>{const W=P.finalCategory||P.category;b.set(W,(b.get(W)||0)+1)});const j={web:{color:"from-blue-500 to-cyan-500",icon:"",description:"Web application security, SQL injection, XSS, and more"},crypto:{color:"from-purple-500 to-pink-500",icon:"",description:"Cryptography, encryption, and cryptographic attacks"},forensics:{color:"from-orange-500 to-red-500",icon:"",description:"Digital forensics, file analysis, and data recovery"},pwn:{color:"from-red-500 to-rose-500",icon:"",description:"Binary exploitation, memory corruption, and reverse engineering"},reversing:{color:"from-indigo-500 to-purple-500",icon:"",description:"Reverse engineering and malware analysis"},misc:{color:"from-gray-500 to-slate-500",icon:"",description:"Miscellaneous challenges and various security topics"}},k=Array.from(b.entries()).map(([P,W])=>{const se=j[P.toLowerCase()]||{color:"from-gray-500 to-slate-500",icon:"",description:"Various security challenges"};return{name:P,count:W,icon:se.icon,color:se.color,description:se.description}});k.sort((P,W)=>W.count-P.count),i(k)},w=()=>{let T=[...n];h&&(T=T.filter(b=>b.title.toLowerCase().includes(h.toLowerCase())||b.description.toLowerCase().includes(h.toLowerCase()))),p&&(T=T.filter(b=>(b.finalCategory||b.category)===p)),T=T.sort((b,j)=>(j.totalPoints||j.points)-(b.totalPoints||b.points)),l(T)},C=T=>{switch(T){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},R=T=>{switch(T){case"easy":return"Easy";case"medium":return"Medium";case"hard":return"Hard";case"expert":return"Expert";default:return T}},L=T=>{e(`/challenge/${T}`)},A=()=>{e("/live")},N=()=>{S()},y=()=>{f(""),v(null)};return c?o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading practice challenges..."})]})})}),o.jsx(dt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx(Qe,{className:"w-16 h-16 text-primary"})}),o.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Practice Challenges"}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-6",children:"Master your cybersecurity skills with hands-on challenges across different categories"}),I&&o.jsx(ne,{className:"max-w-2xl mx-auto mb-6 border-red-200 bg-red-50",children:o.jsx(re,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(X5,{className:"w-5 h-5 text-red-600"}),o.jsx("p",{className:"text-red-800",children:I})]})})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto mb-8",children:[o.jsx(ne,{className:"text-center border-2",children:o.jsxs(re,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:n.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Challenges"})]})}),o.jsx(ne,{className:"text-center border-2",children:o.jsxs(re,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.reduce((T,b)=>{var j;return T+(((j=b.solvedBy)==null?void 0:j.length)||0)},0)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Solves"})]})}),o.jsx(ne,{className:"text-center border-2",children:o.jsxs(re,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]})})]}),o.jsx(ne,{className:"max-w-4xl mx-auto mb-8 border-2 bg-gradient-to-r from-primary/5 to-primary/10",children:o.jsx(re,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Rs,{className:"w-8 h-8 text-primary"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Ready for Live Competition?"}),o.jsx("p",{className:"text-muted-foreground",children:"Test your skills against other players in real-time events!"})]})]}),o.jsxs(Q,{variant:"terminal",onClick:A,children:[o.jsx(Rs,{className:"w-4 h-4 mr-2"}),"View Live Events"]})]})})})]}),o.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),o.jsx(he,{placeholder:"Search challenges by title or description...",value:h,onChange:T=>f(T.target.value),className:"pl-12 h-12 text-lg border-2"})]})}),!p&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Choose a Category"}),o.jsxs(Q,{variant:"outline",onClick:N,size:"sm",children:[o.jsx(yp,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(T=>o.jsx(ne,{className:"border-2 hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>v(T.name),children:o.jsxs(re,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:`text-2xl bg-gradient-to-r ${T.color} rounded-lg p-3`,children:T.icon}),o.jsx(K_,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"})]}),o.jsx("h3",{className:"font-bold text-lg mb-2 group-hover:text-primary transition-colors",children:T.name}),o.jsxs("p",{className:"text-muted-foreground",children:[T.count," challenge",T.count!==1?"s":""]})]})},T.name))}):o.jsx(ne,{className:"text-center border-2",children:o.jsxs(re,{className:"p-12",children:[o.jsx(eU,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Categories Available"}),o.jsx("p",{className:"text-muted-foreground",children:"No practice challenges are currently available. Check back later!"})]})})]}),p&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Q,{variant:"outline",onClick:()=>v(null),className:"flex items-center gap-2",children:[o.jsx(K_,{className:"w-4 h-4 rotate-180"}),"Back to Categories"]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold",children:[p," Challenges"]}),o.jsxs("p",{className:"text-muted-foreground",children:[a.length," challenge",a.length!==1?"s":""," available"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{variant:"outline",onClick:y,size:"sm",children:"Clear Filters"}),o.jsxs(Q,{variant:"outline",onClick:N,size:"sm",children:[o.jsx(yp,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(T=>{var b,j,k,P;return o.jsx(ne,{className:"border-2 hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>L(T.id),children:o.jsxs(re,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h3",{className:"font-bold text-lg group-hover:text-primary transition-colors",children:T.title}),o.jsx(Ue,{className:C(T.difficulty),children:R(T.difficulty)})]}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:T.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(nn,{className:"w-4 h-4"}),o.jsx("span",{children:((b=T.solvedBy)==null?void 0:b.length)||0})]}),o.jsxs(Ue,{variant:"outline",className:"font-mono font-bold",children:[T.totalPoints||T.points," pts"]})]}),T.createdAt&&o.jsx("div",{className:"text-muted-foreground",children:((P=(k=(j=T.createdAt)==null?void 0:j.toDate)==null?void 0:k.call(j))==null?void 0:P.toLocaleDateString())||new Date(T.createdAt).toLocaleDateString()})]})]})},T.id)})}):o.jsx(ne,{className:"text-center border-2",children:o.jsxs(re,{className:"p-12",children:[o.jsx(la,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Challenges Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:h?`No challenges match "${h}" in ${p}`:`No challenges available in ${p}`}),o.jsx(Q,{variant:"outline",onClick:y,children:"Clear Search"})]})})]}),n.length===0&&!c&&!p&&o.jsx(ne,{className:"text-center border-2",children:o.jsxs(re,{className:"p-12",children:[o.jsx(Qe,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Practice Challenges Available"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Check back later for new practice challenges, or join a live event to test your skills."}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[o.jsxs(Q,{variant:"terminal",onClick:N,children:[o.jsx(yp,{className:"w-4 h-4 mr-2"}),"Refresh"]}),o.jsxs(Q,{variant:"outline",onClick:A,children:[o.jsx(Rs,{className:"w-4 h-4 mr-2"}),"View Live Events"]})]})]})})]})}),o.jsx(dt,{})]})},rb="/ZedCTF",AU=()=>{const{user:t}=zn(),[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const p=zr(kt(ye,"events"),Nr("status","in",["LIVE","STARTING_SOON"]),qs("startTime","asc")),v=zr(kt(ye,"events"),Nr("status","==","UPCOMING"),qs("startTime","asc")),[I,_]=await Promise.all([er(p),er(v)]),S=I.docs.map(w=>({id:w.id,...w.data()})),E=_.docs.map(w=>{var C;return{id:w.id,...w.data(),registered:t&&((C=w.data().registeredUsers)==null?void 0:C.includes(t.uid))||!1}});n(S),s(E)}catch(p){console.error("Error fetching events:",p),n([]),s([])}finally{a(!1)}},c=async p=>{var v;if(!t){alert("Please log in to register for events");return}try{const I=Xe(ye,"events",p);await Pn(I,{registeredUsers:L6(t.uid),participants:(((v=r.find(_=>_.id===p))==null?void 0:v.participants)||0)+1}),l()}catch(I){console.error("Failed to register for event:",I),alert("Failed to register for event. Please try again.")}},d=async p=>{var v;if(!t){alert("Please log in to join events");return}try{const I=Xe(ye,"events",p);await Pn(I,{participants:(((v=e.find(_=>_.id===p))==null?void 0:v.participants)||0)+1}),window.location.href=`${rb}/competition/${p}`}catch(I){console.error("Failed to join live event:",I),alert("Failed to join event. Please try again.")}},h=()=>{window.location.href=`${rb}/practice`};if(g.useEffect(()=>{l();const p=setInterval(l,1e4);return()=>clearInterval(p)},[t]),i)return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading events..."})]})}),o.jsx(dt,{})]});const f=e[0];return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Rs,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[o.jsx("span",{className:"text-primary",children:"LIVE"})," Events"]}),o.jsx("p",{className:"text-muted-foreground",children:"Compete in real-time for prizes"})]}),f?o.jsxs(ne,{className:"max-w-4xl mx-auto border-primary/50 bg-gradient-to-br from-primary/5 to-transparent mb-8 animate-glow",children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Te,{className:"text-2xl flex items-center gap-2",children:[o.jsxs("span",{className:"relative flex h-3 w-3",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-primary"})]}),f.title]}),o.jsx(Ue,{className:"bg-primary text-primary-foreground font-bold px-4 py-1",children:f.status==="LIVE"?"LIVE NOW":"STARTING SOON"})]})}),o.jsxs(re,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(Na,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold font-mono",children:f.timeLeft}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Left"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(nn,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.participants}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Players"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Yn,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.prize}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Prize Pool"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Rs,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.difficulty}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Difficulty"})]})]}),o.jsxs(Q,{variant:"neon",size:"lg",className:"w-full",onClick:()=>d(f.id),children:[o.jsx(Rs,{className:"w-5 h-5"}),f.status==="LIVE"?"Join Event Now":"Prepare for Event"]})]})]}):o.jsx(ne,{className:"max-w-4xl mx-auto border-border mb-8",children:o.jsxs(re,{className:"p-12 text-center",children:[o.jsx(Rs,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Live Events"}),o.jsx("p",{className:"text-muted-foreground",children:"Check back later for upcoming competitions"}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[o.jsx(Qe,{className:"w-12 h-12 text-primary mx-auto mb-3"}),o.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Want to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Sharpen your skills with our practice challenges while you wait for the next live event."}),o.jsxs(Q,{variant:"terminal",onClick:h,children:[o.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Explore Practice Challenges"]})]})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Upcoming Events"}),r.length===0?o.jsx(ne,{className:"border-border",children:o.jsxs(re,{className:"p-8 text-center",children:[o.jsx(ia,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-muted-foreground",children:"No upcoming events scheduled"})]})}):o.jsx("div",{className:"space-y-4",children:r.map(p=>o.jsx(ne,{className:"border-border hover:border-primary/30 transition-all",children:o.jsx(re,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("h4",{className:"font-bold text-xl",children:p.title}),o.jsx(Ue,{variant:"outline",className:"border-primary/30 text-primary",children:p.difficulty})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ia,{className:"w-4 h-4"}),p.date]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),p.participants," registered",p.maxParticipants&&` / ${p.maxParticipants} max`]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Yn,{className:"w-4 h-4"}),"Prize: ",p.prize]})]}),p.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:p.description})]}),o.jsx(Q,{variant:p.registered?"outline":"terminal",className:"md:ml-4",onClick:()=>!p.registered&&c(p.id),disabled:p.registered,children:p.registered?"Registered ":"Register"})]})})},p.id))})]}),o.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:o.jsx(ne,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:o.jsxs(re,{className:"p-8 text-center",children:[o.jsx(Qe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ready to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Access our extensive library of practice challenges covering web security, cryptography, forensics, and more. Perfect for beginners and experts alike."}),o.jsxs(Q,{variant:"terminal",size:"lg",onClick:h,children:[o.jsx(Qe,{className:"w-5 h-5 mr-2"}),"Explore Practice Challenges"]})]})})})]})}),o.jsx(dt,{})]})};function kU(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const d=f=>{var E;const{scope:p,children:v,...I}=f,_=((E=p==null?void 0:p[t])==null?void 0:E[c])||l,S=g.useMemo(()=>I,Object.values(I));return o.jsx(_.Provider,{value:S,children:v})};d.displayName=i+"Provider";function h(f,p){var _;const v=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,I=g.useContext(v);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,RU(s,...e)]}function RU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Zr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var bt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},PU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Nv=PU.reduce((t,e)=>{const n=wv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),RC={exports:{}},PC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=g;function DU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var LU=typeof Object.is=="function"?Object.is:DU,OU=ca.useState,MU=ca.useEffect,VU=ca.useLayoutEffect,FU=ca.useDebugValue;function UU(t,e){var n=e(),r=OU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return VU(function(){s.value=n,s.getSnapshot=e,xp(s)&&i({inst:s})},[t,n,e]),MU(function(){return xp(s)&&i({inst:s}),t(function(){xp(s)&&i({inst:s})})},[t]),FU(n),n}function xp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!LU(t,n)}catch{return!0}}function BU(t,e){return e()}var $U=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BU:UU;PC.useSyncExternalStore=ca.useSyncExternalStore!==void 0?ca.useSyncExternalStore:$U;RC.exports=PC;var zU=RC.exports;function HU(){return zU.useSyncExternalStore(WU,()=>!0,()=>!1)}function WU(){return()=>{}}var Tv="Avatar",[qU]=kU(Tv),[GU,DC]=qU(Tv),LC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return o.jsx(GU,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(Nv.span,{...r,ref:e})})});LC.displayName=Tv;var OC="AvatarImage",MC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=DC(OC,n),l=KU(r,i),c=Zr(d=>{s(d),a.onImageLoadingStatusChange(d)});return bt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(Nv.img,{...i,ref:e,src:r}):null});MC.displayName=OC;var VC="AvatarFallback",FC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=DC(VC,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(Nv.span,{...s,ref:e}):null});FC.displayName=VC;function sb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function KU(t,{referrerPolicy:e,crossOrigin:n}){const r=HU(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>sb(i,t));return bt(()=>{l(sb(i,t))},[i,t]),bt(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),a}var UC=LC,BC=MC,$C=FC;const zC=g.forwardRef(({className:t,...e},n)=>o.jsx(UC,{ref:n,className:Re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));zC.displayName=UC.displayName;const QU=g.forwardRef(({className:t,...e},n)=>o.jsx(BC,{ref:n,className:Re("aspect-square h-full w-full",t),...e}));QU.displayName=BC.displayName;const HC=g.forwardRef(({className:t,...e},n)=>o.jsx($C,{ref:n,className:Re("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));HC.displayName=$C.displayName;const YU=({eventName:t="CTF Competition"})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const c="/api/ctf/leaderboard",d="/api/platform/top-users",[h,f]=await Promise.all([fetch(c,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),fetch(d)]);if(h.ok){const p=await h.json();n(p)}else n([]);if(f.ok){const p=await f.json();s(p)}else s([])}catch{n([]),s([])}finally{a(!1)}};return g.useEffect(()=>{l();const c=setInterval(l,5e3);return()=>clearInterval(c)},[]),i?o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{id:"leaderboard",className:"pt-24 pb-16 bg-muted/20 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading leaderboard data..."})]})}),o.jsx(dt,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{id:"ctf-leaderboard",className:"pt-24 pb-16 bg-background min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Yn,{className:"w-12 h-12 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[t," - ",o.jsx("span",{className:"text-primary",children:"Live Scoreboard"})]})]}),o.jsxs(ne,{className:"max-w-6xl mx-auto border-border",children:[o.jsx(Ne,{className:"bg-muted/30",children:o.jsxs(Te,{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(tb,{className:"w-5 h-5 text-primary"}),"Live Competition Rankings"]}),o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:e.length>0?`${e.length} Teams Competing`:"No active competition"})]})}),o.jsx(re,{className:"p-0",children:e.length===0?o.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[o.jsx(Yn,{className:"w-20 h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg mb-2",children:"No scores available yet"}),o.jsx("p",{className:"text-sm",children:"Leaderboard will update when competition starts"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Team"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Captain"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Activity"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Challenge"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:e.map(c=>o.jsxs("tr",{className:"hover:bg-muted/20 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`text-lg font-bold ${c.rank<=3?"text-primary":"text-foreground"}`,children:c.rank})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:c.team}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-muted-foreground",children:c.captain}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-lg font-bold text-primary",children:c.points})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:c.lastActivity}),o.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground max-w-xs truncate",children:c.challenge})]},c.rank))})]})})})]})]})}),o.jsx("section",{id:"platform-leaderboard",className:"py-16 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Yn,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Global ",o.jsx("span",{className:"text-primary",children:"Leaderboard"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Top performers this month"})]}),o.jsxs(ne,{className:"max-w-4xl mx-auto border-border",children:[o.jsx(Ne,{children:o.jsxs(Te,{className:"flex items-center gap-2",children:[o.jsx(tb,{className:"w-5 h-5 text-primary"}),"Top Platform Hackers"]})}),o.jsx(re,{children:r.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Yn,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No platform rankings available yet"})]}):o.jsx("div",{className:"space-y-3",children:r.map(c=>o.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg transition-all duration-300 ${c.rank<=3?"bg-primary/10 border-2 border-primary/30 hover:border-primary/50":"bg-muted/30 border border-border hover:border-primary/30"}`,children:[o.jsx("div",{className:`text-2xl font-bold w-12 text-center ${c.rank<=3?"text-primary":"text-muted-foreground"}`,children:c.badge||`#${c.rank}`}),o.jsx(zC,{className:"w-12 h-12 border-2 border-primary/30",children:o.jsx(HC,{className:"bg-primary/20 text-primary font-bold",children:c.name.substring(0,2).toUpperCase()})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-lg",children:c.name}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.solved," challenges solved"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:c.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]},c.rank))})})]})]})}),o.jsx(dt,{})]})};function ke(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Ta(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var E;const{scope:p,children:v,...I}=f,_=((E=p==null?void 0:p[t])==null?void 0:E[c])||l,S=g.useMemo(()=>I,Object.values(I));return o.jsx(_.Provider,{value:S,children:v})};d.displayName=i+"Provider";function h(f,p){var _;const v=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,I=g.useContext(v);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,XU(s,...e)]}function XU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function ib(t){const e=JU(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(e9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function JU(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=n9(s),l=t9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ZU=Symbol("radix.slottable");function e9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ZU}function t9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function n9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function WC(t){const e=t+"CollectionProvider",[n,r]=Ta(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=_=>{const{scope:S,children:E}=_,w=ys.useRef(null),C=ys.useRef(new Map).current;return o.jsx(s,{scope:S,itemMap:C,collectionRef:w,children:E})};a.displayName=e;const l=t+"CollectionSlot",c=ib(l),d=ys.forwardRef((_,S)=>{const{scope:E,children:w}=_,C=i(l,E),R=ht(S,C.collectionRef);return o.jsx(c,{ref:R,children:w})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=ib(h),v=ys.forwardRef((_,S)=>{const{scope:E,children:w,...C}=_,R=ys.useRef(null),L=ht(S,R),A=i(h,E);return ys.useEffect(()=>(A.itemMap.set(R,{ref:R,...C}),()=>void A.itemMap.delete(R))),o.jsx(p,{[f]:"",ref:L,children:w})});v.displayName=h;function I(_){const S=i(t+"CollectionConsumer",_);return ys.useCallback(()=>{const w=S.collectionRef.current;if(!w)return[];const C=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((A,N)=>C.indexOf(A.ref.current)-C.indexOf(N.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:a,Slot:d,ItemSlot:v},I,r]}var r9=Zd[" useId ".trim().toString()]||(()=>{}),s9=0;function Ic(t){const[e,n]=g.useState(r9());return bt(()=>{n(r=>r??String(s9++))},[t]),e?`radix-${e}`:""}function i9(t){const e=o9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(l9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function o9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=u9(s),l=c9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var a9=Symbol("radix.slottable");function l9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===a9}function c9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function u9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var d9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],De=d9.reduce((t,e)=>{const n=i9(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function h9(t,e){t&&pa.flushSync(()=>t.dispatchEvent(e))}var f9=Zd[" useInsertionEffect ".trim().toString()]||bt;function lc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=p9({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=g.useRef(t!==void 0);g.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=g.useCallback(h=>{var f;if(l){const p=m9(h)?h(t):h;p!==t&&((f=a.current)==null||f.call(a,p))}else i(h)},[l,t,i,a]);return[c,d]}function p9({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return f9(()=>{i.current=e},[e]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function m9(t){return typeof t=="function"}var g9=g.createContext(void 0);function Sv(t){const e=g.useContext(g9);return t||e||"ltr"}var wp="rovingFocusGroup.onEntryFocus",y9={bubbles:!1,cancelable:!0},jc="RovingFocusGroup",[ng,qC,v9]=WC(jc),[x9,GC]=Ta(jc,[v9]),[w9,_9]=x9(jc),KC=g.forwardRef((t,e)=>o.jsx(ng.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(ng.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(b9,{...t,ref:e})})}));KC.displayName=jc;var b9=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,p=g.useRef(null),v=ht(e,p),I=Sv(i),[_,S]=lc({prop:a,defaultProp:l??null,onChange:c,caller:jc}),[E,w]=g.useState(!1),C=Zr(d),R=qC(n),L=g.useRef(!1),[A,N]=g.useState(0);return g.useEffect(()=>{const y=p.current;if(y)return y.addEventListener(wp,C),()=>y.removeEventListener(wp,C)},[C]),o.jsx(w9,{scope:n,orientation:r,dir:I,loop:s,currentTabStopId:_,onItemFocus:g.useCallback(y=>S(y),[S]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>N(y=>y+1),[]),onFocusableItemRemove:g.useCallback(()=>N(y=>y-1),[]),children:o.jsx(De.div,{tabIndex:E||A===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:ke(t.onMouseDown,()=>{L.current=!0}),onFocus:ke(t.onFocus,y=>{const T=!L.current;if(y.target===y.currentTarget&&T&&!E){const b=new CustomEvent(wp,y9);if(y.currentTarget.dispatchEvent(b),!b.defaultPrevented){const j=R().filter(J=>J.focusable),k=j.find(J=>J.active),P=j.find(J=>J.id===_),se=[k,P,...j].filter(Boolean).map(J=>J.ref.current);XC(se,h)}}L.current=!1}),onBlur:ke(t.onBlur,()=>w(!1))})})}),QC="RovingFocusGroupItem",YC=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,c=Ic(),d=i||c,h=_9(QC,n),f=h.currentTabStopId===d,p=qC(n),{onFocusableItemAdd:v,onFocusableItemRemove:I,currentTabStopId:_}=h;return g.useEffect(()=>{if(r)return v(),()=>I()},[r,v,I]),o.jsx(ng.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:o.jsx(De.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ke(t.onMouseDown,S=>{r?h.onItemFocus(d):S.preventDefault()}),onFocus:ke(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:ke(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const E=T9(S,h.orientation,h.dir);if(E!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let C=p().filter(R=>R.focusable).map(R=>R.ref.current);if(E==="last")C.reverse();else if(E==="prev"||E==="next"){E==="prev"&&C.reverse();const R=C.indexOf(S.currentTarget);C=h.loop?S9(C,R+1):C.slice(R+1)}setTimeout(()=>XC(C))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:_!=null}):a})})});YC.displayName=QC;var E9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function N9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function T9(t,e,n){const r=N9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return E9[r]}function XC(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function S9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var C9=KC,I9=YC;function j9(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var JC=t=>{const{present:e,children:n}=t,r=A9(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=ht(r.ref,k9(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};JC.displayName="Presence";function A9(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=j9(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=yu(r.current);i.current=l==="mounted"?d:"none"},[l]),bt(()=>{const d=r.current,h=s.current;if(h!==t){const p=i.current,v=yu(d);t?c("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),bt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=v=>{const _=yu(r.current).includes(CSS.escape(v.animationName));if(v.target===e&&_&&(c("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=v=>{v.target===e&&(i.current=yu(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function yu(t){return(t==null?void 0:t.animationName)||"none"}function k9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xh="Tabs",[R9]=Ta(Xh,[GC]),ZC=GC(),[P9,Cv]=R9(Xh),eI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=Sv(l),[f,p]=lc({prop:r,onChange:s,defaultProp:i??"",caller:Xh});return o.jsx(P9,{scope:n,baseId:Ic(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(De.div,{dir:h,"data-orientation":a,...d,ref:e})})});eI.displayName=Xh;var tI="TabsList",nI=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Cv(tI,n),a=ZC(n);return o.jsx(C9,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(De.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});nI.displayName=tI;var rI="TabsTrigger",sI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Cv(rI,n),l=ZC(n),c=aI(a.baseId,r),d=lI(a.baseId,r),h=r===a.value;return o.jsx(I9,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(De.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ke(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:ke(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:ke(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});sI.displayName=rI;var iI="TabsContent",oI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Cv(iI,n),c=aI(l.baseId,r),d=lI(l.baseId,r),h=r===l.value,f=g.useRef(h);return g.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(JC,{present:s||h,children:({present:p})=>o.jsx(De.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});oI.displayName=iI;function aI(t,e){return`${t}-trigger-${e}`}function lI(t,e){return`${t}-content-${e}`}var D9=eI,cI=nI,uI=sI,dI=oI;const hI=D9,Iv=g.forwardRef(({className:t,...e},n)=>o.jsx(cI,{ref:n,className:Re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Iv.displayName=cI.displayName;const dr=g.forwardRef(({className:t,...e},n)=>o.jsx(uI,{ref:n,className:Re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));dr.displayName=uI.displayName;const Al=g.forwardRef(({className:t,...e},n)=>o.jsx(dI,{ref:n,className:Re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Al.displayName=dI.displayName;const L9=Yh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),jv=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Re(L9({variant:e}),t),...n}));jv.displayName="Alert";const O9=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Re("mb-1 font-medium leading-none tracking-tight",t),...e}));O9.displayName="AlertTitle";const Av=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Re("text-sm [&_p]:leading-relaxed",t),...e}));Av.displayName="AlertDescription";const M9=({onBack:t})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState(!0),[d,h]=g.useState(""),[f,p]=g.useState("all"),[v,I]=g.useState(null);g.useEffect(()=>{_()},[]),g.useEffect(()=>{S()},[d,e,f]);const _=async()=>{try{const T=(await er(kt(ye,"users"))).docs.map(j=>({id:j.id,...j.data()}));console.log(" Fetched users:",T),n(T);const b=T.filter(j=>j.requestedHostRole===!0);a(b)}catch(y){console.error("Error fetching users:",y),I({type:"error",text:"Failed to load users"})}finally{c(!1)}},S=()=>{let y=[...e];f==="admins"?y=y.filter(T=>T.role==="admin"):f==="moderators"?y=y.filter(T=>T.role==="moderator"):f==="students"?y=y.filter(T=>T.role==="student"):f==="pending"?y=y.filter(T=>T.requestedHostRole===!0):f==="active"?y=y.filter(T=>T.isActive!==!1):f==="suspended"&&(y=y.filter(T=>T.isActive===!1)),d&&(y=y.filter(T=>{var b,j,k,P,W;return((b=T.displayName)==null?void 0:b.toLowerCase().includes(d.toLowerCase()))||((j=T.email)==null?void 0:j.toLowerCase().includes(d.toLowerCase()))||((k=T.role)==null?void 0:k.toLowerCase().includes(d.toLowerCase()))||((P=T.firstName)==null?void 0:P.toLowerCase().includes(d.toLowerCase()))||((W=T.lastName)==null?void 0:W.toLowerCase().includes(d.toLowerCase()))})),s(y)},E=async(y,T)=>{try{console.log(" Attempting to update user role:",{userId:y,newRole:T});const b={role:T};(T==="admin"||T==="moderator")&&(b.requestedHostRole=!1,b.hostRequestReason=null),await Pn(Xe(ye,"users",y),b),n(e.map(j=>j.id===y?{...j,...b}:j)),console.log(" User role updated successfully"),I({type:"success",text:`User role updated to ${T}`}),setTimeout(()=>I(null),3e3)}catch(b){console.error(" Error updating user role:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),I({type:"error",text:`Failed to update user role: ${b.message}`})}},w=async(y,T)=>{try{console.log(" Handling host request:",{userId:y,approved:T});const b={requestedHostRole:!1,hostRequestReason:null};T&&(b.role="moderator"),await Pn(Xe(ye,"users",y),b),n(e.map(k=>k.id===y?{...k,...b}:k)),I({type:"success",text:`Host request ${T?"approved":"rejected"}`}),setTimeout(()=>I(null),3e3)}catch(b){console.error("Error handling host request:",b),I({type:"error",text:`Failed to process host request: ${b.message}`})}},C=async(y,T)=>{try{console.log(" Toggling user status:",{userId:y,currentStatus:T});const b=!T;await Pn(Xe(ye,"users",y),{isActive:b}),n(e.map(k=>k.id===y?{...k,isActive:b}:k));const j=b?"activated":"suspended";console.log(" User status updated successfully:",j),I({type:"success",text:`User ${j}`}),setTimeout(()=>I(null),3e3)}catch(b){console.error(" Error updating user status:",b),console.error("Error code:",b.code),console.error("Error message:",b.message),I({type:"error",text:`Failed to update user status: ${b.message}`})}},R=y=>{switch(y){case"admin":return"destructive";case"moderator":return"default";case"student":return"secondary";default:return"outline"}},L=y=>{switch(y){case"admin":return o.jsx(Y_,{className:"w-3 h-3"});case"moderator":return o.jsx(Qe,{className:"w-3 h-3"});case"student":return o.jsx(bv,{className:"w-3 h-3"});default:return o.jsx(Tn,{className:"w-3 h-3"})}},A=y=>y.requestedHostRole?"Pending Host":y.isActive===!1?"Suspended":"Active",N=y=>y.requestedHostRole?"default":y.isActive===!1?"destructive":"default";return l?o.jsx(ne,{children:o.jsx(re,{className:"pt-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading users..."})]})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Q,{variant:"ghost",onClick:t,className:"mb-2 -ml-3",children:" Back to Admin"}),o.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and host requests"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]})]}),v&&o.jsxs(jv,{className:v.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200",children:[v.type==="success"?o.jsx(Ur,{className:"w-4 h-4 text-green-600"}):o.jsx(oa,{className:"w-4 h-4 text-red-600"}),o.jsx(Av,{className:v.type==="success"?"text-green-600":"text-red-600",children:v.text})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsx(ne,{children:o.jsxs(re,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})}),o.jsx(ne,{children:o.jsxs(re,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(y=>y.role==="admin").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Admins"})]})}),o.jsx(ne,{children:o.jsxs(re,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(y=>y.role==="moderator").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Moderators"})]})}),o.jsx(ne,{children:o.jsxs(re,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(y=>y.role==="student").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Students"})]})}),o.jsx(ne,{children:o.jsxs(re,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending Hosts"})]})}),o.jsx(ne,{children:o.jsxs(re,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(y=>y.isActive===!1).length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Suspended"})]})})]}),o.jsxs(hI,{value:f,onValueChange:p,className:"w-full",children:[o.jsxs(Iv,{className:"grid w-full grid-cols-6",children:[o.jsx(dr,{value:"all",className:"text-xs",children:"All Users"}),o.jsx(dr,{value:"admins",className:"text-xs",children:"Admins"}),o.jsx(dr,{value:"moderators",className:"text-xs",children:"Moderators"}),o.jsx(dr,{value:"students",className:"text-xs",children:"Students"}),o.jsxs(dr,{value:"pending",className:"text-xs",children:["Pending ",i.length>0&&`(${i.length})`]}),o.jsx(dr,{value:"suspended",className:"text-xs",children:"Suspended"})]}),o.jsx(Al,{value:f,className:"mt-6",children:o.jsxs(ne,{children:[o.jsx(Ne,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs(Te,{children:[f==="all"&&"All Users",f==="admins"&&"Administrators",f==="moderators"&&"Moderators",f==="students"&&"Students",f==="pending"&&"Pending Host Requests",f==="suspended"&&"Suspended Users"]}),o.jsxs(Ht,{children:[r.length," user",r.length!==1?"s":""," found"]})]}),o.jsxs("div",{className:"relative w-64",children:[o.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(he,{placeholder:"Search users...",value:d,onChange:y=>h(y.target.value),className:"pl-10"})]})]})}),o.jsx(re,{children:o.jsxs("div",{className:"space-y-4",children:[r.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:L(y.role)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("p",{className:"font-medium truncate",children:y.displayName||"No Name"}),y.role==="admin"&&o.jsx(Y_,{className:"w-4 h-4 text-yellow-600"})]}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:y.email}),y.institution&&o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.institution}),y.requestedHostRole&&y.hostRequestReason&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[o.jsx("strong",{children:"Host Request:"})," ",y.hostRequestReason]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs(Ue,{variant:R(y.role),className:"flex items-center gap-1",children:[L(y.role),y.role]}),o.jsx(Ue,{variant:N(y),children:A(y)})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs("select",{value:y.role,onChange:T=>E(y.id,T.target.value),className:"p-2 border rounded text-sm bg-background",children:[o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"moderator",children:"Moderator"}),o.jsx("option",{value:"admin",children:"Admin"})]}),y.requestedHostRole&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>w(y.id,!0),className:"h-9 w-9 p-0 text-green-600 border-green-200",children:o.jsx(Ur,{className:"w-4 h-4"})}),o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>w(y.id,!1),className:"h-9 w-9 p-0 text-red-600 border-red-200",children:o.jsx(oa,{className:"w-4 h-4"})})]}),!y.requestedHostRole&&o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>C(y.id,y.isActive??!0),className:`flex items-center gap-1 ${y.isActive===!1?"text-green-600 border-green-200 hover:bg-green-50":"text-red-600 border-red-200 hover:bg-red-50"}`,children:y.isActive===!1?o.jsxs(o.Fragment,{children:[o.jsx(cU,{className:"w-3 h-3"}),"Activate"]}):o.jsxs(o.Fragment,{children:[o.jsx(lU,{className:"w-3 h-3"}),"Suspend"]})})]})]},y.id)),r.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(nn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No users found matching your criteria."})]})]})})]})})]})]})},Sa=g.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Sa.displayName="Textarea";var V9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],F9=V9.reduce((t,e)=>{const n=wv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),U9="Label",fI=g.forwardRef((t,e)=>o.jsx(F9.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));fI.displayName=U9;var pI=fI;const B9=Yh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),G=g.forwardRef(({className:t,...e},n)=>o.jsx(pI,{ref:n,className:Re(B9(),t),...e}));G.displayName=pI.displayName;function ob(t,[e,n]){return Math.min(n,Math.max(e,t))}function $9(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var z9="DismissableLayer",rg="dismissableLayer.update",H9="dismissableLayer.pointerDownOutside",W9="dismissableLayer.focusOutside",ab,mI=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gI=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(mI),[h,f]=g.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=g.useState({}),I=ht(e,N=>f(N)),_=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=_.indexOf(S),w=h?_.indexOf(h):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,R=w>=E,L=K9(N=>{const y=N.target,T=[...d.branches].some(b=>b.contains(y));!R||T||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},p),A=Q9(N=>{const y=N.target;[...d.branches].some(b=>b.contains(y))||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},p);return $9(N=>{w===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ab=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),lb(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=ab)}},[h,p,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),lb())},[h,d]),g.useEffect(()=>{const N=()=>v({});return document.addEventListener(rg,N),()=>document.removeEventListener(rg,N)},[]),o.jsx(De.div,{...c,ref:I,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:ke(t.onFocusCapture,A.onFocusCapture),onBlurCapture:ke(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ke(t.onPointerDownCapture,L.onPointerDownCapture)})});gI.displayName=z9;var q9="DismissableLayerBranch",G9=g.forwardRef((t,e)=>{const n=g.useContext(mI),r=g.useRef(null),s=ht(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(De.div,{...t,ref:s})});G9.displayName=q9;function K9(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){yI(H9,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Q9(t,e=globalThis==null?void 0:globalThis.document){const n=Zr(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&yI(W9,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lb(){const t=new CustomEvent(rg);document.dispatchEvent(t)}function yI(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?h9(s,i):s.dispatchEvent(i)}var _p=0;function Y9(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??cb()),document.body.insertAdjacentElement("beforeend",t[1]??cb()),_p++,()=>{_p===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_p--}},[])}function cb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var bp="focusScope.autoFocusOnMount",Ep="focusScope.autoFocusOnUnmount",ub={bubbles:!1,cancelable:!0},X9="FocusScope",vI=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=Zr(s),h=Zr(i),f=g.useRef(null),p=ht(e,_=>c(_)),v=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let _=function(C){if(v.paused||!l)return;const R=C.target;l.contains(R)?f.current=R:vs(f.current,{select:!0})},S=function(C){if(v.paused||!l)return;const R=C.relatedTarget;R!==null&&(l.contains(R)||vs(f.current,{select:!0}))},E=function(C){if(document.activeElement===document.body)for(const L of C)L.removedNodes.length>0&&vs(l)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const w=new MutationObserver(E);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),w.disconnect()}}},[r,l,v.paused]),g.useEffect(()=>{if(l){hb.add(v);const _=document.activeElement;if(!l.contains(_)){const E=new CustomEvent(bp,ub);l.addEventListener(bp,d),l.dispatchEvent(E),E.defaultPrevented||(J9(r8(xI(l)),{select:!0}),document.activeElement===_&&vs(l))}return()=>{l.removeEventListener(bp,d),setTimeout(()=>{const E=new CustomEvent(Ep,ub);l.addEventListener(Ep,h),l.dispatchEvent(E),E.defaultPrevented||vs(_??document.body,{select:!0}),l.removeEventListener(Ep,h),hb.remove(v)},0)}}},[l,d,h,v]);const I=g.useCallback(_=>{if(!n&&!r||v.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,E=document.activeElement;if(S&&E){const w=_.currentTarget,[C,R]=Z9(w);C&&R?!_.shiftKey&&E===R?(_.preventDefault(),n&&vs(C,{select:!0})):_.shiftKey&&E===C&&(_.preventDefault(),n&&vs(R,{select:!0})):E===w&&_.preventDefault()}},[n,r,v.paused]);return o.jsx(De.div,{tabIndex:-1,...a,ref:p,onKeyDown:I})});vI.displayName=X9;function J9(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(vs(r,{select:e}),document.activeElement!==n)return}function Z9(t){const e=xI(t),n=db(e,t),r=db(e.reverse(),t);return[n,r]}function xI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function db(t,e){for(const n of t)if(!e8(n,{upTo:e}))return n}function e8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function t8(t){return t instanceof HTMLInputElement&&"select"in t}function vs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&t8(t)&&e&&t.select()}}var hb=n8();function n8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=fb(t,e),t.unshift(e)},remove(e){var n;t=fb(t,e),(n=t[0])==null||n.resume()}}}function fb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function r8(t){return t.filter(e=>e.tagName!=="A")}const s8=["top","right","bottom","left"],ni=Math.min,xn=Math.max,Gd=Math.round,vu=Math.floor,Tr=t=>({x:t,y:t}),i8={left:"right",right:"left",bottom:"top",top:"bottom"},o8={start:"end",end:"start"};function sg(t,e,n){return xn(t,ni(e,n))}function es(t,e){return typeof t=="function"?t(e):t}function ts(t){return t.split("-")[0]}function Ca(t){return t.split("-")[1]}function kv(t){return t==="x"?"y":"x"}function Rv(t){return t==="y"?"height":"width"}const a8=new Set(["top","bottom"]);function mr(t){return a8.has(ts(t))?"y":"x"}function Pv(t){return kv(mr(t))}function l8(t,e,n){n===void 0&&(n=!1);const r=Ca(t),s=Pv(t),i=Rv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Kd(a)),[a,Kd(a)]}function c8(t){const e=Kd(t);return[ig(t),e,ig(e)]}function ig(t){return t.replace(/start|end/g,e=>o8[e])}const pb=["left","right"],mb=["right","left"],u8=["top","bottom"],d8=["bottom","top"];function h8(t,e,n){switch(t){case"top":case"bottom":return n?e?mb:pb:e?pb:mb;case"left":case"right":return e?u8:d8;default:return[]}}function f8(t,e,n,r){const s=Ca(t);let i=h8(ts(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(ig)))),i}function Kd(t){return t.replace(/left|right|bottom|top/g,e=>i8[e])}function p8(t){return{top:0,right:0,bottom:0,left:0,...t}}function wI(t){return typeof t!="number"?p8(t):{top:t,right:t,bottom:t,left:t}}function Qd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function gb(t,e,n){let{reference:r,floating:s}=t;const i=mr(e),a=Pv(e),l=Rv(a),c=ts(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let v;switch(c){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(Ca(e)){case"start":v[a]-=p*(n&&d?-1:1);break;case"end":v[a]+=p*(n&&d?-1:1);break}return v}const m8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=gb(d,r,c),p=r,v={},I=0;for(let _=0;_<l.length;_++){const{name:S,fn:E}=l[_],{x:w,y:C,data:R,reset:L}=await E({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:v,rects:d,platform:a,elements:{reference:t,floating:e}});h=w??h,f=C??f,v={...v,[S]:{...v[S],...R}},L&&I<=50&&(I++,typeof L=="object"&&(L.placement&&(p=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=gb(d,p,c)),_=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:v}};async function cc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=es(e,t),I=wI(v),S=l[p?f==="floating"?"reference":"floating":f],E=Qd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},L=Qd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:C,strategy:c}):w);return{top:(E.top-L.top+I.top)/R.y,bottom:(L.bottom-E.bottom+I.bottom)/R.y,left:(E.left-L.left+I.left)/R.x,right:(L.right-E.right+I.right)/R.x}}const g8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=es(t,e)||{};if(d==null)return{};const f=wI(h),p={x:n,y:r},v=Pv(s),I=Rv(v),_=await a.getDimensions(d),S=v==="y",E=S?"top":"left",w=S?"bottom":"right",C=S?"clientHeight":"clientWidth",R=i.reference[I]+i.reference[v]-p[v]-i.floating[I],L=p[v]-i.reference[v],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let N=A?A[C]:0;(!N||!await(a.isElement==null?void 0:a.isElement(A)))&&(N=l.floating[C]||i.floating[I]);const y=R/2-L/2,T=N/2-_[I]/2-1,b=ni(f[E],T),j=ni(f[w],T),k=b,P=N-_[I]-j,W=N/2-_[I]/2+y,se=sg(k,W,P),J=!c.arrow&&Ca(s)!=null&&W!==se&&i.reference[I]/2-(W<k?b:j)-_[I]/2<0,le=J?W<k?W-k:W-P:0;return{[v]:p[v]+le,data:{[v]:se,centerOffset:W-se-le,...J&&{alignmentOffset:le}},reset:J}}}),y8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:_=!0,...S}=es(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=ts(s),w=mr(l),C=ts(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(d.floating)),L=p||(C||!_?[Kd(l)]:c8(l)),A=I!=="none";!p&&A&&L.push(...f8(l,_,I,R));const N=[l,...L],y=await cc(e,S),T=[];let b=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(y[E]),f){const W=l8(s,a,R);T.push(y[W[0]],y[W[1]])}if(b=[...b,{placement:s,overflows:T}],!T.every(W=>W<=0)){var j,k;const W=(((j=i.flip)==null?void 0:j.index)||0)+1,se=N[W];if(se&&(!(f==="alignment"?w!==mr(se):!1)||b.every(M=>mr(M.placement)===w?M.overflows[0]>0:!0)))return{data:{index:W,overflows:b},reset:{placement:se}};let J=(k=b.filter(le=>le.overflows[0]<=0).sort((le,M)=>le.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!J)switch(v){case"bestFit":{var P;const le=(P=b.filter(M=>{if(A){const q=mr(M.placement);return q===w||q==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(q=>q>0).reduce((q,$)=>q+$,0)]).sort((M,q)=>M[1]-q[1])[0])==null?void 0:P[0];le&&(J=le);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function yb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vb(t){return s8.some(e=>t[e]>=0)}const v8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=es(t,e);switch(r){case"referenceHidden":{const i=await cc(e,{...s,elementContext:"reference"}),a=yb(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:vb(a)}}}case"escaped":{const i=await cc(e,{...s,altBoundary:!0}),a=yb(i,n.floating);return{data:{escapedOffsets:a,escaped:vb(a)}}}default:return{}}}}},_I=new Set(["left","top"]);async function x8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ts(n),l=Ca(n),c=mr(n)==="y",d=_I.has(a)?-1:1,h=i&&c?-1:1,f=es(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:I}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof I=="number"&&(v=l==="end"?I*-1:I),c?{x:v*h,y:p*d}:{x:p*d,y:v*h}}const w8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await x8(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},_8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:S=>{let{x:E,y:w}=S;return{x:E,y:w}}},...c}=es(t,e),d={x:n,y:r},h=await cc(e,c),f=mr(ts(s)),p=kv(f);let v=d[p],I=d[f];if(i){const S=p==="y"?"top":"left",E=p==="y"?"bottom":"right",w=v+h[S],C=v-h[E];v=sg(w,v,C)}if(a){const S=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=I+h[S],C=I-h[E];I=sg(w,I,C)}const _=l.fn({...e,[p]:v,[f]:I});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[p]:i,[f]:a}}}}}},b8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=es(t,e),h={x:n,y:r},f=mr(s),p=kv(f);let v=h[p],I=h[f];const _=es(l,e),S=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(c){const C=p==="y"?"height":"width",R=i.reference[p]-i.floating[C]+S.mainAxis,L=i.reference[p]+i.reference[C]-S.mainAxis;v<R?v=R:v>L&&(v=L)}if(d){var E,w;const C=p==="y"?"width":"height",R=_I.has(ts(s)),L=i.reference[f]-i.floating[C]+(R&&((E=a.offset)==null?void 0:E[f])||0)+(R?0:S.crossAxis),A=i.reference[f]+i.reference[C]+(R?0:((w=a.offset)==null?void 0:w[f])||0)-(R?S.crossAxis:0);I<L?I=L:I>A&&(I=A)}return{[p]:v,[f]:I}}}},E8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=es(t,e),h=await cc(e,d),f=ts(s),p=Ca(s),v=mr(s)==="y",{width:I,height:_}=i.floating;let S,E;f==="top"||f==="bottom"?(S=f,E=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=f,S=p==="end"?"top":"bottom");const w=_-h.top-h.bottom,C=I-h.left-h.right,R=ni(_-h[S],w),L=ni(I-h[E],C),A=!e.middlewareData.shift;let N=R,y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(y=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=w),A&&!p){const b=xn(h.left,0),j=xn(h.right,0),k=xn(h.top,0),P=xn(h.bottom,0);v?y=I-2*(b!==0||j!==0?b+j:xn(h.left,h.right)):N=_-2*(k!==0||P!==0?k+P:xn(h.top,h.bottom))}await c({...e,availableWidth:y,availableHeight:N});const T=await a.getDimensions(l.floating);return I!==T.width||_!==T.height?{reset:{rects:!0}}:{}}}};function Jh(){return typeof window<"u"}function Ia(t){return bI(t)?(t.nodeName||"").toLowerCase():"#document"}function Sn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jr(t){var e;return(e=(bI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function bI(t){return Jh()?t instanceof Node||t instanceof Sn(t).Node:!1}function sr(t){return Jh()?t instanceof Element||t instanceof Sn(t).Element:!1}function Ir(t){return Jh()?t instanceof HTMLElement||t instanceof Sn(t).HTMLElement:!1}function xb(t){return!Jh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Sn(t).ShadowRoot}const N8=new Set(["inline","contents"]);function Ac(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ir(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!N8.has(s)}const T8=new Set(["table","td","th"]);function S8(t){return T8.has(Ia(t))}const C8=[":popover-open",":modal"];function Zh(t){return C8.some(e=>{try{return t.matches(e)}catch{return!1}})}const I8=["transform","translate","scale","rotate","perspective"],j8=["transform","translate","scale","rotate","perspective","filter"],A8=["paint","layout","strict","content"];function Dv(t){const e=Lv(),n=sr(t)?ir(t):t;return I8.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||j8.some(r=>(n.willChange||"").includes(r))||A8.some(r=>(n.contain||"").includes(r))}function k8(t){let e=ri(t);for(;Ir(e)&&!ua(e);){if(Dv(e))return e;if(Zh(e))return null;e=ri(e)}return null}function Lv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const R8=new Set(["html","body","#document"]);function ua(t){return R8.has(Ia(t))}function ir(t){return Sn(t).getComputedStyle(t)}function ef(t){return sr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ri(t){if(Ia(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xb(t)&&t.host||jr(t);return xb(e)?e.host:e}function EI(t){const e=ri(t);return ua(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ir(e)&&Ac(e)?e:EI(e)}function uc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=EI(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Sn(s);if(i){const l=og(a);return e.concat(a,a.visualViewport||[],Ac(s)?s:[],l&&n?uc(l):[])}return e.concat(s,uc(s,[],n))}function og(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function NI(t){const e=ir(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ir(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Gd(n)!==i||Gd(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Ov(t){return sr(t)?t:t.contextElement}function Bo(t){const e=Ov(t);if(!Ir(e))return Tr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=NI(e);let a=(i?Gd(n.width):n.width)/r,l=(i?Gd(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const P8=Tr(0);function TI(t){const e=Sn(t);return!Lv()||!e.visualViewport?P8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function D8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Sn(t)?!1:e}function Qi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Ov(t);let a=Tr(1);e&&(r?sr(r)&&(a=Bo(r)):a=Bo(t));const l=D8(i,n,r)?TI(i):Tr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=Sn(i),v=r&&sr(r)?Sn(r):r;let I=p,_=og(I);for(;_&&r&&v!==I;){const S=Bo(_),E=_.getBoundingClientRect(),w=ir(_),C=E.left+(_.clientLeft+parseFloat(w.paddingLeft))*S.x,R=E.top+(_.clientTop+parseFloat(w.paddingTop))*S.y;c*=S.x,d*=S.y,h*=S.x,f*=S.y,c+=C,d+=R,I=Sn(_),_=og(I)}}return Qd({width:h,height:f,x:c,y:d})}function tf(t,e){const n=ef(t).scrollLeft;return e?e.left+n:Qi(jr(t)).left+n}function SI(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-tf(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function L8(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=jr(r),l=e?Zh(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Tr(1);const h=Tr(0),f=Ir(r);if((f||!f&&!i)&&((Ia(r)!=="body"||Ac(a))&&(c=ef(r)),Ir(r))){const v=Qi(r);d=Bo(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const p=a&&!f&&!i?SI(a,c):Tr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:n.y*d.y-c.scrollTop*d.y+h.y+p.y}}function O8(t){return Array.from(t.getClientRects())}function M8(t){const e=jr(t),n=ef(t),r=t.ownerDocument.body,s=xn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=xn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+tf(t);const l=-n.scrollTop;return ir(r).direction==="rtl"&&(a+=xn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}const wb=25;function V8(t,e){const n=Sn(t),r=jr(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=Lv();(!h||h&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=tf(r);if(d<=0){const h=r.ownerDocument,f=h.body,p=getComputedStyle(f),v=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,I=Math.abs(r.clientWidth-f.clientWidth-v);I<=wb&&(i-=I)}else d<=wb&&(i+=d);return{width:i,height:a,x:l,y:c}}const F8=new Set(["absolute","fixed"]);function U8(t,e){const n=Qi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ir(t)?Bo(t):Tr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function _b(t,e,n){let r;if(e==="viewport")r=V8(t,n);else if(e==="document")r=M8(jr(t));else if(sr(e))r=U8(e,n);else{const s=TI(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Qd(r)}function CI(t,e){const n=ri(t);return n===e||!sr(n)||ua(n)?!1:ir(n).position==="fixed"||CI(n,e)}function B8(t,e){const n=e.get(t);if(n)return n;let r=uc(t,[],!1).filter(l=>sr(l)&&Ia(l)!=="body"),s=null;const i=ir(t).position==="fixed";let a=i?ri(t):t;for(;sr(a)&&!ua(a);){const l=ir(a),c=Dv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&F8.has(s.position)||Ac(a)&&!c&&CI(t,a))?r=r.filter(h=>h!==a):s=l,a=ri(a)}return e.set(t,r),r}function $8(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Zh(e)?[]:B8(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=_b(e,h,s);return d.top=xn(f.top,d.top),d.right=ni(f.right,d.right),d.bottom=ni(f.bottom,d.bottom),d.left=xn(f.left,d.left),d},_b(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function z8(t){const{width:e,height:n}=NI(t);return{width:e,height:n}}function H8(t,e,n){const r=Ir(e),s=jr(e),i=n==="fixed",a=Qi(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Tr(0);function d(){c.x=tf(s)}if(r||!r&&!i)if((Ia(e)!=="body"||Ac(s))&&(l=ef(e)),r){const v=Qi(e,!0,i,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?SI(s,l):Tr(0),f=a.left+l.scrollLeft-c.x-h.x,p=a.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:a.width,height:a.height}}function Np(t){return ir(t).position==="static"}function bb(t,e){if(!Ir(t)||ir(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return jr(t)===n&&(n=n.ownerDocument.body),n}function II(t,e){const n=Sn(t);if(Zh(t))return n;if(!Ir(t)){let s=ri(t);for(;s&&!ua(s);){if(sr(s)&&!Np(s))return s;s=ri(s)}return n}let r=bb(t,e);for(;r&&S8(r)&&Np(r);)r=bb(r,e);return r&&ua(r)&&Np(r)&&!Dv(r)?n:r||k8(t)||n}const W8=async function(t){const e=this.getOffsetParent||II,n=this.getDimensions,r=await n(t.floating);return{reference:H8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function q8(t){return ir(t).direction==="rtl"}const G8={convertOffsetParentRelativeRectToViewportRelativeRect:L8,getDocumentElement:jr,getClippingRect:$8,getOffsetParent:II,getElementRects:W8,getClientRects:O8,getDimensions:z8,getScale:Bo,isElement:sr,isRTL:q8};function jI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function K8(t,e){let n=null,r;const s=jr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:p,height:v}=d;if(l||e(),!p||!v)return;const I=vu(f),_=vu(s.clientWidth-(h+p)),S=vu(s.clientHeight-(f+v)),E=vu(h),C={rootMargin:-I+"px "+-_+"px "+-S+"px "+-E+"px",threshold:xn(0,ni(1,c))||1};let R=!0;function L(A){const N=A[0].intersectionRatio;if(N!==c){if(!R)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!jI(d,t.getBoundingClientRect())&&a(),R=!1}try{n=new IntersectionObserver(L,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,C)}n.observe(t)}return a(!0),i}function Q8(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Ov(t),h=s||i?[...d?uc(d):[],...uc(e)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const f=d&&l?K8(d,n):null;let p=-1,v=null;a&&(v=new ResizeObserver(E=>{let[w]=E;w&&w.target===d&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(e)})),n()}),d&&!c&&v.observe(d),v.observe(e));let I,_=c?Qi(t):null;c&&S();function S(){const E=Qi(t);_&&!jI(_,E)&&n(),_=E,I=requestAnimationFrame(S)}return n(),()=>{var E;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(E=v)==null||E.disconnect(),v=null,c&&cancelAnimationFrame(I)}}const Y8=w8,X8=_8,J8=y8,Z8=E8,eB=v8,Eb=g8,tB=b8,nB=(t,e,n)=>{const r=new Map,s={platform:G8,...n},i={...s.platform,_c:r};return m8(t,e,{...s,platform:i})};var rB=typeof document<"u",sB=function(){},Wu=rB?g.useLayoutEffect:sB;function Yd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Yd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Yd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function AI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nb(t,e){const n=AI(t);return Math.round(e*n)/n}function Tp(t){const e=g.useRef(t);return Wu(()=>{e.current=t}),e}function iB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=g.useState(r);Yd(p,r)||v(r);const[I,_]=g.useState(null),[S,E]=g.useState(null),w=g.useCallback(M=>{M!==A.current&&(A.current=M,_(M))},[]),C=g.useCallback(M=>{M!==N.current&&(N.current=M,E(M))},[]),R=i||I,L=a||S,A=g.useRef(null),N=g.useRef(null),y=g.useRef(h),T=c!=null,b=Tp(c),j=Tp(s),k=Tp(d),P=g.useCallback(()=>{if(!A.current||!N.current)return;const M={placement:e,strategy:n,middleware:p};j.current&&(M.platform=j.current),nB(A.current,N.current,M).then(q=>{const $={...q,isPositioned:k.current!==!1};W.current&&!Yd(y.current,$)&&(y.current=$,pa.flushSync(()=>{f($)}))})},[p,e,n,j,k]);Wu(()=>{d===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[d]);const W=g.useRef(!1);Wu(()=>(W.current=!0,()=>{W.current=!1}),[]),Wu(()=>{if(R&&(A.current=R),L&&(N.current=L),R&&L){if(b.current)return b.current(R,L,P);P()}},[R,L,P,b,T]);const se=g.useMemo(()=>({reference:A,floating:N,setReference:w,setFloating:C}),[w,C]),J=g.useMemo(()=>({reference:R,floating:L}),[R,L]),le=g.useMemo(()=>{const M={position:n,left:0,top:0};if(!J.floating)return M;const q=Nb(J.floating,h.x),$=Nb(J.floating,h.y);return l?{...M,transform:"translate("+q+"px, "+$+"px)",...AI(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:$}},[n,l,J.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:P,refs:se,elements:J,floatingStyles:le}),[h,P,se,J,le])}const oB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Eb({element:r.current,padding:s}).fn(n):{}:r?Eb({element:r,padding:s}).fn(n):{}}}},aB=(t,e)=>({...Y8(t),options:[t,e]}),lB=(t,e)=>({...X8(t),options:[t,e]}),cB=(t,e)=>({...tB(t),options:[t,e]}),uB=(t,e)=>({...J8(t),options:[t,e]}),dB=(t,e)=>({...Z8(t),options:[t,e]}),hB=(t,e)=>({...eB(t),options:[t,e]}),fB=(t,e)=>({...oB(t),options:[t,e]});var pB="Arrow",kI=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(De.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});kI.displayName=pB;var mB=kI;function RI(t){const[e,n]=g.useState(void 0);return bt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Mv="Popper",[PI,DI]=Ta(Mv),[gB,LI]=PI(Mv),OI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(gB,{scope:e,anchor:r,onAnchorChange:s,children:n})};OI.displayName=Mv;var MI="PopperAnchor",VI=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=LI(MI,n),a=g.useRef(null),l=ht(e,a),c=g.useRef(null);return g.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||a.current,d!==c.current&&i.onAnchorChange(c.current)}),r?null:o.jsx(De.div,{...s,ref:l})});VI.displayName=MI;var Vv="PopperContent",[yB,vB]=PI(Vv),FI=g.forwardRef((t,e)=>{var oe,Ce,yt,Le,Ae,Ie;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:I,..._}=t,S=LI(Vv,n),[E,w]=g.useState(null),C=ht(e,Ct=>w(Ct)),[R,L]=g.useState(null),A=RI(R),N=(A==null?void 0:A.width)??0,y=(A==null?void 0:A.height)??0,T=r+(i!=="center"?"-"+i:""),b=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},j=Array.isArray(d)?d:[d],k=j.length>0,P={padding:b,boundary:j.filter(wB),altBoundary:k},{refs:W,floatingStyles:se,placement:J,isPositioned:le,middlewareData:M}=iB({strategy:"fixed",placement:T,whileElementsMounted:(...Ct)=>Q8(...Ct,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[aB({mainAxis:s+y,alignmentAxis:a}),c&&lB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?cB():void 0,...P}),c&&uB({...P}),dB({...P,apply:({elements:Ct,rects:gn,availableWidth:gi,availableHeight:Ar})=>{const{width:kr,height:kc}=gn.reference,ot=Ct.floating.style;ot.setProperty("--radix-popper-available-width",`${gi}px`),ot.setProperty("--radix-popper-available-height",`${Ar}px`),ot.setProperty("--radix-popper-anchor-width",`${kr}px`),ot.setProperty("--radix-popper-anchor-height",`${kc}px`)}}),R&&fB({element:R,padding:l}),_B({arrowWidth:N,arrowHeight:y}),p&&hB({strategy:"referenceHidden",...P})]}),[q,$]=$I(J),O=Zr(I);bt(()=>{le&&(O==null||O())},[le,O]);const z=(oe=M.arrow)==null?void 0:oe.x,ie=(Ce=M.arrow)==null?void 0:Ce.y,de=((yt=M.arrow)==null?void 0:yt.centerOffset)!==0,[Oe,be]=g.useState();return bt(()=>{E&&be(window.getComputedStyle(E).zIndex)},[E]),o.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:le?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(Le=M.transformOrigin)==null?void 0:Le.x,(Ae=M.transformOrigin)==null?void 0:Ae.y].join(" "),...((Ie=M.hide)==null?void 0:Ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(yB,{scope:n,placedSide:q,onArrowChange:L,arrowX:z,arrowY:ie,shouldHideArrow:de,children:o.jsx(De.div,{"data-side":q,"data-align":$,..._,ref:C,style:{..._.style,animation:le?void 0:"none"}})})})});FI.displayName=Vv;var UI="PopperArrow",xB={top:"bottom",right:"left",bottom:"top",left:"right"},BI=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=vB(UI,r),a=xB[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(mB,{...s,ref:n,style:{...s.style,display:"block"}})})});BI.displayName=UI;function wB(t){return t!==null}var _B=t=>({name:"transformOrigin",options:t,fn(e){var S,E,w;const{placement:n,rects:r,middlewareData:s}=e,a=((S=s.arrow)==null?void 0:S.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=$I(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,v=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let I="",_="";return d==="bottom"?(I=a?f:`${p}px`,_=`${-c}px`):d==="top"?(I=a?f:`${p}px`,_=`${r.floating.height+c}px`):d==="right"?(I=`${-c}px`,_=a?f:`${v}px`):d==="left"&&(I=`${r.floating.width+c}px`,_=a?f:`${v}px`),{data:{x:I,y:_}}}});function $I(t){const[e,n="center"]=t.split("-");return[e,n]}var bB=OI,EB=VI,NB=FI,TB=BI,SB="Portal",zI=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);bt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?$k.createPortal(o.jsx(De.div,{...r,ref:e}),a):null});zI.displayName=SB;function CB(t){const e=IB(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(AB);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function IB(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=RB(s),l=kB(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var jB=Symbol("radix.slottable");function AB(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===jB}function kB(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function RB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function HI(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var WI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),PB="VisuallyHidden",DB=g.forwardRef((t,e)=>o.jsx(De.span,{...t,ref:e,style:{...WI,...t.style}}));DB.displayName=PB;var LB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uo=new WeakMap,xu=new WeakMap,wu={},Sp=0,qI=function(t){return t&&(t.host||qI(t.parentNode))},OB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=qI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},MB=function(t,e,n,r){var s=OB(e,Array.isArray(t)?t:[t]);wu[n]||(wu[n]=new WeakMap);var i=wu[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var v=p.getAttribute(r),I=v!==null&&v!=="false",_=(uo.get(p)||0)+1,S=(i.get(p)||0)+1;uo.set(p,_),i.set(p,S),a.push(p),_===1&&I&&xu.set(p,!0),S===1&&p.setAttribute(n,"true"),I||p.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",p,E)}})};return h(e),l.clear(),Sp++,function(){a.forEach(function(f){var p=uo.get(f)-1,v=i.get(f)-1;uo.set(f,p),i.set(f,v),p||(xu.has(f)||f.removeAttribute(r),xu.delete(f)),v||f.removeAttribute(n)}),Sp--,Sp||(uo=new WeakMap,uo=new WeakMap,xu=new WeakMap,wu={})}},VB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=LB(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),MB(r,s,n,"aria-hidden")):function(){return null}},fr=function(){return fr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fr.apply(this,arguments)};function GI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function FB(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var qu="right-scroll-bar-position",Gu="width-before-scroll-bar",UB="with-scroll-bars-hidden",BB="--removed-body-scroll-bar-size";function Cp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function $B(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var zB=typeof window<"u"?g.useLayoutEffect:g.useEffect,Tb=new WeakMap;function HB(t,e){var n=$B(null,function(r){return t.forEach(function(s){return Cp(s,r)})});return zB(function(){var r=Tb.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Cp(l,null)}),i.forEach(function(l){s.has(l)||Cp(l,a)})}Tb.set(n,t)},[t]),n}function WB(t){return t}function qB(t,e){e===void 0&&(e=WB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function GB(t){t===void 0&&(t={});var e=qB(null);return e.options=fr({async:!0,ssr:!1},t),e}var KI=function(t){var e=t.sideCar,n=GI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,fr({},n))};KI.isSideCarExport=!0;function KB(t,e){return t.useMedium(e),KI}var QI=GB(),Ip=function(){},nf=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Ip,onWheelCapture:Ip,onTouchMoveCapture:Ip}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,v=t.noRelative,I=t.noIsolation,_=t.inert,S=t.allowPinchZoom,E=t.as,w=E===void 0?"div":E,C=t.gapMode,R=GI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=p,A=HB([n,e]),N=fr(fr({},R),s);return g.createElement(g.Fragment,null,h&&g.createElement(L,{sideCar:QI,removeScrollBar:d,shards:f,noRelative:v,noIsolation:I,inert:_,setCallbacks:i,allowPinchZoom:!!S,lockRef:n,gapMode:C}),a?g.cloneElement(g.Children.only(l),fr(fr({},N),{ref:A})):g.createElement(w,fr({},N,{className:c,ref:A}),l))});nf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nf.classNames={fullWidth:Gu,zeroRight:qu};var QB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function YB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=QB();return e&&t.setAttribute("nonce",e),t}function XB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function JB(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var ZB=function(){var t=0,e=null;return{add:function(n){t==0&&(e=YB())&&(XB(e,n),JB(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},e$=function(){var t=ZB();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},YI=function(){var t=e$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},t$={left:0,top:0,right:0,gap:0},jp=function(t){return parseInt(t||"",10)||0},n$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[jp(n),jp(r),jp(s)]},r$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return t$;var e=n$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},s$=YI(),$o="data-scroll-locked",i$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(UB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat($o,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(qu," .").concat(qu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gu," .").concat(Gu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($o,`] {
    `).concat(BB,": ").concat(l,`px;
  }
`)},Sb=function(){var t=parseInt(document.body.getAttribute($o)||"0",10);return isFinite(t)?t:0},o$=function(){g.useEffect(function(){return document.body.setAttribute($o,(Sb()+1).toString()),function(){var t=Sb()-1;t<=0?document.body.removeAttribute($o):document.body.setAttribute($o,t.toString())}},[])},a$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;o$();var i=g.useMemo(function(){return r$(s)},[s]);return g.createElement(s$,{styles:i$(i,!e,s,n?"":"!important")})},ag=!1;if(typeof window<"u")try{var _u=Object.defineProperty({},"passive",{get:function(){return ag=!0,!0}});window.addEventListener("test",_u,_u),window.removeEventListener("test",_u,_u)}catch{ag=!1}var ho=ag?{passive:!1}:!1,l$=function(t){return t.tagName==="TEXTAREA"},XI=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!l$(t)&&n[e]==="visible")},c$=function(t){return XI(t,"overflowY")},u$=function(t){return XI(t,"overflowX")},Cb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=JI(t,r);if(s){var i=ZI(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},d$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},h$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},JI=function(t,e){return t==="v"?c$(e):u$(e)},ZI=function(t,e){return t==="v"?d$(e):h$(e)},f$=function(t,e){return t==="h"&&e==="rtl"?-1:1},p$=function(t,e,n,r,s){var i=f$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,p=0;do{if(!l)break;var v=ZI(t,l),I=v[0],_=v[1],S=v[2],E=_-S-i*I;(I||E)&&JI(t,l)&&(f+=E,p+=I);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(d=!0),d},bu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ib=function(t){return[t.deltaX,t.deltaY]},jb=function(t){return t&&"current"in t?t.current:t},m$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},g$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},y$=0,fo=[];function v$(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(y$++)[0],i=g.useState(YI)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=FB([t.lockRef.current],(t.shards||[]).map(jb),!0).filter(Boolean);return _.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(_,S){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!a.current.allowPinchZoom;var E=bu(_),w=n.current,C="deltaX"in _?_.deltaX:w[0]-E[0],R="deltaY"in _?_.deltaY:w[1]-E[1],L,A=_.target,N=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in _&&N==="h"&&A.type==="range")return!1;var y=Cb(N,A);if(!y)return!0;if(y?L=N:(L=N==="v"?"h":"v",y=Cb(N,A)),!y)return!1;if(!r.current&&"changedTouches"in _&&(C||R)&&(r.current=L),!L)return!0;var T=r.current||L;return p$(T,S,_,T==="h"?C:R)},[]),c=g.useCallback(function(_){var S=_;if(!(!fo.length||fo[fo.length-1]!==i)){var E="deltaY"in S?Ib(S):bu(S),w=e.current.filter(function(L){return L.name===S.type&&(L.target===S.target||S.target===L.shadowParent)&&m$(L.delta,E)})[0];if(w&&w.should){S.cancelable&&S.preventDefault();return}if(!w){var C=(a.current.shards||[]).map(jb).filter(Boolean).filter(function(L){return L.contains(S.target)}),R=C.length>0?l(S,C[0]):!a.current.noIsolation;R&&S.cancelable&&S.preventDefault()}}},[]),d=g.useCallback(function(_,S,E,w){var C={name:_,delta:S,target:E,should:w,shadowParent:x$(E)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),h=g.useCallback(function(_){n.current=bu(_),r.current=void 0},[]),f=g.useCallback(function(_){d(_.type,Ib(_),_.target,l(_,t.lockRef.current))},[]),p=g.useCallback(function(_){d(_.type,bu(_),_.target,l(_,t.lockRef.current))},[]);g.useEffect(function(){return fo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,ho),document.addEventListener("touchmove",c,ho),document.addEventListener("touchstart",h,ho),function(){fo=fo.filter(function(_){return _!==i}),document.removeEventListener("wheel",c,ho),document.removeEventListener("touchmove",c,ho),document.removeEventListener("touchstart",h,ho)}},[]);var v=t.removeScrollBar,I=t.inert;return g.createElement(g.Fragment,null,I?g.createElement(i,{styles:g$(s)}):null,v?g.createElement(a$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function x$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const w$=KB(QI,v$);var ej=g.forwardRef(function(t,e){return g.createElement(nf,fr({},t,{ref:e,sideCar:w$}))});ej.classNames=nf.classNames;var _$=[" ","Enter","ArrowUp","ArrowDown"],b$=[" ","Enter"],Yi="Select",[rf,sf,E$]=WC(Yi),[ja]=Ta(Yi,[E$,DI]),of=DI(),[N$,pi]=ja(Yi),[T$,S$]=ja(Yi),tj=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:v,form:I}=t,_=of(e),[S,E]=g.useState(null),[w,C]=g.useState(null),[R,L]=g.useState(!1),A=Sv(d),[N,y]=lc({prop:r,defaultProp:s??!1,onChange:i,caller:Yi}),[T,b]=lc({prop:a,defaultProp:l,onChange:c,caller:Yi}),j=g.useRef(null),k=S?I||!!S.closest("form"):!0,[P,W]=g.useState(new Set),se=Array.from(P).map(J=>J.props.value).join(";");return o.jsx(bB,{..._,children:o.jsxs(N$,{required:v,scope:e,trigger:S,onTriggerChange:E,valueNode:w,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:L,contentId:Ic(),value:T,onValueChange:b,open:N,onOpenChange:y,dir:A,triggerPointerDownPosRef:j,disabled:p,children:[o.jsx(rf.Provider,{scope:e,children:o.jsx(T$,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(J=>{W(le=>new Set(le).add(J))},[]),onNativeOptionRemove:g.useCallback(J=>{W(le=>{const M=new Set(le);return M.delete(J),M})},[]),children:n})}),k?o.jsxs(Tj,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:J=>b(J.target.value),disabled:p,form:I,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},se):null]})})};tj.displayName=Yi;var nj="SelectTrigger",rj=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=of(n),a=pi(nj,n),l=a.disabled||r,c=ht(e,a.onTriggerChange),d=sf(n),h=g.useRef("touch"),[f,p,v]=Cj(_=>{const S=d().filter(C=>!C.disabled),E=S.find(C=>C.value===a.value),w=Ij(S,_,E);w!==void 0&&a.onValueChange(w.value)}),I=_=>{l||(a.onOpenChange(!0),v()),_&&(a.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return o.jsx(EB,{asChild:!0,...i,children:o.jsx(De.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Sj(a.value)?"":void 0,...s,ref:c,onClick:ke(s.onClick,_=>{_.currentTarget.focus(),h.current!=="mouse"&&I(_)}),onPointerDown:ke(s.onPointerDown,_=>{h.current=_.pointerType;const S=_.target;S.hasPointerCapture(_.pointerId)&&S.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(I(_),_.preventDefault())}),onKeyDown:ke(s.onKeyDown,_=>{const S=f.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&p(_.key),!(S&&_.key===" ")&&_$.includes(_.key)&&(I(),_.preventDefault())})})})});rj.displayName=nj;var sj="SelectValue",ij=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=pi(sj,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=ht(e,c.onValueNodeChange);return bt(()=>{d(h)},[d,h]),o.jsx(De.span,{...l,ref:f,style:{pointerEvents:"none"},children:Sj(c.value)?o.jsx(o.Fragment,{children:a}):i})});ij.displayName=sj;var C$="SelectIcon",oj=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(De.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});oj.displayName=C$;var I$="SelectPortal",aj=t=>o.jsx(zI,{asChild:!0,...t});aj.displayName=I$;var Xi="SelectContent",lj=g.forwardRef((t,e)=>{const n=pi(Xi,t.__scopeSelect),[r,s]=g.useState();if(bt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?pa.createPortal(o.jsx(cj,{scope:t.__scopeSelect,children:o.jsx(rf.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(uj,{...t,ref:e})});lj.displayName=Xi;var Wn=10,[cj,mi]=ja(Xi),j$="SelectContentImpl",A$=CB("SelectContent.RemoveScroll"),uj=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:I,hideWhenDetached:_,avoidCollisions:S,...E}=t,w=pi(Xi,n),[C,R]=g.useState(null),[L,A]=g.useState(null),N=ht(e,oe=>R(oe)),[y,T]=g.useState(null),[b,j]=g.useState(null),k=sf(n),[P,W]=g.useState(!1),se=g.useRef(!1);g.useEffect(()=>{if(C)return VB(C)},[C]),Y9();const J=g.useCallback(oe=>{const[Ce,...yt]=k().map(Ie=>Ie.ref.current),[Le]=yt.slice(-1),Ae=document.activeElement;for(const Ie of oe)if(Ie===Ae||(Ie==null||Ie.scrollIntoView({block:"nearest"}),Ie===Ce&&L&&(L.scrollTop=0),Ie===Le&&L&&(L.scrollTop=L.scrollHeight),Ie==null||Ie.focus(),document.activeElement!==Ae))return},[k,L]),le=g.useCallback(()=>J([y,C]),[J,y,C]);g.useEffect(()=>{P&&le()},[P,le]);const{onOpenChange:M,triggerPointerDownPosRef:q}=w;g.useEffect(()=>{if(C){let oe={x:0,y:0};const Ce=Le=>{var Ae,Ie;oe={x:Math.abs(Math.round(Le.pageX)-(((Ae=q.current)==null?void 0:Ae.x)??0)),y:Math.abs(Math.round(Le.pageY)-(((Ie=q.current)==null?void 0:Ie.y)??0))}},yt=Le=>{oe.x<=10&&oe.y<=10?Le.preventDefault():C.contains(Le.target)||M(!1),document.removeEventListener("pointermove",Ce),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",yt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",yt,{capture:!0})}}},[C,M,q]),g.useEffect(()=>{const oe=()=>M(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[M]);const[$,O]=Cj(oe=>{const Ce=k().filter(Ae=>!Ae.disabled),yt=Ce.find(Ae=>Ae.ref.current===document.activeElement),Le=Ij(Ce,oe,yt);Le&&setTimeout(()=>Le.ref.current.focus())}),z=g.useCallback((oe,Ce,yt)=>{const Le=!se.current&&!yt;(w.value!==void 0&&w.value===Ce||Le)&&(T(oe),Le&&(se.current=!0))},[w.value]),ie=g.useCallback(()=>C==null?void 0:C.focus(),[C]),de=g.useCallback((oe,Ce,yt)=>{const Le=!se.current&&!yt;(w.value!==void 0&&w.value===Ce||Le)&&j(oe)},[w.value]),Oe=r==="popper"?lg:dj,be=Oe===lg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:I,hideWhenDetached:_,avoidCollisions:S}:{};return o.jsx(cj,{scope:n,content:C,viewport:L,onViewportChange:A,itemRefCallback:z,selectedItem:y,onItemLeave:ie,itemTextRefCallback:de,focusSelectedItem:le,selectedItemText:b,position:r,isPositioned:P,searchRef:$,children:o.jsx(ej,{as:A$,allowPinchZoom:!0,children:o.jsx(vI,{asChild:!0,trapped:w.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:ke(s,oe=>{var Ce;(Ce=w.trigger)==null||Ce.focus({preventScroll:!0}),oe.preventDefault()}),children:o.jsx(gI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(Oe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:oe=>oe.preventDefault(),...E,...be,onPlaced:()=>W(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ke(E.onKeyDown,oe=>{const Ce=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!Ce&&oe.key.length===1&&O(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let Le=k().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(Le=Le.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const Ae=oe.target,Ie=Le.indexOf(Ae);Le=Le.slice(Ie+1)}setTimeout(()=>J(Le)),oe.preventDefault()}})})})})})})});uj.displayName=j$;var k$="SelectItemAlignedPosition",dj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=pi(Xi,n),a=mi(Xi,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=ht(e,N=>h(N)),p=sf(n),v=g.useRef(!1),I=g.useRef(!0),{viewport:_,selectedItem:S,selectedItemText:E,focusSelectedItem:w}=a,C=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&_&&S&&E){const N=i.trigger.getBoundingClientRect(),y=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),b=E.getBoundingClientRect();if(i.dir!=="rtl"){const Ae=b.left-y.left,Ie=T.left-Ae,Ct=N.left-Ie,gn=N.width+Ct,gi=Math.max(gn,y.width),Ar=window.innerWidth-Wn,kr=ob(Ie,[Wn,Math.max(Wn,Ar-gi)]);l.style.minWidth=gn+"px",l.style.left=kr+"px"}else{const Ae=y.right-b.right,Ie=window.innerWidth-T.right-Ae,Ct=window.innerWidth-N.right-Ie,gn=N.width+Ct,gi=Math.max(gn,y.width),Ar=window.innerWidth-Wn,kr=ob(Ie,[Wn,Math.max(Wn,Ar-gi)]);l.style.minWidth=gn+"px",l.style.right=kr+"px"}const j=p(),k=window.innerHeight-Wn*2,P=_.scrollHeight,W=window.getComputedStyle(d),se=parseInt(W.borderTopWidth,10),J=parseInt(W.paddingTop,10),le=parseInt(W.borderBottomWidth,10),M=parseInt(W.paddingBottom,10),q=se+J+P+M+le,$=Math.min(S.offsetHeight*5,q),O=window.getComputedStyle(_),z=parseInt(O.paddingTop,10),ie=parseInt(O.paddingBottom,10),de=N.top+N.height/2-Wn,Oe=k-de,be=S.offsetHeight/2,oe=S.offsetTop+be,Ce=se+J+oe,yt=q-Ce;if(Ce<=de){const Ae=j.length>0&&S===j[j.length-1].ref.current;l.style.bottom="0px";const Ie=d.clientHeight-_.offsetTop-_.offsetHeight,Ct=Math.max(Oe,be+(Ae?ie:0)+Ie+le),gn=Ce+Ct;l.style.height=gn+"px"}else{const Ae=j.length>0&&S===j[0].ref.current;l.style.top="0px";const Ct=Math.max(de,se+_.offsetTop+(Ae?z:0)+be)+yt;l.style.height=Ct+"px",_.scrollTop=Ce-de+_.offsetTop}l.style.margin=`${Wn}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,i.trigger,i.valueNode,l,d,_,S,E,i.dir,r]);bt(()=>C(),[C]);const[R,L]=g.useState();bt(()=>{d&&L(window.getComputedStyle(d).zIndex)},[d]);const A=g.useCallback(N=>{N&&I.current===!0&&(C(),w==null||w(),I.current=!1)},[C,w]);return o.jsx(P$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:A,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:o.jsx(De.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});dj.displayName=k$;var R$="SelectPopperPosition",lg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Wn,...i}=t,a=of(n);return o.jsx(NB,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lg.displayName=R$;var[P$,Fv]=ja(Xi,{}),cg="SelectViewport",hj=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=mi(cg,n),a=Fv(cg,n),l=ht(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(rf.Slot,{scope:n,children:o.jsx(De.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ke(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const I=window.innerHeight-Wn*2,_=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),E=Math.max(_,S);if(E<I){const w=E+v,C=Math.min(I,w),R=w-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});hj.displayName=cg;var fj="SelectGroup",[D$,L$]=ja(fj),O$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ic();return o.jsx(D$,{scope:n,id:s,children:o.jsx(De.div,{role:"group","aria-labelledby":s,...r,ref:e})})});O$.displayName=fj;var pj="SelectLabel",mj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=L$(pj,n);return o.jsx(De.div,{id:s.id,...r,ref:e})});mj.displayName=pj;var Xd="SelectItem",[M$,gj]=ja(Xd),yj=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=pi(Xd,n),c=mi(Xd,n),d=l.value===r,[h,f]=g.useState(i??""),[p,v]=g.useState(!1),I=ht(e,w=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,w,r,s)}),_=Ic(),S=g.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(M$,{scope:n,value:r,disabled:s,textId:_,isSelected:d,onItemTextChange:g.useCallback(w=>{f(C=>C||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(rf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(De.div,{role:"option","aria-labelledby":_,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:I,onFocus:ke(a.onFocus,()=>v(!0)),onBlur:ke(a.onBlur,()=>v(!1)),onClick:ke(a.onClick,()=>{S.current!=="mouse"&&E()}),onPointerUp:ke(a.onPointerUp,()=>{S.current==="mouse"&&E()}),onPointerDown:ke(a.onPointerDown,w=>{S.current=w.pointerType}),onPointerMove:ke(a.onPointerMove,w=>{var C;S.current=w.pointerType,s?(C=c.onItemLeave)==null||C.call(c):S.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(a.onPointerLeave,w=>{var C;w.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:ke(a.onKeyDown,w=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&w.key===" "||(b$.includes(w.key)&&E(),w.key===" "&&w.preventDefault())})})})})});yj.displayName=Xd;var fl="SelectItemText",vj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=pi(fl,n),l=mi(fl,n),c=gj(fl,n),d=S$(fl,n),[h,f]=g.useState(null),p=ht(e,E=>f(E),c.onItemTextChange,E=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,E,c.value,c.disabled)}),v=h==null?void 0:h.textContent,I=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:_,onNativeOptionRemove:S}=d;return bt(()=>(_(I),()=>S(I)),[_,S,I]),o.jsxs(o.Fragment,{children:[o.jsx(De.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?pa.createPortal(i.children,a.valueNode):null]})});vj.displayName=fl;var xj="SelectItemIndicator",wj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return gj(xj,n).isSelected?o.jsx(De.span,{"aria-hidden":!0,...r,ref:e}):null});wj.displayName=xj;var ug="SelectScrollUpButton",_j=g.forwardRef((t,e)=>{const n=mi(ug,t.__scopeSelect),r=Fv(ug,t.__scopeSelect),[s,i]=g.useState(!1),a=ht(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Ej,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});_j.displayName=ug;var dg="SelectScrollDownButton",bj=g.forwardRef((t,e)=>{const n=mi(dg,t.__scopeSelect),r=Fv(dg,t.__scopeSelect),[s,i]=g.useState(!1),a=ht(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Ej,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});bj.displayName=dg;var Ej=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=mi("SelectScrollButton",n),a=g.useRef(null),l=sf(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),bt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(De.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ke(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:ke(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:ke(s.onPointerLeave,()=>{c()})})}),V$="SelectSeparator",Nj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(De.div,{"aria-hidden":!0,...r,ref:e})});Nj.displayName=V$;var hg="SelectArrow",F$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=of(n),i=pi(hg,n),a=mi(hg,n);return i.open&&a.position==="popper"?o.jsx(TB,{...s,...r,ref:e}):null});F$.displayName=hg;var U$="SelectBubbleInput",Tj=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),i=ht(r,s),a=HI(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(De.select,{...n,style:{...WI,...n.style},ref:i,defaultValue:e})});Tj.displayName=U$;function Sj(t){return t===""||t===void 0}function Cj(t){const e=Zr(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Ij(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=B$(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function B$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $$=tj,jj=rj,z$=ij,H$=oj,W$=aj,Aj=lj,q$=hj,kj=mj,Rj=yj,G$=vj,K$=wj,Pj=_j,Dj=bj,Lj=Nj;const Xt=$$,Jt=z$,$t=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(jj,{ref:r,className:Re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(H$,{asChild:!0,children:o.jsx(SC,{className:"h-4 w-4 opacity-50"})})]}));$t.displayName=jj.displayName;const Oj=g.forwardRef(({className:t,...e},n)=>o.jsx(Pj,{ref:n,className:Re("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Y5,{className:"h-4 w-4"})}));Oj.displayName=Pj.displayName;const Mj=g.forwardRef(({className:t,...e},n)=>o.jsx(Dj,{ref:n,className:Re("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(SC,{className:"h-4 w-4"})}));Mj.displayName=Dj.displayName;const zt=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(W$,{children:o.jsxs(Aj,{ref:s,className:Re("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(Oj,{}),o.jsx(q$,{className:Re("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Mj,{})]})}));zt.displayName=Aj.displayName;const Q$=g.forwardRef(({className:t,...e},n)=>o.jsx(kj,{ref:n,className:Re("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Q$.displayName=kj.displayName;const ee=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Rj,{ref:r,className:Re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(K$,{children:o.jsx(Q5,{className:"h-4 w-4"})})}),o.jsx(G$,{children:e})]}));ee.displayName=Rj.displayName;const Y$=g.forwardRef(({className:t,...e},n)=>o.jsx(Lj,{ref:n,className:Re("-mx-1 my-1 h-px bg-muted",t),...e}));Y$.displayName=Lj.displayName;var af="Switch",[X$]=Ta(af),[J$,Z$]=X$(af),Vj=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[p,v]=g.useState(null),I=ht(e,C=>v(C)),_=g.useRef(!1),S=p?h||!!p.closest("form"):!0,[E,w]=lc({prop:s,defaultProp:i??!1,onChange:d,caller:af});return o.jsxs(J$,{scope:n,checked:E,disabled:l,children:[o.jsx(De.button,{type:"button",role:"switch","aria-checked":E,"aria-required":a,"data-state":$j(E),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:I,onClick:ke(t.onClick,C=>{w(R=>!R),S&&(_.current=C.isPropagationStopped(),_.current||C.stopPropagation())})}),S&&o.jsx(Bj,{control:p,bubbles:!_.current,name:r,value:c,checked:E,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});Vj.displayName=af;var Fj="SwitchThumb",Uj=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Z$(Fj,n);return o.jsx(De.span,{"data-state":$j(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Uj.displayName=Fj;var ez="SwitchBubbleInput",Bj=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=ht(a,i),c=HI(n),d=RI(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&v){const I=new Event("click",{bubbles:r});v.call(h,n),h.dispatchEvent(I)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Bj.displayName=ez;function $j(t){return t?"checked":"unchecked"}var zj=Vj,tz=Uj;const Rt=g.forwardRef(({className:t,...e},n)=>o.jsx(zj,{className:Re("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:o.jsx(tz,{className:Re("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Rt.displayName=zj.displayName;const nz=({onBack:t})=>{const{user:e}=zn(),[n,r]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[s,i]=g.useState([{id:"1",question:"",points:0,flag:""}]),[a,l]=g.useState(!1),[c,d]=g.useState(!1),h=async A=>{A.preventDefault(),l(!0);try{const N={...n,finalCategory:c?n.customCategory:n.category,questions:n.hasMultipleQuestions?s:[],createdAt:new Date,isActive:!0,solvedBy:[],hints:n.hints.filter(y=>y.trim()!==""),totalPoints:n.hasMultipleQuestions?s.reduce((y,T)=>y+T.points,0):n.points,createdBy:e==null?void 0:e.uid,createdByName:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),featuredOnPractice:n.featuredOnPractice,availableInPractice:n.availableInPractice,challengeType:n.challengeType,...n.isExternalChallenge&&{attribution:{...n.externalSource,importedBy:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),importedById:e==null?void 0:e.uid,importedAt:new Date}},...n.creator&&{originalCreator:{name:n.creator,url:n.creatorUrl}}};await GS(kt(ye,"challenges"),N),alert("Challenge created successfully!"),f()}catch(N){console.error("Error creating challenge:",N),alert("Error creating challenge. Please try again.")}finally{l(!1)}},f=()=>{r({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),i([{id:"1",question:"",points:0,flag:""}]),d(!1)},p=()=>{r({...n,hints:[...n.hints,""]})},v=(A,N)=>{const y=[...n.hints];y[A]=N,r({...n,hints:y})},I=A=>{const N=n.hints.filter((y,T)=>T!==A);r({...n,hints:N})},_=()=>{const A={id:Date.now().toString(),question:"",points:0,flag:""};i([...s,A])},S=(A,N,y)=>{i(s.map(T=>T.id===A?{...T,[N]:y}:T))},E=A=>{s.length>1&&i(s.filter(N=>N.id!==A))},w=A=>{if(A==="link"){const N=prompt("Enter the URL:");if(N){const y={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:N,type:"link"};r({...n,files:[...n.files,y]})}}else{const N=document.createElement("input");N.type="file",N.onchange=y=>{var b;const T=(b=y.target.files)==null?void 0:b[0];if(T){const j={id:Date.now().toString(),name:T.name,url:URL.createObjectURL(T),type:"file"};r({...n,files:[...n.files,j]})}},N.click()}},C=A=>{r({...n,files:n.files.filter(N=>N.id!==A)})},R=A=>{A==="custom"?(d(!0),r({...n,category:"custom"})):(d(!1),r({...n,category:A}))},L=(A,N)=>{r({...n,externalSource:{...n.externalSource,[A]:N}})};return o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Create New Challenge"}),o.jsx(Ht,{children:"Add a new CTF challenge to the platform with advanced options"})]}),o.jsx(re,{children:o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(he,{id:"title",value:n.title,onChange:A=>r({...n,title:A.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:n.category,onValueChange:R,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"web",children:"Web"}),o.jsx(ee,{value:"crypto",children:"Cryptography"}),o.jsx(ee,{value:"forensics",children:"Forensics"}),o.jsx(ee,{value:"pwn",children:"Pwn"}),o.jsx(ee,{value:"reversing",children:"Reverse Engineering"}),o.jsx(ee,{value:"misc",children:"Miscellaneous"}),o.jsx(ee,{value:"custom",children:"Custom Category"})]})]})]}),c&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(he,{id:"customCategory",value:n.customCategory,onChange:A=>r({...n,customCategory:A.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:n.difficulty,onValueChange:A=>r({...n,difficulty:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(ee,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(ee,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"points",children:"Points *"}),o.jsx(he,{id:"points",type:"number",value:n.points,onChange:A=>r({...n,points:parseInt(A.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(G,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:n.description,onChange:A=>r({...n,description:A.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Qe,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:n.availableInPractice,onCheckedChange:A=>r({...n,availableInPractice:A})}),o.jsx(G,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:n.featuredOnPractice,onCheckedChange:A=>r({...n,featuredOnPractice:A})}),o.jsxs(G,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Ev,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:n.challengeType,onValueChange:A=>r({...n,challengeType:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"practice",children:"Practice Challenge"}),o.jsx(ee,{value:"live",children:"Live Event Challenge"}),o.jsx(ee,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Tn,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(he,{id:"creator",value:n.creator,onChange:A=>r({...n,creator:A.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(he,{id:"creatorUrl",value:n.creatorUrl,onChange:A=>r({...n,creatorUrl:A.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wd,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:n.isExternalChallenge,onCheckedChange:A=>r({...n,isExternalChallenge:A})})]}),n.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(he,{id:"ctfName",value:n.externalSource.ctfName,onChange:A=>L("ctfName",A.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(he,{id:"ctfUrl",value:n.externalSource.ctfUrl,onChange:A=>L("ctfUrl",A.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(he,{id:"originalAuthor",value:n.externalSource.originalAuthor,onChange:A=>L("originalAuthor",A.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(he,{id:"authorUrl",value:n.externalSource.authorUrl,onChange:A=>L("authorUrl",A.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:n.externalSource.license,onValueChange:A=>L("license",A),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"unknown",children:"Unknown"}),o.jsx(ee,{value:"MIT",children:"MIT License"}),o.jsx(ee,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(ee,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(ee,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(ee,{value:"custom",children:"Custom License"})]})]}),n.externalSource.license==="custom"&&o.jsx(he,{placeholder:"Specify custom license",className:"mt-2",onChange:A=>L("license",A.target.value)})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Attribution Notice:"})," This challenge will be displayed with proper attribution to the original author and CTF platform."]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:n.hasMultipleQuestions,onCheckedChange:A=>r({...n,hasMultipleQuestions:A})})]}),n.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(G,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Q,{type:"button",onClick:_,variant:"outline",size:"sm",children:[o.jsx(ti,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),s.map((A,N)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(G,{children:["Question ",N+1]}),s.length>1&&o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(A.id),children:o.jsx(ac,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`question-${A.id}`,children:"Question Text *"}),o.jsx(he,{id:`question-${A.id}`,value:A.question,onChange:y=>S(A.id,"question",y.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:`points-${A.id}`,children:"Points *"}),o.jsx(he,{id:`points-${A.id}`,type:"number",value:A.points,onChange:y=>S(A.id,"points",parseInt(y.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`flag-${A.id}`,children:"Flag *"}),o.jsx(he,{id:`flag-${A.id}`,value:A.flag,onChange:y=>S(A.id,"flag",y.target.value),placeholder:"Flag for this question",required:!0})]})]})]},A.id)),s.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",s.reduce((A,N)=>A+N.points,0)]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flag",children:"Flag *"}),o.jsx(he,{id:"flag",value:n.flag,onChange:A=>r({...n,flag:A.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:n.flagFormat,onValueChange:A=>r({...n,flagFormat:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(ee,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(ee,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(ee,{value:".*",children:"Any format"}),o.jsx(ee,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(ee,{value:"custom",children:"Custom Regex"})]})]}),n.flagFormat==="custom"&&o.jsx(he,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:A=>r({...n,flagFormat:A.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(G,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>w("file"),children:[o.jsx(kC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>w("link"),children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),n.files.length>0&&o.jsx("div",{className:"space-y-2",children:n.files.map(A=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[A.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:A.name}),A.type==="link"&&o.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(A.id),children:o.jsx(ac,{className:"w-4 h-4"})})]},A.id))})]}),o.jsxs("div",{children:[o.jsx(G,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[n.hints.map((A,N)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(he,{value:A,onChange:y=>v(N,y.target.value),placeholder:`Hint ${N+1}`}),n.hints.length>1&&o.jsx(Q,{type:"button",variant:"outline",onClick:()=>I(N),children:"Remove"})]},N)),o.jsx(Q,{type:"button",variant:"outline",onClick:p,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(Q,{type:"submit",disabled:a,children:a?"Creating...":"Create Challenge"}),o.jsx(Q,{type:"button",variant:"outline",onClick:f,children:"Reset Form"}),o.jsx(Q,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},rz=({onBack:t,onCreateNew:e,onEditChallenge:n})=>{const{user:r}=zn(),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[p,v]=g.useState("all"),[I,_]=g.useState("all"),[S,E]=g.useState("all"),[w,C]=g.useState("all"),[R,L]=g.useState([]),[A,N]=g.useState(!1);g.useEffect(()=>{y(),T()},[]),g.useEffect(()=>{b()},[h,p,I,S,w,s]);const y=async()=>{try{const O=zr(kt(ye,"challenges"),qs("createdAt","desc")),ie=(await er(O)).docs.map(de=>({id:de.id,...de.data()}));i(ie)}catch(O){console.error("Error fetching challenges:",O)}finally{d(!1)}},T=async()=>{try{N(!0);const O=zr(kt(ye,"events"),Nr("status","in",["LIVE","UPCOMING"]),qs("startTime","asc")),ie=(await er(O)).docs.map(de=>({id:de.id,...de.data()}));L(ie)}catch(O){console.error("Error fetching events:",O),L([])}finally{N(!1)}},b=()=>{let O=s;h&&(O=O.filter(z=>z.title.toLowerCase().includes(h.toLowerCase())||z.description.toLowerCase().includes(h.toLowerCase())||(z.finalCategory||z.category).toLowerCase().includes(h.toLowerCase()))),p!=="all"&&(O=O.filter(z=>(z.finalCategory||z.category)===p)),I!=="all"&&(O=O.filter(z=>z.difficulty===I)),S!=="all"&&(O=O.filter(z=>S==="active"?z.isActive:!z.isActive)),w!=="all"&&(O=O.filter(z=>{switch(w){case"practice":return z.challengeType==="practice"||z.featuredOnPractice||z.availableInPractice;case"live":return z.challengeType==="live";case"upcoming":return z.challengeType==="upcoming";case"past":return z.challengeType==="past_event";case"featured":return z.featuredOnPractice;default:return!0}})),l(O)},j=async(O,z)=>{try{await Pn(Xe(ye,"challenges",O),{isActive:!z}),i(s.map(ie=>ie.id===O?{...ie,isActive:!z}:ie))}catch(ie){console.error("Error updating challenge status:",ie)}},k=async(O,z)=>{try{await Pn(Xe(ye,"challenges",O),{featuredOnPractice:!z,availableInPractice:!0,challengeType:z?void 0:"practice"}),i(s.map(ie=>ie.id===O?{...ie,featuredOnPractice:!z,availableInPractice:!0,challengeType:z?ie.challengeType:"practice"}:ie))}catch(ie){console.error("Error updating featured status:",ie)}},P=async(O,z,ie)=>{try{const de=R.find(Oe=>Oe.id===z);await Pn(Xe(ye,"challenges",O),{eventId:z,eventName:ie,challengeType:(de==null?void 0:de.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}),i(s.map(Oe=>Oe.id===O?{...Oe,eventId:z,eventName:ie,challengeType:(de==null?void 0:de.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}:Oe))}catch(de){console.error("Error assigning challenge to event:",de)}},W=async O=>{try{await Pn(Xe(ye,"challenges",O),{eventId:null,eventName:null,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}),i(s.map(z=>z.id===O?{...z,eventId:void 0,eventName:void 0,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}:z))}catch(z){console.error("Error removing challenge from event:",z)}},se=async(O,z)=>{try{await Pn(Xe(ye,"challenges",O),{availableInPractice:z,challengeType:z?"practice":void 0,featuredOnPractice:z?!1:void 0}),i(s.map(ie=>ie.id===O?{...ie,availableInPractice:z,challengeType:z?"practice":ie.challengeType,featuredOnPractice:z?ie.featuredOnPractice:!1}:ie))}catch(ie){console.error("Error updating practice availability:",ie)}},J=async O=>{if(confirm("Are you sure you want to delete this challenge? This action cannot be undone."))try{await R6(Xe(ye,"challenges",O)),i(s.filter(z=>z.id!==O))}catch(z){console.error("Error deleting challenge:",z)}},le=O=>{switch(O){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},M=O=>({web:"bg-blue-100 text-blue-800",crypto:"bg-purple-100 text-purple-800",forensics:"bg-orange-100 text-orange-800",pwn:"bg-red-100 text-red-800",reversing:"bg-indigo-100 text-indigo-800",misc:"bg-gray-100 text-gray-800"})[O]||"bg-gray-100 text-gray-800",q=O=>O.challengeType==="live"?o.jsxs(Ue,{className:"bg-red-100 text-red-800",children:[o.jsx(Rs,{className:"w-3 h-3 mr-1"}),"Live Event"]}):O.challengeType==="upcoming"?o.jsxs(Ue,{className:"bg-yellow-100 text-yellow-800",children:[o.jsx(ia,{className:"w-3 h-3 mr-1"}),"Upcoming"]}):O.challengeType==="past_event"?o.jsx(Ue,{className:"bg-gray-100 text-gray-800",children:"Past Event"}):O.featuredOnPractice?o.jsxs(Ue,{className:"bg-purple-100 text-purple-800",children:[o.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Featured"]}):O.availableInPractice?o.jsx(Ue,{className:"bg-green-100 text-green-800",children:"Practice"}):null,$=()=>{const O=s.map(z=>z.finalCategory||z.category);return Array.from(new Set(O)).filter(Boolean)};return c?o.jsx(ne,{children:o.jsx(re,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenges..."})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Challenge Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage challenges, assign to events, and feature on practice page (",s.length," total)"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{onClick:e,children:[o.jsx(ti,{className:"w-4 h-4 mr-2"}),"Create New"]}),o.jsx(Q,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]}),o.jsxs(ne,{children:[o.jsx(Ne,{children:o.jsx(Te,{className:"text-lg",children:"Search & Filter"})}),o.jsx(re,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(he,{placeholder:"Search challenges...",value:h,onChange:O=>f(O.target.value),className:"pl-10"})]}),o.jsx("div",{children:o.jsxs(Xt,{value:p,onValueChange:v,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Categories"})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"all",children:"All Categories"}),$().map(O=>o.jsx(ee,{value:O,children:O},O))]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:I,onValueChange:_,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Difficulties"})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"all",children:"All Difficulties"}),o.jsx(ee,{value:"easy",children:"Easy"}),o.jsx(ee,{value:"medium",children:"Medium"}),o.jsx(ee,{value:"hard",children:"Hard"}),o.jsx(ee,{value:"expert",children:"Expert"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:S,onValueChange:E,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Status"})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"all",children:"All Status"}),o.jsx(ee,{value:"active",children:"Active"}),o.jsx(ee,{value:"inactive",children:"Inactive"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:w,onValueChange:C,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Types"})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"all",children:"All Types"}),o.jsx(ee,{value:"practice",children:"Practice"}),o.jsx(ee,{value:"live",children:"Live Event"}),o.jsx(ee,{value:"upcoming",children:"Upcoming Event"}),o.jsx(ee,{value:"past",children:"Past Event"}),o.jsx(ee,{value:"featured",children:"Featured"})]})]})})]})})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Challenges"}),o.jsxs(Ht,{children:[a.length," of ",s.length," challenges shown",R.length>0&&`  ${R.length} events available`]})]}),o.jsx(re,{children:o.jsxs("div",{className:"space-y-4",children:[a.map(O=>{var z,ie,de,Oe;return o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("h3",{className:"font-semibold text-lg",children:O.title}),o.jsx(Ue,{variant:O.isActive?"default":"secondary",children:O.isActive?"Active":"Inactive"}),o.jsx(Ue,{className:le(O.difficulty),children:O.difficulty}),o.jsx(Ue,{className:M(O.finalCategory||O.category),children:O.finalCategory||O.category}),o.jsxs(Ue,{variant:"outline",children:[O.points," pts"]}),q(O)]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:O.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Created by: ",O.createdByName]}),o.jsx("span",{children:""}),o.jsx("span",{children:((de=(ie=(z=O.createdAt)==null?void 0:z.toDate)==null?void 0:ie.call(z))==null?void 0:de.toLocaleDateString())||new Date(O.createdAt).toLocaleDateString()}),o.jsx("span",{children:""}),o.jsxs("span",{children:[((Oe=O.solvedBy)==null?void 0:Oe.length)||0," solves"]}),O.eventName&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Event: ",O.eventName]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`featured-${O.id}`,checked:O.featuredOnPractice||!1,onCheckedChange:be=>k(O.id,O.featuredOnPractice||!1)}),o.jsx(G,{htmlFor:`featured-${O.id}`,className:"text-sm",children:"Featured on Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`practice-${O.id}`,checked:O.availableInPractice||!1,onCheckedChange:be=>se(O.id,be)}),o.jsx(G,{htmlFor:`practice-${O.id}`,className:"text-sm",children:"Available in Practice"})]}),!O.eventId&&R.length>0&&o.jsx("div",{className:"flex items-center space-x-2",children:o.jsxs(Xt,{value:"",onValueChange:be=>{const oe=R.find(Ce=>Ce.id===be);oe&&P(O.id,be,oe.title)},children:[o.jsx($t,{className:"w-40",children:o.jsx(Jt,{placeholder:"Assign to Event"})}),o.jsx(zt,{children:R.map(be=>o.jsxs(ee,{value:be.id,children:[be.title," (",be.status,")"]},be.id))})]})}),O.eventId&&o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>W(O.id),children:"Remove from Event"}),R.length===0&&o.jsx(Ue,{variant:"outline",className:"text-xs",children:"No events available"})]})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>n(O),children:[o.jsx(uU,{className:"w-4 h-4 mr-1"}),"Edit"]}),o.jsx(Q,{variant:"outline",size:"sm",onClick:()=>j(O.id,O.isActive),children:O.isActive?"Deactivate":"Activate"}),o.jsx(Q,{variant:"destructive",size:"sm",onClick:()=>J(O.id),children:o.jsx(dU,{className:"w-4 h-4"})})]})]})},O.id)}),a.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.length===0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{children:"No challenges created yet."}),o.jsxs(Q,{onClick:e,children:[o.jsx(ti,{className:"w-4 h-4 mr-2"}),"Create Your First Challenge"]})]}):"No challenges match your filters."})]})})]})]})},sz=({challengeId:t,onBack:e,onSave:n})=>{const{user:r}=zn(),[s,i]=g.useState(!0),[a,l]=g.useState(!1),[c,d]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,isActive:!0,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[h,f]=g.useState([]),[p,v]=g.useState(!1);g.useEffect(()=>{I()},[t]);const I=async()=>{var b,j,k,P,W,se,J;try{const le=await sa(Xe(ye,"challenges",t));if(le.exists()){const M=le.data();d({title:M.title||"",description:M.description||"",category:M.category||"web",customCategory:M.finalCategory||"",difficulty:M.difficulty||"easy",points:M.points||100,flag:M.flag||"",flagFormat:M.flagFormat||"CTF{.*}",hasMultipleQuestions:M.hasMultipleQuestions||!1,isExternalChallenge:!!M.attribution,isActive:M.isActive!==!1,hints:M.hints||[""],files:M.files||[],creator:((b=M.originalCreator)==null?void 0:b.name)||"",creatorUrl:((j=M.originalCreator)==null?void 0:j.url)||"",featuredOnPractice:M.featuredOnPractice||!1,availableInPractice:M.availableInPractice!==!1,challengeType:M.challengeType||"practice",externalSource:{ctfName:((k=M.attribution)==null?void 0:k.ctfName)||"",ctfUrl:((P=M.attribution)==null?void 0:P.ctfUrl)||"",originalAuthor:((W=M.attribution)==null?void 0:W.originalAuthor)||"",authorUrl:((se=M.attribution)==null?void 0:se.authorUrl)||"",license:((J=M.attribution)==null?void 0:J.license)||"unknown"}}),M.hasMultipleQuestions&&M.questions&&f(M.questions),M.finalCategory&&(v(!0),d(q=>({...q,category:"custom"})))}}catch(le){console.error("Error loading challenge:",le)}finally{i(!1)}},_=async b=>{b.preventDefault(),l(!0);try{const j={...c,finalCategory:p?c.customCategory:c.category,questions:c.hasMultipleQuestions?h:[],hints:c.hints.filter(k=>k.trim()!==""),totalPoints:c.hasMultipleQuestions?h.reduce((k,P)=>k+P.points,0):c.points,updatedAt:new Date,updatedBy:r==null?void 0:r.uid,updatedByName:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),featuredOnPractice:c.featuredOnPractice,availableInPractice:c.availableInPractice,challengeType:c.challengeType,...c.isExternalChallenge&&{attribution:{...c.externalSource,importedBy:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),importedById:r==null?void 0:r.uid,importedAt:new Date}},...c.creator&&{originalCreator:{name:c.creator,url:c.creatorUrl}}};await Pn(Xe(ye,"challenges",t),j),alert("Challenge updated successfully!"),n()}catch(j){console.error("Error updating challenge:",j),alert("Error updating challenge. Please try again.")}finally{l(!1)}},S=()=>{d({...c,hints:[...c.hints,""]})},E=(b,j)=>{const k=[...c.hints];k[b]=j,d({...c,hints:k})},w=b=>{const j=c.hints.filter((k,P)=>P!==b);d({...c,hints:j})},C=()=>{const b={id:Date.now().toString(),question:"",points:0,flag:""};f([...h,b])},R=(b,j,k)=>{f(h.map(P=>P.id===b?{...P,[j]:k}:P))},L=b=>{h.length>1&&f(h.filter(j=>j.id!==b))},A=b=>{if(b==="link"){const j=prompt("Enter the URL:");if(j){const k={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:j,type:"link"};d({...c,files:[...c.files,k]})}}else{const j=document.createElement("input");j.type="file",j.onchange=k=>{var W;const P=(W=k.target.files)==null?void 0:W[0];if(P){const se={id:Date.now().toString(),name:P.name,url:URL.createObjectURL(P),type:"file"};d({...c,files:[...c.files,se]})}},j.click()}},N=b=>{d({...c,files:c.files.filter(j=>j.id!==b)})},y=b=>{b==="custom"?(v(!0),d({...c,category:"custom"})):(v(!1),d({...c,category:b}))},T=(b,j)=>{d({...c,externalSource:{...c.externalSource,[b]:j}})};return s?o.jsx(ne,{children:o.jsx(re,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenge..."})})}):o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Edit Challenge"}),o.jsx(Ht,{children:"Update challenge details and configuration"})]}),o.jsx(re,{children:o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(G,{className:"text-base",children:"Challenge Status"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active challenges are visible to users"})]}),o.jsx(Rt,{checked:c.isActive,onCheckedChange:b=>d({...c,isActive:b})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Qe,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:c.availableInPractice,onCheckedChange:b=>d({...c,availableInPractice:b})}),o.jsx(G,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:c.featuredOnPractice,onCheckedChange:b=>d({...c,featuredOnPractice:b})}),o.jsxs(G,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Ev,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:c.challengeType,onValueChange:b=>d({...c,challengeType:b}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"practice",children:"Practice Challenge"}),o.jsx(ee,{value:"live",children:"Live Event Challenge"}),o.jsx(ee,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(he,{id:"title",value:c.title,onChange:b=>d({...c,title:b.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:c.category,onValueChange:y,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"web",children:"Web"}),o.jsx(ee,{value:"crypto",children:"Cryptography"}),o.jsx(ee,{value:"forensics",children:"Forensics"}),o.jsx(ee,{value:"pwn",children:"Pwn"}),o.jsx(ee,{value:"reversing",children:"Reverse Engineering"}),o.jsx(ee,{value:"misc",children:"Miscellaneous"}),o.jsx(ee,{value:"custom",children:"Custom Category"})]})]})]}),p&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(he,{id:"customCategory",value:c.customCategory,onChange:b=>d({...c,customCategory:b.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:c.difficulty,onValueChange:b=>d({...c,difficulty:b}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(ee,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(ee,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"points",children:"Points *"}),o.jsx(he,{id:"points",type:"number",value:c.points,onChange:b=>d({...c,points:parseInt(b.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(G,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:c.description,onChange:b=>d({...c,description:b.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Tn,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(he,{id:"creator",value:c.creator,onChange:b=>d({...c,creator:b.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(he,{id:"creatorUrl",value:c.creatorUrl,onChange:b=>d({...c,creatorUrl:b.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wd,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:c.isExternalChallenge,onCheckedChange:b=>d({...c,isExternalChallenge:b})})]}),c.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(he,{id:"ctfName",value:c.externalSource.ctfName,onChange:b=>T("ctfName",b.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(he,{id:"ctfUrl",value:c.externalSource.ctfUrl,onChange:b=>T("ctfUrl",b.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(he,{id:"originalAuthor",value:c.externalSource.originalAuthor,onChange:b=>T("originalAuthor",b.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(he,{id:"authorUrl",value:c.externalSource.authorUrl,onChange:b=>T("authorUrl",b.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:c.externalSource.license,onValueChange:b=>T("license",b),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ee,{value:"unknown",children:"Unknown"}),o.jsx(ee,{value:"MIT",children:"MIT License"}),o.jsx(ee,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(ee,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(ee,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(ee,{value:"custom",children:"Custom License"})]})]}),c.externalSource.license==="custom"&&o.jsx(he,{placeholder:"Specify custom license",className:"mt-2",onChange:b=>T("license",b.target.value)})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:c.hasMultipleQuestions,onCheckedChange:b=>d({...c,hasMultipleQuestions:b})})]}),c.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(G,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Q,{type:"button",onClick:C,variant:"outline",size:"sm",children:[o.jsx(ti,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),h.map((b,j)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(G,{children:["Question ",j+1]}),h.length>1&&o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(b.id),children:o.jsx(ac,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`question-${b.id}`,children:"Question Text *"}),o.jsx(he,{id:`question-${b.id}`,value:b.question,onChange:k=>R(b.id,"question",k.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:`points-${b.id}`,children:"Points *"}),o.jsx(he,{id:`points-${b.id}`,type:"number",value:b.points,onChange:k=>R(b.id,"points",parseInt(k.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`flag-${b.id}`,children:"Flag *"}),o.jsx(he,{id:`flag-${b.id}`,value:b.flag,onChange:k=>R(b.id,"flag",k.target.value),placeholder:"Flag for this question",required:!0})]})]})]},b.id)),h.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",h.reduce((b,j)=>b+j.points,0)]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flag",children:"Flag *"}),o.jsx(he,{id:"flag",value:c.flag,onChange:b=>d({...c,flag:b.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:c.flagFormat,onValueChange:b=>d({...c,flagFormat:b}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(ee,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(ee,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(ee,{value:".*",children:"Any format"}),o.jsx(ee,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(ee,{value:"custom",children:"Custom Regex"})]})]}),c.flagFormat==="custom"&&o.jsx(he,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:b=>d({...c,flagFormat:b.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(G,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>A("file"),children:[o.jsx(kC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Q,{type:"button",variant:"outline",onClick:()=>A("link"),children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),c.files.length>0&&o.jsx("div",{className:"space-y-2",children:c.files.map(b=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[b.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:b.name}),b.type==="link"&&o.jsx("a",{href:b.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Q,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(b.id),children:o.jsx(ac,{className:"w-4 h-4"})})]},b.id))})]}),o.jsxs("div",{children:[o.jsx(G,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[c.hints.map((b,j)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(he,{value:b,onChange:k=>E(j,k.target.value),placeholder:`Hint ${j+1}`}),c.hints.length>1&&o.jsx(Q,{type:"button",variant:"outline",onClick:()=>w(j),children:"Remove"})]},j)),o.jsx(Q,{type:"button",variant:"outline",onClick:S,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(Q,{type:"submit",disabled:a,children:[o.jsx(jC,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]}),o.jsx(Q,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})},iz=({onBack:t})=>{const[e,n]=g.useState({name:"",description:"",startDate:"",endDate:"",type:"ctf",maxParticipants:100,isPublic:!0}),r=async s=>{s.preventDefault(),console.log("Scheduling event:",e),alert("Event scheduling functionality coming soon!")};return o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Schedule New Event"}),o.jsx(Ht,{children:"Create and schedule CTF events and competitions"})]}),o.jsx(re,{children:o.jsxs("form",{onSubmit:r,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"name",children:"Event Name *"}),o.jsx(he,{id:"name",value:e.name,onChange:s=>n({...e,name:s.target.value}),placeholder:"Enter event name",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"description",children:"Event Description"}),o.jsx(Sa,{id:"description",value:e.description,onChange:s=>n({...e,description:s.target.value}),placeholder:"Describe the event, rules, and objectives...",rows:4})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"startDate",children:"Start Date & Time *"}),o.jsx(he,{id:"startDate",type:"datetime-local",value:e.startDate,onChange:s=>n({...e,startDate:s.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"endDate",children:"End Date & Time *"}),o.jsx(he,{id:"endDate",type:"datetime-local",value:e.endDate,onChange:s=>n({...e,endDate:s.target.value}),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"type",children:"Event Type"}),o.jsxs("select",{id:"type",value:e.type,onChange:s=>n({...e,type:s.target.value}),className:"w-full p-2 border rounded",children:[o.jsx("option",{value:"ctf",children:"CTF Competition"}),o.jsx("option",{value:"workshop",children:"Workshop"}),o.jsx("option",{value:"training",children:"Training Session"}),o.jsx("option",{value:"jeopardy",children:"Jeopardy Style"})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"maxParticipants",children:"Max Participants"}),o.jsx(he,{id:"maxParticipants",type:"number",value:e.maxParticipants,onChange:s=>n({...e,maxParticipants:parseInt(s.target.value)}),min:"1"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"isPublic",checked:e.isPublic,onChange:s=>n({...e,isPublic:s.target.checked}),className:"rounded"}),o.jsx(G,{htmlFor:"isPublic",children:"Public Event (Visible to all users)"})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(Q,{type:"submit",children:"Schedule Event"}),o.jsx(Q,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},oz=({onBack:t})=>{const e=[{id:"1",user:"john_doe",challenge:"SQL Injection Master",submittedAt:"2024-01-15",status:"pending",content:"This is a mock write-up content...",rating:0},{id:"2",user:"jane_smith",challenge:"Crypto Challenge 1",submittedAt:"2024-01-14",status:"approved",content:"Another mock write-up...",rating:4}],n=i=>{console.log("Approving writeup:",i),alert(`Write-up ${i} approved!`)},r=i=>{console.log("Rejecting writeup:",i),alert(`Write-up ${i} rejected!`)},s=i=>{switch(i){case"pending":return o.jsx(Ue,{variant:"secondary",children:"Pending"});case"approved":return o.jsx(Ue,{variant:"default",children:"Approved"});case"rejected":return o.jsx(Ue,{variant:"destructive",children:"Rejected"});default:return o.jsx(Ue,{variant:"secondary",children:i})}};return o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Review Write-ups"}),o.jsxs(Ht,{children:["Review and approve user write-ups for challenges (",e.length," total)"]})]}),o.jsx(re,{children:o.jsxs("div",{className:"space-y-6",children:[e.map(i=>o.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:i.challenge}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by ",i.user," on ",i.submittedAt]})]}),s(i.status)]}),o.jsxs("div",{children:[o.jsx(G,{children:"Write-up Content"}),o.jsx("div",{className:"mt-1 p-3 border rounded bg-muted/50",children:i.content})]}),i.status==="pending"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(G,{htmlFor:`feedback-${i.id}`,children:"Feedback (Optional)"}),o.jsx(Sa,{id:`feedback-${i.id}`,placeholder:"Provide feedback for the user...",rows:3}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{onClick:()=>n(i.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),o.jsx(Q,{variant:"outline",onClick:()=>r(i.id),children:"Request Changes"}),o.jsx(Q,{variant:"destructive",onClick:()=>r(i.id),children:"Reject"})]})]}),i.status!=="pending"&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Write-up has been ",i.status,". ",i.rating>0&&`Rating: ${i.rating}/5`]})]},i.id)),e.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No write-ups to review at this time."})]})})]})},az=({onBack:t})=>{const e={totalUsers:150,activeUsers:47,totalChallenges:25,solvedChallenges:189,averageSolveTime:"2h 15m",popularCategory:"Web Security"},n=[{title:"Total Users",value:e.totalUsers,description:"Registered users",icon:nn,color:"text-blue-600"},{title:"Active Users (30d)",value:e.activeUsers,description:"Recently active users",icon:nn,color:"text-green-600"},{title:"Total Challenges",value:e.totalChallenges,description:"Available challenges",icon:Qe,color:"text-purple-600"},{title:"Challenge Solves",value:e.solvedChallenges,description:"Total solutions submitted",icon:Yn,color:"text-orange-600"},{title:"Avg Solve Time",value:e.averageSolveTime,description:"Average time to solve challenges",icon:Na,color:"text-red-600"},{title:"Popular Category",value:e.popularCategory,description:"Most solved category",icon:TC,color:"text-indigo-600"}];return o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Platform Analytics"}),o.jsx(Ht,{children:"Comprehensive overview of platform performance and user engagement"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:n.map((r,s)=>o.jsx(ne,{children:o.jsx(re,{className:"pt-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r.title}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),o.jsx("div",{className:`p-3 rounded-full bg-muted ${r.color}`,children:o.jsx(r.icon,{className:"w-6 h-6"})})]})})},s))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{className:"text-lg",children:"User Growth"}),o.jsx(Ht,{children:"Last 30 days"})]}),o.jsx(re,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"User growth chart will be displayed here"})})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{className:"text-lg",children:"Challenge Performance"}),o.jsx(Ht,{children:"Solve rates by category"})]}),o.jsx(re,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Challenge performance chart will be displayed here"})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(Q,{variant:"outline",onClick:t,children:"Back to Dashboard"}),o.jsx(Q,{children:"Export Analytics"})]})]})]})},lz=({onBack:t})=>{const[e,n]=g.useState({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1}),[r,s]=g.useState(!1),i=async()=>{s(!0),setTimeout(()=>{alert("Settings saved successfully!"),s(!1)},1e3)},a=()=>{confirm("Are you sure you want to reset all settings to default?")&&n({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1})},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"General Settings"}),o.jsx(Ht,{children:"Basic platform configuration"})]}),o.jsxs(re,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"siteName",children:"Site Name"}),o.jsx(he,{id:"siteName",value:e.siteName,onChange:c=>l("siteName",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"siteDescription",children:"Site Description"}),o.jsx(Sa,{id:"siteDescription",value:e.siteDescription,onChange:c=>l("siteDescription",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"contactEmail",children:"Contact Email"}),o.jsx(he,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:c=>l("contactEmail",c.target.value)})]})]})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Security Settings"}),o.jsx(Ht,{children:"Authentication and security configuration"})]}),o.jsxs(re,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"requireEmailVerification",children:"Require Email Verification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must verify their email address before accessing the platform"})]}),o.jsx(Rt,{id:"requireEmailVerification",checked:e.requireEmailVerification,onCheckedChange:c=>l("requireEmailVerification",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"allowRegistrations",children:"Allow New Registrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register on the platform"})]}),o.jsx(Rt,{id:"allowRegistrations",checked:e.allowRegistrations,onCheckedChange:c=>l("allowRegistrations",c)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),o.jsx(he,{id:"maxLoginAttempts",type:"number",value:e.maxLoginAttempts,onChange:c=>l("maxLoginAttempts",parseInt(c.target.value)),min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),o.jsx(he,{id:"sessionTimeout",type:"number",value:e.sessionTimeout,onChange:c=>l("sessionTimeout",parseInt(c.target.value)),min:"1",max:"720"})]})]})]})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Challenge Settings"}),o.jsx(Ht,{children:"Challenge and write-up configuration"})]}),o.jsxs(re,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"defaultPoints",children:"Default Points for New Challenges"}),o.jsx(he,{id:"defaultPoints",type:"number",value:e.defaultPoints,onChange:c=>l("defaultPoints",parseInt(c.target.value)),min:"1"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"allowWriteups",children:"Allow Write-ups"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users can submit write-ups for challenges"})]}),o.jsx(Rt,{id:"allowWriteups",checked:e.allowWriteups,onCheckedChange:c=>l("allowWriteups",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"writeupRequired",children:"Write-ups Required"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must submit a write-up to get points"})]}),o.jsx(Rt,{id:"writeupRequired",checked:e.writeupRequired,onCheckedChange:c=>l("writeupRequired",c),disabled:!e.allowWriteups})]})]})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Maintenance Mode"}),o.jsx(Ht,{children:"Take the platform offline for maintenance"})]}),o.jsxs(re,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform will be unavailable to regular users"})]}),o.jsx(Rt,{id:"maintenanceMode",checked:e.maintenanceMode,onCheckedChange:c=>l("maintenanceMode",c)})]}),e.maintenanceMode&&o.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-yellow-800",children:" Maintenance mode is enabled. Only administrators can access the platform."})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Q,{onClick:i,disabled:r,children:r?"Saving...":"Save Settings"}),o.jsx(Q,{variant:"outline",onClick:a,children:"Reset to Defaults"}),o.jsx(Q,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]})},cz=()=>{const{isAdmin:t,isModerator:e}=Qh(),n=Bn(),[r,s]=g.useState("overview"),[i,a]=g.useState(null);if(!t&&!e)return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen",children:o.jsx("div",{className:"container px-4 mx-auto text-center",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(Qe,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have permission to access the admin dashboard."}),o.jsx(Q,{onClick:()=>n("/dashboard"),children:"Return to Dashboard"})]})})}),o.jsx(dt,{})]});const l=()=>{switch(r){case"users":return o.jsx(M9,{onBack:()=>s("overview")});case"challenge-management":return o.jsx(rz,{onBack:()=>s("overview"),onCreateNew:()=>s("create-challenge"),onEditChallenge:d=>{a(d),s("edit-challenge")}});case"create-challenge":return o.jsx(nz,{onBack:()=>s("challenge-management")});case"edit-challenge":return o.jsx(sz,{challengeId:i.id,onBack:()=>s("challenge-management"),onSave:()=>s("challenge-management")});case"schedule-event":return o.jsx(iz,{onBack:()=>s("overview")});case"review-writeups":return o.jsx(oz,{onBack:()=>s("overview")});case"analytics":return o.jsx(az,{onBack:()=>s("overview")});case"settings":return o.jsx(lz,{onBack:()=>s("overview")});default:return c()}},c=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(ne,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(nn,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium",children:"Active Challenges"}),o.jsx(Qe,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No challenges yet"})]})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium",children:"Live Events"}),o.jsx(ia,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No events yet"})]})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Te,{className:"text-sm font-medium",children:"Pending Write-ups"}),o.jsx(oc,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(re,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No write-ups yet"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"Content Management"}),o.jsx(Ht,{children:"Create and manage platform content"})]}),o.jsxs(re,{className:"space-y-4",children:[o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("create-challenge"),children:[o.jsx(ti,{className:"w-4 h-4"}),"Create New Challenge"]}),o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("challenge-management"),children:[o.jsx(tg,{className:"w-4 h-4"}),"Manage Challenges"]}),o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("schedule-event"),children:[o.jsx(ti,{className:"w-4 h-4"}),"Schedule New Event"]}),o.jsxs(Q,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("review-writeups"),children:[o.jsx(oc,{className:"w-4 h-4"}),"Review Write-ups"]})]})]}),o.jsxs(ne,{children:[o.jsxs(Ne,{children:[o.jsx(Te,{children:"User Management"}),o.jsx(Ht,{children:"Manage users and permissions"})]}),o.jsxs(re,{className:"space-y-4",children:[o.jsxs(Q,{className:"w-full justify-start gap-2",onClick:()=>s("users"),children:[o.jsx(nn,{className:"w-4 h-4"}),"View All Users"]}),t&&o.jsxs(Q,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("analytics"),children:[o.jsx(TC,{className:"w-4 h-4"}),"Platform Analytics"]}),o.jsxs(Q,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("settings"),children:[o.jsx(AC,{className:"w-4 h-4"}),"System Settings"]})]})]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:r==="overview"?"Admin Dashboard":r==="users"?"User Management":r==="challenge-management"?"Challenge Management":r==="create-challenge"?"Create Challenge":r==="edit-challenge"?"Edit Challenge":r==="schedule-event"?"Schedule Event":r==="review-writeups"?"Review Write-ups":r==="analytics"?"Platform Analytics":r==="settings"?"System Settings":"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:r==="overview"?"Manage your CTF platform, users, challenges, and events":"Admin management panel"})]}),r!=="overview"&&o.jsx(Q,{variant:"outline",onClick:()=>{s(r==="create-challenge"||r==="edit-challenge"?"challenge-management":"overview")},children:r==="create-challenge"||r==="edit-challenge"?"Back to Challenges":"Back to Dashboard"})]}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${t?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t?"Administrator":"Moderator"})})]}),l()]})}),o.jsx(dt,{})]})},uz=()=>{var P,W,se,J,le,M,q;const{challengeId:t}=xR(),e=Bn(),{user:n}=zn(),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(!1),[d,h]=g.useState(""),[f,p]=g.useState(null),[v,I]=g.useState([]),[_,S]=g.useState([]),[E,w]=g.useState("description");g.useEffect(()=>{t&&(C(),R())},[t]);const C=async()=>{try{a(!0),console.log(" Fetching challenge:",t);const $=await sa(Xe(ye,"challenges",t));if($.exists()){const O={id:$.id,...$.data()};console.log(" Challenge found:",O),s(O),O.hints&&I(new Array(O.hints.length).fill(!1))}else console.log(" Challenge not found in Firestore"),p({type:"error",text:"Challenge not found"})}catch($){console.error(" Error fetching challenge:",$),p({type:"error",text:"Failed to load challenge"})}finally{a(!1)}},R=async()=>{if(!(!n||!t))try{const $=zr(kt(ye,"submissions"),Nr("challengeId","==",t),Nr("userId","==",n.uid),qs("submittedAt","desc")),z=(await er($)).docs.map(ie=>({id:ie.id,...ie.data()}));S(z)}catch($){console.error("Error fetching submissions:",$)}},L=async()=>{var $;if(!(!r||!n||!d.trim())){c(!0),p(null);try{let O=!1;r.hasMultipleQuestions&&r.questions?O=!!r.questions.find(de=>de.flag&&de.flag.trim()===d.trim()):O=(($=r.flag)==null?void 0:$.trim())===d.trim();const z={challengeId:r.id,challengeTitle:r.title,userId:n.uid,userName:n.displayName||n.email,flag:d,isCorrect:O,submittedAt:new Date,pointsAwarded:O&&r.points||0};await GS(kt(ye,"submissions"),z),O?(p({type:"success",text:"Congratulations! Flag is correct!"}),h(""),C(),R()):p({type:"error",text:"Incorrect flag. Please try again."})}catch(O){console.error("Error submitting flag:",O),p({type:"error",text:"Failed to submit flag. Please try again."})}finally{c(!1)}}},A=$=>{const O=[...v];O[$]=!O[$],I(O)},N=()=>{e("/practice")},y=$=>{navigator.clipboard.writeText($)},T=(P=r==null?void 0:r.solvedBy)==null?void 0:P.includes((n==null?void 0:n.uid)||"");if(i)return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading challenge..."})]})})}),o.jsx(dt,{})]});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx(ne,{className:"max-w-md mx-auto border",children:o.jsxs(re,{className:"p-6 text-center",children:[o.jsx(Qe,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("h2",{className:"text-lg font-bold mb-2",children:"Challenge Not Found"}),o.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"The challenge you're looking for doesn't exist or you don't have permission to view it."}),o.jsxs(Q,{onClick:N,variant:"terminal",size:"sm",children:[o.jsx(G_,{className:"w-3 h-3 mr-1"}),"Back to Practice"]})]})})})}),o.jsx(dt,{})]});const b=$=>{switch($){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},j=$=>({web:"bg-blue-500/20 text-blue-600 border-blue-200",crypto:"bg-purple-500/20 text-purple-600 border-purple-200",forensics:"bg-orange-500/20 text-orange-600 border-orange-200",pwn:"bg-red-500/20 text-red-600 border-red-200",reversing:"bg-indigo-500/20 text-indigo-600 border-indigo-200",misc:"bg-gray-500/20 text-gray-600 border-gray-200"})[$]||"bg-gray-500/20 text-gray-600 border-gray-200",k=()=>{if(!r.description)return null;const $=r.description.split(`
`),O=[];for(let z=0;z<$.length;z++){const ie=$[z].trim();if(ie.startsWith("n =")||ie.startsWith("e =")||ie.startsWith("c =")){const[de,...Oe]=ie.split("="),be=Oe.join("=").trim();O.push(o.jsxs("div",{className:"mb-3 p-3 bg-muted/30 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"font-mono font-semibold text-xs",children:[de,"="]}),o.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(be),className:"h-6 px-2",children:o.jsx(Q_,{className:"w-3 h-3"})})]}),o.jsx("div",{className:"font-mono text-xs bg-background p-2 rounded border break-all",children:be})]},z))}else if(ie.includes("=")&&ie.length>50){const[de,...Oe]=ie.split("="),be=Oe.join("=").trim();O.push(o.jsxs("div",{className:"mb-2",children:[o.jsxs("strong",{className:"text-sm",children:[de,"="]}),o.jsx("div",{className:"font-mono text-xs bg-muted/30 p-2 rounded border break-all mt-1",children:be})]},z))}else ie?O.push(o.jsx("p",{className:"mb-2 text-sm leading-relaxed",children:ie},z)):O.push(o.jsx("div",{className:"mb-2"},z))}return O};return o.jsxs(o.Fragment,{children:[o.jsx(ut,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(Q,{variant:"ghost",onClick:N,size:"sm",className:"-ml-3",children:[o.jsx(G_,{className:"w-3 h-3 mr-1"}),"Back to Practice"]}),o.jsx("h1",{className:"text-xl font-bold",children:r.title})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[T&&o.jsxs(Ue,{className:"bg-green-500/20 text-green-600 border-green-200",children:[o.jsx(Ur,{className:"w-3 h-3 mr-1"}),"Solved"]}),r.featuredOnPractice&&o.jsxs(Ue,{className:"bg-yellow-500/20 text-yellow-600 border-yellow-200",children:[o.jsx(Ev,{className:"w-3 h-3 mr-1"}),"Featured"]})]})]}),o.jsx(ne,{className:"mb-4 border",children:o.jsx(re,{className:"p-3",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[o.jsx(Ue,{className:b(r.difficulty),children:r.difficulty}),o.jsx(Ue,{className:j(r.finalCategory||r.category),children:r.finalCategory||r.category}),o.jsxs(Ue,{variant:"outline",className:"font-mono font-semibold",children:[r.totalPoints||r.points," pts"]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(nn,{className:"w-3 h-3"}),o.jsxs("span",{children:[((W=r.solvedBy)==null?void 0:W.length)||0," solves"]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Na,{className:"w-3 h-3"}),o.jsx("span",{children:((le=(J=(se=r.createdAt)==null?void 0:se.toDate)==null?void 0:J.call(se))==null?void 0:le.toLocaleDateString())||new Date(r.createdAt).toLocaleDateString()})]}),o.jsxs("div",{className:"text-muted-foreground",children:["By: ",r.createdByName||"Unknown"]}),r.originalCreator&&o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx("span",{children:"Original: "}),r.originalCreator.url?o.jsxs("a",{href:r.originalCreator.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:[r.originalCreator.name,o.jsx(Wd,{className:"w-3 h-3"})]}):o.jsx("span",{children:r.originalCreator.name})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.jsxs(hI,{value:E,onValueChange:w,className:"w-full",children:[o.jsxs(Iv,{className:"grid w-full grid-cols-3",children:[o.jsx(dr,{value:"description",className:"text-xs",children:"Description"}),o.jsxs(dr,{value:"hints",className:"text-xs",children:["Hints (",((M=r.hints)==null?void 0:M.length)||0,")"]}),o.jsxs(dr,{value:"files",className:"text-xs",children:["Files & Links (",((q=r.files)==null?void 0:q.length)||0,")"]})]}),o.jsx(Al,{value:"description",className:"space-y-3 mt-3",children:o.jsx(ne,{className:"border",children:o.jsx(re,{className:"p-4",children:o.jsx("div",{className:"space-y-3",children:r.hasMultipleQuestions&&r.questions?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),r.questions.map(($,O)=>{var z;return o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("h4",{className:"font-semibold text-sm mb-1",children:["Question ",O+1]}),o.jsx("p",{className:"mb-2 text-xs text-muted-foreground",children:$.question}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"font-mono font-semibold",children:[$.points," points"]}),((z=r.solvedBy)==null?void 0:z.includes((n==null?void 0:n.uid)||""))&&o.jsxs(Ue,{variant:"outline",className:"font-mono text-xs",children:["Flag: ",$.flag]})]})]},$.id)})]}):o.jsxs("div",{className:"space-y-3",children:[k(),r.flagFormat&&o.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-200 rounded text-xs",children:o.jsxs("p",{className:"text-blue-600",children:[o.jsx("strong",{children:"Flag Format:"})," ",r.flagFormat]})}),T&&r.flag&&o.jsx("div",{className:"p-3 bg-green-500/10 border border-green-200 rounded",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("p",{className:"text-xs text-green-600 font-mono break-all",children:[o.jsx("strong",{children:"Flag:"})," ",r.flag]}),o.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>y(r.flag),className:"h-6 px-2",children:o.jsx(Q_,{className:"w-3 h-3"})})]})})]})})})})}),o.jsx(Al,{value:"hints",className:"mt-3",children:o.jsx(ne,{className:"border",children:o.jsx(re,{className:"p-4",children:r.hints&&r.hints.length>0?o.jsx("div",{className:"space-y-2",children:r.hints.map(($,O)=>o.jsx(ne,{className:"border",children:o.jsxs(re,{className:"p-3",children:[o.jsxs(Q,{variant:"ghost",onClick:()=>A(O),className:"w-full justify-between p-0 h-auto hover:bg-transparent",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(sU,{className:"w-3 h-3"}),o.jsxs("span",{className:"text-sm",children:["Hint ",O+1]})]}),o.jsx("div",{className:`transform transition-transform ${v[O]?"rotate-180":""}`,children:""})]}),v[O]&&o.jsx("p",{className:"mt-2 text-xs text-muted-foreground pl-5",children:$})]})},O))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No hints available."})})})})}),o.jsx(Al,{value:"files",className:"mt-3",children:o.jsx(ne,{className:"border",children:o.jsx(re,{className:"p-4",children:r.files&&r.files.length>0?o.jsx("div",{className:"space-y-2",children:r.files.map(($,O)=>o.jsxs("a",{href:$.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 text-sm border rounded hover:bg-accent transition-colors",children:[$.type==="file"?o.jsx(oc,{className:"w-3 h-3"}):o.jsx(aa,{className:"w-3 h-3"}),o.jsx("span",{className:"flex-1 truncate",children:$.name}),o.jsx(Wd,{className:"w-3 h-3"})]},O))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files or links available."})})})})})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(ne,{className:"border sticky top-4",children:[o.jsx(Ne,{className:"p-4 pb-2",children:o.jsxs(Te,{className:"flex items-center gap-2 text-base",children:[o.jsx(CC,{className:"w-4 h-4"}),"Submit Flag"]})}),o.jsxs(re,{className:"p-4 pt-2 space-y-3",children:[f&&o.jsxs(jv,{className:`text-sm ${f.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200"}`,children:[f.type==="success"?o.jsx(Ur,{className:"w-4 h-4 text-green-600"}):o.jsx(oa,{className:"w-4 h-4 text-red-600"}),o.jsx(Av,{className:f.type==="success"?"text-green-600":"text-red-600",children:f.text})]}),T?o.jsxs("div",{className:"text-center p-3 bg-green-500/10 border border-green-200 rounded",children:[o.jsx(Ur,{className:"w-8 h-8 text-green-600 mx-auto mb-1"}),o.jsx("p",{className:"text-green-600 font-semibold text-sm",children:"Challenge Solved!"}),o.jsxs("p",{className:"text-green-600 text-xs mt-1",children:["+",r.totalPoints||r.points," points"]})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(G,{htmlFor:"flag",className:"text-xs font-medium",children:"Enter Flag"}),o.jsx(he,{id:"flag",placeholder:"CTF{...} or flag content",value:d,onChange:$=>h($.target.value),onKeyPress:$=>$.key==="Enter"&&L(),className:"font-mono text-sm h-9"})]}),o.jsx(Q,{onClick:L,disabled:l||!d.trim(),className:"w-full h-9",variant:"terminal",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-2"}),"Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Submit Flag"]})})]})]})]}),_.length>0&&o.jsxs(ne,{className:"border",children:[o.jsx(Ne,{className:"p-4 pb-2",children:o.jsx(Te,{className:"text-base",children:"Submission History"})}),o.jsx(re,{className:"p-4 pt-2",children:o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:_.map($=>{var O,z,ie;return o.jsxs("div",{className:"flex items-center justify-between p-2 border rounded text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[$.isCorrect?o.jsx(Ur,{className:"w-3 h-3 text-green-600 flex-shrink-0"}):o.jsx(oa,{className:"w-3 h-3 text-red-600 flex-shrink-0"}),o.jsx("code",{className:"truncate font-mono",children:$.flag})]}),o.jsx("span",{className:"text-muted-foreground flex-shrink-0 ml-1 text-xs",children:((ie=(z=(O=$.submittedAt)==null?void 0:O.toDate)==null?void 0:z.call(O))==null?void 0:ie.toLocaleTimeString())||new Date($.submittedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},$.id)})})})]})]})]})]})}),o.jsx(dt,{})]})};function dz(){return o.jsx(fC,{children:o.jsx(JF,{children:o.jsx(ZF,{children:o.jsx($R,{children:o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(ut,{}),o.jsx("main",{className:"flex-1",children:o.jsxs(LR,{children:[o.jsx(on,{path:"/",element:o.jsx(vU,{})}),o.jsx(on,{path:"/login",element:o.jsx(xU,{})}),o.jsx(on,{path:"/signup",element:o.jsx(wU,{})}),o.jsx(on,{path:"/auth/github/callback",element:o.jsx(EU,{})}),o.jsx(on,{path:"/dashboard",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(CU,{})})})}),o.jsx(on,{path:"/practice",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(jU,{})})})}),o.jsx(on,{path:"/live",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(AU,{})})})}),o.jsx(on,{path:"/leaderboard",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(YU,{})})})}),o.jsx(on,{path:"/writeups",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(_U,{})})})}),o.jsx(on,{path:"/writeups/create",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(bU,{})})})}),o.jsx(on,{path:"/challenge/:challengeId",element:o.jsx(ps,{children:o.jsx(bi,{children:o.jsx(uz,{})})})}),o.jsx(on,{path:"/admin",element:o.jsx(ps,{children:o.jsx(e5,{children:o.jsx(cz,{})})})}),o.jsx(on,{path:"*",element:o.jsx(NU,{})})]})}),o.jsx(dt,{})]})})})})})}zE(document.getElementById("root")).render(o.jsx(fC,{children:o.jsx(dz,{})}));
