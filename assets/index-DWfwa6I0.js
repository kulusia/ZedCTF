function wA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ab(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kb={exports:{}},Xd={},Rb={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uc=Symbol.for("react.element"),_A=Symbol.for("react.portal"),bA=Symbol.for("react.fragment"),EA=Symbol.for("react.strict_mode"),NA=Symbol.for("react.profiler"),TA=Symbol.for("react.provider"),SA=Symbol.for("react.context"),CA=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),jA=Symbol.for("react.memo"),AA=Symbol.for("react.lazy"),kx=Symbol.iterator;function kA(t){return t===null||typeof t!="object"?null:(t=kx&&t[kx]||t["@@iterator"],typeof t=="function"?t:null)}var Pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Db=Object.assign,Lb={};function ha(t,e,n){this.props=t,this.context=e,this.refs=Lb,this.updater=n||Pb}ha.prototype.isReactComponent={};ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ob(){}Ob.prototype=ha.prototype;function ug(t,e,n){this.props=t,this.context=e,this.refs=Lb,this.updater=n||Pb}var dg=ug.prototype=new Ob;dg.constructor=ug;Db(dg,ha.prototype);dg.isPureReactComponent=!0;var Rx=Array.isArray,Mb=Object.prototype.hasOwnProperty,hg={current:null},Vb={key:!0,ref:!0,__self:!0,__source:!0};function Fb(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Mb.call(e,r)&&!Vb.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:uc,type:t,key:i,ref:a,props:s,_owner:hg.current}}function RA(t,e){return{$$typeof:uc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fg(t){return typeof t=="object"&&t!==null&&t.$$typeof===uc}function PA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Px=/\/+/g;function Ef(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PA(""+t.key):e.toString(36)}function Nu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case uc:case _A:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Ef(a,0):r,Rx(s)?(n="",t!=null&&(n=t.replace(Px,"$&/")+"/"),Nu(s,e,n,"",function(d){return d})):s!=null&&(fg(s)&&(s=RA(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Px,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Rx(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Ef(i,l);a+=Nu(i,e,n,c,s)}else if(c=kA(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Ef(i,l++),a+=Nu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Wc(t,e,n){if(t==null)return t;var r=[],s=0;return Nu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Tu={transition:null},LA={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Tu,ReactCurrentOwner:hg};function Ub(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Wc,forEach:function(t,e,n){Wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wc(t,function(){e++}),e},toArray:function(t){return Wc(t,function(e){return e})||[]},only:function(t){if(!fg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=ha;_e.Fragment=bA;_e.Profiler=NA;_e.PureComponent=ug;_e.StrictMode=EA;_e.Suspense=IA;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LA;_e.act=Ub;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Db({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=hg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Mb.call(e,c)&&!Vb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:uc,type:t.type,key:s,ref:i,props:r,_owner:a}};_e.createContext=function(t){return t={$$typeof:SA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TA,_context:t},t.Consumer=t};_e.createElement=Fb;_e.createFactory=function(t){var e=Fb.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:CA,render:t}};_e.isValidElement=fg;_e.lazy=function(t){return{$$typeof:AA,_payload:{_status:-1,_result:t},_init:DA}};_e.memo=function(t,e){return{$$typeof:jA,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Tu.transition;Tu.transition={};try{t()}finally{Tu.transition=e}};_e.unstable_act=Ub;_e.useCallback=function(t,e){return rn.current.useCallback(t,e)};_e.useContext=function(t){return rn.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};_e.useEffect=function(t,e){return rn.current.useEffect(t,e)};_e.useId=function(){return rn.current.useId()};_e.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return rn.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};_e.useRef=function(t){return rn.current.useRef(t)};_e.useState=function(t){return rn.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return rn.current.useTransition()};_e.version="18.3.1";Rb.exports=_e;var g=Rb.exports;const gs=Ab(g),Jd=wA({__proto__:null,default:gs},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA=g,MA=Symbol.for("react.element"),VA=Symbol.for("react.fragment"),FA=Object.prototype.hasOwnProperty,UA=OA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BA={key:!0,ref:!0,__self:!0,__source:!0};function Bb(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)FA.call(e,r)&&!BA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:MA,type:t,key:i,ref:a,props:s,_owner:UA.current}}Xd.Fragment=VA;Xd.jsx=Bb;Xd.jsxs=Bb;kb.exports=Xd;var o=kb.exports,$b={exports:{}},An={},zb={exports:{}},Hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,q){var ie=O.length;O.push(q);e:for(;0<ie;){var V=ie-1>>>1,H=O[V];if(0<s(H,q))O[V]=q,O[ie]=H,ie=V;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var q=O[0],ie=O.pop();if(ie!==q){O[0]=ie;e:for(var V=0,H=O.length,fe=H>>>1;V<fe;){var ye=2*(V+1)-1,Y=O[ye],ee=ye+1,W=O[ee];if(0>s(Y,ie))ee<H&&0>s(W,Y)?(O[V]=W,O[ee]=ie,V=ee):(O[V]=Y,O[ye]=ie,V=ye);else if(ee<H&&0>s(W,ie))O[V]=W,O[ee]=ie,V=ee;else break e}}return q}function s(O,q){var ie=O.sortIndex-q.sortIndex;return ie!==0?ie:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,x=!1,C=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=O)r(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(d)}}function D(O){if(_=!1,S(O),!C)if(n(c)!==null)C=!0,G(L);else{var q=n(d);q!==null&&oe(D,q.startTime-O)}}function L(O,q){C=!1,_&&(_=!1,E(y),y=-1),x=!0;var ie=m;try{for(S(q),f=n(c);f!==null&&(!(f.expirationTime>q)||O&&!R());){var V=f.callback;if(typeof V=="function"){f.callback=null,m=f.priorityLevel;var H=V(f.expirationTime<=q);q=t.unstable_now(),typeof H=="function"?f.callback=H:f===n(c)&&r(c),S(q)}else r(c);f=n(c)}if(f!==null)var fe=!0;else{var ye=n(d);ye!==null&&oe(D,ye.startTime-q),fe=!1}return fe}finally{f=null,m=ie,x=!1}}var j=!1,b=null,y=-1,A=5,N=-1;function R(){return!(t.unstable_now()-N<A)}function I(){if(b!==null){var O=t.unstable_now();N=O;var q=!0;try{q=b(!0,O)}finally{q?k():(j=!1,b=null)}}else j=!1}var k;if(typeof w=="function")k=function(){w(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,J=$.port2;$.port1.onmessage=I,k=function(){J.postMessage(null)}}else k=function(){T(I,0)};function G(O){b=O,j||(j=!0,k())}function oe(O,q){y=T(function(){O(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){C||x||(C=!0,G(L))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var ie=m;m=q;try{return O()}finally{m=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ie=m;m=O;try{return q()}finally{m=ie}},t.unstable_scheduleCallback=function(O,q,ie){var V=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?V+ie:V):ie=V,O){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ie+H,O={id:h++,callback:q,priorityLevel:O,startTime:ie,expirationTime:H,sortIndex:-1},ie>V?(O.sortIndex=ie,e(d,O),n(c)===null&&O===n(d)&&(_?(E(y),y=-1):_=!0,oe(D,ie-V))):(O.sortIndex=H,e(c,O),C||x||(C=!0,G(L))),O},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(O){var q=m;return function(){var ie=m;m=q;try{return O.apply(this,arguments)}finally{m=ie}}}})(Hb);zb.exports=Hb;var $A=zb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA=g,jn=$A;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wb=new Set,Al={};function Zi(t,e){Ho(t,e),Ho(t+"Capture",e)}function Ho(t,e){for(Al[t]=e,t=0;t<e.length;t++)Wb.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sm=Object.prototype.hasOwnProperty,HA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dx={},Lx={};function WA(t){return Sm.call(Lx,t)?!0:Sm.call(Dx,t)?!1:HA.test(t)?Lx[t]=!0:(Dx[t]=!0,!1)}function qA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GA(t,e,n,r){if(e===null||typeof e>"u"||qA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var mg=/[\-:]([a-z])/g;function pg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mg,pg);Dt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mg,pg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mg,pg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function gg(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GA(e,n,s,r)&&(n=null),r||s===null?WA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ts=zA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),vo=Symbol.for("react.portal"),xo=Symbol.for("react.fragment"),yg=Symbol.for("react.strict_mode"),Cm=Symbol.for("react.profiler"),qb=Symbol.for("react.provider"),Gb=Symbol.for("react.context"),vg=Symbol.for("react.forward_ref"),Im=Symbol.for("react.suspense"),jm=Symbol.for("react.suspense_list"),xg=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),Kb=Symbol.for("react.offscreen"),Ox=Symbol.iterator;function qa(t){return t===null||typeof t!="object"?null:(t=Ox&&t[Ox]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,Nf;function rl(t){if(Nf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nf=e&&e[1]||""}return`
`+Nf+t}var Tf=!1;function Sf(t,e){if(!t||Tf)return"";Tf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Tf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function KA(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=Sf(t.type,!1),t;case 11:return t=Sf(t.type.render,!1),t;case 1:return t=Sf(t.type,!0),t;default:return""}}function Am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xo:return"Fragment";case vo:return"Portal";case Cm:return"Profiler";case yg:return"StrictMode";case Im:return"Suspense";case jm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gb:return(t.displayName||"Context")+".Consumer";case qb:return(t._context.displayName||"Context")+".Provider";case vg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xg:return e=t.displayName||null,e!==null?e:Am(t.type)||"Memo";case vs:e=t._payload,t=t._init;try{return Am(t(e))}catch{}}return null}function QA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Am(e);case 8:return e===yg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YA(t){var e=Qb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gc(t){t._valueTracker||(t._valueTracker=YA(t))}function Yb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function km(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xb(t,e){e=e.checked,e!=null&&gg(t,"checked",e,!1)}function Rm(t,e){Xb(t,e);var n=Ws(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pm(t,e.type,Ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pm(t,e,n){(e!=="number"||Qu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function Ao(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ws(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(sl(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ws(n)}}function Jb(t,e){var n=Ws(e.value),r=Ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ux(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kc,e1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kc=Kc||document.createElement("div"),Kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XA=["Webkit","ms","Moz","O"];Object.keys(ml).forEach(function(t){XA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ml[e]=ml[t]})});function t1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ml.hasOwnProperty(t)&&ml[t]?(""+e).trim():e+"px"}function n1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JA=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Om(t,e){if(e){if(JA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Mm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vm=null;function wg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fm=null,ko=null,Ro=null;function Bx(t){if(t=fc(t)){if(typeof Fm!="function")throw Error(z(280));var e=t.stateNode;e&&(e=rh(e),Fm(t.stateNode,t.type,e))}}function r1(t){ko?Ro?Ro.push(t):Ro=[t]:ko=t}function s1(){if(ko){var t=ko,e=Ro;if(Ro=ko=null,Bx(t),e)for(t=0;t<e.length;t++)Bx(e[t])}}function i1(t,e){return t(e)}function o1(){}var Cf=!1;function a1(t,e,n){if(Cf)return t(e,n);Cf=!0;try{return i1(t,e,n)}finally{Cf=!1,(ko!==null||Ro!==null)&&(o1(),s1())}}function Rl(t,e){var n=t.stateNode;if(n===null)return null;var r=rh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Um=!1;if($r)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){Um=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{Um=!1}function ZA(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var pl=!1,Yu=null,Xu=!1,Bm=null,e2={onError:function(t){pl=!0,Yu=t}};function t2(t,e,n,r,s,i,a,l,c){pl=!1,Yu=null,ZA.apply(e2,arguments)}function n2(t,e,n,r,s,i,a,l,c){if(t2.apply(this,arguments),pl){if(pl){var d=Yu;pl=!1,Yu=null}else throw Error(z(198));Xu||(Xu=!0,Bm=d)}}function eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $x(t){if(eo(t)!==t)throw Error(z(188))}function r2(t){var e=t.alternate;if(!e){if(e=eo(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $x(s),t;if(i===r)return $x(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function c1(t){return t=r2(t),t!==null?u1(t):null}function u1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u1(t);if(e!==null)return e;t=t.sibling}return null}var d1=jn.unstable_scheduleCallback,zx=jn.unstable_cancelCallback,s2=jn.unstable_shouldYield,i2=jn.unstable_requestPaint,ct=jn.unstable_now,o2=jn.unstable_getCurrentPriorityLevel,_g=jn.unstable_ImmediatePriority,h1=jn.unstable_UserBlockingPriority,Ju=jn.unstable_NormalPriority,a2=jn.unstable_LowPriority,f1=jn.unstable_IdlePriority,Zd=null,gr=null;function l2(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(Zd,t,void 0,(t.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:d2,c2=Math.log,u2=Math.LN2;function d2(t){return t>>>=0,t===0?32:31-(c2(t)/u2|0)|0}var Qc=64,Yc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=il(l):(i&=a,i!==0&&(r=il(i)))}else a=n&~s,a!==0?r=il(a):i!==0&&(r=il(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jn(e),s=1<<n,r|=t[n],e&=~s;return r}function h2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Jn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=h2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function $m(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m1(){var t=Qc;return Qc<<=1,!(Qc&4194240)&&(Qc=64),t}function If(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jn(e),t[e]=n}function m2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Jn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function bg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Me=0;function p1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g1,Eg,y1,v1,x1,zm=!1,Xc=[],Rs=null,Ps=null,Ds=null,Pl=new Map,Dl=new Map,ws=[],p2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hx(t,e){switch(t){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":Pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(e.pointerId)}}function Ka(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fc(e),e!==null&&Eg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function g2(t,e,n,r,s){switch(e){case"focusin":return Rs=Ka(Rs,t,e,n,r,s),!0;case"dragenter":return Ps=Ka(Ps,t,e,n,r,s),!0;case"mouseover":return Ds=Ka(Ds,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pl.set(i,Ka(Pl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dl.set(i,Ka(Dl.get(i)||null,t,e,n,r,s)),!0}return!1}function w1(t){var e=Ti(t.target);if(e!==null){var n=eo(e);if(n!==null){if(e=n.tag,e===13){if(e=l1(n),e!==null){t.blockedOn=e,x1(t.priority,function(){y1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vm=r,n.target.dispatchEvent(r),Vm=null}else return e=fc(n),e!==null&&Eg(e),t.blockedOn=n,!1;e.shift()}return!0}function Wx(t,e,n){Su(t)&&n.delete(e)}function y2(){zm=!1,Rs!==null&&Su(Rs)&&(Rs=null),Ps!==null&&Su(Ps)&&(Ps=null),Ds!==null&&Su(Ds)&&(Ds=null),Pl.forEach(Wx),Dl.forEach(Wx)}function Qa(t,e){t.blockedOn===e&&(t.blockedOn=null,zm||(zm=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,y2)))}function Ll(t){function e(s){return Qa(s,t)}if(0<Xc.length){Qa(Xc[0],t);for(var n=1;n<Xc.length;n++){var r=Xc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rs!==null&&Qa(Rs,t),Ps!==null&&Qa(Ps,t),Ds!==null&&Qa(Ds,t),Pl.forEach(e),Dl.forEach(e),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)w1(n),n.blockedOn===null&&ws.shift()}var Po=ts.ReactCurrentBatchConfig,ed=!0;function v2(t,e,n,r){var s=Me,i=Po.transition;Po.transition=null;try{Me=1,Ng(t,e,n,r)}finally{Me=s,Po.transition=i}}function x2(t,e,n,r){var s=Me,i=Po.transition;Po.transition=null;try{Me=4,Ng(t,e,n,r)}finally{Me=s,Po.transition=i}}function Ng(t,e,n,r){if(ed){var s=Hm(t,e,n,r);if(s===null)Vf(t,e,r,td,n),Hx(t,r);else if(g2(s,t,e,n,r))r.stopPropagation();else if(Hx(t,r),e&4&&-1<p2.indexOf(t)){for(;s!==null;){var i=fc(s);if(i!==null&&g1(i),i=Hm(t,e,n,r),i===null&&Vf(t,e,r,td,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vf(t,e,r,null,n)}}var td=null;function Hm(t,e,n,r){if(td=null,t=wg(r),t=Ti(t),t!==null)if(e=eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return td=t,null}function _1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o2()){case _g:return 1;case h1:return 4;case Ju:case a2:return 16;case f1:return 536870912;default:return 16}default:return 16}}var Cs=null,Tg=null,Cu=null;function b1(){if(Cu)return Cu;var t,e=Tg,n=e.length,r,s="value"in Cs?Cs.value:Cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Cu=s.slice(t,1<r?1-r:void 0)}function Iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jc(){return!0}function qx(){return!1}function kn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jc:qx,this.isPropagationStopped=qx,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jc)},persist:function(){},isPersistent:Jc}),e}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sg=kn(fa),hc=et({},fa,{view:0,detail:0}),w2=kn(hc),jf,Af,Ya,eh=et({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ya&&(Ya&&t.type==="mousemove"?(jf=t.screenX-Ya.screenX,Af=t.screenY-Ya.screenY):Af=jf=0,Ya=t),jf)},movementY:function(t){return"movementY"in t?t.movementY:Af}}),Gx=kn(eh),_2=et({},eh,{dataTransfer:0}),b2=kn(_2),E2=et({},hc,{relatedTarget:0}),kf=kn(E2),N2=et({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),T2=kn(N2),S2=et({},fa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C2=kn(S2),I2=et({},fa,{data:0}),Kx=kn(I2),j2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k2[t])?!!e[t]:!1}function Cg(){return R2}var P2=et({},hc,{key:function(t){if(t.key){var e=j2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cg,charCode:function(t){return t.type==="keypress"?Iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),D2=kn(P2),L2=et({},eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qx=kn(L2),O2=et({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cg}),M2=kn(O2),V2=et({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),F2=kn(V2),U2=et({},eh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B2=kn(U2),$2=[9,13,27,32],Ig=$r&&"CompositionEvent"in window,gl=null;$r&&"documentMode"in document&&(gl=document.documentMode);var z2=$r&&"TextEvent"in window&&!gl,E1=$r&&(!Ig||gl&&8<gl&&11>=gl),Yx=" ",Xx=!1;function N1(t,e){switch(t){case"keyup":return $2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wo=!1;function H2(t,e){switch(t){case"compositionend":return T1(e);case"keypress":return e.which!==32?null:(Xx=!0,Yx);case"textInput":return t=e.data,t===Yx&&Xx?null:t;default:return null}}function W2(t,e){if(wo)return t==="compositionend"||!Ig&&N1(t,e)?(t=b1(),Cu=Tg=Cs=null,wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E1&&e.locale!=="ko"?null:e.data;default:return null}}var q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q2[t.type]:e==="textarea"}function S1(t,e,n,r){r1(r),e=nd(e,"onChange"),0<e.length&&(n=new Sg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yl=null,Ol=null;function G2(t){M1(t,0)}function th(t){var e=Eo(t);if(Yb(e))return t}function K2(t,e){if(t==="change")return e}var C1=!1;if($r){var Rf;if($r){var Pf="oninput"in document;if(!Pf){var Zx=document.createElement("div");Zx.setAttribute("oninput","return;"),Pf=typeof Zx.oninput=="function"}Rf=Pf}else Rf=!1;C1=Rf&&(!document.documentMode||9<document.documentMode)}function ew(){yl&&(yl.detachEvent("onpropertychange",I1),Ol=yl=null)}function I1(t){if(t.propertyName==="value"&&th(Ol)){var e=[];S1(e,Ol,t,wg(t)),a1(G2,e)}}function Q2(t,e,n){t==="focusin"?(ew(),yl=e,Ol=n,yl.attachEvent("onpropertychange",I1)):t==="focusout"&&ew()}function Y2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return th(Ol)}function X2(t,e){if(t==="click")return th(e)}function J2(t,e){if(t==="input"||t==="change")return th(e)}function Z2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tr=typeof Object.is=="function"?Object.is:Z2;function Ml(t,e){if(tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sm.call(e,s)||!tr(t[s],e[s]))return!1}return!0}function tw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nw(t,e){var n=tw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tw(n)}}function j1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A1(){for(var t=window,e=Qu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qu(t.document)}return e}function jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ek(t){var e=A1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j1(n.ownerDocument.documentElement,n)){if(r!==null&&jg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=nw(n,i);var a=nw(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tk=$r&&"documentMode"in document&&11>=document.documentMode,_o=null,Wm=null,vl=null,qm=!1;function rw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qm||_o==null||_o!==Qu(r)||(r=_o,"selectionStart"in r&&jg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vl&&Ml(vl,r)||(vl=r,r=nd(Wm,"onSelect"),0<r.length&&(e=new Sg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_o)))}function Zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bo={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionend:Zc("Transition","TransitionEnd")},Df={},k1={};$r&&(k1=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function nh(t){if(Df[t])return Df[t];if(!bo[t])return t;var e=bo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k1)return Df[t]=e[n];return t}var R1=nh("animationend"),P1=nh("animationiteration"),D1=nh("animationstart"),L1=nh("transitionend"),O1=new Map,sw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){O1.set(t,e),Zi(e,[t])}for(var Lf=0;Lf<sw.length;Lf++){var Of=sw[Lf],nk=Of.toLowerCase(),rk=Of[0].toUpperCase()+Of.slice(1);ni(nk,"on"+rk)}ni(R1,"onAnimationEnd");ni(P1,"onAnimationIteration");ni(D1,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(L1,"onTransitionEnd");Ho("onMouseEnter",["mouseout","mouseover"]);Ho("onMouseLeave",["mouseout","mouseover"]);Ho("onPointerEnter",["pointerout","pointerover"]);Ho("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function iw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,n2(r,e,void 0,t),t.currentTarget=null}function M1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;iw(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;iw(s,l,d),i=c}}}if(Xu)throw t=Bm,Xu=!1,Bm=null,t}function Ge(t,e){var n=e[Xm];n===void 0&&(n=e[Xm]=new Set);var r=t+"__bubble";n.has(r)||(V1(e,t,2,!1),n.add(r))}function Mf(t,e,n){var r=0;e&&(r|=4),V1(n,t,r,e)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Vl(t){if(!t[eu]){t[eu]=!0,Wb.forEach(function(n){n!=="selectionchange"&&(sk.has(n)||Mf(n,!1,t),Mf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eu]||(e[eu]=!0,Mf("selectionchange",!1,e))}}function V1(t,e,n,r){switch(_1(e)){case 1:var s=v2;break;case 4:s=x2;break;default:s=Ng}n=s.bind(null,e,n,t),s=void 0,!Um||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ti(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}a1(function(){var d=i,h=wg(n),f=[];e:{var m=O1.get(t);if(m!==void 0){var x=Sg,C=t;switch(t){case"keypress":if(Iu(n)===0)break e;case"keydown":case"keyup":x=D2;break;case"focusin":C="focus",x=kf;break;case"focusout":C="blur",x=kf;break;case"beforeblur":case"afterblur":x=kf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Gx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=b2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=M2;break;case R1:case P1:case D1:x=T2;break;case L1:x=F2;break;case"scroll":x=w2;break;case"wheel":x=B2;break;case"copy":case"cut":case"paste":x=C2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Qx}var _=(e&4)!==0,T=!_&&t==="scroll",E=_?m!==null?m+"Capture":null:m;_=[];for(var w=d,S;w!==null;){S=w;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,E!==null&&(D=Rl(w,E),D!=null&&_.push(Fl(w,D,S)))),T)break;w=w.return}0<_.length&&(m=new x(m,C,null,n,h),f.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==Vm&&(C=n.relatedTarget||n.fromElement)&&(Ti(C)||C[zr]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=d,C=C?Ti(C):null,C!==null&&(T=eo(C),C!==T||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=d),x!==C)){if(_=Gx,D="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=Qx,D="onPointerLeave",E="onPointerEnter",w="pointer"),T=x==null?m:Eo(x),S=C==null?m:Eo(C),m=new _(D,w+"leave",x,n,h),m.target=T,m.relatedTarget=S,D=null,Ti(h)===d&&(_=new _(E,w+"enter",C,n,h),_.target=S,_.relatedTarget=T,D=_),T=D,x&&C)t:{for(_=x,E=C,w=0,S=_;S;S=uo(S))w++;for(S=0,D=E;D;D=uo(D))S++;for(;0<w-S;)_=uo(_),w--;for(;0<S-w;)E=uo(E),S--;for(;w--;){if(_===E||E!==null&&_===E.alternate)break t;_=uo(_),E=uo(E)}_=null}else _=null;x!==null&&ow(f,m,x,_,!1),C!==null&&T!==null&&ow(f,T,C,_,!0)}}e:{if(m=d?Eo(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var L=K2;else if(Jx(m))if(C1)L=J2;else{L=Y2;var j=Q2}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=X2);if(L&&(L=L(t,d))){S1(f,L,n,h);break e}j&&j(t,m,d),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Pm(m,"number",m.value)}switch(j=d?Eo(d):window,t){case"focusin":(Jx(j)||j.contentEditable==="true")&&(_o=j,Wm=d,vl=null);break;case"focusout":vl=Wm=_o=null;break;case"mousedown":qm=!0;break;case"contextmenu":case"mouseup":case"dragend":qm=!1,rw(f,n,h);break;case"selectionchange":if(tk)break;case"keydown":case"keyup":rw(f,n,h)}var b;if(Ig)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else wo?N1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(E1&&n.locale!=="ko"&&(wo||y!=="onCompositionStart"?y==="onCompositionEnd"&&wo&&(b=b1()):(Cs=h,Tg="value"in Cs?Cs.value:Cs.textContent,wo=!0)),j=nd(d,y),0<j.length&&(y=new Kx(y,t,null,n,h),f.push({event:y,listeners:j}),b?y.data=b:(b=T1(n),b!==null&&(y.data=b)))),(b=z2?H2(t,n):W2(t,n))&&(d=nd(d,"onBeforeInput"),0<d.length&&(h=new Kx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=b))}M1(f,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rl(t,n),i!=null&&r.unshift(Fl(t,i,s)),i=Rl(t,e),i!=null&&r.push(Fl(t,i,s))),t=t.return}return r}function uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ow(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Rl(n,i),c!=null&&a.unshift(Fl(n,c,l))):s||(c=Rl(n,i),c!=null&&a.push(Fl(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var ik=/\r\n?/g,ok=/\u0000|\uFFFD/g;function aw(t){return(typeof t=="string"?t:""+t).replace(ik,`
`).replace(ok,"")}function tu(t,e,n){if(e=aw(e),aw(t)!==e&&n)throw Error(z(425))}function rd(){}var Gm=null,Km=null;function Qm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ym=typeof setTimeout=="function"?setTimeout:void 0,ak=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,lk=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(t){return lw.resolve(null).then(t).catch(ck)}:Ym;function ck(t){setTimeout(function(){throw t})}function Ff(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ll(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ll(e)}function Ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ma=Math.random().toString(36).slice(2),hr="__reactFiber$"+ma,Ul="__reactProps$"+ma,zr="__reactContainer$"+ma,Xm="__reactEvents$"+ma,uk="__reactListeners$"+ma,dk="__reactHandles$"+ma;function Ti(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cw(t);t!==null;){if(n=t[hr])return n;t=cw(t)}return e}t=n,n=t.parentNode}return null}function fc(t){return t=t[hr]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function rh(t){return t[Ul]||null}var Jm=[],No=-1;function ri(t){return{current:t}}function Qe(t){0>No||(t.current=Jm[No],Jm[No]=null,No--)}function He(t,e){No++,Jm[No]=t.current,t.current=e}var qs={},Wt=ri(qs),fn=ri(!1),Oi=qs;function Wo(t,e){var n=t.type.contextTypes;if(!n)return qs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function sd(){Qe(fn),Qe(Wt)}function uw(t,e,n){if(Wt.current!==qs)throw Error(z(168));He(Wt,e),He(fn,n)}function F1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,QA(t)||"Unknown",s));return et({},n,r)}function id(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qs,Oi=Wt.current,He(Wt,t),He(fn,fn.current),!0}function dw(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=F1(t,e,Oi),r.__reactInternalMemoizedMergedChildContext=t,Qe(fn),Qe(Wt),He(Wt,t)):Qe(fn),He(fn,n)}var Pr=null,sh=!1,Uf=!1;function U1(t){Pr===null?Pr=[t]:Pr.push(t)}function hk(t){sh=!0,U1(t)}function si(){if(!Uf&&Pr!==null){Uf=!0;var t=0,e=Me;try{var n=Pr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,sh=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),d1(_g,si),s}finally{Me=e,Uf=!1}}return null}var To=[],So=0,od=null,ad=0,Rn=[],Pn=0,Mi=null,Lr=1,Or="";function _i(t,e){To[So++]=ad,To[So++]=od,od=t,ad=e}function B1(t,e,n){Rn[Pn++]=Lr,Rn[Pn++]=Or,Rn[Pn++]=Mi,Mi=t;var r=Lr;t=Or;var s=32-Jn(r)-1;r&=~(1<<s),n+=1;var i=32-Jn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Lr=1<<32-Jn(e)+s|n<<s|r,Or=i+t}else Lr=1<<i|n<<s|r,Or=t}function Ag(t){t.return!==null&&(_i(t,1),B1(t,1,0))}function kg(t){for(;t===od;)od=To[--So],To[So]=null,ad=To[--So],To[So]=null;for(;t===Mi;)Mi=Rn[--Pn],Rn[Pn]=null,Or=Rn[--Pn],Rn[Pn]=null,Lr=Rn[--Pn],Rn[Pn]=null}var Tn=null,bn=null,Ye=!1,Qn=null;function $1(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,bn=Ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mi!==null?{id:Lr,overflow:Or}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,bn=null,!0):!1;default:return!1}}function Zm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ep(t){if(Ye){var e=bn;if(e){var n=e;if(!hw(t,e)){if(Zm(t))throw Error(z(418));e=Ls(n.nextSibling);var r=Tn;e&&hw(t,e)?$1(r,n):(t.flags=t.flags&-4097|2,Ye=!1,Tn=t)}}else{if(Zm(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ye=!1,Tn=t}}}function fw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function nu(t){if(t!==Tn)return!1;if(!Ye)return fw(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qm(t.type,t.memoizedProps)),e&&(e=bn)){if(Zm(t))throw z1(),Error(z(418));for(;e;)$1(t,e),e=Ls(e.nextSibling)}if(fw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=Ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Tn?Ls(t.stateNode.nextSibling):null;return!0}function z1(){for(var t=bn;t;)t=Ls(t.nextSibling)}function qo(){bn=Tn=null,Ye=!1}function Rg(t){Qn===null?Qn=[t]:Qn.push(t)}var fk=ts.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function ru(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mw(t){var e=t._init;return e(t._payload)}function H1(t){function e(E,w){if(t){var S=E.deletions;S===null?(E.deletions=[w],E.flags|=16):S.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=Fs(E,w),E.index=0,E.sibling=null,E}function i(E,w,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<w?(E.flags|=2,w):S):(E.flags|=2,w)):(E.flags|=1048576,w)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,S,D){return w===null||w.tag!==6?(w=Gf(S,E.mode,D),w.return=E,w):(w=s(w,S),w.return=E,w)}function c(E,w,S,D){var L=S.type;return L===xo?h(E,w,S.props.children,D,S.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vs&&mw(L)===w.type)?(D=s(w,S.props),D.ref=Xa(E,w,S),D.return=E,D):(D=Lu(S.type,S.key,S.props,null,E.mode,D),D.ref=Xa(E,w,S),D.return=E,D)}function d(E,w,S,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Kf(S,E.mode,D),w.return=E,w):(w=s(w,S.children||[]),w.return=E,w)}function h(E,w,S,D,L){return w===null||w.tag!==7?(w=Ri(S,E.mode,D,L),w.return=E,w):(w=s(w,S),w.return=E,w)}function f(E,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Gf(""+w,E.mode,S),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qc:return S=Lu(w.type,w.key,w.props,null,E.mode,S),S.ref=Xa(E,null,w),S.return=E,S;case vo:return w=Kf(w,E.mode,S),w.return=E,w;case vs:var D=w._init;return f(E,D(w._payload),S)}if(sl(w)||qa(w))return w=Ri(w,E.mode,S,null),w.return=E,w;ru(E,w)}return null}function m(E,w,S,D){var L=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(E,w,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qc:return S.key===L?c(E,w,S,D):null;case vo:return S.key===L?d(E,w,S,D):null;case vs:return L=S._init,m(E,w,L(S._payload),D)}if(sl(S)||qa(S))return L!==null?null:h(E,w,S,D,null);ru(E,S)}return null}function x(E,w,S,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(S)||null,l(w,E,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case qc:return E=E.get(D.key===null?S:D.key)||null,c(w,E,D,L);case vo:return E=E.get(D.key===null?S:D.key)||null,d(w,E,D,L);case vs:var j=D._init;return x(E,w,S,j(D._payload),L)}if(sl(D)||qa(D))return E=E.get(S)||null,h(w,E,D,L,null);ru(w,D)}return null}function C(E,w,S,D){for(var L=null,j=null,b=w,y=w=0,A=null;b!==null&&y<S.length;y++){b.index>y?(A=b,b=null):A=b.sibling;var N=m(E,b,S[y],D);if(N===null){b===null&&(b=A);break}t&&b&&N.alternate===null&&e(E,b),w=i(N,w,y),j===null?L=N:j.sibling=N,j=N,b=A}if(y===S.length)return n(E,b),Ye&&_i(E,y),L;if(b===null){for(;y<S.length;y++)b=f(E,S[y],D),b!==null&&(w=i(b,w,y),j===null?L=b:j.sibling=b,j=b);return Ye&&_i(E,y),L}for(b=r(E,b);y<S.length;y++)A=x(b,E,y,S[y],D),A!==null&&(t&&A.alternate!==null&&b.delete(A.key===null?y:A.key),w=i(A,w,y),j===null?L=A:j.sibling=A,j=A);return t&&b.forEach(function(R){return e(E,R)}),Ye&&_i(E,y),L}function _(E,w,S,D){var L=qa(S);if(typeof L!="function")throw Error(z(150));if(S=L.call(S),S==null)throw Error(z(151));for(var j=L=null,b=w,y=w=0,A=null,N=S.next();b!==null&&!N.done;y++,N=S.next()){b.index>y?(A=b,b=null):A=b.sibling;var R=m(E,b,N.value,D);if(R===null){b===null&&(b=A);break}t&&b&&R.alternate===null&&e(E,b),w=i(R,w,y),j===null?L=R:j.sibling=R,j=R,b=A}if(N.done)return n(E,b),Ye&&_i(E,y),L;if(b===null){for(;!N.done;y++,N=S.next())N=f(E,N.value,D),N!==null&&(w=i(N,w,y),j===null?L=N:j.sibling=N,j=N);return Ye&&_i(E,y),L}for(b=r(E,b);!N.done;y++,N=S.next())N=x(b,E,y,N.value,D),N!==null&&(t&&N.alternate!==null&&b.delete(N.key===null?y:N.key),w=i(N,w,y),j===null?L=N:j.sibling=N,j=N);return t&&b.forEach(function(I){return e(E,I)}),Ye&&_i(E,y),L}function T(E,w,S,D){if(typeof S=="object"&&S!==null&&S.type===xo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case qc:e:{for(var L=S.key,j=w;j!==null;){if(j.key===L){if(L=S.type,L===xo){if(j.tag===7){n(E,j.sibling),w=s(j,S.props.children),w.return=E,E=w;break e}}else if(j.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vs&&mw(L)===j.type){n(E,j.sibling),w=s(j,S.props),w.ref=Xa(E,j,S),w.return=E,E=w;break e}n(E,j);break}else e(E,j);j=j.sibling}S.type===xo?(w=Ri(S.props.children,E.mode,D,S.key),w.return=E,E=w):(D=Lu(S.type,S.key,S.props,null,E.mode,D),D.ref=Xa(E,w,S),D.return=E,E=D)}return a(E);case vo:e:{for(j=S.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(E,w.sibling),w=s(w,S.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Kf(S,E.mode,D),w.return=E,E=w}return a(E);case vs:return j=S._init,T(E,w,j(S._payload),D)}if(sl(S))return C(E,w,S,D);if(qa(S))return _(E,w,S,D);ru(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,S),w.return=E,E=w):(n(E,w),w=Gf(S,E.mode,D),w.return=E,E=w),a(E)):n(E,w)}return T}var Go=H1(!0),W1=H1(!1),ld=ri(null),cd=null,Co=null,Pg=null;function Dg(){Pg=Co=cd=null}function Lg(t){var e=ld.current;Qe(ld),t._currentValue=e}function tp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Do(t,e){cd=t,Pg=Co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Pg!==t)if(t={context:t,memoizedValue:e,next:null},Co===null){if(cd===null)throw Error(z(308));Co=t,cd.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return e}var Si=null;function Og(t){Si===null?Si=[t]:Si.push(t)}function q1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Og(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hr(t,r)}function Hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xs=!1;function Mg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ur(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hr(t,n)}return s=r.interleaved,s===null?(e.next=e,Og(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hr(t,n)}function ju(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bg(t,n)}}function pw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ud(t,e,n,r){var s=t.updateQueue;xs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,_=l;switch(m=e,x=n,_.tag){case 1:if(C=_.payload,typeof C=="function"){f=C.call(x,f,m);break e}f=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=_.payload,m=typeof C=="function"?C.call(x,f,m):C,m==null)break e;f=et({},f,m);break e;case 2:xs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=x,c=f):h=h.next=x,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Fi|=a,t.lanes=a,t.memoizedState=f}}function gw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var mc={},yr=ri(mc),Bl=ri(mc),$l=ri(mc);function Ci(t){if(t===mc)throw Error(z(174));return t}function Vg(t,e){switch(He($l,e),He(Bl,t),He(yr,mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lm(e,t)}Qe(yr),He(yr,e)}function Ko(){Qe(yr),Qe(Bl),Qe($l)}function K1(t){Ci($l.current);var e=Ci(yr.current),n=Lm(e,t.type);e!==n&&(He(Bl,t),He(yr,n))}function Fg(t){Bl.current===t&&(Qe(yr),Qe(Bl))}var Je=ri(0);function dd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bf=[];function Ug(){for(var t=0;t<Bf.length;t++)Bf[t]._workInProgressVersionPrimary=null;Bf.length=0}var Au=ts.ReactCurrentDispatcher,$f=ts.ReactCurrentBatchConfig,Vi=0,Ze=null,xt=null,Tt=null,hd=!1,xl=!1,zl=0,mk=0;function Ot(){throw Error(z(321))}function Bg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tr(t[n],e[n]))return!1;return!0}function $g(t,e,n,r,s,i){if(Vi=i,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Au.current=t===null||t.memoizedState===null?vk:xk,t=n(r,s),xl){i=0;do{if(xl=!1,zl=0,25<=i)throw Error(z(301));i+=1,Tt=xt=null,e.updateQueue=null,Au.current=wk,t=n(r,s)}while(xl)}if(Au.current=fd,e=xt!==null&&xt.next!==null,Vi=0,Tt=xt=Ze=null,hd=!1,e)throw Error(z(300));return t}function zg(){var t=zl!==0;return zl=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ze.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Fn(){if(xt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Tt===null?Ze.memoizedState:Tt.next;if(e!==null)Tt=e,xt=t;else{if(t===null)throw Error(z(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Tt===null?Ze.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Hl(t,e){return typeof e=="function"?e(t):e}function zf(t){var e=Fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=xt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Vi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Ze.lanes|=h,Fi|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,tr(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ze.lanes|=i,Fi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hf(t){var e=Fn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);tr(i,e.memoizedState)||(hn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q1(){}function Y1(t,e){var n=Ze,r=Fn(),s=e(),i=!tr(r.memoizedState,s);if(i&&(r.memoizedState=s,hn=!0),r=r.queue,Hg(Z1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,J1.bind(null,n,r,s,e),void 0,null),St===null)throw Error(z(349));Vi&30||X1(n,e,s)}return s}function X1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J1(t,e,n,r){e.value=n,e.getSnapshot=r,eE(e)&&tE(t)}function Z1(t,e,n){return n(function(){eE(e)&&tE(t)})}function eE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tr(t,n)}catch{return!0}}function tE(t){var e=Hr(t,1);e!==null&&Zn(e,t,1,-1)}function yw(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:t},e.queue=t,t=t.dispatch=yk.bind(null,Ze,t),[e.memoizedState,t]}function Wl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nE(){return Fn().memoizedState}function ku(t,e,n,r){var s=ur();Ze.flags|=t,s.memoizedState=Wl(1|e,n,void 0,r===void 0?null:r)}function ih(t,e,n,r){var s=Fn();r=r===void 0?null:r;var i=void 0;if(xt!==null){var a=xt.memoizedState;if(i=a.destroy,r!==null&&Bg(r,a.deps)){s.memoizedState=Wl(e,n,i,r);return}}Ze.flags|=t,s.memoizedState=Wl(1|e,n,i,r)}function vw(t,e){return ku(8390656,8,t,e)}function Hg(t,e){return ih(2048,8,t,e)}function rE(t,e){return ih(4,2,t,e)}function sE(t,e){return ih(4,4,t,e)}function iE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oE(t,e,n){return n=n!=null?n.concat([t]):null,ih(4,4,iE.bind(null,e,t),n)}function Wg(){}function aE(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lE(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cE(t,e,n){return Vi&21?(tr(n,e)||(n=m1(),Ze.lanes|=n,Fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function pk(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=$f.transition;$f.transition={};try{t(!1),e()}finally{Me=n,$f.transition=r}}function uE(){return Fn().memoizedState}function gk(t,e,n){var r=Vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dE(t))hE(e,n);else if(n=q1(t,e,n,r),n!==null){var s=Zt();Zn(n,t,r,s),fE(n,e,r)}}function yk(t,e,n){var r=Vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dE(t))hE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,tr(l,a)){var c=e.interleaved;c===null?(s.next=s,Og(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=q1(t,e,s,r),n!==null&&(s=Zt(),Zn(n,t,r,s),fE(n,e,r))}}function dE(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function hE(t,e){xl=hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,bg(t,n)}}var fd={readContext:Vn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},vk={readContext:Vn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:vw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ku(4194308,4,iE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ku(4194308,4,t,e)},useInsertionEffect:function(t,e){return ku(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gk.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:yw,useDebugValue:Wg,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=yw(!1),e=t[0];return t=pk.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,s=ur();if(Ye){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),St===null)throw Error(z(349));Vi&30||X1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vw(Z1.bind(null,r,i,t),[t]),r.flags|=2048,Wl(9,J1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ur(),e=St.identifierPrefix;if(Ye){var n=Or,r=Lr;n=(r&~(1<<32-Jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xk={readContext:Vn,useCallback:aE,useContext:Vn,useEffect:Hg,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:zf,useRef:nE,useState:function(){return zf(Hl)},useDebugValue:Wg,useDeferredValue:function(t){var e=Fn();return cE(e,xt.memoizedState,t)},useTransition:function(){var t=zf(Hl)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:Y1,useId:uE,unstable_isNewReconciler:!1},wk={readContext:Vn,useCallback:aE,useContext:Vn,useEffect:Hg,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:Hf,useRef:nE,useState:function(){return Hf(Hl)},useDebugValue:Wg,useDeferredValue:function(t){var e=Fn();return xt===null?e.memoizedState=t:cE(e,xt.memoizedState,t)},useTransition:function(){var t=Hf(Hl)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:Y1,useId:uE,unstable_isNewReconciler:!1};function Gn(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function np(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oh={isMounted:function(t){return(t=t._reactInternals)?eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Vs(t),i=Ur(r,s);i.payload=e,n!=null&&(i.callback=n),e=Os(t,i,s),e!==null&&(Zn(e,t,s,r),ju(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Vs(t),i=Ur(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Os(t,i,s),e!==null&&(Zn(e,t,s,r),ju(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=Vs(t),s=Ur(n,r);s.tag=2,e!=null&&(s.callback=e),e=Os(t,s,r),e!==null&&(Zn(e,t,r,n),ju(e,t,r))}};function xw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(s,i):!0}function mE(t,e,n){var r=!1,s=qs,i=e.contextType;return typeof i=="object"&&i!==null?i=Vn(i):(s=mn(e)?Oi:Wt.current,r=e.contextTypes,i=(r=r!=null)?Wo(t,s):qs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ww(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&oh.enqueueReplaceState(e,e.state,null)}function rp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Mg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vn(i):(i=mn(e)?Oi:Wt.current,s.context=Wo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(np(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&oh.enqueueReplaceState(s,s.state,null),ud(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Qo(t,e){try{var n="",r=e;do n+=KA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _k=typeof WeakMap=="function"?WeakMap:Map;function pE(t,e,n){n=Ur(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pd||(pd=!0,mp=r),sp(t,e)},n}function gE(t,e,n){n=Ur(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sp(t,e),typeof r!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function _w(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _k;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Lk.bind(null,t,e,n),e.then(t,t))}function bw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ew(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ur(-1,1),e.tag=2,Os(n,e,1))),n.lanes|=1),t)}var bk=ts.ReactCurrentOwner,hn=!1;function Yt(t,e,n,r){e.child=t===null?W1(e,null,n,r):Go(e,t.child,n,r)}function Nw(t,e,n,r,s){n=n.render;var i=e.ref;return Do(e,s),r=$g(t,e,n,r,i,s),n=zg(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(Ye&&n&&Ag(e),e.flags|=1,Yt(t,e,r,s),e.child)}function Tw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Zg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yE(t,e,i,r,s)):(t=Lu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(a,r)&&t.ref===e.ref)return Wr(t,e,s)}return e.flags|=1,t=Fs(i,r),t.ref=e.ref,t.return=e,e.child=t}function yE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ml(i,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,Wr(t,e,s)}return ip(t,e,n,r,s)}function vE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(jo,xn),xn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(jo,xn),xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He(jo,xn),xn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,He(jo,xn),xn|=r;return Yt(t,e,s,n),e.child}function xE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ip(t,e,n,r,s){var i=mn(n)?Oi:Wt.current;return i=Wo(e,i),Do(e,s),n=$g(t,e,n,r,i,s),r=zg(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(Ye&&r&&Ag(e),e.flags|=1,Yt(t,e,n,s),e.child)}function Sw(t,e,n,r,s){if(mn(n)){var i=!0;id(e)}else i=!1;if(Do(e,s),e.stateNode===null)Ru(t,e),mE(e,n,r),rp(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vn(d):(d=mn(n)?Oi:Wt.current,d=Wo(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&ww(e,a,r,d),xs=!1;var m=e.memoizedState;a.state=m,ud(e,r,a,s),c=e.memoizedState,l!==r||m!==c||fn.current||xs?(typeof h=="function"&&(np(e,n,h,r),c=e.memoizedState),(l=xs||xw(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,G1(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Gn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vn(c):(c=mn(n)?Oi:Wt.current,c=Wo(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&ww(e,a,r,c),xs=!1,m=e.memoizedState,a.state=m,ud(e,r,a,s);var C=e.memoizedState;l!==f||m!==C||fn.current||xs?(typeof x=="function"&&(np(e,n,x,r),C=e.memoizedState),(d=xs||xw(e,n,d,r,m,C,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return op(t,e,n,r,i,s)}function op(t,e,n,r,s,i){xE(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&dw(e,n,!1),Wr(t,e,i);r=e.stateNode,bk.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Go(e,t.child,null,i),e.child=Go(e,null,l,i)):Yt(t,e,l,i),e.memoizedState=r.state,s&&dw(e,n,!0),e.child}function wE(t){var e=t.stateNode;e.pendingContext?uw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uw(t,e.context,!1),Vg(t,e.containerInfo)}function Cw(t,e,n,r,s){return qo(),Rg(s),e.flags|=256,Yt(t,e,n,r),e.child}var ap={dehydrated:null,treeContext:null,retryLane:0};function lp(t){return{baseLanes:t,cachePool:null,transitions:null}}function _E(t,e,n){var r=e.pendingProps,s=Je.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(Je,s&1),t===null)return ep(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ch(a,r,0,null),t=Ri(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=lp(n),e.memoizedState=ap,t):qg(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ek(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fs(l,i):(i=Ri(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?lp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=ap,r}return i=t.child,t=i.sibling,r=Fs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qg(t,e){return e=ch({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,n,r){return r!==null&&Rg(r),Go(e,t.child,null,n),t=qg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ek(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Wf(Error(z(422))),su(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ch({mode:"visible",children:r.children},s,0,null),i=Ri(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Go(e,t.child,null,a),e.child.memoizedState=lp(a),e.memoizedState=ap,i);if(!(e.mode&1))return su(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Wf(i,r,void 0),su(t,e,a,r)}if(l=(a&t.childLanes)!==0,hn||l){if(r=St,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hr(t,s),Zn(r,t,s,-1))}return Jg(),r=Wf(Error(z(421))),su(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ok.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bn=Ls(s.nextSibling),Tn=e,Ye=!0,Qn=null,t!==null&&(Rn[Pn++]=Lr,Rn[Pn++]=Or,Rn[Pn++]=Mi,Lr=t.id,Or=t.overflow,Mi=e),e=qg(e,r.children),e.flags|=4096,e)}function Iw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),tp(t.return,e,n)}function qf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iw(t,n,e);else if(t.tag===19)Iw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&dd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),qf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&dd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}qf(e,!0,n,null,i);break;case"together":qf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nk(t,e,n){switch(e.tag){case 3:wE(e),qo();break;case 5:K1(e);break;case 1:mn(e.type)&&id(e);break;case 4:Vg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;He(ld,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?_E(t,e,n):(He(Je,Je.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);He(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,vE(t,e,n)}return Wr(t,e,n)}var EE,cp,NE,TE;EE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cp=function(){};NE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ci(yr.current);var i=null;switch(n){case"input":s=km(t,s),r=km(t,r),i=[];break;case"select":s=et({},s,{value:void 0}),r=et({},r,{value:void 0}),i=[];break;case"textarea":s=Dm(t,s),r=Dm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rd)}Om(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Al.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Al.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ge("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};TE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ja(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Tk(t,e,n){var r=e.pendingProps;switch(kg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return mn(e.type)&&sd(),Mt(e),null;case 3:return r=e.stateNode,Ko(),Qe(fn),Qe(Wt),Ug(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(yp(Qn),Qn=null))),cp(t,e),Mt(e),null;case 5:Fg(e);var s=Ci($l.current);if(n=e.type,t!==null&&e.stateNode!=null)NE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Mt(e),null}if(t=Ci(yr.current),nu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hr]=e,r[Ul]=i,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(s=0;s<ol.length;s++)Ge(ol[s],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Mx(r,i),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",r);break;case"textarea":Fx(r,i),Ge("invalid",r)}Om(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&tu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&tu(r.textContent,l,t),s=["children",""+l]):Al.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Gc(r),Vx(r,i,!0);break;case"textarea":Gc(r),Ux(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[hr]=e,t[Ul]=r,EE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Mm(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),s=r;break;case"iframe":case"object":case"embed":Ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<ol.length;s++)Ge(ol[s],t);s=r;break;case"source":Ge("error",t),s=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=r;break;case"details":Ge("toggle",t),s=r;break;case"input":Mx(t,r),s=km(t,r),Ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=et({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":Fx(t,r),s=Dm(t,r),Ge("invalid",t);break;default:s=r}Om(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?n1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&kl(t,c):typeof c=="number"&&kl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Al.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",t):c!=null&&gg(t,i,c,a))}switch(n){case"input":Gc(t),Vx(t,r,!1);break;case"textarea":Gc(t),Ux(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ws(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ao(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ao(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)TE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ci($l.current),Ci(yr.current),nu(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(i=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:tu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Qe(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&bn!==null&&e.mode&1&&!(e.flags&128))z1(),qo(),e.flags|=98560,i=!1;else if(i=nu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[hr]=e}else qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Qn!==null&&(yp(Qn),Qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?wt===0&&(wt=3):Jg())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Ko(),cp(t,e),t===null&&Vl(e.stateNode.containerInfo),Mt(e),null;case 10:return Lg(e.type._context),Mt(e),null;case 17:return mn(e.type)&&sd(),Mt(e),null;case 19:if(Qe(Je),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ja(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=dd(t),a!==null){for(e.flags|=128,Ja(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Je,Je.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>Yo&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304)}else{if(!r)if(t=dd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ja(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ye)return Mt(e),null}else 2*ct()-i.renderingStartTime>Yo&&n!==1073741824&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,n=Je.current,He(Je,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return Xg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function Sk(t,e){switch(kg(e),e.tag){case 1:return mn(e.type)&&sd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ko(),Qe(fn),Qe(Wt),Ug(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fg(e),null;case 13:if(Qe(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(Je),null;case 4:return Ko(),null;case 10:return Lg(e.type._context),null;case 22:case 23:return Xg(),null;case 24:return null;default:return null}}var iu=!1,Ut=!1,Ck=typeof WeakSet=="function"?WeakSet:Set,re=null;function Io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function up(t,e,n){try{n()}catch(r){rt(t,e,r)}}var jw=!1;function Ik(t,e){if(Gm=ed,t=A1(),jg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)m=f,f=x;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=a),m===i&&++h===r&&(c=a),(x=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Km={focusedElem:t,selectionRange:n},ed=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var _=C.memoizedProps,T=C.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?_:Gn(e.type,_),T);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){rt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return C=jw,jw=!1,C}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&up(e,n,i)}s=s.next}while(s!==r)}}function ah(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SE(t){var e=t.alternate;e!==null&&(t.alternate=null,SE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[Ul],delete e[Xm],delete e[uk],delete e[dk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CE(t){return t.tag===5||t.tag===3||t.tag===4}function Aw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rd));else if(r!==4&&(t=t.child,t!==null))for(hp(t,e,n),t=t.sibling;t!==null;)hp(t,e,n),t=t.sibling}function fp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fp(t,e,n),t=t.sibling;t!==null;)fp(t,e,n),t=t.sibling}var It=null,Kn=!1;function ds(t,e,n){for(n=n.child;n!==null;)IE(t,e,n),n=n.sibling}function IE(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(Zd,n)}catch{}switch(n.tag){case 5:Ut||Io(n,e);case 6:var r=It,s=Kn;It=null,ds(t,e,n),It=r,Kn=s,It!==null&&(Kn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Kn?(t=It,n=n.stateNode,t.nodeType===8?Ff(t.parentNode,n):t.nodeType===1&&Ff(t,n),Ll(t)):Ff(It,n.stateNode));break;case 4:r=It,s=Kn,It=n.stateNode.containerInfo,Kn=!0,ds(t,e,n),It=r,Kn=s;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&up(n,e,a),s=s.next}while(s!==r)}ds(t,e,n);break;case 1:if(!Ut&&(Io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){rt(n,e,l)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,ds(t,e,n),Ut=r):ds(t,e,n);break;default:ds(t,e,n)}}function kw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ck),e.forEach(function(r){var s=Mk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,Kn=!1;break e;case 3:It=l.stateNode.containerInfo,Kn=!0;break e;case 4:It=l.stateNode.containerInfo,Kn=!0;break e}l=l.return}if(It===null)throw Error(z(160));IE(i,a,s),It=null,Kn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){rt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jE(e,t),e=e.sibling}function jE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),cr(t),r&4){try{wl(3,t,t.return),ah(3,t)}catch(_){rt(t,t.return,_)}try{wl(5,t,t.return)}catch(_){rt(t,t.return,_)}}break;case 1:Wn(e,t),cr(t),r&512&&n!==null&&Io(n,n.return);break;case 5:if(Wn(e,t),cr(t),r&512&&n!==null&&Io(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(_){rt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Xb(s,i),Mm(l,a);var d=Mm(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?n1(s,f):h==="dangerouslySetInnerHTML"?e1(s,f):h==="children"?kl(s,f):gg(s,h,f,d)}switch(l){case"input":Rm(s,i);break;case"textarea":Jb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Ao(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ao(s,!!i.multiple,i.defaultValue,!0):Ao(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ul]=i}catch(_){rt(t,t.return,_)}}break;case 6:if(Wn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){rt(t,t.return,_)}}break;case 3:if(Wn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(e.containerInfo)}catch(_){rt(t,t.return,_)}break;case 4:Wn(e,t),cr(t);break;case 13:Wn(e,t),cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qg=ct())),r&4&&kw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||h,Wn(e,t),Ut=d):Wn(e,t),cr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(re=t,h=t.child;h!==null;){for(f=re=h;re!==null;){switch(m=re,x=m.child,m.tag){case 0:case 11:case 14:case 15:wl(4,m,m.return);break;case 1:Io(m,m.return);var C=m.stateNode;if(typeof C.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(_){rt(r,n,_)}}break;case 5:Io(m,m.return);break;case 22:if(m.memoizedState!==null){Pw(f);continue}}x!==null?(x.return=m,re=x):Pw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=t1("display",a))}catch(_){rt(t,t.return,_)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(_){rt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wn(e,t),cr(t),r&4&&kw(t);break;case 21:break;default:Wn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var i=Aw(t);fp(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Aw(t);hp(t,l,a);break;default:throw Error(z(161))}}catch(c){rt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jk(t,e,n){re=t,AE(t)}function AE(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||iu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=iu;var d=Ut;if(iu=a,(Ut=c)&&!d)for(re=s;re!==null;)a=re,c=a.child,a.tag===22&&a.memoizedState!==null?Dw(s):c!==null?(c.return=a,re=c):Dw(s);for(;i!==null;)re=i,AE(i),i=i.sibling;re=s,iu=l,Ut=d}Rw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):Rw(t)}}function Rw(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||ah(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Gn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gw(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gw(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ll(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ut||e.flags&512&&dp(e)}catch(m){rt(e,e.return,m)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Pw(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Dw(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ah(4,e)}catch(c){rt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){rt(e,s,c)}}var i=e.return;try{dp(e)}catch(c){rt(e,i,c)}break;case 5:var a=e.return;try{dp(e)}catch(c){rt(e,a,c)}}}catch(c){rt(e,e.return,c)}if(e===t){re=null;break}var l=e.sibling;if(l!==null){l.return=e.return,re=l;break}re=e.return}}var Ak=Math.ceil,md=ts.ReactCurrentDispatcher,Gg=ts.ReactCurrentOwner,On=ts.ReactCurrentBatchConfig,je=0,St=null,pt=null,Pt=0,xn=0,jo=ri(0),wt=0,ql=null,Fi=0,lh=0,Kg=0,_l=null,ln=null,Qg=0,Yo=1/0,Rr=null,pd=!1,mp=null,Ms=null,ou=!1,Is=null,gd=0,bl=0,pp=null,Pu=-1,Du=0;function Zt(){return je&6?ct():Pu!==-1?Pu:Pu=ct()}function Vs(t){return t.mode&1?je&2&&Pt!==0?Pt&-Pt:fk.transition!==null?(Du===0&&(Du=m1()),Du):(t=Me,t!==0||(t=window.event,t=t===void 0?16:_1(t.type)),t):1}function Zn(t,e,n,r){if(50<bl)throw bl=0,pp=null,Error(z(185));dc(t,n,r),(!(je&2)||t!==St)&&(t===St&&(!(je&2)&&(lh|=n),wt===4&&_s(t,Pt)),pn(t,r),n===1&&je===0&&!(e.mode&1)&&(Yo=ct()+500,sh&&si()))}function pn(t,e){var n=t.callbackNode;f2(t,e);var r=Zu(t,t===St?Pt:0);if(r===0)n!==null&&zx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zx(n),e===1)t.tag===0?hk(Lw.bind(null,t)):U1(Lw.bind(null,t)),lk(function(){!(je&6)&&si()}),n=null;else{switch(p1(r)){case 1:n=_g;break;case 4:n=h1;break;case 16:n=Ju;break;case 536870912:n=f1;break;default:n=Ju}n=VE(n,kE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kE(t,e){if(Pu=-1,Du=0,je&6)throw Error(z(327));var n=t.callbackNode;if(Lo()&&t.callbackNode!==n)return null;var r=Zu(t,t===St?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yd(t,r);else{e=r;var s=je;je|=2;var i=PE();(St!==t||Pt!==e)&&(Rr=null,Yo=ct()+500,ki(t,e));do try{Pk();break}catch(l){RE(t,l)}while(!0);Dg(),md.current=i,je=s,pt!==null?e=0:(St=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=$m(t),s!==0&&(r=s,e=gp(t,s))),e===1)throw n=ql,ki(t,0),_s(t,r),pn(t,ct()),n;if(e===6)_s(t,r);else{if(s=t.current.alternate,!(r&30)&&!kk(s)&&(e=yd(t,r),e===2&&(i=$m(t),i!==0&&(r=i,e=gp(t,i))),e===1))throw n=ql,ki(t,0),_s(t,r),pn(t,ct()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:bi(t,ln,Rr);break;case 3:if(_s(t,r),(r&130023424)===r&&(e=Qg+500-ct(),10<e)){if(Zu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ym(bi.bind(null,t,ln,Rr),e);break}bi(t,ln,Rr);break;case 4:if(_s(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Jn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ak(r/1960))-r,10<r){t.timeoutHandle=Ym(bi.bind(null,t,ln,Rr),r);break}bi(t,ln,Rr);break;case 5:bi(t,ln,Rr);break;default:throw Error(z(329))}}}return pn(t,ct()),t.callbackNode===n?kE.bind(null,t):null}function gp(t,e){var n=_l;return t.current.memoizedState.isDehydrated&&(ki(t,e).flags|=256),t=yd(t,e),t!==2&&(e=ln,ln=n,e!==null&&yp(e)),t}function yp(t){ln===null?ln=t:ln.push.apply(ln,t)}function kk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!tr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _s(t,e){for(e&=~Kg,e&=~lh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jn(e),r=1<<n;t[n]=-1,e&=~r}}function Lw(t){if(je&6)throw Error(z(327));Lo();var e=Zu(t,0);if(!(e&1))return pn(t,ct()),null;var n=yd(t,e);if(t.tag!==0&&n===2){var r=$m(t);r!==0&&(e=r,n=gp(t,r))}if(n===1)throw n=ql,ki(t,0),_s(t,e),pn(t,ct()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bi(t,ln,Rr),pn(t,ct()),null}function Yg(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Yo=ct()+500,sh&&si())}}function Ui(t){Is!==null&&Is.tag===0&&!(je&6)&&Lo();var e=je;je|=1;var n=On.transition,r=Me;try{if(On.transition=null,Me=1,t)return t()}finally{Me=r,On.transition=n,je=e,!(je&6)&&si()}}function Xg(){xn=jo.current,Qe(jo)}function ki(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ak(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(kg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sd();break;case 3:Ko(),Qe(fn),Qe(Wt),Ug();break;case 5:Fg(r);break;case 4:Ko();break;case 13:Qe(Je);break;case 19:Qe(Je);break;case 10:Lg(r.type._context);break;case 22:case 23:Xg()}n=n.return}if(St=t,pt=t=Fs(t.current,null),Pt=xn=e,wt=0,ql=null,Kg=lh=Fi=0,ln=_l=null,Si!==null){for(e=0;e<Si.length;e++)if(n=Si[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Si=null}return t}function RE(t,e){do{var n=pt;try{if(Dg(),Au.current=fd,hd){for(var r=Ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hd=!1}if(Vi=0,Tt=xt=Ze=null,xl=!1,zl=0,Gg.current=null,n===null||n.return===null){wt=1,ql=e,pt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=bw(a);if(x!==null){x.flags&=-257,Ew(x,a,l,i,e),x.mode&1&&_w(i,d,e),e=x,c=d;var C=e.updateQueue;if(C===null){var _=new Set;_.add(c),e.updateQueue=_}else C.add(c);break e}else{if(!(e&1)){_w(i,d,e),Jg();break e}c=Error(z(426))}}else if(Ye&&l.mode&1){var T=bw(a);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Ew(T,a,l,i,e),Rg(Qo(c,l));break e}}i=c=Qo(c,l),wt!==4&&(wt=2),_l===null?_l=[i]:_l.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=pE(i,c,e);pw(i,E);break e;case 1:l=c;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ms===null||!Ms.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=gE(i,l,e);pw(i,D);break e}}i=i.return}while(i!==null)}LE(n)}catch(L){e=L,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function PE(){var t=md.current;return md.current=fd,t===null?fd:t}function Jg(){(wt===0||wt===3||wt===2)&&(wt=4),St===null||!(Fi&268435455)&&!(lh&268435455)||_s(St,Pt)}function yd(t,e){var n=je;je|=2;var r=PE();(St!==t||Pt!==e)&&(Rr=null,ki(t,e));do try{Rk();break}catch(s){RE(t,s)}while(!0);if(Dg(),je=n,md.current=r,pt!==null)throw Error(z(261));return St=null,Pt=0,wt}function Rk(){for(;pt!==null;)DE(pt)}function Pk(){for(;pt!==null&&!s2();)DE(pt)}function DE(t){var e=ME(t.alternate,t,xn);t.memoizedProps=t.pendingProps,e===null?LE(t):pt=e,Gg.current=null}function LE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Sk(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,pt=null;return}}else if(n=Tk(n,e,xn),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);wt===0&&(wt=5)}function bi(t,e,n){var r=Me,s=On.transition;try{On.transition=null,Me=1,Dk(t,e,n,r)}finally{On.transition=s,Me=r}return null}function Dk(t,e,n,r){do Lo();while(Is!==null);if(je&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(m2(t,i),t===St&&(pt=St=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ou||(ou=!0,VE(Ju,function(){return Lo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var a=Me;Me=1;var l=je;je|=4,Gg.current=null,Ik(t,n),jE(n,t),ek(Km),ed=!!Gm,Km=Gm=null,t.current=n,jk(n),i2(),je=l,Me=a,On.transition=i}else t.current=n;if(ou&&(ou=!1,Is=t,gd=s),i=t.pendingLanes,i===0&&(Ms=null),l2(n.stateNode),pn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pd)throw pd=!1,t=mp,mp=null,t;return gd&1&&t.tag!==0&&Lo(),i=t.pendingLanes,i&1?t===pp?bl++:(bl=0,pp=t):bl=0,si(),null}function Lo(){if(Is!==null){var t=p1(gd),e=On.transition,n=Me;try{if(On.transition=null,Me=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,gd=0,je&6)throw Error(z(331));var s=je;for(je|=4,re=t.current;re!==null;){var i=re,a=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(re=d;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:wl(8,h,i)}var f=h.child;if(f!==null)f.return=h,re=f;else for(;re!==null;){h=re;var m=h.sibling,x=h.return;if(SE(h),h===d){re=null;break}if(m!==null){m.return=x,re=m;break}re=x}}}var C=i.alternate;if(C!==null){var _=C.child;if(_!==null){C.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}re=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,re=a;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,re=E;break e}re=i.return}}var w=t.current;for(re=w;re!==null;){a=re;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,re=S;else e:for(a=w;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ah(9,l)}}catch(L){rt(l,l.return,L)}if(l===a){re=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,re=D;break e}re=l.return}}if(je=s,si(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(Zd,t)}catch{}r=!0}return r}finally{Me=n,On.transition=e}}return!1}function Ow(t,e,n){e=Qo(n,e),e=pE(t,e,1),t=Os(t,e,1),e=Zt(),t!==null&&(dc(t,1,e),pn(t,e))}function rt(t,e,n){if(t.tag===3)Ow(t,t,n);else for(;e!==null;){if(e.tag===3){Ow(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ms===null||!Ms.has(r))){t=Qo(n,t),t=gE(e,t,1),e=Os(e,t,1),t=Zt(),e!==null&&(dc(e,1,t),pn(e,t));break}}e=e.return}}function Lk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,St===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>ct()-Qg?ki(t,0):Kg|=n),pn(t,e)}function OE(t,e){e===0&&(t.mode&1?(e=Yc,Yc<<=1,!(Yc&130023424)&&(Yc=4194304)):e=1);var n=Zt();t=Hr(t,e),t!==null&&(dc(t,e,n),pn(t,n))}function Ok(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OE(t,n)}function Mk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),OE(t,n)}var ME;ME=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,Nk(t,e,n);hn=!!(t.flags&131072)}else hn=!1,Ye&&e.flags&1048576&&B1(e,ad,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var s=Wo(e,Wt.current);Do(e,n),s=$g(null,e,r,t,s,n);var i=zg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,id(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Mg(e),s.updater=oh,e.stateNode=s,s._reactInternals=e,rp(e,r,t,n),e=op(null,e,r,!0,i,n)):(e.tag=0,Ye&&i&&Ag(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Fk(r),t=Gn(r,t),s){case 0:e=ip(null,e,r,t,n);break e;case 1:e=Sw(null,e,r,t,n);break e;case 11:e=Nw(null,e,r,t,n);break e;case 14:e=Tw(null,e,r,Gn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),ip(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),Sw(t,e,r,s,n);case 3:e:{if(wE(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,G1(t,e),ud(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Qo(Error(z(423)),e),e=Cw(t,e,r,n,s);break e}else if(r!==s){s=Qo(Error(z(424)),e),e=Cw(t,e,r,n,s);break e}else for(bn=Ls(e.stateNode.containerInfo.firstChild),Tn=e,Ye=!0,Qn=null,n=W1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qo(),r===s){e=Wr(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return K1(e),t===null&&ep(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Qm(r,s)?a=null:i!==null&&Qm(r,i)&&(e.flags|=32),xE(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&ep(e),null;case 13:return _E(t,e,n);case 4:return Vg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Go(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),Nw(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,He(ld,r._currentValue),r._currentValue=a,i!==null)if(tr(i.value,a)){if(i.children===s.children&&!fn.current){e=Wr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ur(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),tp(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),tp(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Do(e,n),s=Vn(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=Gn(r,e.pendingProps),s=Gn(r.type,s),Tw(t,e,r,s,n);case 15:return yE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Gn(r,s),Ru(t,e),e.tag=1,mn(r)?(t=!0,id(e)):t=!1,Do(e,n),mE(e,r,s),rp(e,r,s,n),op(null,e,r,!0,t,n);case 19:return bE(t,e,n);case 22:return vE(t,e,n)}throw Error(z(156,e.tag))};function VE(t,e){return d1(t,e)}function Vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new Vk(t,e,n,r)}function Zg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fk(t){if(typeof t=="function")return Zg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vg)return 11;if(t===xg)return 14}return 2}function Fs(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Zg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xo:return Ri(n.children,s,i,e);case yg:a=8,s|=8;break;case Cm:return t=Ln(12,n,e,s|2),t.elementType=Cm,t.lanes=i,t;case Im:return t=Ln(13,n,e,s),t.elementType=Im,t.lanes=i,t;case jm:return t=Ln(19,n,e,s),t.elementType=jm,t.lanes=i,t;case Kb:return ch(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qb:a=10;break e;case Gb:a=9;break e;case vg:a=11;break e;case xg:a=14;break e;case vs:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Ln(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ri(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function ch(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=Kb,t.lanes=n,t.stateNode={isHidden:!1},t}function Gf(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function Kf(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=If(0),this.expirationTimes=If(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=If(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ey(t,e,n,r,s,i,a,l,c){return t=new Uk(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mg(i),t}function Bk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FE(t){if(!t)return qs;t=t._reactInternals;e:{if(eo(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(mn(n))return F1(t,n,e)}return e}function UE(t,e,n,r,s,i,a,l,c){return t=ey(n,r,!0,t,s,i,a,l,c),t.context=FE(null),n=t.current,r=Zt(),s=Vs(n),i=Ur(r,s),i.callback=e??null,Os(n,i,s),t.current.lanes=s,dc(t,s,r),pn(t,r),t}function uh(t,e,n,r){var s=e.current,i=Zt(),a=Vs(s);return n=FE(n),e.context===null?e.context=n:e.pendingContext=n,e=Ur(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Os(s,e,a),t!==null&&(Zn(t,s,a,i),ju(t,s,a)),a}function vd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ty(t,e){Mw(t,e),(t=t.alternate)&&Mw(t,e)}function $k(){return null}var BE=typeof reportError=="function"?reportError:function(t){console.error(t)};function ny(t){this._internalRoot=t}dh.prototype.render=ny.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));uh(t,e,null,null)};dh.prototype.unmount=ny.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ui(function(){uh(null,t,null,null)}),e[zr]=null}};function dh(t){this._internalRoot=t}dh.prototype.unstable_scheduleHydration=function(t){if(t){var e=v1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ws.length&&e!==0&&e<ws[n].priority;n++);ws.splice(n,0,t),n===0&&w1(t)}};function ry(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function zk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=vd(a);i.call(d)}}var a=UE(e,r,t,0,null,!1,!1,"",Vw);return t._reactRootContainer=a,t[zr]=a.current,Vl(t.nodeType===8?t.parentNode:t),Ui(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=vd(c);l.call(d)}}var c=ey(t,0,!1,null,null,!1,!1,"",Vw);return t._reactRootContainer=c,t[zr]=c.current,Vl(t.nodeType===8?t.parentNode:t),Ui(function(){uh(e,c,n,r)}),c}function fh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=vd(a);l.call(c)}}uh(e,a,t,s)}else a=zk(n,e,t,s,r);return vd(a)}g1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(bg(e,n|1),pn(e,ct()),!(je&6)&&(Yo=ct()+500,si()))}break;case 13:Ui(function(){var r=Hr(t,1);if(r!==null){var s=Zt();Zn(r,t,1,s)}}),ty(t,1)}};Eg=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var n=Zt();Zn(e,t,134217728,n)}ty(t,134217728)}};y1=function(t){if(t.tag===13){var e=Vs(t),n=Hr(t,e);if(n!==null){var r=Zt();Zn(n,t,e,r)}ty(t,e)}};v1=function(){return Me};x1=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Fm=function(t,e,n){switch(e){case"input":if(Rm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=rh(r);if(!s)throw Error(z(90));Yb(r),Rm(r,s)}}}break;case"textarea":Jb(t,n);break;case"select":e=n.value,e!=null&&Ao(t,!!n.multiple,e,!1)}};i1=Yg;o1=Ui;var Hk={usingClientEntryPoint:!1,Events:[fc,Eo,rh,r1,s1,Yg]},Za={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wk={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c1(t),t===null?null:t.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||$k,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{Zd=au.inject(Wk),gr=au}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hk;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ry(e))throw Error(z(200));return Bk(t,e,null,n)};An.createRoot=function(t,e){if(!ry(t))throw Error(z(299));var n=!1,r="",s=BE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ey(t,1,!1,null,null,n,!1,r,s),t[zr]=e.current,Vl(t.nodeType===8?t.parentNode:t),new ny(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=c1(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return Ui(t)};An.hydrate=function(t,e,n){if(!hh(e))throw Error(z(200));return fh(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!ry(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=BE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=UE(e,null,t,1,n??null,s,!1,i,a),t[zr]=e.current,Vl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new dh(e)};An.render=function(t,e,n){if(!hh(e))throw Error(z(200));return fh(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!hh(t))throw Error(z(40));return t._reactRootContainer?(Ui(function(){fh(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};An.unstable_batchedUpdates=Yg;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hh(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return fh(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(t){console.error(t)}}$E(),$b.exports=An;var pa=$b.exports;const qk=Ab(pa);var zE,Fw=pa;zE=Fw.createRoot,Fw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gl.apply(this,arguments)}var js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(js||(js={}));const Uw="popstate";function Gk(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:l="",hash:c=""}=to(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),vp("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:xd(i))}function r(s,i){mh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Qk(e,n,r,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kk(){return Math.random().toString(36).substr(2,8)}function Bw(t,e){return{usr:t.state,key:t.key,idx:e}}function vp(t,e,n,r){return n===void 0&&(n=null),Gl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?to(e):e,{state:n,key:e&&e.key||r||Kk()})}function xd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function to(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Qk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=js.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Gl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=js.Pop;let T=h(),E=T==null?null:T-d;d=T,c&&c({action:l,location:_.location,delta:E})}function m(T,E){l=js.Push;let w=vp(_.location,T,E);n&&n(w,T),d=h()+1;let S=Bw(w,d),D=_.createHref(w);try{a.pushState(S,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(D)}i&&c&&c({action:l,location:_.location,delta:1})}function x(T,E){l=js.Replace;let w=vp(_.location,T,E);n&&n(w,T),d=h();let S=Bw(w,d),D=_.createHref(w);a.replaceState(S,"",D),i&&c&&c({action:l,location:_.location,delta:0})}function C(T){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof T=="string"?T:xd(T);return w=w.replace(/ $/,"%20"),ut(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let _={get action(){return l},get location(){return t(s,a)},listen(T){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Uw,f),c=T,()=>{s.removeEventListener(Uw,f),c=null}},createHref(T){return e(s,T)},createURL:C,encodeLocation(T){let E=C(T);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:x,go(T){return a.go(T)}};return _}var $w;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($w||($w={}));function Yk(t,e,n){return n===void 0&&(n="/"),Xk(t,e,n)}function Xk(t,e,n,r){let s=typeof e=="string"?to(e):e,i=sy(s.pathname||"/",n);if(i==null)return null;let a=HE(t);Jk(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=uR(i);l=aR(a[c],d)}return l}function HE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ut(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Us([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(ut(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),HE(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:iR(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of WE(i.path))s(i,a,c)}),e}function WE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=WE(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Jk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zk=/^:[\w-]+$/,eR=3,tR=2,nR=1,rR=10,sR=-2,zw=t=>t==="*";function iR(t,e){let n=t.split("/"),r=n.length;return n.some(zw)&&(r+=sR),e&&(r+=tR),n.filter(s=>!zw(s)).reduce((s,i)=>s+(Zk.test(i)?eR:i===""?nR:rR),r)}function oR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function aR(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=lR({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Us([i,f.pathname]),pathnameBase:pR(Us([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Us([i,f.pathnameBase]))}return a}function lR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:m,isOptional:x}=h;if(m==="*"){let _=l[f]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const C=l[f];return x&&!C?d[m]=void 0:d[m]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function cR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function uR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function sy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const dR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hR=t=>dR.test(t);function fR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?to(t):t,i;if(n)if(hR(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),mh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=Hw(n.substring(1),"/"):i=Hw(n,e)}else i=e;return{pathname:i,search:gR(r),hash:yR(s)}}function Hw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iy(t,e){let n=mR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function oy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=to(t):(s=Gl({},t),ut(!s.pathname||!s.pathname.includes("?"),Qf("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),Qf("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),Qf("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=fR(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Us=t=>t.join("/").replace(/\/\/+/g,"/"),pR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qE=["post","put","patch","delete"];new Set(qE);const xR=["get",...qE];new Set(xR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kl.apply(this,arguments)}const ay=g.createContext(null),wR=g.createContext(null),ii=g.createContext(null),ph=g.createContext(null),ns=g.createContext({outlet:null,matches:[],isDataRoute:!1}),GE=g.createContext(null);function _R(t,e){let{relative:n}=e===void 0?{}:e;ga()||ut(!1);let{basename:r,navigator:s}=g.useContext(ii),{hash:i,pathname:a,search:l}=QE(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Us([r,a])),s.createHref({pathname:c,search:l,hash:i})}function ga(){return g.useContext(ph)!=null}function no(){return ga()||ut(!1),g.useContext(ph).location}function KE(t){g.useContext(ii).static||g.useLayoutEffect(t)}function $n(){let{isDataRoute:t}=g.useContext(ns);return t?LR():bR()}function bR(){ga()||ut(!1);let t=g.useContext(ay),{basename:e,future:n,navigator:r}=g.useContext(ii),{matches:s}=g.useContext(ns),{pathname:i}=no(),a=JSON.stringify(iy(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return KE(()=>{l.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=oy(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Us([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}function ER(){let{matches:t}=g.useContext(ns),e=t[t.length-1];return e?e.params:{}}function QE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(ii),{matches:s}=g.useContext(ns),{pathname:i}=no(),a=JSON.stringify(iy(s,r.v7_relativeSplatPath));return g.useMemo(()=>oy(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function NR(t,e){return TR(t,e)}function TR(t,e,n,r){ga()||ut(!1);let{navigator:s}=g.useContext(ii),{matches:i}=g.useContext(ns),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=no(),h;if(e){var f;let T=typeof e=="string"?to(e):e;c==="/"||(f=T.pathname)!=null&&f.startsWith(c)||ut(!1),h=T}else h=d;let m=h.pathname||"/",x=m;if(c!=="/"){let T=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=Yk(t,{pathname:x}),_=AR(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Us([c,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:Us([c,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&_?g.createElement(ph.Provider,{value:{location:Kl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:js.Pop}},_):_}function SR(){let t=DR(),e=vR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const CR=g.createElement(SR,null);class IR extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(ns.Provider,{value:this.props.routeContext},g.createElement(GE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jR(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(ay);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(ns.Provider,{value:e},r)}function AR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||ut(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:x}=n,C=f.route.loader&&m[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||C){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let x,C=!1,_=null,T=null;n&&(x=l&&f.route.id?l[f.route.id]:void 0,_=f.route.errorElement||CR,c&&(d<0&&m===0?(OR("route-fallback"),C=!0,T=null):d===m&&(C=!0,T=f.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,m+1)),w=()=>{let S;return x?S=_:C?S=T:f.route.Component?S=g.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,g.createElement(jR,{match:f,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?g.createElement(IR,{location:n.location,revalidation:n.revalidation,component:_,error:x,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var YE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YE||{}),XE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XE||{});function kR(t){let e=g.useContext(ay);return e||ut(!1),e}function RR(t){let e=g.useContext(wR);return e||ut(!1),e}function PR(t){let e=g.useContext(ns);return e||ut(!1),e}function JE(t){let e=PR(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function DR(){var t;let e=g.useContext(GE),n=RR(),r=JE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function LR(){let{router:t}=kR(YE.UseNavigateStable),e=JE(XE.UseNavigateStable),n=g.useRef(!1);return KE(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Kl({fromRouteId:e},i)))},[t,e])}const Ww={};function OR(t,e,n){Ww[t]||(Ww[t]=!0)}function MR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ly(t){let{to:e,replace:n,state:r,relative:s}=t;ga()||ut(!1);let{future:i,static:a}=g.useContext(ii),{matches:l}=g.useContext(ns),{pathname:c}=no(),d=$n(),h=oy(e,iy(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function on(t){ut(!1)}function VR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=js.Pop,navigator:i,static:a=!1,future:l}=t;ga()&&ut(!1);let c=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:a,future:Kl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=to(r));let{pathname:h="/",search:f="",hash:m="",state:x=null,key:C="default"}=r,_=g.useMemo(()=>{let T=sy(h,c);return T==null?null:{location:{pathname:T,search:f,hash:m,state:x,key:C},navigationType:s}},[c,h,f,m,x,C,s]);return _==null?null:g.createElement(ii.Provider,{value:d},g.createElement(ph.Provider,{children:n,value:_}))}function FR(t){let{children:e,location:n}=t;return NR(xp(e),n)}new Promise(()=>{});function xp(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,xp(r.props.children,i));return}r.type!==on&&ut(!1),!r.props.index||!r.props.children||ut(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=xp(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wp(){return wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wp.apply(this,arguments)}function UR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function BR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $R(t,e){return t.button===0&&(!e||e==="_self")&&!BR(t)}const zR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HR="6";try{window.__reactRouterVersion=HR}catch{}const WR="startTransition",qw=Jd[WR];function qR(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=Gk({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=g.useCallback(f=>{d&&qw?qw(()=>c(f)):c(f)},[c,d]);return g.useLayoutEffect(()=>a.listen(h),[a,h]),g.useEffect(()=>MR(r),[r]),g.createElement(VR,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const GR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=UR(e,zR),{basename:x}=g.useContext(ii),C,_=!1;if(typeof d=="string"&&KR.test(d)&&(C=d,GR))try{let S=new URL(window.location.href),D=d.startsWith("//")?new URL(S.protocol+d):new URL(d),L=sy(D.pathname,x);D.origin===S.origin&&L!=null?d=L+D.search+D.hash:_=!0}catch{}let T=_R(d,{relative:s}),E=QR(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function w(S){r&&r(S),S.defaultPrevented||E(S)}return g.createElement("a",wp({},m,{href:C||T,onClick:_||i?r:w,ref:n,target:c}))});var Gw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gw||(Gw={}));var Kw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kw||(Kw={}));function QR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=$n(),d=no(),h=QE(t,{relative:a});return g.useCallback(f=>{if($R(f,n)){f.preventDefault();let m=r!==void 0?r:xd(d)===xd(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}const YR=()=>{};var Qw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},eN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,x=d&63;c||(x=64,a||(m=64)),r.push(n[h],n[f],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new JR;const m=i<<2|l>>4;if(r.push(m),d!==64){const x=l<<4&240|d>>2;if(r.push(x),f!==64){const C=d<<6&192|f;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZR=function(t){const e=ZE(t);return eN.encodeByteArray(e,!0)},wd=function(t){return ZR(t).replace(/\./g,"")},tN=function(t){try{return eN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=()=>eP().__FIREBASE_DEFAULTS__,nP=()=>{if(typeof process>"u"||typeof Qw>"u")return;const t=Qw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tN(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return YR()||tP()||nP()||rP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nN=t=>{var e,n;return(n=(e=gh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rN=t=>{const e=nN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sN=()=>{var t;return(t=gh())==null?void 0:t.config},iN=t=>{var e;return(e=gh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[wd(JSON.stringify(n)),wd(JSON.stringify(a)),""].join(".")}const El={};function iP(){const t={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?t.emulator.push(e):t.prod.push(e);return t}function oP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yw=!1;function uy(t,e){if(typeof window>"u"||typeof document>"u"||!oi(window.location.host)||El[t]===e||El[t]||Yw)return;El[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=iP().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Yw=!0,a()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=oP(r),x=n("text"),C=document.getElementById(x)||document.createElement("span"),_=n("learnmore"),T=document.getElementById(_)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),h(T,_);const D=d();c(w,E),S.append(w,C,T,D),document.body.appendChild(S)}i?(C.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function lP(){var e;const t=(e=gh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dP(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hP(){return!lP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lN(){try{return typeof indexedDB=="object"}catch{return!1}}function cN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function fP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="FirebaseError";class zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mP,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?pP(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new zn(s,l,r)}}function pP(t,e){return t.replace(gP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gP=/\{\$([^}]+)}/g;function yP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Xw(i)&&Xw(a)){if(!qr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Xw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vP(t,e){const n=new xP(t,e);return n.subscribe.bind(n)}class xP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Yf),s.error===void 0&&(s.error=Yf),s.complete===void 0&&(s.complete=Yf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=1e3,bP=2,EP=4*60*60*1e3,NP=.5;function Jw(t,e=_P,n=bP){const r=e*Math.pow(n,t),s=Math.round(NP*r*(Math.random()-.5)*2);return Math.min(EP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}class Un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CP(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ei){return this.instances.has(e)}getOptions(e=Ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ei){return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SP(t){return t===Ei?void 0:t}function CP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const jP={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},AP=Ee.INFO,kP={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},RP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yh{constructor(e){this.name=e,this._logLevel=AP,this._logHandler=RP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const PP=(t,e)=>e.some(n=>t instanceof n);let Zw,e0;function DP(){return Zw||(Zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LP(){return e0||(e0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uN=new WeakMap,_p=new WeakMap,dN=new WeakMap,Xf=new WeakMap,dy=new WeakMap;function OP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Bs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uN.set(n,t)}).catch(()=>{}),dy.set(e,t),e}function MP(t){if(_p.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});_p.set(t,e)}let bp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _p.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VP(t){bp=t(bp)}function FP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jf(this),e,...n);return dN.set(r,e.sort?e.sort():[e]),Bs(r)}:LP().includes(t)?function(...e){return t.apply(Jf(this),e),Bs(uN.get(this))}:function(...e){return Bs(t.apply(Jf(this),e))}}function UP(t){return typeof t=="function"?FP(t):(t instanceof IDBTransaction&&MP(t),PP(t,DP())?new Proxy(t,bp):t)}function Bs(t){if(t instanceof IDBRequest)return OP(t);if(Xf.has(t))return Xf.get(t);const e=UP(t);return e!==t&&(Xf.set(t,e),dy.set(e,t)),e}const Jf=t=>dy.get(t);function hN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Bs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Bs(a.result),c.oldVersion,c.newVersion,Bs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const BP=["get","getKey","getAll","getAllKeys","count"],$P=["put","add","delete","clear"],Zf=new Map;function t0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zf.get(e))return Zf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$P.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BP.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Zf.set(e,i),i}VP(t=>({...t,get:(e,n,r)=>t0(e,n)||t.get(e,n,r),has:(e,n)=>!!t0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ep="@firebase/app",n0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new yh("@firebase/app"),WP="@firebase/app-compat",qP="@firebase/analytics-compat",GP="@firebase/analytics",KP="@firebase/app-check-compat",QP="@firebase/app-check",YP="@firebase/auth",XP="@firebase/auth-compat",JP="@firebase/database",ZP="@firebase/data-connect",e4="@firebase/database-compat",t4="@firebase/functions",n4="@firebase/functions-compat",r4="@firebase/installations",s4="@firebase/installations-compat",i4="@firebase/messaging",o4="@firebase/messaging-compat",a4="@firebase/performance",l4="@firebase/performance-compat",c4="@firebase/remote-config",u4="@firebase/remote-config-compat",d4="@firebase/storage",h4="@firebase/storage-compat",f4="@firebase/firestore",m4="@firebase/ai",p4="@firebase/firestore-compat",g4="firebase",y4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]",v4={[Ep]:"fire-core",[WP]:"fire-core-compat",[GP]:"fire-analytics",[qP]:"fire-analytics-compat",[QP]:"fire-app-check",[KP]:"fire-app-check-compat",[YP]:"fire-auth",[XP]:"fire-auth-compat",[JP]:"fire-rtdb",[ZP]:"fire-data-connect",[e4]:"fire-rtdb-compat",[t4]:"fire-fn",[n4]:"fire-fn-compat",[r4]:"fire-iid",[s4]:"fire-iid-compat",[i4]:"fire-fcm",[o4]:"fire-fcm-compat",[a4]:"fire-perf",[l4]:"fire-perf-compat",[c4]:"fire-rc",[u4]:"fire-rc-compat",[d4]:"fire-gcs",[h4]:"fire-gcs-compat",[f4]:"fire-fst",[p4]:"fire-fst-compat",[m4]:"fire-vertex","fire-js":"fire-js",[g4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,x4=new Map,Tp=new Map;function r0(t,e){try{t.container.addComponent(e)}catch(n){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nr(t){const e=t.name;if(Tp.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,t);for(const n of _d.values())r0(n,t);for(const n of x4.values())r0(n,t);return!0}function ai(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new ro("app","Firebase",w4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=y4;function fN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Np,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $s.create("bad-app-name",{appName:String(s)});if(n||(n=sN()),!n)throw $s.create("no-options");const i=_d.get(s);if(i){if(qr(n,i.options)&&qr(r,i.config))return i;throw $s.create("duplicate-app",{appName:s})}const a=new IP(s);for(const c of Tp.values())a.addComponent(c);const l=new _4(n,r,a);return _d.set(s,l),l}function vh(t=Np){const e=_d.get(t);if(!e&&t===Np&&sN())return fN();if(!e)throw $s.create("no-app",{appName:t});return e}function gn(t,e,n){let r=v4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(a.join(" "));return}nr(new Un(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="firebase-heartbeat-database",E4=1,Ql="firebase-heartbeat-store";let em=null;function mN(){return em||(em=hN(b4,E4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw $s.create("idb-open",{originalErrorMessage:t.message})})),em}async function N4(t){try{const n=(await mN()).transaction(Ql),r=await n.objectStore(Ql).get(pN(t));return await n.done,r}catch(e){if(e instanceof zn)Gr.warn(e.message);else{const n=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(n.message)}}}async function s0(t,e){try{const r=(await mN()).transaction(Ql,"readwrite");await r.objectStore(Ql).put(e,pN(t)),await r.done}catch(n){if(n instanceof zn)Gr.warn(n.message);else{const r=$s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gr.warn(r.message)}}}function pN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=1024,S4=30;class C4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=i0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>S4){const a=A4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=i0(),{heartbeatsToSend:r,unsentEntries:s}=I4(this._heartbeatsCache.heartbeats),i=wd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gr.warn(n),""}}}function i0(){return new Date().toISOString().substring(0,10)}function I4(t,e=T4){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),o0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),o0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class j4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lN()?cN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await N4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return s0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return s0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function o0(t){return wd(JSON.stringify({version:2,heartbeats:t})).length}function A4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){nr(new Un("platform-logger",e=>new zP(e),"PRIVATE")),nr(new Un("heartbeat",e=>new C4(e),"PRIVATE")),gn(Ep,n0,t),gn(Ep,n0,"esm2020"),gn("fire-js","")}k4("");function gN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R4=gN,yN=new ro("auth","Firebase",gN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new yh("@firebase/auth");function P4(t,...e){bd.logLevel<=Ee.WARN&&bd.warn(`Auth (${so}): ${t}`,...e)}function Ou(t,...e){bd.logLevel<=Ee.ERROR&&bd.error(`Auth (${so}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw fy(t,...e)}function er(t,...e){return fy(t,...e)}function hy(t,e,n){const r={...R4(),[e]:n};return new ro("auth","Firebase",r).create(e,{appName:t.name})}function Br(t){return hy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Bn(t,"argument-error"),hy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yN.create(t,...e)}function de(t,e,...n){if(!t)throw fy(e,...n)}function Mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ou(e),new Error(e)}function Kr(t,e){t||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function L4(){return a0()==="http:"||a0()==="https:"}function a0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L4()||aN()||"connection"in navigator)?navigator.onLine:!0}function M4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=aP()||uP()}get(){return O4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t,e){Kr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U4=new gc(3e4,6e4);function li(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function rs(t,e,n,r,s={}){return xN(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=pc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return cP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&oi(t.emulatorConfig.host)&&(d.credentials="include"),vN.fetch()(await wN(t,t.config.apiHost,n,l),d)})}async function xN(t,e,n){t._canInitEmulator=!1;const r={...V4,...e};try{const s=new $4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw lu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw lu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw lu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw lu(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw hy(t,h,d);Bn(t,h)}}catch(s){if(s instanceof zn)throw s;Bn(t,"network-request-failed",{message:String(s)})}}async function yc(t,e,n,r,s={}){const i=await rs(t,e,n,r,s);return"mfaPendingCredential"in i&&Bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wN(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?my(t.config,s):`${t.config.apiScheme}://${s}`;return F4.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function B4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(er(this.auth,"network-request-failed")),U4.get())})}}function lu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=er(t,e,r);return s.customData._tokenResponse=n,s}function l0(t){return t!==void 0&&t.enterprise!==void 0}class z4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H4(t,e){return rs(t,"GET","/v2/recaptchaConfig",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){return rs(t,"POST","/v1/accounts:delete",e)}async function Ed(t,e){return rs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q4(t,e=!1){const n=Be(t),r=await n.getIdToken(e),s=py(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Nl(tm(s.auth_time)),issuedAtTime:Nl(tm(s.iat)),expirationTime:Nl(tm(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function tm(t){return Number(t)*1e3}function py(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const s=tN(n);return s?JSON.parse(s):(Ou("Failed to decode base64 JWT payload"),null)}catch(s){return Ou("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function c0(t){const e=py(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zn&&G4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Xo(t,Ed(e,{idToken:n}));de(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?_N(s.providerUserInfo):[],a=Y4(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Q4(t){const e=Be(t);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function _N(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(t,e){const n=await xN(t,{},async()=>{const r=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await wN(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&oi(t.emulatorConfig.host)&&(c.credentials="include"),vN.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J4(t,e){return rs(t,"POST","/v2/accounts:revokeToken",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):c0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=c0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await X4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Oo;return r&&(de(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new K4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Cp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Xo(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q4(this,e)}reload(){return Q4(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await Xo(this,W4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:x,providerData:C,stsTokenManager:_}=n;de(f&&_,e,"internal-error");const T=Oo.fromJSON(this.name,_);de(typeof f=="string",e,"internal-error"),hs(r,e.name),hs(s,e.name),de(typeof m=="boolean",e,"internal-error"),de(typeof x=="boolean",e,"internal-error"),hs(i,e.name),hs(a,e.name),hs(l,e.name),hs(c,e.name),hs(d,e.name),hs(h,e.name);const E=new Yn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:x,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:T,createdAt:d,lastLoginAt:h});return C&&Array.isArray(C)&&(E.providerData=C.map(w=>({...w}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oo;s.updateFromServerResponse(n);const i=new Yn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Nd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];de(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?_N(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Oo;l.updateFromIdToken(r);const c=new Yn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Cp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Map;function Vr(t){Kr(t instanceof Function,"Expected a class definition");let e=u0.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,u0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bN.type="NONE";const d0=bN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t,e,n){return`firebase:${t}:${e}:${n}`}class Mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Mu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Mu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ed(this.auth,{idToken:e}).catch(()=>{});return n?Yn._fromGetAccountInfoResponse(this.auth,n,e):null}return Yn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mo(Vr(d0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Vr(d0);const a=Mu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await Ed(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Yn._fromGetAccountInfoResponse(e,m,h)}else f=Yn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Mo(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Mo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IN(e))return"Blackberry";if(jN(e))return"Webos";if(NN(e))return"Safari";if((e.includes("chrome/")||TN(e))&&!e.includes("edge/"))return"Chrome";if(CN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EN(t=qt()){return/firefox\//i.test(t)}function NN(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TN(t=qt()){return/crios\//i.test(t)}function SN(t=qt()){return/iemobile/i.test(t)}function CN(t=qt()){return/android/i.test(t)}function IN(t=qt()){return/blackberry/i.test(t)}function jN(t=qt()){return/webos/i.test(t)}function gy(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Z4(t=qt()){var e;return gy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function eD(){return dP()&&document.documentMode===10}function AN(t=qt()){return gy(t)||CN(t)||jN(t)||IN(t)||/windows phone/i.test(t)||SN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t,e=[]){let n;switch(t){case"Browser":n=h0(qt());break;case"Worker":n=`${h0(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${so}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e={}){return rs(t,"GET","/v2/passwordPolicy",li(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=6;class sD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new f0(this),this.idTokenSubscription=new f0(this),this.beforeStateQueue=new tD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Mo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ed(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(cn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(Br(this));const n=e?Be(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nD(this),n=new sD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ro("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vr(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Mo.create(this,[Vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&P4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ci(t){return Be(t)}class f0{constructor(e){this.auth=e,this.observer=null,this.addObserver=vP(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oD(t){xh=t}function RN(t){return xh.loadJS(t)}function aD(){return xh.recaptchaEnterpriseScript}function lD(){return xh.gapiScript}function cD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class uD{constructor(){this.enterprise=new dD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hD="recaptcha-enterprise",PN="NO_RECAPTCHA";class fD{constructor(e){this.type=hD,this.auth=ci(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{H4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new z4(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;l0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(PN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uD().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&l0(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=aD();c.length!==0&&(c+=l),RN(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function m0(t,e,n,r=!1,s=!1){const i=new fD(t);let a;if(s)a=PN;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ip(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await m0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await m0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t,e){const n=ai(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(qr(i,e??{}))return s;Bn(s,"already-initialized")}return n.initialize({options:e})}function pD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gD(t,e,n){const r=ci(t);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=DN(e),{host:a,port:l}=yD(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(qr(d,r.config.emulator)&&qr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,oi(a)?(cy(`${i}//${a}${c}`),uy("Auth",!0)):vD()}function DN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yD(t){const e=DN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:p0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:p0(a)}}}function p0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,n){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function xD(t,e){return rs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return yc(t,"POST","/v1/accounts:signInWithPassword",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e){return yc(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}async function bD(t,e){return yc(t,"POST","/v1/accounts:signInWithEmailLink",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends yy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Yl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,n,"signInWithPassword",wD);case"emailLink":return _D(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ip(e,r,"signUpPassword",xD);case"emailLink":return bD(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e){return yc(t,"POST","/v1/accounts:signInWithIdp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="http://localhost";class Bi extends yy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new Bi(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Vo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vo(e,n)}buildRequest(){const e={requestUri:ED,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TD(t){const e=al(ll(t)).link,n=e?al(ll(e)).deep_link_id:null,r=al(ll(t)).deep_link_id;return(r?al(ll(r)).link:null)||r||n||e||t}class vy{constructor(e){const n=al(ll(e)),r=n.apiKey??null,s=n.oobCode??null,i=ND(n.mode??null);de(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TD(e);try{return new vy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.providerId=ya.PROVIDER_ID}static credential(e,n){return Yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=vy.parseLink(n);return de(r,"argument-error"),Yl._fromEmailAndCode(e,r.code,r.tenantId)}}ya.PROVIDER_ID="password";ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends xy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends vc{constructor(){super("facebook.com")}static credential(e){return Bi._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Es.credential(n,r)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends vc{constructor(){super("github.com")}static credential(e){return Bi._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.GITHUB_SIGN_IN_METHOD="github.com";Dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends vc{constructor(){super("twitter.com")}static credential(e,n){return Bi._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e){return yc(t,"POST","/v1/accounts:signUp",li(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Yn._fromIdTokenResponse(e,r,s),a=g0(r);return new $i({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=g0(r);return new $i({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function g0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends zn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Td(e,n,r,s)}}function LN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(t,i,e,r):i})}async function CD(t,e,n=!1){const r=await Xo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $i._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e,n=!1){const{auth:r}=t;if(cn(r.app))return Promise.reject(Br(r));const s="reauthenticate";try{const i=await Xo(t,LN(r,s,e,t),n);de(i.idToken,r,"internal-error");const a=py(i.idToken);de(a,r,"internal-error");const{sub:l}=a;return de(t.uid===l,r,"user-mismatch"),$i._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e,n=!1){if(cn(t.app))return Promise.reject(Br(t));const r="signIn",s=await LN(t,r,e),i=await $i._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function jD(t,e){return ON(ci(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t){const e=ci(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AD(t,e,n){if(cn(t.app))return Promise.reject(Br(t));const r=ci(t),a=await Ip(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&MN(t),c}),l=await $i._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function kD(t,e,n){return cn(t.app)?Promise.reject(Br(t)):jD(Be(t),ya.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e){return rs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Be(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Xo(r,RD(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function PD(t,e,n,r){return Be(t).onIdTokenChanged(e,n,r)}function DD(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function LD(t,e,n,r){return Be(t).onAuthStateChanged(e,n,r)}function OD(t){return Be(t).signOut()}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=1e3,VD=10;class UN extends FN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);eD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UN.type="LOCAL";const FD=UN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN extends FN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BN.type="SESSION";const $N=BN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await UD(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=wy("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function $D(t){vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function zD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function WD(){return zN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebaseLocalStorageDb",qD=1,Cd="firebaseLocalStorage",WN="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _h(t,e){return t.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function GD(){const t=indexedDB.deleteDatabase(HN);return new xc(t).toPromise()}function jp(){const t=indexedDB.open(HN,qD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cd,{keyPath:WN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await GD(),e(await jp()))})})}async function y0(t,e,n){const r=_h(t,!0).put({[WN]:e,value:n});return new xc(r).toPromise()}async function KD(t,e){const n=_h(t,!1).get(e),r=await new xc(n).toPromise();return r===void 0?null:r.value}function v0(t,e){const n=_h(t,!0).delete(e);return new xc(n).toPromise()}const QD=800,YD=3;class qN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(WD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await zD(),!this.activeServiceWorker)return;this.sender=new BD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jp();return await y0(e,Sd,"1"),await v0(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>y0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>KD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>v0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=_h(s,!1).getAll();return new xc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qN.type="LOCAL";const XD=qN;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e){return e?Vr(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y extends yy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JD(t){return ON(t.auth,new _y(t),t.bypassAuthState)}function ZD(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),ID(n,new _y(t),t.bypassAuthState)}async function eL(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),CD(n,new _y(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JD;case"linkViaPopup":case"linkViaRedirect":return eL;case"reauthViaPopup":case"reauthViaRedirect":return ZD;default:Bn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new gc(2e3,1e4);async function nL(t,e,n){if(cn(t.app))return Promise.reject(er(t,"operation-not-supported-in-this-environment"));const r=ci(t);D4(t,e,xy);const s=GN(r,n);return new Ii(r,"signInViaPopup",e,s).executeNotNull()}class Ii extends KN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ii.currentPopupAction&&Ii.currentPopupAction.cancel(),Ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tL.get())};e()}}Ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="pendingRedirect",Vu=new Map;class sL extends KN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vu.get(this.auth._key());if(!e){try{const r=await iL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vu.set(this.auth._key(),e)}return this.bypassAuthState||Vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iL(t,e){const n=lL(e),r=aL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function oL(t,e){Vu.set(t._key(),e)}function aL(t){return Vr(t._redirectPersistence)}function lL(t){return Mu(rL,t.config.apiKey,t.name)}async function cL(t,e,n=!1){if(cn(t.app))return Promise.reject(Br(t));const r=ci(t),s=GN(r,e),a=await new sL(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=10*60*1e3;class dL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(er(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uL&&this.cachedEventUids.clear(),this.cachedEventUids.has(x0(e))}saveEventToCache(e){this.cachedEventUids.add(x0(e)),this.lastProcessedEventTime=Date.now()}}function x0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e={}){return rs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pL=/^https?/;async function gL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fL(t);for(const n of e)try{if(yL(n))return}catch{}Bn(t,"unauthorized-domain")}function yL(t){const e=Sp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!pL.test(n))return!1;if(mL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new gc(3e4,6e4);function w0(){const t=vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xL(t){return new Promise((e,n)=>{var s,i,a;function r(){w0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{w0(),n(er(t,"network-request-failed"))},timeout:vL.get()})}if((i=(s=vr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=vr().gapi)!=null&&a.load)r();else{const l=cD("iframefcb");return vr()[l]=()=>{gapi.load?r():n(er(t,"network-request-failed"))},RN(`${lD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Fu=null,e})}let Fu=null;function wL(t){return Fu=Fu||xL(t),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new gc(5e3,15e3),bL="__/auth/iframe",EL="emulator/auth/iframe",NL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SL(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?my(e,EL):`https://${t.config.authDomain}/${bL}`,r={apiKey:e.apiKey,appName:t.name,v:so},s=TL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${pc(r).slice(1)}`}async function CL(t){const e=await wL(t),n=vr().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:SL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=er(t,"network-request-failed"),l=vr().setTimeout(()=>{i(a)},_L.get());function c(){vr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jL=500,AL=600,kL="_blank",RL="http://localhost";class _0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PL(t,e,n,r=jL,s=AL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...IL,width:r.toString(),height:s.toString(),top:i,left:a},d=qt().toLowerCase();n&&(l=TN(d)?kL:n),EN(d)&&(e=e||RL,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[x,C])=>`${m}${x}=${C},`,"");if(Z4(d)&&l!=="_self")return DL(e||"",l),new _0(null);const f=window.open(e||"",l,h);de(f,t,"popup-blocked");try{f.focus()}catch{}return new _0(f)}function DL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="__/auth/handler",OL="emulator/auth/handler",ML=encodeURIComponent("fac");async function b0(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:so,eventId:s};if(e instanceof xy){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",yP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof vc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${ML}=${encodeURIComponent(c)}`:"";return`${VL(t)}?${pc(l).slice(1)}${d}`}function VL({config:t}){return t.emulator?my(t,OL):`https://${t.authDomain}/${LL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="webStorageSupport";class FL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$N,this._completeRedirectFn=cL,this._overrideRedirectResult=oL}async _openPopup(e,n,r,s){var a;Kr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await b0(e,n,r,Sp(),s);return PL(e,i,wy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await b0(e,n,r,Sp(),s);return $D(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CL(e),r=new dL(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nm,{type:nm},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[nm];i!==void 0&&n(!!i),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AN()||NN()||gy()}}const UL=FL;var E0="@firebase/auth",N0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zL(t){nr(new Un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;de(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kN(t)},d=new iD(r,s,i,c);return pD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nr(new Un("auth-internal",e=>{const n=ci(e.getProvider("auth").getImmediate());return(r=>new BL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(E0,N0,$L(t)),gn(E0,N0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=5*60,WL=iN("authIdTokenMaxAge")||HL;let T0=null;const qL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>WL)return;const s=n==null?void 0:n.token;T0!==s&&(T0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GL(t=vh()){const e=ai(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mD(t,{popupRedirectResolver:UL,persistence:[XD,FD,$N]}),r=iN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=qL(i.toString());DD(n,a,()=>a(n.currentUser)),PD(n,l=>a(l))}}const s=nN("auth");return s&&gD(n,`http://${s}`),n}function KL(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}oD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=er("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",KL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zL("Browser");var QL="firebase",YL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(QL,YL,"app");const YN="@firebase/installations",by="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=1e4,JN=`w:${by}`,ZN="FIS_v2",XL="https://firebaseinstallations.googleapis.com/v1",JL=60*60*1e3,ZL="installations",eO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zi=new ro(ZL,eO,tO);function eT(t){return t instanceof zn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT({projectId:t}){return`${XL}/projects/${t}/installations`}function nT(t){return{token:t.token,requestStatus:2,expiresIn:rO(t.expiresIn),creationTime:Date.now()}}async function rT(t,e){const r=(await e.json()).error;return zi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function sT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nO(t,{refreshToken:e}){const n=sT(t);return n.append("Authorization",sO(e)),n}async function iT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rO(t){return Number(t.replace("s","000"))}function sO(t){return`${ZN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=tT(t),s=sT(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:ZN,appId:t.appId,sdkVersion:JN},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await iT(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:nT(d.authToken)}}else throw await rT("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=/^[cdef][\w-]{21}$/,Ap="";function lO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=cO(t);return aO.test(n)?n:Ap}catch{return Ap}}function cO(t){return oO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Map;function lT(t,e){const n=bh(t);cT(n,e),uO(n,e)}function cT(t,e){const n=aT.get(t);if(n)for(const r of n)r(e)}function uO(t,e){const n=dO();n&&n.postMessage({key:t,fid:e}),hO()}let ji=null;function dO(){return!ji&&"BroadcastChannel"in self&&(ji=new BroadcastChannel("[Firebase] FID Change"),ji.onmessage=t=>{cT(t.data.key,t.data.fid)}),ji}function hO(){aT.size===0&&ji&&(ji.close(),ji=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="firebase-installations-database",mO=1,Hi="firebase-installations-store";let rm=null;function Ey(){return rm||(rm=hN(fO,mO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hi)}}})),rm}async function Id(t,e){const n=bh(t),s=(await Ey()).transaction(Hi,"readwrite"),i=s.objectStore(Hi),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&lT(t,e.fid),e}async function uT(t){const e=bh(t),r=(await Ey()).transaction(Hi,"readwrite");await r.objectStore(Hi).delete(e),await r.done}async function Eh(t,e){const n=bh(t),s=(await Ey()).transaction(Hi,"readwrite"),i=s.objectStore(Hi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&lT(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ny(t){let e;const n=await Eh(t.appConfig,r=>{const s=pO(r),i=gO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Ap?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function pO(t){const e=t||{fid:lO(),registrationStatus:0};return dT(e)}function gO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(zi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vO(t)}:{installationEntry:e}}async function yO(t,e){try{const n=await iO(t,e);return Id(t.appConfig,n)}catch(n){throw eT(n)&&n.customData.serverCode===409?await uT(t.appConfig):await Id(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vO(t){let e=await S0(t.appConfig);for(;e.registrationStatus===1;)await oT(100),e=await S0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ny(t);return r||n}return e}function S0(t){return Eh(t,e=>{if(!e)throw zi.create("installation-not-found");return dT(e)})}function dT(t){return xO(t)?{fid:t.fid,registrationStatus:0}:t}function xO(t){return t.registrationStatus===1&&t.registrationTime+XN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO({appConfig:t,heartbeatServiceProvider:e},n){const r=_O(t,n),s=nO(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:JN,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await iT(()=>fetch(r,l));if(c.ok){const d=await c.json();return nT(d)}else throw await rT("Generate Auth Token",c)}function _O(t,{fid:e}){return`${tT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ty(t,e=!1){let n;const r=await Eh(t.appConfig,i=>{if(!hT(i))throw zi.create("not-registered");const a=i.authToken;if(!e&&NO(a))return i;if(a.requestStatus===1)return n=bO(t,e),i;{if(!navigator.onLine)throw zi.create("app-offline");const l=SO(i);return n=EO(t,l),l}});return n?await n:r.authToken}async function bO(t,e){let n=await C0(t.appConfig);for(;n.authToken.requestStatus===1;)await oT(100),n=await C0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Ty(t,e):r}function C0(t){return Eh(t,e=>{if(!hT(e))throw zi.create("not-registered");const n=e.authToken;return CO(n)?{...e,authToken:{requestStatus:0}}:e})}async function EO(t,e){try{const n=await wO(t,e),r={...e,authToken:n};return await Id(t.appConfig,r),n}catch(n){if(eT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await uT(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Id(t.appConfig,r)}throw n}}function hT(t){return t!==void 0&&t.registrationStatus===2}function NO(t){return t.requestStatus===2&&!TO(t)}function TO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JL}function SO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function CO(t){return t.requestStatus===1&&t.requestTime+XN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ny(e);return r?r.catch(console.error):Ty(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e=!1){const n=t;return await AO(n),(await Ty(n,e)).token}async function AO(t){const{registrationPromise:e}=await Ny(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){if(!t||!t.options)throw sm("App Configuration");if(!t.name)throw sm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw sm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function sm(t){return zi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="installations",RO="installations-internal",PO=t=>{const e=t.getProvider("app").getImmediate(),n=kO(e),r=ai(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DO=t=>{const e=t.getProvider("app").getImmediate(),n=ai(e,fT).getImmediate();return{getId:()=>IO(n),getToken:s=>jO(n,s)}};function LO(){nr(new Un(fT,PO,"PUBLIC")),nr(new Un(RO,DO,"PRIVATE"))}LO();gn(YN,by);gn(YN,by,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="analytics",OO="firebase_id",MO="origin",VO=60*1e3,FO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Sy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new yh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new ro("analytics","Analytics",UO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){if(!t.startsWith(Sy)){const e=Sn.create("invalid-gtag-resource",{gtagURL:t});return en.warn(e.message),""}return t}function mT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $O(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zO(t,e){const n=$O("firebase-js-sdk-policy",{createScriptURL:BO}),r=document.createElement("script"),s=`${Sy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WO(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await mT(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){en.error(l)}t("config",s,i)}async function qO(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await mT(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){en.error(i)}}function GO(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await qO(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await WO(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){en.error(l)}}return s}function KO(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=GO(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Sy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=30,XO=1e3;class JO{constructor(e={},n=XO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const pT=new JO;function ZO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eM(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:ZO(n)},s=FO.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function tM(t,e=pT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Sn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Sn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new sM;return setTimeout(async()=>{l.abort()},VO),gT({appId:r,apiKey:s,measurementId:i},a,l,e)}async function gT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=pT){var l;const{appId:i,measurementId:a}=t;try{await nM(r,e)}catch(c){if(a)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await eM(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!rM(d)){if(s.deleteThrottleMetadata(i),a)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?Jw(n,s.intervalMillis,YO):Jw(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),en.debug(`Calling attemptFetch again in ${h} millis`),gT(t,f,r,s)}}function nM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rM(t){if(!(t instanceof zn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function oM(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(){if(lN())try{await cN()}catch(t){return en.warn(Sn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return en.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lM(t,e,n,r,s,i,a){const l=tM(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>en.error(m)),e.push(l);const c=aM().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);QO(i)||zO(i,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[MO]="firebase",f.update=!0,h!=null&&(f[OO]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.app=e}_delete(){return delete Fo[this.app.options.appId],Promise.resolve()}}let Fo={},I0=[];const j0={};let im="dataLayer",uM="gtag",A0,Cy,k0=!1;function dM(){const t=[];if(aN()&&t.push("This is a browser extension environment."),fP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Sn.create("invalid-analytics-context",{errorInfo:e});en.warn(n.message)}}function hM(t,e,n){dM();const r=t.options.appId;if(!r)throw Sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(Fo[r]!=null)throw Sn.create("already-exists",{id:r});if(!k0){HO(im);const{wrappedGtag:i,gtagCore:a}=KO(Fo,I0,j0,im,uM);Cy=i,A0=a,k0=!0}return Fo[r]=lM(t,I0,j0,e,A0,im,n),new cM(t)}function fM(t=vh()){t=Be(t);const e=ai(t,jd);return e.isInitialized()?e.getImmediate():mM(t)}function mM(t,e={}){const n=ai(t,jd);if(n.isInitialized()){const s=n.getImmediate();if(qr(e,n.getOptions()))return s;throw Sn.create("already-initialized")}return n.initialize({options:e})}function pM(t,e,n){t=Be(t),oM(Cy,Fo[t.app.options.appId],e,n).catch(r=>en.error(r))}function gM(t,e,n,r){t=Be(t),iM(Cy,Fo[t.app.options.appId],e,n,r).catch(s=>en.error(s))}const R0="@firebase/analytics",P0="0.10.19";function yM(){nr(new Un(jd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return hM(r,s,n)},"PUBLIC")),nr(new Un("analytics-internal",t,"PRIVATE")),gn(R0,P0),gn(R0,P0,"esm2020");function t(e){try{const n=e.getProvider(jd).getImmediate();return{logEvent:(r,s,i)=>gM(n,r,s,i),setUserProperties:(r,s)=>pM(n,r,s)}}catch(n){throw Sn.create("interop-component-reg-failed",{reason:n})}}}yM();var D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,yT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function A(){}A.prototype=y.prototype,b.F=y.prototype,b.prototype=new A,b.prototype.constructor=b,b.D=function(N,R,I){for(var k=Array(arguments.length-2),$=2;$<arguments.length;$++)k[$-2]=arguments[$];return y.prototype[R].apply(N,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,A){A||(A=0);const N=Array(16);if(typeof y=="string")for(var R=0;R<16;++R)N[R]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(R=0;R<16;++R)N[R]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=b.g[0],A=b.g[1],R=b.g[2];let I=b.g[3],k;k=y+(I^A&(R^I))+N[0]+3614090360&4294967295,y=A+(k<<7&4294967295|k>>>25),k=I+(R^y&(A^R))+N[1]+3905402710&4294967295,I=y+(k<<12&4294967295|k>>>20),k=R+(A^I&(y^A))+N[2]+606105819&4294967295,R=I+(k<<17&4294967295|k>>>15),k=A+(y^R&(I^y))+N[3]+3250441966&4294967295,A=R+(k<<22&4294967295|k>>>10),k=y+(I^A&(R^I))+N[4]+4118548399&4294967295,y=A+(k<<7&4294967295|k>>>25),k=I+(R^y&(A^R))+N[5]+1200080426&4294967295,I=y+(k<<12&4294967295|k>>>20),k=R+(A^I&(y^A))+N[6]+2821735955&4294967295,R=I+(k<<17&4294967295|k>>>15),k=A+(y^R&(I^y))+N[7]+4249261313&4294967295,A=R+(k<<22&4294967295|k>>>10),k=y+(I^A&(R^I))+N[8]+1770035416&4294967295,y=A+(k<<7&4294967295|k>>>25),k=I+(R^y&(A^R))+N[9]+2336552879&4294967295,I=y+(k<<12&4294967295|k>>>20),k=R+(A^I&(y^A))+N[10]+4294925233&4294967295,R=I+(k<<17&4294967295|k>>>15),k=A+(y^R&(I^y))+N[11]+2304563134&4294967295,A=R+(k<<22&4294967295|k>>>10),k=y+(I^A&(R^I))+N[12]+1804603682&4294967295,y=A+(k<<7&4294967295|k>>>25),k=I+(R^y&(A^R))+N[13]+4254626195&4294967295,I=y+(k<<12&4294967295|k>>>20),k=R+(A^I&(y^A))+N[14]+2792965006&4294967295,R=I+(k<<17&4294967295|k>>>15),k=A+(y^R&(I^y))+N[15]+1236535329&4294967295,A=R+(k<<22&4294967295|k>>>10),k=y+(R^I&(A^R))+N[1]+4129170786&4294967295,y=A+(k<<5&4294967295|k>>>27),k=I+(A^R&(y^A))+N[6]+3225465664&4294967295,I=y+(k<<9&4294967295|k>>>23),k=R+(y^A&(I^y))+N[11]+643717713&4294967295,R=I+(k<<14&4294967295|k>>>18),k=A+(I^y&(R^I))+N[0]+3921069994&4294967295,A=R+(k<<20&4294967295|k>>>12),k=y+(R^I&(A^R))+N[5]+3593408605&4294967295,y=A+(k<<5&4294967295|k>>>27),k=I+(A^R&(y^A))+N[10]+38016083&4294967295,I=y+(k<<9&4294967295|k>>>23),k=R+(y^A&(I^y))+N[15]+3634488961&4294967295,R=I+(k<<14&4294967295|k>>>18),k=A+(I^y&(R^I))+N[4]+3889429448&4294967295,A=R+(k<<20&4294967295|k>>>12),k=y+(R^I&(A^R))+N[9]+568446438&4294967295,y=A+(k<<5&4294967295|k>>>27),k=I+(A^R&(y^A))+N[14]+3275163606&4294967295,I=y+(k<<9&4294967295|k>>>23),k=R+(y^A&(I^y))+N[3]+4107603335&4294967295,R=I+(k<<14&4294967295|k>>>18),k=A+(I^y&(R^I))+N[8]+1163531501&4294967295,A=R+(k<<20&4294967295|k>>>12),k=y+(R^I&(A^R))+N[13]+2850285829&4294967295,y=A+(k<<5&4294967295|k>>>27),k=I+(A^R&(y^A))+N[2]+4243563512&4294967295,I=y+(k<<9&4294967295|k>>>23),k=R+(y^A&(I^y))+N[7]+1735328473&4294967295,R=I+(k<<14&4294967295|k>>>18),k=A+(I^y&(R^I))+N[12]+2368359562&4294967295,A=R+(k<<20&4294967295|k>>>12),k=y+(A^R^I)+N[5]+4294588738&4294967295,y=A+(k<<4&4294967295|k>>>28),k=I+(y^A^R)+N[8]+2272392833&4294967295,I=y+(k<<11&4294967295|k>>>21),k=R+(I^y^A)+N[11]+1839030562&4294967295,R=I+(k<<16&4294967295|k>>>16),k=A+(R^I^y)+N[14]+4259657740&4294967295,A=R+(k<<23&4294967295|k>>>9),k=y+(A^R^I)+N[1]+2763975236&4294967295,y=A+(k<<4&4294967295|k>>>28),k=I+(y^A^R)+N[4]+1272893353&4294967295,I=y+(k<<11&4294967295|k>>>21),k=R+(I^y^A)+N[7]+4139469664&4294967295,R=I+(k<<16&4294967295|k>>>16),k=A+(R^I^y)+N[10]+3200236656&4294967295,A=R+(k<<23&4294967295|k>>>9),k=y+(A^R^I)+N[13]+681279174&4294967295,y=A+(k<<4&4294967295|k>>>28),k=I+(y^A^R)+N[0]+3936430074&4294967295,I=y+(k<<11&4294967295|k>>>21),k=R+(I^y^A)+N[3]+3572445317&4294967295,R=I+(k<<16&4294967295|k>>>16),k=A+(R^I^y)+N[6]+76029189&4294967295,A=R+(k<<23&4294967295|k>>>9),k=y+(A^R^I)+N[9]+3654602809&4294967295,y=A+(k<<4&4294967295|k>>>28),k=I+(y^A^R)+N[12]+3873151461&4294967295,I=y+(k<<11&4294967295|k>>>21),k=R+(I^y^A)+N[15]+530742520&4294967295,R=I+(k<<16&4294967295|k>>>16),k=A+(R^I^y)+N[2]+3299628645&4294967295,A=R+(k<<23&4294967295|k>>>9),k=y+(R^(A|~I))+N[0]+4096336452&4294967295,y=A+(k<<6&4294967295|k>>>26),k=I+(A^(y|~R))+N[7]+1126891415&4294967295,I=y+(k<<10&4294967295|k>>>22),k=R+(y^(I|~A))+N[14]+2878612391&4294967295,R=I+(k<<15&4294967295|k>>>17),k=A+(I^(R|~y))+N[5]+4237533241&4294967295,A=R+(k<<21&4294967295|k>>>11),k=y+(R^(A|~I))+N[12]+1700485571&4294967295,y=A+(k<<6&4294967295|k>>>26),k=I+(A^(y|~R))+N[3]+2399980690&4294967295,I=y+(k<<10&4294967295|k>>>22),k=R+(y^(I|~A))+N[10]+4293915773&4294967295,R=I+(k<<15&4294967295|k>>>17),k=A+(I^(R|~y))+N[1]+2240044497&4294967295,A=R+(k<<21&4294967295|k>>>11),k=y+(R^(A|~I))+N[8]+1873313359&4294967295,y=A+(k<<6&4294967295|k>>>26),k=I+(A^(y|~R))+N[15]+4264355552&4294967295,I=y+(k<<10&4294967295|k>>>22),k=R+(y^(I|~A))+N[6]+2734768916&4294967295,R=I+(k<<15&4294967295|k>>>17),k=A+(I^(R|~y))+N[13]+1309151649&4294967295,A=R+(k<<21&4294967295|k>>>11),k=y+(R^(A|~I))+N[4]+4149444226&4294967295,y=A+(k<<6&4294967295|k>>>26),k=I+(A^(y|~R))+N[11]+3174756917&4294967295,I=y+(k<<10&4294967295|k>>>22),k=R+(y^(I|~A))+N[2]+718787259&4294967295,R=I+(k<<15&4294967295|k>>>17),k=A+(I^(R|~y))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(R+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+R&4294967295,b.g[3]=b.g[3]+I&4294967295}r.prototype.v=function(b,y){y===void 0&&(y=b.length);const A=y-this.blockSize,N=this.C;let R=this.h,I=0;for(;I<y;){if(R==0)for(;I<=A;)s(this,b,I),I+=this.blockSize;if(typeof b=="string"){for(;I<y;)if(N[R++]=b.charCodeAt(I++),R==this.blockSize){s(this,N),R=0;break}}else for(;I<y;)if(N[R++]=b[I++],R==this.blockSize){s(this,N),R=0;break}}this.h=R,this.o+=y},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;y=this.o*8;for(var A=b.length-8;A<b.length;++A)b[A]=y&255,y/=256;for(this.v(b),b=Array(16),y=0,A=0;A<4;++A)for(let N=0;N<32;N+=8)b[y++]=this.g[A]>>>N&255;return b};function i(b,y){var A=l;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=y(b)}function a(b,y){this.h=y;const A=[];let N=!0;for(let R=b.length-1;R>=0;R--){const I=b[R]|0;N&&I==y||(A[R]=I,N=!1)}this.g=A}var l={};function c(b){return-128<=b&&b<128?i(b,function(y){return new a([y|0],y<0?-1:0)}):new a([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return f;if(b<0)return T(d(-b));const y=[];let A=1;for(let N=0;b>=A;N++)y[N]=b/A|0,A*=4294967296;return new a(y,0)}function h(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return T(h(b.substring(1),y));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=d(Math.pow(y,8));let N=f;for(let I=0;I<b.length;I+=8){var R=Math.min(8,b.length-I);const k=parseInt(b.substring(I,I+R),y);R<8?(R=d(Math.pow(y,R)),N=N.j(R).add(d(k))):(N=N.j(A),N=N.add(d(k)))}return N}var f=c(0),m=c(1),x=c(16777216);t=a.prototype,t.m=function(){if(_(this))return-T(this).m();let b=0,y=1;for(let A=0;A<this.g.length;A++){const N=this.i(A);b+=(N>=0?N:4294967296+N)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(_(this))return"-"+T(this).toString(b);const y=d(Math.pow(b,6));var A=this;let N="";for(;;){const R=D(A,y).g;A=E(A,R.j(y));let I=((A.g.length>0?A.g[0]:A.h)>>>0).toString(b);if(A=R,C(A))return I+N;for(;I.length<6;)I="0"+I;N=I+N}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(let y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function _(b){return b.h==-1}t.l=function(b){return b=E(this,b),_(b)?-1:C(b)?0:1};function T(b){const y=b.g.length,A=[];for(let N=0;N<y;N++)A[N]=~b.g[N];return new a(A,~b.h).add(m)}t.abs=function(){return _(this)?T(this):this},t.add=function(b){const y=Math.max(this.g.length,b.g.length),A=[];let N=0;for(let R=0;R<=y;R++){let I=N+(this.i(R)&65535)+(b.i(R)&65535),k=(I>>>16)+(this.i(R)>>>16)+(b.i(R)>>>16);N=k>>>16,I&=65535,k&=65535,A[R]=k<<16|I}return new a(A,A[A.length-1]&-2147483648?-1:0)};function E(b,y){return b.add(T(y))}t.j=function(b){if(C(this)||C(b))return f;if(_(this))return _(b)?T(this).j(T(b)):T(T(this).j(b));if(_(b))return T(this.j(T(b)));if(this.l(x)<0&&b.l(x)<0)return d(this.m()*b.m());const y=this.g.length+b.g.length,A=[];for(var N=0;N<2*y;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(let R=0;R<b.g.length;R++){const I=this.i(N)>>>16,k=this.i(N)&65535,$=b.i(R)>>>16,J=b.i(R)&65535;A[2*N+2*R]+=k*J,w(A,2*N+2*R),A[2*N+2*R+1]+=I*J,w(A,2*N+2*R+1),A[2*N+2*R+1]+=k*$,w(A,2*N+2*R+1),A[2*N+2*R+2]+=I*$,w(A,2*N+2*R+2)}for(b=0;b<y;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=y;b<2*y;b++)A[b]=0;return new a(A,0)};function w(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function S(b,y){this.g=b,this.h=y}function D(b,y){if(C(y))throw Error("division by zero");if(C(b))return new S(f,f);if(_(b))return y=D(T(b),y),new S(T(y.g),T(y.h));if(_(y))return y=D(b,T(y)),new S(T(y.g),y.h);if(b.g.length>30){if(_(b)||_(y))throw Error("slowDivide_ only works with positive integers.");for(var A=m,N=y;N.l(b)<=0;)A=L(A),N=L(N);var R=j(A,1),I=j(N,1);for(N=j(N,2),A=j(A,2);!C(N);){var k=I.add(N);k.l(b)<=0&&(R=R.add(A),I=k),N=j(N,1),A=j(A,1)}return y=E(b,R.j(y)),new S(R,y)}for(R=f;b.l(y)>=0;){for(A=Math.max(1,Math.floor(b.m()/y.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),I=d(A),k=I.j(y);_(k)||k.l(b)>0;)A-=N,I=d(A),k=I.j(y);C(I)&&(I=m),R=R.add(I),b=E(b,k)}return new S(R,b)}t.B=function(b){return D(this,b).h},t.and=function(b){const y=Math.max(this.g.length,b.g.length),A=[];for(let N=0;N<y;N++)A[N]=this.i(N)&b.i(N);return new a(A,this.h&b.h)},t.or=function(b){const y=Math.max(this.g.length,b.g.length),A=[];for(let N=0;N<y;N++)A[N]=this.i(N)|b.i(N);return new a(A,this.h|b.h)},t.xor=function(b){const y=Math.max(this.g.length,b.g.length),A=[];for(let N=0;N<y;N++)A[N]=this.i(N)^b.i(N);return new a(A,this.h^b.h)};function L(b){const y=b.g.length+1,A=[];for(let N=0;N<y;N++)A[N]=b.i(N)<<1|b.i(N-1)>>>31;return new a(A,b.h)}function j(b,y){const A=y>>5;y%=32;const N=b.g.length-A,R=[];for(let I=0;I<N;I++)R[I]=y>0?b.i(I+A)>>>y|b.i(I+A+1)<<32-y:b.i(I+A);return new a(R,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,zs=a}).apply(typeof D0<"u"?D0:typeof self<"u"?self:typeof window<"u"?window:{});var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,cl,xT,Uu,kp,wT,_T,bT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cu=="object"&&cu];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var v=r;u=u.split(".");for(var P=0;P<u.length-1;P++){var M=u[P];if(!(M in v))break e;v=v[M]}u=u[u.length-1],P=v[u],p=p(P),p!=P&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(p){var v=[],P;for(P in p)Object.prototype.hasOwnProperty.call(p,P)&&v.push([P,p[P]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,v){return u.call.apply(u.bind,arguments)}function d(u,p,v){return d=c,d.apply(null,arguments)}function h(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var P=v.slice();return P.push.apply(P,arguments),u.apply(this,P)}}function f(u,p){function v(){}v.prototype=p.prototype,u.Z=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(P,M,F){for(var Q=Array(arguments.length-2),we=2;we<arguments.length;we++)Q[we-2]=arguments[we];return p.prototype[M].apply(P,Q)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function x(u){const p=u.length;if(p>0){const v=Array(p);for(let P=0;P<p;P++)v[P]=u[P];return v}return[]}function C(u,p){for(let P=1;P<arguments.length;P++){const M=arguments[P];var v=typeof M;if(v=v!="object"?v:M?Array.isArray(M)?"array":v:"null",v=="array"||v=="object"&&typeof M.length=="number"){v=u.length||0;const F=M.length||0;u.length=v+F;for(let Q=0;Q<F;Q++)u[v+Q]=M[Q]}else u.push(M)}}class _{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function T(u){a.setTimeout(()=>{throw u},0)}function E(){var u=b;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class w{constructor(){this.h=this.g=null}add(p,v){const P=S.get();P.set(p,v),this.h?this.h.next=P:this.g=P,this.h=P}}var S=new _(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let L,j=!1,b=new w,y=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(A)}};function A(){for(var u;u=E();){try{u.h.call(u.g)}catch(v){T(v)}var p=S;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}j=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};a.addEventListener("test",v,p),a.removeEventListener("test",v,p)}catch{}return u}();function k(u){return/^[\s\xa0]*$/.test(u)}function $(u,p){R.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}f($,R),$.prototype.init=function(u,p){const v=this.type=u.type,P=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),G=0;function oe(u,p,v,P,M){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!P,this.ha=M,this.key=++G,this.da=this.fa=!1}function O(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u,p,v){for(const P in u)p.call(v,u[P],P,u)}function ie(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function V(u){const p={};for(const v in u)p[v]=u[v];return p}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(u,p){let v,P;for(let M=1;M<arguments.length;M++){P=arguments[M];for(v in P)u[v]=P[v];for(let F=0;F<H.length;F++)v=H[F],Object.prototype.hasOwnProperty.call(P,v)&&(u[v]=P[v])}}function ye(u){this.src=u,this.g={},this.h=0}ye.prototype.add=function(u,p,v,P,M){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const Q=ee(u,p,P,M);return Q>-1?(p=u[Q],v||(p.fa=!1)):(p=new oe(p,this.src,F,!!P,M),p.fa=v,u.push(p)),p};function Y(u,p){const v=p.type;if(v in u.g){var P=u.g[v],M=Array.prototype.indexOf.call(P,p,void 0),F;(F=M>=0)&&Array.prototype.splice.call(P,M,1),F&&(O(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function ee(u,p,v,P){for(let M=0;M<u.length;++M){const F=u[M];if(!F.da&&F.listener==p&&F.capture==!!v&&F.ha==P)return M}return-1}var W="closure_lm_"+(Math.random()*1e6|0),ue={};function ke(u,p,v,P,M){if(Array.isArray(p)){for(let F=0;F<p.length;F++)ke(u,p[F],v,P,M);return null}return v=Rc(v),u&&u[J]?u.J(p,v,l(P)?!!P.capture:!1,M):Se(u,p,v,!1,P,M)}function Se(u,p,v,P,M,F){if(!p)throw Error("Invalid event type");const Q=l(M)?!!M.capture:!!M;let we=jr(u);if(we||(u[W]=we=new ye(u)),v=we.add(p,v,P,Q,F),v.proxy)return v;if(P=be(),v.proxy=P,P.src=u,P.listener=v,u.addEventListener)I||(M=Q),M===void 0&&(M=!1),u.addEventListener(p.toString(),P,M);else if(u.attachEvent)u.attachEvent(yn(p.toString()),P);else if(u.addListener&&u.removeListener)u.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return v}function be(){function u(v){return p.call(u.src,u.listener,v)}const p=mi;return u}function Ce(u,p,v,P,M){if(Array.isArray(p))for(var F=0;F<p.length;F++)Ce(u,p[F],v,P,M);else P=l(P)?!!P.capture:!!P,v=Rc(v),u&&u[J]?(u=u.i,F=String(p).toString(),F in u.g&&(p=u.g[F],v=ee(p,v,P,M),v>-1&&(O(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete u.g[F],u.h--)))):u&&(u=jr(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ee(p,v,P,M)),(v=u>-1?p[u]:null)&&Ct(v))}function Ct(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[J])Y(p.i,u);else{var v=u.type,P=u.proxy;p.removeEventListener?p.removeEventListener(v,P,u.capture):p.detachEvent?p.detachEvent(yn(v),P):p.addListener&&p.removeListener&&p.removeListener(P),(v=jr(p))?(Y(v,u),v.h==0&&(v.src=null,p[W]=null)):O(u)}}}function yn(u){return u in ue?ue[u]:ue[u]="on"+u}function mi(u,p){if(u.da)u=!0;else{p=new $(p,this);const v=u.listener,P=u.ha||u.src;u.fa&&Ct(u),u=v.call(P,p)}return u}function jr(u){return u=u[W],u instanceof ye?u:null}var Ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rc(u){return typeof u=="function"?u:(u[Ar]||(u[Ar]=function(p){return u.handleEvent(p)}),u[Ar])}function at(){N.call(this),this.i=new ye(this),this.M=this,this.G=null}f(at,N),at.prototype[J]=!0,at.prototype.removeEventListener=function(u,p,v,P){Ce(this,u,p,v,P)};function Gt(u,p){var v,P=u.G;if(P)for(v=[];P;P=P.G)v.push(P);if(u=u.M,P=p.type||p,typeof p=="string")p=new R(p,u);else if(p instanceof R)p.target=p.target||u;else{var M=p;p=new R(P,u),fe(p,M)}M=!0;let F,Q;if(v)for(Q=v.length-1;Q>=0;Q--)F=p.g=v[Q],M=Pc(F,P,!0,p)&&M;if(F=p.g=u,M=Pc(F,P,!0,p)&&M,M=Pc(F,P,!1,p)&&M,v)for(Q=0;Q<v.length;Q++)F=p.g=v[Q],M=Pc(F,P,!1,p)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const v=u.g[p];for(let P=0;P<v.length;P++)O(v[P]);delete u.g[p],u.h--}}this.G=null},at.prototype.J=function(u,p,v,P){return this.i.add(String(u),p,!1,v,P)},at.prototype.K=function(u,p,v,P){return this.i.add(String(u),p,!0,v,P)};function Pc(u,p,v,P){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let F=0;F<p.length;++F){const Q=p[F];if(Q&&!Q.da&&Q.capture==v){const we=Q.listener,vt=Q.ha||Q.src;Q.fa&&Y(u.i,Q),M=we.call(vt,P)!==!1&&M}}return M&&!P.defaultPrevented}function Kj(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(u,p||0)}function Mv(u){u.g=Kj(()=>{u.g=null,u.i&&(u.i=!1,Mv(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Qj extends N{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Mv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(u){N.call(this),this.h=u,this.g={}}f(Aa,N);var Vv=[];function Fv(u){q(u.g,function(p,v){this.g.hasOwnProperty(v)&&Ct(p)},u),u.g={}}Aa.prototype.N=function(){Aa.Z.N.call(this),Fv(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var of=a.JSON.stringify,Yj=a.JSON.parse,Xj=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Uv(){}function Bv(){}var ka={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function af(){R.call(this,"d")}f(af,R);function lf(){R.call(this,"c")}f(lf,R);var pi={},$v=null;function Dc(){return $v=$v||new at}pi.Ia="serverreachability";function zv(u){R.call(this,pi.Ia,u)}f(zv,R);function Ra(u){const p=Dc();Gt(p,new zv(p))}pi.STAT_EVENT="statevent";function Hv(u,p){R.call(this,pi.STAT_EVENT,u),this.stat=p}f(Hv,R);function Kt(u){const p=Dc();Gt(p,new Hv(p,u))}pi.Ja="timingevent";function Wv(u,p){R.call(this,pi.Ja,u),this.size=p}f(Wv,R);function Pa(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Da(){this.g=!0}Da.prototype.ua=function(){this.g=!1};function Jj(u,p,v,P,M,F){u.info(function(){if(u.g)if(F){var Q="",we=F.split("&");for(let Fe=0;Fe<we.length;Fe++){var vt=we[Fe].split("=");if(vt.length>1){const Et=vt[0];vt=vt[1];const lr=Et.split("_");Q=lr.length>=2&&lr[1]=="type"?Q+(Et+"="+vt+"&"):Q+(Et+"=redacted&")}}}else Q=null;else Q=F;return"XMLHTTP REQ ("+P+") [attempt "+M+"]: "+p+`
`+v+`
`+Q})}function Zj(u,p,v,P,M,F,Q){u.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+M+"]: "+p+`
`+v+`
`+F+" "+Q})}function ao(u,p,v,P){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+tA(u,v)+(P?" "+P:"")})}function eA(u,p){u.info(function(){return"TIMEOUT: "+p})}Da.prototype.info=function(){};function tA(u,p){if(!u.g)return p;if(!p)return null;try{const F=JSON.parse(p);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var v=F[u];if(!(v.length<2)){var P=v[1];if(Array.isArray(P)&&!(P.length<1)){var M=P[0];if(M!="noop"&&M!="stop"&&M!="close")for(let Q=1;Q<P.length;Q++)P[Q]=""}}}}return of(F)}catch{return p}}var Lc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gv;function cf(){}f(cf,Uv),cf.prototype.g=function(){return new XMLHttpRequest},Gv=new cf;function La(u){return encodeURIComponent(String(u))}function nA(u){var p=1;u=u.split(":");const v=[];for(;p>0&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function is(u,p,v,P){this.j=u,this.i=p,this.l=v,this.S=P||1,this.V=new Aa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kv}function Kv(){this.i=null,this.g="",this.h=!1}var Qv={},uf={};function df(u,p,v){u.M=1,u.A=Mc(ar(p)),u.u=v,u.R=!0,Yv(u,null)}function Yv(u,p){u.F=Date.now(),Oc(u),u.B=ar(u.A);var v=u.B,P=u.S;Array.isArray(P)||(P=[String(P)]),cx(v.i,"t",P),u.C=0,v=u.j.L,u.h=new Kv,u.g=Cx(u.j,v?p:null,!u.u),u.P>0&&(u.O=new Qj(d(u.Y,u,u.g),u.P)),p=u.V,v=u.g,P=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(Vv[0]=M.toString()),M=Vv);for(let F=0;F<M.length;F++){const Q=ke(v,M[F],P||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Ra(),Jj(u.i,u.v,u.B,u.l,u.S,u.u)}is.prototype.ba=function(u){u=u.target;const p=this.O;p&&ls(u)==3?p.j():this.Y(u)},is.prototype.Y=function(u){try{if(u==this.g)e:{const we=ls(this.g),vt=this.g.ya(),Fe=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||gx(this.g)))){this.K||we!=4||vt==7||(vt==8||Fe<=0?Ra(3):Ra(2)),hf(this);var p=this.g.ca();this.X=p;var v=rA(this);if(this.o=p==200,Zj(this.i,this.v,this.B,this.l,this.S,we,p),this.o){if(this.U&&!this.L){t:{if(this.g){var P,M=this.g;if((P=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(P)){var F=P;break t}}F=null}if(u=F)ao(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ff(this,u);else{this.o=!1,this.m=3,Kt(12),gi(this),Oa(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<v.length;)if(Et=sA(this,v),Et==uf){we==4&&(this.m=4,Kt(14),u=!1),ao(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Qv){this.m=4,Kt(15),ao(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else ao(this.i,this.l,Et,null),ff(this,Et);if(Xv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||v.length!=0||this.h.h||(this.m=1,Kt(16),u=!1),this.o=this.o&&u,!u)ao(this.i,this.l,v,"[Invalid Chunked Response]"),gi(this),Oa(this);else if(v.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),_f(Q),Q.P=!0,Kt(11))}}else ao(this.i,this.l,v,null),ff(this,v);we==4&&gi(this),this.o&&!this.K&&(we==4?Ex(this.j,this):(this.o=!1,Oc(this)))}else vA(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),gi(this),Oa(this)}}}catch{}finally{}};function rA(u){if(!Xv(u))return u.g.la();const p=gx(u.g);if(p==="")return"";let v="";const P=p.length,M=ls(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return gi(u),Oa(u),"";u.h.i=new a.TextDecoder}for(let F=0;F<P;F++)u.h.h=!0,v+=u.h.i.decode(p[F],{stream:!(M&&F==P-1)});return p.length=0,u.h.g+=v,u.C=0,u.h.g}function Xv(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function sA(u,p){var v=u.C,P=p.indexOf(`
`,v);return P==-1?uf:(v=Number(p.substring(v,P)),isNaN(v)?Qv:(P+=1,P+v>p.length?uf:(p=p.slice(P,P+v),u.C=P+v,p)))}is.prototype.cancel=function(){this.K=!0,gi(this)};function Oc(u){u.T=Date.now()+u.H,Jv(u,u.H)}function Jv(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Pa(d(u.aa,u),p)}function hf(u){u.D&&(a.clearTimeout(u.D),u.D=null)}is.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(eA(this.i,this.B),this.M!=2&&(Ra(),Kt(17)),gi(this),this.m=2,Oa(this)):Jv(this,this.T-u)};function Oa(u){u.j.I==0||u.K||Ex(u.j,u)}function gi(u){hf(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Fv(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function ff(u,p){try{var v=u.j;if(v.I!=0&&(v.g==u||mf(v.h,u))){if(!u.L&&mf(v.h,u)&&v.I==3){try{var P=v.Ba.g.parse(p)}catch{P=null}if(Array.isArray(P)&&P.length==3){var M=P;if(M[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)$c(v),Uc(v);else break e;wf(v),Kt(18)}}else v.xa=M[1],0<v.xa-v.K&&M[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Pa(d(v.Va,v),6e3));tx(v.h)<=1&&v.ta&&(v.ta=void 0)}else vi(v,11)}else if((u.L||v.g==u)&&$c(v),!k(p))for(M=v.Ba.g.parse(p),p=0;p<M.length;p++){let Fe=M[p];const Et=Fe[0];if(!(Et<=v.K))if(v.K=Et,Fe=Fe[1],v.I==2)if(Fe[0]=="c"){v.M=Fe[1],v.ba=Fe[2];const lr=Fe[3];lr!=null&&(v.ka=lr,v.j.info("VER="+v.ka));const xi=Fe[4];xi!=null&&(v.za=xi,v.j.info("SVER="+v.za));const cs=Fe[5];cs!=null&&typeof cs=="number"&&cs>0&&(P=1.5*cs,v.O=P,v.j.info("backChannelRequestTimeoutMs_="+P)),P=v;const us=u.g;if(us){const Hc=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hc){var F=P.h;F.g||Hc.indexOf("spdy")==-1&&Hc.indexOf("quic")==-1&&Hc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(pf(F,F.h),F.h=null))}if(P.G){const bf=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;bf&&(P.wa=bf,We(P.J,P.G,bf))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),P=v;var Q=u;if(P.na=Sx(P,P.L?P.ba:null,P.W),Q.L){nx(P.h,Q);var we=Q,vt=P.O;vt&&(we.H=vt),we.D&&(hf(we),Oc(we)),P.g=Q}else _x(P);v.i.length>0&&Bc(v)}else Fe[0]!="stop"&&Fe[0]!="close"||vi(v,7);else v.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?vi(v,7):xf(v):Fe[0]!="noop"&&v.l&&v.l.qa(Fe),v.A=0)}}Ra(4)}catch{}}var iA=class{constructor(u,p){this.g=u,this.map=p}};function Zv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ex(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function tx(u){return u.h?1:u.g?u.g.size:0}function mf(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function pf(u,p){u.g?u.g.add(p):u.h=p}function nx(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Zv.prototype.cancel=function(){if(this.i=rx(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rx(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.G);return p}return x(u.i)}var sx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oA(u,p){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const P=u[v].indexOf("=");let M,F=null;P>=0?(M=u[v].substring(0,P),F=u[v].substring(P+1)):M=u[v],p(M,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function os(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof os?(this.l=u.l,Ma(this,u.j),this.o=u.o,this.g=u.g,Va(this,u.u),this.h=u.h,gf(this,ux(u.i)),this.m=u.m):u&&(p=String(u).match(sx))?(this.l=!1,Ma(this,p[1]||"",!0),this.o=Fa(p[2]||""),this.g=Fa(p[3]||"",!0),Va(this,p[4]),this.h=Fa(p[5]||"",!0),gf(this,p[6]||"",!0),this.m=Fa(p[7]||"")):(this.l=!1,this.i=new Ba(null,this.l))}os.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Ua(p,ix,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Ua(p,ix,!0),"@"),u.push(La(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ua(v,v.charAt(0)=="/"?cA:lA,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ua(v,dA)),u.join("")},os.prototype.resolve=function(u){const p=ar(this);let v=!!u.j;v?Ma(p,u.j):v=!!u.o,v?p.o=u.o:v=!!u.g,v?p.g=u.g:v=u.u!=null;var P=u.h;if(v)Va(p,u.u);else if(v=!!u.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var M=p.h.lastIndexOf("/");M!=-1&&(P=p.h.slice(0,M+1)+P)}if(M=P,M==".."||M==".")P="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){P=M.lastIndexOf("/",0)==0,M=M.split("/");const F=[];for(let Q=0;Q<M.length;){const we=M[Q++];we=="."?P&&Q==M.length&&F.push(""):we==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),P&&Q==M.length&&F.push("")):(F.push(we),P=!0)}P=F.join("/")}else P=M}return v?p.h=P:v=u.i.toString()!=="",v?gf(p,ux(u.i)):v=!!u.m,v&&(p.m=u.m),p};function ar(u){return new os(u)}function Ma(u,p,v){u.j=v?Fa(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Va(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function gf(u,p,v){p instanceof Ba?(u.i=p,hA(u.i,u.l)):(v||(p=Ua(p,uA)),u.i=new Ba(p,u.l))}function We(u,p,v){u.i.set(p,v)}function Mc(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Fa(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ua(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,aA),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function aA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ix=/[#\/\?@]/g,lA=/[#\?:]/g,cA=/[#\?]/g,uA=/[#\?@]/g,dA=/#/g;function Ba(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function yi(u){u.g||(u.g=new Map,u.h=0,u.i&&oA(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}t=Ba.prototype,t.add=function(u,p){yi(this),this.i=null,u=lo(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function ox(u,p){yi(u),p=lo(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ax(u,p){return yi(u),p=lo(u,p),u.g.has(p)}t.forEach=function(u,p){yi(this),this.g.forEach(function(v,P){v.forEach(function(M){u.call(p,M,P,this)},this)},this)};function lx(u,p){yi(u);let v=[];if(typeof p=="string")ax(u,p)&&(v=v.concat(u.g.get(lo(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)v=v.concat(u[p]);return v}t.set=function(u,p){return yi(this),this.i=null,u=lo(this,u),ax(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=lx(this,u),u.length>0?String(u[0]):p):p};function cx(u,p,v){ox(u,p),v.length>0&&(u.i=null,u.g.set(lo(u,p),x(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let P=0;P<p.length;P++){var v=p[P];const M=La(v);v=lx(this,v);for(let F=0;F<v.length;F++){let Q=M;v[F]!==""&&(Q+="="+La(v[F])),u.push(Q)}}return this.i=u.join("&")};function ux(u){const p=new Ba;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function lo(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function hA(u,p){p&&!u.j&&(yi(u),u.i=null,u.g.forEach(function(v,P){const M=P.toLowerCase();P!=M&&(ox(this,P),cx(this,M,v))},u)),u.j=p}function fA(u,p){const v=new Da;if(a.Image){const P=new Image;P.onload=h(as,v,"TestLoadImage: loaded",!0,p,P),P.onerror=h(as,v,"TestLoadImage: error",!1,p,P),P.onabort=h(as,v,"TestLoadImage: abort",!1,p,P),P.ontimeout=h(as,v,"TestLoadImage: timeout",!1,p,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=u}else p(!1)}function mA(u,p){const v=new Da,P=new AbortController,M=setTimeout(()=>{P.abort(),as(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:P.signal}).then(F=>{clearTimeout(M),F.ok?as(v,"TestPingServer: ok",!0,p):as(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),as(v,"TestPingServer: error",!1,p)})}function as(u,p,v,P,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),P(v)}catch{}}function pA(){this.g=new Xj}function yf(u){this.i=u.Sb||null,this.h=u.ab||!1}f(yf,Uv),yf.prototype.g=function(){return new Vc(this.i,this.h)};function Vc(u,p){at.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Vc,at),t=Vc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dx(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function dx(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?$a(this):za(this),this.readyState==3&&dx(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,$a(this))},t.Na=function(u){this.g&&(this.response=u,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(u){u.readyState=4,u.l=null,u.j=null,u.B=null,za(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hx(u){let p="";return q(u,function(v,P){p+=P,p+=":",p+=v,p+=`\r
`}),p}function vf(u,p,v){e:{for(P in v){var P=!1;break e}P=!0}P||(v=hx(v),typeof u=="string"?v!=null&&La(v):We(u,p,v))}function nt(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(nt,at);var gA=/^https?$/i,yA=["POST","PUT"];t=nt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,v,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gv.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){fx(this,F);return}if(u=v||"",v=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var M in P)v.set(M,P[M]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const F of P.keys())v.set(F,P.get(F));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(yA,p,void 0)>=0)||P||M||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of v)this.g.setRequestHeader(F,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){fx(this,F)}};function fx(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,mx(u),Fc(u)}function mx(u){u.A||(u.A=!0,Gt(u,"complete"),Gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Gt(this,"complete"),Gt(this,"abort"),Fc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fc(this,!0)),nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?px(this):this.Xa())},t.Xa=function(){px(this)};function px(u){if(u.h&&typeof i<"u"){if(u.v&&ls(u)==4)setTimeout(u.Ca.bind(u),0);else if(Gt(u,"readystatechange"),ls(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var P;if(P=F===0){let Q=String(u.D).match(sx)[1]||null;!Q&&a.self&&a.self.location&&(Q=a.self.location.protocol.slice(0,-1)),P=!gA.test(Q?Q.toLowerCase():"")}v=P}if(v)Gt(u,"complete"),Gt(u,"success");else{u.o=6;try{var M=ls(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",mx(u)}}finally{Fc(u)}}}}function Fc(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,p||Gt(u,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ls(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ls(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Yj(p)}};function gx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vA(u){const p={};u=(u.g&&ls(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<u.length;P++){if(k(u[P]))continue;var v=nA(u[P]);const M=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=p[M]||[];p[M]=F,F.push(v)}ie(p,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function yx(u){this.za=0,this.i=[],this.j=new Da,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ha("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ha("baseRetryDelayMs",5e3,u),this.Za=Ha("retryDelaySeedMs",1e4,u),this.Ta=Ha("forwardChannelMaxRetries",2,u),this.va=Ha("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Zv(u&&u.concurrentRequestLimit),this.Ba=new pA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=yx.prototype,t.ka=8,t.I=1,t.connect=function(u,p,v,P){Kt(0),this.W=u,this.H=p||{},v&&P!==void 0&&(this.H.OSID=v,this.H.OAID=P),this.F=this.X,this.J=Sx(this,null,this.W),Bc(this)};function xf(u){if(vx(u),u.I==3){var p=u.V++,v=ar(u.J);if(We(v,"SID",u.M),We(v,"RID",p),We(v,"TYPE","terminate"),Wa(u,v),p=new is(u,u.j,p),p.M=2,p.A=Mc(ar(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&a.Image&&(new Image().src=p.A,v=!0),v||(p.g=Cx(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Oc(p)}Tx(u)}function Uc(u){u.g&&(_f(u),u.g.cancel(),u.g=null)}function vx(u){Uc(u),u.v&&(a.clearTimeout(u.v),u.v=null),$c(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Bc(u){if(!ex(u.h)&&!u.m){u.m=!0;var p=u.Ea;L||y(),j||(L(),j=!0),b.add(p,u),u.D=0}}function xA(u,p){return tx(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Pa(d(u.Ea,u,p),Nx(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new is(this,this.j,u);let F=this.o;if(this.U&&(F?(F=V(F),fe(F,this.U)):F=this.U),this.u!==null||this.R||(M.J=F,F=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var P=this.i[v];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(p+=P,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=wx(this,M,p),v=ar(this.J),We(v,"RID",u),We(v,"CVER",22),this.G&&We(v,"X-HTTP-Session-Id",this.G),Wa(this,v),F&&(this.R?p="headers="+La(hx(F))+"&"+p:this.u&&vf(v,this.u,F)),pf(this.h,M),this.Ra&&We(v,"TYPE","init"),this.S?(We(v,"$req",p),We(v,"SID","null"),M.U=!0,df(M,v,null)):df(M,v,p),this.I=2}}else this.I==3&&(u?xx(this,u):this.i.length==0||ex(this.h)||xx(this))};function xx(u,p){var v;p?v=p.l:v=u.V++;const P=ar(u.J);We(P,"SID",u.M),We(P,"RID",v),We(P,"AID",u.K),Wa(u,P),u.u&&u.o&&vf(P,u.u,u.o),v=new is(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),p&&(u.i=p.G.concat(u.i)),p=wx(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),pf(u.h,v),df(v,P,p)}function Wa(u,p){u.H&&q(u.H,function(v,P){We(p,P,v)}),u.l&&q({},function(v,P){We(p,P,v)})}function wx(u,p,v){v=Math.min(u.i.length,v);const P=u.l?d(u.l.Ka,u.l,u):null;e:{var M=u.i;let we=-1;for(;;){const vt=["count="+v];we==-1?v>0?(we=M[0].g,vt.push("ofs="+we)):we=0:vt.push("ofs="+we);let Fe=!0;for(let Et=0;Et<v;Et++){var F=M[Et].g;const lr=M[Et].map;if(F-=we,F<0)we=Math.max(0,M[Et].g-100),Fe=!1;else try{F="req"+F+"_"||"";try{var Q=lr instanceof Map?lr:Object.entries(lr);for(const[xi,cs]of Q){let us=cs;l(cs)&&(us=of(cs)),vt.push(F+xi+"="+encodeURIComponent(us))}}catch(xi){throw vt.push(F+"type="+encodeURIComponent("_badmap")),xi}}catch{P&&P(lr)}}if(Fe){Q=vt.join("&");break e}}Q=void 0}return u=u.i.splice(0,v),p.G=u,Q}function _x(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;L||y(),j||(L(),j=!0),b.add(p,u),u.A=0}}function wf(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Pa(d(u.Da,u),Nx(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,bx(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Pa(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Uc(this),bx(this))};function _f(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function bx(u){u.g=new is(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=ar(u.na);We(p,"RID","rpc"),We(p,"SID",u.M),We(p,"AID",u.K),We(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(p,"TO",u.ia),We(p,"TYPE","xmlhttp"),Wa(u,p),u.u&&u.o&&vf(p,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Mc(ar(p)),v.u=null,v.R=!0,Yv(v,u)}t.Va=function(){this.C!=null&&(this.C=null,Uc(this),wf(this),Kt(19))};function $c(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Ex(u,p){var v=null;if(u.g==p){$c(u),_f(u),u.g=null;var P=2}else if(mf(u.h,p))v=p.G,nx(u.h,p),P=1;else return;if(u.I!=0){if(p.o)if(P==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var M=u.D;P=Dc(),Gt(P,new Wv(P,v)),Bc(u)}else _x(u);else if(M=p.m,M==3||M==0&&p.X>0||!(P==1&&xA(u,p)||P==2&&wf(u)))switch(v&&v.length>0&&(p=u.h,p.i=p.i.concat(v)),M){case 1:vi(u,5);break;case 4:vi(u,10);break;case 3:vi(u,6);break;default:vi(u,2)}}}function Nx(u,p){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*p}function vi(u,p){if(u.j.info("Error code "+p),p==2){var v=d(u.bb,u),P=u.Ua;const M=!P;P=new os(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ma(P,"https"),Mc(P),M?fA(P.toString(),v):mA(P.toString(),v)}else Kt(2);u.I=0,u.l&&u.l.pa(p),Tx(u),vx(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Tx(u){if(u.I=0,u.ja=[],u.l){const p=rx(u.h);(p.length!=0||u.i.length!=0)&&(C(u.ja,p),C(u.ja,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.oa()}}function Sx(u,p,v){var P=v instanceof os?ar(v):new os(v);if(P.g!="")p&&(P.g=p+"."+P.g),Va(P,P.u);else{var M=a.location;P=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const F=new os(null);P&&Ma(F,P),p&&(F.g=p),M&&Va(F,M),v&&(F.h=v),P=F}return v=u.G,p=u.wa,v&&p&&We(P,v,p),We(P,"VER",u.ka),Wa(u,P),P}function Cx(u,p,v){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new nt(new yf({ab:v})):new nt(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ix(){}t=Ix.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zc(){}zc.prototype.g=function(u,p){return new vn(u,p)};function vn(u,p){at.call(this),this.g=new yx(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!k(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!k(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new co(this)}f(vn,at),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){xf(this.g)},vn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=of(u),u=v);p.i.push(new iA(p.Ya++,u)),p.I==3&&Bc(p)},vn.prototype.N=function(){this.g.l=null,delete this.j,xf(this.g),delete this.g,vn.Z.N.call(this)};function jx(u){af.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}f(jx,af);function Ax(){lf.call(this),this.status=1}f(Ax,lf);function co(u){this.g=u}f(co,Ix),co.prototype.ra=function(){Gt(this.g,"a")},co.prototype.qa=function(u){Gt(this.g,new jx(u))},co.prototype.pa=function(u){Gt(this.g,new Ax)},co.prototype.oa=function(){Gt(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,bT=function(){return new zc},_T=function(){return Dc()},wT=pi,kp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,Uu=Lc,qv.COMPLETE="complete",xT=qv,Bv.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",at.prototype.listen=at.prototype.J,cl=Bv,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,vT=nt}).apply(typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{});const L0="@firebase/firestore",O0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new yh("@firebase/firestore");function po(){return Wi.logLevel}function te(t,...e){if(Wi.logLevel<=Ee.DEBUG){const n=e.map(Iy);Wi.debug(`Firestore (${va}): ${t}`,...n)}}function Qr(t,...e){if(Wi.logLevel<=Ee.ERROR){const n=e.map(Iy);Wi.error(`Firestore (${va}): ${t}`,...n)}}function Jo(t,...e){if(Wi.logLevel<=Ee.WARN){const n=e.map(Iy);Wi.warn(`Firestore (${va}): ${t}`,...n)}}function Iy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ET(t,r,n)}function ET(t,e,n){let r=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qr(r),new Error(r)}function Ae(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ET(e,s,r)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class xM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wM{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new NT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class _M{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _M(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,te("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new M0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new M0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=NM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function Rp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return om(s)===om(i)?Ne(s,i):om(s)?1:-1}return Ne(t.length,e.length)}const TM=55296,SM=57343;function om(t){const e=t.charCodeAt(0);return e>=TM&&e<=SM}function Zo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="__name__";class dr{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&he(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=dr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ne(e.length,n.length)}static compareSegments(e,n){const r=dr.isNumericId(e),s=dr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?dr.extractNumericId(e).compare(dr.extractNumericId(n)):Rp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}}class $e extends dr{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const CM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends dr{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return CM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===V0}static keyField(){return new At([V0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Z(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce($e.fromString(e))}static fromName(e){return new ce($e.fromString(e).popFirst(5))}static empty(){return new ce($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e,n){if(!n)throw new Z(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IM(t,e,n,r){if(e===!0&&r===!0)throw new Z(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F0(t){if(!ce.isDocumentKey(t))throw new Z(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U0(t){if(ce.isDocumentKey(t))throw new Z(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ST(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(t);throw new Z(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function wc(t,e){if(!ST(t))throw new Z(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=-62135596800,$0=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$0);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<B0)throw new Z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wc(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:yt("string",Ke._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ke(0,0))}static max(){return new ge(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function jM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Gs(s,ce.empty(),e)}function AM(t){return new Gs(t.readTime,t.key,Xl)}class Gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gs(ge.min(),ce.empty(),Xl)}static max(){return new Gs(ge.max(),ce.empty(),Xl)}}function kM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==RM)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function DM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=-1;function Sh(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function LM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="";function OM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=z0(e)),e=MM(t.get(n),e);return z0(e)}function MM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case CT:n+="";break;default:n+=i}}return n}function z0(t){return t+CT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function IT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??jt.RED,this.left=s??jt.EMPTY,this.right=i??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new jt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new W0(this.data.getIterator())}getIteratorFrom(e){return new W0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class W0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new En([])}unionWith(e){let n=new _t(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jT("Invalid base64 string: "+i):i}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const FM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=FM.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qs(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",kT="__type__",RT="__previous_value__",PT="__local_write_time__";function ky(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kT])==null?void 0:r.stringValue)===AT}function Ch(t){const e=t.mapValue.fields[RT];return ky(e)?Ch(e):e}function Jl(t){const e=Ks(t.mapValue.fields[PT].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const kd="(default)";class Zl{constructor(e,n){this.projectId=e,this.database=n||kd}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__type__",BM="__max__",du={mapValue:{}},LT="__vector__",Rd="value";function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ky(t)?4:zM(t)?9007199254740991:$M(t)?10:11:he(28295,{value:t})}function Tr(t,e){if(t===e)return!0;const n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ks(s.timestampValue),l=Ks(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qs(s.bytesValue).isEqual(Qs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lt(s.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(s.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lt(s.integerValue)===lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=lt(s.doubleValue),l=lt(i.doubleValue);return a===l?Ad(a)===Ad(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Zo(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(H0(a)!==H0(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Tr(a[c],l[c])))return!1;return!0}(t,e);default:return he(52216,{left:t})}}function ec(t,e){return(t.values||[]).find(n=>Tr(n,e))!==void 0}function ea(t,e){if(t===e)return 0;const n=Ys(t),r=Ys(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=lt(i.integerValue||i.doubleValue),c=lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return q0(t.timestampValue,e.timestampValue);case 4:return q0(Jl(t),Jl(e));case 5:return Rp(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Qs(i),c=Qs(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ne(l[d],c[d]);if(h!==0)return h}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ne(lt(i.latitude),lt(a.latitude));return l!==0?l:Ne(lt(i.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return G0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,x,C,_;const l=i.fields||{},c=a.fields||{},d=(m=l[Rd])==null?void 0:m.arrayValue,h=(x=c[Rd])==null?void 0:x.arrayValue,f=Ne(((C=d==null?void 0:d.values)==null?void 0:C.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return f!==0?f:G0(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===du.mapValue&&a===du.mapValue)return 0;if(i===du.mapValue)return 1;if(a===du.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Rp(c[f],h[f]);if(m!==0)return m;const x=ea(l[c[f]],d[h[f]]);if(x!==0)return x}return Ne(c.length,h.length)}(t.mapValue,e.mapValue);default:throw he(23264,{he:n})}}function q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Ks(t),r=Ks(e),s=Ne(n.seconds,r.seconds);return s!==0?s:Ne(n.nanos,r.nanos)}function G0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ea(n[s],r[s]);if(i)return i}return Ne(n.length,r.length)}function ta(t){return Pp(t)}function Pp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Pp(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Pp(n.fields[a])}`;return s+"}"}(t.mapValue):he(61005,{value:t})}function Bu(t){switch(Ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ch(t);return e?16+Bu(e):16;case 5:return 2*t.stringValue.length;case 6:return Qs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ui(r.fields,(i,a)=>{s+=i.length+Bu(a)}),s}(t.mapValue);default:throw he(13486,{value:t})}}function K0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Dp(t){return!!t&&"integerValue"in t}function Ry(t){return!!t&&"arrayValue"in t}function Q0(t){return!!t&&"nullValue"in t}function Y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $u(t){return!!t&&"mapValue"in t}function $M(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[DT])==null?void 0:r.stringValue)===LT}function Tl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tl(t.arrayValue.values[n]);return e}return{...t}}function zM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Tl(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];$u(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ui(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new un(Tl(this.value))}}function OT(t){const e=[];return ui(t.fields,(n,r)=>{const s=new At([n]);if($u(r)){const i=OT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Bt(e,0,ge.min(),ge.min(),ge.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new Bt(e,1,n,ge.min(),r,s,0)}static newNoDocument(e,n){return new Bt(e,2,n,ge.min(),ge.min(),un.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,ge.min(),ge.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function X0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(a.referenceValue),n.key):r=ea(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function J0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n="asc"){this.field=e,this.dir=n}}function HM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MT=class{};class gt extends MT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new qM(e,n,r):n==="array-contains"?new QM(e,r):n==="in"?new YM(e,r):n==="not-in"?new XM(e,r):n==="array-contains-any"?new JM(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GM(e,r):new KM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ea(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends MT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new rr(e,n)}matches(e){return VT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function VT(t){return t.op==="and"}function FT(t){return WM(t)&&VT(t)}function WM(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function Lp(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+ta(t.value);if(FT(t))return t.filters.map(e=>Lp(e)).join(",");{const e=t.filters.map(n=>Lp(n)).join(",");return`${t.op}(${e})`}}function UT(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Tr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&UT(a,s.filters[l]),!0):!1}(t,e):void he(19439)}function BT(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"}(t):"Filter"}class qM extends gt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class GM extends gt{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KM extends gt{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $T(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class QM extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ry(n)&&ec(n.arrayValue,this.value)}}class YM extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class XM extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ec(this.value.arrayValue,n)}}class JM extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ry(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Z0(t,e=null,n=[],r=[],s=null,i=null,a=null){return new ZM(t,e,n,r,s,i,a)}function Py(t){const e=pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ta(r)).join(",")),e.Te=n}return e.Te}function Dy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J0(t.startAt,e.startAt)&&J0(t.endAt,e.endAt)}function Op(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function e3(t,e,n,r,s,i,a,l){return new _a(t,e,n,r,s,i,a,l)}function Ih(t){return new _a(t)}function e_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zT(t){return t.collectionGroup!==null}function Sl(t){const e=pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new _t(At.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new tc(i,r))}),n.has(At.keyField().canonicalString())||e.Ie.push(new tc(At.keyField(),r))}return e.Ie}function wr(t){const e=pe(t);return e.Ee||(e.Ee=HT(e,Sl(t))),e.Ee}function t3(t){const e=pe(t);return e.de||(e.de=HT(e,t.explicitOrderBy)),e.de}function HT(t,e){if(t.limitType==="F")return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new tc(s.field,i)});const n=t.endAt?new Pd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pd(t.startAt.position,t.startAt.inclusive):null;return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Mp(t,e){const n=t.filters.concat([e]);return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dd(t,e,n){return new _a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return Dy(wr(t),wr(e))&&t.limitType===e.limitType}function WT(t){return`${Py(wr(t))}|lt:${t.limitType}`}function go(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BT(s)).join(", ")}]`),Sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ta(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ta(s)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function Ah(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Sl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=X0(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Sl(r),s)||r.endAt&&!function(a,l,c){const d=X0(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Sl(r),s))}(t,e)}function n3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qT(t){return(e,n)=>{let r=!1;for(const s of Sl(t)){const i=r3(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function r3(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ea(c,d):he(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ui(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=new tt(ce.comparator);function Yr(){return s3}const GT=new tt(ce.comparator);function ul(...t){let e=GT;for(const n of t)e=e.insert(n.key,n);return e}function KT(t){let e=GT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ai(){return Cl()}function QT(){return Cl()}function Cl(){return new io(t=>t.toString(),(t,e)=>t.isEqual(e))}const i3=new tt(ce.comparator),o3=new _t(ce.comparator);function Te(...t){let e=o3;for(const n of t)e=e.add(n);return e}const a3=new _t(Ne);function l3(){return a3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function YT(t){return{integerValue:""+t}}function XT(t,e){return LM(e)?YT(e):Ly(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this._=void 0}}function c3(t,e,n){return t instanceof Ld?function(s,i){const a={fields:{[kT]:{stringValue:AT},[PT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&ky(i)&&(i=Ch(i)),i&&(a.fields[RT]=i),{mapValue:a}}(n,e):t instanceof na?ZT(t,e):t instanceof nc?eS(t,e):function(s,i){const a=JT(s,i),l=t_(a)+t_(s.Ae);return Dp(a)&&Dp(s.Ae)?YT(l):Ly(s.serializer,l)}(t,e)}function u3(t,e,n){return t instanceof na?ZT(t,e):t instanceof nc?eS(t,e):n}function JT(t,e){return t instanceof rc?function(r){return Dp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ld extends kh{}class na extends kh{constructor(e){super(),this.elements=e}}function ZT(t,e){const n=tS(e);for(const r of t.elements)n.some(s=>Tr(s,r))||n.push(r);return{arrayValue:{values:n}}}class nc extends kh{constructor(e){super(),this.elements=e}}function eS(t,e){let n=tS(e);for(const r of t.elements)n=n.filter(s=>!Tr(s,r));return{arrayValue:{values:n}}}class rc extends kh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function t_(t){return lt(t.integerValue||t.doubleValue)}function tS(t){return Ry(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.field=e,this.transform=n}}function d3(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof na&&s instanceof na||r instanceof nc&&s instanceof nc?Zo(r.elements,s.elements,Tr):r instanceof rc&&s instanceof rc?Tr(r.Ae,s.Ae):r instanceof Ld&&s instanceof Ld}(t.transform,e.transform)}class h3{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rh{}function rS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oy(t.key,Mn.none()):new _c(t.key,t.data,Mn.none());{const n=t.data,r=un.empty();let s=new _t(At.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new di(t.key,r,new En(s.toArray()),Mn.none())}}function f3(t,e,n){t instanceof _c?function(s,i,a){const l=s.value.clone(),c=r_(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof di?function(s,i,a){if(!zu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=r_(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(sS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,r){return t instanceof _c?function(i,a,l,c){if(!zu(i.precondition,a))return l;const d=i.value.clone(),h=s_(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof di?function(i,a,l,c){if(!zu(i.precondition,a))return l;const d=s_(i.fieldTransforms,c,a),h=a.data;return h.setAll(sS(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return zu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function m3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=JT(r.transform,s||null);i!=null&&(n===null&&(n=un.empty()),n.set(r.field,i))}return n||null}function n_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zo(r,s,(i,a)=>d3(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _c extends Rh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class di extends Rh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function r_(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,u3(a,l,n[s]))}return r}function s_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,c3(i,a,e))}return r}class Oy extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p3 extends Rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&f3(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=rS(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(n,r)=>n_(n,r))&&Zo(this.baseMutations,e.baseMutations,(n,r)=>n_(n,r))}}class My{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return i3}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new My(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ie;function w3(t){switch(t){case U.OK:return he(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return he(15467,{code:t})}}function iS(t){if(t===void 0)return Qr("GRPC error has no .code"),U.UNKNOWN;switch(t){case mt.OK:return U.OK;case mt.CANCELLED:return U.CANCELLED;case mt.UNKNOWN:return U.UNKNOWN;case mt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case mt.INTERNAL:return U.INTERNAL;case mt.UNAVAILABLE:return U.UNAVAILABLE;case mt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case mt.NOT_FOUND:return U.NOT_FOUND;case mt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case mt.ABORTED:return U.ABORTED;case mt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case mt.DATA_LOSS:return U.DATA_LOSS;default:return he(39323,{code:t})}}(Ie=mt||(mt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=new zs([4294967295,4294967295],0);function i_(t){const e=_3().encode(t),n=new yT;return n.update(e),new Uint8Array(n.digest())}function o_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zs([n,r],0),new zs([s,i],0)]}class Vy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(r<0)throw new dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zs.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(zs.fromNumber(r)));return s.compare(b3)===1&&(s=new zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=i_(e),[r,s]=o_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Vy(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=i_(e),[r,s]=o_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ph(ge.min(),s,new tt(Ne),Yr(),Te())}}class bc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bc(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class oS{constructor(e,n){this.targetId=e,this.Ce=n}}class aS{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class a_{constructor(){this.ve=0,this.Fe=l_(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:he(38017,{changeType:i})}}),new bc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=l_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class E3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yr(),this.Je=hu(),this.He=hu(),this.Ye=new tt(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Op(i))if(r===0){const a=new ce(i.path);this.et(n,a,Bt.newNoDocument(a,ge.min()))}else Ae(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Qs(r).toUint8Array()}catch(c){if(c instanceof jT)return Jo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Vy(a,s,i)}catch(c){return Jo(c instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Op(l.target)){const c=new ce(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Bt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Te();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Ph(e,n,this.Ye,this.je,r);return this.je=Yr(),this.Je=hu(),this.He=hu(),this.Ye=new tt(Ne),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new a_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new a_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hu(){return new tt(ce.comparator)}function l_(){return new tt(ce.comparator)}const N3={asc:"ASCENDING",desc:"DESCENDING"},T3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S3={and:"AND",or:"OR"};class C3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vp(t,e){return t.useProto3Json||Sh(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function I3(t,e){return Od(t,e.toTimestamp())}function _r(t){return Ae(!!t,49232),ge.fromTimestamp(function(n){const r=Ks(n);return new Ke(r.seconds,r.nanos)}(t))}function Fy(t,e){return Fp(t,e).canonicalString()}function Fp(t,e){const n=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cS(t){const e=$e.fromString(t);return Ae(pS(e),10190,{key:e.toString()}),e}function Up(t,e){return Fy(t.databaseId,e.path)}function am(t,e){const n=cS(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(dS(n))}function uS(t,e){return Fy(t.databaseId,e)}function j3(t){const e=cS(t);return e.length===4?$e.emptyPath():dS(e)}function Bp(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dS(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function c_(t,e,n){return{name:Up(t,e),fields:n.value.mapValue.fields}}function A3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:he(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ae(h===void 0||typeof h=="string",58123),Lt.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?U.UNKNOWN:iS(d.code);return new Z(h,d.message||"")}(a);n=new aS(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=am(t,r.document.name),i=_r(r.document.updateTime),a=r.document.createTime?_r(r.document.createTime):ge.min(),l=new un({mapValue:{fields:r.document.fields}}),c=Bt.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Hu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=am(t,r.document),i=r.readTime?_r(r.readTime):ge.min(),a=Bt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Hu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=am(t,r.document),i=r.removedTargetIds||[];n=new Hu([],i,s,null)}else{if(!("filter"in e))return he(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new x3(s,i),l=r.targetId;n=new oS(l,a)}}return n}function k3(t,e){let n;if(e instanceof _c)n={update:c_(t,e.key,e.value)};else if(e instanceof Oy)n={delete:Up(t,e.key)};else if(e instanceof di)n={update:c_(t,e.key,e.data),updateMask:U3(e.fieldMask)};else{if(!(e instanceof p3))return he(16599,{Vt:e.type});n={verify:Up(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ld)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof na)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw he(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:I3(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:he(27497)}(t,e.precondition)),n}function R3(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?_r(s.updateTime):_r(i);return a.isEqual(ge.min())&&(a=_r(i)),new h3(a,s.transformResults||[])}(n,e))):[]}function P3(t,e){return{documents:[uS(t,e.path)]}}function hS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uS(t,s);const i=function(d){if(d.length!==0)return mS(rr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Ts(m.field),direction:M3(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Vp(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function D3(t,e,n,r){const{ft:s,parent:i}=hS(t,e),a={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;a[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:Ts(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:Ts(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},gt:a,parent:i}}function L3(t){let e=j3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ae(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=fS(f);return m instanceof rr&&FT(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(C){return new tc(yo(C.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Sh(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,x=f.values||[];return new Pd(x,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,x=f.values||[];return new Pd(x,m)}(n.endAt)),e3(e,s,a,i,l,"F",c,d)}function O3(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yo(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=yo(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=yo(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=yo(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(yo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>fS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return he(1026)}}(n.compositeFilter.op))}(t):he(30097,{filter:t})}function M3(t){return N3[t]}function V3(t){return T3[t]}function F3(t){return S3[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function yo(t){return At.fromServerFormat(t.fieldPath)}function mS(t){return t instanceof gt?function(n){if(n.op==="=="){if(Y0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(Q0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Y0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(Q0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:V3(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>mS(s));return r.length===1?r[0]:{compositeFilter:{op:F3(n.op),filters:r}}}(t):he(54877,{filter:t})}function U3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,i=ge.min(),a=ge.min(),l=Lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.yt=e}}function $3(t){const e=L3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.Cn=new H3}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Gs.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class H3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gS=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(gS,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ra(0)}static cr(){return new ra(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="LruGarbageCollector",W3=1048576;function h_([t,e],[n,r]){const s=Ne(t,n);return s===0?Ne(e,r):s}class q3{constructor(e){this.Ir=e,this.buffer=new _t(h_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();h_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(d_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wa(n)?te(d_,"Ignoring IndexedDB error during garbage collection: ",n):await xa(n)}await this.Vr(3e5)})}}class K3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Th.ce);const r=new q3(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(u_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),po()<=Ee.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function Q3(t,e){return new K3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this.changes=new io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Il(r.mutation,s,En.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=Ai();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ul();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ai();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Yr();const a=Cl(),l=function(){return Cl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof di)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Il(h.mutation,d,h.mutation.getFieldMask(),Ke.now())):a.set(d.key,En.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new X3(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Cl();let s=new tt((a,l)=>a-l),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||En.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Te()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=QT();h.forEach(m=>{if(!i.has(m)){const x=rS(n.get(m),r.get(m));x!==null&&f.set(m,x),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Ai());let l=Xl,c=i;return a.next(d=>B.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Te())).next(h=>({batchId:l,changes:KT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ul();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,c=>{const d=function(f,m){return new _a(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Bt.newInvalidDocument(h)))});let l=ul();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Il(h.mutation,d,En.empty(),Ke.now()),Ah(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_r(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:$3(s.bundledQuery),readTime:_r(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.overlays=new tt(ce.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ai();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Ai(),i=n.length+1,a=new ce(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new tt((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Ai(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ai(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return B.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new y3(n,r));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.Qr=new _t(Nt.$r),this.Ur=new _t(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new $e([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new $e([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Te();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Nt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new g3(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ay:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Ne);return n.forEach(s=>{const i=new Nt(s,0),a=new Nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const a=new Nt(new ce(i),0);let l=new _t(Ne);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.ri=e,this.docs=function(){return new tt(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=Yr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Bt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yr();const a=n.path,l=new ce(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||kM(AM(h),r)<=0||(s.has(h.key)||Ah(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){he(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sV(this)}getSize(e){return B.resolve(this.size)}}class sV extends Y3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.persistence=e,this.si=new io(n=>Py(n),Dy),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Uy,this.targetCount=0,this.ai=ra.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ra(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Th(0),this.li=!1,this.li=!0,this.hi=new tV,this.referenceDelegate=e(this),this.Pi=new iV(this),this.indexManager=new z3,this.remoteDocumentCache=function(s){return new rV(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new B3(n),this.Ii=new Z3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new eV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new nV(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new oV(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class oV extends PM{constructor(e){super(),this.currentSequenceNumber=e}}class By{constructor(e){this.persistence=e,this.Ri=new Uy,this.Vi=null}static mi(e){return new By(e)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=ce.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Md{constructor(e,n){this.persistence=e,this.pi=new io(r=>OM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Q3(this,n)}static mi(e,n){return new Md(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bu(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new $y(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return hP()?8:DM(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new aV;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(po()<=Ee.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(po()<=Ee.DEBUG&&te("QueryEngine","Query:",go(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(po()<=Ee.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(n))):B.resolve())}ys(e,n){if(e_(n))return B.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dd(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Te(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Dd(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return e_(n)||s.isEqual(ge.min())?B.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?B.resolve(null):(po()<=Ee.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),go(n)),this.vs(e,a,n,jM(s,Xl)).next(l=>l))})}Ds(e,n){let r=new _t(qT(e));return n.forEach((s,i)=>{Ah(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return po()<=Ee.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,Gs.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="LocalStore",cV=3e8;class uV{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new tt(Ne),this.xs=new io(i=>Py(i),Dy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function dV(t,e,n,r){return new uV(t,e,n,r)}async function vS(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Te();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function hV(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let x=B.resolve();return m.forEach(C=>{x=x.next(()=>h.getEntry(c,C)).next(_=>{const T=d.docVersions.get(C);Ae(T!==null,48541),_.version.compareTo(T)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xS(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function fV(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(Lt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(f,x),function(_,T,E){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=cV?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,x,h)&&l.push(n.Pi.updateTargetData(i,x))});let c=Yr(),d=Te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(mV(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ge.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function mV(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Yr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):te(zy,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function pV(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ay),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gV(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new As(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function $p(t,e,n){const r=pe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!wa(a))throw a;te(zy,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function f_(t,e,n){const r=pe(t);let s=ge.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=pe(c),m=f.xs.get(h);return m!==void 0?B.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,wr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:ge.min(),n?i:Te())).next(l=>(yV(r,n3(e),l),{documents:l,Qs:i})))}function yV(t,e,n){let r=t.Os.get(e)||ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class m_{constructor(){this.activeTargetIds=l3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vV{constructor(){this.Mo=new m_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new m_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="ConnectivityMonitor";class g_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(p_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(p_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function zp(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",wV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _V{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===kd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=zp(),l=this.zo(e,n.toUriEncodedString());te(lm,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=oi(d);return this.Jo(e,l,c,r,h).then(f=>(te(lm,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Jo(lm,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=wV[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class EV extends _V{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=zp();return new Promise((l,c)=>{const d=new vT;d.setWithCredentials(!0),d.listenOnce(xT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Uu.NO_ERROR:const f=d.getResponseJson();te(Vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Uu.TIMEOUT:te(Vt,`RPC '${e}' ${a} timed out`),c(new Z(U.DEADLINE_EXCEEDED,"Request time out"));break;case Uu.HTTP_ERROR:const m=d.getStatus();if(te(Vt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const C=x==null?void 0:x.error;if(C&&C.status&&C.message){const _=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(C.status);c(new Z(_,C.message))}else c(new Z(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Z(U.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{te(Vt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);te(Vt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=zp(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bT(),l=_T(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");te(Vt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,x=!1;const C=new bV({Yo:T=>{x?te(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(te(Vt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),te(Vt,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},Zo:()=>f.close()}),_=(T,E,w)=>{T.listen(E,S=>{try{w(S)}catch(D){setTimeout(()=>{throw D},0)}})};return _(f,cl.EventType.OPEN,()=>{x||(te(Vt,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),_(f,cl.EventType.CLOSE,()=>{x||(x=!0,te(Vt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(f))}),_(f,cl.EventType.ERROR,T=>{x||(x=!0,Jo(Vt,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),C.a_(new Z(U.UNAVAILABLE,"The operation could not be completed")))}),_(f,cl.EventType.MESSAGE,T=>{var E;if(!x){const w=T.data[0];Ae(!!w,16349);const S=w,D=(S==null?void 0:S.error)||((E=S[0])==null?void 0:E.error);if(D){te(Vt,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let j=function(A){const N=mt[A];if(N!==void 0)return iS(N)}(L),b=D.message;j===void 0&&(j=U.INTERNAL,b="Unknown error status: "+L+" with message "+D.message),x=!0,C.a_(new Z(j,b)),f.close()}else te(Vt,`RPC '${e}' stream ${s} received:`,w),C.u_(w)}}),_(l,wT.STAT_EVENT,T=>{T.stat===kp.PROXY?te(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===kp.NOPROXY&&te(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(t){return new C3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="PersistentStream";class _S{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Qr(n.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Z(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return te(y_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(te(y_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NV extends _S{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=A3(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?_r(a.readTime):ge.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Bp(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Op(c)?{documents:P3(i,c)}:{query:hS(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=lS(i,a.resumeToken);const d=Vp(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ge.min())>0){l.readTime=Od(i,a.snapshotVersion.toTimestamp());const d=Vp(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=O3(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Bp(this.serializer),n.removeTarget=e,this.q_(n)}}class TV extends _S{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=R3(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Bp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>k3(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{}class CV extends SV{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,Fp(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Fp(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class IV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qr(n),this.aa=!1):te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="RemoteStore";class jV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{oo(this)&&(te(qi,"Restarting streams for network reachability change."),await async function(c){const d=pe(c);d.Ea.add(4),await Ec(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Lh(d)}(this))})}),this.Ra=new IV(r,s)}}async function Lh(t){if(oo(t))for(const e of t.da)await e(!0)}async function Ec(t){for(const e of t.da)await e(!1)}function bS(t,e){const n=pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gy(n)?qy(n):ba(n).O_()&&Wy(n,e))}function Hy(t,e){const n=pe(t),r=ba(n);n.Ia.delete(e),r.O_()&&ES(n,e),n.Ia.size===0&&(r.O_()?r.L_():oo(n)&&n.Ra.set("Unknown"))}function Wy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ba(t).Y_(e)}function ES(t,e){t.Va.Ue(e),ba(t).Z_(e)}function qy(t){t.Va=new E3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ba(t).start(),t.Ra.ua()}function Gy(t){return oo(t)&&!ba(t).x_()&&t.Ia.size>0}function oo(t){return pe(t).Ea.size===0}function NS(t){t.Va=void 0}async function AV(t){t.Ra.set("Online")}async function kV(t){t.Ia.forEach((e,n)=>{Wy(t,e)})}async function RV(t,e){NS(t),Gy(t)?(t.Ra.ha(e),qy(t)):t.Ra.set("Unknown")}async function PV(t,e,n){if(t.Ra.set("Online"),e instanceof aS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){te(qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vd(t,r)}else if(e instanceof Hu?t.Va.Ze(e):e instanceof oS?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const r=await xS(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),ES(i,c);const f=new As(h.target,c,d,h.sequenceNumber);Wy(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){te(qi,"Failed to raise snapshot:",r),await Vd(t,r)}}async function Vd(t,e,n){if(!wa(e))throw e;t.Ea.add(1),await Ec(t),t.Ra.set("Offline"),n||(n=()=>xS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te(qi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Lh(t)})}function TS(t,e){return e().catch(n=>Vd(t,n,e))}async function Oh(t){const e=pe(t),n=Xs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ay;for(;DV(e);)try{const s=await pV(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,LV(e,s)}catch(s){await Vd(e,s)}SS(e)&&CS(e)}function DV(t){return oo(t)&&t.Ta.length<10}function LV(t,e){t.Ta.push(e);const n=Xs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function SS(t){return oo(t)&&!Xs(t).x_()&&t.Ta.length>0}function CS(t){Xs(t).start()}async function OV(t){Xs(t).ra()}async function MV(t){const e=Xs(t);for(const n of t.Ta)e.ea(n.mutations)}async function VV(t,e,n){const r=t.Ta.shift(),s=My.from(r,e,n);await TS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Oh(t)}async function FV(t,e){e&&Xs(t).X_&&await async function(r,s){if(function(a){return w3(a)&&a!==U.ABORTED}(s.code)){const i=r.Ta.shift();Xs(r).B_(),await TS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Oh(r)}}(t,e),SS(t)&&CS(t)}async function v_(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),te(qi,"RemoteStore received new credentials");const r=oo(n);n.Ea.add(3),await Ec(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Lh(n)}async function UV(t,e){const n=pe(t);e?(n.Ea.delete(2),await Lh(n)):e||(n.Ea.add(2),await Ec(n),n.Ra.set("Unknown"))}function ba(t){return t.ma||(t.ma=function(n,r,s){const i=pe(n);return i.sa(),new NV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:AV.bind(null,t),t_:kV.bind(null,t),r_:RV.bind(null,t),H_:PV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Gy(t)?qy(t):t.Ra.set("Unknown")):(await t.ma.stop(),NS(t))})),t.ma}function Xs(t){return t.fa||(t.fa=function(n,r,s){const i=pe(n);return i.sa(),new TV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:OV.bind(null,t),r_:FV.bind(null,t),ta:MV.bind(null,t),na:VV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Oh(t)):(await t.fa.stop(),t.Ta.length>0&&(te(qi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Ky(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qy(t,e){if(Qr("AsyncQueue",`${e}: ${t}`),wa(t))return new Z(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Uo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(){this.ga=new tt(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):he(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class sa{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new sa(e,n,Uo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $V{constructor(){this.queries=w_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=pe(n),i=s.queries;s.queries=w_(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Z(U.ABORTED,"Firestore shutting down"))}}function w_(){return new io(t=>WT(t),jh)}async function Yy(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new BV,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Qy(a,`Initialization of query '${go(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Jy(n)}async function Xy(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zV(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Jy(n)}function HV(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Jy(t){t.Ca.forEach(e=>{e.next()})}var Hp,__;(__=Hp||(Hp={})).Ma="default",__.Cache="cache";class Zy{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.key=e}}class jS{constructor(e){this.key=e}}class WV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=qT(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new x_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),x=Ah(this.query,f)?f:null,C=!!m&&this.mutatedKeys.has(m.key),_=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let T=!1;m&&x?m.data.isEqual(x.data)?C!==_&&(r.track({type:3,doc:x}),T=!0):this.su(m,x)||(r.track({type:2,doc:x}),T=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),T=!0):m&&!x&&(r.track({type:1,doc:m}),T=!0,(c||d)&&(l=!0)),T&&(x?(a=a.add(x),i=_?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(x,C){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:T})}};return _(x)-_(C)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new sa(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new x_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new jS(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new IS(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ev="SyncEngine";class qV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GV{constructor(e){this.key=e,this.hu=!1}}class KV{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new io(l=>WT(l),jh),this.Iu=new Map,this.Eu=new Set,this.du=new tt(ce.comparator),this.Au=new Map,this.Ru=new Uy,this.Vu={},this.mu=new Map,this.fu=ra.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QV(t,e,n=!0){const r=LS(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await AS(r,e,n,!0),s}async function YV(t,e){const n=LS(t);await AS(n,e,!0,!1)}async function AS(t,e,n,r){const s=await gV(t.localStore,wr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await XV(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&bS(t.remoteStore,s),l}async function XV(t,e,n,r,s){t.pu=(f,m,x)=>async function(_,T,E,w){let S=T.view.ru(E);S.Cs&&(S=await f_(_.localStore,T.query,!1).then(({documents:b})=>T.view.ru(b,S)));const D=w&&w.targetChanges.get(T.targetId),L=w&&w.targetMismatches.get(T.targetId)!=null,j=T.view.applyChanges(S,_.isPrimaryClient,D,L);return E_(_,T.targetId,j.au),j.snapshot}(t,f,m,x);const i=await f_(t.localStore,e,!0),a=new WV(e,i.Qs),l=a.ru(i.documents),c=bc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);E_(t,n,d.au);const h=new qV(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function JV(t,e,n){const r=pe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!jh(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $p(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hy(r.remoteStore,s.targetId),Wp(r,s.targetId)}).catch(xa)):(Wp(r,s.targetId),await $p(r.localStore,s.targetId,!0))}async function ZV(t,e){const n=pe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hy(n.remoteStore,r.targetId))}async function e6(t,e,n){const r=a6(t);try{const s=await function(a,l){const c=pe(a),d=Ke.now(),h=l.reduce((x,C)=>x.add(C.key),Te());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let C=Yr(),_=Te();return c.Ns.getEntries(x,h).next(T=>{C=T,C.forEach((E,w)=>{w.isValidDocument()||(_=_.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,C)).next(T=>{f=T;const E=[];for(const w of l){const S=m3(w,f.get(w.key).overlayedDocument);S!=null&&E.push(new di(w.key,S,OT(S.value.mapValue),Mn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,E,l)}).next(T=>{m=T;const E=T.applyToLocalDocumentSet(f,_);return c.documentOverlayCache.saveOverlays(x,T.batchId,E)})}).then(()=>({batchId:m.batchId,changes:KT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new tt(Ne)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Nc(r,s.changes),await Oh(r.remoteStore)}catch(s){const i=Qy(s,"Failed to persist write");n.reject(i)}}async function kS(t,e){const n=pe(t);try{const r=await fV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ae(a.hu,14607):s.removedDocuments.size>0&&(Ae(a.hu,42227),a.hu=!1))}),await Nc(n,r,e)}catch(r){await xa(r)}}function b_(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=pe(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&Jy(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t6(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new tt(ce.comparator);a=a.insert(i,Bt.newNoDocument(i,ge.min()));const l=Te().add(i),c=new Ph(ge.min(),new Map,new tt(Ne),a,l);await kS(r,c),r.du=r.du.remove(i),r.Au.delete(e),tv(r)}else await $p(r.localStore,e,!1).then(()=>Wp(r,e,n)).catch(xa)}async function n6(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await hV(n.localStore,e);PS(n,r,null),RS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nc(n,s)}catch(s){await xa(s)}}async function r6(t,e,n){const r=pe(t);try{const s=await function(a,l){const c=pe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Ae(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);PS(r,e,n),RS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nc(r,s)}catch(s){await xa(s)}}function RS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function PS(t,e,n){const r=pe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||DS(t,r)})}function DS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Hy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tv(t))}function E_(t,e,n){for(const r of n)r instanceof IS?(t.Ru.addReference(r.key,e),s6(t,r)):r instanceof jS?(te(ev,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||DS(t,r.key)):he(19791,{wu:r})}function s6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(te(ev,"New document in limbo: "+n),t.Eu.add(r),tv(t))}function tv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce($e.fromString(e)),r=t.fu.next();t.Au.set(r,new GV(n)),t.du=t.du.insert(n,r),bS(t.remoteStore,new As(wr(Ih(n.path)),r,"TargetPurposeLimboResolution",Th.ce))}}async function Nc(t,e,n){const r=pe(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=$y.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=pe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(d,m=>B.forEach(m.Es,x=>h.persistence.referenceDelegate.addReference(f,m.targetId,x)).next(()=>B.forEach(m.ds,x=>h.persistence.referenceDelegate.removeReference(f,m.targetId,x)))))}catch(f){if(!wa(f))throw f;te(zy,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const x=h.Ms.get(m),C=x.snapshotVersion,_=x.withLastLimboFreeSnapshotVersion(C);h.Ms=h.Ms.insert(m,_)}}}(r.localStore,i))}async function i6(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){te(ev,"User change. New user:",e.toKey());const r=await vS(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Z(U.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nc(n,r.Ls)}}function o6(t,e){const n=pe(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function LS(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t6.bind(null,e),e.Pu.H_=zV.bind(null,e.eventManager),e.Pu.yu=HV.bind(null,e.eventManager),e}function a6(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r6.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return dV(this.persistence,new lV,e.initialUser,this.serializer)}Cu(e){return new yS(By.mi,this.serializer)}Du(e){return new vV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class l6 extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ae(this.persistence.referenceDelegate instanceof Md,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new G3(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new yS(r=>Md.mi(r,n),this.serializer)}}class qp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>b_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=i6.bind(null,this.syncEngine),await UV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $V}()}createDatastore(e){const n=Dh(e.databaseInfo.databaseId),r=function(i){return new EV(i)}(e.databaseInfo);return function(i,a,l,c){return new CV(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new jV(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>b_(this.syncEngine,n,0),function(){return g_.v()?new g_:new xV}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new KV(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=pe(s);te(qi,"RemoteStore shutting down."),i.Ea.add(5),await Ec(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}qp.provider={build:()=>new qp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="FirestoreClient";class c6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{te(Js,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(te(Js,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function um(t,e){t.asyncQueue.verifyOperationInProgress(),te(Js,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await vS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function N_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await u6(t);te(Js,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>v_(e.remoteStore,s)),t._onlineComponents=e}async function u6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te(Js,"Using user provided OfflineComponentProvider");try{await um(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Jo("Error using user provided cache. Falling back to memory cache: "+n),await um(t,new Fd)}}else te(Js,"Using default OfflineComponentProvider"),await um(t,new l6(void 0));return t._offlineComponents}async function rv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te(Js,"Using user provided OnlineComponentProvider"),await N_(t,t._uninitializedComponentsProvider._online)):(te(Js,"Using default OnlineComponentProvider"),await N_(t,new qp))),t._onlineComponents}function d6(t){return rv(t).then(e=>e.syncEngine)}function h6(t){return rv(t).then(e=>e.datastore)}async function Ud(t){const e=await rv(t),n=e.eventManager;return n.onListen=QV.bind(null,e.syncEngine),n.onUnlisten=JV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZV.bind(null,e.syncEngine),n}function f6(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new nv({next:m=>{h.Nu(),a.enqueueAndForget(()=>Xy(i,f));const x=m.docs.has(l);!x&&m.fromCache?d.reject(new Z(U.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&c&&c.source==="server"?d.reject(new Z(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new Zy(Ih(l.path),h,{includeMetadataChanges:!0,qa:!0});return Yy(i,f)}(await Ud(t),t.asyncQueue,e,n,r)),r.promise}function m6(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new nv({next:m=>{h.Nu(),a.enqueueAndForget(()=>Xy(i,f)),m.fromCache&&c.source==="server"?d.reject(new Z(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new Zy(l,h,{includeMetadataChanges:!0,qa:!0});return Yy(i,f)}(await Ud(t),t.asyncQueue,e,n,r)),r.promise}function p6(t,e,n){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await h6(t);r.resolve(async function(a,l,c){var _;const d=pe(a),{request:h,gt:f,parent:m}=D3(d.serializer,t3(l),c);d.connection.$o||delete h.parent;const x=(await d.Ho("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(T=>!!T.result);Ae(x.length===1,64727);const C=(_=x[0].result)==null?void 0:_.aggregateFields;return Object.keys(C).reduce((T,E)=>(T[f[E]]=C[E],T),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firestore.googleapis.com",S_=!0;class C_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MS,this.ssl=S_}else this.host=e.host,this.ssl=e.ssl??S_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<W3)throw new Z(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vM;switch(r.type){case"firstParty":return new bM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=T_.get(n);r&&(te("ComponentProvider","Removing Datastore"),T_.delete(n),r.terminate())}(this),Promise.resolve()}}function g6(t,e,n,r={}){var d;t=tn(t,Mh);const s=oi(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(cy(`https://${l}`),uy("Firestore",!0)),i.host!==MS&&i.host!==l&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!qr(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ft.MOCK_USER;else{h=oN(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Z(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ft(m)}t._authCredentials=new xM(new NT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(wc(n,st._jsonSchema))return new st(e,r||null,new ce($e.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:yt("string",st._jsonSchemaVersion),referencePath:yt("string")};class Hs extends ss{constructor(e,n,r){super(e,n,Ih(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new ce(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function kt(t,e,...n){if(t=Be(t),TT("collection","path",e),t instanceof Mh){const r=$e.fromString(e,...n);return U0(r),new Hs(t,null,r)}{if(!(t instanceof st||t instanceof Hs))throw new Z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return U0(r),new Hs(t.firestore,null,r)}}function ze(t,e,...n){if(t=Be(t),arguments.length===1&&(e=jy.newId()),TT("doc","path",e),t instanceof Mh){const r=$e.fromString(e,...n);return F0(r),new st(t,null,new ce(r))}{if(!(t instanceof st||t instanceof Hs))throw new Z(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return F0(r),new st(t.firestore,t instanceof Hs?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="AsyncQueue";class j_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wS(this,"async_queue_retry"),this._c=()=>{const r=cm();r&&te(I_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=cm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=cm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wa(e))throw e;te(I_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Qr("INTERNAL UNHANDLED ERROR: ",A_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Ky.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&he(47125,{Pc:A_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function A_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Sr extends Mh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new j_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new j_(e),this._firestoreClient=void 0,await e}}}function y6(t,e){const n=typeof t=="object"?t:vh(),r=typeof t=="string"?t:kd,s=ai(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=rN("firestore");i&&g6(s,...i)}return s}function Tc(t){if(t._terminated)throw new Z(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||v6(t),t._firestoreClient}function v6(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new UM(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,OS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new c6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class w6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Lt.fromBase64String(e))}catch(n){throw new Z(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wc(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:yt("string",Dn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(wc(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:yt("string",br._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wc(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new Z(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:yt("string",Er._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=/^__.*__$/;class b6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new di(e,this.data,this.fieldMask,n,this.fieldTransforms):new _c(e,this.data,n,this.fieldTransforms)}}class VS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:t})}}class Fh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FS(this.Ac)&&_6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class E6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Dh(e)}Cc(e,n,r,s=!1){return new Fh({Ac:e,methodName:n,Dc:r,path:At.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uh(t){const e=t._freezeSettings(),n=Dh(t._databaseId);return new E6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function US(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);ov("Data must be an object, but it was:",a,r);const l=BS(r,a);let c,d;if(i.merge)c=new En(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Gp(e,f,n);if(!a.contains(m))throw new Z(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zS(h,m)||h.push(m)}c=new En(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new b6(new un(l),c,d)}class Bh extends Sc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bh}}function N6(t,e,n){return new Fh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sv extends Sc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=N6(this,e,!0),r=this.vc.map(i=>Ea(i,n)),s=new na(r);return new nS(e.path,s)}isEqual(e){return e instanceof sv&&qr(this.vc,e.vc)}}class iv extends Sc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new rc(e.serializer,XT(e.serializer,this.Fc));return new nS(e.path,n)}isEqual(e){return e instanceof iv&&this.Fc===e.Fc}}function T6(t,e,n,r){const s=t.Cc(1,e,n);ov("Data must be an object, but it was:",s,r);const i=[],a=un.empty();ui(r,(c,d)=>{const h=av(e,c,n);d=Be(d);const f=s.yc(h);if(d instanceof Bh)i.push(h);else{const m=Ea(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new En(i);return new VS(a,l,s.fieldTransforms)}function S6(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[Gp(e,r,n)],c=[s];if(i.length%2!=0)throw new Z(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Gp(e,i[m])),c.push(i[m+1]);const d=[],h=un.empty();for(let m=l.length-1;m>=0;--m)if(!zS(d,l[m])){const x=l[m];let C=c[m];C=Be(C);const _=a.yc(x);if(C instanceof Bh)d.push(x);else{const T=Ea(C,_);T!=null&&(d.push(x),h.set(x,T))}}const f=new En(d);return new VS(h,f,a.fieldTransforms)}function C6(t,e,n,r=!1){return Ea(n,t.Cc(r?4:3,e))}function Ea(t,e){if($S(t=Be(t)))return ov("Unsupported field value:",e,t),BS(t,e);if(t instanceof Sc)return function(r,s){if(!FS(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Ea(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Od(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Od(s.serializer,i)}}if(r instanceof br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:lS(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(a,l){return{mapValue:{fields:{[DT]:{stringValue:LT},[Rd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ly(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Nh(r)}`)}(t,e)}function BS(t,e){const n={};return IT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ui(t,(r,s)=>{const i=Ea(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $S(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof br||t instanceof Dn||t instanceof st||t instanceof Sc||t instanceof Er)}function ov(t,e,n){if(!$S(n)||!ST(n)){const r=Nh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Gp(t,e,n){if((e=Be(e))instanceof Vh)return e._internalPath;if(typeof e=="string")return av(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const I6=new RegExp("[~\\*/\\[\\]]");function av(t,e,n){if(e.search(I6)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vh(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Z(U.INVALID_ARGUMENT,l+t+c)}function zS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($h("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class j6 extends HS{data(){return super.data()}}function $h(t,e){return typeof e=="string"?av(t,e):e instanceof Vh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lv{}class cv extends lv{}function Xr(t,e,...n){let r=[];e instanceof lv&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof uv).length,l=i.filter(c=>c instanceof zh).length;if(a>1||a>0&&l>0)throw new Z(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class zh extends cv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zh(e,n,r)}_apply(e){const n=this._parse(e);return qS(e._query,n),new ss(e.firestore,e.converter,Mp(e._query,n))}_parse(e){const n=Uh(e.firestore);return function(i,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){D_(f,h);const C=[];for(const _ of f)C.push(P_(c,i,_));m={arrayValue:{values:C}}}else m=P_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||D_(f,h),m=C6(l,a,f,h==="in"||h==="not-in");return gt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wn(t,e,n){const r=e,s=$h("where",t);return zh._create(s,r,n)}class uv extends lv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)qS(a,c),a=Mp(a,c)}(e._query,n),new ss(e.firestore,e.converter,Mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dv extends cv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dv(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new Z(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tc(i,a)}(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new _a(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Gi(t,e="asc"){const n=e,r=$h("orderBy",t);return dv._create(r,n)}class hv extends cv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hv(e,n,r)}_apply(e){return new ss(e.firestore,e.converter,Dd(e._query,this._limit,this._limitType))}}function R_(t){return hv._create("limit",t,"F")}function P_(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new Z(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&n.indexOf("/")!==-1)throw new Z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!ce.isDocumentKey(r))throw new Z(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return K0(t,new ce(r))}if(n instanceof st)return K0(t,n._key);throw new Z(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function D_(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qS(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class A6{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ui(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Rd].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>lt(a.doubleValue));return new Er(n)}convertGeoPoint(e){return new br(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ch(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const n=Ks(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);Ae(pS(r),9688,{name:e});const s=new Zl(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||Qr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function k6(){return new x6("count")}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pi extends HS{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($h("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Pi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Pi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pi._jsonSchema={type:yt("string",Pi._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Wu extends Pi{data(e={}){return super.data(e)}}class Di{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wu(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Wu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Wu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:R6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Di._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function R6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){t=tn(t,st);const e=tn(t.firestore,Sr);return f6(Tc(e),t._key).then(n=>XS(e,t,n))}Di._jsonSchemaVersion="firestore/querySnapshot/1.0",Di._jsonSchema={type:yt("string",Di._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Hh extends A6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function sr(t){t=tn(t,ss);const e=tn(t.firestore,Sr),n=Tc(e),r=new Hh(e);return WS(t._query),m6(n,t._query).then(s=>new Di(e,r,t,s))}function KS(t,e,n){t=tn(t,st);const r=tn(t.firestore,Sr),s=GS(t.converter,e);return Wh(r,[US(Uh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mn.none())])}function dn(t,e,n,...r){t=tn(t,st);const s=tn(t.firestore,Sr),i=Uh(s);let a;return a=typeof(e=Be(e))=="string"||e instanceof Vh?S6(i,"updateDoc",t._key,e,n,r):T6(i,"updateDoc",t._key,e),Wh(s,[a.toMutation(t._key,Mn.exists(!0))])}function P6(t){return Wh(tn(t.firestore,Sr),[new Oy(t._key,Mn.none())])}function QS(t,e){const n=tn(t.firestore,Sr),r=ze(t),s=GS(t.converter,e);return Wh(n,[US(Uh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}function YS(t,...e){var c,d,h;t=Be(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||k_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(k_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof st)a=tn(t.firestore,Sr),l=Ih(t._key.path),i={next:f=>{e[r]&&e[r](XS(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=tn(t,ss);a=tn(f.firestore,Sr),l=f._query;const m=new Hh(a);i={next:x=>{e[r]&&e[r](new Di(a,m,f,x))},error:e[r+1],complete:e[r+2]},WS(t._query)}return function(m,x,C,_){const T=new nv(_),E=new Zy(x,T,C);return m.asyncQueue.enqueueAndForget(async()=>Yy(await Ud(m),E)),()=>{T.Nu(),m.asyncQueue.enqueueAndForget(async()=>Xy(await Ud(m),E))}}(Tc(a),l,s,i)}function Wh(t,e){return function(r,s){const i=new xr;return r.asyncQueue.enqueueAndForget(async()=>e6(await d6(r),s,i)),i.promise}(Tc(t),e)}function XS(t,e,n){const r=n.docs.get(e._key),s=new Hh(t);return new Pi(t,s,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}function mu(t){return D6(t,{count:k6()})}function D6(t,e){const n=tn(t.firestore,Sr),r=Tc(n),s=VM(e,(i,a)=>new v3(a,i.aggregateType,i._internalFieldPath));return p6(r,t._query,s).then(i=>function(l,c,d){const h=new Hh(l);return new w6(c,h,d)}(n,t,i))}function Kp(...t){return new sv("arrayUnion",t)}function L6(t){return new iv("increment",t)}(function(e,n=!0){(function(s){va=s})(so),nr(new Un("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Sr(new wM(r.getProvider("auth-internal")),new EM(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),gn(L0,O0,e),gn(L0,O0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firebasestorage.googleapis.com",ZS="storageBucket",O6=2*60*1e3,M6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends zn{constructor(e,n,r=0){super(dm(e),`Firebase Storage: ${n} (${dm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function dm(t){return"storage/"+t}function fv(){const t="An unknown error occurred, please check the error payload for server response.";return new ot(it.UNKNOWN,t)}function V6(t){return new ot(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function F6(t){return new ot(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function U6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(it.UNAUTHENTICATED,t)}function B6(){return new ot(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $6(t){return new ot(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function z6(){return new ot(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H6(){return new ot(it.CANCELED,"User canceled the upload/download.")}function W6(t){return new ot(it.INVALID_URL,"Invalid URL '"+t+"'.")}function q6(t){return new ot(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function G6(){return new ot(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZS+"' property when initializing the app?")}function K6(){return new ot(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q6(){return new ot(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Y6(t){return new ot(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qp(t){return new ot(it.INVALID_ARGUMENT,t)}function eC(){return new ot(it.APP_DELETED,"The Firebase app was deleted.")}function X6(t){return new ot(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new ot(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function el(t){throw new ot(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Nn.makeFromUrl(e,n)}catch{return new Nn(e,"")}if(r.path==="")return r;throw q6(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(D){D.path_=decodeURIComponent(D.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",x=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),C={bucket:1,path:3},_=n===JS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",E=new RegExp(`^https?://${_}/${s}/${T}`,"i"),S=[{regex:l,indices:c,postModify:i},{regex:x,indices:C,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let D=0;D<S.length;D++){const L=S[D],j=L.regex.exec(e);if(j){const b=j[L.indices.bucket];let y=j[L.indices.path];y||(y=""),r=new Nn(b,y),L.postModify(r);break}}if(r==null)throw W6(e);return r}}class J6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...T){d||(d=!0,e.apply(null,T))}function f(T){s=setTimeout(()=>{s=null,t(x,c())},T)}function m(){i&&clearTimeout(i)}function x(T,...E){if(d){m();return}if(T){m(),h.call(null,T,...E);return}if(c()||a){m(),h.call(null,T,...E);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,f(S)}let C=!1;function _(T){C||(C=!0,m(),!d&&(s!==null?(T||(l=2),clearTimeout(s),f(0)):T||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,_(!0)},n),_}function eF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(t){return t!==void 0}function nF(t){return typeof t=="object"&&!Array.isArray(t)}function mv(t){return typeof t=="string"||t instanceof String}function L_(t){return pv()&&t instanceof Blob}function pv(){return typeof Blob<"u"}function O_(t,e,n,r){if(r<e)throw Qp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Qp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function tC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Li;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Li||(Li={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,n,r,s,i,a,l,c,d,h,f,m=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,_)=>{this.resolve_=C,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===Li.NO_ERROR,c=i.getStatus();if(!l||rF(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Li.ABORT;r(!1,new pu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new pu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());tF(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=fv();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?eC():H6();a(c)}else{const c=z6();a(c)}};this.canceled_?n(!1,new pu(!1,null,!0)):this.backoffId_=Z6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function iF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function lF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cF(t,e,n,r,s,i,a=!0,l=!1){const c=tC(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return aF(h,e),iF(h,n),oF(h,i),lF(h,r),new sF(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dF(...t){const e=uF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(pv())return new Blob(t);throw new ot(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(t){if(typeof atob>"u")throw Y6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hm{constructor(e,n){this.data=e,this.contentType=n||null}}function mF(t,e){switch(t){case mr.RAW:return new hm(nC(e));case mr.BASE64:case mr.BASE64URL:return new hm(rC(t,e));case mr.DATA_URL:return new hm(gF(e),yF(e))}throw fv()}function nC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function pF(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(mr.DATA_URL,"Malformed data URL.")}return nC(e)}function rC(t,e){switch(t){case mr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case mr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fF(e)}catch(s){throw s.message.includes("polyfill")?s:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class sC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(mr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=vF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gF(t){const e=new sC(t);return e.base64?rC(mr.BASE64,e.rest):pF(e.rest)}function yF(t){return new sC(t).contentType}function vF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){let r=0,s="";L_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(L_(this.data_)){const r=this.data_,s=hF(r,e,n);return s===null?null:new Ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ss(r,!0)}}static getBlob(...e){if(pv()){const n=e.map(r=>r instanceof Ss?r.data_:r);return new Ss(dF.apply(null,n))}else{const n=e.map(a=>mv(a)?mF(mr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new Ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){let e;try{e=JSON.parse(t)}catch{return null}return nF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function oC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t,e){return e}class Qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||_F}}let gu=null;function bF(t){return!mv(t)||t.length<2?t:oC(t)}function aC(){if(gu)return gu;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(i,a){return bF(a)}const n=new Qt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Qt("size");return s.xform=r,t.push(s),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),gu=t,gu}function EF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Nn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function NF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return EF(r,t),r}function lC(t,e,n){const r=iC(e);return r===null?null:NF(t,r,n)}function TF(t,e,n,r){const s=iC(e);if(s===null||!mv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,m="/b/"+a(h)+"/o/"+a(f),x=gv(m,n,r),C=tC({alt:"media",token:d});return x+C})[0]}function SF(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class cC{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){if(!t)throw fv()}function CF(t,e){function n(r,s){const i=lC(t,s,e);return uC(i!==null),i}return n}function IF(t,e){function n(r,s){const i=lC(t,s,e);return uC(i!==null),TF(i,s,t.host,t._protocol)}return n}function dC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=B6():s=U6():n.getStatus()===402?s=F6(t.bucket):n.getStatus()===403?s=$6(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function jF(t){const e=dC(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=V6(t.path)),i.serverResponse=s.serverResponse,i}return n}function AF(t,e,n){const r=e.fullServerUrl(),s=gv(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new cC(s,i,IF(t,n),a);return l.errorHandler=jF(e),l}function kF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function RF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kF(null,e)),r}function PF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let S="";for(let D=0;D<2;D++)S=S+Math.random().toString().slice(2);return S}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=RF(e,r,s),h=SF(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",x=Ss.getBlob(f,r,m);if(x===null)throw K6();const C={name:d.fullPath},_=gv(i,t.host,t._protocol),T="POST",E=t.maxUploadRetryTime,w=new cC(_,T,CF(t,n),E);return w.urlParams=C,w.headers=a,w.body=x.uploadData(),w.errorHandler=dC(e),w}class DF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Li.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Li.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Li.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw el("cannot .send() more than once");if(oi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw el("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw el("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw el("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw el("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LF extends DF{initXhr(){this.xhr_.responseType="text"}}function hC(){return new LF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this._service=e,n instanceof Nn?this._location=n:this._location=Nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ki(e,n)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oC(this._location.path)}get storage(){return this._service}get parent(){const e=xF(this._location.path);if(e===null)return null;const n=new Nn(this._location.bucket,e);return new Ki(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw X6(e)}}function OF(t,e,n){t._throwIfRoot("uploadBytes");const r=PF(t.storage,t._location,aC(),new Ss(e,!0),n);return t.storage.makeRequestWithTokens(r,hC).then(s=>({metadata:s,ref:t}))}function MF(t){t._throwIfRoot("getDownloadURL");const e=AF(t.storage,t._location,aC());return t.storage.makeRequestWithTokens(e,hC).then(n=>{if(n===null)throw Q6();return n})}function VF(t,e){const n=wF(t._location.path,e),r=new Nn(t._location.bucket,n);return new Ki(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){return/^[A-Za-z]+:\/\//.test(t)}function UF(t,e){return new Ki(t,e)}function fC(t,e){if(t instanceof yv){const n=t;if(n._bucket==null)throw G6();const r=new Ki(n,n._bucket);return e!=null?fC(r,e):r}else return e!==void 0?VF(t,e):t}function BF(t,e){if(e&&FF(e)){if(t instanceof yv)return UF(t,e);throw Qp("To use ref(service, url), the first argument must be a Storage instance.")}else return fC(t,e)}function M_(t,e){const n=e==null?void 0:e[ZS];return n==null?null:Nn.makeFromBucketSpec(n,t)}function $F(t,e,n,r={}){t.host=`${e}:${n}`;const s=oi(e);s&&(cy(`https://${t.host}/b`),uy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:oN(i,t.app.options.projectId))}class yv{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=JS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=O6,this._maxUploadRetryTime=M6,this._requests=new Set,s!=null?this._bucket=Nn.makeFromBucketSpec(s,this._host):this._bucket=M_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=M_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ki(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new J6(eC());{const a=cF(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const V_="@firebase/storage",F_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="storage";function zF(t,e,n){return t=Be(t),OF(t,e,n)}function HF(t){return t=Be(t),MF(t)}function WF(t,e){return t=Be(t),BF(t,e)}function qF(t=vh(),e){t=Be(t);const r=ai(t,mC).getImmediate({identifier:e}),s=rN("storage");return s&&GF(r,...s),r}function GF(t,e,n,r={}){$F(t,e,n,r)}function KF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new yv(n,r,s,e,so)}function QF(){nr(new Un(mC,KF,"PUBLIC").setMultipleInstances(!0)),gn(V_,F_,""),gn(V_,F_,"esm2020")}QF();const YF={apiKey:"AIzaSyAVk3CIK5hyAmjwVPh1p4i01vq-0Z5IsEA",authDomain:"zedctf.firebaseapp.com",projectId:"zedctf",storageBucket:"zedctf.firebasestorage.app",messagingSenderId:"574551910114",appId:"1:574551910114:web:8bcce937be224e1575a0bb",measurementId:"G-MEYRJGR69W"},qh=fN(YF);fM(qh);const sc=GL(qh),ve=y6(qh),XF=qF(qh),pC=g.createContext({user:null,loading:!0}),gC=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(!0);return g.useEffect(()=>LD(sc,a=>{n(a),s(!1)}),[]),o.jsx(pC.Provider,{value:{user:e,loading:r},children:t})},Hn=()=>{const t=g.useContext(pC);if(!t)throw new Error("useAuthContext must be used within an AuthProvider");return t},yC=g.createContext({isAdmin:!1,isModerator:!1,permissions:[],loading:!0}),JF=({children:t})=>{const{user:e}=Hn(),[n,r]=g.useState({isAdmin:!1,isModerator:!1,permissions:[],loading:!0});return g.useEffect(()=>{if(!e){console.log(" AdminProvider: No user found"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1});return}return console.log(" AdminProvider: Checking user role for UID:",e.uid),YS(ze(ve,"users",e.uid),i=>{if(i.exists()){const a=i.data();console.log(" User document found:",a);const l=a.role||"user",c=a.permissions||["read"];console.log(" User role:",l),console.log(" User permissions:",c),r({isAdmin:l==="admin",isModerator:l==="moderator"||l==="admin",permissions:c,loading:!1})}else console.log(" No user document found in Firestore"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})},i=>{console.error(" Firestore error in AdminContext:",i),console.error("Error details:",i.code,i.message),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})})},[e]),o.jsx(yC.Provider,{value:n,children:t})},Gh=()=>{const t=g.useContext(yC);if(!t)throw new Error("useAdminContext must be used within an AdminProvider");return t},ZF=({children:t})=>{const{loading:e}=Hn();return e?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsx(o.Fragment,{children:t})},fs=({children:t})=>{const{user:e,loading:n}=Hn();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(ly,{to:"/login",replace:!0})},e5=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Gh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):!e&&!n?o.jsx(ly,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:t})},wi=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Gh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):e||n?o.jsx(ly,{to:"/admin",replace:!0}):o.jsx(o.Fragment,{children:t})};function U_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Cc(...t){return e=>{let n=!1;const r=t.map(s=>{const i=U_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():U_(t[s],null)}}}}function ft(...t){return g.useCallback(Cc(...t),t)}var t5=Symbol.for("react.lazy"),$d=Jd[" use ".trim().toString()];function n5(t){return typeof t=="object"&&t!==null&&"then"in t}function vC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===t5&&"_payload"in t&&n5(t._payload)}function vv(t){const e=s5(t),n=g.forwardRef((r,s)=>{let{children:i,...a}=r;vC(i)&&typeof $d=="function"&&(i=$d(i._payload));const l=g.Children.toArray(i),c=l.find(o5);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var r5=vv("Slot");function s5(t){const e=g.forwardRef((n,r)=>{let{children:s,...i}=n;if(vC(s)&&typeof $d=="function"&&(s=$d(s._payload)),g.isValidElement(s)){const a=l5(s),l=a5(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var i5=Symbol("radix.slottable");function o5(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===i5}function a5(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function l5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function xC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=xC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=xC(t))&&(r&&(r+=" "),r+=e);return r}const B_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,$_=wC,Kh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return $_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=B_(h)||B_(f);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...x}=h;return Object.entries(x).every(C=>{let[_,T]=C;return Array.isArray(T)?T.includes({...i,...l}[_]):{...i,...l}[_]===T})?[...d,f,m]:d},[]);return $_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},xv="-",c5=t=>{const e=d5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(xv);return l[0]===""&&l.length!==1&&l.shift(),_C(l,e)||u5(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},_C=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?_C(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(xv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},z_=/^\[(.+)\]$/,u5=t=>{if(z_.test(t)){const e=z_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},d5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return f5(Object.entries(t.classGroups),n).forEach(([i,a])=>{Yp(a,r,i,e)}),r},Yp=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:H_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(h5(s)){Yp(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Yp(a,H_(e,i),n,r)})})},H_=(t,e)=>{let n=t;return e.split(xv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},h5=t=>t.isThemeGetter,f5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,m5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},bC="!",p5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let T=0;T<l.length;T++){let E=l[T];if(d===0){if(E===s&&(r||l.slice(T,T+i)===e)){c.push(l.slice(h,T)),h=T+i;continue}if(E==="/"){f=T;continue}}E==="["?d++:E==="]"&&d--}const m=c.length===0?l:l.substring(h),x=m.startsWith(bC),C=x?m.substring(1):m,_=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:C,maybePostfixModifierPosition:_}};return n?l=>n({className:l,parseClassName:a}):a},g5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},y5=t=>({cache:m5(t.cacheSize),parseClassName:p5(t),...c5(t)}),v5=/\s+/,x5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(v5);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:x}=n(d);let C=!!x,_=r(C?m.substring(0,x):m);if(!_){if(!C){l=d+(l.length>0?" "+l:l);continue}if(_=r(m),!_){l=d+(l.length>0?" "+l:l);continue}C=!1}const T=g5(h).join(":"),E=f?T+bC:T,w=E+_;if(i.includes(w))continue;i.push(w);const S=s(_,C);for(let D=0;D<S.length;++D){const L=S[D];i.push(E+L)}l=d+(l.length>0?" "+l:l)}return l};function w5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=EC(e))&&(r&&(r+=" "),r+=n);return r}const EC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=EC(t[r]))&&(n&&(n+=" "),n+=e);return n};function _5(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=y5(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=x5(c,n);return s(c,h),h}return function(){return i(w5.apply(null,arguments))}}const qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},NC=/^\[(?:([a-z-]+):)?(.+)\]$/i,b5=/^\d+\/\d+$/,E5=new Set(["px","full","screen"]),N5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,T5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,kr=t=>Bo(t)||E5.has(t)||b5.test(t),ms=t=>Na(t,"length",O5),Bo=t=>!!t&&!Number.isNaN(Number(t)),fm=t=>Na(t,"number",Bo),tl=t=>!!t&&Number.isInteger(Number(t)),j5=t=>t.endsWith("%")&&Bo(t.slice(0,-1)),xe=t=>NC.test(t),ps=t=>N5.test(t),A5=new Set(["length","size","percentage"]),k5=t=>Na(t,A5,TC),R5=t=>Na(t,"position",TC),P5=new Set(["image","url"]),D5=t=>Na(t,P5,V5),L5=t=>Na(t,"",M5),nl=()=>!0,Na=(t,e,n)=>{const r=NC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},O5=t=>T5.test(t)&&!S5.test(t),TC=()=>!1,M5=t=>C5.test(t),V5=t=>I5.test(t),F5=()=>{const t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),s=qe("borderColor"),i=qe("borderRadius"),a=qe("borderSpacing"),l=qe("borderWidth"),c=qe("contrast"),d=qe("grayscale"),h=qe("hueRotate"),f=qe("invert"),m=qe("gap"),x=qe("gradientColorStops"),C=qe("gradientColorStopPositions"),_=qe("inset"),T=qe("margin"),E=qe("opacity"),w=qe("padding"),S=qe("saturate"),D=qe("scale"),L=qe("sepia"),j=qe("skew"),b=qe("space"),y=qe("translate"),A=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",xe,e],I=()=>[xe,e],k=()=>["",kr,ms],$=()=>["auto",Bo,xe],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",xe],ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[Bo,xe];return{cacheSize:500,separator:":",theme:{colors:[nl],spacing:[kr,ms],blur:["none","",ps,xe],brightness:V(),borderColor:[t],borderRadius:["none","","full",ps,xe],borderSpacing:I(),borderWidth:k(),contrast:V(),grayscale:q(),hueRotate:V(),invert:q(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[j5,ms],inset:R(),margin:R(),opacity:V(),padding:I(),saturate:V(),scale:V(),sepia:q(),skew:V(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[ps]}],"break-after":[{"break-after":ie()}],"break-before":[{"break-before":ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),xe]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tl,xe]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",tl,xe]}],"grid-cols":[{"grid-cols":[nl]}],"col-start-end":[{col:["auto",{span:["full",tl,xe]},xe]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[nl]}],"row-start-end":[{row:["auto",{span:[tl,xe]},xe]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[T]}],mx:[{mx:[T]}],my:[{my:[T]}],ms:[{ms:[T]}],me:[{me:[T]}],mt:[{mt:[T]}],mr:[{mr:[T]}],mb:[{mb:[T]}],ml:[{ml:[T]}],"space-x":[{"space-x":[b]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[b]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[ps]},ps]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ps,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fm]}],"font-family":[{font:[nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",Bo,fm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",kr,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",kr,ms]}],"underline-offset":[{"underline-offset":["auto",kr,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),R5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",k5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},D5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[kr,xe]}],"outline-w":[{outline:[kr,ms]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:k()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[kr,ms]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ps,L5]}],"shadow-color":[{shadow:[nl]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ps,xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[tl,xe]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[kr,ms,fm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},U5=_5(F5);function Le(...t){return U5(wC(t))}const B5=Kh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-all duration-300 shadow-[0_0_20px_rgba(0,255,136,0.3)] hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",terminal:"bg-card border border-primary/30 text-primary hover:border-primary hover:bg-primary/10 font-mono"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),X=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?r5:"button";return o.jsx(a,{className:Le(B5({variant:e,size:n,className:t})),ref:i,...s})});X.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...z5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:SC("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(H5,{ref:i,iconNode:e,className:SC(`lucide-${$5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=ne("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=ne("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=ne("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ne("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ne("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=ne("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=ne("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=ne("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=ne("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=ne("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=ne("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=ne("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=ne("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=ne("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=ne("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=ne("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=ne("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=ne("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ne("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=ne("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=ne("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=ne("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=ne("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ne("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=ne("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),gU="/ZedCTF/favicon.png",dt=()=>{var C;const[t,e]=g.useState(!1),{user:n}=Hn(),{isAdmin:r,isModerator:s,loading:i}=Gh(),a=$n(),l=no(),[c,d]=g.useState(!1),h=async()=>{d(!0);try{await OD(sc),a("/"),e(!1)}catch(_){console.error("Error signing out:",_)}finally{d(!1)}},f=_=>l.pathname===_,m=!i&&(r||s),x=!i&&!r&&!s;return o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-border bg-background/95 backdrop-blur-lg supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(Ue,{to:"/",className:"flex items-center gap-2",children:[o.jsx("img",{src:gU,alt:"ZedCTF",className:"w-8 h-8"}),o.jsx("span",{className:"text-2xl font-bold text-green-600",children:"ZedCTF"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[o.jsxs(Ue,{to:"/",className:`flex items-center gap-2 transition-colors group ${f("/")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(X_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Home"]}),x&&o.jsxs(Ue,{to:"/dashboard",className:`flex items-center gap-2 transition-colors group ${f("/dashboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(W_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Dashboard"]}),x&&o.jsxs(Ue,{to:"/practice",className:`flex items-center gap-2 transition-colors group ${f("/practice")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Xn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Practice"]}),x&&o.jsxs(Ue,{to:"/live",className:`flex items-center gap-2 transition-colors group ${f("/live")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(Y_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"LIVE CTF"]}),x&&o.jsxs(Ue,{to:"/leaderboard",className:`flex items-center gap-2 transition-colors group ${f("/leaderboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(nn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Leaderboard"]}),x&&o.jsxs(Ue,{to:"/writeups",className:`flex items-center gap-2 transition-colors group ${f("/writeups")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(zd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Writeups"]}),m&&o.jsxs(Ue,{to:"/admin",className:`flex items-center gap-2 transition-colors group ${f("/admin")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Xe,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Admin"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[x&&o.jsx(X,{variant:"ghost",size:"icon",className:"hidden sm:flex",children:o.jsx(ca,{className:"w-5 h-5"})}),x&&o.jsxs(X,{variant:"ghost",size:"icon",className:"relative",children:[o.jsx(q5,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx(X,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>e(!t),children:o.jsx(lU,{className:"w-5 h-5"})}),n?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-foreground/80 hidden sm:block",children:[n.displayName||((C=n.email)==null?void 0:C.split("@")[0]),m&&" (Admin)"]}),o.jsxs(X,{variant:"default",size:"sm",className:"bg-red-500 hover:bg-red-600 text-white gap-2",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(Z_,{className:"w-4 h-4"}),c?"...":"Logout"]})]}):o.jsx(Ue,{to:"/login",children:o.jsxs(X,{variant:"default",size:"sm",className:"bg-green-500 hover:bg-green-600 text-white gap-2",children:[o.jsx(Cn,{className:"w-4 h-4"}),"Sign In"]})})]})]}),t&&o.jsx("div",{className:"md:hidden border-t border-border bg-background/95 backdrop-blur-lg animate-fade-in",children:o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs(Ue,{to:"/",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(X_,{className:"w-5 h-5"}),"Home"]}),x&&o.jsxs(Ue,{to:"/dashboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/dashboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(W_,{className:"w-5 h-5"}),"Dashboard"]}),x&&o.jsxs(Ue,{to:"/practice",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/practice")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Xn,{className:"w-5 h-5"}),"Practice"]}),x&&o.jsxs(Ue,{to:"/live",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/live")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(Y_,{className:"w-5 h-5"}),"LIVE CTF"]}),x&&o.jsxs(Ue,{to:"/leaderboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/leaderboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(nn,{className:"w-5 h-5"}),"Leaderboard"]}),x&&o.jsxs(Ue,{to:"/writeups",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/writeups")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(zd,{className:"w-5 h-5"}),"Writeups"]}),m&&o.jsxs(Ue,{to:"/admin",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/admin")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Xe,{className:"w-5 h-5"}),"Admin"]}),o.jsx("div",{className:"px-4 pt-2 border-t border-border",children:n?o.jsxs(X,{variant:"default",className:"w-full justify-start gap-2 bg-red-500 hover:bg-red-600",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(Z_,{className:"w-4 h-4"}),c?"Signing out...":"Logout"]}):o.jsx(Ue,{to:"/login",onClick:()=>e(!1),children:o.jsxs(X,{variant:"default",className:"w-full justify-start gap-2 bg-green-500 hover:bg-green-600",children:[o.jsx(Cn,{className:"w-4 h-4"}),"Sign In"]})})})]})})]})})},yU="/ZedCTF/assets/hero-bg-x4dJ88o_.jpg",vU=()=>{const[t,e]=g.useState({totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0}),[n,r]=g.useState(!0),s=$n(),i=async()=>{try{const c={totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0},d=["users","user","members","profiles"];for(const x of d)try{const _=(await mu(kt(ve,x))).data().count;if(_>0){c.totalUsers=_;break}}catch{continue}const h=["challenges","challenge","ctfChallenges","practice"];for(const x of h)try{const _=(await mu(kt(ve,x))).data().count;if(_>0){c.totalChallenges=_;break}}catch{continue}const f=["events","event","liveEvents","competitions"];for(const x of f)try{const _=(await mu(kt(ve,x))).data().count;if(_>0){c.liveEvents=_;break}}catch{continue}const m=["submissions","submission","solves","completions"];for(const x of m)try{const _=(await mu(kt(ve,x))).data().count;if(_>0){c.totalCompletions=_;break}}catch{continue}if(c.totalCompletions===0&&c.totalUsers>0)try{const x=await sr(kt(ve,"users"));let C=0;x.forEach(_=>{const T=_.data();C+=T.challengesSolved||T.solvedChallenges||T.totalSolved||0}),c.totalCompletions=C}catch{}e(c)}catch{console.log("Stats loading completed")}finally{r(!1)}};g.useEffect(()=>{i()},[]);const a=()=>{s("/practice")},l=()=>{s("/live")};return o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:`url(${yU})`}}),o.jsx("div",{className:"absolute inset-0 cyber-grid opacity-10"}),o.jsx("div",{className:"container relative z-10 px-4 py-32",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border border-primary/30 bg-primary/5 mb-4",children:[o.jsx(AC,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm text-primary font-mono",children:"Zambia's Premier CTF Platform"})]}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:["Master Cybersecurity",o.jsx("br",{}),o.jsx("span",{className:"neon-text animate-pulse-glow",children:"Capture The Flag"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Sharpen your hacking skills, compete in real-time challenges, and climb the leaderboard. From beginner to expert, ZedCTF is your gateway to cybersecurity mastery."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[o.jsxs(X,{onClick:a,variant:"neon",size:"lg",className:"group",children:["Start Practicing",o.jsx(W5,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),o.jsxs(X,{onClick:l,variant:"terminal",size:"lg",children:[o.jsx(J5,{className:"w-5 h-5"}),"Join LIVE Event"]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 pt-12 max-w-3xl mx-auto",children:[o.jsx(yu,{loading:n,value:t.totalUsers,label:"Registered Users",icon:o.jsx(nn,{className:"w-5 h-5"})}),o.jsx(yu,{loading:n,value:t.totalChallenges,label:"Challenges",icon:o.jsx(Xe,{className:"w-5 h-5"})}),o.jsx(yu,{loading:n,value:t.liveEvents,label:"Live Events",icon:o.jsx(Ic,{className:"w-5 h-5"})}),o.jsx(yu,{loading:n,value:t.totalCompletions,label:"Completions",icon:o.jsx(Xn,{className:"w-5 h-5"})})]}),!n&&o.jsx("div",{className:"mt-4",children:o.jsx(X,{variant:"outline",size:"sm",onClick:i,children:"Refresh Stats"})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent"})]})},yu=({loading:t,value:e,label:n,icon:r})=>t?o.jsxs("div",{className:"text-center animate-pulse",children:[o.jsx("div",{className:"h-8 bg-muted rounded w-16 mx-auto mb-2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-20 mx-auto"})]}):o.jsxs("div",{className:"text-center group",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl md:text-3xl font-bold text-primary mb-1",children:[r,e.toLocaleString()]}),o.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:n})]}),ht=()=>o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Xe,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-2xl font-bold neon-text",children:"ZedCTF"})]}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Zambia's premier platform for cybersecurity challenges and training."}),o.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:"An initiative by IT Society of Kapasa Makasa University"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Platform"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsx(Ue,{to:"/dashboard",className:"hover:text-primary transition-colors",children:"Dashboard"})}),o.jsx("li",{children:o.jsx(Ue,{to:"/practice",className:"hover:text-primary transition-colors",children:"Practice"})}),o.jsx("li",{children:o.jsx(Ue,{to:"/live",className:"hover:text-primary transition-colors",children:"LIVE Events"})}),o.jsx("li",{children:o.jsx(Ue,{to:"/leaderboard",className:"hover:text-primary transition-colors",children:"Leaderboard"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Resources"}),o.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:o.jsx("li",{children:o.jsx(Ue,{to:"/writeups",className:"hover:text-primary transition-colors",children:"Walkthroughs"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Connect"}),o.jsxs("div",{className:"flex gap-4 mb-4",children:[o.jsx("a",{href:"https://github.com/ZedCTF/ZedCTF",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(nU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(mU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(oU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(kC,{className:"w-5 h-5"})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-sm mb-2 text-primary flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),"Contributors"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[o.jsx("a",{href:"https://github.com/SokoJames",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"James Soko"}),o.jsx("a",{href:"https://github.com/abbymwale24",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Abby Mwale"}),o.jsx("a",{href:"https://github.com/Joylad-Jangazya",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Joylad Jangazya"}),o.jsx("a",{href:"https://github.com/Kono-hub",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Mary Chanda"}),o.jsx("a",{href:"https://github.com/ronny-brawn",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Aaron Nyakapanda"}),o.jsx("a",{href:"https://github.com/threat23",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Humphery Chileshe"})]})]})]})]}),o.jsxs("div",{className:"pt-8 border-t border-border text-center text-sm text-muted-foreground",children:[o.jsx("p",{children:" 2025 ZedCTF. All rights reserved. Made with  in Zambia"}),o.jsx("p",{className:"mt-1",children:"IT Society of Kapasa Makasa University"})]})]})}),xU=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(dt,{}),o.jsx(vU,{}),o.jsx(ht,{})]}),wU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({email:"",password:"",rememberMe:!1}),h=$n(),f=new Dr;f.addScope("read:user"),f.addScope("user:email");const m=async E=>{try{const w=await ia(ze(ve,"users",E));if(w.exists()){const S=w.data();if(S.role==="admin"||S.role==="moderator")return"/admin"}return"/dashboard"}catch(w){return console.error("Error checking user role:",w),"/dashboard"}},x=async E=>{E.preventDefault(),l(""),i(!0);try{const w=await kD(sc,c.email,c.password),S=await m(w.user.uid);h(S)}catch(w){console.error("Login error:",w),l(_(w.code))}finally{i(!1)}},C=async()=>{var E,w,S;r(!0),l("");try{const L=(await nL(sc,f)).user;if(!(await ia(ze(ve,"users",L.uid))).exists())await KS(ze(ve,"users",L.uid),{uid:L.uid,firstName:((E=L.displayName)==null?void 0:E.split(" ")[0])||"GitHub",lastName:((w=L.displayName)==null?void 0:w.split(" ").slice(1).join(" "))||"User",username:((S=L.email)==null?void 0:S.split("@")[0])||`github_${L.uid.slice(0,8)}`,email:L.email,displayName:L.displayName||"GitHub User",photoURL:L.photoURL,provider:"github",role:"user",isActive:!0,createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard");else{const b=await m(L.uid);h(b)}}catch(D){console.error("GitHub login error:",D),D.code==="auth/account-exists-with-different-credential"?l("An account already exists with the same email address but different sign-in credentials."):D.code==="auth/popup-closed-by-user"?console.log("GitHub login popup closed by user"):l("GitHub login failed. Please try again.")}finally{r(!1)}},_=E=>{switch(E){case"auth/invalid-email":return"Invalid email address format.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/account-exists-with-different-credential":return"An account already exists with the same email address but different sign-in credentials.";default:return"Login failed. Please try again."}},T=E=>{const{name:w,value:S,type:D,checked:L}=E.target;d(j=>({...j,[w]:D==="checkbox"?L:S}))};return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Xe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-muted-foreground",children:"Access your cybersecurity dashboard"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsx("div",{className:"relative",children:o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:T,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:T,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all pr-12",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(Xp,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{name:"rememberMe",type:"checkbox",checked:c.rememberMe,onChange:T,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2",disabled:s}),o.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Remember me"})]}),o.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"})]}),o.jsxs("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Wd,{className:"w-5 h-5 animate-spin"}):o.jsx(aU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),s?"Signing in...":"Sign In"]})]}),o.jsxs("div",{className:"my-6 flex items-center",children:[o.jsx("div",{className:"flex-1 border-t border-border"}),o.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"or continue with"}),o.jsx("div",{className:"flex-1 border-t border-border"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.jsxs("button",{onClick:C,disabled:n||s,className:"flex items-center justify-center gap-2 px-4 py-3 bg-muted/50 border border-border rounded-lg text-foreground hover:bg-muted transition-colors hover:border-primary group disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(Wd,{className:"w-5 h-5 animate-spin"}):o.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),n?"Signing in with GitHub...":"Continue with GitHub"]})}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["New to ZedCTF?"," ",o.jsx(Ue,{to:"/signup",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Create an account"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(ht,{})]})},_U=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:"",agreeToTerms:!1}),h=$n(),f=async C=>{if(C.preventDefault(),l(""),c.password!==c.confirmPassword){l("Passwords don't match!");return}if(c.password.length<6){l("Password should be at least 6 characters");return}if(!c.agreeToTerms){l("Please agree to the terms and conditions");return}i(!0);try{const T=(await AD(sc,c.email,c.password)).user;await VN(T,{displayName:`${c.firstName} ${c.lastName}`.trim()}),await KS(ze(ve,"users",T.uid),{uid:T.uid,firstName:c.firstName,lastName:c.lastName,username:c.username,email:c.email,displayName:`${c.firstName} ${c.lastName}`.trim(),createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard")}catch(_){console.error("Registration error:",_),l(m(_.code))}finally{i(!1)}},m=C=>{switch(C){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak.";default:return"Registration failed. Please try again."}},x=C=>{const{name:_,value:T,type:E,checked:w}=C.target;d(S=>({...S,[_]:E==="checkbox"?w:T}))};return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Xe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Join the Community"}),o.jsx("p",{className:"text-muted-foreground",children:"Start your cybersecurity journey today"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground mb-2",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:c.firstName,onChange:x,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"John",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground mb-2",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:c.lastName,onChange:x,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Doe",disabled:s})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(kC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:x,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-foreground mb-2",children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:x,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"cyber_hacker",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(J_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:x,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(Xp,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(J_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",required:!0,value:c.confirmPassword,onChange:x,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:n?o.jsx(Xp,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-start",children:o.jsxs("label",{className:"flex items-start",children:[o.jsx("input",{name:"agreeToTerms",type:"checkbox",checked:c.agreeToTerms,onChange:x,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2 mt-1",disabled:s}),o.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["I agree to the"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Terms of Service"})," ","and"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Privacy Policy"})]})]})}),o.jsxs("button",{type:"submit",disabled:s||!c.agreeToTerms,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(Wd,{className:"w-5 h-5 animate-spin"}):o.jsx(pU,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),s?"Creating Account...":"Create Account"]})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",o.jsx(Ue,{to:"/login",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(ht,{})]})},bU=()=>{const[t,e]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(""),[h,f]=g.useState("all"),[m,x]=g.useState("all"),[C,_]=g.useState("all"),[T,E]=g.useState(!0),[w]=g.useState(!1),S=async()=>{try{E(!0);const b=await fetch("/api/writeups");if(b.ok){const y=await b.json();e(y),r(y);const A=Array.from(new Set(y.map(R=>R.category))).filter(Boolean),N=Array.from(new Set(y.map(R=>R.difficulty))).filter(Boolean);i(A),l(N)}else e([]),r([]),i([]),l([])}catch{e([]),r([]),i([]),l([])}finally{E(!1)}};g.useEffect(()=>{S()},[]),g.useEffect(()=>{let j=t;c&&(j=j.filter(b=>b.title.toLowerCase().includes(c.toLowerCase())||b.description.toLowerCase().includes(c.toLowerCase())||b.tags.some(y=>y.toLowerCase().includes(c.toLowerCase())))),h!=="all"&&(j=j.filter(b=>b.category===h)),m!=="all"&&(j=j.filter(b=>b.difficulty===m)),C!=="all"&&(j=j.filter(b=>b.status===C)),r(j)},[c,h,m,C,t]);const D=j=>{switch(j){case"approved":return o.jsx(Fr,{className:"w-4 h-4 text-green-400"});case"rejected":return o.jsx(aa,{className:"w-4 h-4 text-red-400"});default:return o.jsx(Ic,{className:"w-4 h-4 text-yellow-400"})}},L=j=>{switch(j.toLowerCase()){case"easy":return"bg-primary/20 text-primary border-primary/30";case"medium":return"bg-secondary/20 text-secondary border-secondary/30";case"hard":return"bg-destructive/20 text-destructive border-destructive/30";case"insane":return"bg-purple-500/20 text-purple-500 border-purple-500/30";case"expert":return"bg-red-500/20 text-red-500 border-red-500/30";case"beginner":return"bg-green-500/20 text-green-500 border-green-500/30";default:return"bg-muted/20 text-muted-foreground border-muted/30"}};return T?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading writeups..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Community ",o.jsx("span",{className:"text-primary",children:"Writeups"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Learn from other players' solutions and share your own approaches"})]}),o.jsxs("div",{className:"bg-muted/20 border border-border rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(ca,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"Search writeups, tags, challenges...",value:c,onChange:j=>d(j.target.value),className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:j=>f(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Categories"}),s.map(j=>o.jsx("option",{value:j,children:j},j))]})}),o.jsx("div",{children:o.jsxs("select",{value:m,onChange:j=>x(j.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Difficulties"}),a.map(j=>o.jsx("option",{value:j,children:j},j))]})})]}),w&&o.jsx("div",{className:"mt-4",children:o.jsxs("select",{value:C,onChange:j=>_(j.target.value),className:"w-full md:w-auto px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"}),o.jsx("option",{value:"rejected",children:"Rejected"})]})})]}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(Ue,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center gap-2",children:[o.jsx(Zs,{className:"w-5 h-5"}),"New Writeup"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(j=>o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${L(j.difficulty)}`,children:j.difficulty}),o.jsxs("div",{className:"flex items-center gap-1",children:[D(j.status),o.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:j.status})]})]}),o.jsx("span",{className:"inline-block px-2 py-1 bg-primary/10 text-primary text-xs rounded border border-primary/20 mb-3",children:j.category}),o.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-3 group-hover:text-primary transition-colors line-clamp-2",children:j.title}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:j.description}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[o.jsx(zd,{className:"w-4 h-4"}),o.jsxs("span",{children:["Challenge: ",j.challenge]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[j.tags.slice(0,3).map((b,y)=>o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["#",b]},y)),j.tags.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["+",j.tags.length-3]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:o.jsx(Cn,{className:"w-3 h-3 text-primary"})}),o.jsx("span",{className:"text-sm text-muted-foreground",children:j.author.name})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ic,{className:"w-4 h-4"}),o.jsx("span",{children:j.views})]}),o.jsx("span",{children:new Date(j.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(Ue,{to:`/writeups/${j.id}`,className:"flex-1 bg-primary/10 text-primary border border-primary/20 py-2 px-4 rounded-lg text-center hover:bg-primary/20 transition-colors",children:"Read"}),w&&j.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 bg-green-500/10 text-green-500 border border-green-500/20 py-2 px-4 rounded-lg hover:bg-green-500/20 transition-colors",children:"Approve"}),o.jsx("button",{className:"flex-1 bg-red-500/10 text-red-500 border border-red-500/20 py-2 px-4 rounded-lg hover:bg-red-500/20 transition-colors",children:"Reject"})]})]})]},j.id))}),n.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(zd,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No writeups found"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:t.length===0?"No writeups have been submitted yet. Be the first to share your solution!":"Try adjusting your search or filters"}),o.jsxs(Ue,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 inline-flex items-center gap-2",children:[o.jsx(Zs,{className:"w-5 h-5"}),"Create First Writeup"]})]})]})}),o.jsx(ht,{})]})},EU=()=>{const t=$n(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(""),[f,m]=g.useState(""),[x,C]=g.useState(""),[_,T]=g.useState(!1),[E,w]=g.useState([]),[S,D]=g.useState([]),[L,j]=g.useState([]),[b,y]=g.useState(!0),A=async()=>{try{y(!0);const I="/api/challenges/available",k="/api/categories",$="/api/difficulties",[J,G,oe]=await Promise.all([fetch(I),fetch(k),fetch($)]);if(J.ok){const O=await J.json();w(O)}else w([]);if(G.ok){const O=await G.json();D(O),O.length>0&&h(O[0])}else D([]);if(oe.ok){const O=await oe.json();j(O),O.length>0&&m(O[0])}else j([])}catch{w([]),D([]),j([])}finally{y(!1)}},N=async I=>{I.preventDefault(),T(!0);try{(await fetch("/api/writeups/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:r,content:i,challengeId:l,category:d,difficulty:f,tags:x.split(",").map($=>$.trim()).filter($=>$)})})).ok?t("/writeups"):console.error("Failed to create writeup")}catch(k){console.error("Error creating writeup:",k)}finally{T(!1)}},R=(I,k)=>{document.execCommand(I,!1,k)};return g.useEffect(()=>{if(l){const I=E.find(k=>k.id===l);I&&(h(I.category),m(I.difficulty))}},[l,E]),g.useEffect(()=>{A()},[]),b?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading form data..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto max-w-4xl",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Create ",o.jsx("span",{className:"text-primary",children:"Writeup"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Share your solution and help others learn from your approach"})]}),o.jsxs("form",{id:"writeup-form",onSubmit:N,className:"space-y-8",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Basic Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Writeup Title *"}),o.jsx("input",{type:"text",required:!0,value:e,onChange:I=>n(I.target.value),placeholder:"Enter a compelling title for your writeup...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),o.jsx("textarea",{required:!0,value:r,onChange:I=>s(I.target.value),placeholder:"Brief description of your writeup...",rows:3,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Challenge *"}),o.jsxs("select",{required:!0,value:l,onChange:I=>c(I.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"",children:"Select a challenge"}),E.map(I=>o.jsx("option",{value:I.id,children:I.title},I.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category *"}),o.jsx("select",{required:!0,value:d,onChange:I=>h(I.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:S.map(I=>o.jsx("option",{value:I,children:I},I))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty *"}),o.jsx("select",{required:!0,value:f,onChange:I=>m(I.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:L.map(I=>o.jsx("option",{value:I,children:I},I))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("input",{type:"text",value:x,onChange:I=>C(I.target.value),placeholder:"Comma-separated tags (e.g., sql-injection, web, bypass)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Writeup Content"}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-3 bg-muted/20 rounded-lg border border-border",children:[o.jsx("button",{type:"button",onClick:()=>R("bold"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bold",children:o.jsx(G5,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("italic"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Italic",children:o.jsx(sU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("insertUnorderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bullet List",children:o.jsx(Jp,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("insertOrderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Numbered List",children:o.jsx(Jp,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const I=prompt("Enter URL:");I&&R("createLink",I)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Link",children:o.jsx(la,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>R("formatBlock","<pre>"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Code Block",children:o.jsx(Z5,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const I=prompt("Enter image URL:");I&&R("insertImage",I)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Image",children:o.jsx(rU,{className:"w-4 h-4 text-foreground"})})]}),o.jsx("div",{contentEditable:!0,onInput:I=>a(I.currentTarget.innerHTML),className:"min-h-[400px] px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all prose prose-invert max-w-none",style:{fontFamily:"Georgia, serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":"Start writing your amazing writeup here... You can include code snippets, images, and formatted text."}),o.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Pro tips:"})]}),o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsx("li",{children:"Use the toolbar above to format your text"}),o.jsx("li",{children:"Include code snippets using the code block button"}),o.jsx("li",{children:"Add images to illustrate your steps"}),o.jsx("li",{children:"Break down complex solutions into clear steps"}),o.jsx("li",{children:"Share your thought process and learning moments"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsxs("button",{type:"button",className:"flex items-center gap-2 px-6 py-3 bg-muted text-muted-foreground rounded-lg font-semibold hover:bg-muted/80 transition-colors",onClick:()=>t("/writeups"),children:[o.jsx(ic,{className:"w-4 h-4"}),"Cancel"]}),o.jsxs("button",{type:"submit",disabled:_,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[_?o.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}):o.jsx(RC,{className:"w-4 h-4"}),_?"Publishing...":"Publish Writeup"]})]})]})]})}),o.jsx(ht,{})]})},nb=()=>new Promise(t=>{setTimeout(()=>{const e={id:"github-"+Date.now(),username:"zedctf_user",email:"user@zedctf.com",name:"ZedCTF User",avatar:"https://github.com/github.png",provider:"github"};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true"),t(e)},1500)}),NU=()=>{const[t,e]=g.useState("loading"),[n,r]=g.useState(""),s=$n();return g.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search),l=a.get("code");if(a.get("error")){e("error"),r("GitHub authentication failed. Please try again.");return}try{if(await new Promise(d=>setTimeout(d,2e3)),l){const d=await nb();e("success"),r(`Welcome, ${d.username}! Successfully authenticated with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}else{const d=await nb();e("success"),r(`Welcome, ${d.username}! Successfully signed in with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}}catch(d){e("error"),r("Authentication failed. Please try again."),console.error("GitHub callback error:",d)}})()},[s]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx(Xe,{className:"w-10 h-10 text-green-400"}),o.jsx("span",{className:"text-3xl font-bold text-white",children:"ZedCTF"})]}),o.jsxs("div",{className:"space-y-4",children:[t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx(Wd,{className:"w-12 h-12 text-green-400 animate-spin mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Connecting to GitHub..."}),o.jsx("p",{className:"text-gray-300",children:"Please wait while we authenticate your account."})]}),t==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Fr,{className:"w-12 h-12 text-green-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Successful!"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Redirecting to homepage..."})]}),t==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(aa,{className:"w-12 h-12 text-red-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Failed"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Back to Login"}),o.jsx("button",{onClick:()=>s("/signup"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Try Sign Up"})]})]})]})]})})},TU=()=>{const t=no();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},ae=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ae.displayName="Card";const Pe=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));Pe.displayName="CardHeader";const De=g.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Le("text-2xl font-semibold leading-none tracking-tight",t),...e}));De.displayName="CardTitle";const Ht=g.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:Le("text-sm text-muted-foreground",t),...e}));Ht.displayName="CardDescription";const le=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("p-6 pt-0",t),...e}));le.displayName="CardContent";const SU=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("flex items-center p-6 pt-0",t),...e}));SU.displayName="CardFooter";const CU=({isOpen:t,onClose:e})=>{const{user:n}=Hn(),[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),d=g.useRef(null),[h,f]=g.useState({displayName:"",bio:"",role:"student",institution:""}),[m,x]=g.useState(null),[C,_]=g.useState("");g.useEffect(()=>{t&&n&&(async()=>{try{const b=await ia(ze(ve,"users",n.uid));if(b.exists()){const y=b.data();f({displayName:y.displayName||n.displayName||"",bio:y.bio||"",role:y.role||"student",institution:y.institution||""}),_(y.photoURL||n.photoURL||"")}else f({displayName:n.displayName||"",bio:"",role:"student",institution:""}),_(n.photoURL||"")}catch(b){console.error("Error fetching user data:",b)}})()},[t,n]);const T=j=>{const{name:b,value:y}=j.target;f(A=>({...A,[b]:y}))},E=async j=>{var y;const b=(y=j.target.files)==null?void 0:y[0];if(b){if(!b.type.startsWith("image/")){alert("Please select an image file");return}if(b.size>2*1024*1024){alert("Image size should be less than 2MB for faster upload");return}x(b);const A=URL.createObjectURL(b);_(A)}},w=(j,b=800,y=.8)=>new Promise((A,N)=>{const R=document.createElement("canvas"),I=R.getContext("2d"),k=new Image;k.onload=()=>{let $=k.width,J=k.height;$>b&&(J=J*b/$,$=b),R.width=$,R.height=J,I==null||I.drawImage(k,0,0,$,J),R.toBlob(G=>{if(G){const oe=new File([G],j.name,{type:"image/jpeg",lastModified:Date.now()});A(oe)}else N(new Error("Image compression failed"))},"image/jpeg",y)},k.onerror=N,k.src=URL.createObjectURL(j)}),S=async(j,b)=>{const y=await w(j),N=`profile_${Date.now()}.jpg`,R=WF(XF,`profile-pictures/${b}/${N}`),I=await zF(R,y);return await HF(I.ref)},D=async j=>{if(j.preventDefault(),!!n){s(!0),c(!1);try{let b=n.photoURL;if(m){a(!0);try{b=await S(m,n.uid),console.log("Profile image uploaded successfully")}catch(A){console.error("Error uploading image:",A)}finally{a(!1)}}const y=[];(h.displayName!==n.displayName||b!==n.photoURL)&&y.push(VN(n,{displayName:h.displayName,photoURL:b})),y.push(dn(ze(ve,"users",n.uid),{displayName:h.displayName,bio:h.bio,role:h.role,institution:h.institution,photoURL:b,updatedAt:new Date})),await Promise.all(y),console.log("Profile updated successfully"),c(!0),setTimeout(()=>{e(),window.location.reload()},1e3)}catch(b){console.error("Error updating profile:",b),alert("Failed to update profile. Please try again.")}finally{s(!1)}}},L=()=>{var j;(j=d.current)==null||j.click()};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",disabled:r,children:o.jsx(Qi,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[l&&o.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded flex items-center gap-2",children:[o.jsx(Fr,{className:"w-5 h-5"}),"Profile updated successfully!"]}),o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full bg-muted/50 border-2 border-border flex items-center justify-center overflow-hidden",children:C?o.jsx("img",{src:C,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Cn,{className:"w-12 h-12 text-muted-foreground"})}),o.jsx("button",{type:"button",onClick:L,disabled:i||r,className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 hover:bg-primary/90 transition-colors disabled:opacity-50",children:i?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(K5,{className:"w-4 h-4"})}),o.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:i||r})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:i?"Uploading image...":"Click the camera icon to upload a profile picture (max 2MB)"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-foreground mb-2",children:"Display Name"}),o.jsx("input",{id:"displayName",name:"displayName",type:"text",value:h.displayName,onChange:T,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Enter your display name",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-foreground mb-2",children:"Bio"}),o.jsx("textarea",{id:"bio",name:"bio",rows:3,value:h.bio,onChange:T,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none",placeholder:"Tell us about yourself...",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:"I am a"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"student",label:"Student",icon:wv},{value:"lecturer",label:"Lecturer",icon:nn},{value:"expert",label:"Expert",icon:CC},{value:"general",label:"General User",icon:Cn}].map(({value:j,label:b,icon:y})=>o.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-all ${h.role===j?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 text-foreground"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:j,checked:h.role===j,onChange:T,className:"hidden",disabled:r}),o.jsx(y,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:b})]},j))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-foreground mb-2",children:"Institution"}),o.jsx("input",{id:"institution",name:"institution",type:"text",value:h.institution,onChange:T,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Your school, university, or organization",disabled:r})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,disabled:r,className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r||i,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},IU=()=>{var D,L;const{user:t}=Hn(),e=$n(),[n,r]=g.useState(null),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(!1),[m,x]=g.useState(null),C=j=>{switch(j){case"student":return o.jsx(wv,{className:"w-4 h-4"});case"lecturer":return o.jsx(nn,{className:"w-4 h-4"});case"expert":return o.jsx(CC,{className:"w-4 h-4"});default:return o.jsx(Cn,{className:"w-4 h-4"})}},_=j=>{switch(j){case"student":return"Student";case"lecturer":return"Lecturer";case"expert":return"Expert";default:return"General User"}},T=j=>{try{if(!j)return"recently";let b;return j instanceof Date?b=j:j&&typeof j=="object"&&typeof j.toDate=="function"?b=j.toDate():typeof j=="string"?b=new Date(j):typeof j=="number"?b=new Date(j):b=new Date,isNaN(b.getTime())?"recently":b.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(b){return console.error("Date formatting error:",b),"recently"}},E=j=>{try{let b;if(j&&typeof j=="object"&&typeof j.toDate=="function")b=j.toDate();else if(j)b=new Date(j);else return"Recently";return isNaN(b.getTime())?"Recently":b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Recently"}},w=async()=>{var j,b,y,A,N,R;if(t)try{d(!0),console.log("Fetching real dashboard data for user:",t.uid);const I=await ia(ze(ve,"users",t.uid));if(I.exists()){const k=I.data();console.log("Real user data from Firestore:",k),x(k);const $=typeof k.challengesSolved=="number"?k.challengesSolved:k.challengesSolved&&parseInt(k.challengesSolved)||0;let J=k.createdAt;!J&&((j=t==null?void 0:t.metadata)!=null&&j.creationTime)&&(J=t.metadata.creationTime),r({totalPoints:k.totalPoints||0,challengesSolved:$,currentRank:k.currentRank||0,username:k.username||((b=t==null?void 0:t.email)==null?void 0:b.split("@")[0])||"Hacker",joinDate:J||new Date().toISOString(),firstName:k.firstName,lastName:k.lastName,displayName:k.displayName,bio:k.bio,role:k.role,institution:k.institution,photoURL:k.photoURL})}else{console.log("No user document found in Firestore");const k=((y=t==null?void 0:t.metadata)==null?void 0:y.creationTime)||new Date().toISOString();r({totalPoints:0,challengesSolved:0,currentRank:0,username:((A=t==null?void 0:t.email)==null?void 0:A.split("@")[0])||"Hacker",joinDate:k})}try{const k=Xr(kt(ve,"challenges"),wn("solvedBy","array-contains",t.uid),Gi("solvedAt","desc"),R_(5)),J=(await sr(k)).docs.map(G=>({id:G.id,...G.data()}));console.log("Real solved challenges:",J),i(J)}catch{console.log("No challenges collection or no solved challenges yet"),i([])}try{const k=Xr(kt(ve,"events"),wn("participants","array-contains",t.uid),Gi("date","desc"),R_(5)),J=(await sr(k)).docs.map(G=>({id:G.id,...G.data()}));console.log("Real events participated:",J),l(J)}catch{console.log("No events collection or no events participated yet"),l([])}}catch(I){console.error("Error fetching real dashboard data:",I);const k=((N=t==null?void 0:t.metadata)==null?void 0:N.creationTime)||new Date().toISOString();r({totalPoints:0,challengesSolved:0,currentRank:0,username:((R=t==null?void 0:t.email)==null?void 0:R.split("@")[0])||"Hacker",joinDate:k}),i([]),l([])}finally{d(!1)}},S=()=>{f(!1),setTimeout(()=>{w()},1e3)};return g.useEffect(()=>{t&&w()},[t]),c?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"dashboard",className:"pt-20 lg:pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading your dashboard..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"dashboard",className:"pt-20 lg:pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsx("div",{className:"mb-6 lg:mb-8",children:o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-primary/20 rounded-full flex items-center justify-center overflow-hidden border-2 border-primary/30",children:t!=null&&t.photoURL||m!=null&&m.photoURL?o.jsx("img",{src:(t==null?void 0:t.photoURL)||(m==null?void 0:m.photoURL),alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Cn,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"})}),o.jsx("button",{onClick:()=>f(!0),className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground rounded-full p-1 hover:bg-primary/90 transition-colors",title:"Edit Profile",children:o.jsx(PC,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold break-words",children:["Welcome back,"," ",o.jsx("span",{className:"text-primary",children:(n==null?void 0:n.displayName)||(t==null?void 0:t.displayName)||(n==null?void 0:n.username)||((D=t==null?void 0:t.email)==null?void 0:D.split("@")[0])||"Hacker"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"break-all",children:t==null?void 0:t.email}),(m==null?void 0:m.role)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsxs("div",{className:"flex items-center gap-1",children:[C(m.role),o.jsx("span",{children:_(m.role)})]})]}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsxs("span",{className:"text-xs sm:text-sm",children:["Member since"," ",T(n==null?void 0:n.joinDate)]})]}),(m==null?void 0:m.institution)&&o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:m.institution}),(m==null?void 0:m.bio)&&o.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1 line-clamp-2",children:m.bio})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 lg:mb-8",children:[o.jsxs(ae,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2 p-4",children:[o.jsx(De,{className:"text-sm font-medium text-muted-foreground",children:"Total Points"}),o.jsx(Xn,{className:"w-5 h-5 text-primary"})]}),o.jsxs(le,{className:"p-4 pt-0",children:[o.jsx("div",{className:"text-2xl lg:text-3xl font-bold mb-2",children:((L=n==null?void 0:n.totalPoints)==null?void 0:L.toLocaleString())||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"From correct challenge solutions"})]})]}),o.jsxs(ae,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2 p-4",children:[o.jsx(De,{className:"text-sm font-medium text-muted-foreground",children:"Current Rank"}),o.jsx(fU,{className:"w-5 h-5 text-primary"})]}),o.jsxs(le,{className:"p-4 pt-0",children:[o.jsxs("div",{className:"text-2xl lg:text-3xl font-bold mb-2",children:["#",(n==null?void 0:n.currentRank)||"0"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Global leaderboard position"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ae,{className:"border-border",children:[o.jsx(Pe,{className:"p-4 sm:p-6",children:o.jsxs(De,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[o.jsx(tb,{className:"w-5 h-5 text-primary"}),"Recently Solved Challenges"]})}),o.jsx(le,{className:"p-4 sm:p-6 pt-0",children:s.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(tb,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base",children:"No challenges solved yet"}),o.jsx("p",{className:"text-sm mt-2 mb-4",children:"Solve challenges to see them here"}),o.jsx("button",{onClick:()=>e("/challenges"),className:"px-6 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm",children:"Browse Challenges"})]}):o.jsx("div",{className:"space-y-4",children:s.map(j=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/20 border border-border hover:bg-muted/40 cursor-pointer transition-colors",onClick:()=>e(`/challenges/${j.id}`),children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base hover:text-primary transition-colors",children:j.title}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"capitalize",children:j.category}),o.jsx("span",{children:""}),o.jsx("span",{className:"capitalize",children:j.difficulty}),o.jsx("span",{children:""}),o.jsx("span",{children:E(j.solvedAt)})]})]}),o.jsxs("div",{className:"text-primary font-bold text-lg",children:["+",j.points]})]},j.id))})})]}),o.jsxs(ae,{className:"border-border",children:[o.jsx(Pe,{className:"p-4 sm:p-6",children:o.jsxs(De,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[o.jsx(oa,{className:"w-5 h-5 text-primary"}),"Events Participated In"]})}),o.jsx(le,{className:"p-4 sm:p-6 pt-0",children:a.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(oa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-base",children:"No events participated yet"}),o.jsx("p",{className:"text-sm mt-2 mb-4",children:"Join CTF events to compete"}),o.jsx("button",{onClick:()=>e("/events"),className:"px-6 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/90 transition-colors text-sm",children:"View Events"})]}):o.jsx("div",{className:"space-y-4",children:a.map(j=>o.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-base",children:j.name}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{children:j.date}),j.position&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Position: #",j.position]})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-secondary font-bold",children:j.prize}),j.pointsEarned>0&&o.jsxs("div",{className:"text-sm text-primary",children:["+",j.pointsEarned," pts"]})]})]},j.id))})})]})]})]})}),o.jsx(ht,{}),o.jsx(CU,{isOpen:h,onClose:S})]})},jU=Kh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Oe({className:t,variant:e,...n}){return o.jsx("div",{className:Le(jU({variant:e}),t),...n})}const me=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));me.displayName="Input";const AU=()=>{const{user:t}=Hn(),e=$n(),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[m,x]=g.useState(null),[C,_]=g.useState(""),[T,E]=g.useState(!1);g.useEffect(()=>{w()},[]),g.useEffect(()=>{D()},[h,m,n]);const w=async()=>{try{d(!0),_("");const I=Xr(kt(ve,"challenges"),wn("isActive","==",!0),wn("availableInPractice","==",!0)),$=(await sr(I)).docs.map(J=>({id:J.id,...J.data()}));r($),S($)}catch(I){console.error("Error fetching practice challenges:",I),_("Failed to load challenges. Please check your permissions.")}finally{d(!1)}},S=I=>{const k=new Map;I.forEach(G=>{const oe=G.finalCategory||G.category;k.set(oe,(k.get(oe)||0)+1)});const $={web:{color:"from-blue-500 to-cyan-500",icon:"",description:"Web application security, SQL injection, XSS, and more"},crypto:{color:"from-purple-500 to-pink-500",icon:"",description:"Cryptography, encryption, and cryptographic attacks"},forensics:{color:"from-orange-500 to-red-500",icon:"",description:"Digital forensics, file analysis, and data recovery"},pwn:{color:"from-red-500 to-rose-500",icon:"",description:"Binary exploitation, memory corruption, and reverse engineering"},reversing:{color:"from-indigo-500 to-purple-500",icon:"",description:"Reverse engineering and malware analysis"},misc:{color:"from-gray-500 to-slate-500",icon:"",description:"Miscellaneous challenges and various security topics"}},J=Array.from(k.entries()).map(([G,oe])=>{const O=$[G.toLowerCase()]||{color:"from-gray-500 to-slate-500",icon:"",description:"Various security challenges"};return{name:G,count:oe,icon:O.icon,color:O.color,description:O.description}});J.sort((G,oe)=>oe.count-G.count),i(J)},D=()=>{let I=[...n];h&&(I=I.filter(k=>k.title.toLowerCase().includes(h.toLowerCase())||k.description.toLowerCase().includes(h.toLowerCase()))),m&&(I=I.filter(k=>(k.finalCategory||k.category)===m)),I=I.sort((k,$)=>($.totalPoints||$.points)-(k.totalPoints||k.points)),l(I)},L=I=>{switch(I){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},j=I=>{switch(I){case"easy":return"Easy";case"medium":return"Medium";case"hard":return"Hard";case"expert":return"Expert";default:return I}},b=I=>{e(`/challenge/${I}`)},y=()=>{e("/live")},A=()=>{w()},N=()=>{f(""),x(null),E(!1)},R=I=>{x(I),E(!1)};return c?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading practice challenges..."})]})})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex justify-center mb-3",children:o.jsx(Xe,{className:"w-12 h-12 text-primary sm:w-16 sm:h-16"})}),o.jsx("h1",{className:"text-2xl sm:text-4xl font-bold mb-3 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Practice Challenges"}),o.jsx("p",{className:"text-sm sm:text-xl text-muted-foreground max-w-2xl mx-auto mb-4",children:"Master your cybersecurity skills with hands-on challenges"}),C&&o.jsx(ae,{className:"max-w-2xl mx-auto mb-4 border-red-200 bg-red-50",children:o.jsx(le,{className:"p-3 sm:p-4",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx(X5,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-600"}),o.jsx("p",{className:"text-red-800 text-sm sm:text-base",children:C})]})})}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 max-w-2xl mx-auto mb-6",children:[o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-primary",children:n.length}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Challenges"})]})}),o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-green-600",children:n.reduce((I,k)=>{var $;return I+((($=k.solvedBy)==null?void 0:$.length)||0)},0)}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Solves"})]})}),o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-2 sm:p-4",children:[o.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:s.length}),o.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Categories"})]})})]}),o.jsx(ae,{className:"max-w-4xl mx-auto mb-6 border bg-gradient-to-r from-primary/5 to-primary/10",children:o.jsx(le,{className:"p-4 sm:p-6",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ks,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),o.jsxs("div",{className:"text-left",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-lg",children:"Ready for Live Competition?"}),o.jsx("p",{className:"text-muted-foreground text-xs sm:text-base",children:"Test your skills in real-time events!"})]})]}),o.jsxs(X,{variant:"terminal",onClick:y,size:"sm",className:"w-full sm:w-auto",children:[o.jsx(ks,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Live Events"]})]})})})]}),o.jsxs("div",{className:"max-w-2xl mx-auto mb-6",children:[o.jsxs("div",{className:"flex gap-2 mb-3",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(ca,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(me,{placeholder:"Search challenges...",value:h,onChange:I=>f(I.target.value),className:"pl-10 h-10 text-sm border-2"})]}),o.jsx(X,{variant:"outline",size:"icon",onClick:()=>E(!T),className:"h-10 w-10",children:o.jsx(eU,{className:"h-4 w-4"})})]}),(h||m)&&o.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h&&o.jsxs(Oe,{variant:"secondary",className:"flex items-center gap-1",children:['Search: "',h,'"',o.jsx(Qi,{className:"w-3 h-3 cursor-pointer",onClick:()=>f("")})]}),m&&o.jsxs(Oe,{variant:"secondary",className:"flex items-center gap-1",children:["Category: ",m,o.jsx(Qi,{className:"w-3 h-3 cursor-pointer",onClick:()=>x(null)})]}),o.jsx(X,{variant:"ghost",size:"sm",onClick:N,className:"h-6 text-xs",children:"Clear All"})]})]}),!m&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Choose a Category"}),o.jsxs(X,{variant:"outline",onClick:A,size:"sm",children:[o.jsx(mm,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1 sm:mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),s.length>0?o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(I=>o.jsx(ae,{className:"border hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>R(I.name),children:o.jsxs(le,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:`text-xl sm:text-2xl bg-gradient-to-r ${I.color} rounded-lg p-2 sm:p-3`,children:I.icon}),o.jsx(G_,{className:"w-4 h-4 sm:w-5 sm:h-5 text-muted-foreground group-hover:text-primary transition-colors"})]}),o.jsx("h3",{className:"font-bold text-base sm:text-lg mb-1 group-hover:text-primary transition-colors",children:I.name}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm",children:[I.count," challenge",I.count!==1?"s":""]})]})},I.name))}):o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-8 sm:p-12",children:[o.jsx(tU,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Categories Available"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"No practice challenges are currently available. Check back later!"})]})})]}),m&&o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs(X,{variant:"outline",onClick:()=>x(null),className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm",size:"sm",children:[o.jsx(G_,{className:"w-3 h-3 sm:w-4 sm:h-4 rotate-180"}),"Back"]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold",children:[m," Challenges"]}),o.jsxs("p",{className:"text-muted-foreground text-sm",children:[a.length," challenge",a.length!==1?"s":""," available"]})]})]}),o.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[o.jsx(X,{variant:"outline",onClick:N,size:"sm",className:"text-xs",children:"Clear"}),o.jsx(X,{variant:"outline",onClick:A,size:"sm",children:o.jsx(mm,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),a.length>0?o.jsx("div",{className:"grid grid-cols-1 gap-3 sm:gap-4",children:a.map(I=>{var k,$,J,G;return o.jsx(ae,{className:"border hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>b(I.id),children:o.jsxs(le,{className:"p-4 sm:p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[o.jsx("h3",{className:"font-bold text-base sm:text-lg group-hover:text-primary transition-colors flex-1 mr-2",children:I.title}),o.jsx(Oe,{className:`${L(I.difficulty)} text-xs`,children:j(I.difficulty)})]}),o.jsx("p",{className:"text-muted-foreground text-sm mb-3 sm:mb-4 line-clamp-2",children:I.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(nn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),o.jsx("span",{children:((k=I.solvedBy)==null?void 0:k.length)||0})]}),o.jsxs(Oe,{variant:"outline",className:"font-mono font-bold text-xs",children:[I.totalPoints||I.points," pts"]})]}),I.createdAt&&o.jsx("div",{className:"text-muted-foreground text-xs",children:((G=(J=($=I.createdAt)==null?void 0:$.toDate)==null?void 0:J.call($))==null?void 0:G.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))||new Date(I.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})},I.id)})}):o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-8 sm:p-12",children:[o.jsx(ca,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Challenges Found"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mb-3 sm:mb-4",children:h?`No challenges match "${h}" in ${m}`:`No challenges available in ${m}`}),o.jsx(X,{variant:"outline",onClick:N,size:"sm",children:"Clear Search"})]})})]}),n.length===0&&!c&&!m&&o.jsx(ae,{className:"text-center border",children:o.jsxs(le,{className:"p-8 sm:p-12",children:[o.jsx(Xe,{className:"w-12 h-12 sm:w-16 sm:h-16 text-muted-foreground mx-auto mb-3 sm:mb-4 opacity-50"}),o.jsx("h3",{className:"text-lg sm:text-xl font-bold mb-2",children:"No Practice Challenges Available"}),o.jsx("p",{className:"text-muted-foreground text-sm sm:text-base mb-4 sm:mb-6",children:"Check back later for new practice challenges, or join a live event to test your skills."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 justify-center",children:[o.jsxs(X,{variant:"terminal",onClick:A,size:"sm",children:[o.jsx(mm,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"Refresh"]}),o.jsxs(X,{variant:"outline",onClick:y,size:"sm",children:[o.jsx(ks,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2"}),"View Live Events"]})]})]})})]})}),o.jsx(ht,{})]})},rb="/ZedCTF",kU=()=>{const{user:t}=Hn(),[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const m=Xr(kt(ve,"events"),wn("status","in",["LIVE","STARTING_SOON"]),Gi("startTime","asc")),x=Xr(kt(ve,"events"),wn("status","==","UPCOMING"),Gi("startTime","asc")),[C,_]=await Promise.all([sr(m),sr(x)]),T=C.docs.map(w=>({id:w.id,...w.data()})),E=_.docs.map(w=>{var S;return{id:w.id,...w.data(),registered:t&&((S=w.data().registeredUsers)==null?void 0:S.includes(t.uid))||!1}});n(T),s(E)}catch(m){console.error("Error fetching events:",m),n([]),s([])}finally{a(!1)}},c=async m=>{var x;if(!t){alert("Please log in to register for events");return}try{const C=ze(ve,"events",m);await dn(C,{registeredUsers:Kp(t.uid),participants:(((x=r.find(_=>_.id===m))==null?void 0:x.participants)||0)+1}),l()}catch(C){console.error("Failed to register for event:",C),alert("Failed to register for event. Please try again.")}},d=async m=>{var x;if(!t){alert("Please log in to join events");return}try{const C=ze(ve,"events",m);await dn(C,{participants:(((x=e.find(_=>_.id===m))==null?void 0:x.participants)||0)+1}),window.location.href=`${rb}/competition/${m}`}catch(C){console.error("Failed to join live event:",C),alert("Failed to join event. Please try again.")}},h=()=>{window.location.href=`${rb}/practice`};if(g.useEffect(()=>{l();const m=setInterval(l,1e4);return()=>clearInterval(m)},[t]),i)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading events..."})]})}),o.jsx(ht,{})]});const f=e[0];return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(ks,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[o.jsx("span",{className:"text-primary",children:"LIVE"})," Events"]}),o.jsx("p",{className:"text-muted-foreground",children:"Compete in real-time for prizes"})]}),f?o.jsxs(ae,{className:"max-w-4xl mx-auto border-primary/50 bg-gradient-to-br from-primary/5 to-transparent mb-8 animate-glow",children:[o.jsx(Pe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(De,{className:"text-2xl flex items-center gap-2",children:[o.jsxs("span",{className:"relative flex h-3 w-3",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-primary"})]}),f.title]}),o.jsx(Oe,{className:"bg-primary text-primary-foreground font-bold px-4 py-1",children:f.status==="LIVE"?"LIVE NOW":"STARTING SOON"})]})}),o.jsxs(le,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(Ic,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold font-mono",children:f.timeLeft}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Left"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(nn,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.participants}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Players"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Xn,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.prize}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Prize Pool"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(ks,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.difficulty}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Difficulty"})]})]}),o.jsxs(X,{variant:"neon",size:"lg",className:"w-full",onClick:()=>d(f.id),children:[o.jsx(ks,{className:"w-5 h-5"}),f.status==="LIVE"?"Join Event Now":"Prepare for Event"]})]})]}):o.jsx(ae,{className:"max-w-4xl mx-auto border-border mb-8",children:o.jsxs(le,{className:"p-12 text-center",children:[o.jsx(ks,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Live Events"}),o.jsx("p",{className:"text-muted-foreground",children:"Check back later for upcoming competitions"}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[o.jsx(Xe,{className:"w-12 h-12 text-primary mx-auto mb-3"}),o.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Want to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Sharpen your skills with our practice challenges while you wait for the next live event."}),o.jsxs(X,{variant:"terminal",onClick:h,children:[o.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Explore Practice Challenges"]})]})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Upcoming Events"}),r.length===0?o.jsx(ae,{className:"border-border",children:o.jsxs(le,{className:"p-8 text-center",children:[o.jsx(oa,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-muted-foreground",children:"No upcoming events scheduled"})]})}):o.jsx("div",{className:"space-y-4",children:r.map(m=>o.jsx(ae,{className:"border-border hover:border-primary/30 transition-all",children:o.jsx(le,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("h4",{className:"font-bold text-xl",children:m.title}),o.jsx(Oe,{variant:"outline",className:"border-primary/30 text-primary",children:m.difficulty})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(oa,{className:"w-4 h-4"}),m.date]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),m.participants," registered",m.maxParticipants&&` / ${m.maxParticipants} max`]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Xn,{className:"w-4 h-4"}),"Prize: ",m.prize]})]}),m.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:m.description})]}),o.jsx(X,{variant:m.registered?"outline":"terminal",className:"md:ml-4",onClick:()=>!m.registered&&c(m.id),disabled:m.registered,children:m.registered?"Registered ":"Register"})]})})},m.id))})]}),o.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:o.jsx(ae,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:o.jsxs(le,{className:"p-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ready to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Access our extensive library of practice challenges covering web security, cryptography, forensics, and more. Perfect for beginners and experts alike."}),o.jsxs(X,{variant:"terminal",size:"lg",onClick:h,children:[o.jsx(Xe,{className:"w-5 h-5 mr-2"}),"Explore Practice Challenges"]})]})})})]})}),o.jsx(ht,{})]})};function RU(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const d=f=>{var E;const{scope:m,children:x,...C}=f,_=((E=m==null?void 0:m[t])==null?void 0:E[c])||l,T=g.useMemo(()=>C,Object.values(C));return o.jsx(_.Provider,{value:T,children:x})};d.displayName=i+"Provider";function h(f,m){var _;const x=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,C=g.useContext(x);if(C)return C;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,PU(s,...e)]}function PU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Jr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var bt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},DU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bv=DU.reduce((t,e)=>{const n=vv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),LC={exports:{}},OC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ua=g;function LU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OU=typeof Object.is=="function"?Object.is:LU,MU=ua.useState,VU=ua.useEffect,FU=ua.useLayoutEffect,UU=ua.useDebugValue;function BU(t,e){var n=e(),r=MU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return FU(function(){s.value=n,s.getSnapshot=e,pm(s)&&i({inst:s})},[t,n,e]),VU(function(){return pm(s)&&i({inst:s}),t(function(){pm(s)&&i({inst:s})})},[t]),UU(n),n}function pm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!OU(t,n)}catch{return!0}}function $U(t,e){return e()}var zU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$U:BU;OC.useSyncExternalStore=ua.useSyncExternalStore!==void 0?ua.useSyncExternalStore:zU;LC.exports=OC;var HU=LC.exports;function WU(){return HU.useSyncExternalStore(qU,()=>!0,()=>!1)}function qU(){return()=>{}}var Ev="Avatar",[GU]=RU(Ev),[KU,MC]=GU(Ev),VC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return o.jsx(KU,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(bv.span,{...r,ref:e})})});VC.displayName=Ev;var FC="AvatarImage",UC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=MC(FC,n),l=QU(r,i),c=Jr(d=>{s(d),a.onImageLoadingStatusChange(d)});return bt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(bv.img,{...i,ref:e,src:r}):null});UC.displayName=FC;var BC="AvatarFallback",$C=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=MC(BC,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(bv.span,{...s,ref:e}):null});$C.displayName=BC;function sb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function QU(t,{referrerPolicy:e,crossOrigin:n}){const r=WU(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>sb(i,t));return bt(()=>{l(sb(i,t))},[i,t]),bt(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),a}var zC=VC,HC=UC,WC=$C;const qC=g.forwardRef(({className:t,...e},n)=>o.jsx(zC,{ref:n,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));qC.displayName=zC.displayName;const YU=g.forwardRef(({className:t,...e},n)=>o.jsx(HC,{ref:n,className:Le("aspect-square h-full w-full",t),...e}));YU.displayName=HC.displayName;const GC=g.forwardRef(({className:t,...e},n)=>o.jsx(WC,{ref:n,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));GC.displayName=WC.displayName;const XU=({eventName:t="CTF Competition"})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const c="/api/ctf/leaderboard",d="/api/platform/top-users",[h,f]=await Promise.all([fetch(c,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),fetch(d)]);if(h.ok){const m=await h.json();n(m)}else n([]);if(f.ok){const m=await f.json();s(m)}else s([])}catch{n([]),s([])}finally{a(!1)}};return g.useEffect(()=>{l();const c=setInterval(l,5e3);return()=>clearInterval(c)},[]),i?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"leaderboard",className:"pt-24 pb-16 bg-muted/20 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading leaderboard data..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"ctf-leaderboard",className:"pt-24 pb-16 bg-background min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Xn,{className:"w-12 h-12 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[t," - ",o.jsx("span",{className:"text-primary",children:"Live Scoreboard"})]})]}),o.jsxs(ae,{className:"max-w-6xl mx-auto border-border",children:[o.jsx(Pe,{className:"bg-muted/30",children:o.jsxs(De,{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(eb,{className:"w-5 h-5 text-primary"}),"Live Competition Rankings"]}),o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:e.length>0?`${e.length} Teams Competing`:"No active competition"})]})}),o.jsx(le,{className:"p-0",children:e.length===0?o.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[o.jsx(Xn,{className:"w-20 h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg mb-2",children:"No scores available yet"}),o.jsx("p",{className:"text-sm",children:"Leaderboard will update when competition starts"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Team"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Captain"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Activity"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Challenge"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:e.map(c=>o.jsxs("tr",{className:"hover:bg-muted/20 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`text-lg font-bold ${c.rank<=3?"text-primary":"text-foreground"}`,children:c.rank})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:c.team}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-muted-foreground",children:c.captain}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-lg font-bold text-primary",children:c.points})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:c.lastActivity}),o.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground max-w-xs truncate",children:c.challenge})]},c.rank))})]})})})]})]})}),o.jsx("section",{id:"platform-leaderboard",className:"py-16 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Xn,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Global ",o.jsx("span",{className:"text-primary",children:"Leaderboard"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Top performers this month"})]}),o.jsxs(ae,{className:"max-w-4xl mx-auto border-border",children:[o.jsx(Pe,{children:o.jsxs(De,{className:"flex items-center gap-2",children:[o.jsx(eb,{className:"w-5 h-5 text-primary"}),"Top Platform Hackers"]})}),o.jsx(le,{children:r.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Xn,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No platform rankings available yet"})]}):o.jsx("div",{className:"space-y-3",children:r.map(c=>o.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg transition-all duration-300 ${c.rank<=3?"bg-primary/10 border-2 border-primary/30 hover:border-primary/50":"bg-muted/30 border border-border hover:border-primary/30"}`,children:[o.jsx("div",{className:`text-2xl font-bold w-12 text-center ${c.rank<=3?"text-primary":"text-muted-foreground"}`,children:c.badge||`#${c.rank}`}),o.jsx(qC,{className:"w-12 h-12 border-2 border-primary/30",children:o.jsx(GC,{className:"bg-primary/20 text-primary font-bold",children:c.name.substring(0,2).toUpperCase()})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-lg",children:c.name}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.solved," challenges solved"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:c.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]},c.rank))})})]})]})}),o.jsx(ht,{})]})};function Re(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Ta(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var E;const{scope:m,children:x,...C}=f,_=((E=m==null?void 0:m[t])==null?void 0:E[c])||l,T=g.useMemo(()=>C,Object.values(C));return o.jsx(_.Provider,{value:T,children:x})};d.displayName=i+"Provider";function h(f,m){var _;const x=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,C=g.useContext(x);if(C)return C;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,JU(s,...e)]}function JU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function ib(t){const e=ZU(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(t9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function ZU(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=r9(s),l=n9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var e9=Symbol("radix.slottable");function t9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===e9}function n9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function r9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function KC(t){const e=t+"CollectionProvider",[n,r]=Ta(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=_=>{const{scope:T,children:E}=_,w=gs.useRef(null),S=gs.useRef(new Map).current;return o.jsx(s,{scope:T,itemMap:S,collectionRef:w,children:E})};a.displayName=e;const l=t+"CollectionSlot",c=ib(l),d=gs.forwardRef((_,T)=>{const{scope:E,children:w}=_,S=i(l,E),D=ft(T,S.collectionRef);return o.jsx(c,{ref:D,children:w})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=ib(h),x=gs.forwardRef((_,T)=>{const{scope:E,children:w,...S}=_,D=gs.useRef(null),L=ft(T,D),j=i(h,E);return gs.useEffect(()=>(j.itemMap.set(D,{ref:D,...S}),()=>void j.itemMap.delete(D))),o.jsx(m,{[f]:"",ref:L,children:w})});x.displayName=h;function C(_){const T=i(t+"CollectionConsumer",_);return gs.useCallback(()=>{const w=T.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(T.itemMap.values()).sort((j,b)=>S.indexOf(j.ref.current)-S.indexOf(b.ref.current))},[T.collectionRef,T.itemMap])}return[{Provider:a,Slot:d,ItemSlot:x},C,r]}var s9=Jd[" useId ".trim().toString()]||(()=>{}),i9=0;function jc(t){const[e,n]=g.useState(s9());return bt(()=>{n(r=>r??String(i9++))},[t]),e?`radix-${e}`:""}function o9(t){const e=a9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(c9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function a9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=d9(s),l=u9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var l9=Symbol("radix.slottable");function c9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===l9}function u9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function d9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var h9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ve=h9.reduce((t,e)=>{const n=o9(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function f9(t,e){t&&pa.flushSync(()=>t.dispatchEvent(e))}var m9=Jd[" useInsertionEffect ".trim().toString()]||bt;function ac({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=p9({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=g.useRef(t!==void 0);g.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=g.useCallback(h=>{var f;if(l){const m=g9(h)?h(t):h;m!==t&&((f=a.current)==null||f.call(a,m))}else i(h)},[l,t,i,a]);return[c,d]}function p9({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return m9(()=>{i.current=e},[e]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function g9(t){return typeof t=="function"}var y9=g.createContext(void 0);function Nv(t){const e=g.useContext(y9);return t||e||"ltr"}var gm="rovingFocusGroup.onEntryFocus",v9={bubbles:!1,cancelable:!0},Ac="RovingFocusGroup",[Zp,QC,x9]=KC(Ac),[w9,YC]=Ta(Ac,[x9]),[_9,b9]=w9(Ac),XC=g.forwardRef((t,e)=>o.jsx(Zp.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Zp.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(E9,{...t,ref:e})})}));XC.displayName=Ac;var E9=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=g.useRef(null),x=ft(e,m),C=Nv(i),[_,T]=ac({prop:a,defaultProp:l??null,onChange:c,caller:Ac}),[E,w]=g.useState(!1),S=Jr(d),D=QC(n),L=g.useRef(!1),[j,b]=g.useState(0);return g.useEffect(()=>{const y=m.current;if(y)return y.addEventListener(gm,S),()=>y.removeEventListener(gm,S)},[S]),o.jsx(_9,{scope:n,orientation:r,dir:C,loop:s,currentTabStopId:_,onItemFocus:g.useCallback(y=>T(y),[T]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>b(y=>y+1),[]),onFocusableItemRemove:g.useCallback(()=>b(y=>y-1),[]),children:o.jsx(Ve.div,{tabIndex:E||j===0?-1:0,"data-orientation":r,...f,ref:x,style:{outline:"none",...t.style},onMouseDown:Re(t.onMouseDown,()=>{L.current=!0}),onFocus:Re(t.onFocus,y=>{const A=!L.current;if(y.target===y.currentTarget&&A&&!E){const N=new CustomEvent(gm,v9);if(y.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=D().filter(G=>G.focusable),I=R.find(G=>G.active),k=R.find(G=>G.id===_),J=[I,k,...R].filter(Boolean).map(G=>G.ref.current);eI(J,h)}}L.current=!1}),onBlur:Re(t.onBlur,()=>w(!1))})})}),JC="RovingFocusGroupItem",ZC=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,c=jc(),d=i||c,h=b9(JC,n),f=h.currentTabStopId===d,m=QC(n),{onFocusableItemAdd:x,onFocusableItemRemove:C,currentTabStopId:_}=h;return g.useEffect(()=>{if(r)return x(),()=>C()},[r,x,C]),o.jsx(Zp.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:o.jsx(Ve.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Re(t.onMouseDown,T=>{r?h.onItemFocus(d):T.preventDefault()}),onFocus:Re(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:Re(t.onKeyDown,T=>{if(T.key==="Tab"&&T.shiftKey){h.onItemShiftTab();return}if(T.target!==T.currentTarget)return;const E=S9(T,h.orientation,h.dir);if(E!==void 0){if(T.metaKey||T.ctrlKey||T.altKey||T.shiftKey)return;T.preventDefault();let S=m().filter(D=>D.focusable).map(D=>D.ref.current);if(E==="last")S.reverse();else if(E==="prev"||E==="next"){E==="prev"&&S.reverse();const D=S.indexOf(T.currentTarget);S=h.loop?C9(S,D+1):S.slice(D+1)}setTimeout(()=>eI(S))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:_!=null}):a})})});ZC.displayName=JC;var N9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function S9(t,e,n){const r=T9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return N9[r]}function eI(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function C9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var I9=XC,j9=ZC;function A9(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var tI=t=>{const{present:e,children:n}=t,r=k9(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=ft(r.ref,R9(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};tI.displayName="Presence";function k9(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=A9(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=vu(r.current);i.current=l==="mounted"?d:"none"},[l]),bt(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,x=vu(d);t?c("MOUNT"):x==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==x?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),bt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=x=>{const _=vu(r.current).includes(CSS.escape(x.animationName));if(x.target===e&&_&&(c("ANIMATION_END"),!s.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},m=x=>{x.target===e&&(i.current=vu(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function vu(t){return(t==null?void 0:t.animationName)||"none"}function R9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Qh="Tabs",[P9]=Ta(Qh,[YC]),nI=YC(),[D9,Tv]=P9(Qh),rI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=Nv(l),[f,m]=ac({prop:r,onChange:s,defaultProp:i??"",caller:Qh});return o.jsx(D9,{scope:n,baseId:jc(),value:f,onValueChange:m,orientation:a,dir:h,activationMode:c,children:o.jsx(Ve.div,{dir:h,"data-orientation":a,...d,ref:e})})});rI.displayName=Qh;var sI="TabsList",iI=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Tv(sI,n),a=nI(n);return o.jsx(I9,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});iI.displayName=sI;var oI="TabsTrigger",aI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Tv(oI,n),l=nI(n),c=uI(a.baseId,r),d=dI(a.baseId,r),h=r===a.value;return o.jsx(j9,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(Ve.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Re(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:Re(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:Re(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});aI.displayName=oI;var lI="TabsContent",cI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Tv(lI,n),c=uI(l.baseId,r),d=dI(l.baseId,r),h=r===l.value,f=g.useRef(h);return g.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(tI,{present:s||h,children:({present:m})=>o.jsx(Ve.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});cI.displayName=lI;function uI(t,e){return`${t}-trigger-${e}`}function dI(t,e){return`${t}-content-${e}`}var L9=rI,hI=iI,fI=aI,mI=cI;const O9=L9,pI=g.forwardRef(({className:t,...e},n)=>o.jsx(hI,{ref:n,className:Le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));pI.displayName=hI.displayName;const Ni=g.forwardRef(({className:t,...e},n)=>o.jsx(fI,{ref:n,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Ni.displayName=fI.displayName;const gI=g.forwardRef(({className:t,...e},n)=>o.jsx(mI,{ref:n,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));gI.displayName=mI.displayName;const M9=Kh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Sv=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Le(M9({variant:e}),t),...n}));Sv.displayName="Alert";const V9=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Le("mb-1 font-medium leading-none tracking-tight",t),...e}));V9.displayName="AlertTitle";const Cv=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("text-sm [&_p]:leading-relaxed",t),...e}));Cv.displayName="AlertDescription";const F9=({onBack:t})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState(!0),[d,h]=g.useState(""),[f,m]=g.useState("all"),[x,C]=g.useState(null);g.useEffect(()=>{_()},[]),g.useEffect(()=>{T()},[d,e,f]);const _=async()=>{try{const A=(await sr(kt(ve,"users"))).docs.map(R=>({id:R.id,...R.data()}));console.log(" Fetched users:",A),n(A);const N=A.filter(R=>R.requestedHostRole===!0);a(N)}catch(y){console.error("Error fetching users:",y),C({type:"error",text:"Failed to load users"})}finally{c(!1)}},T=()=>{let y=[...e];f==="admins"?y=y.filter(A=>A.role==="admin"):f==="moderators"?y=y.filter(A=>A.role==="moderator"):f==="students"?y=y.filter(A=>A.role==="student"):f==="pending"?y=y.filter(A=>A.requestedHostRole===!0):f==="active"?y=y.filter(A=>A.isActive!==!1):f==="suspended"&&(y=y.filter(A=>A.isActive===!1)),d&&(y=y.filter(A=>{var N,R,I,k,$;return((N=A.displayName)==null?void 0:N.toLowerCase().includes(d.toLowerCase()))||((R=A.email)==null?void 0:R.toLowerCase().includes(d.toLowerCase()))||((I=A.role)==null?void 0:I.toLowerCase().includes(d.toLowerCase()))||((k=A.firstName)==null?void 0:k.toLowerCase().includes(d.toLowerCase()))||(($=A.lastName)==null?void 0:$.toLowerCase().includes(d.toLowerCase()))})),s(y)},E=async(y,A)=>{try{console.log(" Attempting to update user role:",{userId:y,newRole:A});const N={role:A};(A==="admin"||A==="moderator")&&(N.requestedHostRole=!1,N.hostRequestReason=null),await dn(ze(ve,"users",y),N),n(e.map(R=>R.id===y?{...R,...N}:R)),console.log(" User role updated successfully"),C({type:"success",text:`User role updated to ${A}`}),setTimeout(()=>C(null),3e3)}catch(N){console.error(" Error updating user role:",N),console.error("Error code:",N.code),console.error("Error message:",N.message),C({type:"error",text:`Failed to update user role: ${N.message}`})}},w=async(y,A)=>{try{console.log(" Handling host request:",{userId:y,approved:A});const N={requestedHostRole:!1,hostRequestReason:null};A&&(N.role="moderator"),await dn(ze(ve,"users",y),N),n(e.map(I=>I.id===y?{...I,...N}:I)),C({type:"success",text:`Host request ${A?"approved":"rejected"}`}),setTimeout(()=>C(null),3e3)}catch(N){console.error("Error handling host request:",N),C({type:"error",text:`Failed to process host request: ${N.message}`})}},S=async(y,A)=>{try{console.log(" Toggling user status:",{userId:y,currentStatus:A});const N=!A;await dn(ze(ve,"users",y),{isActive:N}),n(e.map(I=>I.id===y?{...I,isActive:N}:I));const R=N?"activated":"suspended";console.log(" User status updated successfully:",R),C({type:"success",text:`User ${R}`}),setTimeout(()=>C(null),3e3)}catch(N){console.error(" Error updating user status:",N),console.error("Error code:",N.code),console.error("Error message:",N.message),C({type:"error",text:`Failed to update user status: ${N.message}`})}},D=y=>{switch(y){case"admin":return"destructive";case"moderator":return"default";case"student":return"secondary";default:return"outline"}},L=y=>{switch(y){case"admin":return o.jsx(Q_,{className:"w-3 h-3"});case"moderator":return o.jsx(Xe,{className:"w-3 h-3"});case"student":return o.jsx(wv,{className:"w-3 h-3"});default:return o.jsx(Cn,{className:"w-3 h-3"})}},j=y=>y.requestedHostRole?"Pending Host":y.isActive===!1?"Suspended":"Active",b=y=>y.requestedHostRole?"default":y.isActive===!1?"destructive":"default";return l?o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading users..."})]})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(X,{variant:"ghost",onClick:t,className:"mb-2 -ml-3",children:" Back to Admin"}),o.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and host requests"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]})]}),x&&o.jsxs(Sv,{className:x.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200",children:[x.type==="success"?o.jsx(Fr,{className:"w-4 h-4 text-green-600"}):o.jsx(aa,{className:"w-4 h-4 text-red-600"}),o.jsx(Cv,{className:x.type==="success"?"text-green-600":"text-red-600",children:x.text})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(y=>y.role==="admin").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Admins"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(y=>y.role==="moderator").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Moderators"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(y=>y.role==="student").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Students"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending Hosts"})]})}),o.jsx(ae,{children:o.jsxs(le,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(y=>y.isActive===!1).length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Suspended"})]})})]}),o.jsxs(O9,{value:f,onValueChange:m,className:"w-full",children:[o.jsxs(pI,{className:"grid w-full grid-cols-6",children:[o.jsx(Ni,{value:"all",className:"text-xs",children:"All Users"}),o.jsx(Ni,{value:"admins",className:"text-xs",children:"Admins"}),o.jsx(Ni,{value:"moderators",className:"text-xs",children:"Moderators"}),o.jsx(Ni,{value:"students",className:"text-xs",children:"Students"}),o.jsxs(Ni,{value:"pending",className:"text-xs",children:["Pending ",i.length>0&&`(${i.length})`]}),o.jsx(Ni,{value:"suspended",className:"text-xs",children:"Suspended"})]}),o.jsx(gI,{value:f,className:"mt-6",children:o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs(De,{children:[f==="all"&&"All Users",f==="admins"&&"Administrators",f==="moderators"&&"Moderators",f==="students"&&"Students",f==="pending"&&"Pending Host Requests",f==="suspended"&&"Suspended Users"]}),o.jsxs(Ht,{children:[r.length," user",r.length!==1?"s":""," found"]})]}),o.jsxs("div",{className:"relative w-64",children:[o.jsx(ca,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(me,{placeholder:"Search users...",value:d,onChange:y=>h(y.target.value),className:"pl-10"})]})]})}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[r.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:L(y.role)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("p",{className:"font-medium truncate",children:y.displayName||"No Name"}),y.role==="admin"&&o.jsx(Q_,{className:"w-4 h-4 text-yellow-600"})]}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:y.email}),y.institution&&o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.institution}),y.requestedHostRole&&y.hostRequestReason&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[o.jsx("strong",{children:"Host Request:"})," ",y.hostRequestReason]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs(Oe,{variant:D(y.role),className:"flex items-center gap-1",children:[L(y.role),y.role]}),o.jsx(Oe,{variant:b(y),children:j(y)})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs("select",{value:y.role,onChange:A=>E(y.id,A.target.value),className:"p-2 border rounded text-sm bg-background",children:[o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"moderator",children:"Moderator"}),o.jsx("option",{value:"admin",children:"Admin"})]}),y.requestedHostRole&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx(X,{variant:"outline",size:"sm",onClick:()=>w(y.id,!0),className:"h-9 w-9 p-0 text-green-600 border-green-200",children:o.jsx(Fr,{className:"w-4 h-4"})}),o.jsx(X,{variant:"outline",size:"sm",onClick:()=>w(y.id,!1),className:"h-9 w-9 p-0 text-red-600 border-red-200",children:o.jsx(aa,{className:"w-4 h-4"})})]}),!y.requestedHostRole&&o.jsx(X,{variant:"outline",size:"sm",onClick:()=>S(y.id,y.isActive??!0),className:`flex items-center gap-1 ${y.isActive===!1?"text-green-600 border-green-200 hover:bg-green-50":"text-red-600 border-red-200 hover:bg-red-50"}`,children:y.isActive===!1?o.jsxs(o.Fragment,{children:[o.jsx(uU,{className:"w-3 h-3"}),"Activate"]}):o.jsxs(o.Fragment,{children:[o.jsx(cU,{className:"w-3 h-3"}),"Suspend"]})})]})]},y.id)),r.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(nn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No users found matching your criteria."})]})]})})]})})]})]})},Sa=g.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Sa.displayName="Textarea";var U9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],B9=U9.reduce((t,e)=>{const n=vv(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),$9="Label",yI=g.forwardRef((t,e)=>o.jsx(B9.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yI.displayName=$9;var vI=yI;const z9=Kh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),K=g.forwardRef(({className:t,...e},n)=>o.jsx(vI,{ref:n,className:Le(z9(),t),...e}));K.displayName=vI.displayName;function ob(t,[e,n]){return Math.min(n,Math.max(e,t))}function H9(t,e=globalThis==null?void 0:globalThis.document){const n=Jr(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var W9="DismissableLayer",eg="dismissableLayer.update",q9="dismissableLayer.pointerDownOutside",G9="dismissableLayer.focusOutside",ab,xI=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wI=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(xI),[h,f]=g.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=g.useState({}),C=ft(e,b=>f(b)),_=Array.from(d.layers),[T]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=_.indexOf(T),w=h?_.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,D=w>=E,L=Y9(b=>{const y=b.target,A=[...d.branches].some(N=>N.contains(y));!D||A||(s==null||s(b),a==null||a(b),b.defaultPrevented||l==null||l())},m),j=X9(b=>{const y=b.target;[...d.branches].some(N=>N.contains(y))||(i==null||i(b),a==null||a(b),b.defaultPrevented||l==null||l())},m);return H9(b=>{w===d.layers.size-1&&(r==null||r(b),!b.defaultPrevented&&l&&(b.preventDefault(),l()))},m),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ab=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),lb(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=ab)}},[h,m,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),lb())},[h,d]),g.useEffect(()=>{const b=()=>x({});return document.addEventListener(eg,b),()=>document.removeEventListener(eg,b)},[]),o.jsx(Ve.div,{...c,ref:C,style:{pointerEvents:S?D?"auto":"none":void 0,...t.style},onFocusCapture:Re(t.onFocusCapture,j.onFocusCapture),onBlurCapture:Re(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Re(t.onPointerDownCapture,L.onPointerDownCapture)})});wI.displayName=W9;var K9="DismissableLayerBranch",Q9=g.forwardRef((t,e)=>{const n=g.useContext(xI),r=g.useRef(null),s=ft(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Ve.div,{...t,ref:s})});Q9.displayName=K9;function Y9(t,e=globalThis==null?void 0:globalThis.document){const n=Jr(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){_I(q9,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function X9(t,e=globalThis==null?void 0:globalThis.document){const n=Jr(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&_I(G9,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lb(){const t=new CustomEvent(eg);document.dispatchEvent(t)}function _I(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?f9(s,i):s.dispatchEvent(i)}var ym=0;function J9(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??cb()),document.body.insertAdjacentElement("beforeend",t[1]??cb()),ym++,()=>{ym===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ym--}},[])}function cb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var vm="focusScope.autoFocusOnMount",xm="focusScope.autoFocusOnUnmount",ub={bubbles:!1,cancelable:!0},Z9="FocusScope",bI=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=Jr(s),h=Jr(i),f=g.useRef(null),m=ft(e,_=>c(_)),x=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let _=function(S){if(x.paused||!l)return;const D=S.target;l.contains(D)?f.current=D:ys(f.current,{select:!0})},T=function(S){if(x.paused||!l)return;const D=S.relatedTarget;D!==null&&(l.contains(D)||ys(f.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const L of S)L.removedNodes.length>0&&ys(l)};document.addEventListener("focusin",_),document.addEventListener("focusout",T);const w=new MutationObserver(E);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",T),w.disconnect()}}},[r,l,x.paused]),g.useEffect(()=>{if(l){hb.add(x);const _=document.activeElement;if(!l.contains(_)){const E=new CustomEvent(vm,ub);l.addEventListener(vm,d),l.dispatchEvent(E),E.defaultPrevented||(e8(i8(EI(l)),{select:!0}),document.activeElement===_&&ys(l))}return()=>{l.removeEventListener(vm,d),setTimeout(()=>{const E=new CustomEvent(xm,ub);l.addEventListener(xm,h),l.dispatchEvent(E),E.defaultPrevented||ys(_??document.body,{select:!0}),l.removeEventListener(xm,h),hb.remove(x)},0)}}},[l,d,h,x]);const C=g.useCallback(_=>{if(!n&&!r||x.paused)return;const T=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,E=document.activeElement;if(T&&E){const w=_.currentTarget,[S,D]=t8(w);S&&D?!_.shiftKey&&E===D?(_.preventDefault(),n&&ys(S,{select:!0})):_.shiftKey&&E===S&&(_.preventDefault(),n&&ys(D,{select:!0})):E===w&&_.preventDefault()}},[n,r,x.paused]);return o.jsx(Ve.div,{tabIndex:-1,...a,ref:m,onKeyDown:C})});bI.displayName=Z9;function e8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ys(r,{select:e}),document.activeElement!==n)return}function t8(t){const e=EI(t),n=db(e,t),r=db(e.reverse(),t);return[n,r]}function EI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function db(t,e){for(const n of t)if(!n8(n,{upTo:e}))return n}function n8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function r8(t){return t instanceof HTMLInputElement&&"select"in t}function ys(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&r8(t)&&e&&t.select()}}var hb=s8();function s8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=fb(t,e),t.unshift(e)},remove(e){var n;t=fb(t,e),(n=t[0])==null||n.resume()}}}function fb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function i8(t){return t.filter(e=>e.tagName!=="A")}const o8=["top","right","bottom","left"],ei=Math.min,_n=Math.max,qd=Math.round,xu=Math.floor,Nr=t=>({x:t,y:t}),a8={left:"right",right:"left",bottom:"top",top:"bottom"},l8={start:"end",end:"start"};function tg(t,e,n){return _n(t,ei(e,n))}function Zr(t,e){return typeof t=="function"?t(e):t}function es(t){return t.split("-")[0]}function Ca(t){return t.split("-")[1]}function Iv(t){return t==="x"?"y":"x"}function jv(t){return t==="y"?"height":"width"}const c8=new Set(["top","bottom"]);function pr(t){return c8.has(es(t))?"y":"x"}function Av(t){return Iv(pr(t))}function u8(t,e,n){n===void 0&&(n=!1);const r=Ca(t),s=Av(t),i=jv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Gd(a)),[a,Gd(a)]}function d8(t){const e=Gd(t);return[ng(t),e,ng(e)]}function ng(t){return t.replace(/start|end/g,e=>l8[e])}const mb=["left","right"],pb=["right","left"],h8=["top","bottom"],f8=["bottom","top"];function m8(t,e,n){switch(t){case"top":case"bottom":return n?e?pb:mb:e?mb:pb;case"left":case"right":return e?h8:f8;default:return[]}}function p8(t,e,n,r){const s=Ca(t);let i=m8(es(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(ng)))),i}function Gd(t){return t.replace(/left|right|bottom|top/g,e=>a8[e])}function g8(t){return{top:0,right:0,bottom:0,left:0,...t}}function NI(t){return typeof t!="number"?g8(t):{top:t,right:t,bottom:t,left:t}}function Kd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function gb(t,e,n){let{reference:r,floating:s}=t;const i=pr(e),a=Av(e),l=jv(a),c=es(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let x;switch(c){case"top":x={x:h,y:r.y-s.height};break;case"bottom":x={x:h,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:f};break;case"left":x={x:r.x-s.width,y:f};break;default:x={x:r.x,y:r.y}}switch(Ca(e)){case"start":x[a]-=m*(n&&d?-1:1);break;case"end":x[a]+=m*(n&&d?-1:1);break}return x}const y8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=gb(d,r,c),m=r,x={},C=0;for(let _=0;_<l.length;_++){const{name:T,fn:E}=l[_],{x:w,y:S,data:D,reset:L}=await E({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:x,rects:d,platform:a,elements:{reference:t,floating:e}});h=w??h,f=S??f,x={...x,[T]:{...x[T],...D}},L&&C<=50&&(C++,typeof L=="object"&&(L.placement&&(m=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=gb(d,m,c)),_=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:x}};async function lc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:x=0}=Zr(e,t),C=NI(x),T=l[m?f==="floating"?"reference":"floating":f],E=Kd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(T)))==null||n?T:T.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),D=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},L=Kd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:S,strategy:c}):w);return{top:(E.top-L.top+C.top)/D.y,bottom:(L.bottom-E.bottom+C.bottom)/D.y,left:(E.left-L.left+C.left)/D.x,right:(L.right-E.right+C.right)/D.x}}const v8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=Zr(t,e)||{};if(d==null)return{};const f=NI(h),m={x:n,y:r},x=Av(s),C=jv(x),_=await a.getDimensions(d),T=x==="y",E=T?"top":"left",w=T?"bottom":"right",S=T?"clientHeight":"clientWidth",D=i.reference[C]+i.reference[x]-m[x]-i.floating[C],L=m[x]-i.reference[x],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let b=j?j[S]:0;(!b||!await(a.isElement==null?void 0:a.isElement(j)))&&(b=l.floating[S]||i.floating[C]);const y=D/2-L/2,A=b/2-_[C]/2-1,N=ei(f[E],A),R=ei(f[w],A),I=N,k=b-_[C]-R,$=b/2-_[C]/2+y,J=tg(I,$,k),G=!c.arrow&&Ca(s)!=null&&$!==J&&i.reference[C]/2-($<I?N:R)-_[C]/2<0,oe=G?$<I?$-I:$-k:0;return{[x]:m[x]+oe,data:{[x]:J,centerOffset:$-J-oe,...G&&{alignmentOffset:oe}},reset:G}}}),x8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:_=!0,...T}=Zr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=es(s),w=pr(l),S=es(l)===l,D=await(c.isRTL==null?void 0:c.isRTL(d.floating)),L=m||(S||!_?[Gd(l)]:d8(l)),j=C!=="none";!m&&j&&L.push(...p8(l,_,C,D));const b=[l,...L],y=await lc(e,T),A=[];let N=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&A.push(y[E]),f){const $=u8(s,a,D);A.push(y[$[0]],y[$[1]])}if(N=[...N,{placement:s,overflows:A}],!A.every($=>$<=0)){var R,I;const $=(((R=i.flip)==null?void 0:R.index)||0)+1,J=b[$];if(J&&(!(f==="alignment"?w!==pr(J):!1)||N.every(O=>pr(O.placement)===w?O.overflows[0]>0:!0)))return{data:{index:$,overflows:N},reset:{placement:J}};let G=(I=N.filter(oe=>oe.overflows[0]<=0).sort((oe,O)=>oe.overflows[1]-O.overflows[1])[0])==null?void 0:I.placement;if(!G)switch(x){case"bestFit":{var k;const oe=(k=N.filter(O=>{if(j){const q=pr(O.placement);return q===w||q==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(q=>q>0).reduce((q,ie)=>q+ie,0)]).sort((O,q)=>O[1]-q[1])[0])==null?void 0:k[0];oe&&(G=oe);break}case"initialPlacement":G=l;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function yb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vb(t){return o8.some(e=>t[e]>=0)}const w8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Zr(t,e);switch(r){case"referenceHidden":{const i=await lc(e,{...s,elementContext:"reference"}),a=yb(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:vb(a)}}}case"escaped":{const i=await lc(e,{...s,altBoundary:!0}),a=yb(i,n.floating);return{data:{escapedOffsets:a,escaped:vb(a)}}}default:return{}}}}},TI=new Set(["left","top"]);async function _8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=es(n),l=Ca(n),c=pr(n)==="y",d=TI.has(a)?-1:1,h=i&&c?-1:1,f=Zr(e,t);let{mainAxis:m,crossAxis:x,alignmentAxis:C}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof C=="number"&&(x=l==="end"?C*-1:C),c?{x:x*h,y:m*d}:{x:m*d,y:x*h}}const b8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await _8(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},E8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:T=>{let{x:E,y:w}=T;return{x:E,y:w}}},...c}=Zr(t,e),d={x:n,y:r},h=await lc(e,c),f=pr(es(s)),m=Iv(f);let x=d[m],C=d[f];if(i){const T=m==="y"?"top":"left",E=m==="y"?"bottom":"right",w=x+h[T],S=x-h[E];x=tg(w,x,S)}if(a){const T=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=C+h[T],S=C-h[E];C=tg(w,C,S)}const _=l.fn({...e,[m]:x,[f]:C});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[m]:i,[f]:a}}}}}},N8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Zr(t,e),h={x:n,y:r},f=pr(s),m=Iv(f);let x=h[m],C=h[f];const _=Zr(l,e),T=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(c){const S=m==="y"?"height":"width",D=i.reference[m]-i.floating[S]+T.mainAxis,L=i.reference[m]+i.reference[S]-T.mainAxis;x<D?x=D:x>L&&(x=L)}if(d){var E,w;const S=m==="y"?"width":"height",D=TI.has(es(s)),L=i.reference[f]-i.floating[S]+(D&&((E=a.offset)==null?void 0:E[f])||0)+(D?0:T.crossAxis),j=i.reference[f]+i.reference[S]+(D?0:((w=a.offset)==null?void 0:w[f])||0)-(D?T.crossAxis:0);C<L?C=L:C>j&&(C=j)}return{[m]:x,[f]:C}}}},T8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=Zr(t,e),h=await lc(e,d),f=es(s),m=Ca(s),x=pr(s)==="y",{width:C,height:_}=i.floating;let T,E;f==="top"||f==="bottom"?(T=f,E=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(E=f,T=m==="end"?"top":"bottom");const w=_-h.top-h.bottom,S=C-h.left-h.right,D=ei(_-h[T],w),L=ei(C-h[E],S),j=!e.middlewareData.shift;let b=D,y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(y=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(b=w),j&&!m){const N=_n(h.left,0),R=_n(h.right,0),I=_n(h.top,0),k=_n(h.bottom,0);x?y=C-2*(N!==0||R!==0?N+R:_n(h.left,h.right)):b=_-2*(I!==0||k!==0?I+k:_n(h.top,h.bottom))}await c({...e,availableWidth:y,availableHeight:b});const A=await a.getDimensions(l.floating);return C!==A.width||_!==A.height?{reset:{rects:!0}}:{}}}};function Yh(){return typeof window<"u"}function Ia(t){return SI(t)?(t.nodeName||"").toLowerCase():"#document"}function In(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ir(t){var e;return(e=(SI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function SI(t){return Yh()?t instanceof Node||t instanceof In(t).Node:!1}function ir(t){return Yh()?t instanceof Element||t instanceof In(t).Element:!1}function Cr(t){return Yh()?t instanceof HTMLElement||t instanceof In(t).HTMLElement:!1}function xb(t){return!Yh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof In(t).ShadowRoot}const S8=new Set(["inline","contents"]);function kc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=or(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!S8.has(s)}const C8=new Set(["table","td","th"]);function I8(t){return C8.has(Ia(t))}const j8=[":popover-open",":modal"];function Xh(t){return j8.some(e=>{try{return t.matches(e)}catch{return!1}})}const A8=["transform","translate","scale","rotate","perspective"],k8=["transform","translate","scale","rotate","perspective","filter"],R8=["paint","layout","strict","content"];function kv(t){const e=Rv(),n=ir(t)?or(t):t;return A8.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||k8.some(r=>(n.willChange||"").includes(r))||R8.some(r=>(n.contain||"").includes(r))}function P8(t){let e=ti(t);for(;Cr(e)&&!da(e);){if(kv(e))return e;if(Xh(e))return null;e=ti(e)}return null}function Rv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const D8=new Set(["html","body","#document"]);function da(t){return D8.has(Ia(t))}function or(t){return In(t).getComputedStyle(t)}function Jh(t){return ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ti(t){if(Ia(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xb(t)&&t.host||Ir(t);return xb(e)?e.host:e}function CI(t){const e=ti(t);return da(e)?t.ownerDocument?t.ownerDocument.body:t.body:Cr(e)&&kc(e)?e:CI(e)}function cc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=CI(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=In(s);if(i){const l=rg(a);return e.concat(a,a.visualViewport||[],kc(s)?s:[],l&&n?cc(l):[])}return e.concat(s,cc(s,[],n))}function rg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function II(t){const e=or(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Cr(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=qd(n)!==i||qd(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Pv(t){return ir(t)?t:t.contextElement}function $o(t){const e=Pv(t);if(!Cr(e))return Nr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=II(e);let a=(i?qd(n.width):n.width)/r,l=(i?qd(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const L8=Nr(0);function jI(t){const e=In(t);return!Rv()||!e.visualViewport?L8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function O8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==In(t)?!1:e}function Yi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Pv(t);let a=Nr(1);e&&(r?ir(r)&&(a=$o(r)):a=$o(t));const l=O8(i,n,r)?jI(i):Nr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const m=In(i),x=r&&ir(r)?In(r):r;let C=m,_=rg(C);for(;_&&r&&x!==C;){const T=$o(_),E=_.getBoundingClientRect(),w=or(_),S=E.left+(_.clientLeft+parseFloat(w.paddingLeft))*T.x,D=E.top+(_.clientTop+parseFloat(w.paddingTop))*T.y;c*=T.x,d*=T.y,h*=T.x,f*=T.y,c+=S,d+=D,C=In(_),_=rg(C)}}return Kd({width:h,height:f,x:c,y:d})}function Zh(t,e){const n=Jh(t).scrollLeft;return e?e.left+n:Yi(Ir(t)).left+n}function AI(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Zh(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function M8(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Ir(r),l=e?Xh(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Nr(1);const h=Nr(0),f=Cr(r);if((f||!f&&!i)&&((Ia(r)!=="body"||kc(a))&&(c=Jh(r)),Cr(r))){const x=Yi(r);d=$o(r),h.x=x.x+r.clientLeft,h.y=x.y+r.clientTop}const m=a&&!f&&!i?AI(a,c):Nr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function V8(t){return Array.from(t.getClientRects())}function F8(t){const e=Ir(t),n=Jh(t),r=t.ownerDocument.body,s=_n(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=_n(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Zh(t);const l=-n.scrollTop;return or(r).direction==="rtl"&&(a+=_n(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}const wb=25;function U8(t,e){const n=In(t),r=Ir(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=Rv();(!h||h&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=Zh(r);if(d<=0){const h=r.ownerDocument,f=h.body,m=getComputedStyle(f),x=h.compatMode==="CSS1Compat"&&parseFloat(m.marginLeft)+parseFloat(m.marginRight)||0,C=Math.abs(r.clientWidth-f.clientWidth-x);C<=wb&&(i-=C)}else d<=wb&&(i+=d);return{width:i,height:a,x:l,y:c}}const B8=new Set(["absolute","fixed"]);function $8(t,e){const n=Yi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Cr(t)?$o(t):Nr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function _b(t,e,n){let r;if(e==="viewport")r=U8(t,n);else if(e==="document")r=F8(Ir(t));else if(ir(e))r=$8(e,n);else{const s=jI(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Kd(r)}function kI(t,e){const n=ti(t);return n===e||!ir(n)||da(n)?!1:or(n).position==="fixed"||kI(n,e)}function z8(t,e){const n=e.get(t);if(n)return n;let r=cc(t,[],!1).filter(l=>ir(l)&&Ia(l)!=="body"),s=null;const i=or(t).position==="fixed";let a=i?ti(t):t;for(;ir(a)&&!da(a);){const l=or(a),c=kv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&B8.has(s.position)||kc(a)&&!c&&kI(t,a))?r=r.filter(h=>h!==a):s=l,a=ti(a)}return e.set(t,r),r}function H8(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Xh(e)?[]:z8(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=_b(e,h,s);return d.top=_n(f.top,d.top),d.right=ei(f.right,d.right),d.bottom=ei(f.bottom,d.bottom),d.left=_n(f.left,d.left),d},_b(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function W8(t){const{width:e,height:n}=II(t);return{width:e,height:n}}function q8(t,e,n){const r=Cr(e),s=Ir(e),i=n==="fixed",a=Yi(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Nr(0);function d(){c.x=Zh(s)}if(r||!r&&!i)if((Ia(e)!=="body"||kc(s))&&(l=Jh(e)),r){const x=Yi(e,!0,i,e);c.x=x.x+e.clientLeft,c.y=x.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?AI(s,l):Nr(0),f=a.left+l.scrollLeft-c.x-h.x,m=a.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:a.width,height:a.height}}function wm(t){return or(t).position==="static"}function bb(t,e){if(!Cr(t)||or(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ir(t)===n&&(n=n.ownerDocument.body),n}function RI(t,e){const n=In(t);if(Xh(t))return n;if(!Cr(t)){let s=ti(t);for(;s&&!da(s);){if(ir(s)&&!wm(s))return s;s=ti(s)}return n}let r=bb(t,e);for(;r&&I8(r)&&wm(r);)r=bb(r,e);return r&&da(r)&&wm(r)&&!kv(r)?n:r||P8(t)||n}const G8=async function(t){const e=this.getOffsetParent||RI,n=this.getDimensions,r=await n(t.floating);return{reference:q8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function K8(t){return or(t).direction==="rtl"}const Q8={convertOffsetParentRelativeRectToViewportRelativeRect:M8,getDocumentElement:Ir,getClippingRect:H8,getOffsetParent:RI,getElementRects:G8,getClientRects:V8,getDimensions:W8,getScale:$o,isElement:ir,isRTL:K8};function PI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Y8(t,e){let n=null,r;const s=Ir(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:x}=d;if(l||e(),!m||!x)return;const C=xu(f),_=xu(s.clientWidth-(h+m)),T=xu(s.clientHeight-(f+x)),E=xu(h),S={rootMargin:-C+"px "+-_+"px "+-T+"px "+-E+"px",threshold:_n(0,ei(1,c))||1};let D=!0;function L(j){const b=j[0].intersectionRatio;if(b!==c){if(!D)return a();b?a(!1,b):r=setTimeout(()=>{a(!1,1e-7)},1e3)}b===1&&!PI(d,t.getBoundingClientRect())&&a(),D=!1}try{n=new IntersectionObserver(L,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,S)}n.observe(t)}return a(!0),i}function X8(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Pv(t),h=s||i?[...d?cc(d):[],...cc(e)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const f=d&&l?Y8(d,n):null;let m=-1,x=null;a&&(x=new ResizeObserver(E=>{let[w]=E;w&&w.target===d&&x&&(x.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=x)==null||S.observe(e)})),n()}),d&&!c&&x.observe(d),x.observe(e));let C,_=c?Yi(t):null;c&&T();function T(){const E=Yi(t);_&&!PI(_,E)&&n(),_=E,C=requestAnimationFrame(T)}return n(),()=>{var E;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(E=x)==null||E.disconnect(),x=null,c&&cancelAnimationFrame(C)}}const J8=b8,Z8=E8,eB=x8,tB=T8,nB=w8,Eb=v8,rB=N8,sB=(t,e,n)=>{const r=new Map,s={platform:Q8,...n},i={...s.platform,_c:r};return y8(t,e,{...s,platform:i})};var iB=typeof document<"u",oB=function(){},qu=iB?g.useLayoutEffect:oB;function Qd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Qd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Qd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function DI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nb(t,e){const n=DI(t);return Math.round(e*n)/n}function _m(t){const e=g.useRef(t);return qu(()=>{e.current=t}),e}function aB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,x]=g.useState(r);Qd(m,r)||x(r);const[C,_]=g.useState(null),[T,E]=g.useState(null),w=g.useCallback(O=>{O!==j.current&&(j.current=O,_(O))},[]),S=g.useCallback(O=>{O!==b.current&&(b.current=O,E(O))},[]),D=i||C,L=a||T,j=g.useRef(null),b=g.useRef(null),y=g.useRef(h),A=c!=null,N=_m(c),R=_m(s),I=_m(d),k=g.useCallback(()=>{if(!j.current||!b.current)return;const O={placement:e,strategy:n,middleware:m};R.current&&(O.platform=R.current),sB(j.current,b.current,O).then(q=>{const ie={...q,isPositioned:I.current!==!1};$.current&&!Qd(y.current,ie)&&(y.current=ie,pa.flushSync(()=>{f(ie)}))})},[m,e,n,R,I]);qu(()=>{d===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[d]);const $=g.useRef(!1);qu(()=>($.current=!0,()=>{$.current=!1}),[]),qu(()=>{if(D&&(j.current=D),L&&(b.current=L),D&&L){if(N.current)return N.current(D,L,k);k()}},[D,L,k,N,A]);const J=g.useMemo(()=>({reference:j,floating:b,setReference:w,setFloating:S}),[w,S]),G=g.useMemo(()=>({reference:D,floating:L}),[D,L]),oe=g.useMemo(()=>{const O={position:n,left:0,top:0};if(!G.floating)return O;const q=Nb(G.floating,h.x),ie=Nb(G.floating,h.y);return l?{...O,transform:"translate("+q+"px, "+ie+"px)",...DI(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:ie}},[n,l,G.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:k,refs:J,elements:G,floatingStyles:oe}),[h,k,J,G,oe])}const lB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Eb({element:r.current,padding:s}).fn(n):{}:r?Eb({element:r,padding:s}).fn(n):{}}}},cB=(t,e)=>({...J8(t),options:[t,e]}),uB=(t,e)=>({...Z8(t),options:[t,e]}),dB=(t,e)=>({...rB(t),options:[t,e]}),hB=(t,e)=>({...eB(t),options:[t,e]}),fB=(t,e)=>({...tB(t),options:[t,e]}),mB=(t,e)=>({...nB(t),options:[t,e]}),pB=(t,e)=>({...lB(t),options:[t,e]});var gB="Arrow",LI=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(Ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});LI.displayName=gB;var yB=LI;function OI(t){const[e,n]=g.useState(void 0);return bt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Dv="Popper",[MI,VI]=Ta(Dv),[vB,FI]=MI(Dv),UI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(vB,{scope:e,anchor:r,onAnchorChange:s,children:n})};UI.displayName=Dv;var BI="PopperAnchor",$I=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=FI(BI,n),a=g.useRef(null),l=ft(e,a),c=g.useRef(null);return g.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||a.current,d!==c.current&&i.onAnchorChange(c.current)}),r?null:o.jsx(Ve.div,{...s,ref:l})});$I.displayName=BI;var Lv="PopperContent",[xB,wB]=MI(Lv),zI=g.forwardRef((t,e)=>{var W,ue,ke,Se,be,Ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:x="optimized",onPlaced:C,..._}=t,T=FI(Lv,n),[E,w]=g.useState(null),S=ft(e,Ct=>w(Ct)),[D,L]=g.useState(null),j=OI(D),b=(j==null?void 0:j.width)??0,y=(j==null?void 0:j.height)??0,A=r+(i!=="center"?"-"+i:""),N=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(d)?d:[d],I=R.length>0,k={padding:N,boundary:R.filter(bB),altBoundary:I},{refs:$,floatingStyles:J,placement:G,isPositioned:oe,middlewareData:O}=aB({strategy:"fixed",placement:A,whileElementsMounted:(...Ct)=>X8(...Ct,{animationFrame:x==="always"}),elements:{reference:T.anchor},middleware:[cB({mainAxis:s+y,alignmentAxis:a}),c&&uB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?dB():void 0,...k}),c&&hB({...k}),fB({...k,apply:({elements:Ct,rects:yn,availableWidth:mi,availableHeight:jr})=>{const{width:Ar,height:Rc}=yn.reference,at=Ct.floating.style;at.setProperty("--radix-popper-available-width",`${mi}px`),at.setProperty("--radix-popper-available-height",`${jr}px`),at.setProperty("--radix-popper-anchor-width",`${Ar}px`),at.setProperty("--radix-popper-anchor-height",`${Rc}px`)}}),D&&pB({element:D,padding:l}),EB({arrowWidth:b,arrowHeight:y}),m&&mB({strategy:"referenceHidden",...k})]}),[q,ie]=qI(G),V=Jr(C);bt(()=>{oe&&(V==null||V())},[oe,V]);const H=(W=O.arrow)==null?void 0:W.x,fe=(ue=O.arrow)==null?void 0:ue.y,ye=((ke=O.arrow)==null?void 0:ke.centerOffset)!==0,[Y,ee]=g.useState();return bt(()=>{E&&ee(window.getComputedStyle(E).zIndex)},[E]),o.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:oe?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(Se=O.transformOrigin)==null?void 0:Se.x,(be=O.transformOrigin)==null?void 0:be.y].join(" "),...((Ce=O.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(xB,{scope:n,placedSide:q,onArrowChange:L,arrowX:H,arrowY:fe,shouldHideArrow:ye,children:o.jsx(Ve.div,{"data-side":q,"data-align":ie,..._,ref:S,style:{..._.style,animation:oe?void 0:"none"}})})})});zI.displayName=Lv;var HI="PopperArrow",_B={top:"bottom",right:"left",bottom:"top",left:"right"},WI=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=wB(HI,r),a=_B[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(yB,{...s,ref:n,style:{...s.style,display:"block"}})})});WI.displayName=HI;function bB(t){return t!==null}var EB=t=>({name:"transformOrigin",options:t,fn(e){var T,E,w;const{placement:n,rects:r,middlewareData:s}=e,a=((T=s.arrow)==null?void 0:T.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=qI(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,x=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let C="",_="";return d==="bottom"?(C=a?f:`${m}px`,_=`${-c}px`):d==="top"?(C=a?f:`${m}px`,_=`${r.floating.height+c}px`):d==="right"?(C=`${-c}px`,_=a?f:`${x}px`):d==="left"&&(C=`${r.floating.width+c}px`,_=a?f:`${x}px`),{data:{x:C,y:_}}}});function qI(t){const[e,n="center"]=t.split("-");return[e,n]}var NB=UI,TB=$I,SB=zI,CB=WI,IB="Portal",GI=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);bt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?qk.createPortal(o.jsx(Ve.div,{...r,ref:e}),a):null});GI.displayName=IB;function jB(t){const e=AB(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(RB);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function AB(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=DB(s),l=PB(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Cc(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var kB=Symbol("radix.slottable");function RB(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===kB}function PB(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function DB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function KI(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var QI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LB="VisuallyHidden",OB=g.forwardRef((t,e)=>o.jsx(Ve.span,{...t,ref:e,style:{...QI,...t.style}}));OB.displayName=LB;var MB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ho=new WeakMap,wu=new WeakMap,_u={},bm=0,YI=function(t){return t&&(t.host||YI(t.parentNode))},VB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=YI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},FB=function(t,e,n,r){var s=VB(e,Array.isArray(t)?t:[t]);_u[n]||(_u[n]=new WeakMap);var i=_u[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var x=m.getAttribute(r),C=x!==null&&x!=="false",_=(ho.get(m)||0)+1,T=(i.get(m)||0)+1;ho.set(m,_),i.set(m,T),a.push(m),_===1&&C&&wu.set(m,!0),T===1&&m.setAttribute(n,"true"),C||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return h(e),l.clear(),bm++,function(){a.forEach(function(f){var m=ho.get(f)-1,x=i.get(f)-1;ho.set(f,m),i.set(f,x),m||(wu.has(f)||f.removeAttribute(r),wu.delete(f)),x||f.removeAttribute(n)}),bm--,bm||(ho=new WeakMap,ho=new WeakMap,wu=new WeakMap,_u={})}},UB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=MB(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),FB(r,s,n,"aria-hidden")):function(){return null}},fr=function(){return fr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fr.apply(this,arguments)};function XI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function BB(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Gu="right-scroll-bar-position",Ku="width-before-scroll-bar",$B="with-scroll-bars-hidden",zB="--removed-body-scroll-bar-size";function Em(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function HB(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var WB=typeof window<"u"?g.useLayoutEffect:g.useEffect,Tb=new WeakMap;function qB(t,e){var n=HB(null,function(r){return t.forEach(function(s){return Em(s,r)})});return WB(function(){var r=Tb.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Em(l,null)}),i.forEach(function(l){s.has(l)||Em(l,a)})}Tb.set(n,t)},[t]),n}function GB(t){return t}function KB(t,e){e===void 0&&(e=GB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function QB(t){t===void 0&&(t={});var e=KB(null);return e.options=fr({async:!0,ssr:!1},t),e}var JI=function(t){var e=t.sideCar,n=XI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,fr({},n))};JI.isSideCarExport=!0;function YB(t,e){return t.useMedium(e),JI}var ZI=QB(),Nm=function(){},ef=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Nm,onWheelCapture:Nm,onTouchMoveCapture:Nm}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,x=t.noRelative,C=t.noIsolation,_=t.inert,T=t.allowPinchZoom,E=t.as,w=E===void 0?"div":E,S=t.gapMode,D=XI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=m,j=qB([n,e]),b=fr(fr({},D),s);return g.createElement(g.Fragment,null,h&&g.createElement(L,{sideCar:ZI,removeScrollBar:d,shards:f,noRelative:x,noIsolation:C,inert:_,setCallbacks:i,allowPinchZoom:!!T,lockRef:n,gapMode:S}),a?g.cloneElement(g.Children.only(l),fr(fr({},b),{ref:j})):g.createElement(w,fr({},b,{className:c,ref:j}),l))});ef.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ef.classNames={fullWidth:Ku,zeroRight:Gu};var XB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=XB();return e&&t.setAttribute("nonce",e),t}function ZB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function e$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var t$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=JB())&&(ZB(e,n),e$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},n$=function(){var t=t$();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ej=function(){var t=n$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},r$={left:0,top:0,right:0,gap:0},Tm=function(t){return parseInt(t||"",10)||0},s$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Tm(n),Tm(r),Tm(s)]},i$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return r$;var e=s$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},o$=ej(),zo="data-scroll-locked",a$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat($B,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(zo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ku,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gu," .").concat(Gu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ku," .").concat(Ku,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zo,`] {
    `).concat(zB,": ").concat(l,`px;
  }
`)},Sb=function(){var t=parseInt(document.body.getAttribute(zo)||"0",10);return isFinite(t)?t:0},l$=function(){g.useEffect(function(){return document.body.setAttribute(zo,(Sb()+1).toString()),function(){var t=Sb()-1;t<=0?document.body.removeAttribute(zo):document.body.setAttribute(zo,t.toString())}},[])},c$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;l$();var i=g.useMemo(function(){return i$(s)},[s]);return g.createElement(o$,{styles:a$(i,!e,s,n?"":"!important")})},sg=!1;if(typeof window<"u")try{var bu=Object.defineProperty({},"passive",{get:function(){return sg=!0,!0}});window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{sg=!1}var fo=sg?{passive:!1}:!1,u$=function(t){return t.tagName==="TEXTAREA"},tj=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!u$(t)&&n[e]==="visible")},d$=function(t){return tj(t,"overflowY")},h$=function(t){return tj(t,"overflowX")},Cb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nj(t,r);if(s){var i=rj(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},f$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},m$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},nj=function(t,e){return t==="v"?d$(e):h$(e)},rj=function(t,e){return t==="v"?f$(e):m$(e)},p$=function(t,e){return t==="h"&&e==="rtl"?-1:1},g$=function(t,e,n,r,s){var i=p$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,m=0;do{if(!l)break;var x=rj(t,l),C=x[0],_=x[1],T=x[2],E=_-T-i*C;(C||E)&&nj(t,l)&&(f+=E,m+=C);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(d=!0),d},Eu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ib=function(t){return[t.deltaX,t.deltaY]},jb=function(t){return t&&"current"in t?t.current:t},y$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},v$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},x$=0,mo=[];function w$(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(x$++)[0],i=g.useState(ej)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=BB([t.lockRef.current],(t.shards||[]).map(jb),!0).filter(Boolean);return _.forEach(function(T){return T.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(T){return T.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(_,T){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!a.current.allowPinchZoom;var E=Eu(_),w=n.current,S="deltaX"in _?_.deltaX:w[0]-E[0],D="deltaY"in _?_.deltaY:w[1]-E[1],L,j=_.target,b=Math.abs(S)>Math.abs(D)?"h":"v";if("touches"in _&&b==="h"&&j.type==="range")return!1;var y=Cb(b,j);if(!y)return!0;if(y?L=b:(L=b==="v"?"h":"v",y=Cb(b,j)),!y)return!1;if(!r.current&&"changedTouches"in _&&(S||D)&&(r.current=L),!L)return!0;var A=r.current||L;return g$(A,T,_,A==="h"?S:D)},[]),c=g.useCallback(function(_){var T=_;if(!(!mo.length||mo[mo.length-1]!==i)){var E="deltaY"in T?Ib(T):Eu(T),w=e.current.filter(function(L){return L.name===T.type&&(L.target===T.target||T.target===L.shadowParent)&&y$(L.delta,E)})[0];if(w&&w.should){T.cancelable&&T.preventDefault();return}if(!w){var S=(a.current.shards||[]).map(jb).filter(Boolean).filter(function(L){return L.contains(T.target)}),D=S.length>0?l(T,S[0]):!a.current.noIsolation;D&&T.cancelable&&T.preventDefault()}}},[]),d=g.useCallback(function(_,T,E,w){var S={name:_,delta:T,target:E,should:w,shadowParent:_$(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(D){return D!==S})},1)},[]),h=g.useCallback(function(_){n.current=Eu(_),r.current=void 0},[]),f=g.useCallback(function(_){d(_.type,Ib(_),_.target,l(_,t.lockRef.current))},[]),m=g.useCallback(function(_){d(_.type,Eu(_),_.target,l(_,t.lockRef.current))},[]);g.useEffect(function(){return mo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,fo),document.addEventListener("touchmove",c,fo),document.addEventListener("touchstart",h,fo),function(){mo=mo.filter(function(_){return _!==i}),document.removeEventListener("wheel",c,fo),document.removeEventListener("touchmove",c,fo),document.removeEventListener("touchstart",h,fo)}},[]);var x=t.removeScrollBar,C=t.inert;return g.createElement(g.Fragment,null,C?g.createElement(i,{styles:v$(s)}):null,x?g.createElement(c$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function _$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const b$=YB(ZI,w$);var sj=g.forwardRef(function(t,e){return g.createElement(ef,fr({},t,{ref:e,sideCar:b$}))});sj.classNames=ef.classNames;var E$=[" ","Enter","ArrowUp","ArrowDown"],N$=[" ","Enter"],Xi="Select",[tf,nf,T$]=KC(Xi),[ja]=Ta(Xi,[T$,VI]),rf=VI(),[S$,hi]=ja(Xi),[C$,I$]=ja(Xi),ij=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:x,form:C}=t,_=rf(e),[T,E]=g.useState(null),[w,S]=g.useState(null),[D,L]=g.useState(!1),j=Nv(d),[b,y]=ac({prop:r,defaultProp:s??!1,onChange:i,caller:Xi}),[A,N]=ac({prop:a,defaultProp:l,onChange:c,caller:Xi}),R=g.useRef(null),I=T?C||!!T.closest("form"):!0,[k,$]=g.useState(new Set),J=Array.from(k).map(G=>G.props.value).join(";");return o.jsx(NB,{..._,children:o.jsxs(S$,{required:x,scope:e,trigger:T,onTriggerChange:E,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:D,onValueNodeHasChildrenChange:L,contentId:jc(),value:A,onValueChange:N,open:b,onOpenChange:y,dir:j,triggerPointerDownPosRef:R,disabled:m,children:[o.jsx(tf.Provider,{scope:e,children:o.jsx(C$,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(G=>{$(oe=>new Set(oe).add(G))},[]),onNativeOptionRemove:g.useCallback(G=>{$(oe=>{const O=new Set(oe);return O.delete(G),O})},[]),children:n})}),I?o.jsxs(jj,{"aria-hidden":!0,required:x,tabIndex:-1,name:h,autoComplete:f,value:A,onChange:G=>N(G.target.value),disabled:m,form:C,children:[A===void 0?o.jsx("option",{value:""}):null,Array.from(k)]},J):null]})})};ij.displayName=Xi;var oj="SelectTrigger",aj=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=rf(n),a=hi(oj,n),l=a.disabled||r,c=ft(e,a.onTriggerChange),d=nf(n),h=g.useRef("touch"),[f,m,x]=kj(_=>{const T=d().filter(S=>!S.disabled),E=T.find(S=>S.value===a.value),w=Rj(T,_,E);w!==void 0&&a.onValueChange(w.value)}),C=_=>{l||(a.onOpenChange(!0),x()),_&&(a.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return o.jsx(TB,{asChild:!0,...i,children:o.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Aj(a.value)?"":void 0,...s,ref:c,onClick:Re(s.onClick,_=>{_.currentTarget.focus(),h.current!=="mouse"&&C(_)}),onPointerDown:Re(s.onPointerDown,_=>{h.current=_.pointerType;const T=_.target;T.hasPointerCapture(_.pointerId)&&T.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(C(_),_.preventDefault())}),onKeyDown:Re(s.onKeyDown,_=>{const T=f.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&m(_.key),!(T&&_.key===" ")&&E$.includes(_.key)&&(C(),_.preventDefault())})})})});aj.displayName=oj;var lj="SelectValue",cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=hi(lj,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=ft(e,c.onValueNodeChange);return bt(()=>{d(h)},[d,h]),o.jsx(Ve.span,{...l,ref:f,style:{pointerEvents:"none"},children:Aj(c.value)?o.jsx(o.Fragment,{children:a}):i})});cj.displayName=lj;var j$="SelectIcon",uj=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Ve.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});uj.displayName=j$;var A$="SelectPortal",dj=t=>o.jsx(GI,{asChild:!0,...t});dj.displayName=A$;var Ji="SelectContent",hj=g.forwardRef((t,e)=>{const n=hi(Ji,t.__scopeSelect),[r,s]=g.useState();if(bt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?pa.createPortal(o.jsx(fj,{scope:t.__scopeSelect,children:o.jsx(tf.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(mj,{...t,ref:e})});hj.displayName=Ji;var qn=10,[fj,fi]=ja(Ji),k$="SelectContentImpl",R$=jB("SelectContent.RemoveScroll"),mj=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:x,sticky:C,hideWhenDetached:_,avoidCollisions:T,...E}=t,w=hi(Ji,n),[S,D]=g.useState(null),[L,j]=g.useState(null),b=ft(e,W=>D(W)),[y,A]=g.useState(null),[N,R]=g.useState(null),I=nf(n),[k,$]=g.useState(!1),J=g.useRef(!1);g.useEffect(()=>{if(S)return UB(S)},[S]),J9();const G=g.useCallback(W=>{const[ue,...ke]=I().map(Ce=>Ce.ref.current),[Se]=ke.slice(-1),be=document.activeElement;for(const Ce of W)if(Ce===be||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===ue&&L&&(L.scrollTop=0),Ce===Se&&L&&(L.scrollTop=L.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==be))return},[I,L]),oe=g.useCallback(()=>G([y,S]),[G,y,S]);g.useEffect(()=>{k&&oe()},[k,oe]);const{onOpenChange:O,triggerPointerDownPosRef:q}=w;g.useEffect(()=>{if(S){let W={x:0,y:0};const ue=Se=>{var be,Ce;W={x:Math.abs(Math.round(Se.pageX)-(((be=q.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((Ce=q.current)==null?void 0:Ce.y)??0))}},ke=Se=>{W.x<=10&&W.y<=10?Se.preventDefault():S.contains(Se.target)||O(!1),document.removeEventListener("pointermove",ue),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",ke,{capture:!0})}}},[S,O,q]),g.useEffect(()=>{const W=()=>O(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[O]);const[ie,V]=kj(W=>{const ue=I().filter(be=>!be.disabled),ke=ue.find(be=>be.ref.current===document.activeElement),Se=Rj(ue,W,ke);Se&&setTimeout(()=>Se.ref.current.focus())}),H=g.useCallback((W,ue,ke)=>{const Se=!J.current&&!ke;(w.value!==void 0&&w.value===ue||Se)&&(A(W),Se&&(J.current=!0))},[w.value]),fe=g.useCallback(()=>S==null?void 0:S.focus(),[S]),ye=g.useCallback((W,ue,ke)=>{const Se=!J.current&&!ke;(w.value!==void 0&&w.value===ue||Se)&&R(W)},[w.value]),Y=r==="popper"?ig:pj,ee=Y===ig?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:x,sticky:C,hideWhenDetached:_,avoidCollisions:T}:{};return o.jsx(fj,{scope:n,content:S,viewport:L,onViewportChange:j,itemRefCallback:H,selectedItem:y,onItemLeave:fe,itemTextRefCallback:ye,focusSelectedItem:oe,selectedItemText:N,position:r,isPositioned:k,searchRef:ie,children:o.jsx(sj,{as:R$,allowPinchZoom:!0,children:o.jsx(bI,{asChild:!0,trapped:w.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:Re(s,W=>{var ue;(ue=w.trigger)==null||ue.focus({preventScroll:!0}),W.preventDefault()}),children:o.jsx(wI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(Y,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:W=>W.preventDefault(),...E,...ee,onPlaced:()=>$(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Re(E.onKeyDown,W=>{const ue=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ue&&W.key.length===1&&V(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let Se=I().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(W.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const be=W.target,Ce=Se.indexOf(be);Se=Se.slice(Ce+1)}setTimeout(()=>G(Se)),W.preventDefault()}})})})})})})});mj.displayName=k$;var P$="SelectItemAlignedPosition",pj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=hi(Ji,n),a=fi(Ji,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=ft(e,b=>h(b)),m=nf(n),x=g.useRef(!1),C=g.useRef(!0),{viewport:_,selectedItem:T,selectedItemText:E,focusSelectedItem:w}=a,S=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&_&&T&&E){const b=i.trigger.getBoundingClientRect(),y=d.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),N=E.getBoundingClientRect();if(i.dir!=="rtl"){const be=N.left-y.left,Ce=A.left-be,Ct=b.left-Ce,yn=b.width+Ct,mi=Math.max(yn,y.width),jr=window.innerWidth-qn,Ar=ob(Ce,[qn,Math.max(qn,jr-mi)]);l.style.minWidth=yn+"px",l.style.left=Ar+"px"}else{const be=y.right-N.right,Ce=window.innerWidth-A.right-be,Ct=window.innerWidth-b.right-Ce,yn=b.width+Ct,mi=Math.max(yn,y.width),jr=window.innerWidth-qn,Ar=ob(Ce,[qn,Math.max(qn,jr-mi)]);l.style.minWidth=yn+"px",l.style.right=Ar+"px"}const R=m(),I=window.innerHeight-qn*2,k=_.scrollHeight,$=window.getComputedStyle(d),J=parseInt($.borderTopWidth,10),G=parseInt($.paddingTop,10),oe=parseInt($.borderBottomWidth,10),O=parseInt($.paddingBottom,10),q=J+G+k+O+oe,ie=Math.min(T.offsetHeight*5,q),V=window.getComputedStyle(_),H=parseInt(V.paddingTop,10),fe=parseInt(V.paddingBottom,10),ye=b.top+b.height/2-qn,Y=I-ye,ee=T.offsetHeight/2,W=T.offsetTop+ee,ue=J+G+W,ke=q-ue;if(ue<=ye){const be=R.length>0&&T===R[R.length-1].ref.current;l.style.bottom="0px";const Ce=d.clientHeight-_.offsetTop-_.offsetHeight,Ct=Math.max(Y,ee+(be?fe:0)+Ce+oe),yn=ue+Ct;l.style.height=yn+"px"}else{const be=R.length>0&&T===R[0].ref.current;l.style.top="0px";const Ct=Math.max(ye,J+_.offsetTop+(be?H:0)+ee)+ke;l.style.height=Ct+"px",_.scrollTop=ue-ye+_.offsetTop}l.style.margin=`${qn}px 0`,l.style.minHeight=ie+"px",l.style.maxHeight=I+"px",r==null||r(),requestAnimationFrame(()=>x.current=!0)}},[m,i.trigger,i.valueNode,l,d,_,T,E,i.dir,r]);bt(()=>S(),[S]);const[D,L]=g.useState();bt(()=>{d&&L(window.getComputedStyle(d).zIndex)},[d]);const j=g.useCallback(b=>{b&&C.current===!0&&(S(),w==null||w(),C.current=!1)},[S,w]);return o.jsx(L$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:x,onScrollButtonChange:j,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:o.jsx(Ve.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});pj.displayName=P$;var D$="SelectPopperPosition",ig=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=qn,...i}=t,a=rf(n);return o.jsx(SB,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ig.displayName=D$;var[L$,Ov]=ja(Ji,{}),og="SelectViewport",gj=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=fi(og,n),a=Ov(og,n),l=ft(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(tf.Slot,{scope:n,children:o.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Re(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const x=Math.abs(c.current-h.scrollTop);if(x>0){const C=window.innerHeight-qn*2,_=parseFloat(f.style.minHeight),T=parseFloat(f.style.height),E=Math.max(_,T);if(E<C){const w=E+x,S=Math.min(C,w),D=w-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=D>0?D:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});gj.displayName=og;var yj="SelectGroup",[O$,M$]=ja(yj),V$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=jc();return o.jsx(O$,{scope:n,id:s,children:o.jsx(Ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});V$.displayName=yj;var vj="SelectLabel",xj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=M$(vj,n);return o.jsx(Ve.div,{id:s.id,...r,ref:e})});xj.displayName=vj;var Yd="SelectItem",[F$,wj]=ja(Yd),_j=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=hi(Yd,n),c=fi(Yd,n),d=l.value===r,[h,f]=g.useState(i??""),[m,x]=g.useState(!1),C=ft(e,w=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,w,r,s)}),_=jc(),T=g.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(F$,{scope:n,value:r,disabled:s,textId:_,isSelected:d,onItemTextChange:g.useCallback(w=>{f(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(tf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(Ve.div,{role:"option","aria-labelledby":_,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:C,onFocus:Re(a.onFocus,()=>x(!0)),onBlur:Re(a.onBlur,()=>x(!1)),onClick:Re(a.onClick,()=>{T.current!=="mouse"&&E()}),onPointerUp:Re(a.onPointerUp,()=>{T.current==="mouse"&&E()}),onPointerDown:Re(a.onPointerDown,w=>{T.current=w.pointerType}),onPointerMove:Re(a.onPointerMove,w=>{var S;T.current=w.pointerType,s?(S=c.onItemLeave)==null||S.call(c):T.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Re(a.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:Re(a.onKeyDown,w=>{var D;((D=c.searchRef)==null?void 0:D.current)!==""&&w.key===" "||(N$.includes(w.key)&&E(),w.key===" "&&w.preventDefault())})})})})});_j.displayName=Yd;var fl="SelectItemText",bj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=hi(fl,n),l=fi(fl,n),c=wj(fl,n),d=I$(fl,n),[h,f]=g.useState(null),m=ft(e,E=>f(E),c.onItemTextChange,E=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,E,c.value,c.disabled)}),x=h==null?void 0:h.textContent,C=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:x},c.value),[c.disabled,c.value,x]),{onNativeOptionAdd:_,onNativeOptionRemove:T}=d;return bt(()=>(_(C),()=>T(C)),[_,T,C]),o.jsxs(o.Fragment,{children:[o.jsx(Ve.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?pa.createPortal(i.children,a.valueNode):null]})});bj.displayName=fl;var Ej="SelectItemIndicator",Nj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return wj(Ej,n).isSelected?o.jsx(Ve.span,{"aria-hidden":!0,...r,ref:e}):null});Nj.displayName=Ej;var ag="SelectScrollUpButton",Tj=g.forwardRef((t,e)=>{const n=fi(ag,t.__scopeSelect),r=Ov(ag,t.__scopeSelect),[s,i]=g.useState(!1),a=ft(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Cj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Tj.displayName=ag;var lg="SelectScrollDownButton",Sj=g.forwardRef((t,e)=>{const n=fi(lg,t.__scopeSelect),r=Ov(lg,t.__scopeSelect),[s,i]=g.useState(!1),a=ft(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Cj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Sj.displayName=lg;var Cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=fi("SelectScrollButton",n),a=g.useRef(null),l=nf(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),bt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Re(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:Re(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:Re(s.onPointerLeave,()=>{c()})})}),U$="SelectSeparator",Ij=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Ve.div,{"aria-hidden":!0,...r,ref:e})});Ij.displayName=U$;var cg="SelectArrow",B$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=rf(n),i=hi(cg,n),a=fi(cg,n);return i.open&&a.position==="popper"?o.jsx(CB,{...s,...r,ref:e}):null});B$.displayName=cg;var $$="SelectBubbleInput",jj=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),i=ft(r,s),a=KI(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(Ve.select,{...n,style:{...QI,...n.style},ref:i,defaultValue:e})});jj.displayName=$$;function Aj(t){return t===""||t===void 0}function kj(t){const e=Jr(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Rj(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=z$(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function z$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var H$=ij,Pj=aj,W$=cj,q$=uj,G$=dj,Dj=hj,K$=gj,Lj=xj,Oj=_j,Q$=bj,Y$=Nj,Mj=Tj,Vj=Sj,Fj=Ij;const Xt=H$,Jt=W$,$t=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Pj,{ref:r,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(q$,{asChild:!0,children:o.jsx(jC,{className:"h-4 w-4 opacity-50"})})]}));$t.displayName=Pj.displayName;const Uj=g.forwardRef(({className:t,...e},n)=>o.jsx(Mj,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(Y5,{className:"h-4 w-4"})}));Uj.displayName=Mj.displayName;const Bj=g.forwardRef(({className:t,...e},n)=>o.jsx(Vj,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(jC,{className:"h-4 w-4"})}));Bj.displayName=Vj.displayName;const zt=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(G$,{children:o.jsxs(Dj,{ref:s,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(Uj,{}),o.jsx(K$,{className:Le("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Bj,{})]})}));zt.displayName=Dj.displayName;const X$=g.forwardRef(({className:t,...e},n)=>o.jsx(Lj,{ref:n,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));X$.displayName=Lj.displayName;const se=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Oj,{ref:r,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Y$,{children:o.jsx(Q5,{className:"h-4 w-4"})})}),o.jsx(Q$,{children:e})]}));se.displayName=Oj.displayName;const J$=g.forwardRef(({className:t,...e},n)=>o.jsx(Fj,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));J$.displayName=Fj.displayName;var sf="Switch",[Z$]=Ta(sf),[ez,tz]=Z$(sf),$j=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[m,x]=g.useState(null),C=ft(e,S=>x(S)),_=g.useRef(!1),T=m?h||!!m.closest("form"):!0,[E,w]=ac({prop:s,defaultProp:i??!1,onChange:d,caller:sf});return o.jsxs(ez,{scope:n,checked:E,disabled:l,children:[o.jsx(Ve.button,{type:"button",role:"switch","aria-checked":E,"aria-required":a,"data-state":qj(E),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:C,onClick:Re(t.onClick,S=>{w(D=>!D),T&&(_.current=S.isPropagationStopped(),_.current||S.stopPropagation())})}),T&&o.jsx(Wj,{control:m,bubbles:!_.current,name:r,value:c,checked:E,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});$j.displayName=sf;var zj="SwitchThumb",Hj=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=tz(zj,n);return o.jsx(Ve.span,{"data-state":qj(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Hj.displayName=zj;var nz="SwitchBubbleInput",Wj=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=ft(a,i),c=KI(n),d=OI(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&x){const C=new Event("click",{bubbles:r});x.call(h,n),h.dispatchEvent(C)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Wj.displayName=nz;function qj(t){return t?"checked":"unchecked"}var Gj=$j,rz=Hj;const Rt=g.forwardRef(({className:t,...e},n)=>o.jsx(Gj,{className:Le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:o.jsx(rz,{className:Le("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Rt.displayName=Gj.displayName;const sz=({onBack:t})=>{const{user:e}=Hn(),[n,r]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[s,i]=g.useState([{id:"1",question:"",points:0,flag:""}]),[a,l]=g.useState(!1),[c,d]=g.useState(!1),h=async j=>{j.preventDefault(),l(!0);try{const b={...n,finalCategory:c?n.customCategory:n.category,questions:n.hasMultipleQuestions?s:[],createdAt:new Date,isActive:!0,solvedBy:[],hints:n.hints.filter(y=>y.trim()!==""),totalPoints:n.hasMultipleQuestions?s.reduce((y,A)=>y+A.points,0):n.points,createdBy:e==null?void 0:e.uid,createdByName:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),featuredOnPractice:n.featuredOnPractice,availableInPractice:n.availableInPractice,challengeType:n.challengeType,...n.isExternalChallenge&&{attribution:{...n.externalSource,importedBy:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),importedById:e==null?void 0:e.uid,importedAt:new Date}},...n.creator&&{originalCreator:{name:n.creator,url:n.creatorUrl}}};await QS(kt(ve,"challenges"),b),alert("Challenge created successfully!"),f()}catch(b){console.error("Error creating challenge:",b),alert("Error creating challenge. Please try again.")}finally{l(!1)}},f=()=>{r({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),i([{id:"1",question:"",points:0,flag:""}]),d(!1)},m=()=>{r({...n,hints:[...n.hints,""]})},x=(j,b)=>{const y=[...n.hints];y[j]=b,r({...n,hints:y})},C=j=>{const b=n.hints.filter((y,A)=>A!==j);r({...n,hints:b})},_=()=>{const j={id:Date.now().toString(),question:"",points:0,flag:""};i([...s,j])},T=(j,b,y)=>{i(s.map(A=>A.id===j?{...A,[b]:y}:A))},E=j=>{s.length>1&&i(s.filter(b=>b.id!==j))},w=j=>{if(j==="link"){const b=prompt("Enter the URL:");if(b){const y={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:b,type:"link"};r({...n,files:[...n.files,y]})}}else{const b=document.createElement("input");b.type="file",b.onchange=y=>{var N;const A=(N=y.target.files)==null?void 0:N[0];if(A){const R={id:Date.now().toString(),name:A.name,url:URL.createObjectURL(A),type:"file"};r({...n,files:[...n.files,R]})}},b.click()}},S=j=>{r({...n,files:n.files.filter(b=>b.id!==j)})},D=j=>{j==="custom"?(d(!0),r({...n,category:"custom"})):(d(!1),r({...n,category:j}))},L=(j,b)=>{r({...n,externalSource:{...n.externalSource,[j]:b}})};return o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Create New Challenge"}),o.jsx(Ht,{children:"Add a new CTF challenge to the platform with advanced options"})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(me,{id:"title",value:n.title,onChange:j=>r({...n,title:j.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:n.category,onValueChange:D,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"web",children:"Web"}),o.jsx(se,{value:"crypto",children:"Cryptography"}),o.jsx(se,{value:"forensics",children:"Forensics"}),o.jsx(se,{value:"pwn",children:"Pwn"}),o.jsx(se,{value:"reversing",children:"Reverse Engineering"}),o.jsx(se,{value:"misc",children:"Miscellaneous"}),o.jsx(se,{value:"custom",children:"Custom Category"})]})]})]}),c&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(me,{id:"customCategory",value:n.customCategory,onChange:j=>r({...n,customCategory:j.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:n.difficulty,onValueChange:j=>r({...n,difficulty:j}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(se,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(se,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"points",children:"Points *"}),o.jsx(me,{id:"points",type:"number",value:n.points,onChange:j=>r({...n,points:parseInt(j.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(K,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:n.description,onChange:j=>r({...n,description:j.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xe,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:n.availableInPractice,onCheckedChange:j=>r({...n,availableInPractice:j})}),o.jsx(K,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:n.featuredOnPractice,onCheckedChange:j=>r({...n,featuredOnPractice:j})}),o.jsxs(K,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(_v,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:n.challengeType,onValueChange:j=>r({...n,challengeType:j}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"practice",children:"Practice Challenge"}),o.jsx(se,{value:"live",children:"Live Event Challenge"}),o.jsx(se,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cn,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(me,{id:"creator",value:n.creator,onChange:j=>r({...n,creator:j.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(me,{id:"creatorUrl",value:n.creatorUrl,onChange:j=>r({...n,creatorUrl:j.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hd,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:n.isExternalChallenge,onCheckedChange:j=>r({...n,isExternalChallenge:j})})]}),n.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(me,{id:"ctfName",value:n.externalSource.ctfName,onChange:j=>L("ctfName",j.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(me,{id:"ctfUrl",value:n.externalSource.ctfUrl,onChange:j=>L("ctfUrl",j.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(me,{id:"originalAuthor",value:n.externalSource.originalAuthor,onChange:j=>L("originalAuthor",j.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(me,{id:"authorUrl",value:n.externalSource.authorUrl,onChange:j=>L("authorUrl",j.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:n.externalSource.license,onValueChange:j=>L("license",j),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"unknown",children:"Unknown"}),o.jsx(se,{value:"MIT",children:"MIT License"}),o.jsx(se,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(se,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(se,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(se,{value:"custom",children:"Custom License"})]})]}),n.externalSource.license==="custom"&&o.jsx(me,{placeholder:"Specify custom license",className:"mt-2",onChange:j=>L("license",j.target.value)})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Attribution Notice:"})," This challenge will be displayed with proper attribution to the original author and CTF platform."]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:n.hasMultipleQuestions,onCheckedChange:j=>r({...n,hasMultipleQuestions:j})})]}),n.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{className:"text-base",children:"Challenge Questions"}),o.jsxs(X,{type:"button",onClick:_,variant:"outline",size:"sm",children:[o.jsx(Zs,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),s.map((j,b)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{children:["Question ",b+1]}),s.length>1&&o.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(j.id),children:o.jsx(Qi,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`question-${j.id}`,children:"Question Text *"}),o.jsx(me,{id:`question-${j.id}`,value:j.question,onChange:y=>T(j.id,"question",y.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:`points-${j.id}`,children:"Points *"}),o.jsx(me,{id:`points-${j.id}`,type:"number",value:j.points,onChange:y=>T(j.id,"points",parseInt(y.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`flag-${j.id}`,children:"Flag *"}),o.jsx(me,{id:`flag-${j.id}`,value:j.flag,onChange:y=>T(j.id,"flag",y.target.value),placeholder:"Flag for this question",required:!0})]})]})]},j.id)),s.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",s.reduce((j,b)=>j+b.points,0)]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flag",children:"Flag *"}),o.jsx(me,{id:"flag",value:n.flag,onChange:j=>r({...n,flag:j.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:n.flagFormat,onValueChange:j=>r({...n,flagFormat:j}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(se,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(se,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(se,{value:".*",children:"Any format"}),o.jsx(se,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(se,{value:"custom",children:"Custom Regex"})]})]}),n.flagFormat==="custom"&&o.jsx(me,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:j=>r({...n,flagFormat:j.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(K,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(X,{type:"button",variant:"outline",onClick:()=>w("file"),children:[o.jsx(DC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(X,{type:"button",variant:"outline",onClick:()=>w("link"),children:[o.jsx(la,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),n.files.length>0&&o.jsx("div",{className:"space-y-2",children:n.files.map(j=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[j.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(la,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:j.name}),j.type==="link"&&o.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(j.id),children:o.jsx(Qi,{className:"w-4 h-4"})})]},j.id))})]}),o.jsxs("div",{children:[o.jsx(K,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[n.hints.map((j,b)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(me,{value:j,onChange:y=>x(b,y.target.value),placeholder:`Hint ${b+1}`}),n.hints.length>1&&o.jsx(X,{type:"button",variant:"outline",onClick:()=>C(b),children:"Remove"})]},b)),o.jsx(X,{type:"button",variant:"outline",onClick:m,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(X,{type:"submit",disabled:a,children:a?"Creating...":"Create Challenge"}),o.jsx(X,{type:"button",variant:"outline",onClick:f,children:"Reset Form"}),o.jsx(X,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},iz=({onBack:t,onCreateNew:e,onEditChallenge:n})=>{const{user:r}=Hn(),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[m,x]=g.useState("all"),[C,_]=g.useState("all"),[T,E]=g.useState("all"),[w,S]=g.useState("all"),[D,L]=g.useState([]),[j,b]=g.useState(!1);g.useEffect(()=>{y(),A()},[]),g.useEffect(()=>{N()},[h,m,C,T,w,s]);const y=async()=>{try{const V=Xr(kt(ve,"challenges"),Gi("createdAt","desc")),fe=(await sr(V)).docs.map(ye=>({id:ye.id,...ye.data()}));i(fe)}catch(V){console.error("Error fetching challenges:",V)}finally{d(!1)}},A=async()=>{try{b(!0);const V=Xr(kt(ve,"events"),wn("status","in",["LIVE","UPCOMING"]),Gi("startTime","asc")),fe=(await sr(V)).docs.map(ye=>({id:ye.id,...ye.data()}));L(fe)}catch(V){console.error("Error fetching events:",V),L([])}finally{b(!1)}},N=()=>{let V=s;h&&(V=V.filter(H=>H.title.toLowerCase().includes(h.toLowerCase())||H.description.toLowerCase().includes(h.toLowerCase())||(H.finalCategory||H.category).toLowerCase().includes(h.toLowerCase()))),m!=="all"&&(V=V.filter(H=>(H.finalCategory||H.category)===m)),C!=="all"&&(V=V.filter(H=>H.difficulty===C)),T!=="all"&&(V=V.filter(H=>T==="active"?H.isActive:!H.isActive)),w!=="all"&&(V=V.filter(H=>{switch(w){case"practice":return H.challengeType==="practice"||H.featuredOnPractice||H.availableInPractice;case"live":return H.challengeType==="live";case"upcoming":return H.challengeType==="upcoming";case"past":return H.challengeType==="past_event";case"featured":return H.featuredOnPractice;default:return!0}})),l(V)},R=async(V,H)=>{try{await dn(ze(ve,"challenges",V),{isActive:!H}),i(s.map(fe=>fe.id===V?{...fe,isActive:!H}:fe))}catch(fe){console.error("Error updating challenge status:",fe)}},I=async(V,H)=>{try{await dn(ze(ve,"challenges",V),{featuredOnPractice:!H,availableInPractice:!0,challengeType:H?void 0:"practice"}),i(s.map(fe=>fe.id===V?{...fe,featuredOnPractice:!H,availableInPractice:!0,challengeType:H?fe.challengeType:"practice"}:fe))}catch(fe){console.error("Error updating featured status:",fe)}},k=async(V,H,fe)=>{try{const ye=D.find(Y=>Y.id===H);await dn(ze(ve,"challenges",V),{eventId:H,eventName:fe,challengeType:(ye==null?void 0:ye.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}),i(s.map(Y=>Y.id===V?{...Y,eventId:H,eventName:fe,challengeType:(ye==null?void 0:ye.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}:Y))}catch(ye){console.error("Error assigning challenge to event:",ye)}},$=async V=>{try{await dn(ze(ve,"challenges",V),{eventId:null,eventName:null,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}),i(s.map(H=>H.id===V?{...H,eventId:void 0,eventName:void 0,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}:H))}catch(H){console.error("Error removing challenge from event:",H)}},J=async(V,H)=>{try{await dn(ze(ve,"challenges",V),{availableInPractice:H,challengeType:H?"practice":void 0,featuredOnPractice:H?!1:void 0}),i(s.map(fe=>fe.id===V?{...fe,availableInPractice:H,challengeType:H?"practice":fe.challengeType,featuredOnPractice:H?fe.featuredOnPractice:!1}:fe))}catch(fe){console.error("Error updating practice availability:",fe)}},G=async V=>{if(confirm("Are you sure you want to delete this challenge? This action cannot be undone."))try{await P6(ze(ve,"challenges",V)),i(s.filter(H=>H.id!==V))}catch(H){console.error("Error deleting challenge:",H)}},oe=V=>{switch(V){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},O=V=>({web:"bg-blue-100 text-blue-800",crypto:"bg-purple-100 text-purple-800",forensics:"bg-orange-100 text-orange-800",pwn:"bg-red-100 text-red-800",reversing:"bg-indigo-100 text-indigo-800",misc:"bg-gray-100 text-gray-800"})[V]||"bg-gray-100 text-gray-800",q=V=>V.challengeType==="live"?o.jsxs(Oe,{className:"bg-red-100 text-red-800",children:[o.jsx(ks,{className:"w-3 h-3 mr-1"}),"Live Event"]}):V.challengeType==="upcoming"?o.jsxs(Oe,{className:"bg-yellow-100 text-yellow-800",children:[o.jsx(oa,{className:"w-3 h-3 mr-1"}),"Upcoming"]}):V.challengeType==="past_event"?o.jsx(Oe,{className:"bg-gray-100 text-gray-800",children:"Past Event"}):V.featuredOnPractice?o.jsxs(Oe,{className:"bg-purple-100 text-purple-800",children:[o.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Featured"]}):V.availableInPractice?o.jsx(Oe,{className:"bg-green-100 text-green-800",children:"Practice"}):null,ie=()=>{const V=s.map(H=>H.finalCategory||H.category);return Array.from(new Set(V)).filter(Boolean)};return c?o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenges..."})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Challenge Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage challenges, assign to events, and feature on practice page (",s.length," total)"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(X,{onClick:e,children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Create New"]}),o.jsx(X,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]}),o.jsxs(ae,{children:[o.jsx(Pe,{children:o.jsx(De,{className:"text-lg",children:"Search & Filter"})}),o.jsx(le,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ca,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(me,{placeholder:"Search challenges...",value:h,onChange:V=>f(V.target.value),className:"pl-10"})]}),o.jsx("div",{children:o.jsxs(Xt,{value:m,onValueChange:x,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Categories"})}),o.jsxs(zt,{children:[o.jsx(se,{value:"all",children:"All Categories"}),ie().map(V=>o.jsx(se,{value:V,children:V},V))]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:C,onValueChange:_,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Difficulties"})}),o.jsxs(zt,{children:[o.jsx(se,{value:"all",children:"All Difficulties"}),o.jsx(se,{value:"easy",children:"Easy"}),o.jsx(se,{value:"medium",children:"Medium"}),o.jsx(se,{value:"hard",children:"Hard"}),o.jsx(se,{value:"expert",children:"Expert"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:T,onValueChange:E,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Status"})}),o.jsxs(zt,{children:[o.jsx(se,{value:"all",children:"All Status"}),o.jsx(se,{value:"active",children:"Active"}),o.jsx(se,{value:"inactive",children:"Inactive"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:w,onValueChange:S,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Types"})}),o.jsxs(zt,{children:[o.jsx(se,{value:"all",children:"All Types"}),o.jsx(se,{value:"practice",children:"Practice"}),o.jsx(se,{value:"live",children:"Live Event"}),o.jsx(se,{value:"upcoming",children:"Upcoming Event"}),o.jsx(se,{value:"past",children:"Past Event"}),o.jsx(se,{value:"featured",children:"Featured"})]})]})})]})})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Challenges"}),o.jsxs(Ht,{children:[a.length," of ",s.length," challenges shown",D.length>0&&`  ${D.length} events available`]})]}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-4",children:[a.map(V=>{var H,fe,ye,Y;return o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("h3",{className:"font-semibold text-lg",children:V.title}),o.jsx(Oe,{variant:V.isActive?"default":"secondary",children:V.isActive?"Active":"Inactive"}),o.jsx(Oe,{className:oe(V.difficulty),children:V.difficulty}),o.jsx(Oe,{className:O(V.finalCategory||V.category),children:V.finalCategory||V.category}),o.jsxs(Oe,{variant:"outline",children:[V.points," pts"]}),q(V)]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:V.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Created by: ",V.createdByName]}),o.jsx("span",{children:""}),o.jsx("span",{children:((ye=(fe=(H=V.createdAt)==null?void 0:H.toDate)==null?void 0:fe.call(H))==null?void 0:ye.toLocaleDateString())||new Date(V.createdAt).toLocaleDateString()}),o.jsx("span",{children:""}),o.jsxs("span",{children:[((Y=V.solvedBy)==null?void 0:Y.length)||0," solves"]}),V.eventName&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Event: ",V.eventName]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`featured-${V.id}`,checked:V.featuredOnPractice||!1,onCheckedChange:ee=>I(V.id,V.featuredOnPractice||!1)}),o.jsx(K,{htmlFor:`featured-${V.id}`,className:"text-sm",children:"Featured on Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`practice-${V.id}`,checked:V.availableInPractice||!1,onCheckedChange:ee=>J(V.id,ee)}),o.jsx(K,{htmlFor:`practice-${V.id}`,className:"text-sm",children:"Available in Practice"})]}),!V.eventId&&D.length>0&&o.jsx("div",{className:"flex items-center space-x-2",children:o.jsxs(Xt,{value:"",onValueChange:ee=>{const W=D.find(ue=>ue.id===ee);W&&k(V.id,ee,W.title)},children:[o.jsx($t,{className:"w-40",children:o.jsx(Jt,{placeholder:"Assign to Event"})}),o.jsx(zt,{children:D.map(ee=>o.jsxs(se,{value:ee.id,children:[ee.title," (",ee.status,")"]},ee.id))})]})}),V.eventId&&o.jsx(X,{variant:"outline",size:"sm",onClick:()=>$(V.id),children:"Remove from Event"}),D.length===0&&o.jsx(Oe,{variant:"outline",className:"text-xs",children:"No events available"})]})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsxs(X,{variant:"outline",size:"sm",onClick:()=>n(V),children:[o.jsx(dU,{className:"w-4 h-4 mr-1"}),"Edit"]}),o.jsx(X,{variant:"outline",size:"sm",onClick:()=>R(V.id,V.isActive),children:V.isActive?"Deactivate":"Activate"}),o.jsx(X,{variant:"destructive",size:"sm",onClick:()=>G(V.id),children:o.jsx(hU,{className:"w-4 h-4"})})]})]})},V.id)}),a.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.length===0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{children:"No challenges created yet."}),o.jsxs(X,{onClick:e,children:[o.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Create Your First Challenge"]})]}):"No challenges match your filters."})]})})]})]})},oz=({challengeId:t,onBack:e,onSave:n})=>{const{user:r}=Hn(),[s,i]=g.useState(!0),[a,l]=g.useState(!1),[c,d]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,isActive:!0,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[h,f]=g.useState([]),[m,x]=g.useState(!1);g.useEffect(()=>{C()},[t]);const C=async()=>{var N,R,I,k,$,J,G;try{const oe=await ia(ze(ve,"challenges",t));if(oe.exists()){const O=oe.data();d({title:O.title||"",description:O.description||"",category:O.category||"web",customCategory:O.finalCategory||"",difficulty:O.difficulty||"easy",points:O.points||100,flag:O.flag||"",flagFormat:O.flagFormat||"CTF{.*}",hasMultipleQuestions:O.hasMultipleQuestions||!1,isExternalChallenge:!!O.attribution,isActive:O.isActive!==!1,hints:O.hints||[""],files:O.files||[],creator:((N=O.originalCreator)==null?void 0:N.name)||"",creatorUrl:((R=O.originalCreator)==null?void 0:R.url)||"",featuredOnPractice:O.featuredOnPractice||!1,availableInPractice:O.availableInPractice!==!1,challengeType:O.challengeType||"practice",externalSource:{ctfName:((I=O.attribution)==null?void 0:I.ctfName)||"",ctfUrl:((k=O.attribution)==null?void 0:k.ctfUrl)||"",originalAuthor:(($=O.attribution)==null?void 0:$.originalAuthor)||"",authorUrl:((J=O.attribution)==null?void 0:J.authorUrl)||"",license:((G=O.attribution)==null?void 0:G.license)||"unknown"}}),O.hasMultipleQuestions&&O.questions&&f(O.questions),O.finalCategory&&(x(!0),d(q=>({...q,category:"custom"})))}}catch(oe){console.error("Error loading challenge:",oe)}finally{i(!1)}},_=async N=>{N.preventDefault(),l(!0);try{const R={...c,finalCategory:m?c.customCategory:c.category,questions:c.hasMultipleQuestions?h:[],hints:c.hints.filter(I=>I.trim()!==""),totalPoints:c.hasMultipleQuestions?h.reduce((I,k)=>I+k.points,0):c.points,updatedAt:new Date,updatedBy:r==null?void 0:r.uid,updatedByName:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),featuredOnPractice:c.featuredOnPractice,availableInPractice:c.availableInPractice,challengeType:c.challengeType,...c.isExternalChallenge&&{attribution:{...c.externalSource,importedBy:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),importedById:r==null?void 0:r.uid,importedAt:new Date}},...c.creator&&{originalCreator:{name:c.creator,url:c.creatorUrl}}};await dn(ze(ve,"challenges",t),R),alert("Challenge updated successfully!"),n()}catch(R){console.error("Error updating challenge:",R),alert("Error updating challenge. Please try again.")}finally{l(!1)}},T=()=>{d({...c,hints:[...c.hints,""]})},E=(N,R)=>{const I=[...c.hints];I[N]=R,d({...c,hints:I})},w=N=>{const R=c.hints.filter((I,k)=>k!==N);d({...c,hints:R})},S=()=>{const N={id:Date.now().toString(),question:"",points:0,flag:""};f([...h,N])},D=(N,R,I)=>{f(h.map(k=>k.id===N?{...k,[R]:I}:k))},L=N=>{h.length>1&&f(h.filter(R=>R.id!==N))},j=N=>{if(N==="link"){const R=prompt("Enter the URL:");if(R){const I={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:R,type:"link"};d({...c,files:[...c.files,I]})}}else{const R=document.createElement("input");R.type="file",R.onchange=I=>{var $;const k=($=I.target.files)==null?void 0:$[0];if(k){const J={id:Date.now().toString(),name:k.name,url:URL.createObjectURL(k),type:"file"};d({...c,files:[...c.files,J]})}},R.click()}},b=N=>{d({...c,files:c.files.filter(R=>R.id!==N)})},y=N=>{N==="custom"?(x(!0),d({...c,category:"custom"})):(x(!1),d({...c,category:N}))},A=(N,R)=>{d({...c,externalSource:{...c.externalSource,[N]:R}})};return s?o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenge..."})})}):o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Edit Challenge"}),o.jsx(Ht,{children:"Update challenge details and configuration"})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(K,{className:"text-base",children:"Challenge Status"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active challenges are visible to users"})]}),o.jsx(Rt,{checked:c.isActive,onCheckedChange:N=>d({...c,isActive:N})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xe,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:c.availableInPractice,onCheckedChange:N=>d({...c,availableInPractice:N})}),o.jsx(K,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:c.featuredOnPractice,onCheckedChange:N=>d({...c,featuredOnPractice:N})}),o.jsxs(K,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(_v,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:c.challengeType,onValueChange:N=>d({...c,challengeType:N}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"practice",children:"Practice Challenge"}),o.jsx(se,{value:"live",children:"Live Event Challenge"}),o.jsx(se,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(me,{id:"title",value:c.title,onChange:N=>d({...c,title:N.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:c.category,onValueChange:y,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"web",children:"Web"}),o.jsx(se,{value:"crypto",children:"Cryptography"}),o.jsx(se,{value:"forensics",children:"Forensics"}),o.jsx(se,{value:"pwn",children:"Pwn"}),o.jsx(se,{value:"reversing",children:"Reverse Engineering"}),o.jsx(se,{value:"misc",children:"Miscellaneous"}),o.jsx(se,{value:"custom",children:"Custom Category"})]})]})]}),m&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(me,{id:"customCategory",value:c.customCategory,onChange:N=>d({...c,customCategory:N.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:c.difficulty,onValueChange:N=>d({...c,difficulty:N}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(se,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(se,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(K,{htmlFor:"points",children:"Points *"}),o.jsx(me,{id:"points",type:"number",value:c.points,onChange:N=>d({...c,points:parseInt(N.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(K,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:c.description,onChange:N=>d({...c,description:N.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cn,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(me,{id:"creator",value:c.creator,onChange:N=>d({...c,creator:N.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(me,{id:"creatorUrl",value:c.creatorUrl,onChange:N=>d({...c,creatorUrl:N.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hd,{className:"w-5 h-5"}),o.jsx(K,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:c.isExternalChallenge,onCheckedChange:N=>d({...c,isExternalChallenge:N})})]}),c.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(me,{id:"ctfName",value:c.externalSource.ctfName,onChange:N=>A("ctfName",N.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(me,{id:"ctfUrl",value:c.externalSource.ctfUrl,onChange:N=>A("ctfUrl",N.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(me,{id:"originalAuthor",value:c.externalSource.originalAuthor,onChange:N=>A("originalAuthor",N.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(me,{id:"authorUrl",value:c.externalSource.authorUrl,onChange:N=>A("authorUrl",N.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:c.externalSource.license,onValueChange:N=>A("license",N),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(se,{value:"unknown",children:"Unknown"}),o.jsx(se,{value:"MIT",children:"MIT License"}),o.jsx(se,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(se,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(se,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(se,{value:"custom",children:"Custom License"})]})]}),c.externalSource.license==="custom"&&o.jsx(me,{placeholder:"Specify custom license",className:"mt-2",onChange:N=>A("license",N.target.value)})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:c.hasMultipleQuestions,onCheckedChange:N=>d({...c,hasMultipleQuestions:N})})]}),c.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(K,{className:"text-base",children:"Challenge Questions"}),o.jsxs(X,{type:"button",onClick:S,variant:"outline",size:"sm",children:[o.jsx(Zs,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),h.map((N,R)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(K,{children:["Question ",R+1]}),h.length>1&&o.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(N.id),children:o.jsx(Qi,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`question-${N.id}`,children:"Question Text *"}),o.jsx(me,{id:`question-${N.id}`,value:N.question,onChange:I=>D(N.id,"question",I.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:`points-${N.id}`,children:"Points *"}),o.jsx(me,{id:`points-${N.id}`,type:"number",value:N.points,onChange:I=>D(N.id,"points",parseInt(I.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:`flag-${N.id}`,children:"Flag *"}),o.jsx(me,{id:`flag-${N.id}`,value:N.flag,onChange:I=>D(N.id,"flag",I.target.value),placeholder:"Flag for this question",required:!0})]})]})]},N.id)),h.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",h.reduce((N,R)=>N+R.points,0)]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flag",children:"Flag *"}),o.jsx(me,{id:"flag",value:c.flag,onChange:N=>d({...c,flag:N.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:c.flagFormat,onValueChange:N=>d({...c,flagFormat:N}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(se,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(se,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(se,{value:".*",children:"Any format"}),o.jsx(se,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(se,{value:"custom",children:"Custom Regex"})]})]}),c.flagFormat==="custom"&&o.jsx(me,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:N=>d({...c,flagFormat:N.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(K,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(X,{type:"button",variant:"outline",onClick:()=>j("file"),children:[o.jsx(DC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(X,{type:"button",variant:"outline",onClick:()=>j("link"),children:[o.jsx(la,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),c.files.length>0&&o.jsx("div",{className:"space-y-2",children:c.files.map(N=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[N.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(la,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:N.name}),N.type==="link"&&o.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(X,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(N.id),children:o.jsx(Qi,{className:"w-4 h-4"})})]},N.id))})]}),o.jsxs("div",{children:[o.jsx(K,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[c.hints.map((N,R)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(me,{value:N,onChange:I=>E(R,I.target.value),placeholder:`Hint ${R+1}`}),c.hints.length>1&&o.jsx(X,{type:"button",variant:"outline",onClick:()=>w(R),children:"Remove"})]},R)),o.jsx(X,{type:"button",variant:"outline",onClick:T,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(X,{type:"submit",disabled:a,children:[o.jsx(RC,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]}),o.jsx(X,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})},az=({onBack:t})=>{const[e,n]=g.useState({name:"",description:"",startDate:"",endDate:"",type:"ctf",maxParticipants:100,isPublic:!0}),r=async s=>{s.preventDefault(),console.log("Scheduling event:",e),alert("Event scheduling functionality coming soon!")};return o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Schedule New Event"}),o.jsx(Ht,{children:"Create and schedule CTF events and competitions"})]}),o.jsx(le,{children:o.jsxs("form",{onSubmit:r,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"name",children:"Event Name *"}),o.jsx(me,{id:"name",value:e.name,onChange:s=>n({...e,name:s.target.value}),placeholder:"Enter event name",required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"description",children:"Event Description"}),o.jsx(Sa,{id:"description",value:e.description,onChange:s=>n({...e,description:s.target.value}),placeholder:"Describe the event, rules, and objectives...",rows:4})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"startDate",children:"Start Date & Time *"}),o.jsx(me,{id:"startDate",type:"datetime-local",value:e.startDate,onChange:s=>n({...e,startDate:s.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"endDate",children:"End Date & Time *"}),o.jsx(me,{id:"endDate",type:"datetime-local",value:e.endDate,onChange:s=>n({...e,endDate:s.target.value}),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"type",children:"Event Type"}),o.jsxs("select",{id:"type",value:e.type,onChange:s=>n({...e,type:s.target.value}),className:"w-full p-2 border rounded",children:[o.jsx("option",{value:"ctf",children:"CTF Competition"}),o.jsx("option",{value:"workshop",children:"Workshop"}),o.jsx("option",{value:"training",children:"Training Session"}),o.jsx("option",{value:"jeopardy",children:"Jeopardy Style"})]})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"maxParticipants",children:"Max Participants"}),o.jsx(me,{id:"maxParticipants",type:"number",value:e.maxParticipants,onChange:s=>n({...e,maxParticipants:parseInt(s.target.value)}),min:"1"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"isPublic",checked:e.isPublic,onChange:s=>n({...e,isPublic:s.target.checked}),className:"rounded"}),o.jsx(K,{htmlFor:"isPublic",children:"Public Event (Visible to all users)"})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(X,{type:"submit",children:"Schedule Event"}),o.jsx(X,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},lz=({onBack:t})=>{const e=[{id:"1",user:"john_doe",challenge:"SQL Injection Master",submittedAt:"2024-01-15",status:"pending",content:"This is a mock write-up content...",rating:0},{id:"2",user:"jane_smith",challenge:"Crypto Challenge 1",submittedAt:"2024-01-14",status:"approved",content:"Another mock write-up...",rating:4}],n=i=>{console.log("Approving writeup:",i),alert(`Write-up ${i} approved!`)},r=i=>{console.log("Rejecting writeup:",i),alert(`Write-up ${i} rejected!`)},s=i=>{switch(i){case"pending":return o.jsx(Oe,{variant:"secondary",children:"Pending"});case"approved":return o.jsx(Oe,{variant:"default",children:"Approved"});case"rejected":return o.jsx(Oe,{variant:"destructive",children:"Rejected"});default:return o.jsx(Oe,{variant:"secondary",children:i})}};return o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Review Write-ups"}),o.jsxs(Ht,{children:["Review and approve user write-ups for challenges (",e.length," total)"]})]}),o.jsx(le,{children:o.jsxs("div",{className:"space-y-6",children:[e.map(i=>o.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:i.challenge}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by ",i.user," on ",i.submittedAt]})]}),s(i.status)]}),o.jsxs("div",{children:[o.jsx(K,{children:"Write-up Content"}),o.jsx("div",{className:"mt-1 p-3 border rounded bg-muted/50",children:i.content})]}),i.status==="pending"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(K,{htmlFor:`feedback-${i.id}`,children:"Feedback (Optional)"}),o.jsx(Sa,{id:`feedback-${i.id}`,placeholder:"Provide feedback for the user...",rows:3}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(X,{onClick:()=>n(i.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),o.jsx(X,{variant:"outline",onClick:()=>r(i.id),children:"Request Changes"}),o.jsx(X,{variant:"destructive",onClick:()=>r(i.id),children:"Reject"})]})]}),i.status!=="pending"&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Write-up has been ",i.status,". ",i.rating>0&&`Rating: ${i.rating}/5`]})]},i.id)),e.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No write-ups to review at this time."})]})})]})},cz=({onBack:t})=>{const e={totalUsers:150,activeUsers:47,totalChallenges:25,solvedChallenges:189,averageSolveTime:"2h 15m",popularCategory:"Web Security"},n=[{title:"Total Users",value:e.totalUsers,description:"Registered users",icon:nn,color:"text-blue-600"},{title:"Active Users (30d)",value:e.activeUsers,description:"Recently active users",icon:nn,color:"text-green-600"},{title:"Total Challenges",value:e.totalChallenges,description:"Available challenges",icon:Xe,color:"text-purple-600"},{title:"Challenge Solves",value:e.solvedChallenges,description:"Total solutions submitted",icon:Xn,color:"text-orange-600"},{title:"Avg Solve Time",value:e.averageSolveTime,description:"Average time to solve challenges",icon:Ic,color:"text-red-600"},{title:"Popular Category",value:e.popularCategory,description:"Most solved category",icon:IC,color:"text-indigo-600"}];return o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Platform Analytics"}),o.jsx(Ht,{children:"Comprehensive overview of platform performance and user engagement"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:n.map((r,s)=>o.jsx(ae,{children:o.jsx(le,{className:"pt-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r.title}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),o.jsx("div",{className:`p-3 rounded-full bg-muted ${r.color}`,children:o.jsx(r.icon,{className:"w-6 h-6"})})]})})},s))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{className:"text-lg",children:"User Growth"}),o.jsx(Ht,{children:"Last 30 days"})]}),o.jsx(le,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"User growth chart will be displayed here"})})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{className:"text-lg",children:"Challenge Performance"}),o.jsx(Ht,{children:"Solve rates by category"})]}),o.jsx(le,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Challenge performance chart will be displayed here"})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(X,{variant:"outline",onClick:t,children:"Back to Dashboard"}),o.jsx(X,{children:"Export Analytics"})]})]})]})},uz=({onBack:t})=>{const[e,n]=g.useState({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1}),[r,s]=g.useState(!1),i=async()=>{s(!0),setTimeout(()=>{alert("Settings saved successfully!"),s(!1)},1e3)},a=()=>{confirm("Are you sure you want to reset all settings to default?")&&n({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1})},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"General Settings"}),o.jsx(Ht,{children:"Basic platform configuration"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"siteName",children:"Site Name"}),o.jsx(me,{id:"siteName",value:e.siteName,onChange:c=>l("siteName",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"siteDescription",children:"Site Description"}),o.jsx(Sa,{id:"siteDescription",value:e.siteDescription,onChange:c=>l("siteDescription",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"contactEmail",children:"Contact Email"}),o.jsx(me,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:c=>l("contactEmail",c.target.value)})]})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Security Settings"}),o.jsx(Ht,{children:"Authentication and security configuration"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"requireEmailVerification",children:"Require Email Verification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must verify their email address before accessing the platform"})]}),o.jsx(Rt,{id:"requireEmailVerification",checked:e.requireEmailVerification,onCheckedChange:c=>l("requireEmailVerification",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"allowRegistrations",children:"Allow New Registrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register on the platform"})]}),o.jsx(Rt,{id:"allowRegistrations",checked:e.allowRegistrations,onCheckedChange:c=>l("allowRegistrations",c)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),o.jsx(me,{id:"maxLoginAttempts",type:"number",value:e.maxLoginAttempts,onChange:c=>l("maxLoginAttempts",parseInt(c.target.value)),min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(K,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),o.jsx(me,{id:"sessionTimeout",type:"number",value:e.sessionTimeout,onChange:c=>l("sessionTimeout",parseInt(c.target.value)),min:"1",max:"720"})]})]})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Challenge Settings"}),o.jsx(Ht,{children:"Challenge and write-up configuration"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"defaultPoints",children:"Default Points for New Challenges"}),o.jsx(me,{id:"defaultPoints",type:"number",value:e.defaultPoints,onChange:c=>l("defaultPoints",parseInt(c.target.value)),min:"1"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"allowWriteups",children:"Allow Write-ups"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users can submit write-ups for challenges"})]}),o.jsx(Rt,{id:"allowWriteups",checked:e.allowWriteups,onCheckedChange:c=>l("allowWriteups",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"writeupRequired",children:"Write-ups Required"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must submit a write-up to get points"})]}),o.jsx(Rt,{id:"writeupRequired",checked:e.writeupRequired,onCheckedChange:c=>l("writeupRequired",c),disabled:!e.allowWriteups})]})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Maintenance Mode"}),o.jsx(Ht,{children:"Take the platform offline for maintenance"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(K,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform will be unavailable to regular users"})]}),o.jsx(Rt,{id:"maintenanceMode",checked:e.maintenanceMode,onCheckedChange:c=>l("maintenanceMode",c)})]}),e.maintenanceMode&&o.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-yellow-800",children:" Maintenance mode is enabled. Only administrators can access the platform."})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(X,{onClick:i,disabled:r,children:r?"Saving...":"Save Settings"}),o.jsx(X,{variant:"outline",onClick:a,children:"Reset to Defaults"}),o.jsx(X,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]})},dz=()=>{const{isAdmin:t,isModerator:e}=Gh(),n=$n(),[r,s]=g.useState("overview"),[i,a]=g.useState(null);if(!t&&!e)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen",children:o.jsx("div",{className:"container px-4 mx-auto text-center",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(Xe,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have permission to access the admin dashboard."}),o.jsx(X,{onClick:()=>n("/dashboard"),children:"Return to Dashboard"})]})})}),o.jsx(ht,{})]});const l=()=>{switch(r){case"users":return o.jsx(F9,{onBack:()=>s("overview")});case"challenge-management":return o.jsx(iz,{onBack:()=>s("overview"),onCreateNew:()=>s("create-challenge"),onEditChallenge:d=>{a(d),s("edit-challenge")}});case"create-challenge":return o.jsx(sz,{onBack:()=>s("challenge-management")});case"edit-challenge":return o.jsx(oz,{challengeId:i.id,onBack:()=>s("challenge-management"),onSave:()=>s("challenge-management")});case"schedule-event":return o.jsx(az,{onBack:()=>s("overview")});case"review-writeups":return o.jsx(lz,{onBack:()=>s("overview")});case"analytics":return o.jsx(cz,{onBack:()=>s("overview")});case"settings":return o.jsx(uz,{onBack:()=>s("overview")});default:return c()}},c=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(ae,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(nn,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Active Challenges"}),o.jsx(Xe,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No challenges yet"})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Live Events"}),o.jsx(oa,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No events yet"})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(De,{className:"text-sm font-medium",children:"Pending Write-ups"}),o.jsx(oc,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(le,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No write-ups yet"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"Content Management"}),o.jsx(Ht,{children:"Create and manage platform content"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs(X,{className:"w-full justify-start gap-2",onClick:()=>s("create-challenge"),children:[o.jsx(Zs,{className:"w-4 h-4"}),"Create New Challenge"]}),o.jsxs(X,{className:"w-full justify-start gap-2",onClick:()=>s("challenge-management"),children:[o.jsx(Jp,{className:"w-4 h-4"}),"Manage Challenges"]}),o.jsxs(X,{className:"w-full justify-start gap-2",onClick:()=>s("schedule-event"),children:[o.jsx(Zs,{className:"w-4 h-4"}),"Schedule New Event"]}),o.jsxs(X,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("review-writeups"),children:[o.jsx(oc,{className:"w-4 h-4"}),"Review Write-ups"]})]})]}),o.jsxs(ae,{children:[o.jsxs(Pe,{children:[o.jsx(De,{children:"User Management"}),o.jsx(Ht,{children:"Manage users and permissions"})]}),o.jsxs(le,{className:"space-y-4",children:[o.jsxs(X,{className:"w-full justify-start gap-2",onClick:()=>s("users"),children:[o.jsx(nn,{className:"w-4 h-4"}),"View All Users"]}),t&&o.jsxs(X,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("analytics"),children:[o.jsx(IC,{className:"w-4 h-4"}),"Platform Analytics"]}),o.jsxs(X,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("settings"),children:[o.jsx(PC,{className:"w-4 h-4"}),"System Settings"]})]})]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:r==="overview"?"Admin Dashboard":r==="users"?"User Management":r==="challenge-management"?"Challenge Management":r==="create-challenge"?"Create Challenge":r==="edit-challenge"?"Edit Challenge":r==="schedule-event"?"Schedule Event":r==="review-writeups"?"Review Write-ups":r==="analytics"?"Platform Analytics":r==="settings"?"System Settings":"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:r==="overview"?"Manage your CTF platform, users, challenges, and events":"Admin management panel"})]}),r!=="overview"&&o.jsx(X,{variant:"outline",onClick:()=>{s(r==="create-challenge"||r==="edit-challenge"?"challenge-management":"overview")},children:r==="create-challenge"||r==="edit-challenge"?"Back to Challenges":"Back to Dashboard"})]}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${t?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t?"Administrator":"Moderator"})})]}),l()]})}),o.jsx(ht,{})]})},hz=()=>{var J,G,oe,O,q,ie,V,H,fe,ye;const{challengeId:t}=ER(),e=$n(),{user:n}=Hn(),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(!1),[d,h]=g.useState(""),[f,m]=g.useState(null),[x,C]=g.useState([]),[_,T]=g.useState([]),[E,w]=g.useState("description");g.useEffect(()=>{if(t){S(),D();const Y=ze(ve,"challenges",t),ee=YS(Y,W=>{if(W.exists()){const ue={id:W.id,...W.data()};s(ue)}});return()=>ee()}},[t]);const S=async()=>{try{a(!0),console.log(" Fetching challenge:",t);const Y=await ia(ze(ve,"challenges",t));if(Y.exists()){const ee={id:Y.id,...Y.data()};console.log(" Challenge found:",ee),s(ee),ee.hints&&C(new Array(ee.hints.length).fill(!1))}else console.log(" Challenge not found in Firestore"),m({type:"error",text:"Challenge not found"})}catch(Y){console.error(" Error fetching challenge:",Y),m({type:"error",text:"Failed to load challenge"})}finally{a(!1)}},D=async()=>{if(!(!n||!t))try{const Y=Xr(kt(ve,"submissions"),wn("challengeId","==",t),wn("userId","==",n.uid),Gi("submittedAt","desc")),W=(await sr(Y)).docs.map(ue=>({id:ue.id,...ue.data()}));T(W)}catch(Y){console.error("Error fetching submissions:",Y)}},L=async(Y,ee)=>{try{const W=Xr(kt(ve,"submissions"),wn("challengeId","==",ee),wn("userId","==",Y),wn("isCorrect","==",!0),wn("pointsAwarded",">",0));return!(await sr(W)).empty}catch(W){return console.error("Error checking user solve status:",W),!1}},j=async()=>{var Y,ee;if(!(!r||!n||!d.trim())){c(!0),m(null);try{let W=!1;r.hasMultipleQuestions&&r.questions?W=!!r.questions.find(Ce=>Ce.flag&&Ce.flag.trim()===d.trim()):W=((Y=r.flag)==null?void 0:Y.trim())===d.trim();const ue=await L(n.uid,r.id);let ke=0;W&&!ue&&(ke=r.points||0);const Se={challengeId:r.id,challengeTitle:r.title,userId:n.uid,userName:n.displayName||n.email,flag:d,isCorrect:W,submittedAt:new Date,pointsAwarded:ke};await QS(kt(ve,"submissions"),Se),W?((ee=r.solvedBy)!=null&&ee.includes(n.uid)||await dn(ze(ve,"challenges",r.id),{solvedBy:Kp(n.uid)}),ke>0&&await dn(ze(ve,"users",n.uid),{totalPoints:L6(ke),challengesSolved:Kp(r.id)}),m({type:"success",text:ke>0?`Congratulations! Flag is correct! +${ke} points awarded!`:"Congratulations! Flag is correct! (No additional points - already solved)"}),h(""),D()):m({type:"error",text:"Incorrect flag. Please try again."})}catch(W){console.error("Error submitting flag:",W),m({type:"error",text:"Failed to submit flag. Please try again."})}finally{c(!1)}}},b=Y=>{const ee=[...x];ee[Y]=!ee[Y],C(ee)},y=()=>{e("/practice")},A=Y=>{navigator.clipboard.writeText(Y)},N=(J=r==null?void 0:r.solvedBy)==null?void 0:J.includes((n==null?void 0:n.uid)||"");if(i)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading challenge..."})]})})}),o.jsx(ht,{})]});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx(ae,{className:"max-w-md mx-auto border",children:o.jsxs(le,{className:"p-6 text-center",children:[o.jsx(Xe,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("h2",{className:"text-lg font-bold mb-2",children:"Challenge Not Found"}),o.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"The challenge you're looking for doesn't exist or you don't have permission to view it."}),o.jsxs(X,{onClick:y,variant:"terminal",size:"sm",children:[o.jsx(q_,{className:"w-3 h-3 mr-1"}),"Back to Practice"]})]})})})}),o.jsx(ht,{})]});const R=Y=>{switch(Y){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},I=Y=>({web:"bg-blue-500/20 text-blue-600 border-blue-200",crypto:"bg-purple-500/20 text-purple-600 border-purple-200",forensics:"bg-orange-500/20 text-orange-600 border-orange-200",pwn:"bg-red-500/20 text-red-600 border-red-200",reversing:"bg-indigo-500/20 text-indigo-600 border-indigo-200",misc:"bg-gray-500/20 text-gray-600 border-gray-200"})[Y]||"bg-gray-500/20 text-gray-600 border-gray-200",k=()=>{if(!r.description)return null;const Y=r.description.split(`
`),ee=[];for(let W=0;W<Y.length;W++){const ue=Y[W].trim();if(ue.startsWith("n =")||ue.startsWith("e =")||ue.startsWith("c =")){const[ke,...Se]=ue.split("="),be=Se.join("=").trim();ee.push(o.jsxs("div",{className:"mb-3 p-3 bg-muted/30 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"font-mono font-semibold text-xs",children:[ke,"="]}),o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>A(be),className:"h-6 px-2",children:o.jsx(K_,{className:"w-3 h-3"})})]}),o.jsx("div",{className:"font-mono text-xs bg-background p-2 rounded border break-all",children:be})]},W))}else if(ue.includes("=")&&ue.length>50){const[ke,...Se]=ue.split("="),be=Se.join("=").trim();ee.push(o.jsxs("div",{className:"mb-2",children:[o.jsxs("strong",{className:"text-sm",children:[ke,"="]}),o.jsx("div",{className:"font-mono text-xs bg-muted/30 p-2 rounded border break-all mt-1",children:be})]},W))}else ue?ee.push(o.jsx("p",{className:"mb-2 text-sm leading-relaxed",children:ue},W)):ee.push(o.jsx("div",{className:"mb-2"},W))}return ee},$=_.some(Y=>Y.isCorrect&&Y.pointsAwarded&&Y.pointsAwarded>0);return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(X,{variant:"ghost",onClick:y,size:"sm",className:"h-8 px-2 sm:px-3 -ml-2",children:[o.jsx(q_,{className:"w-3 h-3 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Practice"}),o.jsx("span",{className:"sm:hidden",children:"Back"})]}),o.jsx("h1",{className:"text-lg sm:text-xl font-bold truncate",children:r.title})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[N&&o.jsxs(Oe,{className:"bg-green-500/20 text-green-600 border-green-200 text-xs",children:[o.jsx(Fr,{className:"w-3 h-3 mr-1"}),$?"Solved + Points":"Solved"]}),r.featuredOnPractice&&o.jsxs(Oe,{className:"bg-yellow-500/20 text-yellow-600 border-yellow-200 text-xs",children:[o.jsx(_v,{className:"w-3 h-3 mr-1"}),"Featured"]})]})]}),o.jsx(ae,{className:"mb-4 border",children:o.jsxs(le,{className:"p-3 sm:p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[o.jsx(Oe,{className:`${R(r.difficulty)} text-xs`,children:r.difficulty}),o.jsx(Oe,{className:`${I(r.finalCategory||r.category)} text-xs`,children:r.finalCategory||r.category}),o.jsxs(Oe,{variant:"outline",className:"font-mono font-semibold text-xs",children:[r.totalPoints||r.points," pts"]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(nn,{className:"w-3 h-3"}),o.jsxs("span",{children:[((G=r.solvedBy)==null?void 0:G.length)||0," solves"]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Ic,{className:"w-3 h-3"}),o.jsx("span",{className:"hidden sm:inline",children:((q=(O=(oe=r.createdAt)==null?void 0:oe.toDate)==null?void 0:O.call(oe))==null?void 0:q.toLocaleDateString())||new Date(r.createdAt).toLocaleDateString()}),o.jsx("span",{className:"sm:hidden",children:((H=(V=(ie=r.createdAt)==null?void 0:ie.toDate)==null?void 0:V.call(ie))==null?void 0:H.toLocaleDateString("en-US",{month:"short",day:"numeric"}))||new Date(r.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-2 text-xs text-muted-foreground",children:[o.jsxs("div",{children:["By: ",r.createdByName||"Unknown"]}),r.originalCreator&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{children:"Original: "}),r.originalCreator.url?o.jsxs("a",{href:r.originalCreator.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:[r.originalCreator.name,o.jsx(Hd,{className:"w-3 h-3"})]}):o.jsx("span",{children:r.originalCreator.name})]})]})]})}),o.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide mb-4 bg-muted/30 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>w("description"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${E==="description"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Description"}),o.jsxs("button",{onClick:()=>w("hints"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${E==="hints"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Hints (",((fe=r.hints)==null?void 0:fe.length)||0,")"]}),o.jsxs("button",{onClick:()=>w("files"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${E==="files"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Files (",((ye=r.files)==null?void 0:ye.length)||0,")"]})]}),o.jsxs("div",{className:"space-y-4",children:[E==="description"&&o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-4 sm:p-6",children:o.jsx("div",{className:"space-y-3",children:r.hasMultipleQuestions&&r.questions?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),r.questions.map((Y,ee)=>{var W;return o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("h4",{className:"font-semibold text-sm mb-1",children:["Question ",ee+1]}),o.jsx("p",{className:"mb-2 text-xs text-muted-foreground",children:Y.question}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"font-mono font-semibold",children:[Y.points," points"]}),((W=r.solvedBy)==null?void 0:W.includes((n==null?void 0:n.uid)||""))&&o.jsxs(Oe,{variant:"outline",className:"font-mono text-xs",children:["Flag: ",Y.flag]})]})]},Y.id)})]}):o.jsxs("div",{className:"space-y-3",children:[k(),r.flagFormat&&o.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-200 rounded text-xs",children:o.jsxs("p",{className:"text-blue-600",children:[o.jsx("strong",{children:"Flag Format:"})," ",r.flagFormat]})}),N&&r.flag&&o.jsx("div",{className:"p-3 bg-green-500/10 border border-green-200 rounded",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("p",{className:"text-xs text-green-600 font-mono break-all flex-1",children:[o.jsx("strong",{children:"Flag:"})," ",r.flag]}),o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>A(r.flag),className:"h-6 px-2 flex-shrink-0",children:o.jsx(K_,{className:"w-3 h-3"})})]})})]})})})}),E==="hints"&&o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-4 sm:p-6",children:r.hints&&r.hints.length>0?o.jsx("div",{className:"space-y-3",children:r.hints.map((Y,ee)=>o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(iU,{className:"w-3 h-3 text-primary"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold text-sm",children:["Hint ",ee+1]}),o.jsx(X,{variant:"ghost",size:"sm",onClick:()=>b(ee),className:"h-6 px-2 text-xs",children:x[ee]?"Hide":"Reveal"})]}),x[ee]&&o.jsx("p",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded border",children:Y})]})]})})},ee))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No hints available."})})})}),E==="files"&&o.jsx(ae,{className:"border",children:o.jsx(le,{className:"p-4 sm:p-6",children:r.files&&r.files.length>0?o.jsx("div",{className:"space-y-2",children:r.files.map((Y,ee)=>o.jsxs("a",{href:Y.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 text-sm border rounded hover:bg-accent transition-colors",children:[Y.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(la,{className:"w-4 h-4"}),o.jsx("span",{className:"flex-1 truncate",children:Y.name}),o.jsx(Hd,{className:"w-3 h-3"})]},ee))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files or links available."})})})})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(ae,{className:"border lg:sticky lg:top-4",children:[o.jsx(Pe,{className:"p-4 pb-2",children:o.jsxs(De,{className:"flex items-center gap-2 text-base",children:[o.jsx(AC,{className:"w-4 h-4"}),"Submit Flag"]})}),o.jsxs(le,{className:"p-4 pt-2 space-y-3",children:[f&&o.jsxs(Sv,{className:`text-sm ${f.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200"}`,children:[f.type==="success"?o.jsx(Fr,{className:"w-4 h-4 text-green-600"}):o.jsx(aa,{className:"w-4 h-4 text-red-600"}),o.jsx(Cv,{className:f.type==="success"?"text-green-600":"text-red-600",children:f.text})]}),N?o.jsxs("div",{className:"text-center p-3 bg-green-500/10 border border-green-200 rounded",children:[o.jsx(Fr,{className:"w-8 h-8 text-green-600 mx-auto mb-1"}),o.jsx("p",{className:"text-green-600 font-semibold text-sm",children:"Challenge Solved!"}),o.jsx("p",{className:"text-green-600 text-xs mt-1",children:$?`+${r.totalPoints||r.points} points awarded`:"Already solved - no additional points"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(K,{htmlFor:"flag",className:"text-xs font-medium",children:"Enter Flag"}),o.jsx(me,{id:"flag",placeholder:"CTF{...} or flag content",value:d,onChange:Y=>h(Y.target.value),onKeyPress:Y=>Y.key==="Enter"&&j(),className:"font-mono text-sm h-9"})]}),o.jsx(X,{onClick:j,disabled:l||!d.trim(),className:"w-full h-9",variant:"terminal",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-2"}),"Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Submit Flag"]})})]})]})]}),_.length>0&&o.jsxs(ae,{className:"border",children:[o.jsx(Pe,{className:"p-4 pb-2",children:o.jsx(De,{className:"text-base",children:"Submission History"})}),o.jsx(le,{className:"p-4 pt-2",children:o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:_.map(Y=>{var ee,W,ue;return o.jsxs("div",{className:"flex items-center justify-between p-2 border rounded text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[Y.isCorrect?o.jsx(Fr,{className:"w-3 h-3 text-green-600 flex-shrink-0"}):o.jsx(aa,{className:"w-3 h-3 text-red-600 flex-shrink-0"}),o.jsx("code",{className:"truncate font-mono text-xs",children:Y.flag}),Y.pointsAwarded&&Y.pointsAwarded>0&&o.jsxs(Oe,{variant:"outline",className:"ml-1 text-xs bg-green-500/10 text-green-600",children:["+",Y.pointsAwarded]})]}),o.jsx("span",{className:"text-muted-foreground flex-shrink-0 ml-1 text-xs",children:((ue=(W=(ee=Y.submittedAt)==null?void 0:ee.toDate)==null?void 0:W.call(ee))==null?void 0:ue.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||new Date(Y.submittedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Y.id)})})})]})]})]})]})}),o.jsx(ht,{})]})};function fz(){return o.jsx(gC,{children:o.jsx(JF,{children:o.jsx(ZF,{children:o.jsx(qR,{children:o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(dt,{}),o.jsx("main",{className:"flex-1",children:o.jsxs(FR,{children:[o.jsx(on,{path:"/",element:o.jsx(xU,{})}),o.jsx(on,{path:"/login",element:o.jsx(wU,{})}),o.jsx(on,{path:"/signup",element:o.jsx(_U,{})}),o.jsx(on,{path:"/auth/github/callback",element:o.jsx(NU,{})}),o.jsx(on,{path:"/dashboard",element:o.jsx(fs,{children:o.jsx(wi,{children:o.jsx(IU,{})})})}),o.jsx(on,{path:"/practice",element:o.jsx(fs,{children:o.jsx(wi,{children:o.jsx(AU,{})})})}),o.jsx(on,{path:"/live",element:o.jsx(fs,{children:o.jsx(wi,{children:o.jsx(kU,{})})})}),o.jsx(on,{path:"/leaderboard",element:o.jsx(fs,{children:o.jsx(wi,{children:o.jsx(XU,{})})})}),o.jsx(on,{path:"/writeups",element:o.jsx(fs,{children:o.jsx(wi,{children:o.jsx(bU,{})})})}),o.jsx(on,{path:"/writeups/create",element:o.jsx(fs,{children:o.jsx(wi,{children:o.jsx(EU,{})})})}),o.jsx(on,{path:"/challenge/:challengeId",element:o.jsx(fs,{children:o.jsx(wi,{children:o.jsx(hz,{})})})}),o.jsx(on,{path:"/admin",element:o.jsx(fs,{children:o.jsx(e5,{children:o.jsx(dz,{})})})}),o.jsx(on,{path:"*",element:o.jsx(TU,{})})]})}),o.jsx(ht,{})," "]})})})})})}zE(document.getElementById("root")).render(o.jsx(gC,{children:o.jsx(fz,{})}));
