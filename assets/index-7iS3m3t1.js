function wA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ab(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kb={exports:{}},Jd={},Rb={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),_A=Symbol.for("react.portal"),bA=Symbol.for("react.fragment"),EA=Symbol.for("react.strict_mode"),NA=Symbol.for("react.profiler"),TA=Symbol.for("react.provider"),SA=Symbol.for("react.context"),CA=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),jA=Symbol.for("react.memo"),AA=Symbol.for("react.lazy"),Dx=Symbol.iterator;function kA(t){return t===null||typeof t!="object"?null:(t=Dx&&t[Dx]||t["@@iterator"],typeof t=="function"?t:null)}var Pb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Db=Object.assign,Lb={};function da(t,e,n){this.props=t,this.context=e,this.refs=Lb,this.updater=n||Pb}da.prototype.isReactComponent={};da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ob(){}Ob.prototype=da.prototype;function fg(t,e,n){this.props=t,this.context=e,this.refs=Lb,this.updater=n||Pb}var pg=fg.prototype=new Ob;pg.constructor=fg;Db(pg,da.prototype);pg.isPureReactComponent=!0;var Lx=Array.isArray,Mb=Object.prototype.hasOwnProperty,mg={current:null},Vb={key:!0,ref:!0,__self:!0,__source:!0};function Fb(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Mb.call(e,r)&&!Vb.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:dc,type:t,key:i,ref:a,props:s,_owner:mg.current}}function RA(t,e){return{$$typeof:dc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gg(t){return typeof t=="object"&&t!==null&&t.$$typeof===dc}function PA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ox=/\/+/g;function Nf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PA(""+t.key):e.toString(36)}function Nu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case dc:case _A:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Nf(a,0):r,Lx(s)?(n="",t!=null&&(n=t.replace(Ox,"$&/")+"/"),Nu(s,e,n,"",function(d){return d})):s!=null&&(gg(s)&&(s=RA(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ox,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Lx(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Nf(i,l);a+=Nu(i,e,n,c,s)}else if(c=kA(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Nf(i,l++),a+=Nu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Wc(t,e,n){if(t==null)return t;var r=[],s=0;return Nu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},Tu={transition:null},LA={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Tu,ReactCurrentOwner:mg};function Ub(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Wc,forEach:function(t,e,n){Wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wc(t,function(){e++}),e},toArray:function(t){return Wc(t,function(e){return e})||[]},only:function(t){if(!gg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=da;_e.Fragment=bA;_e.Profiler=NA;_e.PureComponent=fg;_e.StrictMode=EA;_e.Suspense=IA;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LA;_e.act=Ub;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Db({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=mg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Mb.call(e,c)&&!Vb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:dc,type:t.type,key:s,ref:i,props:r,_owner:a}};_e.createContext=function(t){return t={$$typeof:SA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TA,_context:t},t.Consumer=t};_e.createElement=Fb;_e.createFactory=function(t){var e=Fb.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:CA,render:t}};_e.isValidElement=gg;_e.lazy=function(t){return{$$typeof:AA,_payload:{_status:-1,_result:t},_init:DA}};_e.memo=function(t,e){return{$$typeof:jA,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Tu.transition;Tu.transition={};try{t()}finally{Tu.transition=e}};_e.unstable_act=Ub;_e.useCallback=function(t,e){return rn.current.useCallback(t,e)};_e.useContext=function(t){return rn.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};_e.useEffect=function(t,e){return rn.current.useEffect(t,e)};_e.useId=function(){return rn.current.useId()};_e.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return rn.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};_e.useRef=function(t){return rn.current.useRef(t)};_e.useState=function(t){return rn.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return rn.current.useTransition()};_e.version="18.3.1";Rb.exports=_e;var g=Rb.exports;const gs=Ab(g),Zd=wA({__proto__:null,default:gs},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OA=g,MA=Symbol.for("react.element"),VA=Symbol.for("react.fragment"),FA=Object.prototype.hasOwnProperty,UA=OA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BA={key:!0,ref:!0,__self:!0,__source:!0};function Bb(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)FA.call(e,r)&&!BA.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:MA,type:t,key:i,ref:a,props:s,_owner:UA.current}}Jd.Fragment=VA;Jd.jsx=Bb;Jd.jsxs=Bb;kb.exports=Jd;var o=kb.exports,$b={exports:{}},An={},zb={exports:{}},Hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,q){var se=O.length;O.push(q);e:for(;0<se;){var V=se-1>>>1,z=O[V];if(0<s(z,q))O[V]=q,O[se]=z,se=V;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var q=O[0],se=O.pop();if(se!==q){O[0]=se;e:for(var V=0,z=O.length,fe=z>>>1;V<fe;){var ve=2*(V+1)-1,Q=O[ve],J=ve+1,W=O[J];if(0>s(Q,se))J<z&&0>s(W,Q)?(O[V]=W,O[J]=se,V=J):(O[V]=Q,O[ve]=se,V=ve);else if(J<z&&0>s(W,se))O[V]=W,O[J]=se,V=J;else break e}}return q}function s(O,q){var se=O.sortIndex-q.sortIndex;return se!==0?se:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,p=3,v=!1,I=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(O){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=O)r(d),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(d)}}function R(O){if(_=!1,C(O),!I)if(n(c)!==null)I=!0,ee(L);else{var q=n(d);q!==null&&le(R,q.startTime-O)}}function L(O,q){I=!1,_&&(_=!1,b(y),y=-1),v=!0;var se=p;try{for(C(q),f=n(c);f!==null&&(!(f.expirationTime>q)||O&&!j());){var V=f.callback;if(typeof V=="function"){f.callback=null,p=f.priorityLevel;var z=V(f.expirationTime<=q);q=t.unstable_now(),typeof z=="function"?f.callback=z:f===n(c)&&r(c),C(q)}else r(c);f=n(c)}if(f!==null)var fe=!0;else{var ve=n(d);ve!==null&&le(R,ve.startTime-q),fe=!1}return fe}finally{f=null,p=se,v=!1}}var A=!1,N=null,y=-1,T=5,E=-1;function j(){return!(t.unstable_now()-E<T)}function k(){if(N!==null){var O=t.unstable_now();E=O;var q=!0;try{q=N(!0,O)}finally{q?P():(A=!1,N=null)}}else A=!1}var P;if(typeof w=="function")P=function(){w(k)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ae=H.port2;H.port1.onmessage=k,P=function(){ae.postMessage(null)}}else P=function(){S(k,0)};function ee(O){N=O,A||(A=!0,P())}function le(O,q){y=S(function(){O(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){I||v||(I=!0,ee(L))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var se=p;p=q;try{return O()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var se=p;p=O;try{return q()}finally{p=se}},t.unstable_scheduleCallback=function(O,q,se){var V=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?V+se:V):se=V,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=se+z,O={id:h++,callback:q,priorityLevel:O,startTime:se,expirationTime:z,sortIndex:-1},se>V?(O.sortIndex=se,e(d,O),n(c)===null&&O===n(d)&&(_?(b(y),y=-1):_=!0,le(R,se-V))):(O.sortIndex=z,e(c,O),I||v||(I=!0,ee(L))),O},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(O){var q=p;return function(){var se=p;p=q;try{return O.apply(this,arguments)}finally{p=se}}}})(Hb);zb.exports=Hb;var $A=zb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA=g,jn=$A;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wb=new Set,Al={};function Ji(t,e){zo(t,e),zo(t+"Capture",e)}function zo(t,e){for(Al[t]=e,t=0;t<e.length;t++)Wb.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jp=Object.prototype.hasOwnProperty,HA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Vx={};function WA(t){return jp.call(Vx,t)?!0:jp.call(Mx,t)?!1:HA.test(t)?Vx[t]=!0:(Mx[t]=!0,!1)}function qA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GA(t,e,n,r){if(e===null||typeof e>"u"||qA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var yg=/[\-:]([a-z])/g;function vg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yg,vg);Dt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yg,vg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yg,vg);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function xg(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GA(e,n,s,r)&&(n=null),r||s===null?WA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ts=zA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),yo=Symbol.for("react.portal"),vo=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),Ap=Symbol.for("react.profiler"),qb=Symbol.for("react.provider"),Gb=Symbol.for("react.context"),_g=Symbol.for("react.forward_ref"),kp=Symbol.for("react.suspense"),Rp=Symbol.for("react.suspense_list"),bg=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),Kb=Symbol.for("react.offscreen"),Fx=Symbol.iterator;function qa(t){return t===null||typeof t!="object"?null:(t=Fx&&t[Fx]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,Tf;function rl(t){if(Tf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tf=e&&e[1]||""}return`
`+Tf+t}var Sf=!1;function Cf(t,e){if(!t||Sf)return"";Sf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Sf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rl(t):""}function KA(t){switch(t.tag){case 5:return rl(t.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return t=Cf(t.type,!1),t;case 11:return t=Cf(t.type.render,!1),t;case 1:return t=Cf(t.type,!0),t;default:return""}}function Pp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vo:return"Fragment";case yo:return"Portal";case Ap:return"Profiler";case wg:return"StrictMode";case kp:return"Suspense";case Rp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gb:return(t.displayName||"Context")+".Consumer";case qb:return(t._context.displayName||"Context")+".Provider";case _g:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bg:return e=t.displayName||null,e!==null?e:Pp(t.type)||"Memo";case vs:e=t._payload,t=t._init;try{return Pp(t(e))}catch{}}return null}function QA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pp(e);case 8:return e===wg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YA(t){var e=Qb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gc(t){t._valueTracker||(t._valueTracker=YA(t))}function Yb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dp(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ux(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xb(t,e){e=e.checked,e!=null&&xg(t,"checked",e,!1)}function Lp(t,e){Xb(t,e);var n=qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Op(t,e.type,n):e.hasOwnProperty("defaultValue")&&Op(t,e.type,qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Op(t,e,n){(e!=="number"||Qu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sl=Array.isArray;function jo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $x(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(sl(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qs(n)}}function Jb(t,e){var n=qs(e.value),r=qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kc,e1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kc=Kc||document.createElement("div"),Kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XA=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(t){XA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pl[e]=pl[t]})});function t1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||pl.hasOwnProperty(t)&&pl[t]?(""+e).trim():e+"px"}function n1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JA=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fp(t,e){if(e){if(JA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Up(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bp=null;function Eg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $p=null,Ao=null,ko=null;function Hx(t){if(t=pc(t)){if(typeof $p!="function")throw Error($(280));var e=t.stateNode;e&&(e=sh(e),$p(t.stateNode,t.type,e))}}function r1(t){Ao?ko?ko.push(t):ko=[t]:Ao=t}function s1(){if(Ao){var t=Ao,e=ko;if(ko=Ao=null,Hx(t),e)for(t=0;t<e.length;t++)Hx(e[t])}}function i1(t,e){return t(e)}function o1(){}var If=!1;function a1(t,e,n){if(If)return t(e,n);If=!0;try{return i1(t,e,n)}finally{If=!1,(Ao!==null||ko!==null)&&(o1(),s1())}}function Rl(t,e){var n=t.stateNode;if(n===null)return null;var r=sh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var zp=!1;if(zr)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){zp=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{zp=!1}function ZA(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ml=!1,Yu=null,Xu=!1,Hp=null,e2={onError:function(t){ml=!0,Yu=t}};function t2(t,e,n,r,s,i,a,l,c){ml=!1,Yu=null,ZA.apply(e2,arguments)}function n2(t,e,n,r,s,i,a,l,c){if(t2.apply(this,arguments),ml){if(ml){var d=Yu;ml=!1,Yu=null}else throw Error($(198));Xu||(Xu=!0,Hp=d)}}function Zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wx(t){if(Zi(t)!==t)throw Error($(188))}function r2(t){var e=t.alternate;if(!e){if(e=Zi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Wx(s),t;if(i===r)return Wx(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function c1(t){return t=r2(t),t!==null?u1(t):null}function u1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u1(t);if(e!==null)return e;t=t.sibling}return null}var d1=jn.unstable_scheduleCallback,qx=jn.unstable_cancelCallback,s2=jn.unstable_shouldYield,i2=jn.unstable_requestPaint,ct=jn.unstable_now,o2=jn.unstable_getCurrentPriorityLevel,Ng=jn.unstable_ImmediatePriority,h1=jn.unstable_UserBlockingPriority,Ju=jn.unstable_NormalPriority,a2=jn.unstable_LowPriority,f1=jn.unstable_IdlePriority,eh=null,gr=null;function l2(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(eh,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:d2,c2=Math.log,u2=Math.LN2;function d2(t){return t>>>=0,t===0?32:31-(c2(t)/u2|0)|0}var Qc=64,Yc=4194304;function il(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=il(l):(i&=a,i!==0&&(r=il(i)))}else a=n&~s,a!==0?r=il(a):i!==0&&(r=il(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),s=1<<n,r|=t[n],e&=~s;return r}function h2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Zn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=h2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Wp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p1(){var t=Qc;return Qc<<=1,!(Qc&4194240)&&(Qc=64),t}function jf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function p2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Oe=0;function m1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g1,Sg,y1,v1,x1,qp=!1,Xc=[],Rs=null,Ps=null,Ds=null,Pl=new Map,Dl=new Map,ws=[],m2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gx(t,e){switch(t){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":Pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(e.pointerId)}}function Ka(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pc(e),e!==null&&Sg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function g2(t,e,n,r,s){switch(e){case"focusin":return Rs=Ka(Rs,t,e,n,r,s),!0;case"dragenter":return Ps=Ka(Ps,t,e,n,r,s),!0;case"mouseover":return Ds=Ka(Ds,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pl.set(i,Ka(Pl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Dl.set(i,Ka(Dl.get(i)||null,t,e,n,r,s)),!0}return!1}function w1(t){var e=Si(t.target);if(e!==null){var n=Zi(e);if(n!==null){if(e=n.tag,e===13){if(e=l1(n),e!==null){t.blockedOn=e,x1(t.priority,function(){y1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Su(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Gp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bp=r,n.target.dispatchEvent(r),Bp=null}else return e=pc(n),e!==null&&Sg(e),t.blockedOn=n,!1;e.shift()}return!0}function Kx(t,e,n){Su(t)&&n.delete(e)}function y2(){qp=!1,Rs!==null&&Su(Rs)&&(Rs=null),Ps!==null&&Su(Ps)&&(Ps=null),Ds!==null&&Su(Ds)&&(Ds=null),Pl.forEach(Kx),Dl.forEach(Kx)}function Qa(t,e){t.blockedOn===e&&(t.blockedOn=null,qp||(qp=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,y2)))}function Ll(t){function e(s){return Qa(s,t)}if(0<Xc.length){Qa(Xc[0],t);for(var n=1;n<Xc.length;n++){var r=Xc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rs!==null&&Qa(Rs,t),Ps!==null&&Qa(Ps,t),Ds!==null&&Qa(Ds,t),Pl.forEach(e),Dl.forEach(e),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)w1(n),n.blockedOn===null&&ws.shift()}var Ro=ts.ReactCurrentBatchConfig,ed=!0;function v2(t,e,n,r){var s=Oe,i=Ro.transition;Ro.transition=null;try{Oe=1,Cg(t,e,n,r)}finally{Oe=s,Ro.transition=i}}function x2(t,e,n,r){var s=Oe,i=Ro.transition;Ro.transition=null;try{Oe=4,Cg(t,e,n,r)}finally{Oe=s,Ro.transition=i}}function Cg(t,e,n,r){if(ed){var s=Gp(t,e,n,r);if(s===null)Ff(t,e,r,td,n),Gx(t,r);else if(g2(s,t,e,n,r))r.stopPropagation();else if(Gx(t,r),e&4&&-1<m2.indexOf(t)){for(;s!==null;){var i=pc(s);if(i!==null&&g1(i),i=Gp(t,e,n,r),i===null&&Ff(t,e,r,td,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ff(t,e,r,null,n)}}var td=null;function Gp(t,e,n,r){if(td=null,t=Eg(r),t=Si(t),t!==null)if(e=Zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return td=t,null}function _1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o2()){case Ng:return 1;case h1:return 4;case Ju:case a2:return 16;case f1:return 536870912;default:return 16}default:return 16}}var Cs=null,Ig=null,Cu=null;function b1(){if(Cu)return Cu;var t,e=Ig,n=e.length,r,s="value"in Cs?Cs.value:Cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Cu=s.slice(t,1<r?1-r:void 0)}function Iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jc(){return!0}function Qx(){return!1}function kn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jc:Qx,this.isPropagationStopped=Qx,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jc)},persist:function(){},isPersistent:Jc}),e}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jg=kn(ha),fc=et({},ha,{view:0,detail:0}),w2=kn(fc),Af,kf,Ya,th=et({},fc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ya&&(Ya&&t.type==="mousemove"?(Af=t.screenX-Ya.screenX,kf=t.screenY-Ya.screenY):kf=Af=0,Ya=t),Af)},movementY:function(t){return"movementY"in t?t.movementY:kf}}),Yx=kn(th),_2=et({},th,{dataTransfer:0}),b2=kn(_2),E2=et({},fc,{relatedTarget:0}),Rf=kn(E2),N2=et({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),T2=kn(N2),S2=et({},ha,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C2=kn(S2),I2=et({},ha,{data:0}),Xx=kn(I2),j2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k2[t])?!!e[t]:!1}function Ag(){return R2}var P2=et({},fc,{key:function(t){if(t.key){var e=j2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?A2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(t){return t.type==="keypress"?Iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),D2=kn(P2),L2=et({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jx=kn(L2),O2=et({},fc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),M2=kn(O2),V2=et({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),F2=kn(V2),U2=et({},th,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B2=kn(U2),$2=[9,13,27,32],kg=zr&&"CompositionEvent"in window,gl=null;zr&&"documentMode"in document&&(gl=document.documentMode);var z2=zr&&"TextEvent"in window&&!gl,E1=zr&&(!kg||gl&&8<gl&&11>=gl),Zx=" ",ew=!1;function N1(t,e){switch(t){case"keyup":return $2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xo=!1;function H2(t,e){switch(t){case"compositionend":return T1(e);case"keypress":return e.which!==32?null:(ew=!0,Zx);case"textInput":return t=e.data,t===Zx&&ew?null:t;default:return null}}function W2(t,e){if(xo)return t==="compositionend"||!kg&&N1(t,e)?(t=b1(),Cu=Ig=Cs=null,xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E1&&e.locale!=="ko"?null:e.data;default:return null}}var q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!q2[t.type]:e==="textarea"}function S1(t,e,n,r){r1(r),e=nd(e,"onChange"),0<e.length&&(n=new jg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yl=null,Ol=null;function G2(t){M1(t,0)}function nh(t){var e=bo(t);if(Yb(e))return t}function K2(t,e){if(t==="change")return e}var C1=!1;if(zr){var Pf;if(zr){var Df="oninput"in document;if(!Df){var nw=document.createElement("div");nw.setAttribute("oninput","return;"),Df=typeof nw.oninput=="function"}Pf=Df}else Pf=!1;C1=Pf&&(!document.documentMode||9<document.documentMode)}function rw(){yl&&(yl.detachEvent("onpropertychange",I1),Ol=yl=null)}function I1(t){if(t.propertyName==="value"&&nh(Ol)){var e=[];S1(e,Ol,t,Eg(t)),a1(G2,e)}}function Q2(t,e,n){t==="focusin"?(rw(),yl=e,Ol=n,yl.attachEvent("onpropertychange",I1)):t==="focusout"&&rw()}function Y2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nh(Ol)}function X2(t,e){if(t==="click")return nh(e)}function J2(t,e){if(t==="input"||t==="change")return nh(e)}function Z2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:Z2;function Ml(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jp.call(e,s)||!nr(t[s],e[s]))return!1}return!0}function sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iw(t,e){var n=sw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sw(n)}}function j1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A1(){for(var t=window,e=Qu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qu(t.document)}return e}function Rg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ek(t){var e=A1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j1(n.ownerDocument.documentElement,n)){if(r!==null&&Rg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=iw(n,i);var a=iw(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tk=zr&&"documentMode"in document&&11>=document.documentMode,wo=null,Kp=null,vl=null,Qp=!1;function ow(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qp||wo==null||wo!==Qu(r)||(r=wo,"selectionStart"in r&&Rg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vl&&Ml(vl,r)||(vl=r,r=nd(Kp,"onSelect"),0<r.length&&(e=new jg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wo)))}function Zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _o={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionend:Zc("Transition","TransitionEnd")},Lf={},k1={};zr&&(k1=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function rh(t){if(Lf[t])return Lf[t];if(!_o[t])return t;var e=_o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k1)return Lf[t]=e[n];return t}var R1=rh("animationend"),P1=rh("animationiteration"),D1=rh("animationstart"),L1=rh("transitionend"),O1=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(t,e){O1.set(t,e),Ji(e,[t])}for(var Of=0;Of<aw.length;Of++){var Mf=aw[Of],nk=Mf.toLowerCase(),rk=Mf[0].toUpperCase()+Mf.slice(1);ri(nk,"on"+rk)}ri(R1,"onAnimationEnd");ri(P1,"onAnimationIteration");ri(D1,"onAnimationStart");ri("dblclick","onDoubleClick");ri("focusin","onFocus");ri("focusout","onBlur");ri(L1,"onTransitionEnd");zo("onMouseEnter",["mouseout","mouseover"]);zo("onMouseLeave",["mouseout","mouseover"]);zo("onPointerEnter",["pointerout","pointerover"]);zo("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function lw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,n2(r,e,void 0,t),t.currentTarget=null}function M1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;lw(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;lw(s,l,d),i=c}}}if(Xu)throw t=Hp,Xu=!1,Hp=null,t}function Ge(t,e){var n=e[em];n===void 0&&(n=e[em]=new Set);var r=t+"__bubble";n.has(r)||(V1(e,t,2,!1),n.add(r))}function Vf(t,e,n){var r=0;e&&(r|=4),V1(n,t,r,e)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Vl(t){if(!t[eu]){t[eu]=!0,Wb.forEach(function(n){n!=="selectionchange"&&(sk.has(n)||Vf(n,!1,t),Vf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eu]||(e[eu]=!0,Vf("selectionchange",!1,e))}}function V1(t,e,n,r){switch(_1(e)){case 1:var s=v2;break;case 4:s=x2;break;default:s=Cg}n=s.bind(null,e,n,t),s=void 0,!zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ff(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Si(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}a1(function(){var d=i,h=Eg(n),f=[];e:{var p=O1.get(t);if(p!==void 0){var v=jg,I=t;switch(t){case"keypress":if(Iu(n)===0)break e;case"keydown":case"keyup":v=D2;break;case"focusin":I="focus",v=Rf;break;case"focusout":I="blur",v=Rf;break;case"beforeblur":case"afterblur":v=Rf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Yx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=b2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=M2;break;case R1:case P1:case D1:v=T2;break;case L1:v=F2;break;case"scroll":v=w2;break;case"wheel":v=B2;break;case"copy":case"cut":case"paste":v=C2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Jx}var _=(e&4)!==0,S=!_&&t==="scroll",b=_?p!==null?p+"Capture":null:p;_=[];for(var w=d,C;w!==null;){C=w;var R=C.stateNode;if(C.tag===5&&R!==null&&(C=R,b!==null&&(R=Rl(w,b),R!=null&&_.push(Fl(w,R,C)))),S)break;w=w.return}0<_.length&&(p=new v(p,I,null,n,h),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Bp&&(I=n.relatedTarget||n.fromElement)&&(Si(I)||I[Hr]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(I=n.relatedTarget||n.toElement,v=d,I=I?Si(I):null,I!==null&&(S=Zi(I),I!==S||I.tag!==5&&I.tag!==6)&&(I=null)):(v=null,I=d),v!==I)){if(_=Yx,R="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=Jx,R="onPointerLeave",b="onPointerEnter",w="pointer"),S=v==null?p:bo(v),C=I==null?p:bo(I),p=new _(R,w+"leave",v,n,h),p.target=S,p.relatedTarget=C,R=null,Si(h)===d&&(_=new _(b,w+"enter",I,n,h),_.target=C,_.relatedTarget=S,R=_),S=R,v&&I)t:{for(_=v,b=I,w=0,C=_;C;C=co(C))w++;for(C=0,R=b;R;R=co(R))C++;for(;0<w-C;)_=co(_),w--;for(;0<C-w;)b=co(b),C--;for(;w--;){if(_===b||b!==null&&_===b.alternate)break t;_=co(_),b=co(b)}_=null}else _=null;v!==null&&cw(f,p,v,_,!1),I!==null&&S!==null&&cw(f,S,I,_,!0)}}e:{if(p=d?bo(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var L=K2;else if(tw(p))if(C1)L=J2;else{L=Y2;var A=Q2}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=X2);if(L&&(L=L(t,d))){S1(f,L,n,h);break e}A&&A(t,p,d),t==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&Op(p,"number",p.value)}switch(A=d?bo(d):window,t){case"focusin":(tw(A)||A.contentEditable==="true")&&(wo=A,Kp=d,vl=null);break;case"focusout":vl=Kp=wo=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,ow(f,n,h);break;case"selectionchange":if(tk)break;case"keydown":case"keyup":ow(f,n,h)}var N;if(kg)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else xo?N1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(E1&&n.locale!=="ko"&&(xo||y!=="onCompositionStart"?y==="onCompositionEnd"&&xo&&(N=b1()):(Cs=h,Ig="value"in Cs?Cs.value:Cs.textContent,xo=!0)),A=nd(d,y),0<A.length&&(y=new Xx(y,t,null,n,h),f.push({event:y,listeners:A}),N?y.data=N:(N=T1(n),N!==null&&(y.data=N)))),(N=z2?H2(t,n):W2(t,n))&&(d=nd(d,"onBeforeInput"),0<d.length&&(h=new Xx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=N))}M1(f,e)})}function Fl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rl(t,n),i!=null&&r.unshift(Fl(t,i,s)),i=Rl(t,e),i!=null&&r.push(Fl(t,i,s))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cw(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Rl(n,i),c!=null&&a.unshift(Fl(n,c,l))):s||(c=Rl(n,i),c!=null&&a.push(Fl(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var ik=/\r\n?/g,ok=/\u0000|\uFFFD/g;function uw(t){return(typeof t=="string"?t:""+t).replace(ik,`
`).replace(ok,"")}function tu(t,e,n){if(e=uw(e),uw(t)!==e&&n)throw Error($(425))}function rd(){}var Yp=null,Xp=null;function Jp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zp=typeof setTimeout=="function"?setTimeout:void 0,ak=typeof clearTimeout=="function"?clearTimeout:void 0,dw=typeof Promise=="function"?Promise:void 0,lk=typeof queueMicrotask=="function"?queueMicrotask:typeof dw<"u"?function(t){return dw.resolve(null).then(t).catch(ck)}:Zp;function ck(t){setTimeout(function(){throw t})}function Uf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ll(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ll(e)}function Ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fa=Math.random().toString(36).slice(2),hr="__reactFiber$"+fa,Ul="__reactProps$"+fa,Hr="__reactContainer$"+fa,em="__reactEvents$"+fa,uk="__reactListeners$"+fa,dk="__reactHandles$"+fa;function Si(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hw(t);t!==null;){if(n=t[hr])return n;t=hw(t)}return e}t=n,n=t.parentNode}return null}function pc(t){return t=t[hr]||t[Hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function sh(t){return t[Ul]||null}var tm=[],Eo=-1;function si(t){return{current:t}}function Qe(t){0>Eo||(t.current=tm[Eo],tm[Eo]=null,Eo--)}function He(t,e){Eo++,tm[Eo]=t.current,t.current=e}var Gs={},Wt=si(Gs),pn=si(!1),Mi=Gs;function Ho(t,e){var n=t.type.contextTypes;if(!n)return Gs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function sd(){Qe(pn),Qe(Wt)}function fw(t,e,n){if(Wt.current!==Gs)throw Error($(168));He(Wt,e),He(pn,n)}function F1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,QA(t)||"Unknown",s));return et({},n,r)}function id(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gs,Mi=Wt.current,He(Wt,t),He(pn,pn.current),!0}function pw(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=F1(t,e,Mi),r.__reactInternalMemoizedMergedChildContext=t,Qe(pn),Qe(Wt),He(Wt,t)):Qe(pn),He(pn,n)}var Dr=null,ih=!1,Bf=!1;function U1(t){Dr===null?Dr=[t]:Dr.push(t)}function hk(t){ih=!0,U1(t)}function ii(){if(!Bf&&Dr!==null){Bf=!0;var t=0,e=Oe;try{var n=Dr;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Dr=null,ih=!1}catch(s){throw Dr!==null&&(Dr=Dr.slice(t+1)),d1(Ng,ii),s}finally{Oe=e,Bf=!1}}return null}var No=[],To=0,od=null,ad=0,Rn=[],Pn=0,Vi=null,Or=1,Mr="";function bi(t,e){No[To++]=ad,No[To++]=od,od=t,ad=e}function B1(t,e,n){Rn[Pn++]=Or,Rn[Pn++]=Mr,Rn[Pn++]=Vi,Vi=t;var r=Or;t=Mr;var s=32-Zn(r)-1;r&=~(1<<s),n+=1;var i=32-Zn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Or=1<<32-Zn(e)+s|n<<s|r,Mr=i+t}else Or=1<<i|n<<s|r,Mr=t}function Pg(t){t.return!==null&&(bi(t,1),B1(t,1,0))}function Dg(t){for(;t===od;)od=No[--To],No[To]=null,ad=No[--To],No[To]=null;for(;t===Vi;)Vi=Rn[--Pn],Rn[Pn]=null,Mr=Rn[--Pn],Rn[Pn]=null,Or=Rn[--Pn],Rn[Pn]=null}var Tn=null,bn=null,Ye=!1,Yn=null;function $1(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,bn=Ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vi!==null?{id:Or,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,bn=null,!0):!1;default:return!1}}function nm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rm(t){if(Ye){var e=bn;if(e){var n=e;if(!mw(t,e)){if(nm(t))throw Error($(418));e=Ls(n.nextSibling);var r=Tn;e&&mw(t,e)?$1(r,n):(t.flags=t.flags&-4097|2,Ye=!1,Tn=t)}}else{if(nm(t))throw Error($(418));t.flags=t.flags&-4097|2,Ye=!1,Tn=t}}}function gw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function nu(t){if(t!==Tn)return!1;if(!Ye)return gw(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jp(t.type,t.memoizedProps)),e&&(e=bn)){if(nm(t))throw z1(),Error($(418));for(;e;)$1(t,e),e=Ls(e.nextSibling)}if(gw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=Ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Tn?Ls(t.stateNode.nextSibling):null;return!0}function z1(){for(var t=bn;t;)t=Ls(t.nextSibling)}function Wo(){bn=Tn=null,Ye=!1}function Lg(t){Yn===null?Yn=[t]:Yn.push(t)}var fk=ts.ReactCurrentBatchConfig;function Xa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function ru(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yw(t){var e=t._init;return e(t._payload)}function H1(t){function e(b,w){if(t){var C=b.deletions;C===null?(b.deletions=[w],b.flags|=16):C.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=Fs(b,w),b.index=0,b.sibling=null,b}function i(b,w,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<w?(b.flags|=2,w):C):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,w,C,R){return w===null||w.tag!==6?(w=Kf(C,b.mode,R),w.return=b,w):(w=s(w,C),w.return=b,w)}function c(b,w,C,R){var L=C.type;return L===vo?h(b,w,C.props.children,R,C.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vs&&yw(L)===w.type)?(R=s(w,C.props),R.ref=Xa(b,w,C),R.return=b,R):(R=Lu(C.type,C.key,C.props,null,b.mode,R),R.ref=Xa(b,w,C),R.return=b,R)}function d(b,w,C,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Qf(C,b.mode,R),w.return=b,w):(w=s(w,C.children||[]),w.return=b,w)}function h(b,w,C,R,L){return w===null||w.tag!==7?(w=Pi(C,b.mode,R,L),w.return=b,w):(w=s(w,C),w.return=b,w)}function f(b,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Kf(""+w,b.mode,C),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qc:return C=Lu(w.type,w.key,w.props,null,b.mode,C),C.ref=Xa(b,null,w),C.return=b,C;case yo:return w=Qf(w,b.mode,C),w.return=b,w;case vs:var R=w._init;return f(b,R(w._payload),C)}if(sl(w)||qa(w))return w=Pi(w,b.mode,C,null),w.return=b,w;ru(b,w)}return null}function p(b,w,C,R){var L=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:l(b,w,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case qc:return C.key===L?c(b,w,C,R):null;case yo:return C.key===L?d(b,w,C,R):null;case vs:return L=C._init,p(b,w,L(C._payload),R)}if(sl(C)||qa(C))return L!==null?null:h(b,w,C,R,null);ru(b,C)}return null}function v(b,w,C,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(C)||null,l(w,b,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case qc:return b=b.get(R.key===null?C:R.key)||null,c(w,b,R,L);case yo:return b=b.get(R.key===null?C:R.key)||null,d(w,b,R,L);case vs:var A=R._init;return v(b,w,C,A(R._payload),L)}if(sl(R)||qa(R))return b=b.get(C)||null,h(w,b,R,L,null);ru(w,R)}return null}function I(b,w,C,R){for(var L=null,A=null,N=w,y=w=0,T=null;N!==null&&y<C.length;y++){N.index>y?(T=N,N=null):T=N.sibling;var E=p(b,N,C[y],R);if(E===null){N===null&&(N=T);break}t&&N&&E.alternate===null&&e(b,N),w=i(E,w,y),A===null?L=E:A.sibling=E,A=E,N=T}if(y===C.length)return n(b,N),Ye&&bi(b,y),L;if(N===null){for(;y<C.length;y++)N=f(b,C[y],R),N!==null&&(w=i(N,w,y),A===null?L=N:A.sibling=N,A=N);return Ye&&bi(b,y),L}for(N=r(b,N);y<C.length;y++)T=v(N,b,y,C[y],R),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?y:T.key),w=i(T,w,y),A===null?L=T:A.sibling=T,A=T);return t&&N.forEach(function(j){return e(b,j)}),Ye&&bi(b,y),L}function _(b,w,C,R){var L=qa(C);if(typeof L!="function")throw Error($(150));if(C=L.call(C),C==null)throw Error($(151));for(var A=L=null,N=w,y=w=0,T=null,E=C.next();N!==null&&!E.done;y++,E=C.next()){N.index>y?(T=N,N=null):T=N.sibling;var j=p(b,N,E.value,R);if(j===null){N===null&&(N=T);break}t&&N&&j.alternate===null&&e(b,N),w=i(j,w,y),A===null?L=j:A.sibling=j,A=j,N=T}if(E.done)return n(b,N),Ye&&bi(b,y),L;if(N===null){for(;!E.done;y++,E=C.next())E=f(b,E.value,R),E!==null&&(w=i(E,w,y),A===null?L=E:A.sibling=E,A=E);return Ye&&bi(b,y),L}for(N=r(b,N);!E.done;y++,E=C.next())E=v(N,b,y,E.value,R),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?y:E.key),w=i(E,w,y),A===null?L=E:A.sibling=E,A=E);return t&&N.forEach(function(k){return e(b,k)}),Ye&&bi(b,y),L}function S(b,w,C,R){if(typeof C=="object"&&C!==null&&C.type===vo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case qc:e:{for(var L=C.key,A=w;A!==null;){if(A.key===L){if(L=C.type,L===vo){if(A.tag===7){n(b,A.sibling),w=s(A,C.props.children),w.return=b,b=w;break e}}else if(A.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vs&&yw(L)===A.type){n(b,A.sibling),w=s(A,C.props),w.ref=Xa(b,A,C),w.return=b,b=w;break e}n(b,A);break}else e(b,A);A=A.sibling}C.type===vo?(w=Pi(C.props.children,b.mode,R,C.key),w.return=b,b=w):(R=Lu(C.type,C.key,C.props,null,b.mode,R),R.ref=Xa(b,w,C),R.return=b,b=R)}return a(b);case yo:e:{for(A=C.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){n(b,w.sibling),w=s(w,C.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=Qf(C,b.mode,R),w.return=b,b=w}return a(b);case vs:return A=C._init,S(b,w,A(C._payload),R)}if(sl(C))return I(b,w,C,R);if(qa(C))return _(b,w,C,R);ru(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(n(b,w.sibling),w=s(w,C),w.return=b,b=w):(n(b,w),w=Kf(C,b.mode,R),w.return=b,b=w),a(b)):n(b,w)}return S}var qo=H1(!0),W1=H1(!1),ld=si(null),cd=null,So=null,Og=null;function Mg(){Og=So=cd=null}function Vg(t){var e=ld.current;Qe(ld),t._currentValue=e}function sm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Po(t,e){cd=t,Og=So=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Og!==t)if(t={context:t,memoizedValue:e,next:null},So===null){if(cd===null)throw Error($(308));So=t,cd.dependencies={lanes:0,firstContext:t}}else So=So.next=t;return e}var Ci=null;function Fg(t){Ci===null?Ci=[t]:Ci.push(t)}function q1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Fg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wr(t,r)}function Wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xs=!1;function Ug(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Os(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wr(t,n)}return s=r.interleaved,s===null?(e.next=e,Fg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wr(t,n)}function ju(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tg(t,n)}}function vw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ud(t,e,n,r){var s=t.updateQueue;xs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,l=i;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,_=l;switch(p=e,v=n,_.tag){case 1:if(I=_.payload,typeof I=="function"){f=I.call(v,f,p);break e}f=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=_.payload,p=typeof I=="function"?I.call(v,f,p):I,p==null)break e;f=et({},f,p);break e;case 2:xs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=f):h=h.next=v,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ui|=a,t.lanes=a,t.memoizedState=f}}function xw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var mc={},yr=si(mc),Bl=si(mc),$l=si(mc);function Ii(t){if(t===mc)throw Error($(174));return t}function Bg(t,e){switch(He($l,e),He(Bl,t),He(yr,mc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vp(e,t)}Qe(yr),He(yr,e)}function Go(){Qe(yr),Qe(Bl),Qe($l)}function K1(t){Ii($l.current);var e=Ii(yr.current),n=Vp(e,t.type);e!==n&&(He(Bl,t),He(yr,n))}function $g(t){Bl.current===t&&(Qe(yr),Qe(Bl))}var Je=si(0);function dd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $f=[];function zg(){for(var t=0;t<$f.length;t++)$f[t]._workInProgressVersionPrimary=null;$f.length=0}var Au=ts.ReactCurrentDispatcher,zf=ts.ReactCurrentBatchConfig,Fi=0,Ze=null,xt=null,Tt=null,hd=!1,xl=!1,zl=0,pk=0;function Ot(){throw Error($(321))}function Hg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function Wg(t,e,n,r,s,i){if(Fi=i,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Au.current=t===null||t.memoizedState===null?vk:xk,t=n(r,s),xl){i=0;do{if(xl=!1,zl=0,25<=i)throw Error($(301));i+=1,Tt=xt=null,e.updateQueue=null,Au.current=wk,t=n(r,s)}while(xl)}if(Au.current=fd,e=xt!==null&&xt.next!==null,Fi=0,Tt=xt=Ze=null,hd=!1,e)throw Error($(300));return t}function qg(){var t=zl!==0;return zl=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ze.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Un(){if(xt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Tt===null?Ze.memoizedState:Tt.next;if(e!==null)Tt=e,xt=t;else{if(t===null)throw Error($(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Tt===null?Ze.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Hl(t,e){return typeof e=="function"?e(t):e}function Hf(t){var e=Un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=xt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Fi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Ze.lanes|=h,Ui|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,nr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ze.lanes|=i,Ui|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wf(t){var e=Un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);nr(i,e.memoizedState)||(fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q1(){}function Y1(t,e){var n=Ze,r=Un(),s=e(),i=!nr(r.memoizedState,s);if(i&&(r.memoizedState=s,fn=!0),r=r.queue,Gg(Z1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Wl(9,J1.bind(null,n,r,s,e),void 0,null),Ct===null)throw Error($(349));Fi&30||X1(n,e,s)}return s}function X1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J1(t,e,n,r){e.value=n,e.getSnapshot=r,eE(e)&&tE(t)}function Z1(t,e,n){return n(function(){eE(e)&&tE(t)})}function eE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function tE(t){var e=Wr(t,1);e!==null&&er(e,t,1,-1)}function ww(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:t},e.queue=t,t=t.dispatch=yk.bind(null,Ze,t),[e.memoizedState,t]}function Wl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nE(){return Un().memoizedState}function ku(t,e,n,r){var s=ur();Ze.flags|=t,s.memoizedState=Wl(1|e,n,void 0,r===void 0?null:r)}function oh(t,e,n,r){var s=Un();r=r===void 0?null:r;var i=void 0;if(xt!==null){var a=xt.memoizedState;if(i=a.destroy,r!==null&&Hg(r,a.deps)){s.memoizedState=Wl(e,n,i,r);return}}Ze.flags|=t,s.memoizedState=Wl(1|e,n,i,r)}function _w(t,e){return ku(8390656,8,t,e)}function Gg(t,e){return oh(2048,8,t,e)}function rE(t,e){return oh(4,2,t,e)}function sE(t,e){return oh(4,4,t,e)}function iE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oE(t,e,n){return n=n!=null?n.concat([t]):null,oh(4,4,iE.bind(null,e,t),n)}function Kg(){}function aE(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lE(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cE(t,e,n){return Fi&21?(nr(n,e)||(n=p1(),Ze.lanes|=n,Ui|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function mk(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=zf.transition;zf.transition={};try{t(!1),e()}finally{Oe=n,zf.transition=r}}function uE(){return Un().memoizedState}function gk(t,e,n){var r=Vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dE(t))hE(e,n);else if(n=q1(t,e,n,r),n!==null){var s=Zt();er(n,t,r,s),fE(n,e,r)}}function yk(t,e,n){var r=Vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dE(t))hE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,nr(l,a)){var c=e.interleaved;c===null?(s.next=s,Fg(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=q1(t,e,s,r),n!==null&&(s=Zt(),er(n,t,r,s),fE(n,e,r))}}function dE(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function hE(t,e){xl=hd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tg(t,n)}}var fd={readContext:Fn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},vk={readContext:Fn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:_w,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ku(4194308,4,iE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ku(4194308,4,t,e)},useInsertionEffect:function(t,e){return ku(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gk.bind(null,Ze,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:ww,useDebugValue:Kg,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=ww(!1),e=t[0];return t=mk.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ze,s=ur();if(Ye){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ct===null)throw Error($(349));Fi&30||X1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,_w(Z1.bind(null,r,i,t),[t]),r.flags|=2048,Wl(9,J1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ur(),e=Ct.identifierPrefix;if(Ye){var n=Mr,r=Or;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xk={readContext:Fn,useCallback:aE,useContext:Fn,useEffect:Gg,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:Hf,useRef:nE,useState:function(){return Hf(Hl)},useDebugValue:Kg,useDeferredValue:function(t){var e=Un();return cE(e,xt.memoizedState,t)},useTransition:function(){var t=Hf(Hl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:Y1,useId:uE,unstable_isNewReconciler:!1},wk={readContext:Fn,useCallback:aE,useContext:Fn,useEffect:Gg,useImperativeHandle:oE,useInsertionEffect:rE,useLayoutEffect:sE,useMemo:lE,useReducer:Wf,useRef:nE,useState:function(){return Wf(Hl)},useDebugValue:Kg,useDeferredValue:function(t){var e=Un();return xt===null?e.memoizedState=t:cE(e,xt.memoizedState,t)},useTransition:function(){var t=Wf(Hl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:Y1,useId:uE,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function im(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ah={isMounted:function(t){return(t=t._reactInternals)?Zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Vs(t),i=Br(r,s);i.payload=e,n!=null&&(i.callback=n),e=Os(t,i,s),e!==null&&(er(e,t,s,r),ju(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zt(),s=Vs(t),i=Br(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Os(t,i,s),e!==null&&(er(e,t,s,r),ju(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zt(),r=Vs(t),s=Br(n,r);s.tag=2,e!=null&&(s.callback=e),e=Os(t,s,r),e!==null&&(er(e,t,r,n),ju(e,t,r))}};function bw(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ml(n,r)||!Ml(s,i):!0}function pE(t,e,n){var r=!1,s=Gs,i=e.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=mn(e)?Mi:Wt.current,r=e.contextTypes,i=(r=r!=null)?Ho(t,s):Gs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ah,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ew(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ah.enqueueReplaceState(e,e.state,null)}function om(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ug(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=mn(e)?Mi:Wt.current,s.context=Ho(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(im(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ah.enqueueReplaceState(s,s.state,null),ud(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ko(t,e){try{var n="",r=e;do n+=KA(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function am(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _k=typeof WeakMap=="function"?WeakMap:Map;function mE(t,e,n){n=Br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){md||(md=!0,ym=r),am(t,e)},n}function gE(t,e,n){n=Br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){am(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){am(t,e),typeof r!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Nw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _k;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Lk.bind(null,t,e,n),e.then(t,t))}function Tw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Br(-1,1),e.tag=2,Os(n,e,1))),n.lanes|=1),t)}var bk=ts.ReactCurrentOwner,fn=!1;function Yt(t,e,n,r){e.child=t===null?W1(e,null,n,r):qo(e,t.child,n,r)}function Cw(t,e,n,r,s){n=n.render;var i=e.ref;return Po(e,s),r=Wg(t,e,n,r,i,s),n=qg(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qr(t,e,s)):(Ye&&n&&Pg(e),e.flags|=1,Yt(t,e,r,s),e.child)}function Iw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ny(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yE(t,e,i,r,s)):(t=Lu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ml,n(a,r)&&t.ref===e.ref)return qr(t,e,s)}return e.flags|=1,t=Fs(i,r),t.ref=e.ref,t.return=e,e.child=t}function yE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ml(i,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,qr(t,e,s)}return lm(t,e,n,r,s)}function vE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Io,wn),wn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Io,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He(Io,wn),wn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,He(Io,wn),wn|=r;return Yt(t,e,s,n),e.child}function xE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lm(t,e,n,r,s){var i=mn(n)?Mi:Wt.current;return i=Ho(e,i),Po(e,s),n=Wg(t,e,n,r,i,s),r=qg(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qr(t,e,s)):(Ye&&r&&Pg(e),e.flags|=1,Yt(t,e,n,s),e.child)}function jw(t,e,n,r,s){if(mn(n)){var i=!0;id(e)}else i=!1;if(Po(e,s),e.stateNode===null)Ru(t,e),pE(e,n,r),om(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Fn(d):(d=mn(n)?Mi:Wt.current,d=Ho(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Ew(e,a,r,d),xs=!1;var p=e.memoizedState;a.state=p,ud(e,r,a,s),c=e.memoizedState,l!==r||p!==c||pn.current||xs?(typeof h=="function"&&(im(e,n,h,r),c=e.memoizedState),(l=xs||bw(e,n,l,r,p,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,G1(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Kn(e.type,l),a.props=d,f=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Fn(c):(c=mn(n)?Mi:Wt.current,c=Ho(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Ew(e,a,r,c),xs=!1,p=e.memoizedState,a.state=p,ud(e,r,a,s);var I=e.memoizedState;l!==f||p!==I||pn.current||xs?(typeof v=="function"&&(im(e,n,v,r),I=e.memoizedState),(d=xs||bw(e,n,d,r,p,I,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,I,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,I,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),a.props=r,a.state=I,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return cm(t,e,n,r,i,s)}function cm(t,e,n,r,s,i){xE(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&pw(e,n,!1),qr(t,e,i);r=e.stateNode,bk.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=qo(e,t.child,null,i),e.child=qo(e,null,l,i)):Yt(t,e,l,i),e.memoizedState=r.state,s&&pw(e,n,!0),e.child}function wE(t){var e=t.stateNode;e.pendingContext?fw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fw(t,e.context,!1),Bg(t,e.containerInfo)}function Aw(t,e,n,r,s){return Wo(),Lg(s),e.flags|=256,Yt(t,e,n,r),e.child}var um={dehydrated:null,treeContext:null,retryLane:0};function dm(t){return{baseLanes:t,cachePool:null,transitions:null}}function _E(t,e,n){var r=e.pendingProps,s=Je.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),He(Je,s&1),t===null)return rm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=uh(a,r,0,null),t=Pi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=dm(n),e.memoizedState=um,t):Qg(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ek(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fs(l,i):(i=Pi(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?dm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=um,r}return i=t.child,t=i.sibling,r=Fs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qg(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function su(t,e,n,r){return r!==null&&Lg(r),qo(e,t.child,null,n),t=Qg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ek(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=qf(Error($(422))),su(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=uh({mode:"visible",children:r.children},s,0,null),i=Pi(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qo(e,t.child,null,a),e.child.memoizedState=dm(a),e.memoizedState=um,i);if(!(e.mode&1))return su(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=qf(i,r,void 0),su(t,e,a,r)}if(l=(a&t.childLanes)!==0,fn||l){if(r=Ct,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wr(t,s),er(r,t,s,-1))}return ty(),r=qf(Error($(421))),su(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ok.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bn=Ls(s.nextSibling),Tn=e,Ye=!0,Yn=null,t!==null&&(Rn[Pn++]=Or,Rn[Pn++]=Mr,Rn[Pn++]=Vi,Or=t.id,Mr=t.overflow,Vi=e),e=Qg(e,r.children),e.flags|=4096,e)}function kw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sm(t.return,e,n)}function Gf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kw(t,n,e);else if(t.tag===19)kw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&dd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&dd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gf(e,!0,n,null,i);break;case"together":Gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ui|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Fs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Nk(t,e,n){switch(e.tag){case 3:wE(e),Wo();break;case 5:K1(e);break;case 1:mn(e.type)&&id(e);break;case 4:Bg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;He(ld,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?_E(t,e,n):(He(Je,Je.current&1),t=qr(t,e,n),t!==null?t.sibling:null);He(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,vE(t,e,n)}return qr(t,e,n)}var EE,hm,NE,TE;EE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hm=function(){};NE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ii(yr.current);var i=null;switch(n){case"input":s=Dp(t,s),r=Dp(t,r),i=[];break;case"select":s=et({},s,{value:void 0}),r=et({},r,{value:void 0}),i=[];break;case"textarea":s=Mp(t,s),r=Mp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rd)}Fp(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Al.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Al.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ge("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};TE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ja(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Tk(t,e,n){var r=e.pendingProps;switch(Dg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return mn(e.type)&&sd(),Mt(e),null;case 3:return r=e.stateNode,Go(),Qe(pn),Qe(Wt),zg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yn!==null&&(wm(Yn),Yn=null))),hm(t,e),Mt(e),null;case 5:$g(e);var s=Ii($l.current);if(n=e.type,t!==null&&e.stateNode!=null)NE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Mt(e),null}if(t=Ii(yr.current),nu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hr]=e,r[Ul]=i,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(s=0;s<ol.length;s++)Ge(ol[s],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Ux(r,i),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ge("invalid",r);break;case"textarea":$x(r,i),Ge("invalid",r)}Fp(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&tu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&tu(r.textContent,l,t),s=["children",""+l]):Al.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Gc(r),Bx(r,i,!0);break;case"textarea":Gc(r),zx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[hr]=e,t[Ul]=r,EE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Up(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),s=r;break;case"iframe":case"object":case"embed":Ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<ol.length;s++)Ge(ol[s],t);s=r;break;case"source":Ge("error",t),s=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),s=r;break;case"details":Ge("toggle",t),s=r;break;case"input":Ux(t,r),s=Dp(t,r),Ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=et({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":$x(t,r),s=Mp(t,r),Ge("invalid",t);break;default:s=r}Fp(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?n1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&kl(t,c):typeof c=="number"&&kl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Al.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ge("scroll",t):c!=null&&xg(t,i,c,a))}switch(n){case"input":Gc(t),Bx(t,r,!1);break;case"textarea":Gc(t),zx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?jo(t,!!r.multiple,i,!1):r.defaultValue!=null&&jo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)TE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Ii($l.current),Ii(yr.current),nu(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(i=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:tu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Qe(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&bn!==null&&e.mode&1&&!(e.flags&128))z1(),Wo(),e.flags|=98560,i=!1;else if(i=nu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[hr]=e}else Wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Yn!==null&&(wm(Yn),Yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?wt===0&&(wt=3):ty())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Go(),hm(t,e),t===null&&Vl(e.stateNode.containerInfo),Mt(e),null;case 10:return Vg(e.type._context),Mt(e),null;case 17:return mn(e.type)&&sd(),Mt(e),null;case 19:if(Qe(Je),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ja(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=dd(t),a!==null){for(e.flags|=128,Ja(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Je,Je.current&1|2),e.child}t=t.sibling}i.tail!==null&&ct()>Qo&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304)}else{if(!r)if(t=dd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ja(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ye)return Mt(e),null}else 2*ct()-i.renderingStartTime>Qo&&n!==1073741824&&(e.flags|=128,r=!0,Ja(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ct(),e.sibling=null,n=Je.current,He(Je,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return ey(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Sk(t,e){switch(Dg(e),e.tag){case 1:return mn(e.type)&&sd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Go(),Qe(pn),Qe(Wt),zg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $g(e),null;case 13:if(Qe(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(Je),null;case 4:return Go(),null;case 10:return Vg(e.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var iu=!1,Ut=!1,Ck=typeof WeakSet=="function"?WeakSet:Set,te=null;function Co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function fm(t,e,n){try{n()}catch(r){rt(t,e,r)}}var Rw=!1;function Ik(t,e){if(Yp=ed,t=A1(),Rg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++d===s&&(l=a),p===i&&++h===r&&(c=a),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xp={focusedElem:t,selectionRange:n},ed=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var _=I.memoizedProps,S=I.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?_:Kn(e.type,_),S);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(R){rt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return I=Rw,Rw=!1,I}function wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&fm(e,n,i)}s=s.next}while(s!==r)}}function lh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SE(t){var e=t.alternate;e!==null&&(t.alternate=null,SE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[Ul],delete e[em],delete e[uk],delete e[dk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CE(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rd));else if(r!==4&&(t=t.child,t!==null))for(mm(t,e,n),t=t.sibling;t!==null;)mm(t,e,n),t=t.sibling}function gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gm(t,e,n),t=t.sibling;t!==null;)gm(t,e,n),t=t.sibling}var jt=null,Qn=!1;function ds(t,e,n){for(n=n.child;n!==null;)IE(t,e,n),n=n.sibling}function IE(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(eh,n)}catch{}switch(n.tag){case 5:Ut||Co(n,e);case 6:var r=jt,s=Qn;jt=null,ds(t,e,n),jt=r,Qn=s,jt!==null&&(Qn?(t=jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):jt.removeChild(n.stateNode));break;case 18:jt!==null&&(Qn?(t=jt,n=n.stateNode,t.nodeType===8?Uf(t.parentNode,n):t.nodeType===1&&Uf(t,n),Ll(t)):Uf(jt,n.stateNode));break;case 4:r=jt,s=Qn,jt=n.stateNode.containerInfo,Qn=!0,ds(t,e,n),jt=r,Qn=s;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&fm(n,e,a),s=s.next}while(s!==r)}ds(t,e,n);break;case 1:if(!Ut&&(Co(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){rt(n,e,l)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,ds(t,e,n),Ut=r):ds(t,e,n);break;default:ds(t,e,n)}}function Dw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ck),e.forEach(function(r){var s=Mk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,Qn=!1;break e;case 3:jt=l.stateNode.containerInfo,Qn=!0;break e;case 4:jt=l.stateNode.containerInfo,Qn=!0;break e}l=l.return}if(jt===null)throw Error($(160));IE(i,a,s),jt=null,Qn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){rt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jE(e,t),e=e.sibling}function jE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),cr(t),r&4){try{wl(3,t,t.return),lh(3,t)}catch(_){rt(t,t.return,_)}try{wl(5,t,t.return)}catch(_){rt(t,t.return,_)}}break;case 1:qn(e,t),cr(t),r&512&&n!==null&&Co(n,n.return);break;case 5:if(qn(e,t),cr(t),r&512&&n!==null&&Co(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(_){rt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Xb(s,i),Up(l,a);var d=Up(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?n1(s,f):h==="dangerouslySetInnerHTML"?e1(s,f):h==="children"?kl(s,f):xg(s,h,f,d)}switch(l){case"input":Lp(s,i);break;case"textarea":Jb(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?jo(s,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?jo(s,!!i.multiple,i.defaultValue,!0):jo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ul]=i}catch(_){rt(t,t.return,_)}}break;case 6:if(qn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){rt(t,t.return,_)}}break;case 3:if(qn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(e.containerInfo)}catch(_){rt(t,t.return,_)}break;case 4:qn(e,t),cr(t);break;case 13:qn(e,t),cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Jg=ct())),r&4&&Dw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||h,qn(e,t),Ut=d):qn(e,t),cr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(te=t,h=t.child;h!==null;){for(f=te=h;te!==null;){switch(p=te,v=p.child,p.tag){case 0:case 11:case 14:case 15:wl(4,p,p.return);break;case 1:Co(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(_){rt(r,n,_)}}break;case 5:Co(p,p.return);break;case 22:if(p.memoizedState!==null){Ow(f);continue}}v!==null?(v.return=p,te=v):Ow(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=t1("display",a))}catch(_){rt(t,t.return,_)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(_){rt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),cr(t),r&4&&Dw(t);break;case 21:break;default:qn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var i=Pw(t);gm(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Pw(t);mm(t,l,a);break;default:throw Error($(161))}}catch(c){rt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jk(t,e,n){te=t,AE(t)}function AE(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||iu;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=iu;var d=Ut;if(iu=a,(Ut=c)&&!d)for(te=s;te!==null;)a=te,c=a.child,a.tag===22&&a.memoizedState!==null?Mw(s):c!==null?(c.return=a,te=c):Mw(s);for(;i!==null;)te=i,AE(i),i=i.sibling;te=s,iu=l,Ut=d}Lw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):Lw(t)}}function Lw(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||lh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&xw(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xw(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ll(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Ut||e.flags&512&&pm(e)}catch(p){rt(e,e.return,p)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function Ow(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function Mw(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lh(4,e)}catch(c){rt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){rt(e,s,c)}}var i=e.return;try{pm(e)}catch(c){rt(e,i,c)}break;case 5:var a=e.return;try{pm(e)}catch(c){rt(e,a,c)}}}catch(c){rt(e,e.return,c)}if(e===t){te=null;break}var l=e.sibling;if(l!==null){l.return=e.return,te=l;break}te=e.return}}var Ak=Math.ceil,pd=ts.ReactCurrentDispatcher,Yg=ts.ReactCurrentOwner,On=ts.ReactCurrentBatchConfig,ke=0,Ct=null,mt=null,Pt=0,wn=0,Io=si(0),wt=0,ql=null,Ui=0,ch=0,Xg=0,_l=null,ln=null,Jg=0,Qo=1/0,Pr=null,md=!1,ym=null,Ms=null,ou=!1,Is=null,gd=0,bl=0,vm=null,Pu=-1,Du=0;function Zt(){return ke&6?ct():Pu!==-1?Pu:Pu=ct()}function Vs(t){return t.mode&1?ke&2&&Pt!==0?Pt&-Pt:fk.transition!==null?(Du===0&&(Du=p1()),Du):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:_1(t.type)),t):1}function er(t,e,n,r){if(50<bl)throw bl=0,vm=null,Error($(185));hc(t,n,r),(!(ke&2)||t!==Ct)&&(t===Ct&&(!(ke&2)&&(ch|=n),wt===4&&_s(t,Pt)),gn(t,r),n===1&&ke===0&&!(e.mode&1)&&(Qo=ct()+500,ih&&ii()))}function gn(t,e){var n=t.callbackNode;f2(t,e);var r=Zu(t,t===Ct?Pt:0);if(r===0)n!==null&&qx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qx(n),e===1)t.tag===0?hk(Vw.bind(null,t)):U1(Vw.bind(null,t)),lk(function(){!(ke&6)&&ii()}),n=null;else{switch(m1(r)){case 1:n=Ng;break;case 4:n=h1;break;case 16:n=Ju;break;case 536870912:n=f1;break;default:n=Ju}n=VE(n,kE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kE(t,e){if(Pu=-1,Du=0,ke&6)throw Error($(327));var n=t.callbackNode;if(Do()&&t.callbackNode!==n)return null;var r=Zu(t,t===Ct?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=yd(t,r);else{e=r;var s=ke;ke|=2;var i=PE();(Ct!==t||Pt!==e)&&(Pr=null,Qo=ct()+500,Ri(t,e));do try{Pk();break}catch(l){RE(t,l)}while(!0);Mg(),pd.current=i,ke=s,mt!==null?e=0:(Ct=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=Wp(t),s!==0&&(r=s,e=xm(t,s))),e===1)throw n=ql,Ri(t,0),_s(t,r),gn(t,ct()),n;if(e===6)_s(t,r);else{if(s=t.current.alternate,!(r&30)&&!kk(s)&&(e=yd(t,r),e===2&&(i=Wp(t),i!==0&&(r=i,e=xm(t,i))),e===1))throw n=ql,Ri(t,0),_s(t,r),gn(t,ct()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Ei(t,ln,Pr);break;case 3:if(_s(t,r),(r&130023424)===r&&(e=Jg+500-ct(),10<e)){if(Zu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Zp(Ei.bind(null,t,ln,Pr),e);break}Ei(t,ln,Pr);break;case 4:if(_s(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Zn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ak(r/1960))-r,10<r){t.timeoutHandle=Zp(Ei.bind(null,t,ln,Pr),r);break}Ei(t,ln,Pr);break;case 5:Ei(t,ln,Pr);break;default:throw Error($(329))}}}return gn(t,ct()),t.callbackNode===n?kE.bind(null,t):null}function xm(t,e){var n=_l;return t.current.memoizedState.isDehydrated&&(Ri(t,e).flags|=256),t=yd(t,e),t!==2&&(e=ln,ln=n,e!==null&&wm(e)),t}function wm(t){ln===null?ln=t:ln.push.apply(ln,t)}function kk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!nr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _s(t,e){for(e&=~Xg,e&=~ch,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function Vw(t){if(ke&6)throw Error($(327));Do();var e=Zu(t,0);if(!(e&1))return gn(t,ct()),null;var n=yd(t,e);if(t.tag!==0&&n===2){var r=Wp(t);r!==0&&(e=r,n=xm(t,r))}if(n===1)throw n=ql,Ri(t,0),_s(t,e),gn(t,ct()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ei(t,ln,Pr),gn(t,ct()),null}function Zg(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Qo=ct()+500,ih&&ii())}}function Bi(t){Is!==null&&Is.tag===0&&!(ke&6)&&Do();var e=ke;ke|=1;var n=On.transition,r=Oe;try{if(On.transition=null,Oe=1,t)return t()}finally{Oe=r,On.transition=n,ke=e,!(ke&6)&&ii()}}function ey(){wn=Io.current,Qe(Io)}function Ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ak(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(Dg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sd();break;case 3:Go(),Qe(pn),Qe(Wt),zg();break;case 5:$g(r);break;case 4:Go();break;case 13:Qe(Je);break;case 19:Qe(Je);break;case 10:Vg(r.type._context);break;case 22:case 23:ey()}n=n.return}if(Ct=t,mt=t=Fs(t.current,null),Pt=wn=e,wt=0,ql=null,Xg=ch=Ui=0,ln=_l=null,Ci!==null){for(e=0;e<Ci.length;e++)if(n=Ci[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Ci=null}return t}function RE(t,e){do{var n=mt;try{if(Mg(),Au.current=fd,hd){for(var r=Ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}hd=!1}if(Fi=0,Tt=xt=Ze=null,xl=!1,zl=0,Yg.current=null,n===null||n.return===null){wt=1,ql=e,mt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Tw(a);if(v!==null){v.flags&=-257,Sw(v,a,l,i,e),v.mode&1&&Nw(i,d,e),e=v,c=d;var I=e.updateQueue;if(I===null){var _=new Set;_.add(c),e.updateQueue=_}else I.add(c);break e}else{if(!(e&1)){Nw(i,d,e),ty();break e}c=Error($(426))}}else if(Ye&&l.mode&1){var S=Tw(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Sw(S,a,l,i,e),Lg(Ko(c,l));break e}}i=c=Ko(c,l),wt!==4&&(wt=2),_l===null?_l=[i]:_l.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=mE(i,c,e);vw(i,b);break e;case 1:l=c;var w=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ms===null||!Ms.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=gE(i,l,e);vw(i,R);break e}}i=i.return}while(i!==null)}LE(n)}catch(L){e=L,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function PE(){var t=pd.current;return pd.current=fd,t===null?fd:t}function ty(){(wt===0||wt===3||wt===2)&&(wt=4),Ct===null||!(Ui&268435455)&&!(ch&268435455)||_s(Ct,Pt)}function yd(t,e){var n=ke;ke|=2;var r=PE();(Ct!==t||Pt!==e)&&(Pr=null,Ri(t,e));do try{Rk();break}catch(s){RE(t,s)}while(!0);if(Mg(),ke=n,pd.current=r,mt!==null)throw Error($(261));return Ct=null,Pt=0,wt}function Rk(){for(;mt!==null;)DE(mt)}function Pk(){for(;mt!==null&&!s2();)DE(mt)}function DE(t){var e=ME(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?LE(t):mt=e,Yg.current=null}function LE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Sk(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,mt=null;return}}else if(n=Tk(n,e,wn),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);wt===0&&(wt=5)}function Ei(t,e,n){var r=Oe,s=On.transition;try{On.transition=null,Oe=1,Dk(t,e,n,r)}finally{On.transition=s,Oe=r}return null}function Dk(t,e,n,r){do Do();while(Is!==null);if(ke&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(p2(t,i),t===Ct&&(mt=Ct=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ou||(ou=!0,VE(Ju,function(){return Do(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var a=Oe;Oe=1;var l=ke;ke|=4,Yg.current=null,Ik(t,n),jE(n,t),ek(Xp),ed=!!Yp,Xp=Yp=null,t.current=n,jk(n),i2(),ke=l,Oe=a,On.transition=i}else t.current=n;if(ou&&(ou=!1,Is=t,gd=s),i=t.pendingLanes,i===0&&(Ms=null),l2(n.stateNode),gn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(md)throw md=!1,t=ym,ym=null,t;return gd&1&&t.tag!==0&&Do(),i=t.pendingLanes,i&1?t===vm?bl++:(bl=0,vm=t):bl=0,ii(),null}function Do(){if(Is!==null){var t=m1(gd),e=On.transition,n=Oe;try{if(On.transition=null,Oe=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,gd=0,ke&6)throw Error($(331));var s=ke;for(ke|=4,te=t.current;te!==null;){var i=te,a=i.child;if(te.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(te=d;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:wl(8,h,i)}var f=h.child;if(f!==null)f.return=h,te=f;else for(;te!==null;){h=te;var p=h.sibling,v=h.return;if(SE(h),h===d){te=null;break}if(p!==null){p.return=v,te=p;break}te=v}}}var I=i.alternate;if(I!==null){var _=I.child;if(_!==null){I.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}te=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,te=a;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wl(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,te=b;break e}te=i.return}}var w=t.current;for(te=w;te!==null;){a=te;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,te=C;else e:for(a=w;te!==null;){if(l=te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lh(9,l)}}catch(L){rt(l,l.return,L)}if(l===a){te=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,te=R;break e}te=l.return}}if(ke=s,ii(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(eh,t)}catch{}r=!0}return r}finally{Oe=n,On.transition=e}}return!1}function Fw(t,e,n){e=Ko(n,e),e=mE(t,e,1),t=Os(t,e,1),e=Zt(),t!==null&&(hc(t,1,e),gn(t,e))}function rt(t,e,n){if(t.tag===3)Fw(t,t,n);else for(;e!==null;){if(e.tag===3){Fw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ms===null||!Ms.has(r))){t=Ko(n,t),t=gE(e,t,1),e=Os(e,t,1),t=Zt(),e!==null&&(hc(e,1,t),gn(e,t));break}}e=e.return}}function Lk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>ct()-Jg?Ri(t,0):Xg|=n),gn(t,e)}function OE(t,e){e===0&&(t.mode&1?(e=Yc,Yc<<=1,!(Yc&130023424)&&(Yc=4194304)):e=1);var n=Zt();t=Wr(t,e),t!==null&&(hc(t,e,n),gn(t,n))}function Ok(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OE(t,n)}function Mk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),OE(t,n)}var ME;ME=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,Nk(t,e,n);fn=!!(t.flags&131072)}else fn=!1,Ye&&e.flags&1048576&&B1(e,ad,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var s=Ho(e,Wt.current);Po(e,n),s=Wg(null,e,r,t,s,n);var i=qg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,id(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ug(e),s.updater=ah,e.stateNode=s,s._reactInternals=e,om(e,r,t,n),e=cm(null,e,r,!0,i,n)):(e.tag=0,Ye&&i&&Pg(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Fk(r),t=Kn(r,t),s){case 0:e=lm(null,e,r,t,n);break e;case 1:e=jw(null,e,r,t,n);break e;case 11:e=Cw(null,e,r,t,n);break e;case 14:e=Iw(null,e,r,Kn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),lm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),jw(t,e,r,s,n);case 3:e:{if(wE(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,G1(t,e),ud(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ko(Error($(423)),e),e=Aw(t,e,r,n,s);break e}else if(r!==s){s=Ko(Error($(424)),e),e=Aw(t,e,r,n,s);break e}else for(bn=Ls(e.stateNode.containerInfo.firstChild),Tn=e,Ye=!0,Yn=null,n=W1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wo(),r===s){e=qr(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return K1(e),t===null&&rm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Jp(r,s)?a=null:i!==null&&Jp(r,i)&&(e.flags|=32),xE(t,e),Yt(t,e,a,n),e.child;case 6:return t===null&&rm(e),null;case 13:return _E(t,e,n);case 4:return Bg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qo(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Cw(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,He(ld,r._currentValue),r._currentValue=a,i!==null)if(nr(i.value,a)){if(i.children===s.children&&!pn.current){e=qr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Br(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),sm(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error($(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),sm(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Po(e,n),s=Fn(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),Iw(t,e,r,s,n);case 15:return yE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Ru(t,e),e.tag=1,mn(r)?(t=!0,id(e)):t=!1,Po(e,n),pE(e,r,s),om(e,r,s,n),cm(null,e,r,!0,t,n);case 19:return bE(t,e,n);case 22:return vE(t,e,n)}throw Error($(156,e.tag))};function VE(t,e){return d1(t,e)}function Vk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new Vk(t,e,n,r)}function ny(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fk(t){if(typeof t=="function")return ny(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_g)return 11;if(t===bg)return 14}return 2}function Fs(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")ny(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case vo:return Pi(n.children,s,i,e);case wg:a=8,s|=8;break;case Ap:return t=Ln(12,n,e,s|2),t.elementType=Ap,t.lanes=i,t;case kp:return t=Ln(13,n,e,s),t.elementType=kp,t.lanes=i,t;case Rp:return t=Ln(19,n,e,s),t.elementType=Rp,t.lanes=i,t;case Kb:return uh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qb:a=10;break e;case Gb:a=9;break e;case _g:a=11;break e;case bg:a=14;break e;case vs:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Ln(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Pi(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function uh(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=Kb,t.lanes=n,t.stateNode={isHidden:!1},t}function Kf(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function Qf(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Uk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jf(0),this.expirationTimes=jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ry(t,e,n,r,s,i,a,l,c){return t=new Uk(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ug(i),t}function Bk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FE(t){if(!t)return Gs;t=t._reactInternals;e:{if(Zi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(mn(n))return F1(t,n,e)}return e}function UE(t,e,n,r,s,i,a,l,c){return t=ry(n,r,!0,t,s,i,a,l,c),t.context=FE(null),n=t.current,r=Zt(),s=Vs(n),i=Br(r,s),i.callback=e??null,Os(n,i,s),t.current.lanes=s,hc(t,s,r),gn(t,r),t}function dh(t,e,n,r){var s=e.current,i=Zt(),a=Vs(s);return n=FE(n),e.context===null?e.context=n:e.pendingContext=n,e=Br(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Os(s,e,a),t!==null&&(er(t,s,a,i),ju(t,s,a)),a}function vd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sy(t,e){Uw(t,e),(t=t.alternate)&&Uw(t,e)}function $k(){return null}var BE=typeof reportError=="function"?reportError:function(t){console.error(t)};function iy(t){this._internalRoot=t}hh.prototype.render=iy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));dh(t,e,null,null)};hh.prototype.unmount=iy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bi(function(){dh(null,t,null,null)}),e[Hr]=null}};function hh(t){this._internalRoot=t}hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=v1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ws.length&&e!==0&&e<ws[n].priority;n++);ws.splice(n,0,t),n===0&&w1(t)}};function oy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bw(){}function zk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=vd(a);i.call(d)}}var a=UE(e,r,t,0,null,!1,!1,"",Bw);return t._reactRootContainer=a,t[Hr]=a.current,Vl(t.nodeType===8?t.parentNode:t),Bi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=vd(c);l.call(d)}}var c=ry(t,0,!1,null,null,!1,!1,"",Bw);return t._reactRootContainer=c,t[Hr]=c.current,Vl(t.nodeType===8?t.parentNode:t),Bi(function(){dh(e,c,n,r)}),c}function ph(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=vd(a);l.call(c)}}dh(e,a,t,s)}else a=zk(n,e,t,s,r);return vd(a)}g1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=il(e.pendingLanes);n!==0&&(Tg(e,n|1),gn(e,ct()),!(ke&6)&&(Qo=ct()+500,ii()))}break;case 13:Bi(function(){var r=Wr(t,1);if(r!==null){var s=Zt();er(r,t,1,s)}}),sy(t,1)}};Sg=function(t){if(t.tag===13){var e=Wr(t,134217728);if(e!==null){var n=Zt();er(e,t,134217728,n)}sy(t,134217728)}};y1=function(t){if(t.tag===13){var e=Vs(t),n=Wr(t,e);if(n!==null){var r=Zt();er(n,t,e,r)}sy(t,e)}};v1=function(){return Oe};x1=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};$p=function(t,e,n){switch(e){case"input":if(Lp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sh(r);if(!s)throw Error($(90));Yb(r),Lp(r,s)}}}break;case"textarea":Jb(t,n);break;case"select":e=n.value,e!=null&&jo(t,!!n.multiple,e,!1)}};i1=Zg;o1=Bi;var Hk={usingClientEntryPoint:!1,Events:[pc,bo,sh,r1,s1,Zg]},Za={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wk={bundleType:Za.bundleType,version:Za.version,rendererPackageName:Za.rendererPackageName,rendererConfig:Za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c1(t),t===null?null:t.stateNode},findFiberByHostInstance:Za.findFiberByHostInstance||$k,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{eh=au.inject(Wk),gr=au}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hk;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oy(e))throw Error($(200));return Bk(t,e,null,n)};An.createRoot=function(t,e){if(!oy(t))throw Error($(299));var n=!1,r="",s=BE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ry(t,1,!1,null,null,n,!1,r,s),t[Hr]=e.current,Vl(t.nodeType===8?t.parentNode:t),new iy(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=c1(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return Bi(t)};An.hydrate=function(t,e,n){if(!fh(e))throw Error($(200));return ph(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!oy(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=BE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=UE(e,null,t,1,n??null,s,!1,i,a),t[Hr]=e.current,Vl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hh(e)};An.render=function(t,e,n){if(!fh(e))throw Error($(200));return ph(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!fh(t))throw Error($(40));return t._reactRootContainer?(Bi(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[Hr]=null})}),!0):!1};An.unstable_batchedUpdates=Zg;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fh(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ph(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(t){console.error(t)}}$E(),$b.exports=An;var pa=$b.exports;const qk=Ab(pa);var zE,$w=pa;zE=$w.createRoot,$w.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gl.apply(this,arguments)}var js;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(js||(js={}));const zw="popstate";function Gk(t){t===void 0&&(t={});function e(s,i){let{pathname:a="/",search:l="",hash:c=""}=eo(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),_m("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");l=d===-1?c:c.slice(0,d)}return l+"#"+(typeof i=="string"?i:xd(i))}function r(s,i){mh(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Qk(e,n,r,t)}function ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mh(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kk(){return Math.random().toString(36).substr(2,8)}function Hw(t,e){return{usr:t.state,key:t.key,idx:e}}function _m(t,e,n,r){return n===void 0&&(n=null),Gl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?eo(e):e,{state:n,key:e&&e.key||r||Kk()})}function xd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function eo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Qk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=js.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Gl({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=js.Pop;let S=h(),b=S==null?null:S-d;d=S,c&&c({action:l,location:_.location,delta:b})}function p(S,b){l=js.Push;let w=_m(_.location,S,b);n&&n(w,S),d=h()+1;let C=Hw(w,d),R=_.createHref(w);try{a.pushState(C,"",R)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(R)}i&&c&&c({action:l,location:_.location,delta:1})}function v(S,b){l=js.Replace;let w=_m(_.location,S,b);n&&n(w,S),d=h();let C=Hw(w,d),R=_.createHref(w);a.replaceState(C,"",R),i&&c&&c({action:l,location:_.location,delta:0})}function I(S){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof S=="string"?S:xd(S);return w=w.replace(/ $/,"%20"),ut(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let _={get action(){return l},get location(){return t(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(zw,f),c=S,()=>{s.removeEventListener(zw,f),c=null}},createHref(S){return e(s,S)},createURL:I,encodeLocation(S){let b=I(S);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:v,go(S){return a.go(S)}};return _}var Ww;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ww||(Ww={}));function Yk(t,e,n){return n===void 0&&(n="/"),Xk(t,e,n)}function Xk(t,e,n,r){let s=typeof e=="string"?eo(e):e,i=ay(s.pathname||"/",n);if(i==null)return null;let a=HE(t);Jk(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=uR(i);l=aR(a[c],d)}return l}function HE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(ut(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Us([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(ut(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),HE(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:iR(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of WE(i.path))s(i,a,c)}),e}function WE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=WE(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Jk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zk=/^:[\w-]+$/,eR=3,tR=2,nR=1,rR=10,sR=-2,qw=t=>t==="*";function iR(t,e){let n=t.split("/"),r=n.length;return n.some(qw)&&(r+=sR),e&&(r+=tR),n.filter(s=>!qw(s)).reduce((s,i)=>s+(Zk.test(i)?eR:i===""?nR:rR),r)}function oR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function aR(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=lR({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Us([i,f.pathname]),pathnameBase:mR(Us([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Us([i,f.pathnameBase]))}return a}function lR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let _=l[f]||"";a=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const I=l[f];return v&&!I?d[p]=void 0:d[p]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function cR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function uR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ay(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const dR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hR=t=>dR.test(t);function fR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?eo(t):t,i;if(n)if(hR(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),mh(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=Gw(n.substring(1),"/"):i=Gw(n,e)}else i=e;return{pathname:i,search:gR(r),hash:yR(s)}}function Gw(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Yf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function pR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ly(t,e){let n=pR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cy(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=eo(t):(s=Gl({},t),ut(!s.pathname||!s.pathname.includes("?"),Yf("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),Yf("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),Yf("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=fR(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Us=t=>t.join("/").replace(/\/\/+/g,"/"),mR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,yR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qE=["post","put","patch","delete"];new Set(qE);const xR=["get",...qE];new Set(xR);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kl.apply(this,arguments)}const uy=g.createContext(null),wR=g.createContext(null),oi=g.createContext(null),gh=g.createContext(null),ns=g.createContext({outlet:null,matches:[],isDataRoute:!1}),GE=g.createContext(null);function _R(t,e){let{relative:n}=e===void 0?{}:e;ma()||ut(!1);let{basename:r,navigator:s}=g.useContext(oi),{hash:i,pathname:a,search:l}=QE(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Us([r,a])),s.createHref({pathname:c,search:l,hash:i})}function ma(){return g.useContext(gh)!=null}function to(){return ma()||ut(!1),g.useContext(gh).location}function KE(t){g.useContext(oi).static||g.useLayoutEffect(t)}function zn(){let{isDataRoute:t}=g.useContext(ns);return t?LR():bR()}function bR(){ma()||ut(!1);let t=g.useContext(uy),{basename:e,future:n,navigator:r}=g.useContext(oi),{matches:s}=g.useContext(ns),{pathname:i}=to(),a=JSON.stringify(ly(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return KE(()=>{l.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=cy(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Us([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}function ER(){let{matches:t}=g.useContext(ns),e=t[t.length-1];return e?e.params:{}}function QE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(oi),{matches:s}=g.useContext(ns),{pathname:i}=to(),a=JSON.stringify(ly(s,r.v7_relativeSplatPath));return g.useMemo(()=>cy(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function NR(t,e){return TR(t,e)}function TR(t,e,n,r){ma()||ut(!1);let{navigator:s}=g.useContext(oi),{matches:i}=g.useContext(ns),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=to(),h;if(e){var f;let S=typeof e=="string"?eo(e):e;c==="/"||(f=S.pathname)!=null&&f.startsWith(c)||ut(!1),h=S}else h=d;let p=h.pathname||"/",v=p;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let I=Yk(t,{pathname:v}),_=AR(I&&I.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Us([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Us([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&_?g.createElement(gh.Provider,{value:{location:Kl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:js.Pop}},_):_}function SR(){let t=DR(),e=vR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const CR=g.createElement(SR,null);class IR extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(ns.Provider,{value:this.props.routeContext},g.createElement(GE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jR(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(uy);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(ns.Provider,{value:e},r)}function AR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||ut(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:v}=n,I=f.route.loader&&p[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||I){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let v,I=!1,_=null,S=null;n&&(v=l&&f.route.id?l[f.route.id]:void 0,_=f.route.errorElement||CR,c&&(d<0&&p===0?(OR("route-fallback"),I=!0,S=null):d===p&&(I=!0,S=f.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,p+1)),w=()=>{let C;return v?C=_:I?C=S:f.route.Component?C=g.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=h,g.createElement(jR,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:C})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(IR,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var YE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YE||{}),XE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XE||{});function kR(t){let e=g.useContext(uy);return e||ut(!1),e}function RR(t){let e=g.useContext(wR);return e||ut(!1),e}function PR(t){let e=g.useContext(ns);return e||ut(!1),e}function JE(t){let e=PR(),n=e.matches[e.matches.length-1];return n.route.id||ut(!1),n.route.id}function DR(){var t;let e=g.useContext(GE),n=RR(),r=JE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function LR(){let{router:t}=kR(YE.UseNavigateStable),e=JE(XE.UseNavigateStable),n=g.useRef(!1);return KE(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Kl({fromRouteId:e},i)))},[t,e])}const Kw={};function OR(t,e,n){Kw[t]||(Kw[t]=!0)}function MR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function dy(t){let{to:e,replace:n,state:r,relative:s}=t;ma()||ut(!1);let{future:i,static:a}=g.useContext(oi),{matches:l}=g.useContext(ns),{pathname:c}=to(),d=zn(),h=cy(e,ly(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function on(t){ut(!1)}function VR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=js.Pop,navigator:i,static:a=!1,future:l}=t;ma()&&ut(!1);let c=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:i,static:a,future:Kl({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=eo(r));let{pathname:h="/",search:f="",hash:p="",state:v=null,key:I="default"}=r,_=g.useMemo(()=>{let S=ay(h,c);return S==null?null:{location:{pathname:S,search:f,hash:p,state:v,key:I},navigationType:s}},[c,h,f,p,v,I,s]);return _==null?null:g.createElement(oi.Provider,{value:d},g.createElement(gh.Provider,{children:n,value:_}))}function FR(t){let{children:e,location:n}=t;return NR(bm(e),n)}new Promise(()=>{});function bm(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,bm(r.props.children,i));return}r.type!==on&&ut(!1),!r.props.index||!r.props.children||ut(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=bm(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Em.apply(this,arguments)}function UR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function BR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $R(t,e){return t.button===0&&(!e||e==="_self")&&!BR(t)}const zR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HR="6";try{window.__reactRouterVersion=HR}catch{}const WR="startTransition",Qw=Zd[WR];function qR(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=Gk({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=g.useCallback(f=>{d&&Qw?Qw(()=>c(f)):c(f)},[c,d]);return g.useLayoutEffect(()=>a.listen(h),[a,h]),g.useEffect(()=>MR(r),[r]),g.createElement(VR,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const GR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fe=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=UR(e,zR),{basename:v}=g.useContext(oi),I,_=!1;if(typeof d=="string"&&KR.test(d)&&(I=d,GR))try{let C=new URL(window.location.href),R=d.startsWith("//")?new URL(C.protocol+d):new URL(d),L=ay(R.pathname,v);R.origin===C.origin&&L!=null?d=L+R.search+R.hash:_=!0}catch{}let S=_R(d,{relative:s}),b=QR(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function w(C){r&&r(C),C.defaultPrevented||b(C)}return g.createElement("a",Em({},p,{href:I||S,onClick:_||i?r:w,ref:n,target:c}))});var Yw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Yw||(Yw={}));var Xw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Xw||(Xw={}));function QR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=zn(),d=to(),h=QE(t,{relative:a});return g.useCallback(f=>{if($R(f,n)){f.preventDefault();let p=r!==void 0?r:xd(d)===xd(h);c(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,r,s,n,t,i,a,l])}const YR=()=>{};var Jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},eN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,v=d&63;c||(v=64,a||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new JR;const p=i<<2|l>>4;if(r.push(p),d!==64){const v=l<<4&240|d>>2;if(r.push(v),f!==64){const I=d<<6&192|f;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZR=function(t){const e=ZE(t);return eN.encodeByteArray(e,!0)},wd=function(t){return ZR(t).replace(/\./g,"")},tN=function(t){try{return eN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=()=>eP().__FIREBASE_DEFAULTS__,nP=()=>{if(typeof process>"u"||typeof Jw>"u")return;const t=Jw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tN(t[1]);return e&&JSON.parse(e)},yh=()=>{try{return YR()||tP()||nP()||rP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nN=t=>{var e,n;return(n=(e=yh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rN=t=>{const e=nN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sN=()=>{var t;return(t=yh())==null?void 0:t.config},iN=t=>{var e;return(e=yh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[wd(JSON.stringify(n)),wd(JSON.stringify(a)),""].join(".")}const El={};function iP(){const t={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?t.emulator.push(e):t.prod.push(e);return t}function oP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zw=!1;function fy(t,e){if(typeof window>"u"||typeof document>"u"||!ai(window.location.host)||El[t]===e||El[t]||Zw)return;El[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=iP().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Zw=!0,a()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=oP(r),v=n("text"),I=document.getElementById(v)||document.createElement("span"),_=n("learnmore"),S=document.getElementById(_)||document.createElement("a"),b=n("preprendIcon"),w=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const C=p.element;l(C),h(S,_);const R=d();c(w,b),C.append(w,I,S,R),document.body.appendChild(C)}i?(I.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function lP(){var e;const t=(e=yh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dP(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hP(){return!lP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lN(){try{return typeof indexedDB=="object"}catch{return!1}}function cN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function fP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pP,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,no.prototype.create)}}class no{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?mP(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Hn(s,l,r)}}function mP(t,e){return t.replace(gP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const gP=/\{\$([^}]+)}/g;function yP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(e0(i)&&e0(a)){if(!Gr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function e0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function al(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ll(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vP(t,e){const n=new xP(t,e);return n.subscribe.bind(n)}class xP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Xf),s.error===void 0&&(s.error=Xf),s.complete===void 0&&(s.complete=Xf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=1e3,bP=2,EP=4*60*60*1e3,NP=.5;function t0(t,e=_P,n=bP){const r=e*Math.pow(n,t),s=Math.round(NP*r*(Math.random()-.5)*2);return Math.min(EP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CP(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SP(t){return t===Ni?void 0:t}function CP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const jP={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},AP=Ee.INFO,kP={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},RP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vh{constructor(e){this.name=e,this._logLevel=AP,this._logHandler=RP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const PP=(t,e)=>e.some(n=>t instanceof n);let n0,r0;function DP(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LP(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uN=new WeakMap,Nm=new WeakMap,dN=new WeakMap,Jf=new WeakMap,py=new WeakMap;function OP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Bs(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uN.set(n,t)}).catch(()=>{}),py.set(e,t),e}function MP(t){if(Nm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Nm.set(t,e)}let Tm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VP(t){Tm=t(Tm)}function FP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zf(this),e,...n);return dN.set(r,e.sort?e.sort():[e]),Bs(r)}:LP().includes(t)?function(...e){return t.apply(Zf(this),e),Bs(uN.get(this))}:function(...e){return Bs(t.apply(Zf(this),e))}}function UP(t){return typeof t=="function"?FP(t):(t instanceof IDBTransaction&&MP(t),PP(t,DP())?new Proxy(t,Tm):t)}function Bs(t){if(t instanceof IDBRequest)return OP(t);if(Jf.has(t))return Jf.get(t);const e=UP(t);return e!==t&&(Jf.set(t,e),py.set(e,t)),e}const Zf=t=>py.get(t);function hN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Bs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Bs(a.result),c.oldVersion,c.newVersion,Bs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const BP=["get","getKey","getAll","getAllKeys","count"],$P=["put","add","delete","clear"],ep=new Map;function s0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ep.get(e))return ep.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$P.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BP.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return ep.set(e,i),i}VP(t=>({...t,get:(e,n,r)=>s0(e,n)||t.get(e,n,r),has:(e,n)=>!!s0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sm="@firebase/app",i0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new vh("@firebase/app"),WP="@firebase/app-compat",qP="@firebase/analytics-compat",GP="@firebase/analytics",KP="@firebase/app-check-compat",QP="@firebase/app-check",YP="@firebase/auth",XP="@firebase/auth-compat",JP="@firebase/database",ZP="@firebase/data-connect",e4="@firebase/database-compat",t4="@firebase/functions",n4="@firebase/functions-compat",r4="@firebase/installations",s4="@firebase/installations-compat",i4="@firebase/messaging",o4="@firebase/messaging-compat",a4="@firebase/performance",l4="@firebase/performance-compat",c4="@firebase/remote-config",u4="@firebase/remote-config-compat",d4="@firebase/storage",h4="@firebase/storage-compat",f4="@firebase/firestore",p4="@firebase/ai",m4="@firebase/firestore-compat",g4="firebase",y4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="[DEFAULT]",v4={[Sm]:"fire-core",[WP]:"fire-core-compat",[GP]:"fire-analytics",[qP]:"fire-analytics-compat",[QP]:"fire-app-check",[KP]:"fire-app-check-compat",[YP]:"fire-auth",[XP]:"fire-auth-compat",[JP]:"fire-rtdb",[ZP]:"fire-data-connect",[e4]:"fire-rtdb-compat",[t4]:"fire-fn",[n4]:"fire-fn-compat",[r4]:"fire-iid",[s4]:"fire-iid-compat",[i4]:"fire-fcm",[o4]:"fire-fcm-compat",[a4]:"fire-perf",[l4]:"fire-perf-compat",[c4]:"fire-rc",[u4]:"fire-rc-compat",[d4]:"fire-gcs",[h4]:"fire-gcs-compat",[f4]:"fire-fst",[m4]:"fire-fst-compat",[p4]:"fire-vertex","fire-js":"fire-js",[g4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,x4=new Map,Im=new Map;function o0(t,e){try{t.container.addComponent(e)}catch(n){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rr(t){const e=t.name;if(Im.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;Im.set(e,t);for(const n of _d.values())o0(n,t);for(const n of x4.values())o0(n,t);return!0}function li(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function un(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new no("app","Firebase",w4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=y4;function fN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Cm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $s.create("bad-app-name",{appName:String(s)});if(n||(n=sN()),!n)throw $s.create("no-options");const i=_d.get(s);if(i){if(Gr(n,i.options)&&Gr(r,i.config))return i;throw $s.create("duplicate-app",{appName:s})}const a=new IP(s);for(const c of Im.values())a.addComponent(c);const l=new _4(n,r,a);return _d.set(s,l),l}function xh(t=Cm){const e=_d.get(t);if(!e&&t===Cm&&sN())return fN();if(!e)throw $s.create("no-app",{appName:t});return e}function yn(t,e,n){let r=v4[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(a.join(" "));return}rr(new Bn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4="firebase-heartbeat-database",E4=1,Ql="firebase-heartbeat-store";let tp=null;function pN(){return tp||(tp=hN(b4,E4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ql)}catch(n){console.warn(n)}}}}).catch(t=>{throw $s.create("idb-open",{originalErrorMessage:t.message})})),tp}async function N4(t){try{const n=(await pN()).transaction(Ql),r=await n.objectStore(Ql).get(mN(t));return await n.done,r}catch(e){if(e instanceof Hn)Kr.warn(e.message);else{const n=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kr.warn(n.message)}}}async function a0(t,e){try{const r=(await pN()).transaction(Ql,"readwrite");await r.objectStore(Ql).put(e,mN(t)),await r.done}catch(n){if(n instanceof Hn)Kr.warn(n.message);else{const r=$s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kr.warn(r.message)}}}function mN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=1024,S4=30;class C4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new j4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=l0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>S4){const a=A4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=l0(),{heartbeatsToSend:r,unsentEntries:s}=I4(this._heartbeatsCache.heartbeats),i=wd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kr.warn(n),""}}}function l0(){return new Date().toISOString().substring(0,10)}function I4(t,e=T4){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),c0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),c0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class j4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lN()?cN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await N4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return a0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function c0(t){return wd(JSON.stringify({version:2,heartbeats:t})).length}function A4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){rr(new Bn("platform-logger",e=>new zP(e),"PRIVATE")),rr(new Bn("heartbeat",e=>new C4(e),"PRIVATE")),yn(Sm,i0,t),yn(Sm,i0,"esm2020"),yn("fire-js","")}k4("");function gN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R4=gN,yN=new no("auth","Firebase",gN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new vh("@firebase/auth");function P4(t,...e){bd.logLevel<=Ee.WARN&&bd.warn(`Auth (${ro}): ${t}`,...e)}function Ou(t,...e){bd.logLevel<=Ee.ERROR&&bd.error(`Auth (${ro}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw gy(t,...e)}function tr(t,...e){return gy(t,...e)}function my(t,e,n){const r={...R4(),[e]:n};return new no("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return my(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function D4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$n(t,"argument-error"),my(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yN.create(t,...e)}function de(t,e,...n){if(!t)throw gy(e,...n)}function Vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ou(e),new Error(e)}function Qr(t,e){t||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function L4(){return u0()==="http:"||u0()==="https:"}function u0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L4()||aN()||"connection"in navigator)?navigator.onLine:!0}function M4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qr(n>e,"Short delay should be less than long delay!"),this.isMobile=aP()||uP()}get(){return O4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(t,e){Qr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U4=new yc(3e4,6e4);function ci(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function rs(t,e,n,r,s={}){return xN(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=gc({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return cP()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ai(t.emulatorConfig.host)&&(d.credentials="include"),vN.fetch()(await wN(t,t.config.apiHost,n,l),d)})}async function xN(t,e,n){t._canInitEmulator=!1;const r={...V4,...e};try{const s=new $4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw lu(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw lu(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw lu(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw lu(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw my(t,h,d);$n(t,h)}}catch(s){if(s instanceof Hn)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function vc(t,e,n,r,s={}){const i=await rs(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wN(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?yy(t.config,s):`${t.config.apiScheme}://${s}`;return F4.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function B4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tr(this.auth,"network-request-failed")),U4.get())})}}function lu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tr(t,e,r);return s.customData._tokenResponse=n,s}function d0(t){return t!==void 0&&t.enterprise!==void 0}class z4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H4(t,e){return rs(t,"GET","/v2/recaptchaConfig",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(t,e){return rs(t,"POST","/v1/accounts:delete",e)}async function Ed(t,e){return rs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q4(t,e=!1){const n=Be(t),r=await n.getIdToken(e),s=vy(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Nl(np(s.auth_time)),issuedAtTime:Nl(np(s.iat)),expirationTime:Nl(np(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function np(t){return Number(t)*1e3}function vy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const s=tN(n);return s?JSON.parse(s):(Ou("Failed to decode base64 JWT payload"),null)}catch(s){return Ou("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function h0(t){const e=vy(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&G4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Yo(t,Ed(e,{idToken:n}));de(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?_N(s.providerUserInfo):[],a=Y4(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Am(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Q4(t){const e=Be(t);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function _N(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(t,e){const n=await xN(t,{},async()=>{const r=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await wN(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ai(t.emulatorConfig.host)&&(c.credentials="include"),vN.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J4(t,e){return rs(t,"POST","/v2/accounts:revokeToken",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){de(e.length!==0,"internal-error");const n=h0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await X4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Lo;return r&&(de(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new K4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Am(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q4(this,e)}reload(){return Q4(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await Yo(this,W4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:v,providerData:I,stsTokenManager:_}=n;de(f&&_,e,"internal-error");const S=Lo.fromJSON(this.name,_);de(typeof f=="string",e,"internal-error"),hs(r,e.name),hs(s,e.name),de(typeof p=="boolean",e,"internal-error"),de(typeof v=="boolean",e,"internal-error"),hs(i,e.name),hs(a,e.name),hs(l,e.name),hs(c,e.name),hs(d,e.name),hs(h,e.name);const b=new Xn({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:S,createdAt:d,lastLoginAt:h});return I&&Array.isArray(I)&&(b.providerData=I.map(w=>({...w}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new Lo;s.updateFromServerResponse(n);const i=new Xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Nd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];de(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?_N(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Lo;l.updateFromIdToken(r);const c=new Xn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Am(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function Fr(t){Qr(t instanceof Function,"Expected a class definition");let e=f0.get(t);return e?(Qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,f0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bN.type="NONE";const p0=bN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t,e,n){return`firebase:${t}:${e}:${n}`}class Oo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Mu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Mu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ed(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oo(Fr(p0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fr(p0);const a=Mu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const p=await Ed(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Xn._fromGetAccountInfoResponse(e,p,h)}else f=Xn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Oo(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new Oo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IN(e))return"Blackberry";if(jN(e))return"Webos";if(NN(e))return"Safari";if((e.includes("chrome/")||TN(e))&&!e.includes("edge/"))return"Chrome";if(CN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EN(t=qt()){return/firefox\//i.test(t)}function NN(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TN(t=qt()){return/crios\//i.test(t)}function SN(t=qt()){return/iemobile/i.test(t)}function CN(t=qt()){return/android/i.test(t)}function IN(t=qt()){return/blackberry/i.test(t)}function jN(t=qt()){return/webos/i.test(t)}function xy(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Z4(t=qt()){var e;return xy(t)&&!!((e=window.navigator)!=null&&e.standalone)}function eD(){return dP()&&document.documentMode===10}function AN(t=qt()){return xy(t)||CN(t)||jN(t)||IN(t)||/windows phone/i.test(t)||SN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t,e=[]){let n;switch(t){case"Browser":n=m0(qt());break;case"Worker":n=`${m0(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ro}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e={}){return rs(t,"GET","/v2/passwordPolicy",ci(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=6;class sD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new tD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ed(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(un(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=M4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject($r(this));const n=e?Be(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nD(this),n=new sD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new no("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fr(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&P4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ui(t){return Be(t)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=vP(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oD(t){wh=t}function RN(t){return wh.loadJS(t)}function aD(){return wh.recaptchaEnterpriseScript}function lD(){return wh.gapiScript}function cD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class uD{constructor(){this.enterprise=new dD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hD="recaptcha-enterprise",PN="NO_RECAPTCHA";class fD{constructor(e){this.type=hD,this.auth=ui(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{H4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new z4(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;d0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(PN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uD().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&d0(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=aD();c.length!==0&&(c+=l),RN(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function y0(t,e,n,r=!1,s=!1){const i=new fD(t);let a;if(s)a=PN;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function km(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await y0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await y0(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){const n=li(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Gr(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function mD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gD(t,e,n){const r=ui(t);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=DN(e),{host:a,port:l}=yD(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(Gr(d,r.config.emulator)&&Gr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ai(a)?(hy(`${i}//${a}${c}`),fy("Auth",!0)):vD()}function DN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yD(t){const e=DN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:v0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:v0(a)}}}function v0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,n){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function xD(t,e){return rs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return vc(t,"POST","/v1/accounts:signInWithPassword",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e){return vc(t,"POST","/v1/accounts:signInWithEmailLink",ci(t,e))}async function bD(t,e){return vc(t,"POST","/v1/accounts:signInWithEmailLink",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends wy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Yl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return km(e,n,"signInWithPassword",wD);case"emailLink":return _D(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return km(e,r,"signUpPassword",xD);case"emailLink":return bD(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(t,e){return vc(t,"POST","/v1/accounts:signInWithIdp",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="http://localhost";class $i extends wy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new $i(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mo(e,n)}buildRequest(){const e={requestUri:ED,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TD(t){const e=al(ll(t)).link,n=e?al(ll(e)).deep_link_id:null,r=al(ll(t)).deep_link_id;return(r?al(ll(r)).link:null)||r||n||e||t}class _y{constructor(e){const n=al(ll(e)),r=n.apiKey??null,s=n.oobCode??null,i=ND(n.mode??null);de(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TD(e);try{return new _y(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(){this.providerId=ga.PROVIDER_ID}static credential(e,n){return Yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_y.parseLink(n);return de(r,"argument-error"),Yl._fromEmailAndCode(e,r.code,r.tenantId)}}ga.PROVIDER_ID="password";ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends by{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends xc{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $i._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Es.credential(n,r)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends xc{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends xc{constructor(){super("twitter.com")}static credential(e,n){return $i._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e){return vc(t,"POST","/v1/accounts:signUp",ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xn._fromIdTokenResponse(e,r,s),a=x0(r);return new zi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=x0(r);return new zi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function x0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td extends Hn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Td(e,n,r,s)}}function LN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(t,i,e,r):i})}async function CD(t,e,n=!1){const r=await Yo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e,n=!1){const{auth:r}=t;if(un(r.app))return Promise.reject($r(r));const s="reauthenticate";try{const i=await Yo(t,LN(r,s,e,t),n);de(i.idToken,r,"internal-error");const a=vy(i.idToken);de(a,r,"internal-error");const{sub:l}=a;return de(t.uid===l,r,"user-mismatch"),zi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e,n=!1){if(un(t.app))return Promise.reject($r(t));const r="signIn",s=await LN(t,r,e),i=await zi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function jD(t,e){return ON(ui(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t){const e=ui(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AD(t,e,n){if(un(t.app))return Promise.reject($r(t));const r=ui(t),a=await km(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&MN(t),c}),l=await zi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function kD(t,e,n){return un(t.app)?Promise.reject($r(t)):jD(Be(t),ga.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e){return rs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Be(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Yo(r,RD(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function PD(t,e,n,r){return Be(t).onIdTokenChanged(e,n,r)}function DD(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function LD(t,e,n,r){return Be(t).onAuthStateChanged(e,n,r)}function OD(t){return Be(t).signOut()}const Sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sd,"1"),this.storage.removeItem(Sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=1e3,VD=10;class UN extends FN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);eD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,VD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},MD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UN.type="LOCAL";const FD=UN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN extends FN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BN.type="SESSION";const $N=BN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await UD(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Ey("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function $D(t){vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function zD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function WD(){return zN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebaseLocalStorageDb",qD=1,Cd="firebaseLocalStorage",WN="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bh(t,e){return t.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function GD(){const t=indexedDB.deleteDatabase(HN);return new wc(t).toPromise()}function Rm(){const t=indexedDB.open(HN,qD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cd,{keyPath:WN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await GD(),e(await Rm()))})})}async function w0(t,e,n){const r=bh(t,!0).put({[WN]:e,value:n});return new wc(r).toPromise()}async function KD(t,e){const n=bh(t,!1).get(e),r=await new wc(n).toPromise();return r===void 0?null:r.value}function _0(t,e){const n=bh(t,!0).delete(e);return new wc(n).toPromise()}const QD=800,YD=3;class qN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>YD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(WD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await zD(),!this.activeServiceWorker)return;this.sender=new BD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rm();return await w0(e,Sd,"1"),await _0(e,Sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>w0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>KD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bh(s,!1).getAll();return new wc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qN.type="LOCAL";const XD=qN;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e){return e?Fr(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny extends wy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JD(t){return ON(t.auth,new Ny(t),t.bypassAuthState)}function ZD(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),ID(n,new Ny(t),t.bypassAuthState)}async function eL(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),CD(n,new Ny(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JD;case"linkViaPopup":case"linkViaRedirect":return eL;case"reauthViaPopup":case"reauthViaRedirect":return ZD;default:$n(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new yc(2e3,1e4);async function nL(t,e,n){if(un(t.app))return Promise.reject(tr(t,"operation-not-supported-in-this-environment"));const r=ui(t);D4(t,e,by);const s=GN(r,n);return new ji(r,"signInViaPopup",e,s).executeNotNull()}class ji extends KN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Qr(this.filter.length===1,"Popup operations only handle one event");const e=Ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tL.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="pendingRedirect",Vu=new Map;class sL extends KN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vu.get(this.auth._key());if(!e){try{const r=await iL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vu.set(this.auth._key(),e)}return this.bypassAuthState||Vu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iL(t,e){const n=lL(e),r=aL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function oL(t,e){Vu.set(t._key(),e)}function aL(t){return Fr(t._redirectPersistence)}function lL(t){return Mu(rL,t.config.apiKey,t.name)}async function cL(t,e,n=!1){if(un(t.app))return Promise.reject($r(t));const r=ui(t),s=GN(r,e),a=await new sL(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=10*60*1e3;class dL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(tr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uL&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e={}){return rs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mL=/^https?/;async function gL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await fL(t);for(const n of e)try{if(yL(n))return}catch{}$n(t,"unauthorized-domain")}function yL(t){const e=jm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!mL.test(n))return!1;if(pL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=new yc(3e4,6e4);function E0(){const t=vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xL(t){return new Promise((e,n)=>{var s,i,a;function r(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),n(tr(t,"network-request-failed"))},timeout:vL.get()})}if((i=(s=vr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=vr().gapi)!=null&&a.load)r();else{const l=cD("iframefcb");return vr()[l]=()=>{gapi.load?r():n(tr(t,"network-request-failed"))},RN(`${lD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Fu=null,e})}let Fu=null;function wL(t){return Fu=Fu||xL(t),Fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new yc(5e3,15e3),bL="__/auth/iframe",EL="emulator/auth/iframe",NL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},TL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SL(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yy(e,EL):`https://${t.config.authDomain}/${bL}`,r={apiKey:e.apiKey,appName:t.name,v:ro},s=TL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${gc(r).slice(1)}`}async function CL(t){const e=await wL(t),n=vr().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:SL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=tr(t,"network-request-failed"),l=vr().setTimeout(()=>{i(a)},_L.get());function c(){vr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jL=500,AL=600,kL="_blank",RL="http://localhost";class N0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PL(t,e,n,r=jL,s=AL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...IL,width:r.toString(),height:s.toString(),top:i,left:a},d=qt().toLowerCase();n&&(l=TN(d)?kL:n),EN(d)&&(e=e||RL,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[v,I])=>`${p}${v}=${I},`,"");if(Z4(d)&&l!=="_self")return DL(e||"",l),new N0(null);const f=window.open(e||"",l,h);de(f,t,"popup-blocked");try{f.focus()}catch{}return new N0(f)}function DL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL="__/auth/handler",OL="emulator/auth/handler",ML=encodeURIComponent("fac");async function T0(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ro,eventId:s};if(e instanceof by){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",yP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof xc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${ML}=${encodeURIComponent(c)}`:"";return`${VL(t)}?${gc(l).slice(1)}${d}`}function VL({config:t}){return t.emulator?yy(t,OL):`https://${t.authDomain}/${LL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="webStorageSupport";class FL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$N,this._completeRedirectFn=cL,this._overrideRedirectResult=oL}async _openPopup(e,n,r,s){var a;Qr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await T0(e,n,r,jm(),s);return PL(e,i,Ey())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await T0(e,n,r,jm(),s);return $D(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Qr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CL(e),r=new dL(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rp,{type:rp},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[rp];i!==void 0&&n(!!i),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AN()||NN()||xy()}}const UL=FL;var S0="@firebase/auth",C0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zL(t){rr(new Bn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;de(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kN(t)},d=new iD(r,s,i,c);return mD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rr(new Bn("auth-internal",e=>{const n=ui(e.getProvider("auth").getImmediate());return(r=>new BL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(S0,C0,$L(t)),yn(S0,C0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=5*60,WL=iN("authIdTokenMaxAge")||HL;let I0=null;const qL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>WL)return;const s=n==null?void 0:n.token;I0!==s&&(I0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GL(t=xh()){const e=li(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pD(t,{popupRedirectResolver:UL,persistence:[XD,FD,$N]}),r=iN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=qL(i.toString());DD(n,a,()=>a(n.currentUser)),PD(n,l=>a(l))}}const s=nN("auth");return s&&gD(n,`http://${s}`),n}function KL(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}oD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",KL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zL("Browser");var QL="firebase",YL="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn(QL,YL,"app");const YN="@firebase/installations",Ty="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=1e4,JN=`w:${Ty}`,ZN="FIS_v2",XL="https://firebaseinstallations.googleapis.com/v1",JL=60*60*1e3,ZL="installations",eO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Hi=new no(ZL,eO,tO);function eT(t){return t instanceof Hn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT({projectId:t}){return`${XL}/projects/${t}/installations`}function nT(t){return{token:t.token,requestStatus:2,expiresIn:rO(t.expiresIn),creationTime:Date.now()}}async function rT(t,e){const r=(await e.json()).error;return Hi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function sT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function nO(t,{refreshToken:e}){const n=sT(t);return n.append("Authorization",sO(e)),n}async function iT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function rO(t){return Number(t.replace("s","000"))}function sO(t){return`${ZN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=tT(t),s=sT(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:ZN,appId:t.appId,sdkVersion:JN},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await iT(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:nT(d.authToken)}}else throw await rT("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=/^[cdef][\w-]{21}$/,Pm="";function lO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=cO(t);return aO.test(n)?n:Pm}catch{return Pm}}function cO(t){return oO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Map;function lT(t,e){const n=Eh(t);cT(n,e),uO(n,e)}function cT(t,e){const n=aT.get(t);if(n)for(const r of n)r(e)}function uO(t,e){const n=dO();n&&n.postMessage({key:t,fid:e}),hO()}let Ai=null;function dO(){return!Ai&&"BroadcastChannel"in self&&(Ai=new BroadcastChannel("[Firebase] FID Change"),Ai.onmessage=t=>{cT(t.data.key,t.data.fid)}),Ai}function hO(){aT.size===0&&Ai&&(Ai.close(),Ai=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="firebase-installations-database",pO=1,Wi="firebase-installations-store";let sp=null;function Sy(){return sp||(sp=hN(fO,pO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wi)}}})),sp}async function Id(t,e){const n=Eh(t),s=(await Sy()).transaction(Wi,"readwrite"),i=s.objectStore(Wi),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&lT(t,e.fid),e}async function uT(t){const e=Eh(t),r=(await Sy()).transaction(Wi,"readwrite");await r.objectStore(Wi).delete(e),await r.done}async function Nh(t,e){const n=Eh(t),s=(await Sy()).transaction(Wi,"readwrite"),i=s.objectStore(Wi),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&lT(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cy(t){let e;const n=await Nh(t.appConfig,r=>{const s=mO(r),i=gO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Pm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mO(t){const e=t||{fid:lO(),registrationStatus:0};return dT(e)}function gO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Hi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=yO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vO(t)}:{installationEntry:e}}async function yO(t,e){try{const n=await iO(t,e);return Id(t.appConfig,n)}catch(n){throw eT(n)&&n.customData.serverCode===409?await uT(t.appConfig):await Id(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function vO(t){let e=await j0(t.appConfig);for(;e.registrationStatus===1;)await oT(100),e=await j0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Cy(t);return r||n}return e}function j0(t){return Nh(t,e=>{if(!e)throw Hi.create("installation-not-found");return dT(e)})}function dT(t){return xO(t)?{fid:t.fid,registrationStatus:0}:t}function xO(t){return t.registrationStatus===1&&t.registrationTime+XN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO({appConfig:t,heartbeatServiceProvider:e},n){const r=_O(t,n),s=nO(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:JN,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await iT(()=>fetch(r,l));if(c.ok){const d=await c.json();return nT(d)}else throw await rT("Generate Auth Token",c)}function _O(t,{fid:e}){return`${tT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iy(t,e=!1){let n;const r=await Nh(t.appConfig,i=>{if(!hT(i))throw Hi.create("not-registered");const a=i.authToken;if(!e&&NO(a))return i;if(a.requestStatus===1)return n=bO(t,e),i;{if(!navigator.onLine)throw Hi.create("app-offline");const l=SO(i);return n=EO(t,l),l}});return n?await n:r.authToken}async function bO(t,e){let n=await A0(t.appConfig);for(;n.authToken.requestStatus===1;)await oT(100),n=await A0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Iy(t,e):r}function A0(t){return Nh(t,e=>{if(!hT(e))throw Hi.create("not-registered");const n=e.authToken;return CO(n)?{...e,authToken:{requestStatus:0}}:e})}async function EO(t,e){try{const n=await wO(t,e),r={...e,authToken:n};return await Id(t.appConfig,r),n}catch(n){if(eT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await uT(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Id(t.appConfig,r)}throw n}}function hT(t){return t!==void 0&&t.registrationStatus===2}function NO(t){return t.requestStatus===2&&!TO(t)}function TO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JL}function SO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function CO(t){return t.requestStatus===1&&t.requestTime+XN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t){const e=t,{installationEntry:n,registrationPromise:r}=await Cy(e);return r?r.catch(console.error):Iy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e=!1){const n=t;return await AO(n),(await Iy(n,e)).token}async function AO(t){const{registrationPromise:e}=await Cy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(t){if(!t||!t.options)throw ip("App Configuration");if(!t.name)throw ip("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ip(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ip(t){return Hi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="installations",RO="installations-internal",PO=t=>{const e=t.getProvider("app").getImmediate(),n=kO(e),r=li(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DO=t=>{const e=t.getProvider("app").getImmediate(),n=li(e,fT).getImmediate();return{getId:()=>IO(n),getToken:s=>jO(n,s)}};function LO(){rr(new Bn(fT,PO,"PUBLIC")),rr(new Bn(RO,DO,"PRIVATE"))}LO();yn(YN,Ty);yn(YN,Ty,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="analytics",OO="firebase_id",MO="origin",VO=60*1e3,FO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new vh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new no("analytics","Analytics",UO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t){if(!t.startsWith(jy)){const e=Sn.create("invalid-gtag-resource",{gtagURL:t});return en.warn(e.message),""}return t}function pT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $O(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zO(t,e){const n=$O("firebase-js-sdk-policy",{createScriptURL:BO}),r=document.createElement("script"),s=`${jy}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HO(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function WO(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await pT(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){en.error(l)}t("config",s,i)}async function qO(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await pT(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){en.error(i)}}function GO(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await qO(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await WO(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){en.error(l)}}return s}function KO(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=GO(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QO(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(jy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=30,XO=1e3;class JO{constructor(e={},n=XO){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const mT=new JO;function ZO(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eM(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:ZO(n)},s=FO.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function tM(t,e=mT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Sn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Sn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new sM;return setTimeout(async()=>{l.abort()},VO),gT({appId:r,apiKey:s,measurementId:i},a,l,e)}async function gT(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=mT){var l;const{appId:i,measurementId:a}=t;try{await nM(r,e)}catch(c){if(a)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await eM(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!rM(d)){if(s.deleteThrottleMetadata(i),a)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?t0(n,s.intervalMillis,YO):t0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),en.debug(`Calling attemptFetch again in ${h} millis`),gT(t,f,r,s)}}function nM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function rM(t){if(!(t instanceof Hn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class sM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function oM(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(){if(lN())try{await cN()}catch(t){return en.warn(Sn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return en.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function lM(t,e,n,r,s,i,a){const l=tM(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>en.error(p)),e.push(l);const c=aM().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([l,c]);QO(i)||zO(i,d.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[MO]="firebase",f.update=!0,h!=null&&(f[OO]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.app=e}_delete(){return delete Vo[this.app.options.appId],Promise.resolve()}}let Vo={},k0=[];const R0={};let op="dataLayer",uM="gtag",P0,Ay,D0=!1;function dM(){const t=[];if(aN()&&t.push("This is a browser extension environment."),fP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Sn.create("invalid-analytics-context",{errorInfo:e});en.warn(n.message)}}function hM(t,e,n){dM();const r=t.options.appId;if(!r)throw Sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(Vo[r]!=null)throw Sn.create("already-exists",{id:r});if(!D0){HO(op);const{wrappedGtag:i,gtagCore:a}=KO(Vo,k0,R0,op,uM);Ay=i,P0=a,D0=!0}return Vo[r]=lM(t,k0,R0,e,P0,op,n),new cM(t)}function fM(t=xh()){t=Be(t);const e=li(t,jd);return e.isInitialized()?e.getImmediate():pM(t)}function pM(t,e={}){const n=li(t,jd);if(n.isInitialized()){const s=n.getImmediate();if(Gr(e,n.getOptions()))return s;throw Sn.create("already-initialized")}return n.initialize({options:e})}function mM(t,e,n){t=Be(t),oM(Ay,Vo[t.app.options.appId],e,n).catch(r=>en.error(r))}function gM(t,e,n,r){t=Be(t),iM(Ay,Vo[t.app.options.appId],e,n,r).catch(s=>en.error(s))}const L0="@firebase/analytics",O0="0.10.19";function yM(){rr(new Bn(jd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return hM(r,s,n)},"PUBLIC")),rr(new Bn("analytics-internal",t,"PRIVATE")),yn(L0,O0),yn(L0,O0,"esm2020");function t(e){try{const n=e.getProvider(jd).getImmediate();return{logEvent:(r,s,i)=>gM(n,r,s,i),setUserProperties:(r,s)=>mM(n,r,s)}}catch(n){throw Sn.create("interop-component-reg-failed",{reason:n})}}}yM();var M0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zs,yT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,y){function T(){}T.prototype=y.prototype,N.F=y.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(E,j,k){for(var P=Array(arguments.length-2),H=2;H<arguments.length;H++)P[H-2]=arguments[H];return y.prototype[j].apply(E,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,y,T){T||(T=0);const E=Array(16);if(typeof y=="string")for(var j=0;j<16;++j)E[j]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(j=0;j<16;++j)E[j]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=N.g[0],T=N.g[1],j=N.g[2];let k=N.g[3],P;P=y+(k^T&(j^k))+E[0]+3614090360&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+E[1]+3905402710&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+E[2]+606105819&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+E[3]+3250441966&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+E[4]+4118548399&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+E[5]+1200080426&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+E[6]+2821735955&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+E[7]+4249261313&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+E[8]+1770035416&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+E[9]+2336552879&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+E[10]+4294925233&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+E[11]+2304563134&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(k^T&(j^k))+E[12]+1804603682&4294967295,y=T+(P<<7&4294967295|P>>>25),P=k+(j^y&(T^j))+E[13]+4254626195&4294967295,k=y+(P<<12&4294967295|P>>>20),P=j+(T^k&(y^T))+E[14]+2792965006&4294967295,j=k+(P<<17&4294967295|P>>>15),P=T+(y^j&(k^y))+E[15]+1236535329&4294967295,T=j+(P<<22&4294967295|P>>>10),P=y+(j^k&(T^j))+E[1]+4129170786&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+E[6]+3225465664&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+E[11]+643717713&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+E[0]+3921069994&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+E[5]+3593408605&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+E[10]+38016083&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+E[15]+3634488961&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+E[4]+3889429448&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+E[9]+568446438&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+E[14]+3275163606&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+E[3]+4107603335&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+E[8]+1163531501&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(j^k&(T^j))+E[13]+2850285829&4294967295,y=T+(P<<5&4294967295|P>>>27),P=k+(T^j&(y^T))+E[2]+4243563512&4294967295,k=y+(P<<9&4294967295|P>>>23),P=j+(y^T&(k^y))+E[7]+1735328473&4294967295,j=k+(P<<14&4294967295|P>>>18),P=T+(k^y&(j^k))+E[12]+2368359562&4294967295,T=j+(P<<20&4294967295|P>>>12),P=y+(T^j^k)+E[5]+4294588738&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+E[8]+2272392833&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+E[11]+1839030562&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+E[14]+4259657740&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+E[1]+2763975236&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+E[4]+1272893353&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+E[7]+4139469664&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+E[10]+3200236656&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+E[13]+681279174&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+E[0]+3936430074&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+E[3]+3572445317&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+E[6]+76029189&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(T^j^k)+E[9]+3654602809&4294967295,y=T+(P<<4&4294967295|P>>>28),P=k+(y^T^j)+E[12]+3873151461&4294967295,k=y+(P<<11&4294967295|P>>>21),P=j+(k^y^T)+E[15]+530742520&4294967295,j=k+(P<<16&4294967295|P>>>16),P=T+(j^k^y)+E[2]+3299628645&4294967295,T=j+(P<<23&4294967295|P>>>9),P=y+(j^(T|~k))+E[0]+4096336452&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+E[7]+1126891415&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+E[14]+2878612391&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+E[5]+4237533241&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+E[12]+1700485571&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+E[3]+2399980690&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+E[10]+4293915773&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+E[1]+2240044497&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+E[8]+1873313359&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+E[15]+4264355552&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+E[6]+2734768916&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+E[13]+1309151649&4294967295,T=j+(P<<21&4294967295|P>>>11),P=y+(j^(T|~k))+E[4]+4149444226&4294967295,y=T+(P<<6&4294967295|P>>>26),P=k+(T^(y|~j))+E[11]+3174756917&4294967295,k=y+(P<<10&4294967295|P>>>22),P=j+(y^(k|~T))+E[2]+718787259&4294967295,j=k+(P<<15&4294967295|P>>>17),P=T+(k^(j|~y))+E[9]+3951481745&4294967295,N.g[0]=N.g[0]+y&4294967295,N.g[1]=N.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+k&4294967295}r.prototype.v=function(N,y){y===void 0&&(y=N.length);const T=y-this.blockSize,E=this.C;let j=this.h,k=0;for(;k<y;){if(j==0)for(;k<=T;)s(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<y;)if(E[j++]=N.charCodeAt(k++),j==this.blockSize){s(this,E),j=0;break}}else for(;k<y;)if(E[j++]=N[k++],j==this.blockSize){s(this,E),j=0;break}}this.h=j,this.o+=y},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var y=1;y<N.length-8;++y)N[y]=0;y=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=y&255,y/=256;for(this.v(N),N=Array(16),y=0,T=0;T<4;++T)for(let E=0;E<32;E+=8)N[y++]=this.g[T]>>>E&255;return N};function i(N,y){var T=l;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=y(N)}function a(N,y){this.h=y;const T=[];let E=!0;for(let j=N.length-1;j>=0;j--){const k=N[j]|0;E&&k==y||(T[j]=k,E=!1)}this.g=T}var l={};function c(N){return-128<=N&&N<128?i(N,function(y){return new a([y|0],y<0?-1:0)}):new a([N|0],N<0?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return f;if(N<0)return S(d(-N));const y=[];let T=1;for(let E=0;N>=T;E++)y[E]=N/T|0,T*=4294967296;return new a(y,0)}function h(N,y){if(N.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(N.charAt(0)=="-")return S(h(N.substring(1),y));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(y,8));let E=f;for(let k=0;k<N.length;k+=8){var j=Math.min(8,N.length-k);const P=parseInt(N.substring(k,k+j),y);j<8?(j=d(Math.pow(y,j)),E=E.j(j).add(d(P))):(E=E.j(T),E=E.add(d(P)))}return E}var f=c(0),p=c(1),v=c(16777216);t=a.prototype,t.m=function(){if(_(this))return-S(this).m();let N=0,y=1;for(let T=0;T<this.g.length;T++){const E=this.i(T);N+=(E>=0?E:4294967296+E)*y,y*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(I(this))return"0";if(_(this))return"-"+S(this).toString(N);const y=d(Math.pow(N,6));var T=this;let E="";for(;;){const j=R(T,y).g;T=b(T,j.j(y));let k=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=j,I(T))return k+E;for(;k.length<6;)k="0"+k;E=k+E}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function I(N){if(N.h!=0)return!1;for(let y=0;y<N.g.length;y++)if(N.g[y]!=0)return!1;return!0}function _(N){return N.h==-1}t.l=function(N){return N=b(this,N),_(N)?-1:I(N)?0:1};function S(N){const y=N.g.length,T=[];for(let E=0;E<y;E++)T[E]=~N.g[E];return new a(T,~N.h).add(p)}t.abs=function(){return _(this)?S(this):this},t.add=function(N){const y=Math.max(this.g.length,N.g.length),T=[];let E=0;for(let j=0;j<=y;j++){let k=E+(this.i(j)&65535)+(N.i(j)&65535),P=(k>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);E=P>>>16,k&=65535,P&=65535,T[j]=P<<16|k}return new a(T,T[T.length-1]&-2147483648?-1:0)};function b(N,y){return N.add(S(y))}t.j=function(N){if(I(this)||I(N))return f;if(_(this))return _(N)?S(this).j(S(N)):S(S(this).j(N));if(_(N))return S(this.j(S(N)));if(this.l(v)<0&&N.l(v)<0)return d(this.m()*N.m());const y=this.g.length+N.g.length,T=[];for(var E=0;E<2*y;E++)T[E]=0;for(E=0;E<this.g.length;E++)for(let j=0;j<N.g.length;j++){const k=this.i(E)>>>16,P=this.i(E)&65535,H=N.i(j)>>>16,ae=N.i(j)&65535;T[2*E+2*j]+=P*ae,w(T,2*E+2*j),T[2*E+2*j+1]+=k*ae,w(T,2*E+2*j+1),T[2*E+2*j+1]+=P*H,w(T,2*E+2*j+1),T[2*E+2*j+2]+=k*H,w(T,2*E+2*j+2)}for(N=0;N<y;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=y;N<2*y;N++)T[N]=0;return new a(T,0)};function w(N,y){for(;(N[y]&65535)!=N[y];)N[y+1]+=N[y]>>>16,N[y]&=65535,y++}function C(N,y){this.g=N,this.h=y}function R(N,y){if(I(y))throw Error("division by zero");if(I(N))return new C(f,f);if(_(N))return y=R(S(N),y),new C(S(y.g),S(y.h));if(_(y))return y=R(N,S(y)),new C(S(y.g),y.h);if(N.g.length>30){if(_(N)||_(y))throw Error("slowDivide_ only works with positive integers.");for(var T=p,E=y;E.l(N)<=0;)T=L(T),E=L(E);var j=A(T,1),k=A(E,1);for(E=A(E,2),T=A(T,2);!I(E);){var P=k.add(E);P.l(N)<=0&&(j=j.add(T),k=P),E=A(E,1),T=A(T,1)}return y=b(N,j.j(y)),new C(j,y)}for(j=f;N.l(y)>=0;){for(T=Math.max(1,Math.floor(N.m()/y.m())),E=Math.ceil(Math.log(T)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),k=d(T),P=k.j(y);_(P)||P.l(N)>0;)T-=E,k=d(T),P=k.j(y);I(k)&&(k=p),j=j.add(k),N=b(N,P)}return new C(j,N)}t.B=function(N){return R(this,N).h},t.and=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let E=0;E<y;E++)T[E]=this.i(E)&N.i(E);return new a(T,this.h&N.h)},t.or=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let E=0;E<y;E++)T[E]=this.i(E)|N.i(E);return new a(T,this.h|N.h)},t.xor=function(N){const y=Math.max(this.g.length,N.g.length),T=[];for(let E=0;E<y;E++)T[E]=this.i(E)^N.i(E);return new a(T,this.h^N.h)};function L(N){const y=N.g.length+1,T=[];for(let E=0;E<y;E++)T[E]=N.i(E)<<1|N.i(E-1)>>>31;return new a(T,N.h)}function A(N,y){const T=y>>5;y%=32;const E=N.g.length-T,j=[];for(let k=0;k<E;k++)j[k]=y>0?N.i(k+T)>>>y|N.i(k+T+1)<<32-y:N.i(k+T);return new a(j,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,yT=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,zs=a}).apply(typeof M0<"u"?M0:typeof self<"u"?self:typeof window<"u"?window:{});var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,cl,xT,Uu,Dm,wT,_T,bT;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cu=="object"&&cu];for(var m=0;m<u.length;++m){var x=u[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(u,m){if(m)e:{var x=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var M=u[D];if(!(M in x))break e;x=x[M]}u=u[u.length-1],D=x[u],m=m(D),m!=D&&m!=null&&e(x,u,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(m){var x=[],D;for(D in m)Object.prototype.hasOwnProperty.call(m,D)&&x.push([D,m[D]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function c(u,m,x){return u.call.apply(u.bind,arguments)}function d(u,m,x){return d=c,d.apply(null,arguments)}function h(u,m){var x=Array.prototype.slice.call(arguments,1);return function(){var D=x.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function f(u,m){function x(){}x.prototype=m.prototype,u.Z=m.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(D,M,F){for(var K=Array(arguments.length-2),we=2;we<arguments.length;we++)K[we-2]=arguments[we];return m.prototype[M].apply(D,K)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function v(u){const m=u.length;if(m>0){const x=Array(m);for(let D=0;D<m;D++)x[D]=u[D];return x}return[]}function I(u,m){for(let D=1;D<arguments.length;D++){const M=arguments[D];var x=typeof M;if(x=x!="object"?x:M?Array.isArray(M)?"array":x:"null",x=="array"||x=="object"&&typeof M.length=="number"){x=u.length||0;const F=M.length||0;u.length=x+F;for(let K=0;K<F;K++)u[x+K]=M[K]}else u.push(M)}}class _{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function S(u){a.setTimeout(()=>{throw u},0)}function b(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class w{constructor(){this.h=this.g=null}add(m,x){const D=C.get();D.set(m,x),this.h?this.h.next=D:this.g=D,this.h=D}}var C=new _(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let L,A=!1,N=new w,y=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(T)}};function T(){for(var u;u=b();){try{u.h.call(u.g)}catch(x){S(x)}var m=C;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}A=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};a.addEventListener("test",x,m),a.removeEventListener("test",x,m)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function H(u,m){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}f(H,j),H.prototype.init=function(u,m){const x=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(x=="mouseover"?m=u.fromElement:x=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),ee=0;function le(u,m,x,D,M){this.listener=u,this.proxy=null,this.src=m,this.type=x,this.capture=!!D,this.ha=M,this.key=++ee,this.da=this.fa=!1}function O(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function q(u,m,x){for(const D in u)m.call(x,u[D],D,u)}function se(u,m){for(const x in u)m.call(void 0,u[x],x,u)}function V(u){const m={};for(const x in u)m[x]=u[x];return m}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(u,m){let x,D;for(let M=1;M<arguments.length;M++){D=arguments[M];for(x in D)u[x]=D[x];for(let F=0;F<z.length;F++)x=z[F],Object.prototype.hasOwnProperty.call(D,x)&&(u[x]=D[x])}}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,m,x,D,M){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const K=J(u,m,D,M);return K>-1?(m=u[K],x||(m.fa=!1)):(m=new le(m,this.src,F,!!D,M),m.fa=x,u.push(m)),m};function Q(u,m){const x=m.type;if(x in u.g){var D=u.g[x],M=Array.prototype.indexOf.call(D,m,void 0),F;(F=M>=0)&&Array.prototype.splice.call(D,M,1),F&&(O(m),u.g[x].length==0&&(delete u.g[x],u.h--))}}function J(u,m,x,D){for(let M=0;M<u.length;++M){const F=u[M];if(!F.da&&F.listener==m&&F.capture==!!x&&F.ha==D)return M}return-1}var W="closure_lm_"+(Math.random()*1e6|0),ue={};function Pe(u,m,x,D,M){if(Array.isArray(m)){for(let F=0;F<m.length;F++)Pe(u,m[F],x,D,M);return null}return x=Rc(x),u&&u[ae]?u.J(m,x,l(D)?!!D.capture:!1,M):Se(u,m,x,!1,D,M)}function Se(u,m,x,D,M,F){if(!m)throw Error("Invalid event type");const K=l(M)?!!M.capture:!!M;let we=Ar(u);if(we||(u[W]=we=new ve(u)),x=we.add(m,x,D,K,F),x.proxy)return x;if(D=be(),x.proxy=D,D.src=u,D.listener=x,u.addEventListener)k||(M=K),M===void 0&&(M=!1),u.addEventListener(m.toString(),D,M);else if(u.attachEvent)u.attachEvent(vn(m.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return x}function be(){function u(x){return m.call(u.src,u.listener,x)}const m=mi;return u}function Ce(u,m,x,D,M){if(Array.isArray(m))for(var F=0;F<m.length;F++)Ce(u,m[F],x,D,M);else D=l(D)?!!D.capture:!!D,x=Rc(x),u&&u[ae]?(u=u.i,F=String(m).toString(),F in u.g&&(m=u.g[F],x=J(m,x,D,M),x>-1&&(O(m[x]),Array.prototype.splice.call(m,x,1),m.length==0&&(delete u.g[F],u.h--)))):u&&(u=Ar(u))&&(m=u.g[m.toString()],u=-1,m&&(u=J(m,x,D,M)),(x=u>-1?m[u]:null)&&It(x))}function It(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ae])Q(m.i,u);else{var x=u.type,D=u.proxy;m.removeEventListener?m.removeEventListener(x,D,u.capture):m.detachEvent?m.detachEvent(vn(x),D):m.addListener&&m.removeListener&&m.removeListener(D),(x=Ar(m))?(Q(x,u),x.h==0&&(x.src=null,m[W]=null)):O(u)}}}function vn(u){return u in ue?ue[u]:ue[u]="on"+u}function mi(u,m){if(u.da)u=!0;else{m=new H(m,this);const x=u.listener,D=u.ha||u.src;u.fa&&It(u),u=x.call(D,m)}return u}function Ar(u){return u=u[W],u instanceof ve?u:null}var kr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rc(u){return typeof u=="function"?u:(u[kr]||(u[kr]=function(m){return u.handleEvent(m)}),u[kr])}function at(){E.call(this),this.i=new ve(this),this.M=this,this.G=null}f(at,E),at.prototype[ae]=!0,at.prototype.removeEventListener=function(u,m,x,D){Ce(this,u,m,x,D)};function Gt(u,m){var x,D=u.G;if(D)for(x=[];D;D=D.G)x.push(D);if(u=u.M,D=m.type||m,typeof m=="string")m=new j(m,u);else if(m instanceof j)m.target=m.target||u;else{var M=m;m=new j(D,u),fe(m,M)}M=!0;let F,K;if(x)for(K=x.length-1;K>=0;K--)F=m.g=x[K],M=Pc(F,D,!0,m)&&M;if(F=m.g=u,M=Pc(F,D,!0,m)&&M,M=Pc(F,D,!1,m)&&M,x)for(K=0;K<x.length;K++)F=m.g=x[K],M=Pc(F,D,!1,m)&&M}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const x=u.g[m];for(let D=0;D<x.length;D++)O(x[D]);delete u.g[m],u.h--}}this.G=null},at.prototype.J=function(u,m,x,D){return this.i.add(String(u),m,!1,x,D)},at.prototype.K=function(u,m,x,D){return this.i.add(String(u),m,!0,x,D)};function Pc(u,m,x,D){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let M=!0;for(let F=0;F<m.length;++F){const K=m[F];if(K&&!K.da&&K.capture==x){const we=K.listener,vt=K.ha||K.src;K.fa&&Q(u.i,K),M=we.call(vt,D)!==!1&&M}}return M&&!D.defaultPrevented}function Kj(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:a.setTimeout(u,m||0)}function Uv(u){u.g=Kj(()=>{u.g=null,u.i&&(u.i=!1,Uv(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Qj extends E{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Uv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Aa(u){E.call(this),this.h=u,this.g={}}f(Aa,E);var Bv=[];function $v(u){q(u.g,function(m,x){this.g.hasOwnProperty(x)&&It(m)},u),u.g={}}Aa.prototype.N=function(){Aa.Z.N.call(this),$v(this)},Aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var af=a.JSON.stringify,Yj=a.JSON.parse,Xj=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function zv(){}function Hv(){}var ka={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function lf(){j.call(this,"d")}f(lf,j);function cf(){j.call(this,"c")}f(cf,j);var gi={},Wv=null;function Dc(){return Wv=Wv||new at}gi.Ia="serverreachability";function qv(u){j.call(this,gi.Ia,u)}f(qv,j);function Ra(u){const m=Dc();Gt(m,new qv(m))}gi.STAT_EVENT="statevent";function Gv(u,m){j.call(this,gi.STAT_EVENT,u),this.stat=m}f(Gv,j);function Kt(u){const m=Dc();Gt(m,new Gv(m,u))}gi.Ja="timingevent";function Kv(u,m){j.call(this,gi.Ja,u),this.size=m}f(Kv,j);function Pa(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function Da(){this.g=!0}Da.prototype.ua=function(){this.g=!1};function Jj(u,m,x,D,M,F){u.info(function(){if(u.g)if(F){var K="",we=F.split("&");for(let Ve=0;Ve<we.length;Ve++){var vt=we[Ve].split("=");if(vt.length>1){const Et=vt[0];vt=vt[1];const lr=Et.split("_");K=lr.length>=2&&lr[1]=="type"?K+(Et+"="+vt+"&"):K+(Et+"=redacted&")}}}else K=null;else K=F;return"XMLHTTP REQ ("+D+") [attempt "+M+"]: "+m+`
`+x+`
`+K})}function Zj(u,m,x,D,M,F,K){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+M+"]: "+m+`
`+x+`
`+F+" "+K})}function oo(u,m,x,D){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+tA(u,x)+(D?" "+D:"")})}function eA(u,m){u.info(function(){return"TIMEOUT: "+m})}Da.prototype.info=function(){};function tA(u,m){if(!u.g)return m;if(!m)return null;try{const F=JSON.parse(m);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var x=F[u];if(!(x.length<2)){var D=x[1];if(Array.isArray(D)&&!(D.length<1)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(let K=1;K<D.length;K++)D[K]=""}}}}return af(F)}catch{return m}}var Lc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Yv;function uf(){}f(uf,zv),uf.prototype.g=function(){return new XMLHttpRequest},Yv=new uf;function La(u){return encodeURIComponent(String(u))}function nA(u){var m=1;u=u.split(":");const x=[];for(;m>0&&u.length;)x.push(u.shift()),m--;return u.length&&x.push(u.join(":")),x}function is(u,m,x,D){this.j=u,this.i=m,this.l=x,this.S=D||1,this.V=new Aa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xv}function Xv(){this.i=null,this.g="",this.h=!1}var Jv={},df={};function hf(u,m,x){u.M=1,u.A=Mc(ar(m)),u.u=x,u.R=!0,Zv(u,null)}function Zv(u,m){u.F=Date.now(),Oc(u),u.B=ar(u.A);var x=u.B,D=u.S;Array.isArray(D)||(D=[String(D)]),hx(x.i,"t",D),u.C=0,x=u.j.L,u.h=new Xv,u.g=Ax(u.j,x?m:null,!u.u),u.P>0&&(u.O=new Qj(d(u.Y,u,u.g),u.P)),m=u.V,x=u.g,D=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(Bv[0]=M.toString()),M=Bv);for(let F=0;F<M.length;F++){const K=Pe(x,M[F],D||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ra(),Jj(u.i,u.v,u.B,u.l,u.S,u.u)}is.prototype.ba=function(u){u=u.target;const m=this.O;m&&ls(u)==3?m.j():this.Y(u)},is.prototype.Y=function(u){try{if(u==this.g)e:{const we=ls(this.g),vt=this.g.ya(),Ve=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||xx(this.g)))){this.K||we!=4||vt==7||(vt==8||Ve<=0?Ra(3):Ra(2)),ff(this);var m=this.g.ca();this.X=m;var x=rA(this);if(this.o=m==200,Zj(this.i,this.v,this.B,this.l,this.S,we,m),this.o){if(this.U&&!this.L){t:{if(this.g){var D,M=this.g;if((D=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(D)){var F=D;break t}}F=null}if(u=F)oo(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pf(this,u);else{this.o=!1,this.m=3,Kt(12),yi(this),Oa(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<x.length;)if(Et=sA(this,x),Et==df){we==4&&(this.m=4,Kt(14),u=!1),oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Jv){this.m=4,Kt(15),oo(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else oo(this.i,this.l,Et,null),pf(this,Et);if(ex(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||x.length!=0||this.h.h||(this.m=1,Kt(16),u=!1),this.o=this.o&&u,!u)oo(this.i,this.l,x,"[Invalid Chunked Response]"),yi(this),Oa(this);else if(x.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),bf(K),K.P=!0,Kt(11))}}else oo(this.i,this.l,x,null),pf(this,x);we==4&&yi(this),this.o&&!this.K&&(we==4?Sx(this.j,this):(this.o=!1,Oc(this)))}else vA(this.g),m==400&&x.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),yi(this),Oa(this)}}}catch{}finally{}};function rA(u){if(!ex(u))return u.g.la();const m=xx(u.g);if(m==="")return"";let x="";const D=m.length,M=ls(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yi(u),Oa(u),"";u.h.i=new a.TextDecoder}for(let F=0;F<D;F++)u.h.h=!0,x+=u.h.i.decode(m[F],{stream:!(M&&F==D-1)});return m.length=0,u.h.g+=x,u.C=0,u.h.g}function ex(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function sA(u,m){var x=u.C,D=m.indexOf(`
`,x);return D==-1?df:(x=Number(m.substring(x,D)),isNaN(x)?Jv:(D+=1,D+x>m.length?df:(m=m.slice(D,D+x),u.C=D+x,m)))}is.prototype.cancel=function(){this.K=!0,yi(this)};function Oc(u){u.T=Date.now()+u.H,tx(u,u.H)}function tx(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Pa(d(u.aa,u),m)}function ff(u){u.D&&(a.clearTimeout(u.D),u.D=null)}is.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(eA(this.i,this.B),this.M!=2&&(Ra(),Kt(17)),yi(this),this.m=2,Oa(this)):tx(this,this.T-u)};function Oa(u){u.j.I==0||u.K||Sx(u.j,u)}function yi(u){ff(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,$v(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function pf(u,m){try{var x=u.j;if(x.I!=0&&(x.g==u||mf(x.h,u))){if(!u.L&&mf(x.h,u)&&x.I==3){try{var D=x.Ba.g.parse(m)}catch{D=null}if(Array.isArray(D)&&D.length==3){var M=D;if(M[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)$c(x),Uc(x);else break e;_f(x),Kt(18)}}else x.xa=M[1],0<x.xa-x.K&&M[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Pa(d(x.Va,x),6e3));sx(x.h)<=1&&x.ta&&(x.ta=void 0)}else xi(x,11)}else if((u.L||x.g==u)&&$c(x),!P(m))for(M=x.Ba.g.parse(m),m=0;m<M.length;m++){let Ve=M[m];const Et=Ve[0];if(!(Et<=x.K))if(x.K=Et,Ve=Ve[1],x.I==2)if(Ve[0]=="c"){x.M=Ve[1],x.ba=Ve[2];const lr=Ve[3];lr!=null&&(x.ka=lr,x.j.info("VER="+x.ka));const wi=Ve[4];wi!=null&&(x.za=wi,x.j.info("SVER="+x.za));const cs=Ve[5];cs!=null&&typeof cs=="number"&&cs>0&&(D=1.5*cs,x.O=D,x.j.info("backChannelRequestTimeoutMs_="+D)),D=x;const us=u.g;if(us){const Hc=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hc){var F=D.h;F.g||Hc.indexOf("spdy")==-1&&Hc.indexOf("quic")==-1&&Hc.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(gf(F,F.h),F.h=null))}if(D.G){const Ef=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;Ef&&(D.wa=Ef,We(D.J,D.G,Ef))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),D=x;var K=u;if(D.na=jx(D,D.L?D.ba:null,D.W),K.L){ix(D.h,K);var we=K,vt=D.O;vt&&(we.H=vt),we.D&&(ff(we),Oc(we)),D.g=K}else Nx(D);x.i.length>0&&Bc(x)}else Ve[0]!="stop"&&Ve[0]!="close"||xi(x,7);else x.I==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?xi(x,7):wf(x):Ve[0]!="noop"&&x.l&&x.l.qa(Ve),x.A=0)}}Ra(4)}catch{}}var iA=class{constructor(u,m){this.g=u,this.map=m}};function nx(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rx(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function sx(u){return u.h?1:u.g?u.g.size:0}function mf(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function gf(u,m){u.g?u.g.add(m):u.h=m}function ix(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}nx.prototype.cancel=function(){if(this.i=ox(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ox(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const x of u.g.values())m=m.concat(x.G);return m}return v(u.i)}var ax=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oA(u,m){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const D=u[x].indexOf("=");let M,F=null;D>=0?(M=u[x].substring(0,D),F=u[x].substring(D+1)):M=u[x],m(M,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function os(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof os?(this.l=u.l,Ma(this,u.j),this.o=u.o,this.g=u.g,Va(this,u.u),this.h=u.h,yf(this,fx(u.i)),this.m=u.m):u&&(m=String(u).match(ax))?(this.l=!1,Ma(this,m[1]||"",!0),this.o=Fa(m[2]||""),this.g=Fa(m[3]||"",!0),Va(this,m[4]),this.h=Fa(m[5]||"",!0),yf(this,m[6]||"",!0),this.m=Fa(m[7]||"")):(this.l=!1,this.i=new Ba(null,this.l))}os.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Ua(m,lx,!0),":");var x=this.g;return(x||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ua(m,lx,!0),"@"),u.push(La(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Ua(x,x.charAt(0)=="/"?cA:lA,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Ua(x,dA)),u.join("")},os.prototype.resolve=function(u){const m=ar(this);let x=!!u.j;x?Ma(m,u.j):x=!!u.o,x?m.o=u.o:x=!!u.g,x?m.g=u.g:x=u.u!=null;var D=u.h;if(x)Va(m,u.u);else if(x=!!u.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var M=m.h.lastIndexOf("/");M!=-1&&(D=m.h.slice(0,M+1)+D)}if(M=D,M==".."||M==".")D="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){D=M.lastIndexOf("/",0)==0,M=M.split("/");const F=[];for(let K=0;K<M.length;){const we=M[K++];we=="."?D&&K==M.length&&F.push(""):we==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),D&&K==M.length&&F.push("")):(F.push(we),D=!0)}D=F.join("/")}else D=M}return x?m.h=D:x=u.i.toString()!=="",x?yf(m,fx(u.i)):x=!!u.m,x&&(m.m=u.m),m};function ar(u){return new os(u)}function Ma(u,m,x){u.j=x?Fa(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Va(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function yf(u,m,x){m instanceof Ba?(u.i=m,hA(u.i,u.l)):(x||(m=Ua(m,uA)),u.i=new Ba(m,u.l))}function We(u,m,x){u.i.set(m,x)}function Mc(u){return We(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Fa(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ua(u,m,x){return typeof u=="string"?(u=encodeURI(u).replace(m,aA),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function aA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var lx=/[#\/\?@]/g,lA=/[#\?:]/g,cA=/[#\?]/g,uA=/[#\?@]/g,dA=/#/g;function Ba(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function vi(u){u.g||(u.g=new Map,u.h=0,u.i&&oA(u.i,function(m,x){u.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}t=Ba.prototype,t.add=function(u,m){vi(this),this.i=null,u=ao(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(m),this.h+=1,this};function cx(u,m){vi(u),m=ao(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ux(u,m){return vi(u),m=ao(u,m),u.g.has(m)}t.forEach=function(u,m){vi(this),this.g.forEach(function(x,D){x.forEach(function(M){u.call(m,M,D,this)},this)},this)};function dx(u,m){vi(u);let x=[];if(typeof m=="string")ux(u,m)&&(x=x.concat(u.g.get(ao(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)x=x.concat(u[m]);return x}t.set=function(u,m){return vi(this),this.i=null,u=ao(this,u),ux(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=dx(this,u),u.length>0?String(u[0]):m):m};function hx(u,m,x){cx(u,m),x.length>0&&(u.i=null,u.g.set(ao(u,m),v(x)),u.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let D=0;D<m.length;D++){var x=m[D];const M=La(x);x=dx(this,x);for(let F=0;F<x.length;F++){let K=M;x[F]!==""&&(K+="="+La(x[F])),u.push(K)}}return this.i=u.join("&")};function fx(u){const m=new Ba;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ao(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function hA(u,m){m&&!u.j&&(vi(u),u.i=null,u.g.forEach(function(x,D){const M=D.toLowerCase();D!=M&&(cx(this,D),hx(this,M,x))},u)),u.j=m}function fA(u,m){const x=new Da;if(a.Image){const D=new Image;D.onload=h(as,x,"TestLoadImage: loaded",!0,m,D),D.onerror=h(as,x,"TestLoadImage: error",!1,m,D),D.onabort=h(as,x,"TestLoadImage: abort",!1,m,D),D.ontimeout=h(as,x,"TestLoadImage: timeout",!1,m,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else m(!1)}function pA(u,m){const x=new Da,D=new AbortController,M=setTimeout(()=>{D.abort(),as(x,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:D.signal}).then(F=>{clearTimeout(M),F.ok?as(x,"TestPingServer: ok",!0,m):as(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(M),as(x,"TestPingServer: error",!1,m)})}function as(u,m,x,D,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),D(x)}catch{}}function mA(){this.g=new Xj}function vf(u){this.i=u.Sb||null,this.h=u.ab||!1}f(vf,zv),vf.prototype.g=function(){return new Vc(this.i,this.h)};function Vc(u,m){at.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Vc,at),t=Vc.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,za(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||a).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,za(this)),this.g&&(this.readyState=3,za(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;px(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function px(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$a(this):za(this),this.readyState==3&&px(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,$a(this))},t.Na=function(u){this.g&&(this.response=u,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(u){u.readyState=4,u.l=null,u.j=null,u.B=null,za(u)}t.setRequestHeader=function(u,m){this.A.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=m.next();return u.join(`\r
`)};function za(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function mx(u){let m="";return q(u,function(x,D){m+=D,m+=":",m+=x,m+=`\r
`}),m}function xf(u,m,x){e:{for(D in x){var D=!1;break e}D=!0}D||(x=mx(x),typeof u=="string"?x!=null&&La(x):We(u,m,x))}function nt(u){at.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(nt,at);var gA=/^https?$/i,yA=["POST","PUT"];t=nt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,m,x,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Yv.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(F){gx(this,F);return}if(u=x||"",x=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var M in D)x.set(M,D[M]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const F of D.keys())x.set(F,D.get(F));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(x.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(yA,m,void 0)>=0)||D||M||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,K]of x)this.g.setRequestHeader(F,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){gx(this,F)}};function gx(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,yx(u),Fc(u)}function yx(u){u.A||(u.A=!0,Gt(u,"complete"),Gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Gt(this,"complete"),Gt(this,"abort"),Fc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fc(this,!0)),nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?vx(this):this.Xa())},t.Xa=function(){vx(this)};function vx(u){if(u.h&&typeof i<"u"){if(u.v&&ls(u)==4)setTimeout(u.Ca.bind(u),0);else if(Gt(u,"readystatechange"),ls(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var D;if(D=F===0){let K=String(u.D).match(ax)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),D=!gA.test(K?K.toLowerCase():"")}x=D}if(x)Gt(u,"complete"),Gt(u,"success");else{u.o=6;try{var M=ls(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",yx(u)}}finally{Fc(u)}}}}function Fc(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,m||Gt(u,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ls(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ls(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Yj(m)}};function xx(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vA(u){const m={};u=(u.g&&ls(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(P(u[D]))continue;var x=nA(u[D]);const M=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const F=m[M]||[];m[M]=F,F.push(x)}se(m,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(u,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||m}function wx(u){this.za=0,this.i=[],this.j=new Da,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ha("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ha("baseRetryDelayMs",5e3,u),this.Za=Ha("retryDelaySeedMs",1e4,u),this.Ta=Ha("forwardChannelMaxRetries",2,u),this.va=Ha("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new nx(u&&u.concurrentRequestLimit),this.Ba=new mA,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=wx.prototype,t.ka=8,t.I=1,t.connect=function(u,m,x,D){Kt(0),this.W=u,this.H=m||{},x&&D!==void 0&&(this.H.OSID=x,this.H.OAID=D),this.F=this.X,this.J=jx(this,null,this.W),Bc(this)};function wf(u){if(_x(u),u.I==3){var m=u.V++,x=ar(u.J);if(We(x,"SID",u.M),We(x,"RID",m),We(x,"TYPE","terminate"),Wa(u,x),m=new is(u,u.j,m),m.M=2,m.A=Mc(ar(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(m.A.toString(),"")}catch{}!x&&a.Image&&(new Image().src=m.A,x=!0),x||(m.g=Ax(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Oc(m)}Ix(u)}function Uc(u){u.g&&(bf(u),u.g.cancel(),u.g=null)}function _x(u){Uc(u),u.v&&(a.clearTimeout(u.v),u.v=null),$c(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function Bc(u){if(!rx(u.h)&&!u.m){u.m=!0;var m=u.Ea;L||y(),A||(L(),A=!0),N.add(m,u),u.D=0}}function xA(u,m){return sx(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Pa(d(u.Ea,u,m),Cx(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new is(this,this.j,u);let F=this.o;if(this.U&&(F?(F=V(F),fe(F,this.U)):F=this.U),this.u!==null||this.R||(M.J=F,F=null),this.S)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var D=this.i[x];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(m+=D,m>4096){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=Ex(this,M,m),x=ar(this.J),We(x,"RID",u),We(x,"CVER",22),this.G&&We(x,"X-HTTP-Session-Id",this.G),Wa(this,x),F&&(this.R?m="headers="+La(mx(F))+"&"+m:this.u&&xf(x,this.u,F)),gf(this.h,M),this.Ra&&We(x,"TYPE","init"),this.S?(We(x,"$req",m),We(x,"SID","null"),M.U=!0,hf(M,x,null)):hf(M,x,m),this.I=2}}else this.I==3&&(u?bx(this,u):this.i.length==0||rx(this.h)||bx(this))};function bx(u,m){var x;m?x=m.l:x=u.V++;const D=ar(u.J);We(D,"SID",u.M),We(D,"RID",x),We(D,"AID",u.K),Wa(u,D),u.u&&u.o&&xf(D,u.u,u.o),x=new is(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Ex(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),gf(u.h,x),hf(x,D,m)}function Wa(u,m){u.H&&q(u.H,function(x,D){We(m,D,x)}),u.l&&q({},function(x,D){We(m,D,x)})}function Ex(u,m,x){x=Math.min(u.i.length,x);const D=u.l?d(u.l.Ka,u.l,u):null;e:{var M=u.i;let we=-1;for(;;){const vt=["count="+x];we==-1?x>0?(we=M[0].g,vt.push("ofs="+we)):we=0:vt.push("ofs="+we);let Ve=!0;for(let Et=0;Et<x;Et++){var F=M[Et].g;const lr=M[Et].map;if(F-=we,F<0)we=Math.max(0,M[Et].g-100),Ve=!1;else try{F="req"+F+"_"||"";try{var K=lr instanceof Map?lr:Object.entries(lr);for(const[wi,cs]of K){let us=cs;l(cs)&&(us=af(cs)),vt.push(F+wi+"="+encodeURIComponent(us))}}catch(wi){throw vt.push(F+"type="+encodeURIComponent("_badmap")),wi}}catch{D&&D(lr)}}if(Ve){K=vt.join("&");break e}}K=void 0}return u=u.i.splice(0,x),m.G=u,K}function Nx(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;L||y(),A||(L(),A=!0),N.add(m,u),u.A=0}}function _f(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Pa(d(u.Da,u),Cx(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Tx(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Pa(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Uc(this),Tx(this))};function bf(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function Tx(u){u.g=new is(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=ar(u.na);We(m,"RID","rpc"),We(m,"SID",u.M),We(m,"AID",u.K),We(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&We(m,"TO",u.ia),We(m,"TYPE","xmlhttp"),Wa(u,m),u.u&&u.o&&xf(m,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=Mc(ar(m)),x.u=null,x.R=!0,Zv(x,u)}t.Va=function(){this.C!=null&&(this.C=null,Uc(this),_f(this),Kt(19))};function $c(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Sx(u,m){var x=null;if(u.g==m){$c(u),bf(u),u.g=null;var D=2}else if(mf(u.h,m))x=m.G,ix(u.h,m),D=1;else return;if(u.I!=0){if(m.o)if(D==1){x=m.u?m.u.length:0,m=Date.now()-m.F;var M=u.D;D=Dc(),Gt(D,new Kv(D,x)),Bc(u)}else Nx(u);else if(M=m.m,M==3||M==0&&m.X>0||!(D==1&&xA(u,m)||D==2&&_f(u)))switch(x&&x.length>0&&(m=u.h,m.i=m.i.concat(x)),M){case 1:xi(u,5);break;case 4:xi(u,10);break;case 3:xi(u,6);break;default:xi(u,2)}}}function Cx(u,m){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*m}function xi(u,m){if(u.j.info("Error code "+m),m==2){var x=d(u.bb,u),D=u.Ua;const M=!D;D=new os(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ma(D,"https"),Mc(D),M?fA(D.toString(),x):pA(D.toString(),x)}else Kt(2);u.I=0,u.l&&u.l.pa(m),Ix(u),_x(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Ix(u){if(u.I=0,u.ja=[],u.l){const m=ox(u.h);(m.length!=0||u.i.length!=0)&&(I(u.ja,m),I(u.ja,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.oa()}}function jx(u,m,x){var D=x instanceof os?ar(x):new os(x);if(D.g!="")m&&(D.g=m+"."+D.g),Va(D,D.u);else{var M=a.location;D=M.protocol,m=m?m+"."+M.hostname:M.hostname,M=+M.port;const F=new os(null);D&&Ma(F,D),m&&(F.g=m),M&&Va(F,M),x&&(F.h=x),D=F}return x=u.G,m=u.wa,x&&m&&We(D,x,m),We(D,"VER",u.ka),Wa(u,D),D}function Ax(u,m,x){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new nt(new vf({ab:x})):new nt(u.ma),m.Fa(u.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kx(){}t=kx.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function zc(){}zc.prototype.g=function(u,m){return new xn(u,m)};function xn(u,m){at.call(this),this.g=new wx(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!P(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new lo(this)}f(xn,at),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){wf(this.g)},xn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=af(u),u=x);m.i.push(new iA(m.Ya++,u)),m.I==3&&Bc(m)},xn.prototype.N=function(){this.g.l=null,delete this.j,wf(this.g),delete this.g,xn.Z.N.call(this)};function Rx(u){lf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const x in m){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}f(Rx,lf);function Px(){cf.call(this),this.status=1}f(Px,cf);function lo(u){this.g=u}f(lo,kx),lo.prototype.ra=function(){Gt(this.g,"a")},lo.prototype.qa=function(u){Gt(this.g,new Rx(u))},lo.prototype.pa=function(u){Gt(this.g,new Px)},lo.prototype.oa=function(){Gt(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,bT=function(){return new zc},_T=function(){return Dc()},wT=gi,Dm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,Uu=Lc,Qv.COMPLETE="complete",xT=Qv,Hv.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",at.prototype.listen=at.prototype.J,cl=Hv,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,vT=nt}).apply(typeof cu<"u"?cu:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore",F0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new vh("@firebase/firestore");function po(){return qi.logLevel}function Z(t,...e){if(qi.logLevel<=Ee.DEBUG){const n=e.map(ky);qi.debug(`Firestore (${ya}): ${t}`,...n)}}function Yr(t,...e){if(qi.logLevel<=Ee.ERROR){const n=e.map(ky);qi.error(`Firestore (${ya}): ${t}`,...n)}}function Xo(t,...e){if(qi.logLevel<=Ee.WARN){const n=e.map(ky);qi.warn(`Firestore (${ya}): ${t}`,...n)}}function ky(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ET(t,r,n)}function ET(t,e,n){let r=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Yr(r),new Error(r)}function Re(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ET(e,s,r)}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class xM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wM{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new NT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class _M{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _M(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Re(this.o===void 0,3512);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=NM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function Lm(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ap(s)===ap(i)?Ne(s,i):ap(s)?1:-1}return Ne(t.length,e.length)}const TM=55296,SM=57343;function ap(t){const e=t.charCodeAt(0);return e>=TM&&e<=SM}function Jo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class dr{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&he(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=dr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ne(e.length,n.length)}static compareSegments(e,n){const r=dr.isNumericId(e),s=dr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?dr.extractNumericId(e).compare(dr.extractNumericId(n)):Lm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}}class $e extends dr{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const CM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends dr{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return CM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new kt([B0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new X(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new X(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce($e.fromString(e))}static fromName(e){return new ce($e.fromString(e).popFirst(5))}static empty(){return new ce($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new $e(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e,n){if(!n)throw new X(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IM(t,e,n,r){if(e===!0&&r===!0)throw new X(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $0(t){if(!ce.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(ce.isDocumentKey(t))throw new X(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ST(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Th(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Th(t);throw new X(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function jM(t,e){if(e<=0)throw new X(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function _c(t,e){if(!ST(t))throw new X(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=-62135596800,W0=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*W0);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<H0)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_c(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:yt("string",Ke._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ke(0,0))}static max(){return new ge(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function AM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Ks(s,ce.empty(),e)}function kM(t){return new Ks(t.readTime,t.key,Xl)}class Ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ks(ge.min(),ce.empty(),Xl)}static max(){return new Ks(ge.max(),ce.empty(),Xl)}}function RM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==PM)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function LM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=-1;function Ch(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function OM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="";function MM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=q0(e)),e=VM(t.get(n),e);return q0(e)}function VM(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case CT:n+="";break;default:n+=i}}return n}function q0(t){return t+CT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function di(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FM(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function IT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??At.RED,this.left=s??At.EMPTY,this.right=i??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new At(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return At.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new _t(this.comparator);return n.data=e,n}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new En([])}unionWith(e){let n=new _t(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jT("Invalid base64 string: "+i):i}}(e);return new Lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const UM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(t){if(Re(!!t,39018),typeof t=="string"){let e=0;const n=UM.exec(t);if(Re(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ys(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",kT="__type__",RT="__previous_value__",PT="__local_write_time__";function Dy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kT])==null?void 0:r.stringValue)===AT}function Ih(t){const e=t.mapValue.fields[RT];return Dy(e)?Ih(e):e}function Jl(t){const e=Qs(t.mapValue.fields[PT].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,n,r,s,i,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const kd="(default)";class Zl{constructor(e,n){this.projectId=e,this.database=n||kd}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__type__",$M="__max__",du={mapValue:{}},LT="__vector__",Rd="value";function Xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dy(t)?4:HM(t)?9007199254740991:zM(t)?10:11:he(28295,{value:t})}function Sr(t,e){if(t===e)return!0;const n=Xs(t);if(n!==Xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Qs(s.timestampValue),l=Qs(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ys(s.bytesValue).isEqual(Ys(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lt(s.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(s.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lt(s.integerValue)===lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=lt(s.doubleValue),l=lt(i.doubleValue);return a===l?Ad(a)===Ad(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Jo(t.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(G0(a)!==G0(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Sr(a[c],l[c])))return!1;return!0}(t,e);default:return he(52216,{left:t})}}function ec(t,e){return(t.values||[]).find(n=>Sr(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;const n=Xs(t),r=Xs(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=lt(i.integerValue||i.doubleValue),c=lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Q0(t.timestampValue,e.timestampValue);case 4:return Q0(Jl(t),Jl(e));case 5:return Lm(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Ys(i),c=Ys(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ne(l[d],c[d]);if(h!==0)return h}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ne(lt(i.latitude),lt(a.latitude));return l!==0?l:Ne(lt(i.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Y0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,v,I,_;const l=i.fields||{},c=a.fields||{},d=(p=l[Rd])==null?void 0:p.arrayValue,h=(v=c[Rd])==null?void 0:v.arrayValue,f=Ne(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return f!==0?f:Y0(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===du.mapValue&&a===du.mapValue)return 0;if(i===du.mapValue)return 1;if(a===du.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Lm(c[f],h[f]);if(p!==0)return p;const v=Zo(l[c[f]],d[h[f]]);if(v!==0)return v}return Ne(c.length,h.length)}(t.mapValue,e.mapValue);default:throw he(23264,{he:n})}}function Q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Qs(t),r=Qs(e),s=Ne(n.seconds,r.seconds);return s!==0?s:Ne(n.nanos,r.nanos)}function Y0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Zo(n[s],r[s]);if(i)return i}return Ne(n.length,r.length)}function ea(t){return Om(t)}function Om(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Om(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Om(n.fields[a])}`;return s+"}"}(t.mapValue):he(61005,{value:t})}function Bu(t){switch(Xs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ih(t);return e?16+Bu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ys(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return di(r.fields,(i,a)=>{s+=i.length+Bu(a)}),s}(t.mapValue);default:throw he(13486,{value:t})}}function X0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mm(t){return!!t&&"integerValue"in t}function Ly(t){return!!t&&"arrayValue"in t}function J0(t){return!!t&&"nullValue"in t}function Z0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $u(t){return!!t&&"mapValue"in t}function zM(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[DT])==null?void 0:r.stringValue)===LT}function Tl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tl(t.arrayValue.values[n]);return e}return{...t}}function HM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(n)}setAll(e){let n=kt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Tl(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];$u(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){di(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new dn(Tl(this.value))}}function OT(t){const e=[];return di(t.fields,(n,r)=>{const s=new kt([n]);if($u(r)){const i=OT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Bt(e,0,ge.min(),ge.min(),ge.min(),dn.empty(),0)}static newFoundDocument(e,n,r,s){return new Bt(e,1,n,ge.min(),r,s,0)}static newNoDocument(e,n){return new Bt(e,2,n,ge.min(),ge.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,ge.min(),ge.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function e_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ce.comparator(ce.fromName(a.referenceValue),n.key):r=Zo(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function t_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n="asc"){this.field=e,this.dir=n}}function WM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{}class gt extends MT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GM(e,n,r):n==="array-contains"?new YM(e,r):n==="in"?new XM(e,r):n==="not-in"?new JM(e,r):n==="array-contains-any"?new ZM(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new KM(e,r):new QM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zo(n,this.value)):n!==null&&Xs(this.value)===Xs(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends MT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sr(e,n)}matches(e){return VT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function VT(t){return t.op==="and"}function FT(t){return qM(t)&&VT(t)}function qM(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function Vm(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+ea(t.value);if(FT(t))return t.filters.map(e=>Vm(e)).join(",");{const e=t.filters.map(n=>Vm(n)).join(",");return`${t.op}(${e})`}}function UT(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Sr(r.value,s.value)}(t,e):t instanceof sr?function(r,s){return s instanceof sr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&UT(a,s.filters[l]),!0):!1}(t,e):void he(19439)}function BT(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(BT).join(" ,")+"}"}(t):"Filter"}class GM extends gt{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class KM extends gt{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QM extends gt{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $T(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class YM extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ly(n)&&ec(n.arrayValue,this.value)}}class XM extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ec(this.value.arrayValue,n)}}class JM extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ec(this.value.arrayValue,n)}}class ZM extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function n_(t,e=null,n=[],r=[],s=null,i=null,a=null){return new eV(t,e,n,r,s,i,a)}function Oy(t){const e=me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ea(r)).join(",")),e.Te=n}return e.Te}function My(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t_(t.startAt,e.startAt)&&t_(t.endAt,e.endAt)}function Fm(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tV(t,e,n,r,s,i,a,l){return new wa(t,e,n,r,s,i,a,l)}function jh(t){return new wa(t)}function r_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zT(t){return t.collectionGroup!==null}function Sl(t){const e=me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new _t(kt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new tc(i,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new tc(kt.keyField(),r))}return e.Ie}function wr(t){const e=me(t);return e.Ee||(e.Ee=HT(e,Sl(t))),e.Ee}function nV(t){const e=me(t);return e.de||(e.de=HT(e,t.explicitOrderBy)),e.de}function HT(t,e){if(t.limitType==="F")return n_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new tc(s.field,i)});const n=t.endAt?new Pd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pd(t.startAt.position,t.startAt.inclusive):null;return n_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Um(t,e){const n=t.filters.concat([e]);return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dd(t,e,n){return new wa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ah(t,e){return My(wr(t),wr(e))&&t.limitType===e.limitType}function WT(t){return`${Oy(wr(t))}|lt:${t.limitType}`}function mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BT(s)).join(", ")}]`),Ch(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ea(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ea(s)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Sl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=e_(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,Sl(r),s)||r.endAt&&!function(a,l,c){const d=e_(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,Sl(r),s))}(t,e)}function rV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qT(t){return(e,n)=>{let r=!1;for(const s of Sl(t)){const i=sV(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sV(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Zo(c,d):he(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){di(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=new tt(ce.comparator);function Xr(){return iV}const GT=new tt(ce.comparator);function ul(...t){let e=GT;for(const n of t)e=e.insert(n.key,n);return e}function KT(t){let e=GT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return Cl()}function QT(){return Cl()}function Cl(){return new so(t=>t.toString(),(t,e)=>t.isEqual(e))}const oV=new tt(ce.comparator),aV=new _t(ce.comparator);function Te(...t){let e=aV;for(const n of t)e=e.add(n);return e}const lV=new _t(Ne);function cV(){return lV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function YT(t){return{integerValue:""+t}}function XT(t,e){return OM(e)?YT(e):Vy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(){this._=void 0}}function uV(t,e,n){return t instanceof Ld?function(s,i){const a={fields:{[kT]:{stringValue:AT},[PT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Dy(i)&&(i=Ih(i)),i&&(a.fields[RT]=i),{mapValue:a}}(n,e):t instanceof ta?ZT(t,e):t instanceof nc?eS(t,e):function(s,i){const a=JT(s,i),l=s_(a)+s_(s.Ae);return Mm(a)&&Mm(s.Ae)?YT(l):Vy(s.serializer,l)}(t,e)}function dV(t,e,n){return t instanceof ta?ZT(t,e):t instanceof nc?eS(t,e):n}function JT(t,e){return t instanceof rc?function(r){return Mm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ld extends Rh{}class ta extends Rh{constructor(e){super(),this.elements=e}}function ZT(t,e){const n=tS(e);for(const r of t.elements)n.some(s=>Sr(s,r))||n.push(r);return{arrayValue:{values:n}}}class nc extends Rh{constructor(e){super(),this.elements=e}}function eS(t,e){let n=tS(e);for(const r of t.elements)n=n.filter(s=>!Sr(s,r));return{arrayValue:{values:n}}}class rc extends Rh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s_(t){return lt(t.integerValue||t.doubleValue)}function tS(t){return Ly(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.field=e,this.transform=n}}function hV(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ta&&s instanceof ta||r instanceof nc&&s instanceof nc?Jo(r.elements,s.elements,Sr):r instanceof rc&&s instanceof rc?Sr(r.Ae,s.Ae):r instanceof Ld&&s instanceof Ld}(t.transform,e.transform)}class fV{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ph{}function rS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fy(t.key,Mn.none()):new bc(t.key,t.data,Mn.none());{const n=t.data,r=dn.empty();let s=new _t(kt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new hi(t.key,r,new En(s.toArray()),Mn.none())}}function pV(t,e,n){t instanceof bc?function(s,i,a){const l=s.value.clone(),c=o_(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof hi?function(s,i,a){if(!zu(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=o_(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(sS(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Il(t,e,n,r){return t instanceof bc?function(i,a,l,c){if(!zu(i.precondition,a))return l;const d=i.value.clone(),h=a_(i.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof hi?function(i,a,l,c){if(!zu(i.precondition,a))return l;const d=a_(i.fieldTransforms,c,a),h=a.data;return h.setAll(sS(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return zu(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function mV(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=JT(r.transform,s||null);i!=null&&(n===null&&(n=dn.empty()),n.set(r.field,i))}return n||null}function i_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Jo(r,s,(i,a)=>hV(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bc extends Ph{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class hi extends Ph{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function o_(t,e,n){const r=new Map;Re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,dV(a,l,n[s]))}return r}function a_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,uV(i,a,e))}return r}class Fy extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gV extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&pV(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Il(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QT();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=rS(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(n,r)=>i_(n,r))&&Jo(this.baseMutations,e.baseMutations,(n,r)=>i_(n,r))}}class Uy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return oV}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Uy(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ie;function _V(t){switch(t){case U.OK:return he(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return he(15467,{code:t})}}function iS(t){if(t===void 0)return Yr("GRPC error has no .code"),U.UNKNOWN;switch(t){case pt.OK:return U.OK;case pt.CANCELLED:return U.CANCELLED;case pt.UNKNOWN:return U.UNKNOWN;case pt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case pt.INTERNAL:return U.INTERNAL;case pt.UNAVAILABLE:return U.UNAVAILABLE;case pt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case pt.NOT_FOUND:return U.NOT_FOUND;case pt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case pt.ABORTED:return U.ABORTED;case pt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case pt.DATA_LOSS:return U.DATA_LOSS;default:return he(39323,{code:t})}}(Ie=pt||(pt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=new zs([4294967295,4294967295],0);function l_(t){const e=bV().encode(t),n=new yT;return n.update(e),new Uint8Array(n.digest())}function c_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zs([n,r],0),new zs([s,i],0)]}class By{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dl(`Invalid padding: ${n}`);if(r<0)throw new dl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zs.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(zs.fromNumber(r)));return s.compare(EV)===1&&(s=new zs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=l_(e),[r,s]=c_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new By(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=l_(e),[r,s]=c_(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dh(ge.min(),s,new tt(Ne),Xr(),Te())}}class Ec{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ec(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class oS{constructor(e,n){this.targetId=e,this.Ce=n}}class aS{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class u_{constructor(){this.ve=0,this.Fe=d_(),this.Me=Lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:he(38017,{changeType:i})}}),new Ec(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=d_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xr(),this.Je=hu(),this.He=hu(),this.Ye=new tt(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Fm(i))if(r===0){const a=new ce(i.path);this.et(n,a,Bt.newNoDocument(a,ge.min()))}else Re(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Ys(r).toUint8Array()}catch(c){if(c instanceof jT)return Xo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new By(a,s,i)}catch(c){return Xo(c instanceof dl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Fm(l.target)){const c=new ce(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Bt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Te();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Dh(e,n,this.Ye,this.je,r);return this.je=Xr(),this.Je=hu(),this.He=hu(),this.Ye=new tt(Ne),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new u_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new _t(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new _t(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hu(){return new tt(ce.comparator)}function d_(){return new tt(ce.comparator)}const TV={asc:"ASCENDING",desc:"DESCENDING"},SV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CV={and:"AND",or:"OR"};class IV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bm(t,e){return t.useProto3Json||Ch(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jV(t,e){return Od(t,e.toTimestamp())}function _r(t){return Re(!!t,49232),ge.fromTimestamp(function(n){const r=Qs(n);return new Ke(r.seconds,r.nanos)}(t))}function $y(t,e){return $m(t,e).canonicalString()}function $m(t,e){const n=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cS(t){const e=$e.fromString(t);return Re(mS(e),10190,{key:e.toString()}),e}function zm(t,e){return $y(t.databaseId,e.path)}function lp(t,e){const n=cS(e);if(n.get(1)!==t.databaseId.projectId)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(dS(n))}function uS(t,e){return $y(t.databaseId,e)}function AV(t){const e=cS(t);return e.length===4?$e.emptyPath():dS(e)}function Hm(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dS(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function h_(t,e,n){return{name:zm(t,e),fields:n.value.mapValue.fields}}function kV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:he(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Re(h===void 0||typeof h=="string",58123),Lt.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?U.UNKNOWN:iS(d.code);return new X(h,d.message||"")}(a);n=new aS(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=lp(t,r.document.name),i=_r(r.document.updateTime),a=r.document.createTime?_r(r.document.createTime):ge.min(),l=new dn({mapValue:{fields:r.document.fields}}),c=Bt.newFoundDocument(s,i,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Hu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=lp(t,r.document),i=r.readTime?_r(r.readTime):ge.min(),a=Bt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Hu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=lp(t,r.document),i=r.removedTargetIds||[];n=new Hu([],i,s,null)}else{if(!("filter"in e))return he(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new wV(s,i),l=r.targetId;n=new oS(l,a)}}return n}function RV(t,e){let n;if(e instanceof bc)n={update:h_(t,e.key,e.value)};else if(e instanceof Fy)n={delete:zm(t,e.key)};else if(e instanceof hi)n={update:h_(t,e.key,e.data),updateMask:BV(e.fieldMask)};else{if(!(e instanceof gV))return he(16599,{Vt:e.type});n={verify:zm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Ld)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ta)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof nc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rc)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw he(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jV(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:he(27497)}(t,e.precondition)),n}function PV(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?_r(s.updateTime):_r(i);return a.isEqual(ge.min())&&(a=_r(i)),new fV(a,s.transformResults||[])}(n,e))):[]}function DV(t,e){return{documents:[uS(t,e.path)]}}function hS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uS(t,s);const i=function(d){if(d.length!==0)return pS(sr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Ts(p.field),direction:VV(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Bm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function LV(t,e,n,r){const{ft:s,parent:i}=hS(t,e),a={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;a[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:Ts(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:Ts(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},gt:a,parent:i}}function OV(t){let e=AV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=fS(f);return p instanceof sr&&FT(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(p=>function(I){return new tc(go(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Ch(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,v=f.values||[];return new Pd(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const p=!f.before,v=f.values||[];return new Pd(v,p)}(n.endAt)),tV(e,s,a,i,l,"F",c,d)}function MV(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=go(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=go(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=go(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=go(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(go(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>fS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return he(1026)}}(n.compositeFilter.op))}(t):he(30097,{filter:t})}function VV(t){return TV[t]}function FV(t){return SV[t]}function UV(t){return CV[t]}function Ts(t){return{fieldPath:t.canonicalString()}}function go(t){return kt.fromServerFormat(t.fieldPath)}function pS(t){return t instanceof gt?function(n){if(n.op==="=="){if(Z0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NAN"}};if(J0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NAN"}};if(J0(n.value))return{unaryFilter:{field:Ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ts(n.field),op:FV(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(s=>pS(s));return r.length===1?r[0]:{compositeFilter:{op:UV(n.op),filters:r}}}(t):he(54877,{filter:t})}function BV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n,r,s,i=ge.min(),a=ge.min(),l=Lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new As(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new As(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.yt=e}}function zV(t){const e=OV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.Cn=new WV}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ks.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class WV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new _t($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new _t($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gS=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(gS,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="LruGarbageCollector",qV=1048576;function m_([t,e],[n,r]){const s=Ne(t,n);return s===0?Ne(e,r):s}class GV{constructor(e){this.Ir=e,this.buffer=new _t(m_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();m_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KV{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(p_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xa(n)?Z(p_,"Ignoring IndexedDB error during garbage collection: ",n):await va(n)}await this.Vr(3e5)})}}class QV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Sh.ce);const r=new GV(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(f_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),po()<=Ee.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function YV(t,e){return new QV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.changes=new so(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Il(r.mutation,s,En.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=ki();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=ul();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Xr();const a=Cl(),l=function(){return Cl()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof hi)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Il(h.mutation,d,h.mutation.getFieldMask(),Ke.now())):a.set(d.key,En.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new JV(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Cl();let s=new tt((a,l)=>a-l),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||En.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Te()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=QT();h.forEach(p=>{if(!i.has(p)){const v=rS(n.get(p),r.get(p));v!==null&&f.set(p,v),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ce.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(ki());let l=Xl,c=i;return a.next(d=>B.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Te())).next(h=>({batchId:l,changes:KT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let s=ul();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ul();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,c=>{const d=function(f,p){return new wa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Bt.newInvalidDocument(h)))});let l=ul();return a.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Il(h.mutation,d,En.empty(),Ke.now()),kh(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_r(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:zV(s.bundledQuery),readTime:_r(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(){this.overlays=new tt(ce.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ki();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=ki(),i=n.length+1,a=new ce(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new tt((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=ki(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ki(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return B.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new vV(n,r));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.Qr=new _t(Nt.$r),this.Ur=new _t(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new $e([])),r=new Nt(n,e),s=new Nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new $e([])),r=new Nt(n,e),s=new Nt(n,e+1);let i=Te();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new _t(Nt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new yV(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Py:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),s=new Nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new _t(Ne);return n.forEach(s=>{const i=new Nt(s,0),a=new Nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ce.isDocumentKey(i)||(i=i.child(""));const a=new Nt(new ce(i),0);let l=new _t(Ne);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const i=new Nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.ri=e,this.docs=function(){return new tt(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=Xr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Bt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xr();const a=n.path,l=new ce(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||RM(kM(h),r)<=0||(s.has(h.key)||kh(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){he(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new i3(this)}getSize(e){return B.resolve(this.size)}}class i3 extends XV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e){this.persistence=e,this.si=new so(n=>Oy(n),My),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new zy,this.targetCount=0,this.ai=na.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Sh(0),this.li=!1,this.li=!0,this.hi=new n3,this.referenceDelegate=e(this),this.Pi=new o3(this),this.indexManager=new HV,this.remoteDocumentCache=function(s){return new s3(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new $V(n),this.Ii=new e3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new t3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new r3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new a3(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class a3 extends DM{constructor(e){super(),this.currentSequenceNumber=e}}class Hy{constructor(e){this.persistence=e,this.Ri=new zy,this.Vi=null}static mi(e){return new Hy(e)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=ce.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Md{constructor(e,n){this.persistence=e,this.pi=new so(r=>MM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=YV(this,n)}static mi(e,n){return new Md(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,ge.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bu(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wy(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return hP()?8:LM(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new l3;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(po()<=Ee.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(po()<=Ee.DEBUG&&Z("QueryEngine","Query:",mo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(po()<=Ee.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(n))):B.resolve())}ys(e,n){if(r_(n))return B.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dd(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Te(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Dd(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return r_(n)||s.isEqual(ge.min())?B.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?B.resolve(null):(po()<=Ee.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mo(n)),this.vs(e,a,n,AM(s,Xl)).next(l=>l))})}Ds(e,n){let r=new _t(qT(e));return n.forEach((s,i)=>{kh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return po()<=Ee.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",mo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ks.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="LocalStore",u3=3e8;class d3{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new tt(Ne),this.xs=new so(i=>Oy(i),My),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function h3(t,e,n,r){return new d3(t,e,n,r)}async function vS(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Te();for(const d of s){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function f3(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,p=f.keys();let v=B.resolve();return p.forEach(I=>{v=v.next(()=>h.getEntry(c,I)).next(_=>{const S=d.docVersions.get(I);Re(S!==null,48541),_.version.compareTo(S)<0&&(f.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xS(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function p3(t,e){const n=me(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let v=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Lt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(_,S,b){return _.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=u3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,v,h)&&l.push(n.Pi.updateTargetData(i,v))});let c=Xr(),d=Te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(m3(i,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ge.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function m3(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Xr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Z(qy,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function g3(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Py),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y3(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new As(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Wm(t,e,n){const r=me(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!xa(a))throw a;Z(qy,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function g_(t,e,n){const r=me(t);let s=ge.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=me(c),p=f.xs.get(h);return p!==void 0?B.resolve(f.Ms.get(p)):f.Pi.getTargetData(d,h)}(r,a,wr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:ge.min(),n?i:Te())).next(l=>(v3(r,rV(e),l),{documents:l,Qs:i})))}function v3(t,e,n){let r=t.Os.get(e)||ge.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class y_{constructor(){this.activeTargetIds=cV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class x3{constructor(){this.Mo=new y_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new y_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="ConnectivityMonitor";class x_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(v_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(v_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=null;function qm(){return fu===null?fu=function(){return 268435456+Math.round(2147483648*Math.random())}():fu++,"0x"+fu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="RestConnection",_3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class b3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===kd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=qm(),l=this.zo(e,n.toUriEncodedString());Z(cp,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=ai(d);return this.Jo(e,l,c,r,h).then(f=>(Z(cp,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Xo(cp,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=_3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class N3 extends b3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=qm();return new Promise((l,c)=>{const d=new vT;d.setWithCredentials(!0),d.listenOnce(xT.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Uu.NO_ERROR:const f=d.getResponseJson();Z(Vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Uu.TIMEOUT:Z(Vt,`RPC '${e}' ${a} timed out`),c(new X(U.DEADLINE_EXCEEDED,"Request time out"));break;case Uu.HTTP_ERROR:const p=d.getStatus();if(Z(Vt,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const _=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(w)>=0?w:U.UNKNOWN}(I.status);c(new X(_,I.message))}else c(new X(U.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new X(U.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Z(Vt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);Z(Vt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=qm(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=bT(),l=_T(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");Z(Vt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let p=!1,v=!1;const I=new E3({Yo:S=>{v?Z(Vt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(p||(Z(Vt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Z(Vt,`RPC '${e}' stream ${s} sending:`,S),f.send(S))},Zo:()=>f.close()}),_=(S,b,w)=>{S.listen(b,C=>{try{w(C)}catch(R){setTimeout(()=>{throw R},0)}})};return _(f,cl.EventType.OPEN,()=>{v||(Z(Vt,`RPC '${e}' stream ${s} transport opened.`),I.o_())}),_(f,cl.EventType.CLOSE,()=>{v||(v=!0,Z(Vt,`RPC '${e}' stream ${s} transport closed`),I.a_(),this.E_(f))}),_(f,cl.EventType.ERROR,S=>{v||(v=!0,Xo(Vt,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),I.a_(new X(U.UNAVAILABLE,"The operation could not be completed")))}),_(f,cl.EventType.MESSAGE,S=>{var b;if(!v){const w=S.data[0];Re(!!w,16349);const C=w,R=(C==null?void 0:C.error)||((b=C[0])==null?void 0:b.error);if(R){Z(Vt,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let A=function(T){const E=pt[T];if(E!==void 0)return iS(E)}(L),N=R.message;A===void 0&&(A=U.INTERNAL,N="Unknown error status: "+L+" with message "+R.message),v=!0,I.a_(new X(A,N)),f.close()}else Z(Vt,`RPC '${e}' stream ${s} received:`,w),I.u_(w)}}),_(l,wT.STAT_EVENT,S=>{S.stat===Dm.PROXY?Z(Vt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===Dm.NOPROXY&&Z(Vt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function up(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){return new IV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="PersistentStream";class _S{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Yr(n.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new X(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Z(w_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Z(w_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T3 extends _S{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=kV(this.serializer,e),r=function(i){if(!("targetChange"in i))return ge.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?_r(a.readTime):ge.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Hm(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=Fm(c)?{documents:DV(i,c)}:{query:hS(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=lS(i,a.resumeToken);const d=Bm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ge.min())>0){l.readTime=Od(i,a.snapshotVersion.toTimestamp());const d=Bm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=MV(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Hm(this.serializer),n.removeTarget=e,this.q_(n)}}class S3 extends _S{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=PV(e.writeResults,e.commitTime),r=_r(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RV(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{}class I3 extends C3{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,$m(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(U.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,$m(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new X(U.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class j3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yr(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="RemoteStore";class A3{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{io(this)&&(Z(Gi,"Restarting streams for network reachability change."),await async function(c){const d=me(c);d.Ea.add(4),await Nc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Oh(d)}(this))})}),this.Ra=new j3(r,s)}}async function Oh(t){if(io(t))for(const e of t.da)await e(!0)}async function Nc(t){for(const e of t.da)await e(!1)}function bS(t,e){const n=me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Yy(n)?Qy(n):_a(n).O_()&&Ky(n,e))}function Gy(t,e){const n=me(t),r=_a(n);n.Ia.delete(e),r.O_()&&ES(n,e),n.Ia.size===0&&(r.O_()?r.L_():io(n)&&n.Ra.set("Unknown"))}function Ky(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_a(t).Y_(e)}function ES(t,e){t.Va.Ue(e),_a(t).Z_(e)}function Qy(t){t.Va=new NV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_a(t).start(),t.Ra.ua()}function Yy(t){return io(t)&&!_a(t).x_()&&t.Ia.size>0}function io(t){return me(t).Ea.size===0}function NS(t){t.Va=void 0}async function k3(t){t.Ra.set("Online")}async function R3(t){t.Ia.forEach((e,n)=>{Ky(t,e)})}async function P3(t,e){NS(t),Yy(t)?(t.Ra.ha(e),Qy(t)):t.Ra.set("Unknown")}async function D3(t,e,n){if(t.Ra.set("Online"),e instanceof aS&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){Z(Gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vd(t,r)}else if(e instanceof Hu?t.Va.Ze(e):e instanceof oS?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const r=await xS(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),ES(i,c);const f=new As(h.target,c,d,h.sequenceNumber);Ky(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Z(Gi,"Failed to raise snapshot:",r),await Vd(t,r)}}async function Vd(t,e,n){if(!xa(e))throw e;t.Ea.add(1),await Nc(t),t.Ra.set("Offline"),n||(n=()=>xS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z(Gi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Oh(t)})}function TS(t,e){return e().catch(n=>Vd(t,n,e))}async function Mh(t){const e=me(t),n=Js(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Py;for(;L3(e);)try{const s=await g3(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,O3(e,s)}catch(s){await Vd(e,s)}SS(e)&&CS(e)}function L3(t){return io(t)&&t.Ta.length<10}function O3(t,e){t.Ta.push(e);const n=Js(t);n.O_()&&n.X_&&n.ea(e.mutations)}function SS(t){return io(t)&&!Js(t).x_()&&t.Ta.length>0}function CS(t){Js(t).start()}async function M3(t){Js(t).ra()}async function V3(t){const e=Js(t);for(const n of t.Ta)e.ea(n.mutations)}async function F3(t,e,n){const r=t.Ta.shift(),s=Uy.from(r,e,n);await TS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Mh(t)}async function U3(t,e){e&&Js(t).X_&&await async function(r,s){if(function(a){return _V(a)&&a!==U.ABORTED}(s.code)){const i=r.Ta.shift();Js(r).B_(),await TS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Mh(r)}}(t,e),SS(t)&&CS(t)}async function __(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),Z(Gi,"RemoteStore received new credentials");const r=io(n);n.Ea.add(3),await Nc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Oh(n)}async function B3(t,e){const n=me(t);e?(n.Ea.delete(2),await Oh(n)):e||(n.Ea.add(2),await Nc(n),n.Ra.set("Unknown"))}function _a(t){return t.ma||(t.ma=function(n,r,s){const i=me(n);return i.sa(),new T3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:k3.bind(null,t),t_:R3.bind(null,t),r_:P3.bind(null,t),H_:D3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Yy(t)?Qy(t):t.Ra.set("Unknown")):(await t.ma.stop(),NS(t))})),t.ma}function Js(t){return t.fa||(t.fa=function(n,r,s){const i=me(n);return i.sa(),new S3(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:M3.bind(null,t),r_:U3.bind(null,t),ta:V3.bind(null,t),na:F3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Mh(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(Gi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Xy(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jy(t,e){if(Yr("AsyncQueue",`${e}: ${t}`),xa(t))return new X(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=ul(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Fo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.ga=new tt(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):he(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ra{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ra(e,n,Fo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class z3{constructor(){this.queries=E_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=me(n),i=s.queries;s.queries=E_(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new X(U.ABORTED,"Firestore shutting down"))}}function E_(){return new so(t=>WT(t),Ah)}async function Zy(t,e){const n=me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new $3,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Jy(a,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&tv(n)}async function ev(t,e){const n=me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function H3(t,e){const n=me(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&tv(n)}function W3(t,e,n){const r=me(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function tv(t){t.Ca.forEach(e=>{e.next()})}var Gm,N_;(N_=Gm||(Gm={})).Ma="default",N_.Cache="cache";class nv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ra(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.key=e}}class jS{constructor(e){this.key=e}}class q3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=qT(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new b_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),v=kh(this.query,f)?f:null,I=!!p&&this.mutatedKeys.has(p.key),_=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;p&&v?p.data.isEqual(v.data)?I!==_&&(r.track({type:3,doc:v}),S=!0):this.su(p,v)||(r.track({type:2,doc:v}),S=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(l=!0)):!p&&v?(r.track({type:0,doc:v}),S=!0):p&&!v&&(r.track({type:1,doc:p}),S=!0,(c||d)&&(l=!0)),S&&(v?(a=a.add(v),i=_?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(v,I){const _=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:S})}};return _(v)-_(I)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new ra(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new b_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new jS(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new IS(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rv="SyncEngine";class G3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class K3{constructor(e){this.key=e,this.hu=!1}}class Q3{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new so(l=>WT(l),Ah),this.Iu=new Map,this.Eu=new Set,this.du=new tt(ce.comparator),this.Au=new Map,this.Ru=new zy,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Y3(t,e,n=!0){const r=LS(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await AS(r,e,n,!0),s}async function X3(t,e){const n=LS(t);await AS(n,e,!0,!1)}async function AS(t,e,n,r){const s=await y3(t.localStore,wr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await J3(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&bS(t.remoteStore,s),l}async function J3(t,e,n,r,s){t.pu=(f,p,v)=>async function(_,S,b,w){let C=S.view.ru(b);C.Cs&&(C=await g_(_.localStore,S.query,!1).then(({documents:N})=>S.view.ru(N,C)));const R=w&&w.targetChanges.get(S.targetId),L=w&&w.targetMismatches.get(S.targetId)!=null,A=S.view.applyChanges(C,_.isPrimaryClient,R,L);return S_(_,S.targetId,A.au),A.snapshot}(t,f,p,v);const i=await g_(t.localStore,e,!0),a=new q3(e,i.Qs),l=a.ru(i.documents),c=Ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);S_(t,n,d.au);const h=new G3(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Z3(t,e,n){const r=me(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Ah(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gy(r.remoteStore,s.targetId),Km(r,s.targetId)}).catch(va)):(Km(r,s.targetId),await Wm(r.localStore,s.targetId,!0))}async function e6(t,e){const n=me(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gy(n.remoteStore,r.targetId))}async function t6(t,e,n){const r=l6(t);try{const s=await function(a,l){const c=me(a),d=Ke.now(),h=l.reduce((v,I)=>v.add(I.key),Te());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=Xr(),_=Te();return c.Ns.getEntries(v,h).next(S=>{I=S,I.forEach((b,w)=>{w.isValidDocument()||(_=_.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,I)).next(S=>{f=S;const b=[];for(const w of l){const C=mV(w,f.get(w.key).overlayedDocument);C!=null&&b.push(new hi(w.key,C,OT(C.value.mapValue),Mn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,b,l)}).next(S=>{p=S;const b=S.applyToLocalDocumentSet(f,_);return c.documentOverlayCache.saveOverlays(v,S.batchId,b)})}).then(()=>({batchId:p.batchId,changes:KT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new tt(Ne)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Tc(r,s.changes),await Mh(r.remoteStore)}catch(s){const i=Jy(s,"Failed to persist write");n.reject(i)}}async function kS(t,e){const n=me(t);try{const r=await p3(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Re(a.hu,14607):s.removedDocuments.size>0&&(Re(a.hu,42227),a.hu=!1))}),await Tc(n,r,e)}catch(r){await va(r)}}function T_(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=me(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(d=!0)}),d&&tv(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n6(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new tt(ce.comparator);a=a.insert(i,Bt.newNoDocument(i,ge.min()));const l=Te().add(i),c=new Dh(ge.min(),new Map,new tt(Ne),a,l);await kS(r,c),r.du=r.du.remove(i),r.Au.delete(e),sv(r)}else await Wm(r.localStore,e,!1).then(()=>Km(r,e,n)).catch(va)}async function r6(t,e){const n=me(t),r=e.batch.batchId;try{const s=await f3(n.localStore,e);PS(n,r,null),RS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tc(n,s)}catch(s){await va(s)}}async function s6(t,e,n){const r=me(t);try{const s=await function(a,l){const c=me(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(Re(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);PS(r,e,n),RS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tc(r,s)}catch(s){await va(s)}}function RS(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function PS(t,e,n){const r=me(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Km(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||DS(t,r)})}function DS(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Gy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sv(t))}function S_(t,e,n){for(const r of n)r instanceof IS?(t.Ru.addReference(r.key,e),i6(t,r)):r instanceof jS?(Z(rv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||DS(t,r.key)):he(19791,{wu:r})}function i6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Z(rv,"New document in limbo: "+n),t.Eu.add(r),sv(t))}function sv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce($e.fromString(e)),r=t.fu.next();t.Au.set(r,new K3(n)),t.du=t.du.insert(n,r),bS(t.remoteStore,new As(wr(jh(n.path)),r,"TargetPurposeLimboResolution",Sh.ce))}}async function Tc(t,e,n){const r=me(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Wy.As(c.targetId,d);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const h=me(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(d,p=>B.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>B.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!xa(f))throw f;Z(qy,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const v=h.Ms.get(p),I=v.snapshotVersion,_=v.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(p,_)}}}(r.localStore,i))}async function o6(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){Z(rv,"User change. New user:",e.toKey());const r=await vS(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new X(U.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tc(n,r.Ls)}}function a6(t,e){const n=me(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function LS(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=a6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n6.bind(null,e),e.Pu.H_=H3.bind(null,e.eventManager),e.Pu.yu=W3.bind(null,e.eventManager),e}function l6(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s6.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return h3(this.persistence,new c3,e.initialUser,this.serializer)}Cu(e){return new yS(Hy.mi,this.serializer)}Du(e){return new x3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class c6 extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Re(this.persistence.referenceDelegate instanceof Md,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KV(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new yS(r=>Md.mi(r,n),this.serializer)}}class Qm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>T_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o6.bind(null,this.syncEngine),await B3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z3}()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=function(i){return new N3(i)}(e.databaseInfo);return function(i,a,l,c){return new I3(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new A3(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>T_(this.syncEngine,n,0),function(){return x_.v()?new x_:new w3}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,h){const f=new Q3(s,i,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=me(s);Z(Gi,"RemoteStore shutting down."),i.Ea.add(5),await Nc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class u6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=Ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{Z(Zs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Z(Zs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dp(t,e){t.asyncQueue.verifyOperationInProgress(),Z(Zs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await vS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function C_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await d6(t);Z(Zs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>__(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>__(e.remoteStore,s)),t._onlineComponents=e}async function d6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(Zs,"Using user provided OfflineComponentProvider");try{await dp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xo("Error using user provided cache. Falling back to memory cache: "+n),await dp(t,new Fd)}}else Z(Zs,"Using default OfflineComponentProvider"),await dp(t,new c6(void 0));return t._offlineComponents}async function ov(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(Zs,"Using user provided OnlineComponentProvider"),await C_(t,t._uninitializedComponentsProvider._online)):(Z(Zs,"Using default OnlineComponentProvider"),await C_(t,new Qm))),t._onlineComponents}function h6(t){return ov(t).then(e=>e.syncEngine)}function f6(t){return ov(t).then(e=>e.datastore)}async function Ud(t){const e=await ov(t),n=e.eventManager;return n.onListen=Y3.bind(null,e.syncEngine),n.onUnlisten=Z3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=X3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=e6.bind(null,e.syncEngine),n}function p6(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new iv({next:p=>{h.Nu(),a.enqueueAndForget(()=>ev(i,f));const v=p.docs.has(l);!v&&p.fromCache?d.reject(new X(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&c&&c.source==="server"?d.reject(new X(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new nv(jh(l.path),h,{includeMetadataChanges:!0,qa:!0});return Zy(i,f)}(await Ud(t),t.asyncQueue,e,n,r)),r.promise}function m6(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const h=new iv({next:p=>{h.Nu(),a.enqueueAndForget(()=>ev(i,f)),p.fromCache&&c.source==="server"?d.reject(new X(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new nv(l,h,{includeMetadataChanges:!0,qa:!0});return Zy(i,f)}(await Ud(t),t.asyncQueue,e,n,r)),r.promise}function g6(t,e,n){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await f6(t);r.resolve(async function(a,l,c){var _;const d=me(a),{request:h,gt:f,parent:p}=LV(d.serializer,nV(l),c);d.connection.$o||delete h.parent;const v=(await d.Ho("RunAggregationQuery",d.serializer.databaseId,p,h,1)).filter(S=>!!S.result);Re(v.length===1,64727);const I=(_=v[0].result)==null?void 0:_.aggregateFields;return Object.keys(I).reduce((S,b)=>(S[f[b]]=I[b],S),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firestore.googleapis.com",j_=!0;class A_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MS,this.ssl=j_}else this.host=e.host,this.ssl=e.ssl??j_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qV)throw new X(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OS(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new A_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new A_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vM;switch(r.type){case"firstParty":return new bM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=I_.get(n);r&&(Z("ComponentProvider","Removing Datastore"),I_.delete(n),r.terminate())}(this),Promise.resolve()}}function y6(t,e,n,r={}){var d;t=tn(t,Vh);const s=ai(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(hy(`https://${l}`),fy("Firestore",!0)),i.host!==MS&&i.host!==l&&Xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Gr(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ft.MOCK_USER;else{h=oN(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new X(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ft(p)}t._authCredentials=new xM(new NT(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_c(n,st._jsonSchema))return new st(e,r||null,new ce($e.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:yt("string",st._jsonSchemaVersion),referencePath:yt("string")};class Hs extends ss{constructor(e,n,r){super(e,n,jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new ce(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function St(t,e,...n){if(t=Be(t),TT("collection","path",e),t instanceof Vh){const r=$e.fromString(e,...n);return z0(r),new Hs(t,null,r)}{if(!(t instanceof st||t instanceof Hs))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return z0(r),new Hs(t.firestore,null,r)}}function ze(t,e,...n){if(t=Be(t),arguments.length===1&&(e=Ry.newId()),TT("doc","path",e),t instanceof Vh){const r=$e.fromString(e,...n);return $0(r),new st(t,null,new ce(r))}{if(!(t instanceof st||t instanceof Hs))throw new X(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return $0(r),new st(t.firestore,t instanceof Hs?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="AsyncQueue";class R_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wS(this,"async_queue_retry"),this._c=()=>{const r=up();r&&Z(k_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=up();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=up();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xa(e))throw e;Z(k_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Yr("INTERNAL UNHANDLED ERROR: ",P_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Xy.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&he(47125,{Pc:P_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function P_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Cr extends Vh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new R_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R_(e),this._firestoreClient=void 0,await e}}}function v6(t,e){const n=typeof t=="object"?t:xh(),r=typeof t=="string"?t:kd,s=li(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=rN("firestore");i&&y6(s,...i)}return s}function Sc(t){if(t._terminated)throw new X(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||x6(t),t._firestoreClient}function x6(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new BM(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,OS(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new u6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class _6{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Lt.fromBase64String(e))}catch(n){throw new X(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_c(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:yt("string",Dn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(_c(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:yt("string",br._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_c(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new X(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:yt("string",Er._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=/^__.*__$/;class E6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new bc(e,this.data,n,this.fieldTransforms)}}class VS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function FS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:t})}}class Uh{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FS(this.Ac)&&b6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class N6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}Cc(e,n,r,s=!1){return new Uh({Ac:e,methodName:n,Dc:r,path:kt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bh(t){const e=t._freezeSettings(),n=Lh(t._databaseId);return new N6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function US(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);cv("Data must be an object, but it was:",a,r);const l=BS(r,a);let c,d;if(i.merge)c=new En(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Ym(e,f,n);if(!a.contains(p))throw new X(U.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);zS(h,p)||h.push(p)}c=new En(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new E6(new dn(l),c,d)}class $h extends Cc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $h}}function T6(t,e,n){return new Uh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class av extends Cc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=T6(this,e,!0),r=this.vc.map(i=>ba(i,n)),s=new ta(r);return new nS(e.path,s)}isEqual(e){return e instanceof av&&Gr(this.vc,e.vc)}}class lv extends Cc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new rc(e.serializer,XT(e.serializer,this.Fc));return new nS(e.path,n)}isEqual(e){return e instanceof lv&&this.Fc===e.Fc}}function S6(t,e,n,r){const s=t.Cc(1,e,n);cv("Data must be an object, but it was:",s,r);const i=[],a=dn.empty();di(r,(c,d)=>{const h=uv(e,c,n);d=Be(d);const f=s.yc(h);if(d instanceof $h)i.push(h);else{const p=ba(d,f);p!=null&&(i.push(h),a.set(h,p))}});const l=new En(i);return new VS(a,l,s.fieldTransforms)}function C6(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[Ym(e,r,n)],c=[s];if(i.length%2!=0)throw new X(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Ym(e,i[p])),c.push(i[p+1]);const d=[],h=dn.empty();for(let p=l.length-1;p>=0;--p)if(!zS(d,l[p])){const v=l[p];let I=c[p];I=Be(I);const _=a.yc(v);if(I instanceof $h)d.push(v);else{const S=ba(I,_);S!=null&&(d.push(v),h.set(v,S))}}const f=new En(d);return new VS(h,f,a.fieldTransforms)}function I6(t,e,n,r=!1){return ba(n,t.Cc(r?4:3,e))}function ba(t,e){if($S(t=Be(t)))return cv("Unsupported field value:",e,t),BS(t,e);if(t instanceof Cc)return function(r,s){if(!FS(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=ba(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Od(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Od(s.serializer,i)}}if(r instanceof br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:lS(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$y(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(a,l){return{mapValue:{fields:{[DT]:{stringValue:LT},[Rd]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Vy(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Th(r)}`)}(t,e)}function BS(t,e){const n={};return IT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(t,(r,s)=>{const i=ba(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $S(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof br||t instanceof Dn||t instanceof st||t instanceof Cc||t instanceof Er)}function cv(t,e,n){if(!$S(n)||!ST(n)){const r=Th(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ym(t,e,n){if((e=Be(e))instanceof Fh)return e._internalPath;if(typeof e=="string")return uv(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const j6=new RegExp("[~\\*/\\[\\]]");function uv(t,e,n){if(e.search(j6)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fh(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new X(U.INVALID_ARGUMENT,l+t+c)}function zS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A6 extends HS{data(){return super.data()}}function zh(t,e){return typeof e=="string"?uv(t,e):e instanceof Fh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dv{}class hv extends dv{}function Nr(t,e,...n){let r=[];e instanceof dv&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof fv).length,l=i.filter(c=>c instanceof Hh).length;if(a>1||a>0&&l>0)throw new X(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Hh extends hv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hh(e,n,r)}_apply(e){const n=this._parse(e);return qS(e._query,n),new ss(e.firestore,e.converter,Um(e._query,n))}_parse(e){const n=Bh(e.firestore);return function(i,a,l,c,d,h,f){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new X(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){O_(f,h);const I=[];for(const _ of f)I.push(L_(c,i,_));p={arrayValue:{values:I}}}else p=L_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||O_(f,h),p=I6(l,a,f,h==="in"||h==="not-in");return gt.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cn(t,e,n){const r=e,s=zh("where",t);return Hh._create(s,r,n)}class fv extends dv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)qS(a,c),a=Um(a,c)}(e._query,n),new ss(e.firestore,e.converter,Um(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pv extends hv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pv(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new X(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tc(i,a)}(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new wa(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ws(t,e="asc"){const n=e,r=zh("orderBy",t);return pv._create(r,n)}class mv extends hv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new mv(e,n,r)}_apply(e){return new ss(e.firestore,e.converter,Dd(e._query,this._limit,this._limitType))}}function hp(t){return jM("limit",t),mv._create("limit",t,"F")}function L_(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new X(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&n.indexOf("/")!==-1)throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!ce.isDocumentKey(r))throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return X0(t,new ce(r))}if(n instanceof st)return X0(t,n._key);throw new X(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Th(n)}.`)}function O_(t,e){if(!Array.isArray(t)||t.length===0)throw new X(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qS(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class k6{convertValue(e,n="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return di(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Rd].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>lt(a.doubleValue));return new Er(n)}convertGeoPoint(e){return new br(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ih(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const n=Qs(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);Re(mS(r),9688,{name:e});const s=new Zl(r.get(1),r.get(3)),i=new ce(r.popFirst(5));return s.isEqual(n)||Yr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function R6(){return new w6("count")}class hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Di extends HS{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Di._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Di._jsonSchemaVersion="firestore/documentSnapshot/1.0",Di._jsonSchema={type:yt("string",Di._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Wu extends Di{data(e={}){return super.data(e)}}class Li{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new hl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wu(this._firestore,this._userDataWriter,r.key,r,new hl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Wu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Wu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new hl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:P6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Li._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){t=tn(t,st);const e=tn(t.firestore,Cr);return p6(Sc(e),t._key).then(n=>XS(e,t,n))}Li._jsonSchemaVersion="firestore/querySnapshot/1.0",Li._jsonSchema={type:yt("string",Li._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class Wh extends k6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function Vn(t){t=tn(t,ss);const e=tn(t.firestore,Cr),n=Sc(e),r=new Wh(e);return WS(t._query),m6(n,t._query).then(s=>new Li(e,r,t,s))}function KS(t,e,n){t=tn(t,st);const r=tn(t.firestore,Cr),s=GS(t.converter,e);return qh(r,[US(Bh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mn.none())])}function hn(t,e,n,...r){t=tn(t,st);const s=tn(t.firestore,Cr),i=Bh(s);let a;return a=typeof(e=Be(e))=="string"||e instanceof Fh?C6(i,"updateDoc",t._key,e,n,r):S6(i,"updateDoc",t._key,e),qh(s,[a.toMutation(t._key,Mn.exists(!0))])}function D6(t){return qh(tn(t.firestore,Cr),[new Fy(t._key,Mn.none())])}function QS(t,e){const n=tn(t.firestore,Cr),r=ze(t),s=GS(t.converter,e);return qh(n,[US(Bh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}function YS(t,...e){var c,d,h;t=Be(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||D_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(D_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof st)a=tn(t.firestore,Cr),l=jh(t._key.path),i={next:f=>{e[r]&&e[r](XS(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=tn(t,ss);a=tn(f.firestore,Cr),l=f._query;const p=new Wh(a);i={next:v=>{e[r]&&e[r](new Li(a,p,f,v))},error:e[r+1],complete:e[r+2]},WS(t._query)}return function(p,v,I,_){const S=new iv(_),b=new nv(v,S,I);return p.asyncQueue.enqueueAndForget(async()=>Zy(await Ud(p),b)),()=>{S.Nu(),p.asyncQueue.enqueueAndForget(async()=>ev(await Ud(p),b))}}(Sc(a),l,s,i)}function qh(t,e){return function(r,s){const i=new xr;return r.asyncQueue.enqueueAndForget(async()=>t6(await h6(r),s,i)),i.promise}(Sc(t),e)}function XS(t,e,n){const r=n.docs.get(e._key),s=new Wh(t);return new Di(t,s,e._key,r,new hl(n.hasPendingWrites,n.fromCache),e.converter)}function pu(t){return L6(t,{count:R6()})}function L6(t,e){const n=tn(t.firestore,Cr),r=Sc(n),s=FM(e,(i,a)=>new xV(a,i.aggregateType,i._internalFieldPath));return g6(r,t._query,s).then(i=>function(l,c,d){const h=new Wh(l);return new _6(c,h,d)}(n,t,i))}function Xm(...t){return new av("arrayUnion",t)}function O6(t){return new lv("increment",t)}(function(e,n=!0){(function(s){ya=s})(ro),rr(new Bn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Cr(new wM(r.getProvider("auth-internal")),new EM(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new X(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(d.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yn(V0,F0,e),yn(V0,F0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firebasestorage.googleapis.com",ZS="storageBucket",M6=2*60*1e3,V6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends Hn{constructor(e,n,r=0){super(fp(e),`Firebase Storage: ${n} (${fp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function fp(t){return"storage/"+t}function gv(){const t="An unknown error occurred, please check the error payload for server response.";return new ot(it.UNKNOWN,t)}function F6(t){return new ot(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function U6(t){return new ot(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function B6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(it.UNAUTHENTICATED,t)}function $6(){return new ot(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function z6(t){return new ot(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function H6(){return new ot(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function W6(){return new ot(it.CANCELED,"User canceled the upload/download.")}function q6(t){return new ot(it.INVALID_URL,"Invalid URL '"+t+"'.")}function G6(t){return new ot(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function K6(){return new ot(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZS+"' property when initializing the app?")}function Q6(){return new ot(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Y6(){return new ot(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function X6(t){return new ot(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jm(t){return new ot(it.INVALID_ARGUMENT,t)}function eC(){return new ot(it.APP_DELETED,"The Firebase app was deleted.")}function J6(t){return new ot(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new ot(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function el(t){throw new ot(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Nn.makeFromUrl(e,n)}catch{return new Nn(e,"")}if(r.path==="")return r;throw G6(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),I={bucket:1,path:3},_=n===JS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",b=new RegExp(`^https?://${_}/${s}/${S}`,"i"),C=[{regex:l,indices:c,postModify:i},{regex:v,indices:I,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<C.length;R++){const L=C[R],A=L.regex.exec(e);if(A){const N=A[L.indices.bucket];let y=A[L.indices.path];y||(y=""),r=new Nn(N,y),L.postModify(r);break}}if(r==null)throw q6(e);return r}}class Z6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function h(...S){d||(d=!0,e.apply(null,S))}function f(S){s=setTimeout(()=>{s=null,t(v,c())},S)}function p(){i&&clearTimeout(i)}function v(S,...b){if(d){p();return}if(S){p(),h.call(null,S,...b);return}if(c()||a){p(),h.call(null,S,...b);return}r<64&&(r*=2);let C;l===1?(l=2,C=0):C=(r+Math.random())*1e3,f(C)}let I=!1;function _(S){I||(I=!0,p(),!d&&(s!==null?(S||(l=2),clearTimeout(s),f(0)):S||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,_(!0)},n),_}function tF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(t){return t!==void 0}function rF(t){return typeof t=="object"&&!Array.isArray(t)}function yv(t){return typeof t=="string"||t instanceof String}function M_(t){return vv()&&t instanceof Blob}function vv(){return typeof Blob<"u"}function V_(t,e,n,r){if(r<e)throw Jm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Jm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function tC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Oi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Oi||(Oi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n,r,s,i,a,l,c,d,h,f,p=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,_)=>{this.resolve_=I,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new mu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===Oi.NO_ERROR,c=i.getStatus();if(!l||sF(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Oi.ABORT;r(!1,new mu(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new mu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());nF(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=gv();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?eC():W6();a(c)}else{const c=H6();a(c)}};this.canceled_?n(!1,new mu(!1,null,!0)):this.backoffId_=eF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uF(t,e,n,r,s,i,a=!0,l=!1){const c=tC(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return lF(h,e),oF(h,n),aF(h,i),cF(h,r),new iF(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hF(...t){const e=dF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(vv())return new Blob(t);throw new ot(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){if(typeof atob>"u")throw X6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pp{constructor(e,n){this.data=e,this.contentType=n||null}}function mF(t,e){switch(t){case pr.RAW:return new pp(nC(e));case pr.BASE64:case pr.BASE64URL:return new pp(rC(t,e));case pr.DATA_URL:return new pp(yF(e),vF(e))}throw gv()}function nC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function gF(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(pr.DATA_URL,"Malformed data URL.")}return nC(e)}function rC(t,e){switch(t){case pr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case pr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw jl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=pF(e)}catch(s){throw s.message.includes("polyfill")?s:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class sC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(pr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=xF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function yF(t){const e=new sC(t);return e.base64?rC(pr.BASE64,e.rest):gF(e.rest)}function vF(t){return new sC(t).contentType}function xF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){let r=0,s="";M_(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(M_(this.data_)){const r=this.data_,s=fF(r,e,n);return s===null?null:new Ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ss(r,!0)}}static getBlob(...e){if(vv()){const n=e.map(r=>r instanceof Ss?r.data_:r);return new Ss(hF.apply(null,n))}else{const n=e.map(a=>yv(a)?mF(pr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new Ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){let e;try{e=JSON.parse(t)}catch{return null}return rF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _F(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function oC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t,e){return e}class Qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||bF}}let gu=null;function EF(t){return!yv(t)||t.length<2?t:oC(t)}function aC(){if(gu)return gu;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(i,a){return EF(a)}const n=new Qt("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Qt("size");return s.xform=r,t.push(s),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),gu=t,gu}function NF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Nn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function TF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return NF(r,t),r}function lC(t,e,n){const r=iC(e);return r===null?null:TF(t,r,n)}function SF(t,e,n,r){const s=iC(e);if(s===null||!yv(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,f=t.fullPath,p="/b/"+a(h)+"/o/"+a(f),v=xv(p,n,r),I=tC({alt:"media",token:d});return v+I})[0]}function CF(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class cC{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){if(!t)throw gv()}function IF(t,e){function n(r,s){const i=lC(t,s,e);return uC(i!==null),i}return n}function jF(t,e){function n(r,s){const i=lC(t,s,e);return uC(i!==null),SF(i,s,t.host,t._protocol)}return n}function dC(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=$6():s=B6():n.getStatus()===402?s=U6(t.bucket):n.getStatus()===403?s=z6(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function AF(t){const e=dC(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=F6(t.path)),i.serverResponse=s.serverResponse,i}return n}function kF(t,e,n){const r=e.fullServerUrl(),s=xv(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,l=new cC(s,i,jF(t,n),a);return l.errorHandler=AF(e),l}function RF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function PF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=RF(null,e)),r}function DF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let C="";for(let R=0;R<2;R++)C=C+Math.random().toString().slice(2);return C}const c=l();a["Content-Type"]="multipart/related; boundary="+c;const d=PF(e,r,s),h=CF(d,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+c+"--",v=Ss.getBlob(f,r,p);if(v===null)throw Q6();const I={name:d.fullPath},_=xv(i,t.host,t._protocol),S="POST",b=t.maxUploadRetryTime,w=new cC(_,S,IF(t,n),b);return w.urlParams=I,w.headers=a,w.body=v.uploadData(),w.errorHandler=dC(e),w}class LF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw el("cannot .send() more than once");if(ai(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw el("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw el("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw el("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw el("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class OF extends LF{initXhr(){this.xhr_.responseType="text"}}function hC(){return new OF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){this._service=e,n instanceof Nn?this._location=n:this._location=Nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ki(e,n)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oC(this._location.path)}get storage(){return this._service}get parent(){const e=wF(this._location.path);if(e===null)return null;const n=new Nn(this._location.bucket,e);return new Ki(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw J6(e)}}function MF(t,e,n){t._throwIfRoot("uploadBytes");const r=DF(t.storage,t._location,aC(),new Ss(e,!0),n);return t.storage.makeRequestWithTokens(r,hC).then(s=>({metadata:s,ref:t}))}function VF(t){t._throwIfRoot("getDownloadURL");const e=kF(t.storage,t._location,aC());return t.storage.makeRequestWithTokens(e,hC).then(n=>{if(n===null)throw Y6();return n})}function FF(t,e){const n=_F(t._location.path,e),r=new Nn(t._location.bucket,n);return new Ki(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t){return/^[A-Za-z]+:\/\//.test(t)}function BF(t,e){return new Ki(t,e)}function fC(t,e){if(t instanceof wv){const n=t;if(n._bucket==null)throw K6();const r=new Ki(n,n._bucket);return e!=null?fC(r,e):r}else return e!==void 0?FF(t,e):t}function $F(t,e){if(e&&UF(e)){if(t instanceof wv)return BF(t,e);throw Jm("To use ref(service, url), the first argument must be a Storage instance.")}else return fC(t,e)}function F_(t,e){const n=e==null?void 0:e[ZS];return n==null?null:Nn.makeFromBucketSpec(n,t)}function zF(t,e,n,r={}){t.host=`${e}:${n}`;const s=ai(e);s&&(hy(`https://${t.host}/b`),fy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:oN(i,t.app.options.projectId))}class wv{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=JS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=M6,this._maxUploadRetryTime=V6,this._requests=new Set,s!=null?this._bucket=Nn.makeFromBucketSpec(s,this._host):this._bucket=F_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=F_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){V_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){V_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ki(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Z6(eC());{const a=uF(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const U_="@firebase/storage",B_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="storage";function HF(t,e,n){return t=Be(t),MF(t,e,n)}function WF(t){return t=Be(t),VF(t)}function qF(t,e){return t=Be(t),$F(t,e)}function GF(t=xh(),e){t=Be(t);const r=li(t,pC).getImmediate({identifier:e}),s=rN("storage");return s&&KF(r,...s),r}function KF(t,e,n,r={}){zF(t,e,n,r)}function QF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new wv(n,r,s,e,ro)}function YF(){rr(new Bn(pC,QF,"PUBLIC").setMultipleInstances(!0)),yn(U_,B_,""),yn(U_,B_,"esm2020")}YF();const XF={apiKey:"AIzaSyAVk3CIK5hyAmjwVPh1p4i01vq-0Z5IsEA",authDomain:"zedctf.firebaseapp.com",projectId:"zedctf",storageBucket:"zedctf.firebasestorage.app",messagingSenderId:"574551910114",appId:"1:574551910114:web:8bcce937be224e1575a0bb",measurementId:"G-MEYRJGR69W"},Gh=fN(XF);fM(Gh);const sc=GL(Gh),ye=v6(Gh),JF=GF(Gh),mC=g.createContext({user:null,loading:!0}),gC=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(!0);return g.useEffect(()=>LD(sc,a=>{n(a),s(!1)}),[]),o.jsx(mC.Provider,{value:{user:e,loading:r},children:t})},Wn=()=>{const t=g.useContext(mC);if(!t)throw new Error("useAuthContext must be used within an AuthProvider");return t},yC=g.createContext({isAdmin:!1,isModerator:!1,permissions:[],loading:!0}),ZF=({children:t})=>{const{user:e}=Wn(),[n,r]=g.useState({isAdmin:!1,isModerator:!1,permissions:[],loading:!0});return g.useEffect(()=>{if(!e){console.log(" AdminProvider: No user found"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1});return}return console.log(" AdminProvider: Checking user role for UID:",e.uid),YS(ze(ye,"users",e.uid),i=>{if(i.exists()){const a=i.data();console.log(" User document found:",a);const l=a.role||"user",c=a.permissions||["read"];console.log(" User role:",l),console.log(" User permissions:",c),r({isAdmin:l==="admin",isModerator:l==="moderator"||l==="admin",permissions:c,loading:!1})}else console.log(" No user document found in Firestore"),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})},i=>{console.error(" Firestore error in AdminContext:",i),console.error("Error details:",i.code,i.message),r({isAdmin:!1,isModerator:!1,permissions:[],loading:!1})})},[e]),o.jsx(yC.Provider,{value:n,children:t})},Kh=()=>{const t=g.useContext(yC);if(!t)throw new Error("useAdminContext must be used within an AdminProvider");return t},e5=({children:t})=>{const{loading:e}=Wn();return e?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsx(o.Fragment,{children:t})},fs=({children:t})=>{const{user:e,loading:n}=Wn();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(dy,{to:"/login",replace:!0})},t5=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Kh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):!e&&!n?o.jsx(dy,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:t})},_i=({children:t})=>{const{isAdmin:e,isModerator:n,loading:r}=Kh();return r?o.jsx("div",{className:"min-h-screen bg-background pt-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Checking permissions..."})]})}):e||n?o.jsx(dy,{to:"/admin",replace:!0}):o.jsx(o.Fragment,{children:t})};function $_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ic(...t){return e=>{let n=!1;const r=t.map(s=>{const i=$_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():$_(t[s],null)}}}}function ft(...t){return g.useCallback(Ic(...t),t)}var n5=Symbol.for("react.lazy"),$d=Zd[" use ".trim().toString()];function r5(t){return typeof t=="object"&&t!==null&&"then"in t}function vC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===n5&&"_payload"in t&&r5(t._payload)}function _v(t){const e=i5(t),n=g.forwardRef((r,s)=>{let{children:i,...a}=r;vC(i)&&typeof $d=="function"&&(i=$d(i._payload));const l=g.Children.toArray(i),c=l.find(a5);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var s5=_v("Slot");function i5(t){const e=g.forwardRef((n,r)=>{let{children:s,...i}=n;if(vC(s)&&typeof $d=="function"&&(s=$d(s._payload)),g.isValidElement(s)){const a=c5(s),l=l5(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ic(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var o5=Symbol("radix.slottable");function a5(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===o5}function l5(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function c5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function xC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=xC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=xC(t))&&(r&&(r+=" "),r+=e);return r}const z_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,H_=wC,Qh=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return H_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const p=z_(h)||z_(f);return s[d][p]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:p,...v}=h;return Object.entries(v).every(I=>{let[_,S]=I;return Array.isArray(S)?S.includes({...i,...l}[_]):{...i,...l}[_]===S})?[...d,f,p]:d},[]);return H_(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)},bv="-",u5=t=>{const e=h5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(bv);return l[0]===""&&l.length!==1&&l.shift(),_C(l,e)||d5(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},_C=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?_C(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(bv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},W_=/^\[(.+)\]$/,d5=t=>{if(W_.test(t)){const e=W_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},h5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return p5(Object.entries(t.classGroups),n).forEach(([i,a])=>{Zm(a,r,i,e)}),r},Zm=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:q_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(f5(s)){Zm(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Zm(a,q_(e,i),n,r)})})},q_=(t,e)=>{let n=t;return e.split(bv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},f5=t=>t.isThemeGetter,p5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,m5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},bC="!",g5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let S=0;S<l.length;S++){let b=l[S];if(d===0){if(b===s&&(r||l.slice(S,S+i)===e)){c.push(l.slice(h,S)),h=S+i;continue}if(b==="/"){f=S;continue}}b==="["?d++:b==="]"&&d--}const p=c.length===0?l:l.substring(h),v=p.startsWith(bC),I=v?p.substring(1):p,_=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:I,maybePostfixModifierPosition:_}};return n?l=>n({className:l,parseClassName:a}):a},y5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},v5=t=>({cache:m5(t.cacheSize),parseClassName:g5(t),...u5(t)}),x5=/\s+/,w5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(x5);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(d);let I=!!v,_=r(I?p.substring(0,v):p);if(!_){if(!I){l=d+(l.length>0?" "+l:l);continue}if(_=r(p),!_){l=d+(l.length>0?" "+l:l);continue}I=!1}const S=y5(h).join(":"),b=f?S+bC:S,w=b+_;if(i.includes(w))continue;i.push(w);const C=s(_,I);for(let R=0;R<C.length;++R){const L=C[R];i.push(b+L)}l=d+(l.length>0?" "+l:l)}return l};function _5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=EC(e))&&(r&&(r+=" "),r+=n);return r}const EC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=EC(t[r]))&&(n&&(n+=" "),n+=e);return n};function b5(t,...e){let n,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),t());return n=v5(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=w5(c,n);return s(c,h),h}return function(){return i(_5.apply(null,arguments))}}const qe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},NC=/^\[(?:([a-z-]+):)?(.+)\]$/i,E5=/^\d+\/\d+$/,N5=new Set(["px","full","screen"]),T5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,C5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,I5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,j5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rr=t=>Uo(t)||N5.has(t)||E5.test(t),ps=t=>Ea(t,"length",M5),Uo=t=>!!t&&!Number.isNaN(Number(t)),mp=t=>Ea(t,"number",Uo),tl=t=>!!t&&Number.isInteger(Number(t)),A5=t=>t.endsWith("%")&&Uo(t.slice(0,-1)),xe=t=>NC.test(t),ms=t=>T5.test(t),k5=new Set(["length","size","percentage"]),R5=t=>Ea(t,k5,TC),P5=t=>Ea(t,"position",TC),D5=new Set(["image","url"]),L5=t=>Ea(t,D5,F5),O5=t=>Ea(t,"",V5),nl=()=>!0,Ea=(t,e,n)=>{const r=NC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},M5=t=>S5.test(t)&&!C5.test(t),TC=()=>!1,V5=t=>I5.test(t),F5=t=>j5.test(t),U5=()=>{const t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),s=qe("borderColor"),i=qe("borderRadius"),a=qe("borderSpacing"),l=qe("borderWidth"),c=qe("contrast"),d=qe("grayscale"),h=qe("hueRotate"),f=qe("invert"),p=qe("gap"),v=qe("gradientColorStops"),I=qe("gradientColorStopPositions"),_=qe("inset"),S=qe("margin"),b=qe("opacity"),w=qe("padding"),C=qe("saturate"),R=qe("scale"),L=qe("sepia"),A=qe("skew"),N=qe("space"),y=qe("translate"),T=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",xe,e],k=()=>[xe,e],P=()=>["",Rr,ps],H=()=>["auto",Uo,xe],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],q=()=>["","0",xe],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[Uo,xe];return{cacheSize:500,separator:":",theme:{colors:[nl],spacing:[Rr,ps],blur:["none","",ms,xe],brightness:V(),borderColor:[t],borderRadius:["none","","full",ms,xe],borderSpacing:k(),borderWidth:P(),contrast:V(),grayscale:q(),hueRotate:V(),invert:q(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[A5,ps],inset:j(),margin:j(),opacity:V(),padding:k(),saturate:V(),scale:V(),sepia:q(),skew:V(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[ms]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),xe]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tl,xe]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",tl,xe]}],"grid-cols":[{"grid-cols":[nl]}],"col-start-end":[{col:["auto",{span:["full",tl,xe]},xe]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[nl]}],"row-start-end":[{row:["auto",{span:[tl,xe]},xe]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[ms]},ms]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ms,ps]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mp]}],"font-family":[{font:[nl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",Uo,mp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rr,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rr,ps]}],"underline-offset":[{"underline-offset":["auto",Rr,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),P5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",R5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},L5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[I]}],"gradient-via-pos":[{via:[I]}],"gradient-to-pos":[{to:[I]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[Rr,xe]}],"outline-w":[{outline:[Rr,ps]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Rr,ps]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ms,O5]}],"shadow-color":[{shadow:[nl]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ms,xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[C]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[C]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[tl,xe]}],"translate-x":[{"translate-x":[y]}],"translate-y":[{"translate-y":[y]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rr,ps,mp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},B5=b5(U5);function Le(...t){return B5(wC(t))}const $5=Qh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",neon:"bg-transparent border-2 border-primary text-primary hover:bg-primary hover:text-primary-foreground transition-all duration-300 shadow-[0_0_20px_rgba(0,255,136,0.3)] hover:shadow-[0_0_30px_rgba(0,255,136,0.6)]",terminal:"bg-card border border-primary/30 text-primary hover:border-primary hover:bg-primary/10 font-mono"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Y=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?s5:"button";return o.jsx(a,{className:Le($5({variant:e,size:n,className:t})),ref:i,...s})});Y.displayName="Button";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...H5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:SC("lucide",s),...l},[...a.map(([d,h])=>g.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(W5,{ref:i,iconNode:e,className:SC(`lucide-${z5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=re("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=re("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=re("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=re("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=re("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=re("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=re("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=re("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=re("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=re("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=re("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=re("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=re("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=re("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=re("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=re("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=re("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=re("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=re("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=re("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),gU="/ZedCTF/favicon.png",dt=()=>{var I;const[t,e]=g.useState(!1),{user:n}=Wn(),{isAdmin:r,isModerator:s,loading:i}=Kh(),a=zn(),l=to(),[c,d]=g.useState(!1),h=async()=>{d(!0);try{await OD(sc),a("/"),e(!1)}catch(_){console.error("Error signing out:",_)}finally{d(!1)}},f=_=>l.pathname===_,p=!i&&(r||s),v=!i&&!r&&!s;return o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-border bg-background/95 backdrop-blur-lg supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs(Fe,{to:"/",className:"flex items-center gap-2",children:[o.jsx("img",{src:gU,alt:"ZedCTF",className:"w-8 h-8"}),o.jsx("span",{className:"text-2xl font-bold text-green-600",children:"ZedCTF"})]}),o.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[o.jsxs(Fe,{to:"/",className:`flex items-center gap-2 transition-colors group ${f("/")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(J_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Home"]}),v&&o.jsxs(Fe,{to:"/dashboard",className:`flex items-center gap-2 transition-colors group ${f("/dashboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(zd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Dashboard"]}),v&&o.jsxs(Fe,{to:"/practice",className:`flex items-center gap-2 transition-colors group ${f("/practice")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Jn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Practice"]}),v&&o.jsxs(Fe,{to:"/live",className:`flex items-center gap-2 transition-colors group ${f("/live")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(X_,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"LIVE CTF"]}),v&&o.jsxs(Fe,{to:"/leaderboard",className:`flex items-center gap-2 transition-colors group ${f("/leaderboard")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(nn,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Leaderboard"]}),v&&o.jsxs(Fe,{to:"/writeups",className:`flex items-center gap-2 transition-colors group ${f("/writeups")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Hd,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Writeups"]}),p&&o.jsxs(Fe,{to:"/admin",className:`flex items-center gap-2 transition-colors group ${f("/admin")?"text-green-600":"text-foreground/80 hover:text-green-600"}`,children:[o.jsx(Xe,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),"Admin"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[v&&o.jsx(Y,{variant:"ghost",size:"icon",className:"hidden sm:flex",children:o.jsx(la,{className:"w-5 h-5"})}),v&&o.jsxs(Y,{variant:"ghost",size:"icon",className:"relative",children:[o.jsx(G5,{className:"w-5 h-5"}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}),o.jsx(Y,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>e(!t),children:o.jsx(lU,{className:"w-5 h-5"})}),n?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-sm text-foreground/80 hidden sm:block",children:[n.displayName||((I=n.email)==null?void 0:I.split("@")[0]),p&&" (Admin)"]}),o.jsxs(Y,{variant:"default",size:"sm",className:"bg-red-500 hover:bg-red-600 text-white gap-2",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(eb,{className:"w-4 h-4"}),c?"...":"Logout"]})]}):o.jsx(Fe,{to:"/login",children:o.jsxs(Y,{variant:"default",size:"sm",className:"bg-green-500 hover:bg-green-600 text-white gap-2",children:[o.jsx(Cn,{className:"w-4 h-4"}),"Sign In"]})})]})]}),t&&o.jsx("div",{className:"md:hidden border-t border-border bg-background/95 backdrop-blur-lg animate-fade-in",children:o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs(Fe,{to:"/",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(J_,{className:"w-5 h-5"}),"Home"]}),v&&o.jsxs(Fe,{to:"/dashboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/dashboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(zd,{className:"w-5 h-5"}),"Dashboard"]}),v&&o.jsxs(Fe,{to:"/practice",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/practice")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Jn,{className:"w-5 h-5"}),"Practice"]}),v&&o.jsxs(Fe,{to:"/live",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/live")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),o.jsx(X_,{className:"w-5 h-5"}),"LIVE CTF"]}),v&&o.jsxs(Fe,{to:"/leaderboard",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/leaderboard")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(nn,{className:"w-5 h-5"}),"Leaderboard"]}),v&&o.jsxs(Fe,{to:"/writeups",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/writeups")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Hd,{className:"w-5 h-5"}),"Writeups"]}),p&&o.jsxs(Fe,{to:"/admin",className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-all ${f("/admin")?"text-green-600 bg-green-50":"text-foreground/80 hover:text-green-600 hover:bg-accent"}`,onClick:()=>e(!1),children:[o.jsx(Xe,{className:"w-5 h-5"}),"Admin"]}),o.jsx("div",{className:"px-4 pt-2 border-t border-border",children:n?o.jsxs(Y,{variant:"default",className:"w-full justify-start gap-2 bg-red-500 hover:bg-red-600",onClick:h,disabled:c,children:[c?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(eb,{className:"w-4 h-4"}),c?"Signing out...":"Logout"]}):o.jsx(Fe,{to:"/login",onClick:()=>e(!1),children:o.jsxs(Y,{variant:"default",className:"w-full justify-start gap-2 bg-green-500 hover:bg-green-600",children:[o.jsx(Cn,{className:"w-4 h-4"}),"Sign In"]})})})]})})]})})},yU="/ZedCTF/assets/hero-bg-x4dJ88o_.jpg",vU=()=>{const[t,e]=g.useState({totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0}),[n,r]=g.useState(!0),s=zn(),i=async()=>{try{const c={totalUsers:0,totalChallenges:0,liveEvents:0,totalCompletions:0},d=["users","user","members","profiles"];for(const v of d)try{const _=(await pu(St(ye,v))).data().count;if(_>0){c.totalUsers=_;break}}catch{continue}const h=["challenges","challenge","ctfChallenges","practice"];for(const v of h)try{const _=(await pu(St(ye,v))).data().count;if(_>0){c.totalChallenges=_;break}}catch{continue}const f=["events","event","liveEvents","competitions"];for(const v of f)try{const _=(await pu(St(ye,v))).data().count;if(_>0){c.liveEvents=_;break}}catch{continue}const p=["submissions","submission","solves","completions"];for(const v of p)try{const _=(await pu(St(ye,v))).data().count;if(_>0){c.totalCompletions=_;break}}catch{continue}if(c.totalCompletions===0&&c.totalUsers>0)try{const v=await Vn(St(ye,"users"));let I=0;v.forEach(_=>{const S=_.data();I+=S.challengesSolved||S.solvedChallenges||S.totalSolved||0}),c.totalCompletions=I}catch{}e(c)}catch{console.log("Stats loading completed")}finally{r(!1)}};g.useEffect(()=>{i()},[]);const a=()=>{s("/practice")},l=()=>{s("/live")};return o.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-20",style:{backgroundImage:`url(${yU})`}}),o.jsx("div",{className:"absolute inset-0 cyber-grid opacity-10"}),o.jsx("div",{className:"container relative z-10 px-4 py-32",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center space-y-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full border border-primary/30 bg-primary/5 mb-4",children:[o.jsx(AC,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm text-primary font-mono",children:"Zambia's Premier CTF Platform"})]}),o.jsxs("h1",{className:"text-5xl md:text-7xl font-bold leading-tight",children:["Master Cybersecurity",o.jsx("br",{}),o.jsx("span",{className:"neon-text animate-pulse-glow",children:"Capture The Flag"})]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Sharpen your hacking skills, compete in real-time challenges, and climb the leaderboard. From beginner to expert, ZedCTF is your gateway to cybersecurity mastery."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center pt-4",children:[o.jsxs(Y,{onClick:a,variant:"neon",size:"lg",className:"group",children:["Start Practicing",o.jsx(q5,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),o.jsxs(Y,{onClick:l,variant:"terminal",size:"lg",children:[o.jsx(Z5,{className:"w-5 h-5"}),"Join LIVE Event"]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 pt-12 max-w-3xl mx-auto",children:[o.jsx(yu,{loading:n,value:t.totalUsers,label:"Registered Users",icon:o.jsx(nn,{className:"w-5 h-5"})}),o.jsx(yu,{loading:n,value:t.totalChallenges,label:"Challenges",icon:o.jsx(Xe,{className:"w-5 h-5"})}),o.jsx(yu,{loading:n,value:t.liveEvents,label:"Live Events",icon:o.jsx(Na,{className:"w-5 h-5"})}),o.jsx(yu,{loading:n,value:t.totalCompletions,label:"Completions",icon:o.jsx(Jn,{className:"w-5 h-5"})})]}),!n&&o.jsx("div",{className:"mt-4",children:o.jsx(Y,{variant:"outline",size:"sm",onClick:i,children:"Refresh Stats"})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent"})]})},yu=({loading:t,value:e,label:n,icon:r})=>t?o.jsxs("div",{className:"text-center animate-pulse",children:[o.jsx("div",{className:"h-8 bg-muted rounded w-16 mx-auto mb-2"}),o.jsx("div",{className:"h-4 bg-muted rounded w-20 mx-auto"})]}):o.jsxs("div",{className:"text-center group",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl md:text-3xl font-bold text-primary mb-1",children:[r,e.toLocaleString()]}),o.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:n})]}),ht=()=>o.jsx("footer",{className:"border-t border-border bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto py-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Xe,{className:"w-8 h-8 text-primary"}),o.jsx("span",{className:"text-2xl font-bold neon-text",children:"ZedCTF"})]}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"Zambia's premier platform for cybersecurity challenges and training."}),o.jsx("p",{className:"text-muted-foreground text-xs mt-2",children:"An initiative by IT Society of Kapasa Makasa University"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Platform"}),o.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsx("li",{children:o.jsx(Fe,{to:"/dashboard",className:"hover:text-primary transition-colors",children:"Dashboard"})}),o.jsx("li",{children:o.jsx(Fe,{to:"/practice",className:"hover:text-primary transition-colors",children:"Practice"})}),o.jsx("li",{children:o.jsx(Fe,{to:"/live",className:"hover:text-primary transition-colors",children:"LIVE Events"})}),o.jsx("li",{children:o.jsx(Fe,{to:"/leaderboard",className:"hover:text-primary transition-colors",children:"Leaderboard"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Resources"}),o.jsx("ul",{className:"space-y-2 text-sm text-muted-foreground",children:o.jsx("li",{children:o.jsx(Fe,{to:"/writeups",className:"hover:text-primary transition-colors",children:"Walkthroughs"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold mb-4 text-primary",children:"Connect"}),o.jsxs("div",{className:"flex gap-4 mb-4",children:[o.jsx("a",{href:"https://github.com/ZedCTF/ZedCTF",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(nU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(pU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(oU,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-muted-foreground hover:text-primary transition-colors",children:o.jsx(kC,{className:"w-5 h-5"})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-semibold text-sm mb-2 text-primary flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),"Contributors"]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[o.jsx("a",{href:"https://github.com/SokoJames",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"James Soko"}),o.jsx("a",{href:"https://github.com/abbymwale24",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Abby Mwale"}),o.jsx("a",{href:"https://github.com/Joylad-Jangazya",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Joylad Jangazya"}),o.jsx("a",{href:"https://github.com/Kono-hub",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Mary Chanda"}),o.jsx("a",{href:"https://github.com/ronny-brawn",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Aaron Nyakapanda"}),o.jsx("a",{href:"https://github.com/threat23",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"Humphery Chileshe"})]})]})]})]}),o.jsxs("div",{className:"pt-8 border-t border-border text-center text-sm text-muted-foreground",children:[o.jsx("p",{children:" 2025 ZedCTF. All rights reserved. Made with  in Zambia"}),o.jsx("p",{className:"mt-1",children:"IT Society of Kapasa Makasa University"})]})]})}),xU=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(dt,{}),o.jsx(vU,{}),o.jsx(ht,{})]}),wU=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({email:"",password:"",rememberMe:!1}),h=zn(),f=new Lr;f.addScope("read:user"),f.addScope("user:email");const p=async b=>{try{const w=await sa(ze(ye,"users",b));if(w.exists()){const C=w.data();if(C.role==="admin"||C.role==="moderator")return"/admin"}return"/dashboard"}catch(w){return console.error("Error checking user role:",w),"/dashboard"}},v=async b=>{b.preventDefault(),l(""),i(!0);try{const w=await kD(sc,c.email,c.password),C=await p(w.user.uid);h(C)}catch(w){console.error("Login error:",w),l(_(w.code))}finally{i(!1)}},I=async()=>{var b,w,C;r(!0),l("");try{const L=(await nL(sc,f)).user;if(!(await sa(ze(ye,"users",L.uid))).exists())await KS(ze(ye,"users",L.uid),{uid:L.uid,firstName:((b=L.displayName)==null?void 0:b.split(" ")[0])||"GitHub",lastName:((w=L.displayName)==null?void 0:w.split(" ").slice(1).join(" "))||"User",username:((C=L.email)==null?void 0:C.split("@")[0])||`github_${L.uid.slice(0,8)}`,email:L.email,displayName:L.displayName||"GitHub User",photoURL:L.photoURL,provider:"github",role:"user",isActive:!0,createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard");else{const N=await p(L.uid);h(N)}}catch(R){console.error("GitHub login error:",R),R.code==="auth/account-exists-with-different-credential"?l("An account already exists with the same email address but different sign-in credentials."):R.code==="auth/popup-closed-by-user"?console.log("GitHub login popup closed by user"):l("GitHub login failed. Please try again.")}finally{r(!1)}},_=b=>{switch(b){case"auth/invalid-email":return"Invalid email address format.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":return"No account found with this email.";case"auth/wrong-password":return"Incorrect password.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/account-exists-with-different-credential":return"An account already exists with the same email address but different sign-in credentials.";default:return"Login failed. Please try again."}},S=b=>{const{name:w,value:C,type:R,checked:L}=b.target;d(A=>({...A,[w]:R==="checkbox"?L:C}))};return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Xe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-muted-foreground",children:"Access your cybersecurity dashboard"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsx("div",{className:"relative",children:o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:S,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:S,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all pr-12",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(eg,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{name:"rememberMe",type:"checkbox",checked:c.rememberMe,onChange:S,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2",disabled:s}),o.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Remember me"})]}),o.jsx("a",{href:"#",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"})]}),o.jsxs("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(qd,{className:"w-5 h-5 animate-spin"}):o.jsx(aU,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),s?"Signing in...":"Sign In"]})]}),o.jsxs("div",{className:"my-6 flex items-center",children:[o.jsx("div",{className:"flex-1 border-t border-border"}),o.jsx("span",{className:"px-3 text-sm text-muted-foreground",children:"or continue with"}),o.jsx("div",{className:"flex-1 border-t border-border"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.jsxs("button",{onClick:I,disabled:n||s,className:"flex items-center justify-center gap-2 px-4 py-3 bg-muted/50 border border-border rounded-lg text-foreground hover:bg-muted transition-colors hover:border-primary group disabled:opacity-50 disabled:cursor-not-allowed",children:[n?o.jsx(qd,{className:"w-5 h-5 animate-spin"}):o.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),n?"Signing in with GitHub...":"Continue with GitHub"]})}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["New to ZedCTF?"," ",o.jsx(Fe,{to:"/signup",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Create an account"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(ht,{})]})},_U=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(!1),[s,i]=g.useState(!1),[a,l]=g.useState(""),[c,d]=g.useState({firstName:"",lastName:"",email:"",username:"",password:"",confirmPassword:"",agreeToTerms:!1}),h=zn(),f=async I=>{if(I.preventDefault(),l(""),c.password!==c.confirmPassword){l("Passwords don't match!");return}if(c.password.length<6){l("Password should be at least 6 characters");return}if(!c.agreeToTerms){l("Please agree to the terms and conditions");return}i(!0);try{const S=(await AD(sc,c.email,c.password)).user;await VN(S,{displayName:`${c.firstName} ${c.lastName}`.trim()}),await KS(ze(ye,"users",S.uid),{uid:S.uid,firstName:c.firstName,lastName:c.lastName,username:c.username,email:c.email,displayName:`${c.firstName} ${c.lastName}`.trim(),createdAt:new Date,updatedAt:new Date,totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m"}),h("/dashboard")}catch(_){console.error("Registration error:",_),l(p(_.code))}finally{i(!1)}},p=I=>{switch(I){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address format.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak.";default:return"Registration failed. Please try again."}},v=I=>{const{name:_,value:S,type:b,checked:w}=I.target;d(C=>({...C,[_]:b==="checkbox"?w:S}))};return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-24 pb-16 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg shadow-lg p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[o.jsx(Xe,{className:"w-10 h-10 text-primary"}),o.jsx("span",{className:"text-3xl font-bold text-foreground",children:"ZedCTF"})]}),o.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Join the Community"}),o.jsx("p",{className:"text-muted-foreground",children:"Start your cybersecurity journey today"})]}),a&&o.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg text-sm",children:a}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-foreground mb-2",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:c.firstName,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"John",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-foreground mb-2",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:c.lastName,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Doe",disabled:s})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(kC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"hacker@zedctf.com",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-foreground mb-2",children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:c.username,onChange:v,className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"cyber_hacker",disabled:s})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Z_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,value:c.password,onChange:v,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>e(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:t?o.jsx(eg,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Z_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:n?"text":"password",required:!0,value:c.confirmPassword,onChange:v,className:"w-full pl-10 pr-12 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"",disabled:s}),o.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:s,children:n?o.jsx(eg,{className:"w-5 h-5"}):o.jsx(ic,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-start",children:o.jsxs("label",{className:"flex items-start",children:[o.jsx("input",{name:"agreeToTerms",type:"checkbox",checked:c.agreeToTerms,onChange:v,className:"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2 mt-1",disabled:s}),o.jsxs("span",{className:"ml-2 text-sm text-muted-foreground",children:["I agree to the"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Terms of Service"})," ","and"," ",o.jsx("a",{href:"#",className:"text-primary hover:text-primary/80 transition-colors",children:"Privacy Policy"})]})]})}),o.jsxs("button",{type:"submit",disabled:s||!c.agreeToTerms,className:"w-full bg-primary text-primary-foreground py-3 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2 group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[s?o.jsx(qd,{className:"w-5 h-5 animate-spin"}):o.jsx(mU,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),s?"Creating Account...":"Create Account"]})]}),o.jsx("div",{className:"text-center mt-6",children:o.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",o.jsx(Fe,{to:"/login",className:"text-primary hover:text-primary/80 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-xs text-muted-foreground",children:" Your security is our priority. All connections are encrypted."})})]})}),o.jsx(ht,{})]})},bU=()=>{const[t,e]=g.useState([]),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(""),[h,f]=g.useState("all"),[p,v]=g.useState("all"),[I,_]=g.useState("all"),[S,b]=g.useState(!0),[w]=g.useState(!1),C=async()=>{try{b(!0);const N=await fetch("/api/writeups");if(N.ok){const y=await N.json();e(y),r(y);const T=Array.from(new Set(y.map(j=>j.category))).filter(Boolean),E=Array.from(new Set(y.map(j=>j.difficulty))).filter(Boolean);i(T),l(E)}else e([]),r([]),i([]),l([])}catch{e([]),r([]),i([]),l([])}finally{b(!1)}};g.useEffect(()=>{C()},[]),g.useEffect(()=>{let A=t;c&&(A=A.filter(N=>N.title.toLowerCase().includes(c.toLowerCase())||N.description.toLowerCase().includes(c.toLowerCase())||N.tags.some(y=>y.toLowerCase().includes(c.toLowerCase())))),h!=="all"&&(A=A.filter(N=>N.category===h)),p!=="all"&&(A=A.filter(N=>N.difficulty===p)),I!=="all"&&(A=A.filter(N=>N.status===I)),r(A)},[c,h,p,I,t]);const R=A=>{switch(A){case"approved":return o.jsx(Ur,{className:"w-4 h-4 text-green-400"});case"rejected":return o.jsx(oa,{className:"w-4 h-4 text-red-400"});default:return o.jsx(Na,{className:"w-4 h-4 text-yellow-400"})}},L=A=>{switch(A.toLowerCase()){case"easy":return"bg-primary/20 text-primary border-primary/30";case"medium":return"bg-secondary/20 text-secondary border-secondary/30";case"hard":return"bg-destructive/20 text-destructive border-destructive/30";case"insane":return"bg-purple-500/20 text-purple-500 border-purple-500/30";case"expert":return"bg-red-500/20 text-red-500 border-red-500/30";case"beginner":return"bg-green-500/20 text-green-500 border-green-500/30";default:return"bg-muted/20 text-muted-foreground border-muted/30"}};return S?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading writeups..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Community ",o.jsx("span",{className:"text-primary",children:"Writeups"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Learn from other players' solutions and share your own approaches"})]}),o.jsxs("div",{className:"bg-muted/20 border border-border rounded-lg p-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"md:col-span-2",children:o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),o.jsx("input",{type:"text",placeholder:"Search writeups, tags, challenges...",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 pr-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})}),o.jsx("div",{children:o.jsxs("select",{value:h,onChange:A=>f(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Categories"}),s.map(A=>o.jsx("option",{value:A,children:A},A))]})}),o.jsx("div",{children:o.jsxs("select",{value:p,onChange:A=>v(A.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Difficulties"}),a.map(A=>o.jsx("option",{value:A,children:A},A))]})})]}),w&&o.jsx("div",{className:"mt-4",children:o.jsxs("select",{value:I,onChange:A=>_(A.target.value),className:"w-full md:w-auto px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"}),o.jsx("option",{value:"rejected",children:"Rejected"})]})})]}),o.jsx("div",{className:"flex justify-end mb-6",children:o.jsxs(Fe,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 flex items-center gap-2",children:[o.jsx(ei,{className:"w-5 h-5"}),"New Writeup"]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(A=>o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-all duration-300 hover:shadow-lg group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${L(A.difficulty)}`,children:A.difficulty}),o.jsxs("div",{className:"flex items-center gap-1",children:[R(A.status),o.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:A.status})]})]}),o.jsx("span",{className:"inline-block px-2 py-1 bg-primary/10 text-primary text-xs rounded border border-primary/20 mb-3",children:A.category}),o.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-3 group-hover:text-primary transition-colors line-clamp-2",children:A.title}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-3",children:A.description}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-4",children:[o.jsx(Hd,{className:"w-4 h-4"}),o.jsxs("span",{children:["Challenge: ",A.challenge]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[A.tags.slice(0,3).map((N,y)=>o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["#",N]},y)),A.tags.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-xs rounded border border-border",children:["+",A.tags.length-3]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center",children:o.jsx(Cn,{className:"w-3 h-3 text-primary"})}),o.jsx("span",{className:"text-sm text-muted-foreground",children:A.author.name})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ic,{className:"w-4 h-4"}),o.jsx("span",{children:A.views})]}),o.jsx("span",{children:new Date(A.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(Fe,{to:`/writeups/${A.id}`,className:"flex-1 bg-primary/10 text-primary border border-primary/20 py-2 px-4 rounded-lg text-center hover:bg-primary/20 transition-colors",children:"Read"}),w&&A.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"flex-1 bg-green-500/10 text-green-500 border border-green-500/20 py-2 px-4 rounded-lg hover:bg-green-500/20 transition-colors",children:"Approve"}),o.jsx("button",{className:"flex-1 bg-red-500/10 text-red-500 border border-red-500/20 py-2 px-4 rounded-lg hover:bg-red-500/20 transition-colors",children:"Reject"})]})]})]},A.id))}),n.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Hd,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No writeups found"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:t.length===0?"No writeups have been submitted yet. Be the first to share your solution!":"Try adjusting your search or filters"}),o.jsxs(Fe,{to:"/writeups/create",className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 inline-flex items-center gap-2",children:[o.jsx(ei,{className:"w-5 h-5"}),"Create First Writeup"]})]})]})}),o.jsx(ht,{})]})},EU=()=>{const t=zn(),[e,n]=g.useState(""),[r,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(""),[d,h]=g.useState(""),[f,p]=g.useState(""),[v,I]=g.useState(""),[_,S]=g.useState(!1),[b,w]=g.useState([]),[C,R]=g.useState([]),[L,A]=g.useState([]),[N,y]=g.useState(!0),T=async()=>{try{y(!0);const k="/api/challenges/available",P="/api/categories",H="/api/difficulties",[ae,ee,le]=await Promise.all([fetch(k),fetch(P),fetch(H)]);if(ae.ok){const O=await ae.json();w(O)}else w([]);if(ee.ok){const O=await ee.json();R(O),O.length>0&&h(O[0])}else R([]);if(le.ok){const O=await le.json();A(O),O.length>0&&p(O[0])}else A([])}catch{w([]),R([]),A([])}finally{y(!1)}},E=async k=>{k.preventDefault(),S(!0);try{(await fetch("/api/writeups/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:r,content:i,challengeId:l,category:d,difficulty:f,tags:v.split(",").map(H=>H.trim()).filter(H=>H)})})).ok?t("/writeups"):console.error("Failed to create writeup")}catch(P){console.error("Error creating writeup:",P)}finally{S(!1)}},j=(k,P)=>{document.execCommand(k,!1,P)};return g.useEffect(()=>{if(l){const k=b.find(P=>P.id===l);k&&(h(k.category),p(k.difficulty))}},[l,b]),g.useEffect(()=>{T()},[]),N?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading form data..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto max-w-4xl",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Create ",o.jsx("span",{className:"text-primary",children:"Writeup"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Share your solution and help others learn from your approach"})]}),o.jsxs("form",{id:"writeup-form",onSubmit:E,className:"space-y-8",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Basic Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Writeup Title *"}),o.jsx("input",{type:"text",required:!0,value:e,onChange:k=>n(k.target.value),placeholder:"Enter a compelling title for your writeup...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all text-lg font-semibold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Description *"}),o.jsx("textarea",{required:!0,value:r,onChange:k=>s(k.target.value),placeholder:"Brief description of your writeup...",rows:3,className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Challenge *"}),o.jsxs("select",{required:!0,value:l,onChange:k=>c(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:[o.jsx("option",{value:"",children:"Select a challenge"}),b.map(k=>o.jsx("option",{value:k.id,children:k.title},k.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category *"}),o.jsx("select",{required:!0,value:d,onChange:k=>h(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:C.map(k=>o.jsx("option",{value:k,children:k},k))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Difficulty *"}),o.jsx("select",{required:!0,value:f,onChange:k=>p(k.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",children:L.map(k=>o.jsx("option",{value:k,children:k},k))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Tags"}),o.jsx("input",{type:"text",value:v,onChange:k=>I(k.target.value),placeholder:"Comma-separated tags (e.g., sql-injection, web, bypass)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all"})]})]})]})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-card-foreground mb-6",children:"Writeup Content"}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 p-3 bg-muted/20 rounded-lg border border-border",children:[o.jsx("button",{type:"button",onClick:()=>j("bold"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bold",children:o.jsx(K5,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("italic"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Italic",children:o.jsx(sU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("insertUnorderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Bullet List",children:o.jsx(tg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("insertOrderedList"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Numbered List",children:o.jsx(tg,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const k=prompt("Enter URL:");k&&j("createLink",k)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Link",children:o.jsx(aa,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>j("formatBlock","<pre>"),className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Code Block",children:o.jsx(eU,{className:"w-4 h-4 text-foreground"})}),o.jsx("button",{type:"button",onClick:()=>{const k=prompt("Enter image URL:");k&&j("insertImage",k)},className:"p-2 rounded hover:bg-primary/10 transition-colors",title:"Insert Image",children:o.jsx(rU,{className:"w-4 h-4 text-foreground"})})]}),o.jsx("div",{contentEditable:!0,onInput:k=>a(k.currentTarget.innerHTML),className:"min-h-[400px] px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all prose prose-invert max-w-none",style:{fontFamily:"Georgia, serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":"Start writing your amazing writeup here... You can include code snippets, images, and formatted text."}),o.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:"Pro tips:"})]}),o.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[o.jsx("li",{children:"Use the toolbar above to format your text"}),o.jsx("li",{children:"Include code snippets using the code block button"}),o.jsx("li",{children:"Add images to illustrate your steps"}),o.jsx("li",{children:"Break down complex solutions into clear steps"}),o.jsx("li",{children:"Share your thought process and learning moments"})]})]})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsxs("button",{type:"button",className:"flex items-center gap-2 px-6 py-3 bg-muted text-muted-foreground rounded-lg font-semibold hover:bg-muted/80 transition-colors",onClick:()=>t("/writeups"),children:[o.jsx(ic,{className:"w-4 h-4"}),"Cancel"]}),o.jsxs("button",{type:"submit",disabled:_,className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[_?o.jsx("div",{className:"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin"}):o.jsx(RC,{className:"w-4 h-4"}),_?"Publishing...":"Publish Writeup"]})]})]})]})}),o.jsx(ht,{})]})},nb=()=>new Promise(t=>{setTimeout(()=>{const e={id:"github-"+Date.now(),username:"zedctf_user",email:"user@zedctf.com",name:"ZedCTF User",avatar:"https://github.com/github.png",provider:"github"};localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("isLoggedIn","true"),t(e)},1500)}),NU=()=>{const[t,e]=g.useState("loading"),[n,r]=g.useState(""),s=zn();return g.useEffect(()=>{(async()=>{const a=new URLSearchParams(window.location.search),l=a.get("code");if(a.get("error")){e("error"),r("GitHub authentication failed. Please try again.");return}try{if(await new Promise(d=>setTimeout(d,2e3)),l){const d=await nb();e("success"),r(`Welcome, ${d.username}! Successfully authenticated with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}else{const d=await nb();e("success"),r(`Welcome, ${d.username}! Successfully signed in with GitHub.`),setTimeout(()=>s("/ZedCTF/"),2e3)}}catch(d){e("error"),r("Authentication failed. Please try again."),console.error("GitHub callback error:",d)}})()},[s]),o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-900 via-blue-900 to-purple-900 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[o.jsx(Xe,{className:"w-10 h-10 text-green-400"}),o.jsx("span",{className:"text-3xl font-bold text-white",children:"ZedCTF"})]}),o.jsxs("div",{className:"space-y-4",children:[t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx(qd,{className:"w-12 h-12 text-green-400 animate-spin mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Connecting to GitHub..."}),o.jsx("p",{className:"text-gray-300",children:"Please wait while we authenticate your account."})]}),t==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Ur,{className:"w-12 h-12 text-green-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Successful!"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Redirecting to homepage..."})]}),t==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(oa,{className:"w-12 h-12 text-red-400 mx-auto"}),o.jsx("h2",{className:"text-xl font-semibold text-white",children:"Authentication Failed"}),o.jsx("p",{className:"text-gray-300",children:n}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{onClick:()=>s("/login"),className:"w-full bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Back to Login"}),o.jsx("button",{onClick:()=>s("/signup"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Try Sign Up"})]})]})]})]})})},TU=()=>{const t=to();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},ie=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ie.displayName="Card";const je=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));je.displayName="CardHeader";const Ae=g.forwardRef(({className:t,...e},n)=>o.jsx("h3",{ref:n,className:Le("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ae.displayName="CardTitle";const Ht=g.forwardRef(({className:t,...e},n)=>o.jsx("p",{ref:n,className:Le("text-sm text-muted-foreground",t),...e}));Ht.displayName="CardDescription";const oe=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("p-6 pt-0",t),...e}));oe.displayName="CardContent";const SU=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("flex items-center p-6 pt-0",t),...e}));SU.displayName="CardFooter";const CU=({isOpen:t,onClose:e})=>{const{user:n}=Wn(),[r,s]=g.useState(!1),[i,a]=g.useState(!1),[l,c]=g.useState(!1),d=g.useRef(null),[h,f]=g.useState({displayName:"",bio:"",role:"student",institution:""}),[p,v]=g.useState(null),[I,_]=g.useState("");g.useEffect(()=>{t&&n&&(async()=>{try{const N=await sa(ze(ye,"users",n.uid));if(N.exists()){const y=N.data();f({displayName:y.displayName||n.displayName||"",bio:y.bio||"",role:y.role||"student",institution:y.institution||""}),_(y.photoURL||n.photoURL||"")}else f({displayName:n.displayName||"",bio:"",role:"student",institution:""}),_(n.photoURL||"")}catch(N){console.error("Error fetching user data:",N)}})()},[t,n]);const S=A=>{const{name:N,value:y}=A.target;f(T=>({...T,[N]:y}))},b=async A=>{var y;const N=(y=A.target.files)==null?void 0:y[0];if(N){if(!N.type.startsWith("image/")){alert("Please select an image file");return}if(N.size>2*1024*1024){alert("Image size should be less than 2MB for faster upload");return}v(N);const T=URL.createObjectURL(N);_(T)}},w=(A,N=800,y=.8)=>new Promise((T,E)=>{const j=document.createElement("canvas"),k=j.getContext("2d"),P=new Image;P.onload=()=>{let H=P.width,ae=P.height;H>N&&(ae=ae*N/H,H=N),j.width=H,j.height=ae,k==null||k.drawImage(P,0,0,H,ae),j.toBlob(ee=>{if(ee){const le=new File([ee],A.name,{type:"image/jpeg",lastModified:Date.now()});T(le)}else E(new Error("Image compression failed"))},"image/jpeg",y)},P.onerror=E,P.src=URL.createObjectURL(A)}),C=async(A,N)=>{const y=await w(A),E=`profile_${Date.now()}.jpg`,j=qF(JF,`profile-pictures/${N}/${E}`),k=await HF(j,y);return await WF(k.ref)},R=async A=>{if(A.preventDefault(),!!n){s(!0),c(!1);try{let N=n.photoURL;if(p){a(!0);try{N=await C(p,n.uid),console.log("Profile image uploaded successfully")}catch(T){console.error("Error uploading image:",T)}finally{a(!1)}}const y=[];(h.displayName!==n.displayName||N!==n.photoURL)&&y.push(VN(n,{displayName:h.displayName,photoURL:N})),y.push(hn(ze(ye,"users",n.uid),{displayName:h.displayName,bio:h.bio,role:h.role,institution:h.institution,photoURL:N,updatedAt:new Date})),await Promise.all(y),console.log("Profile updated successfully"),c(!0),setTimeout(()=>{e(),window.location.reload()},1e3)}catch(N){console.error("Error updating profile:",N),alert("Failed to update profile. Please try again.")}finally{s(!1)}}},L=()=>{var A;(A=d.current)==null||A.click()};return t?o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[o.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"text-muted-foreground hover:text-foreground transition-colors",disabled:r,children:o.jsx(ac,{className:"w-6 h-6"})})]}),o.jsxs("form",{onSubmit:R,className:"p-6 space-y-6",children:[l&&o.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded flex items-center gap-2",children:[o.jsx(Ur,{className:"w-5 h-5"}),"Profile updated successfully!"]}),o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full bg-muted/50 border-2 border-border flex items-center justify-center overflow-hidden",children:I?o.jsx("img",{src:I,alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Cn,{className:"w-12 h-12 text-muted-foreground"})}),o.jsx("button",{type:"button",onClick:L,disabled:i||r,className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full p-2 hover:bg-primary/90 transition-colors disabled:opacity-50",children:i?o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):o.jsx(Q5,{className:"w-4 h-4"})}),o.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:i||r})]}),o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:i?"Uploading image...":"Click the camera icon to upload a profile picture (max 2MB)"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-foreground mb-2",children:"Display Name"}),o.jsx("input",{id:"displayName",name:"displayName",type:"text",value:h.displayName,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Enter your display name",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-foreground mb-2",children:"Bio"}),o.jsx("textarea",{id:"bio",name:"bio",rows:3,value:h.bio,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all resize-none",placeholder:"Tell us about yourself...",disabled:r})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-foreground mb-2",children:"I am a"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"student",label:"Student",icon:Ev},{value:"lecturer",label:"Lecturer",icon:nn},{value:"expert",label:"Expert",icon:CC},{value:"general",label:"General User",icon:Cn}].map(({value:A,label:N,icon:y})=>o.jsxs("label",{className:`flex items-center gap-2 p-3 border rounded-lg cursor-pointer transition-all ${h.role===A?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary/50 text-foreground"} ${r?"opacity-50 cursor-not-allowed":""}`,children:[o.jsx("input",{type:"radio",name:"role",value:A,checked:h.role===A,onChange:S,className:"hidden",disabled:r}),o.jsx(y,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:N})]},A))})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"institution",className:"block text-sm font-medium text-foreground mb-2",children:"Institution"}),o.jsx("input",{id:"institution",name:"institution",type:"text",value:h.institution,onChange:S,className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Your school, university, or organization",disabled:r})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:e,disabled:r,className:"flex-1 px-4 py-2 border border-border text-foreground rounded-lg hover:bg-muted transition-colors disabled:opacity-50",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:r||i,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),"Saving..."]}):"Save Changes"})]})]})]})}):null},IU=()=>{var w,C;const{user:t}=Wn();zn();const[e,n]=g.useState(null),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState([]),[d,h]=g.useState(!0),[f,p]=g.useState(!1),[v,I]=g.useState(null),_=R=>{switch(R){case"student":return o.jsx(Ev,{className:"w-4 h-4"});case"lecturer":return o.jsx(nn,{className:"w-4 h-4"});case"expert":return o.jsx(CC,{className:"w-4 h-4"});default:return o.jsx(Cn,{className:"w-4 h-4"})}},S=R=>{switch(R){case"student":return"Student";case"lecturer":return"Lecturer";case"expert":return"Expert";default:return"General User"}},b=async()=>{var R,L,A;if(t)try{h(!0),console.log("Fetching real dashboard data for user:",t.uid);const N=await sa(ze(ye,"users",t.uid));if(N.exists()){const y=N.data();console.log("Real user data from Firestore:",y),I(y),n({totalPoints:y.totalPoints||0,challengesSolved:y.challengesSolved||0,currentRank:y.currentRank||0,timeSpent:y.timeSpent||"0h 0m",username:y.username||((R=t==null?void 0:t.email)==null?void 0:R.split("@")[0])||"Hacker",joinDate:y.createdAt||(t==null?void 0:t.metadata.creationTime)||new Date().toISOString(),firstName:y.firstName,lastName:y.lastName,displayName:y.displayName,bio:y.bio,role:y.role,institution:y.institution,photoURL:y.photoURL})}else console.log("No user document found in Firestore"),n({totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m",username:((L=t==null?void 0:t.email)==null?void 0:L.split("@")[0])||"Hacker",joinDate:(t==null?void 0:t.metadata.creationTime)||new Date().toISOString()});try{const y=Nr(St(ye,"challenges"),cn("solvedBy","array-contains",t.uid),Ws("solvedAt","desc"),hp(5)),E=(await Vn(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real solved challenges:",E),s(E)}catch{console.log("No challenges collection or no solved challenges yet"),s([])}try{const y=Nr(St(ye,"events"),cn("participants","array-contains",t.uid),Ws("date","desc"),hp(5)),E=(await Vn(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real events participated:",E),a(E)}catch{console.log("No events collection or no events participated yet"),a([])}try{const y=Nr(St(ye,"activity"),cn("userId","==",t.uid),Ws("timestamp","desc"),hp(10)),E=(await Vn(y)).docs.map(j=>({id:j.id,...j.data()}));console.log("Real user activity:",E),c(E)}catch{console.log("No activity collection yet, creating default activity");const T={id:"welcome",action:"Account Created",description:"Welcome to ZedCTF! Start your cybersecurity journey.",timestamp:(t==null?void 0:t.metadata.creationTime)||new Date,userId:t.uid};c([T])}}catch(N){console.error("Error fetching real dashboard data:",N),n({totalPoints:0,challengesSolved:0,currentRank:0,timeSpent:"0h 0m",username:((A=t==null?void 0:t.email)==null?void 0:A.split("@")[0])||"Hacker",joinDate:(t==null?void 0:t.metadata.creationTime)||new Date().toISOString()}),s([]),a([]),c([{id:"welcome",action:"Account Created",description:"Welcome to ZedCTF! Start your cybersecurity journey.",timestamp:(t==null?void 0:t.metadata.creationTime)||new Date}])}finally{h(!1)}};return g.useEffect(()=>{t&&b()},[t]),d?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"dashboard",className:"pt-24 pb-16 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading your dashboard..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"dashboard",className:"pt-24 pb-16 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsx("div",{className:"mb-8",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center overflow-hidden border-2 border-primary/30",children:t!=null&&t.photoURL||v!=null&&v.photoURL?o.jsx("img",{src:(t==null?void 0:t.photoURL)||(v==null?void 0:v.photoURL),alt:"Profile",className:"w-full h-full object-cover"}):o.jsx(Cn,{className:"w-8 h-8 text-primary"})}),o.jsx("button",{onClick:()=>p(!0),className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground rounded-full p-1 hover:bg-primary/90 transition-colors",title:"Edit Profile",children:o.jsx(PC,{className:"w-3 h-3"})})]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-4xl font-bold",children:["Welcome back,"," ",o.jsx("span",{className:"text-primary",children:(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||(e==null?void 0:e.username)||((w=t==null?void 0:t.email)==null?void 0:w.split("@")[0])||"Hacker"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx("span",{children:t==null?void 0:t.email}),(v==null?void 0:v.role)&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("div",{className:"flex items-center gap-1",children:[_(v.role),o.jsx("span",{children:S(v.role)})]})]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Member since"," ",e!=null&&e.joinDate?new Date(e.joinDate).toLocaleDateString():"recently"]})]}),(v==null?void 0:v.institution)&&o.jsx("p",{className:"text-sm text-muted-foreground",children:v.institution}),(v==null?void 0:v.bio)&&o.jsx("p",{className:"text-sm text-muted-foreground mt-1 max-w-md",children:v.bio})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(ie,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium text-muted-foreground",children:"Total Points"}),o.jsx(Jn,{className:"w-5 h-5 text-primary"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:((C=e==null?void 0:e.totalPoints)==null?void 0:C.toLocaleString())||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Lifetime points earned"})]})]}),o.jsxs(ie,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium text-muted-foreground",children:"Challenges Solved"}),o.jsx(yp,{className:"w-5 h-5 text-secondary"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:(e==null?void 0:e.challengesSolved)||"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Total challenges completed"})]})]}),o.jsxs(ie,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium text-muted-foreground",children:"Current Rank"}),o.jsx(fU,{className:"w-5 h-5 text-primary"})]}),o.jsxs(oe,{children:[o.jsxs("div",{className:"text-3xl font-bold mb-2",children:["#",(e==null?void 0:e.currentRank)||"0"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Global leaderboard position"})]})]}),o.jsxs(ie,{className:"border-border hover:border-primary/50 transition-all duration-300",children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium text-muted-foreground",children:"Time Spent"}),o.jsx(Na,{className:"w-5 h-5 text-muted-foreground"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"text-3xl font-bold mb-2",children:(e==null?void 0:e.timeSpent)||"0h 0m"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Total practice time"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ie,{className:"border-border",children:[o.jsx(je,{children:o.jsxs(Ae,{className:"flex items-center gap-2",children:[o.jsx(yp,{className:"w-5 h-5 text-primary"}),"Recently Solved Challenges"]})}),o.jsx(oe,{children:r.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(yp,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No challenges solved yet"}),o.jsx("p",{className:"text-sm mt-2",children:"Start practicing to see your progress here"})]}):o.jsx("div",{className:"space-y-4",children:r.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.title}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:R.category}),o.jsx("span",{children:""}),o.jsx("span",{children:R.difficulty}),o.jsx("span",{children:""}),o.jsx("span",{children:R.solvedAt?new Date(R.solvedAt.toDate?R.solvedAt.toDate():R.solvedAt).toLocaleDateString():"Recently"})]})]}),o.jsxs("div",{className:"text-primary font-bold",children:["+",R.points]})]},R.id))})})]}),o.jsxs(ie,{className:"border-border",children:[o.jsx(je,{children:o.jsxs(Ae,{className:"flex items-center gap-2",children:[o.jsx(ia,{className:"w-5 h-5 text-primary"}),"Events Participated In"]})}),o.jsx(oe,{children:i.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(ia,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No events participated yet"}),o.jsx("p",{className:"text-sm mt-2",children:"Join live events to appear here"})]}):o.jsx("div",{className:"space-y-4",children:i.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.name}),o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx("span",{children:R.date}),R.position&&o.jsxs("span",{children:[" Position: #",R.position]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-secondary font-bold",children:R.prize}),R.pointsEarned>0&&o.jsxs("div",{className:"text-xs text-primary",children:["+",R.pointsEarned," pts"]})]})]},R.id))})})]}),o.jsxs(ie,{className:"border-border lg:col-span-2",children:[o.jsx(je,{children:o.jsxs(Ae,{className:"flex items-center gap-2",children:[o.jsx(zd,{className:"w-5 h-5 text-primary"}),"Recent Activity"]})}),o.jsx(oe,{children:l.length===0?o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx(zd,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No recent activity"}),o.jsx("p",{className:"text-sm mt-2",children:"Your activity will appear here"})]}):o.jsx("div",{className:"space-y-3",children:l.map(R=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20 border border-border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium",children:R.action}),o.jsx("div",{className:"text-sm text-muted-foreground",children:R.description})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xs text-muted-foreground",children:R.timestamp?new Date(R.timestamp.toDate?R.timestamp.toDate():R.timestamp).toLocaleDateString():"Recently"}),R.points&&o.jsxs("div",{className:"text-sm text-primary font-bold",children:["+",R.points]})]})]},R.id))})})]})]})]})}),o.jsx(ht,{}),o.jsx(CU,{isOpen:f,onClose:()=>p(!1)})]})},jU=Qh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ue({className:t,variant:e,...n}){return o.jsx("div",{className:Le(jU({variant:e}),t),...n})}const pe=g.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));pe.displayName="Input";const AU=()=>{const{user:t}=Wn(),e=zn(),[n,r]=g.useState([]),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[p,v]=g.useState(null),[I,_]=g.useState("");g.useEffect(()=>{S()},[]),g.useEffect(()=>{w()},[h,p,n]);const S=async()=>{try{d(!0),_("");const T=Nr(St(ye,"challenges"),cn("isActive","==",!0),cn("availableInPractice","==",!0)),j=(await Vn(T)).docs.map(k=>({id:k.id,...k.data()}));r(j),b(j)}catch(T){console.error("Error fetching practice challenges:",T),_("Failed to load challenges. Please check your permissions.")}finally{d(!1)}},b=T=>{const E=new Map;T.forEach(P=>{const H=P.finalCategory||P.category;E.set(H,(E.get(H)||0)+1)});const j={web:{color:"from-blue-500 to-cyan-500",icon:"",description:"Web application security, SQL injection, XSS, and more"},crypto:{color:"from-purple-500 to-pink-500",icon:"",description:"Cryptography, encryption, and cryptographic attacks"},forensics:{color:"from-orange-500 to-red-500",icon:"",description:"Digital forensics, file analysis, and data recovery"},pwn:{color:"from-red-500 to-rose-500",icon:"",description:"Binary exploitation, memory corruption, and reverse engineering"},reversing:{color:"from-indigo-500 to-purple-500",icon:"",description:"Reverse engineering and malware analysis"},misc:{color:"from-gray-500 to-slate-500",icon:"",description:"Miscellaneous challenges and various security topics"}},k=Array.from(E.entries()).map(([P,H])=>{const ae=j[P.toLowerCase()]||{color:"from-gray-500 to-slate-500",icon:"",description:"Various security challenges"};return{name:P,count:H,icon:ae.icon,color:ae.color,description:ae.description}});k.sort((P,H)=>H.count-P.count),i(k)},w=()=>{let T=[...n];h&&(T=T.filter(E=>E.title.toLowerCase().includes(h.toLowerCase())||E.description.toLowerCase().includes(h.toLowerCase()))),p&&(T=T.filter(E=>(E.finalCategory||E.category)===p)),T=T.sort((E,j)=>(j.totalPoints||j.points)-(E.totalPoints||E.points)),l(T)},C=T=>{switch(T){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},R=T=>{switch(T){case"easy":return"Easy";case"medium":return"Medium";case"hard":return"Hard";case"expert":return"Expert";default:return T}},L=T=>{e(`/challenge/${T}`)},A=()=>{e("/live")},N=()=>{S()},y=()=>{f(""),v(null)};return c?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading practice challenges..."})]})})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx(Xe,{className:"w-16 h-16 text-primary"})}),o.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Practice Challenges"}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto mb-6",children:"Master your cybersecurity skills with hands-on challenges across different categories"}),I&&o.jsx(ie,{className:"max-w-2xl mx-auto mb-6 border-red-200 bg-red-50",children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(J5,{className:"w-5 h-5 text-red-600"}),o.jsx("p",{className:"text-red-800",children:I})]})})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-2xl mx-auto mb-8",children:[o.jsx(ie,{className:"text-center border-2",children:o.jsxs(oe,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:n.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Challenges"})]})}),o.jsx(ie,{className:"text-center border-2",children:o.jsxs(oe,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.reduce((T,E)=>{var j;return T+(((j=E.solvedBy)==null?void 0:j.length)||0)},0)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Solves"})]})}),o.jsx(ie,{className:"text-center border-2",children:o.jsxs(oe,{className:"p-4",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]})})]}),o.jsx(ie,{className:"max-w-4xl mx-auto mb-8 border-2 bg-gradient-to-r from-primary/5 to-primary/10",children:o.jsx(oe,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ks,{className:"w-8 h-8 text-primary"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Ready for Live Competition?"}),o.jsx("p",{className:"text-muted-foreground",children:"Test your skills against other players in real-time events!"})]})]}),o.jsxs(Y,{variant:"terminal",onClick:A,children:[o.jsx(ks,{className:"w-4 h-4 mr-2"}),"View Live Events"]})]})})})]}),o.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),o.jsx(pe,{placeholder:"Search challenges by title or description...",value:h,onChange:T=>f(T.target.value),className:"pl-12 h-12 text-lg border-2"})]})}),!p&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Choose a Category"}),o.jsxs(Y,{variant:"outline",onClick:N,size:"sm",children:[o.jsx(gp,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(T=>o.jsx(ie,{className:"border-2 hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>v(T.name),children:o.jsxs(oe,{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("div",{className:`text-2xl bg-gradient-to-r ${T.color} rounded-lg p-3`,children:T.icon}),o.jsx(K_,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"})]}),o.jsx("h3",{className:"font-bold text-lg mb-2 group-hover:text-primary transition-colors",children:T.name}),o.jsxs("p",{className:"text-muted-foreground",children:[T.count," challenge",T.count!==1?"s":""]})]})},T.name))}):o.jsx(ie,{className:"text-center border-2",children:o.jsxs(oe,{className:"p-12",children:[o.jsx(tU,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Categories Available"}),o.jsx("p",{className:"text-muted-foreground",children:"No practice challenges are currently available. Check back later!"})]})})]}),p&&o.jsxs("div",{className:"mb-12",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Y,{variant:"outline",onClick:()=>v(null),className:"flex items-center gap-2",children:[o.jsx(K_,{className:"w-4 h-4 rotate-180"}),"Back to Categories"]}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold",children:[p," Challenges"]}),o.jsxs("p",{className:"text-muted-foreground",children:[a.length," challenge",a.length!==1?"s":""," available"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Y,{variant:"outline",onClick:y,size:"sm",children:"Clear Filters"}),o.jsxs(Y,{variant:"outline",onClick:N,size:"sm",children:[o.jsx(gp,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(T=>{var E,j,k,P;return o.jsx(ie,{className:"border-2 hover:border-primary/50 hover:shadow-lg transition-all cursor-pointer group",onClick:()=>L(T.id),children:o.jsxs(oe,{className:"p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h3",{className:"font-bold text-lg group-hover:text-primary transition-colors",children:T.title}),o.jsx(Ue,{className:C(T.difficulty),children:R(T.difficulty)})]}),o.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:T.description}),o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(nn,{className:"w-4 h-4"}),o.jsx("span",{children:((E=T.solvedBy)==null?void 0:E.length)||0})]}),o.jsxs(Ue,{variant:"outline",className:"font-mono font-bold",children:[T.totalPoints||T.points," pts"]})]}),T.createdAt&&o.jsx("div",{className:"text-muted-foreground",children:((P=(k=(j=T.createdAt)==null?void 0:j.toDate)==null?void 0:k.call(j))==null?void 0:P.toLocaleDateString())||new Date(T.createdAt).toLocaleDateString()})]})]})},T.id)})}):o.jsx(ie,{className:"text-center border-2",children:o.jsxs(oe,{className:"p-12",children:[o.jsx(la,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Challenges Found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:h?`No challenges match "${h}" in ${p}`:`No challenges available in ${p}`}),o.jsx(Y,{variant:"outline",onClick:y,children:"Clear Search"})]})})]}),n.length===0&&!c&&!p&&o.jsx(ie,{className:"text-center border-2",children:o.jsxs(oe,{className:"p-12",children:[o.jsx(Xe,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Practice Challenges Available"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"Check back later for new practice challenges, or join a live event to test your skills."}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[o.jsxs(Y,{variant:"terminal",onClick:N,children:[o.jsx(gp,{className:"w-4 h-4 mr-2"}),"Refresh"]}),o.jsxs(Y,{variant:"outline",onClick:A,children:[o.jsx(ks,{className:"w-4 h-4 mr-2"}),"View Live Events"]})]})]})})]})}),o.jsx(ht,{})]})},rb="/ZedCTF",kU=()=>{const{user:t}=Wn(),[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const p=Nr(St(ye,"events"),cn("status","in",["LIVE","STARTING_SOON"]),Ws("startTime","asc")),v=Nr(St(ye,"events"),cn("status","==","UPCOMING"),Ws("startTime","asc")),[I,_]=await Promise.all([Vn(p),Vn(v)]),S=I.docs.map(w=>({id:w.id,...w.data()})),b=_.docs.map(w=>{var C;return{id:w.id,...w.data(),registered:t&&((C=w.data().registeredUsers)==null?void 0:C.includes(t.uid))||!1}});n(S),s(b)}catch(p){console.error("Error fetching events:",p),n([]),s([])}finally{a(!1)}},c=async p=>{var v;if(!t){alert("Please log in to register for events");return}try{const I=ze(ye,"events",p);await hn(I,{registeredUsers:Xm(t.uid),participants:(((v=r.find(_=>_.id===p))==null?void 0:v.participants)||0)+1}),l()}catch(I){console.error("Failed to register for event:",I),alert("Failed to register for event. Please try again.")}},d=async p=>{var v;if(!t){alert("Please log in to join events");return}try{const I=ze(ye,"events",p);await hn(I,{participants:(((v=e.find(_=>_.id===p))==null?void 0:v.participants)||0)+1}),window.location.href=`${rb}/competition/${p}`}catch(I){console.error("Failed to join live event:",I),alert("Failed to join event. Please try again.")}},h=()=>{window.location.href=`${rb}/practice`};if(g.useEffect(()=>{l();const p=setInterval(l,1e4);return()=>clearInterval(p)},[t]),i)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading events..."})]})}),o.jsx(ht,{})]});const f=e[0];return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"live",className:"py-24 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(ks,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:[o.jsx("span",{className:"text-primary",children:"LIVE"})," Events"]}),o.jsx("p",{className:"text-muted-foreground",children:"Compete in real-time for prizes"})]}),f?o.jsxs(ie,{className:"max-w-4xl mx-auto border-primary/50 bg-gradient-to-br from-primary/5 to-transparent mb-8 animate-glow",children:[o.jsx(je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(Ae,{className:"text-2xl flex items-center gap-2",children:[o.jsxs("span",{className:"relative flex h-3 w-3",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-primary"})]}),f.title]}),o.jsx(Ue,{className:"bg-primary text-primary-foreground font-bold px-4 py-1",children:f.status==="LIVE"?"LIVE NOW":"STARTING SOON"})]})}),o.jsxs(oe,{children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(Na,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold font-mono",children:f.timeLeft}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Time Left"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(nn,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.participants}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Players"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(Jn,{className:"w-8 h-8 text-primary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.prize}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Prize Pool"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(ks,{className:"w-8 h-8 text-secondary mx-auto mb-2"}),o.jsx("div",{className:"text-2xl font-bold",children:f.difficulty}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Difficulty"})]})]}),o.jsxs(Y,{variant:"neon",size:"lg",className:"w-full",onClick:()=>d(f.id),children:[o.jsx(ks,{className:"w-5 h-5"}),f.status==="LIVE"?"Join Event Now":"Prepare for Event"]})]})]}):o.jsx(ie,{className:"max-w-4xl mx-auto border-border mb-8",children:o.jsxs(oe,{className:"p-12 text-center",children:[o.jsx(ks,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Live Events"}),o.jsx("p",{className:"text-muted-foreground",children:"Check back later for upcoming competitions"}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[o.jsx(Xe,{className:"w-12 h-12 text-primary mx-auto mb-3"}),o.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Want to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Sharpen your skills with our practice challenges while you wait for the next live event."}),o.jsxs(Y,{variant:"terminal",onClick:h,children:[o.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Explore Practice Challenges"]})]})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Upcoming Events"}),r.length===0?o.jsx(ie,{className:"border-border",children:o.jsxs(oe,{className:"p-8 text-center",children:[o.jsx(ia,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-muted-foreground",children:"No upcoming events scheduled"})]})}):o.jsx("div",{className:"space-y-4",children:r.map(p=>o.jsx(ie,{className:"border-border hover:border-primary/30 transition-all",children:o.jsx(oe,{className:"p-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("h4",{className:"font-bold text-xl",children:p.title}),o.jsx(Ue,{variant:"outline",className:"border-primary/30 text-primary",children:p.difficulty})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ia,{className:"w-4 h-4"}),p.date]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nn,{className:"w-4 h-4"}),p.participants," registered",p.maxParticipants&&` / ${p.maxParticipants} max`]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Jn,{className:"w-4 h-4"}),"Prize: ",p.prize]})]}),p.description&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:p.description})]}),o.jsx(Y,{variant:p.registered?"outline":"terminal",className:"md:ml-4",onClick:()=>!p.registered&&c(p.id),disabled:p.registered,children:p.registered?"Registered ":"Register"})]})})},p.id))})]}),o.jsx("div",{className:"max-w-4xl mx-auto mt-16",children:o.jsx(ie,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:o.jsxs(oe,{className:"p-8 text-center",children:[o.jsx(Xe,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Ready to Practice?"}),o.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Access our extensive library of practice challenges covering web security, cryptography, forensics, and more. Perfect for beginners and experts alike."}),o.jsxs(Y,{variant:"terminal",size:"lg",onClick:h,children:[o.jsx(Xe,{className:"w-5 h-5 mr-2"}),"Explore Practice Challenges"]})]})})})]})}),o.jsx(ht,{})]})};function RU(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a);l.displayName=i+"Context";const c=n.length;n=[...n,a];const d=f=>{var b;const{scope:p,children:v,...I}=f,_=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,S=g.useMemo(()=>I,Object.values(I));return o.jsx(_.Provider,{value:S,children:v})};d.displayName=i+"Provider";function h(f,p){var _;const v=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,I=g.useContext(v);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,PU(s,...e)]}function PU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Jr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var bt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},DU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Tv=DU.reduce((t,e)=>{const n=_v(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),LC={exports:{}},OC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=g;function LU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OU=typeof Object.is=="function"?Object.is:LU,MU=ca.useState,VU=ca.useEffect,FU=ca.useLayoutEffect,UU=ca.useDebugValue;function BU(t,e){var n=e(),r=MU({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return FU(function(){s.value=n,s.getSnapshot=e,vp(s)&&i({inst:s})},[t,n,e]),VU(function(){return vp(s)&&i({inst:s}),t(function(){vp(s)&&i({inst:s})})},[t]),UU(n),n}function vp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!OU(t,n)}catch{return!0}}function $U(t,e){return e()}var zU=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$U:BU;OC.useSyncExternalStore=ca.useSyncExternalStore!==void 0?ca.useSyncExternalStore:zU;LC.exports=OC;var HU=LC.exports;function WU(){return HU.useSyncExternalStore(qU,()=>!0,()=>!1)}function qU(){return()=>{}}var Sv="Avatar",[GU]=RU(Sv),[KU,MC]=GU(Sv),VC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return o.jsx(KU,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(Tv.span,{...r,ref:e})})});VC.displayName=Sv;var FC="AvatarImage",UC=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=MC(FC,n),l=QU(r,i),c=Jr(d=>{s(d),a.onImageLoadingStatusChange(d)});return bt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(Tv.img,{...i,ref:e,src:r}):null});UC.displayName=FC;var BC="AvatarFallback",$C=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=MC(BC,n),[a,l]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(Tv.span,{...s,ref:e}):null});$C.displayName=BC;function sb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function QU(t,{referrerPolicy:e,crossOrigin:n}){const r=WU(),s=g.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=g.useState(()=>sb(i,t));return bt(()=>{l(sb(i,t))},[i,t]),bt(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),a}var zC=VC,HC=UC,WC=$C;const qC=g.forwardRef(({className:t,...e},n)=>o.jsx(zC,{ref:n,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));qC.displayName=zC.displayName;const YU=g.forwardRef(({className:t,...e},n)=>o.jsx(HC,{ref:n,className:Le("aspect-square h-full w-full",t),...e}));YU.displayName=HC.displayName;const GC=g.forwardRef(({className:t,...e},n)=>o.jsx(WC,{ref:n,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));GC.displayName=WC.displayName;const XU=({eventName:t="CTF Competition"})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState(!0),l=async()=>{try{const c="/api/ctf/leaderboard",d="/api/platform/top-users",[h,f]=await Promise.all([fetch(c,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),fetch(d)]);if(h.ok){const p=await h.json();n(p)}else n([]);if(f.ok){const p=await f.json();s(p)}else s([])}catch{n([]),s([])}finally{a(!1)}};return g.useEffect(()=>{l();const c=setInterval(l,5e3);return()=>clearInterval(c)},[]),i?o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"leaderboard",className:"pt-24 pb-16 bg-muted/20 min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto text-center",children:[o.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading leaderboard data..."})]})}),o.jsx(ht,{})]}):o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{id:"ctf-leaderboard",className:"pt-24 pb-16 bg-background min-h-screen",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8 text-center",children:[o.jsx(Jn,{className:"w-12 h-12 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[t," - ",o.jsx("span",{className:"text-primary",children:"Live Scoreboard"})]})]}),o.jsxs(ie,{className:"max-w-6xl mx-auto border-border",children:[o.jsx(je,{className:"bg-muted/30",children:o.jsxs(Ae,{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(tb,{className:"w-5 h-5 text-primary"}),"Live Competition Rankings"]}),o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:e.length>0?`${e.length} Teams Competing`:"No active competition"})]})}),o.jsx(oe,{className:"p-0",children:e.length===0?o.jsxs("div",{className:"text-center py-16 text-muted-foreground",children:[o.jsx(Jn,{className:"w-20 h-20 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg mb-2",children:"No scores available yet"}),o.jsx("p",{className:"text-sm",children:"Leaderboard will update when competition starts"})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-muted/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"#"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Team"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Captain"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Points"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Last Activity"}),o.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Challenge"})]})}),o.jsx("tbody",{className:"divide-y divide-border",children:e.map(c=>o.jsxs("tr",{className:"hover:bg-muted/20 transition-colors duration-200",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:`text-lg font-bold ${c.rank<=3?"text-primary":"text-foreground"}`,children:c.rank})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:c.team}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-muted-foreground",children:c.captain}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-lg font-bold text-primary",children:c.points})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground",children:c.lastActivity}),o.jsx("td",{className:"px-6 py-4 text-sm text-muted-foreground max-w-xs truncate",children:c.challenge})]},c.rank))})]})})})]})]})}),o.jsx("section",{id:"platform-leaderboard",className:"py-16 bg-muted/20",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx(Jn,{className:"w-16 h-16 text-primary mx-auto mb-4"}),o.jsxs("h2",{className:"text-4xl font-bold mb-4",children:["Global ",o.jsx("span",{className:"text-primary",children:"Leaderboard"})]}),o.jsx("p",{className:"text-muted-foreground",children:"Top performers this month"})]}),o.jsxs(ie,{className:"max-w-4xl mx-auto border-border",children:[o.jsx(je,{children:o.jsxs(Ae,{className:"flex items-center gap-2",children:[o.jsx(tb,{className:"w-5 h-5 text-primary"}),"Top Platform Hackers"]})}),o.jsx(oe,{children:r.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Jn,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsx("p",{children:"No platform rankings available yet"})]}):o.jsx("div",{className:"space-y-3",children:r.map(c=>o.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg transition-all duration-300 ${c.rank<=3?"bg-primary/10 border-2 border-primary/30 hover:border-primary/50":"bg-muted/30 border border-border hover:border-primary/30"}`,children:[o.jsx("div",{className:`text-2xl font-bold w-12 text-center ${c.rank<=3?"text-primary":"text-muted-foreground"}`,children:c.badge||`#${c.rank}`}),o.jsx(qC,{className:"w-12 h-12 border-2 border-primary/30",children:o.jsx(GC,{className:"bg-primary/20 text-primary font-bold",children:c.name.substring(0,2).toUpperCase()})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-lg",children:c.name}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.solved," challenges solved"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:c.points.toLocaleString()}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]})]},c.rank))})})]})]})}),o.jsx(ht,{})]})};function De(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Ta(t,e=[]){let n=[];function r(i,a){const l=g.createContext(a),c=n.length;n=[...n,a];const d=f=>{var b;const{scope:p,children:v,...I}=f,_=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,S=g.useMemo(()=>I,Object.values(I));return o.jsx(_.Provider,{value:S,children:v})};d.displayName=i+"Provider";function h(f,p){var _;const v=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,I=g.useContext(v);if(I)return I;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(a=>g.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,JU(s,...e)]}function JU(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function ib(t){const e=ZU(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(t9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function ZU(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=r9(s),l=n9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ic(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var e9=Symbol("radix.slottable");function t9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===e9}function n9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function r9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function KC(t){const e=t+"CollectionProvider",[n,r]=Ta(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=_=>{const{scope:S,children:b}=_,w=gs.useRef(null),C=gs.useRef(new Map).current;return o.jsx(s,{scope:S,itemMap:C,collectionRef:w,children:b})};a.displayName=e;const l=t+"CollectionSlot",c=ib(l),d=gs.forwardRef((_,S)=>{const{scope:b,children:w}=_,C=i(l,b),R=ft(S,C.collectionRef);return o.jsx(c,{ref:R,children:w})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=ib(h),v=gs.forwardRef((_,S)=>{const{scope:b,children:w,...C}=_,R=gs.useRef(null),L=ft(S,R),A=i(h,b);return gs.useEffect(()=>(A.itemMap.set(R,{ref:R,...C}),()=>void A.itemMap.delete(R))),o.jsx(p,{[f]:"",ref:L,children:w})});v.displayName=h;function I(_){const S=i(t+"CollectionConsumer",_);return gs.useCallback(()=>{const w=S.collectionRef.current;if(!w)return[];const C=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((A,N)=>C.indexOf(A.ref.current)-C.indexOf(N.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:a,Slot:d,ItemSlot:v},I,r]}var s9=Zd[" useId ".trim().toString()]||(()=>{}),i9=0;function jc(t){const[e,n]=g.useState(s9());return bt(()=>{n(r=>r??String(i9++))},[t]),e?`radix-${e}`:""}function o9(t){const e=a9(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(c9);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function a9(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=d9(s),l=u9(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ic(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var l9=Symbol("radix.slottable");function c9(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===l9}function u9(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function d9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var h9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Me=h9.reduce((t,e)=>{const n=o9(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function f9(t,e){t&&pa.flushSync(()=>t.dispatchEvent(e))}var p9=Zd[" useInsertionEffect ".trim().toString()]||bt;function lc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=m9({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=g.useRef(t!==void 0);g.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const d=g.useCallback(h=>{var f;if(l){const p=g9(h)?h(t):h;p!==t&&((f=a.current)==null||f.call(a,p))}else i(h)},[l,t,i,a]);return[c,d]}function m9({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),i=g.useRef(e);return p9(()=>{i.current=e},[e]),g.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function g9(t){return typeof t=="function"}var y9=g.createContext(void 0);function Cv(t){const e=g.useContext(y9);return t||e||"ltr"}var xp="rovingFocusGroup.onEntryFocus",v9={bubbles:!1,cancelable:!0},Ac="RovingFocusGroup",[ng,QC,x9]=KC(Ac),[w9,YC]=Ta(Ac,[x9]),[_9,b9]=w9(Ac),XC=g.forwardRef((t,e)=>o.jsx(ng.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(ng.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(E9,{...t,ref:e})})}));XC.displayName=Ac;var E9=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,p=g.useRef(null),v=ft(e,p),I=Cv(i),[_,S]=lc({prop:a,defaultProp:l??null,onChange:c,caller:Ac}),[b,w]=g.useState(!1),C=Jr(d),R=QC(n),L=g.useRef(!1),[A,N]=g.useState(0);return g.useEffect(()=>{const y=p.current;if(y)return y.addEventListener(xp,C),()=>y.removeEventListener(xp,C)},[C]),o.jsx(_9,{scope:n,orientation:r,dir:I,loop:s,currentTabStopId:_,onItemFocus:g.useCallback(y=>S(y),[S]),onItemShiftTab:g.useCallback(()=>w(!0),[]),onFocusableItemAdd:g.useCallback(()=>N(y=>y+1),[]),onFocusableItemRemove:g.useCallback(()=>N(y=>y-1),[]),children:o.jsx(Me.div,{tabIndex:b||A===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:De(t.onMouseDown,()=>{L.current=!0}),onFocus:De(t.onFocus,y=>{const T=!L.current;if(y.target===y.currentTarget&&T&&!b){const E=new CustomEvent(xp,v9);if(y.currentTarget.dispatchEvent(E),!E.defaultPrevented){const j=R().filter(ee=>ee.focusable),k=j.find(ee=>ee.active),P=j.find(ee=>ee.id===_),ae=[k,P,...j].filter(Boolean).map(ee=>ee.ref.current);eI(ae,h)}}L.current=!1}),onBlur:De(t.onBlur,()=>w(!1))})})}),JC="RovingFocusGroupItem",ZC=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...l}=t,c=jc(),d=i||c,h=b9(JC,n),f=h.currentTabStopId===d,p=QC(n),{onFocusableItemAdd:v,onFocusableItemRemove:I,currentTabStopId:_}=h;return g.useEffect(()=>{if(r)return v(),()=>I()},[r,v,I]),o.jsx(ng.ItemSlot,{scope:n,id:d,focusable:r,active:s,children:o.jsx(Me.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:De(t.onMouseDown,S=>{r?h.onItemFocus(d):S.preventDefault()}),onFocus:De(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:De(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){h.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const b=S9(S,h.orientation,h.dir);if(b!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let C=p().filter(R=>R.focusable).map(R=>R.ref.current);if(b==="last")C.reverse();else if(b==="prev"||b==="next"){b==="prev"&&C.reverse();const R=C.indexOf(S.currentTarget);C=h.loop?C9(C,R+1):C.slice(R+1)}setTimeout(()=>eI(C))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:_!=null}):a})})});ZC.displayName=JC;var N9={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function T9(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function S9(t,e,n){const r=T9(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return N9[r]}function eI(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function C9(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var I9=XC,j9=ZC;function A9(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var tI=t=>{const{present:e,children:n}=t,r=k9(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=ft(r.ref,R9(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};tI.displayName="Presence";function k9(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),i=g.useRef("none"),a=t?"mounted":"unmounted",[l,c]=A9(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const d=vu(r.current);i.current=l==="mounted"?d:"none"},[l]),bt(()=>{const d=r.current,h=s.current;if(h!==t){const p=i.current,v=vu(d);t?c("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),bt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=v=>{const _=vu(r.current).includes(CSS.escape(v.animationName));if(v.target===e&&_&&(c("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},p=v=>{v.target===e&&(i.current=vu(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:g.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function vu(t){return(t==null?void 0:t.animationName)||"none"}function R9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Yh="Tabs",[P9]=Ta(Yh,[YC]),nI=YC(),[D9,Iv]=P9(Yh),rI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=Cv(l),[f,p]=lc({prop:r,onChange:s,defaultProp:i??"",caller:Yh});return o.jsx(D9,{scope:n,baseId:jc(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(Me.div,{dir:h,"data-orientation":a,...d,ref:e})})});rI.displayName=Yh;var sI="TabsList",iI=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Iv(sI,n),a=nI(n);return o.jsx(I9,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(Me.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});iI.displayName=sI;var oI="TabsTrigger",aI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Iv(oI,n),l=nI(n),c=uI(a.baseId,r),d=dI(a.baseId,r),h=r===a.value;return o.jsx(j9,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(Me.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:De(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:De(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:De(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});aI.displayName=oI;var lI="TabsContent",cI=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Iv(lI,n),c=uI(l.baseId,r),d=dI(l.baseId,r),h=r===l.value,f=g.useRef(h);return g.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(tI,{present:s||h,children:({present:p})=>o.jsx(Me.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});cI.displayName=lI;function uI(t,e){return`${t}-trigger-${e}`}function dI(t,e){return`${t}-content-${e}`}var L9=rI,hI=iI,fI=aI,pI=cI;const O9=L9,mI=g.forwardRef(({className:t,...e},n)=>o.jsx(hI,{ref:n,className:Le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));mI.displayName=hI.displayName;const Ti=g.forwardRef(({className:t,...e},n)=>o.jsx(fI,{ref:n,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",t),...e}));Ti.displayName=fI.displayName;const gI=g.forwardRef(({className:t,...e},n)=>o.jsx(pI,{ref:n,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));gI.displayName=pI.displayName;const M9=Qh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),jv=g.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,role:"alert",className:Le(M9({variant:e}),t),...n}));jv.displayName="Alert";const V9=g.forwardRef(({className:t,...e},n)=>o.jsx("h5",{ref:n,className:Le("mb-1 font-medium leading-none tracking-tight",t),...e}));V9.displayName="AlertTitle";const Av=g.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:Le("text-sm [&_p]:leading-relaxed",t),...e}));Av.displayName="AlertDescription";const F9=({onBack:t})=>{const[e,n]=g.useState([]),[r,s]=g.useState([]),[i,a]=g.useState([]),[l,c]=g.useState(!0),[d,h]=g.useState(""),[f,p]=g.useState("all"),[v,I]=g.useState(null);g.useEffect(()=>{_()},[]),g.useEffect(()=>{S()},[d,e,f]);const _=async()=>{try{const T=(await Vn(St(ye,"users"))).docs.map(j=>({id:j.id,...j.data()}));console.log(" Fetched users:",T),n(T);const E=T.filter(j=>j.requestedHostRole===!0);a(E)}catch(y){console.error("Error fetching users:",y),I({type:"error",text:"Failed to load users"})}finally{c(!1)}},S=()=>{let y=[...e];f==="admins"?y=y.filter(T=>T.role==="admin"):f==="moderators"?y=y.filter(T=>T.role==="moderator"):f==="students"?y=y.filter(T=>T.role==="student"):f==="pending"?y=y.filter(T=>T.requestedHostRole===!0):f==="active"?y=y.filter(T=>T.isActive!==!1):f==="suspended"&&(y=y.filter(T=>T.isActive===!1)),d&&(y=y.filter(T=>{var E,j,k,P,H;return((E=T.displayName)==null?void 0:E.toLowerCase().includes(d.toLowerCase()))||((j=T.email)==null?void 0:j.toLowerCase().includes(d.toLowerCase()))||((k=T.role)==null?void 0:k.toLowerCase().includes(d.toLowerCase()))||((P=T.firstName)==null?void 0:P.toLowerCase().includes(d.toLowerCase()))||((H=T.lastName)==null?void 0:H.toLowerCase().includes(d.toLowerCase()))})),s(y)},b=async(y,T)=>{try{console.log(" Attempting to update user role:",{userId:y,newRole:T});const E={role:T};(T==="admin"||T==="moderator")&&(E.requestedHostRole=!1,E.hostRequestReason=null),await hn(ze(ye,"users",y),E),n(e.map(j=>j.id===y?{...j,...E}:j)),console.log(" User role updated successfully"),I({type:"success",text:`User role updated to ${T}`}),setTimeout(()=>I(null),3e3)}catch(E){console.error(" Error updating user role:",E),console.error("Error code:",E.code),console.error("Error message:",E.message),I({type:"error",text:`Failed to update user role: ${E.message}`})}},w=async(y,T)=>{try{console.log(" Handling host request:",{userId:y,approved:T});const E={requestedHostRole:!1,hostRequestReason:null};T&&(E.role="moderator"),await hn(ze(ye,"users",y),E),n(e.map(k=>k.id===y?{...k,...E}:k)),I({type:"success",text:`Host request ${T?"approved":"rejected"}`}),setTimeout(()=>I(null),3e3)}catch(E){console.error("Error handling host request:",E),I({type:"error",text:`Failed to process host request: ${E.message}`})}},C=async(y,T)=>{try{console.log(" Toggling user status:",{userId:y,currentStatus:T});const E=!T;await hn(ze(ye,"users",y),{isActive:E}),n(e.map(k=>k.id===y?{...k,isActive:E}:k));const j=E?"activated":"suspended";console.log(" User status updated successfully:",j),I({type:"success",text:`User ${j}`}),setTimeout(()=>I(null),3e3)}catch(E){console.error(" Error updating user status:",E),console.error("Error code:",E.code),console.error("Error message:",E.message),I({type:"error",text:`Failed to update user status: ${E.message}`})}},R=y=>{switch(y){case"admin":return"destructive";case"moderator":return"default";case"student":return"secondary";default:return"outline"}},L=y=>{switch(y){case"admin":return o.jsx(Y_,{className:"w-3 h-3"});case"moderator":return o.jsx(Xe,{className:"w-3 h-3"});case"student":return o.jsx(Ev,{className:"w-3 h-3"});default:return o.jsx(Cn,{className:"w-3 h-3"})}},A=y=>y.requestedHostRole?"Pending Host":y.isActive===!1?"Suspended":"Active",N=y=>y.requestedHostRole?"default":y.isActive===!1?"destructive":"default";return l?o.jsx(ie,{children:o.jsx(oe,{className:"pt-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading users..."})]})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(Y,{variant:"ghost",onClick:t,className:"mb-2 -ml-3",children:" Back to Admin"}),o.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage user roles, permissions, and host requests"})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]})]}),v&&o.jsxs(jv,{className:v.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200",children:[v.type==="success"?o.jsx(Ur,{className:"w-4 h-4 text-green-600"}):o.jsx(oa,{className:"w-4 h-4 text-red-600"}),o.jsx(Av,{className:v.type==="success"?"text-green-600":"text-red-600",children:v.text})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsx(ie,{children:o.jsxs(oe,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]})}),o.jsx(ie,{children:o.jsxs(oe,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.filter(y=>y.role==="admin").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Admins"})]})}),o.jsx(ie,{children:o.jsxs(oe,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(y=>y.role==="moderator").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Moderators"})]})}),o.jsx(ie,{children:o.jsxs(oe,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(y=>y.role==="student").length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Students"})]})}),o.jsx(ie,{children:o.jsxs(oe,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending Hosts"})]})}),o.jsx(ie,{children:o.jsxs(oe,{className:"p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.filter(y=>y.isActive===!1).length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Suspended"})]})})]}),o.jsxs(O9,{value:f,onValueChange:p,className:"w-full",children:[o.jsxs(mI,{className:"grid w-full grid-cols-6",children:[o.jsx(Ti,{value:"all",className:"text-xs",children:"All Users"}),o.jsx(Ti,{value:"admins",className:"text-xs",children:"Admins"}),o.jsx(Ti,{value:"moderators",className:"text-xs",children:"Moderators"}),o.jsx(Ti,{value:"students",className:"text-xs",children:"Students"}),o.jsxs(Ti,{value:"pending",className:"text-xs",children:["Pending ",i.length>0&&`(${i.length})`]}),o.jsx(Ti,{value:"suspended",className:"text-xs",children:"Suspended"})]}),o.jsx(gI,{value:f,className:"mt-6",children:o.jsxs(ie,{children:[o.jsx(je,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs(Ae,{children:[f==="all"&&"All Users",f==="admins"&&"Administrators",f==="moderators"&&"Moderators",f==="students"&&"Students",f==="pending"&&"Pending Host Requests",f==="suspended"&&"Suspended Users"]}),o.jsxs(Ht,{children:[r.length," user",r.length!==1?"s":""," found"]})]}),o.jsxs("div",{className:"relative w-64",children:[o.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(pe,{placeholder:"Search users...",value:d,onChange:y=>h(y.target.value),className:"pl-10"})]})]})}),o.jsx(oe,{children:o.jsxs("div",{className:"space-y-4",children:[r.map(y=>o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:L(y.role)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("p",{className:"font-medium truncate",children:y.displayName||"No Name"}),y.role==="admin"&&o.jsx(Y_,{className:"w-4 h-4 text-yellow-600"})]}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:y.email}),y.institution&&o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.institution}),y.requestedHostRole&&y.hostRequestReason&&o.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[o.jsx("strong",{children:"Host Request:"})," ",y.hostRequestReason]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs(Ue,{variant:R(y.role),className:"flex items-center gap-1",children:[L(y.role),y.role]}),o.jsx(Ue,{variant:N(y),children:A(y)})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[o.jsxs("select",{value:y.role,onChange:T=>b(y.id,T.target.value),className:"p-2 border rounded text-sm bg-background",children:[o.jsx("option",{value:"student",children:"Student"}),o.jsx("option",{value:"moderator",children:"Moderator"}),o.jsx("option",{value:"admin",children:"Admin"})]}),y.requestedHostRole&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>w(y.id,!0),className:"h-9 w-9 p-0 text-green-600 border-green-200",children:o.jsx(Ur,{className:"w-4 h-4"})}),o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>w(y.id,!1),className:"h-9 w-9 p-0 text-red-600 border-red-200",children:o.jsx(oa,{className:"w-4 h-4"})})]}),!y.requestedHostRole&&o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>C(y.id,y.isActive??!0),className:`flex items-center gap-1 ${y.isActive===!1?"text-green-600 border-green-200 hover:bg-green-50":"text-red-600 border-red-200 hover:bg-red-50"}`,children:y.isActive===!1?o.jsxs(o.Fragment,{children:[o.jsx(uU,{className:"w-3 h-3"}),"Activate"]}):o.jsxs(o.Fragment,{children:[o.jsx(cU,{className:"w-3 h-3"}),"Suspend"]})})]})]},y.id)),r.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(nn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No users found matching your criteria."})]})]})})]})})]})]})},Sa=g.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:Le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Sa.displayName="Textarea";var U9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],B9=U9.reduce((t,e)=>{const n=_v(`Primitive.${e}`),r=g.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),$9="Label",yI=g.forwardRef((t,e)=>o.jsx(B9.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));yI.displayName=$9;var vI=yI;const z9=Qh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),G=g.forwardRef(({className:t,...e},n)=>o.jsx(vI,{ref:n,className:Le(z9(),t),...e}));G.displayName=vI.displayName;function ob(t,[e,n]){return Math.min(n,Math.max(e,t))}function H9(t,e=globalThis==null?void 0:globalThis.document){const n=Jr(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var W9="DismissableLayer",rg="dismissableLayer.update",q9="dismissableLayer.pointerDownOutside",G9="dismissableLayer.focusOutside",ab,xI=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wI=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,d=g.useContext(xI),[h,f]=g.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=g.useState({}),I=ft(e,N=>f(N)),_=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=_.indexOf(S),w=h?_.indexOf(h):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,R=w>=b,L=Y9(N=>{const y=N.target,T=[...d.branches].some(E=>E.contains(y));!R||T||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},p),A=X9(N=>{const y=N.target;[...d.branches].some(E=>E.contains(y))||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},p);return H9(N=>{w===d.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),g.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(ab=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),lb(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=ab)}},[h,p,n,d]),g.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),lb())},[h,d]),g.useEffect(()=>{const N=()=>v({});return document.addEventListener(rg,N),()=>document.removeEventListener(rg,N)},[]),o.jsx(Me.div,{...c,ref:I,style:{pointerEvents:C?R?"auto":"none":void 0,...t.style},onFocusCapture:De(t.onFocusCapture,A.onFocusCapture),onBlurCapture:De(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:De(t.onPointerDownCapture,L.onPointerDownCapture)})});wI.displayName=W9;var K9="DismissableLayerBranch",Q9=g.forwardRef((t,e)=>{const n=g.useContext(xI),r=g.useRef(null),s=ft(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(Me.div,{...t,ref:s})});Q9.displayName=K9;function Y9(t,e=globalThis==null?void 0:globalThis.document){const n=Jr(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){_I(q9,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function X9(t,e=globalThis==null?void 0:globalThis.document){const n=Jr(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&_I(G9,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lb(){const t=new CustomEvent(rg);document.dispatchEvent(t)}function _I(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?f9(s,i):s.dispatchEvent(i)}var wp=0;function J9(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??cb()),document.body.insertAdjacentElement("beforeend",t[1]??cb()),wp++,()=>{wp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),wp--}},[])}function cb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var _p="focusScope.autoFocusOnMount",bp="focusScope.autoFocusOnUnmount",ub={bubbles:!1,cancelable:!0},Z9="FocusScope",bI=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=g.useState(null),d=Jr(s),h=Jr(i),f=g.useRef(null),p=ft(e,_=>c(_)),v=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let _=function(C){if(v.paused||!l)return;const R=C.target;l.contains(R)?f.current=R:ys(f.current,{select:!0})},S=function(C){if(v.paused||!l)return;const R=C.relatedTarget;R!==null&&(l.contains(R)||ys(f.current,{select:!0}))},b=function(C){if(document.activeElement===document.body)for(const L of C)L.removedNodes.length>0&&ys(l)};document.addEventListener("focusin",_),document.addEventListener("focusout",S);const w=new MutationObserver(b);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",S),w.disconnect()}}},[r,l,v.paused]),g.useEffect(()=>{if(l){hb.add(v);const _=document.activeElement;if(!l.contains(_)){const b=new CustomEvent(_p,ub);l.addEventListener(_p,d),l.dispatchEvent(b),b.defaultPrevented||(e8(i8(EI(l)),{select:!0}),document.activeElement===_&&ys(l))}return()=>{l.removeEventListener(_p,d),setTimeout(()=>{const b=new CustomEvent(bp,ub);l.addEventListener(bp,h),l.dispatchEvent(b),b.defaultPrevented||ys(_??document.body,{select:!0}),l.removeEventListener(bp,h),hb.remove(v)},0)}}},[l,d,h,v]);const I=g.useCallback(_=>{if(!n&&!r||v.paused)return;const S=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,b=document.activeElement;if(S&&b){const w=_.currentTarget,[C,R]=t8(w);C&&R?!_.shiftKey&&b===R?(_.preventDefault(),n&&ys(C,{select:!0})):_.shiftKey&&b===C&&(_.preventDefault(),n&&ys(R,{select:!0})):b===w&&_.preventDefault()}},[n,r,v.paused]);return o.jsx(Me.div,{tabIndex:-1,...a,ref:p,onKeyDown:I})});bI.displayName=Z9;function e8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ys(r,{select:e}),document.activeElement!==n)return}function t8(t){const e=EI(t),n=db(e,t),r=db(e.reverse(),t);return[n,r]}function EI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function db(t,e){for(const n of t)if(!n8(n,{upTo:e}))return n}function n8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function r8(t){return t instanceof HTMLInputElement&&"select"in t}function ys(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&r8(t)&&e&&t.select()}}var hb=s8();function s8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=fb(t,e),t.unshift(e)},remove(e){var n;t=fb(t,e),(n=t[0])==null||n.resume()}}}function fb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function i8(t){return t.filter(e=>e.tagName!=="A")}const o8=["top","right","bottom","left"],ti=Math.min,_n=Math.max,Gd=Math.round,xu=Math.floor,Tr=t=>({x:t,y:t}),a8={left:"right",right:"left",bottom:"top",top:"bottom"},l8={start:"end",end:"start"};function sg(t,e,n){return _n(t,ti(e,n))}function Zr(t,e){return typeof t=="function"?t(e):t}function es(t){return t.split("-")[0]}function Ca(t){return t.split("-")[1]}function kv(t){return t==="x"?"y":"x"}function Rv(t){return t==="y"?"height":"width"}const c8=new Set(["top","bottom"]);function mr(t){return c8.has(es(t))?"y":"x"}function Pv(t){return kv(mr(t))}function u8(t,e,n){n===void 0&&(n=!1);const r=Ca(t),s=Pv(t),i=Rv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Kd(a)),[a,Kd(a)]}function d8(t){const e=Kd(t);return[ig(t),e,ig(e)]}function ig(t){return t.replace(/start|end/g,e=>l8[e])}const pb=["left","right"],mb=["right","left"],h8=["top","bottom"],f8=["bottom","top"];function p8(t,e,n){switch(t){case"top":case"bottom":return n?e?mb:pb:e?pb:mb;case"left":case"right":return e?h8:f8;default:return[]}}function m8(t,e,n,r){const s=Ca(t);let i=p8(es(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(ig)))),i}function Kd(t){return t.replace(/left|right|bottom|top/g,e=>a8[e])}function g8(t){return{top:0,right:0,bottom:0,left:0,...t}}function NI(t){return typeof t!="number"?g8(t):{top:t,right:t,bottom:t,left:t}}function Qd(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function gb(t,e,n){let{reference:r,floating:s}=t;const i=mr(e),a=Pv(e),l=Rv(a),c=es(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let v;switch(c){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(Ca(e)){case"start":v[a]-=p*(n&&d?-1:1);break;case"end":v[a]+=p*(n&&d?-1:1);break}return v}const y8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=gb(d,r,c),p=r,v={},I=0;for(let _=0;_<l.length;_++){const{name:S,fn:b}=l[_],{x:w,y:C,data:R,reset:L}=await b({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:v,rects:d,platform:a,elements:{reference:t,floating:e}});h=w??h,f=C??f,v={...v,[S]:{...v[S],...R}},L&&I<=50&&(I++,typeof L=="object"&&(L.placement&&(p=L.placement),L.rects&&(d=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:h,y:f}=gb(d,p,c)),_=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:v}};async function cc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=Zr(e,t),I=NI(v),S=l[p?f==="floating"?"reference":"floating":f],b=Qd(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(S)))==null||n?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},L=Qd(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:C,strategy:c}):w);return{top:(b.top-L.top+I.top)/R.y,bottom:(L.bottom-b.bottom+I.bottom)/R.y,left:(b.left-L.left+I.left)/R.x,right:(L.right-b.right+I.right)/R.x}}const v8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=Zr(t,e)||{};if(d==null)return{};const f=NI(h),p={x:n,y:r},v=Pv(s),I=Rv(v),_=await a.getDimensions(d),S=v==="y",b=S?"top":"left",w=S?"bottom":"right",C=S?"clientHeight":"clientWidth",R=i.reference[I]+i.reference[v]-p[v]-i.floating[I],L=p[v]-i.reference[v],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let N=A?A[C]:0;(!N||!await(a.isElement==null?void 0:a.isElement(A)))&&(N=l.floating[C]||i.floating[I]);const y=R/2-L/2,T=N/2-_[I]/2-1,E=ti(f[b],T),j=ti(f[w],T),k=E,P=N-_[I]-j,H=N/2-_[I]/2+y,ae=sg(k,H,P),ee=!c.arrow&&Ca(s)!=null&&H!==ae&&i.reference[I]/2-(H<k?E:j)-_[I]/2<0,le=ee?H<k?H-k:H-P:0;return{[v]:p[v]+le,data:{[v]:ae,centerOffset:H-ae-le,...ee&&{alignmentOffset:le}},reset:ee}}}),x8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:_=!0,...S}=Zr(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=es(s),w=mr(l),C=es(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(d.floating)),L=p||(C||!_?[Kd(l)]:d8(l)),A=I!=="none";!p&&A&&L.push(...m8(l,_,I,R));const N=[l,...L],y=await cc(e,S),T=[];let E=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(y[b]),f){const H=u8(s,a,R);T.push(y[H[0]],y[H[1]])}if(E=[...E,{placement:s,overflows:T}],!T.every(H=>H<=0)){var j,k;const H=(((j=i.flip)==null?void 0:j.index)||0)+1,ae=N[H];if(ae&&(!(f==="alignment"?w!==mr(ae):!1)||E.every(O=>mr(O.placement)===w?O.overflows[0]>0:!0)))return{data:{index:H,overflows:E},reset:{placement:ae}};let ee=(k=E.filter(le=>le.overflows[0]<=0).sort((le,O)=>le.overflows[1]-O.overflows[1])[0])==null?void 0:k.placement;if(!ee)switch(v){case"bestFit":{var P;const le=(P=E.filter(O=>{if(A){const q=mr(O.placement);return q===w||q==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(q=>q>0).reduce((q,se)=>q+se,0)]).sort((O,q)=>O[1]-q[1])[0])==null?void 0:P[0];le&&(ee=le);break}case"initialPlacement":ee=l;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function yb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function vb(t){return o8.some(e=>t[e]>=0)}const w8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Zr(t,e);switch(r){case"referenceHidden":{const i=await cc(e,{...s,elementContext:"reference"}),a=yb(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:vb(a)}}}case"escaped":{const i=await cc(e,{...s,altBoundary:!0}),a=yb(i,n.floating);return{data:{escapedOffsets:a,escaped:vb(a)}}}default:return{}}}}},TI=new Set(["left","top"]);async function _8(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=es(n),l=Ca(n),c=mr(n)==="y",d=TI.has(a)?-1:1,h=i&&c?-1:1,f=Zr(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:I}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof I=="number"&&(v=l==="end"?I*-1:I),c?{x:v*h,y:p*d}:{x:p*d,y:v*h}}const b8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await _8(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},E8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:S=>{let{x:b,y:w}=S;return{x:b,y:w}}},...c}=Zr(t,e),d={x:n,y:r},h=await cc(e,c),f=mr(es(s)),p=kv(f);let v=d[p],I=d[f];if(i){const S=p==="y"?"top":"left",b=p==="y"?"bottom":"right",w=v+h[S],C=v-h[b];v=sg(w,v,C)}if(a){const S=f==="y"?"top":"left",b=f==="y"?"bottom":"right",w=I+h[S],C=I-h[b];I=sg(w,I,C)}const _=l.fn({...e,[p]:v,[f]:I});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[p]:i,[f]:a}}}}}},N8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Zr(t,e),h={x:n,y:r},f=mr(s),p=kv(f);let v=h[p],I=h[f];const _=Zr(l,e),S=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(c){const C=p==="y"?"height":"width",R=i.reference[p]-i.floating[C]+S.mainAxis,L=i.reference[p]+i.reference[C]-S.mainAxis;v<R?v=R:v>L&&(v=L)}if(d){var b,w;const C=p==="y"?"width":"height",R=TI.has(es(s)),L=i.reference[f]-i.floating[C]+(R&&((b=a.offset)==null?void 0:b[f])||0)+(R?0:S.crossAxis),A=i.reference[f]+i.reference[C]+(R?0:((w=a.offset)==null?void 0:w[f])||0)-(R?S.crossAxis:0);I<L?I=L:I>A&&(I=A)}return{[p]:v,[f]:I}}}},T8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=Zr(t,e),h=await cc(e,d),f=es(s),p=Ca(s),v=mr(s)==="y",{width:I,height:_}=i.floating;let S,b;f==="top"||f==="bottom"?(S=f,b=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,S=p==="end"?"top":"bottom");const w=_-h.top-h.bottom,C=I-h.left-h.right,R=ti(_-h[S],w),L=ti(I-h[b],C),A=!e.middlewareData.shift;let N=R,y=L;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(y=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=w),A&&!p){const E=_n(h.left,0),j=_n(h.right,0),k=_n(h.top,0),P=_n(h.bottom,0);v?y=I-2*(E!==0||j!==0?E+j:_n(h.left,h.right)):N=_-2*(k!==0||P!==0?k+P:_n(h.top,h.bottom))}await c({...e,availableWidth:y,availableHeight:N});const T=await a.getDimensions(l.floating);return I!==T.width||_!==T.height?{reset:{rects:!0}}:{}}}};function Xh(){return typeof window<"u"}function Ia(t){return SI(t)?(t.nodeName||"").toLowerCase():"#document"}function In(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jr(t){var e;return(e=(SI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function SI(t){return Xh()?t instanceof Node||t instanceof In(t).Node:!1}function ir(t){return Xh()?t instanceof Element||t instanceof In(t).Element:!1}function Ir(t){return Xh()?t instanceof HTMLElement||t instanceof In(t).HTMLElement:!1}function xb(t){return!Xh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof In(t).ShadowRoot}const S8=new Set(["inline","contents"]);function kc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=or(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!S8.has(s)}const C8=new Set(["table","td","th"]);function I8(t){return C8.has(Ia(t))}const j8=[":popover-open",":modal"];function Jh(t){return j8.some(e=>{try{return t.matches(e)}catch{return!1}})}const A8=["transform","translate","scale","rotate","perspective"],k8=["transform","translate","scale","rotate","perspective","filter"],R8=["paint","layout","strict","content"];function Dv(t){const e=Lv(),n=ir(t)?or(t):t;return A8.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||k8.some(r=>(n.willChange||"").includes(r))||R8.some(r=>(n.contain||"").includes(r))}function P8(t){let e=ni(t);for(;Ir(e)&&!ua(e);){if(Dv(e))return e;if(Jh(e))return null;e=ni(e)}return null}function Lv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const D8=new Set(["html","body","#document"]);function ua(t){return D8.has(Ia(t))}function or(t){return In(t).getComputedStyle(t)}function Zh(t){return ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ni(t){if(Ia(t)==="html")return t;const e=t.assignedSlot||t.parentNode||xb(t)&&t.host||jr(t);return xb(e)?e.host:e}function CI(t){const e=ni(t);return ua(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ir(e)&&kc(e)?e:CI(e)}function uc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=CI(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=In(s);if(i){const l=og(a);return e.concat(a,a.visualViewport||[],kc(s)?s:[],l&&n?uc(l):[])}return e.concat(s,uc(s,[],n))}function og(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function II(t){const e=or(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ir(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=Gd(n)!==i||Gd(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Ov(t){return ir(t)?t:t.contextElement}function Bo(t){const e=Ov(t);if(!Ir(e))return Tr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=II(e);let a=(i?Gd(n.width):n.width)/r,l=(i?Gd(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const L8=Tr(0);function jI(t){const e=In(t);return!Lv()||!e.visualViewport?L8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function O8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==In(t)?!1:e}function Qi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Ov(t);let a=Tr(1);e&&(r?ir(r)&&(a=Bo(r)):a=Bo(t));const l=O8(i,n,r)?jI(i):Tr(0);let c=(s.left+l.x)/a.x,d=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=In(i),v=r&&ir(r)?In(r):r;let I=p,_=og(I);for(;_&&r&&v!==I;){const S=Bo(_),b=_.getBoundingClientRect(),w=or(_),C=b.left+(_.clientLeft+parseFloat(w.paddingLeft))*S.x,R=b.top+(_.clientTop+parseFloat(w.paddingTop))*S.y;c*=S.x,d*=S.y,h*=S.x,f*=S.y,c+=C,d+=R,I=In(_),_=og(I)}}return Qd({width:h,height:f,x:c,y:d})}function ef(t,e){const n=Zh(t).scrollLeft;return e?e.left+n:Qi(jr(t)).left+n}function AI(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-ef(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function M8(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=jr(r),l=e?Jh(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Tr(1);const h=Tr(0),f=Ir(r);if((f||!f&&!i)&&((Ia(r)!=="body"||kc(a))&&(c=Zh(r)),Ir(r))){const v=Qi(r);d=Bo(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const p=a&&!f&&!i?AI(a,c):Tr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:n.y*d.y-c.scrollTop*d.y+h.y+p.y}}function V8(t){return Array.from(t.getClientRects())}function F8(t){const e=jr(t),n=Zh(t),r=t.ownerDocument.body,s=_n(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=_n(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+ef(t);const l=-n.scrollTop;return or(r).direction==="rtl"&&(a+=_n(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}const wb=25;function U8(t,e){const n=In(t),r=jr(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const h=Lv();(!h||h&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const d=ef(r);if(d<=0){const h=r.ownerDocument,f=h.body,p=getComputedStyle(f),v=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,I=Math.abs(r.clientWidth-f.clientWidth-v);I<=wb&&(i-=I)}else d<=wb&&(i+=d);return{width:i,height:a,x:l,y:c}}const B8=new Set(["absolute","fixed"]);function $8(t,e){const n=Qi(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ir(t)?Bo(t):Tr(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:l,x:c,y:d}}function _b(t,e,n){let r;if(e==="viewport")r=U8(t,n);else if(e==="document")r=F8(jr(t));else if(ir(e))r=$8(e,n);else{const s=jI(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Qd(r)}function kI(t,e){const n=ni(t);return n===e||!ir(n)||ua(n)?!1:or(n).position==="fixed"||kI(n,e)}function z8(t,e){const n=e.get(t);if(n)return n;let r=uc(t,[],!1).filter(l=>ir(l)&&Ia(l)!=="body"),s=null;const i=or(t).position==="fixed";let a=i?ni(t):t;for(;ir(a)&&!ua(a);){const l=or(a),c=Dv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&B8.has(s.position)||kc(a)&&!c&&kI(t,a))?r=r.filter(h=>h!==a):s=l,a=ni(a)}return e.set(t,r),r}function H8(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Jh(e)?[]:z8(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((d,h)=>{const f=_b(e,h,s);return d.top=_n(f.top,d.top),d.right=ti(f.right,d.right),d.bottom=ti(f.bottom,d.bottom),d.left=_n(f.left,d.left),d},_b(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function W8(t){const{width:e,height:n}=II(t);return{width:e,height:n}}function q8(t,e,n){const r=Ir(e),s=jr(e),i=n==="fixed",a=Qi(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Tr(0);function d(){c.x=ef(s)}if(r||!r&&!i)if((Ia(e)!=="body"||kc(s))&&(l=Zh(e)),r){const v=Qi(e,!0,i,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?AI(s,l):Tr(0),f=a.left+l.scrollLeft-c.x-h.x,p=a.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:a.width,height:a.height}}function Ep(t){return or(t).position==="static"}function bb(t,e){if(!Ir(t)||or(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return jr(t)===n&&(n=n.ownerDocument.body),n}function RI(t,e){const n=In(t);if(Jh(t))return n;if(!Ir(t)){let s=ni(t);for(;s&&!ua(s);){if(ir(s)&&!Ep(s))return s;s=ni(s)}return n}let r=bb(t,e);for(;r&&I8(r)&&Ep(r);)r=bb(r,e);return r&&ua(r)&&Ep(r)&&!Dv(r)?n:r||P8(t)||n}const G8=async function(t){const e=this.getOffsetParent||RI,n=this.getDimensions,r=await n(t.floating);return{reference:q8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function K8(t){return or(t).direction==="rtl"}const Q8={convertOffsetParentRelativeRectToViewportRelativeRect:M8,getDocumentElement:jr,getClippingRect:H8,getOffsetParent:RI,getElementRects:G8,getClientRects:V8,getDimensions:W8,getScale:Bo,isElement:ir,isRTL:K8};function PI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Y8(t,e){let n=null,r;const s=jr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:p,height:v}=d;if(l||e(),!p||!v)return;const I=xu(f),_=xu(s.clientWidth-(h+p)),S=xu(s.clientHeight-(f+v)),b=xu(h),C={rootMargin:-I+"px "+-_+"px "+-S+"px "+-b+"px",threshold:_n(0,ti(1,c))||1};let R=!0;function L(A){const N=A[0].intersectionRatio;if(N!==c){if(!R)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!PI(d,t.getBoundingClientRect())&&a(),R=!1}try{n=new IntersectionObserver(L,{...C,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,C)}n.observe(t)}return a(!0),i}function X8(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Ov(t),h=s||i?[...d?uc(d):[],...uc(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=d&&l?Y8(d,n):null;let p=-1,v=null;a&&(v=new ResizeObserver(b=>{let[w]=b;w&&w.target===d&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(e)})),n()}),d&&!c&&v.observe(d),v.observe(e));let I,_=c?Qi(t):null;c&&S();function S(){const b=Qi(t);_&&!PI(_,b)&&n(),_=b,I=requestAnimationFrame(S)}return n(),()=>{var b;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(b=v)==null||b.disconnect(),v=null,c&&cancelAnimationFrame(I)}}const J8=b8,Z8=E8,eB=x8,tB=T8,nB=w8,Eb=v8,rB=N8,sB=(t,e,n)=>{const r=new Map,s={platform:Q8,...n},i={...s.platform,_c:r};return y8(t,e,{...s,platform:i})};var iB=typeof document<"u",oB=function(){},qu=iB?g.useLayoutEffect:oB;function Yd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Yd(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Yd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function DI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Nb(t,e){const n=DI(t);return Math.round(e*n)/n}function Np(t){const e=g.useRef(t);return qu(()=>{e.current=t}),e}function aB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=g.useState(r);Yd(p,r)||v(r);const[I,_]=g.useState(null),[S,b]=g.useState(null),w=g.useCallback(O=>{O!==A.current&&(A.current=O,_(O))},[]),C=g.useCallback(O=>{O!==N.current&&(N.current=O,b(O))},[]),R=i||I,L=a||S,A=g.useRef(null),N=g.useRef(null),y=g.useRef(h),T=c!=null,E=Np(c),j=Np(s),k=Np(d),P=g.useCallback(()=>{if(!A.current||!N.current)return;const O={placement:e,strategy:n,middleware:p};j.current&&(O.platform=j.current),sB(A.current,N.current,O).then(q=>{const se={...q,isPositioned:k.current!==!1};H.current&&!Yd(y.current,se)&&(y.current=se,pa.flushSync(()=>{f(se)}))})},[p,e,n,j,k]);qu(()=>{d===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[d]);const H=g.useRef(!1);qu(()=>(H.current=!0,()=>{H.current=!1}),[]),qu(()=>{if(R&&(A.current=R),L&&(N.current=L),R&&L){if(E.current)return E.current(R,L,P);P()}},[R,L,P,E,T]);const ae=g.useMemo(()=>({reference:A,floating:N,setReference:w,setFloating:C}),[w,C]),ee=g.useMemo(()=>({reference:R,floating:L}),[R,L]),le=g.useMemo(()=>{const O={position:n,left:0,top:0};if(!ee.floating)return O;const q=Nb(ee.floating,h.x),se=Nb(ee.floating,h.y);return l?{...O,transform:"translate("+q+"px, "+se+"px)",...DI(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:q,top:se}},[n,l,ee.floating,h.x,h.y]);return g.useMemo(()=>({...h,update:P,refs:ae,elements:ee,floatingStyles:le}),[h,P,ae,ee,le])}const lB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Eb({element:r.current,padding:s}).fn(n):{}:r?Eb({element:r,padding:s}).fn(n):{}}}},cB=(t,e)=>({...J8(t),options:[t,e]}),uB=(t,e)=>({...Z8(t),options:[t,e]}),dB=(t,e)=>({...rB(t),options:[t,e]}),hB=(t,e)=>({...eB(t),options:[t,e]}),fB=(t,e)=>({...tB(t),options:[t,e]}),pB=(t,e)=>({...nB(t),options:[t,e]}),mB=(t,e)=>({...lB(t),options:[t,e]});var gB="Arrow",LI=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(Me.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});LI.displayName=gB;var yB=LI;function OI(t){const[e,n]=g.useState(void 0);return bt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Mv="Popper",[MI,VI]=Ta(Mv),[vB,FI]=MI(Mv),UI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return o.jsx(vB,{scope:e,anchor:r,onAnchorChange:s,children:n})};UI.displayName=Mv;var BI="PopperAnchor",$I=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=FI(BI,n),a=g.useRef(null),l=ft(e,a),c=g.useRef(null);return g.useEffect(()=>{const d=c.current;c.current=(r==null?void 0:r.current)||a.current,d!==c.current&&i.onAnchorChange(c.current)}),r?null:o.jsx(Me.div,{...s,ref:l})});$I.displayName=BI;var Vv="PopperContent",[xB,wB]=MI(Vv),zI=g.forwardRef((t,e)=>{var W,ue,Pe,Se,be,Ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:I,..._}=t,S=FI(Vv,n),[b,w]=g.useState(null),C=ft(e,It=>w(It)),[R,L]=g.useState(null),A=OI(R),N=(A==null?void 0:A.width)??0,y=(A==null?void 0:A.height)??0,T=r+(i!=="center"?"-"+i:""),E=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},j=Array.isArray(d)?d:[d],k=j.length>0,P={padding:E,boundary:j.filter(bB),altBoundary:k},{refs:H,floatingStyles:ae,placement:ee,isPositioned:le,middlewareData:O}=aB({strategy:"fixed",placement:T,whileElementsMounted:(...It)=>X8(...It,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[cB({mainAxis:s+y,alignmentAxis:a}),c&&uB({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?dB():void 0,...P}),c&&hB({...P}),fB({...P,apply:({elements:It,rects:vn,availableWidth:mi,availableHeight:Ar})=>{const{width:kr,height:Rc}=vn.reference,at=It.floating.style;at.setProperty("--radix-popper-available-width",`${mi}px`),at.setProperty("--radix-popper-available-height",`${Ar}px`),at.setProperty("--radix-popper-anchor-width",`${kr}px`),at.setProperty("--radix-popper-anchor-height",`${Rc}px`)}}),R&&mB({element:R,padding:l}),EB({arrowWidth:N,arrowHeight:y}),p&&pB({strategy:"referenceHidden",...P})]}),[q,se]=qI(ee),V=Jr(I);bt(()=>{le&&(V==null||V())},[le,V]);const z=(W=O.arrow)==null?void 0:W.x,fe=(ue=O.arrow)==null?void 0:ue.y,ve=((Pe=O.arrow)==null?void 0:Pe.centerOffset)!==0,[Q,J]=g.useState();return bt(()=>{b&&J(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:le?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(Se=O.transformOrigin)==null?void 0:Se.x,(be=O.transformOrigin)==null?void 0:be.y].join(" "),...((Ce=O.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(xB,{scope:n,placedSide:q,onArrowChange:L,arrowX:z,arrowY:fe,shouldHideArrow:ve,children:o.jsx(Me.div,{"data-side":q,"data-align":se,..._,ref:C,style:{..._.style,animation:le?void 0:"none"}})})})});zI.displayName=Vv;var HI="PopperArrow",_B={top:"bottom",right:"left",bottom:"top",left:"right"},WI=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=wB(HI,r),a=_B[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(yB,{...s,ref:n,style:{...s.style,display:"block"}})})});WI.displayName=HI;function bB(t){return t!==null}var EB=t=>({name:"transformOrigin",options:t,fn(e){var S,b,w;const{placement:n,rects:r,middlewareData:s}=e,a=((S=s.arrow)==null?void 0:S.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[d,h]=qI(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,v=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let I="",_="";return d==="bottom"?(I=a?f:`${p}px`,_=`${-c}px`):d==="top"?(I=a?f:`${p}px`,_=`${r.floating.height+c}px`):d==="right"?(I=`${-c}px`,_=a?f:`${v}px`):d==="left"&&(I=`${r.floating.width+c}px`,_=a?f:`${v}px`),{data:{x:I,y:_}}}});function qI(t){const[e,n="center"]=t.split("-");return[e,n]}var NB=UI,TB=$I,SB=zI,CB=WI,IB="Portal",GI=g.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=g.useState(!1);bt(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?qk.createPortal(o.jsx(Me.div,{...r,ref:e}),a):null});GI.displayName=IB;function jB(t){const e=AB(t),n=g.forwardRef((r,s)=>{const{children:i,...a}=r,l=g.Children.toArray(i),c=l.find(RB);if(c){const d=c.props.children,h=l.map(f=>f===c?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:s,children:g.isValidElement(d)?g.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}function AB(t){const e=g.forwardRef((n,r)=>{const{children:s,...i}=n;if(g.isValidElement(s)){const a=DB(s),l=PB(i,s.props);return s.type!==g.Fragment&&(l.ref=r?Ic(r,a):a),g.cloneElement(s,l)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var kB=Symbol("radix.slottable");function RB(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===kB}function PB(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function DB(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function KI(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var QI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LB="VisuallyHidden",OB=g.forwardRef((t,e)=>o.jsx(Me.span,{...t,ref:e,style:{...QI,...t.style}}));OB.displayName=LB;var MB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uo=new WeakMap,wu=new WeakMap,_u={},Tp=0,YI=function(t){return t&&(t.host||YI(t.parentNode))},VB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=YI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},FB=function(t,e,n,r){var s=VB(e,Array.isArray(t)?t:[t]);_u[n]||(_u[n]=new WeakMap);var i=_u[n],a=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var v=p.getAttribute(r),I=v!==null&&v!=="false",_=(uo.get(p)||0)+1,S=(i.get(p)||0)+1;uo.set(p,_),i.set(p,S),a.push(p),_===1&&I&&wu.set(p,!0),S===1&&p.setAttribute(n,"true"),I||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),Tp++,function(){a.forEach(function(f){var p=uo.get(f)-1,v=i.get(f)-1;uo.set(f,p),i.set(f,v),p||(wu.has(f)||f.removeAttribute(r),wu.delete(f)),v||f.removeAttribute(n)}),Tp--,Tp||(uo=new WeakMap,uo=new WeakMap,wu=new WeakMap,_u={})}},UB=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=MB(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),FB(r,s,n,"aria-hidden")):function(){return null}},fr=function(){return fr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fr.apply(this,arguments)};function XI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function BB(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Gu="right-scroll-bar-position",Ku="width-before-scroll-bar",$B="with-scroll-bars-hidden",zB="--removed-body-scroll-bar-size";function Sp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function HB(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var WB=typeof window<"u"?g.useLayoutEffect:g.useEffect,Tb=new WeakMap;function qB(t,e){var n=HB(null,function(r){return t.forEach(function(s){return Sp(s,r)})});return WB(function(){var r=Tb.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Sp(l,null)}),i.forEach(function(l){s.has(l)||Sp(l,a)})}Tb.set(n,t)},[t]),n}function GB(t){return t}function KB(t,e){e===void 0&&(e=GB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),n}}}};return s}function QB(t){t===void 0&&(t={});var e=KB(null);return e.options=fr({async:!0,ssr:!1},t),e}var JI=function(t){var e=t.sideCar,n=XI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,fr({},n))};JI.isSideCarExport=!0;function YB(t,e){return t.useMedium(e),JI}var ZI=QB(),Cp=function(){},tf=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Cp,onWheelCapture:Cp,onTouchMoveCapture:Cp}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,v=t.noRelative,I=t.noIsolation,_=t.inert,S=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,C=t.gapMode,R=XI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),L=p,A=qB([n,e]),N=fr(fr({},R),s);return g.createElement(g.Fragment,null,h&&g.createElement(L,{sideCar:ZI,removeScrollBar:d,shards:f,noRelative:v,noIsolation:I,inert:_,setCallbacks:i,allowPinchZoom:!!S,lockRef:n,gapMode:C}),a?g.cloneElement(g.Children.only(l),fr(fr({},N),{ref:A})):g.createElement(w,fr({},N,{className:c,ref:A}),l))});tf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};tf.classNames={fullWidth:Ku,zeroRight:Gu};var XB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JB(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=XB();return e&&t.setAttribute("nonce",e),t}function ZB(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function e$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var t$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=JB())&&(ZB(e,n),e$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},n$=function(){var t=t$();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},ej=function(){var t=n$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},r$={left:0,top:0,right:0,gap:0},Ip=function(t){return parseInt(t||"",10)||0},s$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ip(n),Ip(r),Ip(s)]},i$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return r$;var e=s$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},o$=ej(),$o="data-scroll-locked",a$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat($B,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat($o,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gu,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ku,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Gu," .").concat(Gu,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ku," .").concat(Ku,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($o,`] {
    `).concat(zB,": ").concat(l,`px;
  }
`)},Sb=function(){var t=parseInt(document.body.getAttribute($o)||"0",10);return isFinite(t)?t:0},l$=function(){g.useEffect(function(){return document.body.setAttribute($o,(Sb()+1).toString()),function(){var t=Sb()-1;t<=0?document.body.removeAttribute($o):document.body.setAttribute($o,t.toString())}},[])},c$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;l$();var i=g.useMemo(function(){return i$(s)},[s]);return g.createElement(o$,{styles:a$(i,!e,s,n?"":"!important")})},ag=!1;if(typeof window<"u")try{var bu=Object.defineProperty({},"passive",{get:function(){return ag=!0,!0}});window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{ag=!1}var ho=ag?{passive:!1}:!1,u$=function(t){return t.tagName==="TEXTAREA"},tj=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!u$(t)&&n[e]==="visible")},d$=function(t){return tj(t,"overflowY")},h$=function(t){return tj(t,"overflowX")},Cb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nj(t,r);if(s){var i=rj(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},f$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},p$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},nj=function(t,e){return t==="v"?d$(e):h$(e)},rj=function(t,e){return t==="v"?f$(e):p$(e)},m$=function(t,e){return t==="h"&&e==="rtl"?-1:1},g$=function(t,e,n,r,s){var i=m$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),d=!1,h=a>0,f=0,p=0;do{if(!l)break;var v=rj(t,l),I=v[0],_=v[1],S=v[2],b=_-S-i*I;(I||b)&&nj(t,l)&&(f+=b,p+=I);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(f)<1||!h&&Math.abs(p)<1)&&(d=!0),d},Eu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ib=function(t){return[t.deltaX,t.deltaY]},jb=function(t){return t&&"current"in t?t.current:t},y$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},v$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},x$=0,fo=[];function w$(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(x$++)[0],i=g.useState(ej)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=BB([t.lockRef.current],(t.shards||[]).map(jb),!0).filter(Boolean);return _.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=g.useCallback(function(_,S){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!a.current.allowPinchZoom;var b=Eu(_),w=n.current,C="deltaX"in _?_.deltaX:w[0]-b[0],R="deltaY"in _?_.deltaY:w[1]-b[1],L,A=_.target,N=Math.abs(C)>Math.abs(R)?"h":"v";if("touches"in _&&N==="h"&&A.type==="range")return!1;var y=Cb(N,A);if(!y)return!0;if(y?L=N:(L=N==="v"?"h":"v",y=Cb(N,A)),!y)return!1;if(!r.current&&"changedTouches"in _&&(C||R)&&(r.current=L),!L)return!0;var T=r.current||L;return g$(T,S,_,T==="h"?C:R)},[]),c=g.useCallback(function(_){var S=_;if(!(!fo.length||fo[fo.length-1]!==i)){var b="deltaY"in S?Ib(S):Eu(S),w=e.current.filter(function(L){return L.name===S.type&&(L.target===S.target||S.target===L.shadowParent)&&y$(L.delta,b)})[0];if(w&&w.should){S.cancelable&&S.preventDefault();return}if(!w){var C=(a.current.shards||[]).map(jb).filter(Boolean).filter(function(L){return L.contains(S.target)}),R=C.length>0?l(S,C[0]):!a.current.noIsolation;R&&S.cancelable&&S.preventDefault()}}},[]),d=g.useCallback(function(_,S,b,w){var C={name:_,delta:S,target:b,should:w,shadowParent:_$(b)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(R){return R!==C})},1)},[]),h=g.useCallback(function(_){n.current=Eu(_),r.current=void 0},[]),f=g.useCallback(function(_){d(_.type,Ib(_),_.target,l(_,t.lockRef.current))},[]),p=g.useCallback(function(_){d(_.type,Eu(_),_.target,l(_,t.lockRef.current))},[]);g.useEffect(function(){return fo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,ho),document.addEventListener("touchmove",c,ho),document.addEventListener("touchstart",h,ho),function(){fo=fo.filter(function(_){return _!==i}),document.removeEventListener("wheel",c,ho),document.removeEventListener("touchmove",c,ho),document.removeEventListener("touchstart",h,ho)}},[]);var v=t.removeScrollBar,I=t.inert;return g.createElement(g.Fragment,null,I?g.createElement(i,{styles:v$(s)}):null,v?g.createElement(c$,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function _$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const b$=YB(ZI,w$);var sj=g.forwardRef(function(t,e){return g.createElement(tf,fr({},t,{ref:e,sideCar:b$}))});sj.classNames=tf.classNames;var E$=[" ","Enter","ArrowUp","ArrowDown"],N$=[" ","Enter"],Yi="Select",[nf,rf,T$]=KC(Yi),[ja]=Ta(Yi,[T$,VI]),sf=VI(),[S$,fi]=ja(Yi),[C$,I$]=ja(Yi),ij=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:v,form:I}=t,_=sf(e),[S,b]=g.useState(null),[w,C]=g.useState(null),[R,L]=g.useState(!1),A=Cv(d),[N,y]=lc({prop:r,defaultProp:s??!1,onChange:i,caller:Yi}),[T,E]=lc({prop:a,defaultProp:l,onChange:c,caller:Yi}),j=g.useRef(null),k=S?I||!!S.closest("form"):!0,[P,H]=g.useState(new Set),ae=Array.from(P).map(ee=>ee.props.value).join(";");return o.jsx(NB,{..._,children:o.jsxs(S$,{required:v,scope:e,trigger:S,onTriggerChange:b,valueNode:w,onValueNodeChange:C,valueNodeHasChildren:R,onValueNodeHasChildrenChange:L,contentId:jc(),value:T,onValueChange:E,open:N,onOpenChange:y,dir:A,triggerPointerDownPosRef:j,disabled:p,children:[o.jsx(nf.Provider,{scope:e,children:o.jsx(C$,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(ee=>{H(le=>new Set(le).add(ee))},[]),onNativeOptionRemove:g.useCallback(ee=>{H(le=>{const O=new Set(le);return O.delete(ee),O})},[]),children:n})}),k?o.jsxs(jj,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:ee=>E(ee.target.value),disabled:p,form:I,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},ae):null]})})};ij.displayName=Yi;var oj="SelectTrigger",aj=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=sf(n),a=fi(oj,n),l=a.disabled||r,c=ft(e,a.onTriggerChange),d=rf(n),h=g.useRef("touch"),[f,p,v]=kj(_=>{const S=d().filter(C=>!C.disabled),b=S.find(C=>C.value===a.value),w=Rj(S,_,b);w!==void 0&&a.onValueChange(w.value)}),I=_=>{l||(a.onOpenChange(!0),v()),_&&(a.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return o.jsx(TB,{asChild:!0,...i,children:o.jsx(Me.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Aj(a.value)?"":void 0,...s,ref:c,onClick:De(s.onClick,_=>{_.currentTarget.focus(),h.current!=="mouse"&&I(_)}),onPointerDown:De(s.onPointerDown,_=>{h.current=_.pointerType;const S=_.target;S.hasPointerCapture(_.pointerId)&&S.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(I(_),_.preventDefault())}),onKeyDown:De(s.onKeyDown,_=>{const S=f.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&p(_.key),!(S&&_.key===" ")&&E$.includes(_.key)&&(I(),_.preventDefault())})})})});aj.displayName=oj;var lj="SelectValue",cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=fi(lj,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=ft(e,c.onValueNodeChange);return bt(()=>{d(h)},[d,h]),o.jsx(Me.span,{...l,ref:f,style:{pointerEvents:"none"},children:Aj(c.value)?o.jsx(o.Fragment,{children:a}):i})});cj.displayName=lj;var j$="SelectIcon",uj=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(Me.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});uj.displayName=j$;var A$="SelectPortal",dj=t=>o.jsx(GI,{asChild:!0,...t});dj.displayName=A$;var Xi="SelectContent",hj=g.forwardRef((t,e)=>{const n=fi(Xi,t.__scopeSelect),[r,s]=g.useState();if(bt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?pa.createPortal(o.jsx(fj,{scope:t.__scopeSelect,children:o.jsx(nf.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(pj,{...t,ref:e})});hj.displayName=Xi;var Gn=10,[fj,pi]=ja(Xi),k$="SelectContentImpl",R$=jB("SelectContent.RemoveScroll"),pj=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:I,hideWhenDetached:_,avoidCollisions:S,...b}=t,w=fi(Xi,n),[C,R]=g.useState(null),[L,A]=g.useState(null),N=ft(e,W=>R(W)),[y,T]=g.useState(null),[E,j]=g.useState(null),k=rf(n),[P,H]=g.useState(!1),ae=g.useRef(!1);g.useEffect(()=>{if(C)return UB(C)},[C]),J9();const ee=g.useCallback(W=>{const[ue,...Pe]=k().map(Ce=>Ce.ref.current),[Se]=Pe.slice(-1),be=document.activeElement;for(const Ce of W)if(Ce===be||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===ue&&L&&(L.scrollTop=0),Ce===Se&&L&&(L.scrollTop=L.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==be))return},[k,L]),le=g.useCallback(()=>ee([y,C]),[ee,y,C]);g.useEffect(()=>{P&&le()},[P,le]);const{onOpenChange:O,triggerPointerDownPosRef:q}=w;g.useEffect(()=>{if(C){let W={x:0,y:0};const ue=Se=>{var be,Ce;W={x:Math.abs(Math.round(Se.pageX)-(((be=q.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((Ce=q.current)==null?void 0:Ce.y)??0))}},Pe=Se=>{W.x<=10&&W.y<=10?Se.preventDefault():C.contains(Se.target)||O(!1),document.removeEventListener("pointermove",ue),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",ue),document.addEventListener("pointerup",Pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ue),document.removeEventListener("pointerup",Pe,{capture:!0})}}},[C,O,q]),g.useEffect(()=>{const W=()=>O(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[O]);const[se,V]=kj(W=>{const ue=k().filter(be=>!be.disabled),Pe=ue.find(be=>be.ref.current===document.activeElement),Se=Rj(ue,W,Pe);Se&&setTimeout(()=>Se.ref.current.focus())}),z=g.useCallback((W,ue,Pe)=>{const Se=!ae.current&&!Pe;(w.value!==void 0&&w.value===ue||Se)&&(T(W),Se&&(ae.current=!0))},[w.value]),fe=g.useCallback(()=>C==null?void 0:C.focus(),[C]),ve=g.useCallback((W,ue,Pe)=>{const Se=!ae.current&&!Pe;(w.value!==void 0&&w.value===ue||Se)&&j(W)},[w.value]),Q=r==="popper"?lg:mj,J=Q===lg?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:I,hideWhenDetached:_,avoidCollisions:S}:{};return o.jsx(fj,{scope:n,content:C,viewport:L,onViewportChange:A,itemRefCallback:z,selectedItem:y,onItemLeave:fe,itemTextRefCallback:ve,focusSelectedItem:le,selectedItemText:E,position:r,isPositioned:P,searchRef:se,children:o.jsx(sj,{as:R$,allowPinchZoom:!0,children:o.jsx(bI,{asChild:!0,trapped:w.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:De(s,W=>{var ue;(ue=w.trigger)==null||ue.focus({preventScroll:!0}),W.preventDefault()}),children:o.jsx(wI,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(Q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:W=>W.preventDefault(),...b,...J,onPlaced:()=>H(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:De(b.onKeyDown,W=>{const ue=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ue&&W.key.length===1&&V(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let Se=k().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(W.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const be=W.target,Ce=Se.indexOf(be);Se=Se.slice(Ce+1)}setTimeout(()=>ee(Se)),W.preventDefault()}})})})})})})});pj.displayName=k$;var P$="SelectItemAlignedPosition",mj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=fi(Xi,n),a=pi(Xi,n),[l,c]=g.useState(null),[d,h]=g.useState(null),f=ft(e,N=>h(N)),p=rf(n),v=g.useRef(!1),I=g.useRef(!0),{viewport:_,selectedItem:S,selectedItemText:b,focusSelectedItem:w}=a,C=g.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&_&&S&&b){const N=i.trigger.getBoundingClientRect(),y=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),E=b.getBoundingClientRect();if(i.dir!=="rtl"){const be=E.left-y.left,Ce=T.left-be,It=N.left-Ce,vn=N.width+It,mi=Math.max(vn,y.width),Ar=window.innerWidth-Gn,kr=ob(Ce,[Gn,Math.max(Gn,Ar-mi)]);l.style.minWidth=vn+"px",l.style.left=kr+"px"}else{const be=y.right-E.right,Ce=window.innerWidth-T.right-be,It=window.innerWidth-N.right-Ce,vn=N.width+It,mi=Math.max(vn,y.width),Ar=window.innerWidth-Gn,kr=ob(Ce,[Gn,Math.max(Gn,Ar-mi)]);l.style.minWidth=vn+"px",l.style.right=kr+"px"}const j=p(),k=window.innerHeight-Gn*2,P=_.scrollHeight,H=window.getComputedStyle(d),ae=parseInt(H.borderTopWidth,10),ee=parseInt(H.paddingTop,10),le=parseInt(H.borderBottomWidth,10),O=parseInt(H.paddingBottom,10),q=ae+ee+P+O+le,se=Math.min(S.offsetHeight*5,q),V=window.getComputedStyle(_),z=parseInt(V.paddingTop,10),fe=parseInt(V.paddingBottom,10),ve=N.top+N.height/2-Gn,Q=k-ve,J=S.offsetHeight/2,W=S.offsetTop+J,ue=ae+ee+W,Pe=q-ue;if(ue<=ve){const be=j.length>0&&S===j[j.length-1].ref.current;l.style.bottom="0px";const Ce=d.clientHeight-_.offsetTop-_.offsetHeight,It=Math.max(Q,J+(be?fe:0)+Ce+le),vn=ue+It;l.style.height=vn+"px"}else{const be=j.length>0&&S===j[0].ref.current;l.style.top="0px";const It=Math.max(ve,ae+_.offsetTop+(be?z:0)+J)+Pe;l.style.height=It+"px",_.scrollTop=ue-ve+_.offsetTop}l.style.margin=`${Gn}px 0`,l.style.minHeight=se+"px",l.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,i.trigger,i.valueNode,l,d,_,S,b,i.dir,r]);bt(()=>C(),[C]);const[R,L]=g.useState();bt(()=>{d&&L(window.getComputedStyle(d).zIndex)},[d]);const A=g.useCallback(N=>{N&&I.current===!0&&(C(),w==null||w(),I.current=!1)},[C,w]);return o.jsx(L$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:A,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:o.jsx(Me.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});mj.displayName=P$;var D$="SelectPopperPosition",lg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Gn,...i}=t,a=sf(n);return o.jsx(SB,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lg.displayName=D$;var[L$,Fv]=ja(Xi,{}),cg="SelectViewport",gj=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=pi(cg,n),a=Fv(cg,n),l=ft(e,i.onViewportChange),c=g.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(nf.Slot,{scope:n,children:o.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:De(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const I=window.innerHeight-Gn*2,_=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),b=Math.max(_,S);if(b<I){const w=b+v,C=Math.min(I,w),R=w-C;f.style.height=C+"px",f.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});gj.displayName=cg;var yj="SelectGroup",[O$,M$]=ja(yj),V$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=jc();return o.jsx(O$,{scope:n,id:s,children:o.jsx(Me.div,{role:"group","aria-labelledby":s,...r,ref:e})})});V$.displayName=yj;var vj="SelectLabel",xj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=M$(vj,n);return o.jsx(Me.div,{id:s.id,...r,ref:e})});xj.displayName=vj;var Xd="SelectItem",[F$,wj]=ja(Xd),_j=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=fi(Xd,n),c=pi(Xd,n),d=l.value===r,[h,f]=g.useState(i??""),[p,v]=g.useState(!1),I=ft(e,w=>{var C;return(C=c.itemRefCallback)==null?void 0:C.call(c,w,r,s)}),_=jc(),S=g.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(F$,{scope:n,value:r,disabled:s,textId:_,isSelected:d,onItemTextChange:g.useCallback(w=>{f(C=>C||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(nf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(Me.div,{role:"option","aria-labelledby":_,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:I,onFocus:De(a.onFocus,()=>v(!0)),onBlur:De(a.onBlur,()=>v(!1)),onClick:De(a.onClick,()=>{S.current!=="mouse"&&b()}),onPointerUp:De(a.onPointerUp,()=>{S.current==="mouse"&&b()}),onPointerDown:De(a.onPointerDown,w=>{S.current=w.pointerType}),onPointerMove:De(a.onPointerMove,w=>{var C;S.current=w.pointerType,s?(C=c.onItemLeave)==null||C.call(c):S.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(a.onPointerLeave,w=>{var C;w.currentTarget===document.activeElement&&((C=c.onItemLeave)==null||C.call(c))}),onKeyDown:De(a.onKeyDown,w=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&w.key===" "||(N$.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});_j.displayName=Xd;var fl="SelectItemText",bj=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=fi(fl,n),l=pi(fl,n),c=wj(fl,n),d=I$(fl,n),[h,f]=g.useState(null),p=ft(e,b=>f(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),v=h==null?void 0:h.textContent,I=g.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:_,onNativeOptionRemove:S}=d;return bt(()=>(_(I),()=>S(I)),[_,S,I]),o.jsxs(o.Fragment,{children:[o.jsx(Me.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?pa.createPortal(i.children,a.valueNode):null]})});bj.displayName=fl;var Ej="SelectItemIndicator",Nj=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return wj(Ej,n).isSelected?o.jsx(Me.span,{"aria-hidden":!0,...r,ref:e}):null});Nj.displayName=Ej;var ug="SelectScrollUpButton",Tj=g.forwardRef((t,e)=>{const n=pi(ug,t.__scopeSelect),r=Fv(ug,t.__scopeSelect),[s,i]=g.useState(!1),a=ft(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Cj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Tj.displayName=ug;var dg="SelectScrollDownButton",Sj=g.forwardRef((t,e)=>{const n=pi(dg,t.__scopeSelect),r=Fv(dg,t.__scopeSelect),[s,i]=g.useState(!1),a=ft(e,r.onScrollButtonChange);return bt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(Cj,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Sj.displayName=dg;var Cj=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=pi("SelectScrollButton",n),a=g.useRef(null),l=rf(n),c=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),bt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Me.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:De(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:De(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:De(s.onPointerLeave,()=>{c()})})}),U$="SelectSeparator",Ij=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(Me.div,{"aria-hidden":!0,...r,ref:e})});Ij.displayName=U$;var hg="SelectArrow",B$=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=sf(n),i=fi(hg,n),a=pi(hg,n);return i.open&&a.position==="popper"?o.jsx(CB,{...s,...r,ref:e}):null});B$.displayName=hg;var $$="SelectBubbleInput",jj=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),i=ft(r,s),a=KI(e);return g.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(Me.select,{...n,style:{...QI,...n.style},ref:i,defaultValue:e})});jj.displayName=$$;function Aj(t){return t===""||t===void 0}function kj(t){const e=Jr(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(a=>{const l=n.current+a;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Rj(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=z$(t,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==n));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function z$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var H$=ij,Pj=aj,W$=cj,q$=uj,G$=dj,Dj=hj,K$=gj,Lj=xj,Oj=_j,Q$=bj,Y$=Nj,Mj=Tj,Vj=Sj,Fj=Ij;const Xt=H$,Jt=W$,$t=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Pj,{ref:r,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(q$,{asChild:!0,children:o.jsx(jC,{className:"h-4 w-4 opacity-50"})})]}));$t.displayName=Pj.displayName;const Uj=g.forwardRef(({className:t,...e},n)=>o.jsx(Mj,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(X5,{className:"h-4 w-4"})}));Uj.displayName=Mj.displayName;const Bj=g.forwardRef(({className:t,...e},n)=>o.jsx(Vj,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(jC,{className:"h-4 w-4"})}));Bj.displayName=Vj.displayName;const zt=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(G$,{children:o.jsxs(Dj,{ref:s,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(Uj,{}),o.jsx(K$,{className:Le("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(Bj,{})]})}));zt.displayName=Dj.displayName;const X$=g.forwardRef(({className:t,...e},n)=>o.jsx(Lj,{ref:n,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));X$.displayName=Lj.displayName;const ne=g.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(Oj,{ref:r,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(Y$,{children:o.jsx(Y5,{className:"h-4 w-4"})})}),o.jsx(Q$,{children:e})]}));ne.displayName=Oj.displayName;const J$=g.forwardRef(({className:t,...e},n)=>o.jsx(Fj,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));J$.displayName=Fj.displayName;var of="Switch",[Z$]=Ta(of),[ez,tz]=Z$(of),$j=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:d,form:h,...f}=t,[p,v]=g.useState(null),I=ft(e,C=>v(C)),_=g.useRef(!1),S=p?h||!!p.closest("form"):!0,[b,w]=lc({prop:s,defaultProp:i??!1,onChange:d,caller:of});return o.jsxs(ez,{scope:n,checked:b,disabled:l,children:[o.jsx(Me.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":qj(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:I,onClick:De(t.onClick,C=>{w(R=>!R),S&&(_.current=C.isPropagationStopped(),_.current||C.stopPropagation())})}),S&&o.jsx(Wj,{control:p,bubbles:!_.current,name:r,value:c,checked:b,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});$j.displayName=of;var zj="SwitchThumb",Hj=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=tz(zj,n);return o.jsx(Me.span,{"data-state":qj(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Hj.displayName=zj;var nz="SwitchBubbleInput",Wj=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=g.useRef(null),l=ft(a,i),c=KI(n),d=OI(e);return g.useEffect(()=>{const h=a.current;if(!h)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&v){const I=new Event("click",{bubbles:r});v.call(h,n),h.dispatchEvent(I)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Wj.displayName=nz;function qj(t){return t?"checked":"unchecked"}var Gj=$j,rz=Hj;const Rt=g.forwardRef(({className:t,...e},n)=>o.jsx(Gj,{className:Le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...e,ref:n,children:o.jsx(rz,{className:Le("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Rt.displayName=Gj.displayName;const sz=({onBack:t})=>{const{user:e}=Wn(),[n,r]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[s,i]=g.useState([{id:"1",question:"",points:0,flag:""}]),[a,l]=g.useState(!1),[c,d]=g.useState(!1),h=async A=>{A.preventDefault(),l(!0);try{const N={...n,finalCategory:c?n.customCategory:n.category,questions:n.hasMultipleQuestions?s:[],createdAt:new Date,isActive:!0,solvedBy:[],hints:n.hints.filter(y=>y.trim()!==""),totalPoints:n.hasMultipleQuestions?s.reduce((y,T)=>y+T.points,0):n.points,createdBy:e==null?void 0:e.uid,createdByName:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),featuredOnPractice:n.featuredOnPractice,availableInPractice:n.availableInPractice,challengeType:n.challengeType,...n.isExternalChallenge&&{attribution:{...n.externalSource,importedBy:(e==null?void 0:e.displayName)||(e==null?void 0:e.email),importedById:e==null?void 0:e.uid,importedAt:new Date}},...n.creator&&{originalCreator:{name:n.creator,url:n.creatorUrl}}};await QS(St(ye,"challenges"),N),alert("Challenge created successfully!"),f()}catch(N){console.error("Error creating challenge:",N),alert("Error creating challenge. Please try again.")}finally{l(!1)}},f=()=>{r({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),i([{id:"1",question:"",points:0,flag:""}]),d(!1)},p=()=>{r({...n,hints:[...n.hints,""]})},v=(A,N)=>{const y=[...n.hints];y[A]=N,r({...n,hints:y})},I=A=>{const N=n.hints.filter((y,T)=>T!==A);r({...n,hints:N})},_=()=>{const A={id:Date.now().toString(),question:"",points:0,flag:""};i([...s,A])},S=(A,N,y)=>{i(s.map(T=>T.id===A?{...T,[N]:y}:T))},b=A=>{s.length>1&&i(s.filter(N=>N.id!==A))},w=A=>{if(A==="link"){const N=prompt("Enter the URL:");if(N){const y={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:N,type:"link"};r({...n,files:[...n.files,y]})}}else{const N=document.createElement("input");N.type="file",N.onchange=y=>{var E;const T=(E=y.target.files)==null?void 0:E[0];if(T){const j={id:Date.now().toString(),name:T.name,url:URL.createObjectURL(T),type:"file"};r({...n,files:[...n.files,j]})}},N.click()}},C=A=>{r({...n,files:n.files.filter(N=>N.id!==A)})},R=A=>{A==="custom"?(d(!0),r({...n,category:"custom"})):(d(!1),r({...n,category:A}))},L=(A,N)=>{r({...n,externalSource:{...n.externalSource,[A]:N}})};return o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Create New Challenge"}),o.jsx(Ht,{children:"Add a new CTF challenge to the platform with advanced options"})]}),o.jsx(oe,{children:o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(pe,{id:"title",value:n.title,onChange:A=>r({...n,title:A.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:n.category,onValueChange:R,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"web",children:"Web"}),o.jsx(ne,{value:"crypto",children:"Cryptography"}),o.jsx(ne,{value:"forensics",children:"Forensics"}),o.jsx(ne,{value:"pwn",children:"Pwn"}),o.jsx(ne,{value:"reversing",children:"Reverse Engineering"}),o.jsx(ne,{value:"misc",children:"Miscellaneous"}),o.jsx(ne,{value:"custom",children:"Custom Category"})]})]})]}),c&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(pe,{id:"customCategory",value:n.customCategory,onChange:A=>r({...n,customCategory:A.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:n.difficulty,onValueChange:A=>r({...n,difficulty:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(ne,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(ne,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"points",children:"Points *"}),o.jsx(pe,{id:"points",type:"number",value:n.points,onChange:A=>r({...n,points:parseInt(A.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(G,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:n.description,onChange:A=>r({...n,description:A.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xe,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:n.availableInPractice,onCheckedChange:A=>r({...n,availableInPractice:A})}),o.jsx(G,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:n.featuredOnPractice,onCheckedChange:A=>r({...n,featuredOnPractice:A})}),o.jsxs(G,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Nv,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:n.challengeType,onValueChange:A=>r({...n,challengeType:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"practice",children:"Practice Challenge"}),o.jsx(ne,{value:"live",children:"Live Event Challenge"}),o.jsx(ne,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cn,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(pe,{id:"creator",value:n.creator,onChange:A=>r({...n,creator:A.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(pe,{id:"creatorUrl",value:n.creatorUrl,onChange:A=>r({...n,creatorUrl:A.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wd,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:n.isExternalChallenge,onCheckedChange:A=>r({...n,isExternalChallenge:A})})]}),n.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(pe,{id:"ctfName",value:n.externalSource.ctfName,onChange:A=>L("ctfName",A.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(pe,{id:"ctfUrl",value:n.externalSource.ctfUrl,onChange:A=>L("ctfUrl",A.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(pe,{id:"originalAuthor",value:n.externalSource.originalAuthor,onChange:A=>L("originalAuthor",A.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(pe,{id:"authorUrl",value:n.externalSource.authorUrl,onChange:A=>L("authorUrl",A.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:n.externalSource.license,onValueChange:A=>L("license",A),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"unknown",children:"Unknown"}),o.jsx(ne,{value:"MIT",children:"MIT License"}),o.jsx(ne,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(ne,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(ne,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(ne,{value:"custom",children:"Custom License"})]})]}),n.externalSource.license==="custom"&&o.jsx(pe,{placeholder:"Specify custom license",className:"mt-2",onChange:A=>L("license",A.target.value)})]}),o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Attribution Notice:"})," This challenge will be displayed with proper attribution to the original author and CTF platform."]})})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:n.hasMultipleQuestions,onCheckedChange:A=>r({...n,hasMultipleQuestions:A})})]}),n.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(G,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Y,{type:"button",onClick:_,variant:"outline",size:"sm",children:[o.jsx(ei,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),s.map((A,N)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(G,{children:["Question ",N+1]}),s.length>1&&o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(A.id),children:o.jsx(ac,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`question-${A.id}`,children:"Question Text *"}),o.jsx(pe,{id:`question-${A.id}`,value:A.question,onChange:y=>S(A.id,"question",y.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:`points-${A.id}`,children:"Points *"}),o.jsx(pe,{id:`points-${A.id}`,type:"number",value:A.points,onChange:y=>S(A.id,"points",parseInt(y.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`flag-${A.id}`,children:"Flag *"}),o.jsx(pe,{id:`flag-${A.id}`,value:A.flag,onChange:y=>S(A.id,"flag",y.target.value),placeholder:"Flag for this question",required:!0})]})]})]},A.id)),s.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",s.reduce((A,N)=>A+N.points,0)]})]}),!n.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flag",children:"Flag *"}),o.jsx(pe,{id:"flag",value:n.flag,onChange:A=>r({...n,flag:A.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:n.flagFormat,onValueChange:A=>r({...n,flagFormat:A}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(ne,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(ne,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(ne,{value:".*",children:"Any format"}),o.jsx(ne,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(ne,{value:"custom",children:"Custom Regex"})]})]}),n.flagFormat==="custom"&&o.jsx(pe,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:A=>r({...n,flagFormat:A.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(G,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>w("file"),children:[o.jsx(DC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>w("link"),children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),n.files.length>0&&o.jsx("div",{className:"space-y-2",children:n.files.map(A=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[A.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:A.name}),A.type==="link"&&o.jsx("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(A.id),children:o.jsx(ac,{className:"w-4 h-4"})})]},A.id))})]}),o.jsxs("div",{children:[o.jsx(G,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[n.hints.map((A,N)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(pe,{value:A,onChange:y=>v(N,y.target.value),placeholder:`Hint ${N+1}`}),n.hints.length>1&&o.jsx(Y,{type:"button",variant:"outline",onClick:()=>I(N),children:"Remove"})]},N)),o.jsx(Y,{type:"button",variant:"outline",onClick:p,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(Y,{type:"submit",disabled:a,children:a?"Creating...":"Create Challenge"}),o.jsx(Y,{type:"button",variant:"outline",onClick:f,children:"Reset Form"}),o.jsx(Y,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},iz=({onBack:t,onCreateNew:e,onEditChallenge:n})=>{const{user:r}=Wn(),[s,i]=g.useState([]),[a,l]=g.useState([]),[c,d]=g.useState(!0),[h,f]=g.useState(""),[p,v]=g.useState("all"),[I,_]=g.useState("all"),[S,b]=g.useState("all"),[w,C]=g.useState("all"),[R,L]=g.useState([]),[A,N]=g.useState(!1);g.useEffect(()=>{y(),T()},[]),g.useEffect(()=>{E()},[h,p,I,S,w,s]);const y=async()=>{try{const V=Nr(St(ye,"challenges"),Ws("createdAt","desc")),fe=(await Vn(V)).docs.map(ve=>({id:ve.id,...ve.data()}));i(fe)}catch(V){console.error("Error fetching challenges:",V)}finally{d(!1)}},T=async()=>{try{N(!0);const V=Nr(St(ye,"events"),cn("status","in",["LIVE","UPCOMING"]),Ws("startTime","asc")),fe=(await Vn(V)).docs.map(ve=>({id:ve.id,...ve.data()}));L(fe)}catch(V){console.error("Error fetching events:",V),L([])}finally{N(!1)}},E=()=>{let V=s;h&&(V=V.filter(z=>z.title.toLowerCase().includes(h.toLowerCase())||z.description.toLowerCase().includes(h.toLowerCase())||(z.finalCategory||z.category).toLowerCase().includes(h.toLowerCase()))),p!=="all"&&(V=V.filter(z=>(z.finalCategory||z.category)===p)),I!=="all"&&(V=V.filter(z=>z.difficulty===I)),S!=="all"&&(V=V.filter(z=>S==="active"?z.isActive:!z.isActive)),w!=="all"&&(V=V.filter(z=>{switch(w){case"practice":return z.challengeType==="practice"||z.featuredOnPractice||z.availableInPractice;case"live":return z.challengeType==="live";case"upcoming":return z.challengeType==="upcoming";case"past":return z.challengeType==="past_event";case"featured":return z.featuredOnPractice;default:return!0}})),l(V)},j=async(V,z)=>{try{await hn(ze(ye,"challenges",V),{isActive:!z}),i(s.map(fe=>fe.id===V?{...fe,isActive:!z}:fe))}catch(fe){console.error("Error updating challenge status:",fe)}},k=async(V,z)=>{try{await hn(ze(ye,"challenges",V),{featuredOnPractice:!z,availableInPractice:!0,challengeType:z?void 0:"practice"}),i(s.map(fe=>fe.id===V?{...fe,featuredOnPractice:!z,availableInPractice:!0,challengeType:z?fe.challengeType:"practice"}:fe))}catch(fe){console.error("Error updating featured status:",fe)}},P=async(V,z,fe)=>{try{const ve=R.find(Q=>Q.id===z);await hn(ze(ye,"challenges",V),{eventId:z,eventName:fe,challengeType:(ve==null?void 0:ve.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}),i(s.map(Q=>Q.id===V?{...Q,eventId:z,eventName:fe,challengeType:(ve==null?void 0:ve.status)==="LIVE"?"live":"upcoming",availableInPractice:!1,featuredOnPractice:!1}:Q))}catch(ve){console.error("Error assigning challenge to event:",ve)}},H=async V=>{try{await hn(ze(ye,"challenges",V),{eventId:null,eventName:null,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}),i(s.map(z=>z.id===V?{...z,eventId:void 0,eventName:void 0,challengeType:"practice",availableInPractice:!0,featuredOnPractice:!1}:z))}catch(z){console.error("Error removing challenge from event:",z)}},ae=async(V,z)=>{try{await hn(ze(ye,"challenges",V),{availableInPractice:z,challengeType:z?"practice":void 0,featuredOnPractice:z?!1:void 0}),i(s.map(fe=>fe.id===V?{...fe,availableInPractice:z,challengeType:z?"practice":fe.challengeType,featuredOnPractice:z?fe.featuredOnPractice:!1}:fe))}catch(fe){console.error("Error updating practice availability:",fe)}},ee=async V=>{if(confirm("Are you sure you want to delete this challenge? This action cannot be undone."))try{await D6(ze(ye,"challenges",V)),i(s.filter(z=>z.id!==V))}catch(z){console.error("Error deleting challenge:",z)}},le=V=>{switch(V){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";case"expert":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},O=V=>({web:"bg-blue-100 text-blue-800",crypto:"bg-purple-100 text-purple-800",forensics:"bg-orange-100 text-orange-800",pwn:"bg-red-100 text-red-800",reversing:"bg-indigo-100 text-indigo-800",misc:"bg-gray-100 text-gray-800"})[V]||"bg-gray-100 text-gray-800",q=V=>V.challengeType==="live"?o.jsxs(Ue,{className:"bg-red-100 text-red-800",children:[o.jsx(ks,{className:"w-3 h-3 mr-1"}),"Live Event"]}):V.challengeType==="upcoming"?o.jsxs(Ue,{className:"bg-yellow-100 text-yellow-800",children:[o.jsx(ia,{className:"w-3 h-3 mr-1"}),"Upcoming"]}):V.challengeType==="past_event"?o.jsx(Ue,{className:"bg-gray-100 text-gray-800",children:"Past Event"}):V.featuredOnPractice?o.jsxs(Ue,{className:"bg-purple-100 text-purple-800",children:[o.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Featured"]}):V.availableInPractice?o.jsx(Ue,{className:"bg-green-100 text-green-800",children:"Practice"}):null,se=()=>{const V=s.map(z=>z.finalCategory||z.category);return Array.from(new Set(V)).filter(Boolean)};return c?o.jsx(ie,{children:o.jsx(oe,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenges..."})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Challenge Management"}),o.jsxs("p",{className:"text-muted-foreground",children:["Manage challenges, assign to events, and feature on practice page (",s.length," total)"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{onClick:e,children:[o.jsx(ei,{className:"w-4 h-4 mr-2"}),"Create New"]}),o.jsx(Y,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]}),o.jsxs(ie,{children:[o.jsx(je,{children:o.jsx(Ae,{className:"text-lg",children:"Search & Filter"})}),o.jsx(oe,{className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(pe,{placeholder:"Search challenges...",value:h,onChange:V=>f(V.target.value),className:"pl-10"})]}),o.jsx("div",{children:o.jsxs(Xt,{value:p,onValueChange:v,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Categories"})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"all",children:"All Categories"}),se().map(V=>o.jsx(ne,{value:V,children:V},V))]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:I,onValueChange:_,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Difficulties"})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"all",children:"All Difficulties"}),o.jsx(ne,{value:"easy",children:"Easy"}),o.jsx(ne,{value:"medium",children:"Medium"}),o.jsx(ne,{value:"hard",children:"Hard"}),o.jsx(ne,{value:"expert",children:"Expert"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:S,onValueChange:b,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Status"})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"all",children:"All Status"}),o.jsx(ne,{value:"active",children:"Active"}),o.jsx(ne,{value:"inactive",children:"Inactive"})]})]})}),o.jsx("div",{children:o.jsxs(Xt,{value:w,onValueChange:C,children:[o.jsx($t,{children:o.jsx(Jt,{placeholder:"All Types"})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"all",children:"All Types"}),o.jsx(ne,{value:"practice",children:"Practice"}),o.jsx(ne,{value:"live",children:"Live Event"}),o.jsx(ne,{value:"upcoming",children:"Upcoming Event"}),o.jsx(ne,{value:"past",children:"Past Event"}),o.jsx(ne,{value:"featured",children:"Featured"})]})]})})]})})]}),o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Challenges"}),o.jsxs(Ht,{children:[a.length," of ",s.length," challenges shown",R.length>0&&`  ${R.length} events available`]})]}),o.jsx(oe,{children:o.jsxs("div",{className:"space-y-4",children:[a.map(V=>{var z,fe,ve,Q;return o.jsx("div",{className:"border rounded-lg p-4",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("h3",{className:"font-semibold text-lg",children:V.title}),o.jsx(Ue,{variant:V.isActive?"default":"secondary",children:V.isActive?"Active":"Inactive"}),o.jsx(Ue,{className:le(V.difficulty),children:V.difficulty}),o.jsx(Ue,{className:O(V.finalCategory||V.category),children:V.finalCategory||V.category}),o.jsxs(Ue,{variant:"outline",children:[V.points," pts"]}),q(V)]}),o.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:V.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[o.jsxs("span",{children:["Created by: ",V.createdByName]}),o.jsx("span",{children:""}),o.jsx("span",{children:((ve=(fe=(z=V.createdAt)==null?void 0:z.toDate)==null?void 0:fe.call(z))==null?void 0:ve.toLocaleDateString())||new Date(V.createdAt).toLocaleDateString()}),o.jsx("span",{children:""}),o.jsxs("span",{children:[((Q=V.solvedBy)==null?void 0:Q.length)||0," solves"]}),V.eventName&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Event: ",V.eventName]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`featured-${V.id}`,checked:V.featuredOnPractice||!1,onCheckedChange:J=>k(V.id,V.featuredOnPractice||!1)}),o.jsx(G,{htmlFor:`featured-${V.id}`,className:"text-sm",children:"Featured on Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:`practice-${V.id}`,checked:V.availableInPractice||!1,onCheckedChange:J=>ae(V.id,J)}),o.jsx(G,{htmlFor:`practice-${V.id}`,className:"text-sm",children:"Available in Practice"})]}),!V.eventId&&R.length>0&&o.jsx("div",{className:"flex items-center space-x-2",children:o.jsxs(Xt,{value:"",onValueChange:J=>{const W=R.find(ue=>ue.id===J);W&&P(V.id,J,W.title)},children:[o.jsx($t,{className:"w-40",children:o.jsx(Jt,{placeholder:"Assign to Event"})}),o.jsx(zt,{children:R.map(J=>o.jsxs(ne,{value:J.id,children:[J.title," (",J.status,")"]},J.id))})]})}),V.eventId&&o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>H(V.id),children:"Remove from Event"}),R.length===0&&o.jsx(Ue,{variant:"outline",className:"text-xs",children:"No events available"})]})]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[o.jsxs(Y,{variant:"outline",size:"sm",onClick:()=>n(V),children:[o.jsx(dU,{className:"w-4 h-4 mr-1"}),"Edit"]}),o.jsx(Y,{variant:"outline",size:"sm",onClick:()=>j(V.id,V.isActive),children:V.isActive?"Deactivate":"Activate"}),o.jsx(Y,{variant:"destructive",size:"sm",onClick:()=>ee(V.id),children:o.jsx(hU,{className:"w-4 h-4"})})]})]})},V.id)}),a.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.length===0?o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{children:"No challenges created yet."}),o.jsxs(Y,{onClick:e,children:[o.jsx(ei,{className:"w-4 h-4 mr-2"}),"Create Your First Challenge"]})]}):"No challenges match your filters."})]})})]})]})},oz=({challengeId:t,onBack:e,onSave:n})=>{const{user:r}=Wn(),[s,i]=g.useState(!0),[a,l]=g.useState(!1),[c,d]=g.useState({title:"",description:"",category:"web",customCategory:"",difficulty:"easy",points:100,flag:"",flagFormat:"CTF{.*}",hasMultipleQuestions:!1,isExternalChallenge:!1,isActive:!0,hints:[""],files:[],creator:"",creatorUrl:"",externalSource:{ctfName:"",ctfUrl:"",originalAuthor:"",authorUrl:"",license:"unknown"},featuredOnPractice:!1,availableInPractice:!0,challengeType:"practice"}),[h,f]=g.useState([]),[p,v]=g.useState(!1);g.useEffect(()=>{I()},[t]);const I=async()=>{var E,j,k,P,H,ae,ee;try{const le=await sa(ze(ye,"challenges",t));if(le.exists()){const O=le.data();d({title:O.title||"",description:O.description||"",category:O.category||"web",customCategory:O.finalCategory||"",difficulty:O.difficulty||"easy",points:O.points||100,flag:O.flag||"",flagFormat:O.flagFormat||"CTF{.*}",hasMultipleQuestions:O.hasMultipleQuestions||!1,isExternalChallenge:!!O.attribution,isActive:O.isActive!==!1,hints:O.hints||[""],files:O.files||[],creator:((E=O.originalCreator)==null?void 0:E.name)||"",creatorUrl:((j=O.originalCreator)==null?void 0:j.url)||"",featuredOnPractice:O.featuredOnPractice||!1,availableInPractice:O.availableInPractice!==!1,challengeType:O.challengeType||"practice",externalSource:{ctfName:((k=O.attribution)==null?void 0:k.ctfName)||"",ctfUrl:((P=O.attribution)==null?void 0:P.ctfUrl)||"",originalAuthor:((H=O.attribution)==null?void 0:H.originalAuthor)||"",authorUrl:((ae=O.attribution)==null?void 0:ae.authorUrl)||"",license:((ee=O.attribution)==null?void 0:ee.license)||"unknown"}}),O.hasMultipleQuestions&&O.questions&&f(O.questions),O.finalCategory&&(v(!0),d(q=>({...q,category:"custom"})))}}catch(le){console.error("Error loading challenge:",le)}finally{i(!1)}},_=async E=>{E.preventDefault(),l(!0);try{const j={...c,finalCategory:p?c.customCategory:c.category,questions:c.hasMultipleQuestions?h:[],hints:c.hints.filter(k=>k.trim()!==""),totalPoints:c.hasMultipleQuestions?h.reduce((k,P)=>k+P.points,0):c.points,updatedAt:new Date,updatedBy:r==null?void 0:r.uid,updatedByName:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),featuredOnPractice:c.featuredOnPractice,availableInPractice:c.availableInPractice,challengeType:c.challengeType,...c.isExternalChallenge&&{attribution:{...c.externalSource,importedBy:(r==null?void 0:r.displayName)||(r==null?void 0:r.email),importedById:r==null?void 0:r.uid,importedAt:new Date}},...c.creator&&{originalCreator:{name:c.creator,url:c.creatorUrl}}};await hn(ze(ye,"challenges",t),j),alert("Challenge updated successfully!"),n()}catch(j){console.error("Error updating challenge:",j),alert("Error updating challenge. Please try again.")}finally{l(!1)}},S=()=>{d({...c,hints:[...c.hints,""]})},b=(E,j)=>{const k=[...c.hints];k[E]=j,d({...c,hints:k})},w=E=>{const j=c.hints.filter((k,P)=>P!==E);d({...c,hints:j})},C=()=>{const E={id:Date.now().toString(),question:"",points:0,flag:""};f([...h,E])},R=(E,j,k)=>{f(h.map(P=>P.id===E?{...P,[j]:k}:P))},L=E=>{h.length>1&&f(h.filter(j=>j.id!==E))},A=E=>{if(E==="link"){const j=prompt("Enter the URL:");if(j){const k={id:Date.now().toString(),name:`Link - ${new Date().toLocaleDateString()}`,url:j,type:"link"};d({...c,files:[...c.files,k]})}}else{const j=document.createElement("input");j.type="file",j.onchange=k=>{var H;const P=(H=k.target.files)==null?void 0:H[0];if(P){const ae={id:Date.now().toString(),name:P.name,url:URL.createObjectURL(P),type:"file"};d({...c,files:[...c.files,ae]})}},j.click()}},N=E=>{d({...c,files:c.files.filter(j=>j.id!==E)})},y=E=>{E==="custom"?(v(!0),d({...c,category:"custom"})):(v(!1),d({...c,category:E}))},T=(E,j)=>{d({...c,externalSource:{...c.externalSource,[E]:j}})};return s?o.jsx(ie,{children:o.jsx(oe,{className:"pt-6",children:o.jsx("div",{className:"text-center",children:"Loading challenge..."})})}):o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Edit Challenge"}),o.jsx(Ht,{children:"Update challenge details and configuration"})]}),o.jsx(oe,{children:o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(G,{className:"text-base",children:"Challenge Status"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Active challenges are visible to users"})]}),o.jsx(Rt,{checked:c.isActive,onCheckedChange:E=>d({...c,isActive:E})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Xe,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Practice Visibility"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"availableInPractice",checked:c.availableInPractice,onCheckedChange:E=>d({...c,availableInPractice:E})}),o.jsx(G,{htmlFor:"availableInPractice",className:"text-sm",children:"Available in Practice"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Rt,{id:"featuredOnPractice",checked:c.featuredOnPractice,onCheckedChange:E=>d({...c,featuredOnPractice:E})}),o.jsxs(G,{htmlFor:"featuredOnPractice",className:"text-sm",children:[o.jsx(Nv,{className:"w-4 h-4 inline mr-1"}),"Featured on Practice"]})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"challengeType",children:"Challenge Type"}),o.jsxs(Xt,{value:c.challengeType,onValueChange:E=>d({...c,challengeType:E}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"practice",children:"Practice Challenge"}),o.jsx(ne,{value:"live",children:"Live Event Challenge"}),o.jsx(ne,{value:"past_event",children:"Past Event Challenge"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:'"Practice" challenges appear in the Practice section. "Live Event" challenges are only available during events.'})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"title",children:"Challenge Title *"}),o.jsx(pe,{id:"title",value:c.title,onChange:E=>d({...c,title:E.target.value}),placeholder:"Enter challenge title",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"category",children:"Category"}),o.jsxs(Xt,{value:c.category,onValueChange:y,children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"web",children:"Web"}),o.jsx(ne,{value:"crypto",children:"Cryptography"}),o.jsx(ne,{value:"forensics",children:"Forensics"}),o.jsx(ne,{value:"pwn",children:"Pwn"}),o.jsx(ne,{value:"reversing",children:"Reverse Engineering"}),o.jsx(ne,{value:"misc",children:"Miscellaneous"}),o.jsx(ne,{value:"custom",children:"Custom Category"})]})]})]}),p&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"customCategory",children:"Custom Category Name *"}),o.jsx(pe,{id:"customCategory",value:c.customCategory,onChange:E=>d({...c,customCategory:E.target.value}),placeholder:"Enter your custom category name",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"difficulty",children:"Difficulty"}),o.jsxs(Xt,{value:c.difficulty,onValueChange:E=>d({...c,difficulty:E}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"easy",children:"Easy (1-100 points)"}),o.jsx(ne,{value:"medium",children:"Medium (101-300 points)"}),o.jsx(ne,{value:"hard",children:"Hard (301-500 points)"})]})]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{children:[o.jsx(G,{htmlFor:"points",children:"Points *"}),o.jsx(pe,{id:"points",type:"number",value:c.points,onChange:E=>d({...c,points:parseInt(E.target.value)||0}),min:"1",max:"1000",required:!0})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx(G,{htmlFor:"description",children:"Description *"}),o.jsx(Sa,{id:"description",value:c.description,onChange:E=>d({...c,description:E.target.value}),placeholder:"Enter detailed challenge description, requirements, and any setup instructions...",rows:8,required:!0})]})})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Cn,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"Creator Information"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creator",children:"Original Creator (Optional)"}),o.jsx(pe,{id:"creator",value:c.creator,onChange:E=>d({...c,creator:E.target.value}),placeholder:"Name of the original challenge creator"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use this if the challenge was created by someone else in your community"})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"creatorUrl",children:"Creator Profile URL"}),o.jsx(pe,{id:"creatorUrl",value:c.creatorUrl,onChange:E=>d({...c,creatorUrl:E.target.value}),placeholder:"https://github.com/username"})]})]})]}),o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Wd,{className:"w-5 h-5"}),o.jsx(G,{className:"text-base",children:"External CTF Challenge"})]}),o.jsx(Rt,{checked:c.isExternalChallenge,onCheckedChange:E=>d({...c,isExternalChallenge:E})})]}),c.isExternalChallenge&&o.jsxs("div",{className:"space-y-4 mt-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide attribution for challenges downloaded from other CTF platforms"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfName",children:"Original CTF Name *"}),o.jsx(pe,{id:"ctfName",value:c.externalSource.ctfName,onChange:E=>T("ctfName",E.target.value),placeholder:"e.g., HackTheBox, TryHackMe, CTFtime",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"ctfUrl",children:"CTF Website URL"}),o.jsx(pe,{id:"ctfUrl",value:c.externalSource.ctfUrl,onChange:E=>T("ctfUrl",E.target.value),placeholder:"https://ctf.example.com"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"originalAuthor",children:"Original Author *"}),o.jsx(pe,{id:"originalAuthor",value:c.externalSource.originalAuthor,onChange:E=>T("originalAuthor",E.target.value),placeholder:"Name of the original challenge author",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"authorUrl",children:"Author Profile URL"}),o.jsx(pe,{id:"authorUrl",value:c.externalSource.authorUrl,onChange:E=>T("authorUrl",E.target.value),placeholder:"https://github.com/original-author"})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"license",children:"License"}),o.jsxs(Xt,{value:c.externalSource.license,onValueChange:E=>T("license",E),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsx(ne,{value:"unknown",children:"Unknown"}),o.jsx(ne,{value:"MIT",children:"MIT License"}),o.jsx(ne,{value:"apache-2.0",children:"Apache 2.0"}),o.jsx(ne,{value:"gpl-3.0",children:"GPL v3.0"}),o.jsx(ne,{value:"cc-by-4.0",children:"Creative Commons BY 4.0"}),o.jsx(ne,{value:"custom",children:"Custom License"})]})]}),c.externalSource.license==="custom"&&o.jsx(pe,{placeholder:"Specify custom license",className:"mt-2",onChange:E=>T("license",E.target.value)})]})]})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"multipleQuestions",className:"text-base",children:"Multiple Questions Challenge"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable if this challenge contains multiple sub-questions with separate flags"})]}),o.jsx(Rt,{id:"multipleQuestions",checked:c.hasMultipleQuestions,onCheckedChange:E=>d({...c,hasMultipleQuestions:E})})]}),c.hasMultipleQuestions&&o.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(G,{className:"text-base",children:"Challenge Questions"}),o.jsxs(Y,{type:"button",onClick:C,variant:"outline",size:"sm",children:[o.jsx(ei,{className:"w-4 h-4 mr-1"}),"Add Question"]})]}),h.map((E,j)=>o.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(G,{children:["Question ",j+1]}),h.length>1&&o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>L(E.id),children:o.jsx(ac,{className:"w-4 h-4"})})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`question-${E.id}`,children:"Question Text *"}),o.jsx(pe,{id:`question-${E.id}`,value:E.question,onChange:k=>R(E.id,"question",k.target.value),placeholder:"Enter the question text",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:`points-${E.id}`,children:"Points *"}),o.jsx(pe,{id:`points-${E.id}`,type:"number",value:E.points,onChange:k=>R(E.id,"points",parseInt(k.target.value)||0),min:"1",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:`flag-${E.id}`,children:"Flag *"}),o.jsx(pe,{id:`flag-${E.id}`,value:E.flag,onChange:k=>R(E.id,"flag",k.target.value),placeholder:"Flag for this question",required:!0})]})]})]},E.id)),h.length>0&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Points: ",h.reduce((E,j)=>E+j.points,0)]})]}),!c.hasMultipleQuestions&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flag",children:"Flag *"}),o.jsx(pe,{id:"flag",value:c.flag,onChange:E=>d({...c,flag:E.target.value}),placeholder:"CTF{...} or any flag format",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"flagFormat",children:"Flag Format (Regex)"}),o.jsxs(Xt,{value:c.flagFormat,onValueChange:E=>d({...c,flagFormat:E}),children:[o.jsx($t,{children:o.jsx(Jt,{})}),o.jsxs(zt,{children:[o.jsxs(ne,{value:"CTF{.*}",children:["CTF","{text}"]}),o.jsxs(ne,{value:"FLAG{.*}",children:["FLAG","{text}"]}),o.jsx(ne,{value:".*",children:"Any format"}),o.jsx(ne,{value:"[A-Za-z0-9]{8,}",children:"Alphanumeric (8+ chars)"}),o.jsx(ne,{value:"custom",children:"Custom Regex"})]})]}),c.flagFormat==="custom"&&o.jsx(pe,{placeholder:"Enter custom regex pattern",className:"mt-2",onChange:E=>d({...c,flagFormat:E.target.value})})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(G,{children:"Files & Links"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>A("file"),children:[o.jsx(DC,{className:"w-4 h-4 mr-2"}),"Upload File"]}),o.jsxs(Y,{type:"button",variant:"outline",onClick:()=>A("link"),children:[o.jsx(aa,{className:"w-4 h-4 mr-2"}),"Add Link"]})]}),c.files.length>0&&o.jsx("div",{className:"space-y-2",children:c.files.map(E=>o.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[E.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:E.name}),E.type==="link"&&o.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs",children:"(View Link)"})]}),o.jsx(Y,{type:"button",variant:"ghost",size:"sm",onClick:()=>N(E.id),children:o.jsx(ac,{className:"w-4 h-4"})})]},E.id))})]}),o.jsxs("div",{children:[o.jsx(G,{children:"Hints (Optional)"}),o.jsxs("div",{className:"space-y-2 mt-2",children:[c.hints.map((E,j)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsx(pe,{value:E,onChange:k=>b(j,k.target.value),placeholder:`Hint ${j+1}`}),c.hints.length>1&&o.jsx(Y,{type:"button",variant:"outline",onClick:()=>w(j),children:"Remove"})]},j)),o.jsx(Y,{type:"button",variant:"outline",onClick:S,children:"Add Hint"})]})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsxs(Y,{type:"submit",disabled:a,children:[o.jsx(RC,{className:"w-4 h-4 mr-2"}),a?"Saving...":"Save Changes"]}),o.jsx(Y,{type:"button",variant:"outline",onClick:e,children:"Cancel"})]})]})})]})},az=({onBack:t})=>{const[e,n]=g.useState({name:"",description:"",startDate:"",endDate:"",type:"ctf",maxParticipants:100,isPublic:!0}),r=async s=>{s.preventDefault(),console.log("Scheduling event:",e),alert("Event scheduling functionality coming soon!")};return o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Schedule New Event"}),o.jsx(Ht,{children:"Create and schedule CTF events and competitions"})]}),o.jsx(oe,{children:o.jsxs("form",{onSubmit:r,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"name",children:"Event Name *"}),o.jsx(pe,{id:"name",value:e.name,onChange:s=>n({...e,name:s.target.value}),placeholder:"Enter event name",required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"description",children:"Event Description"}),o.jsx(Sa,{id:"description",value:e.description,onChange:s=>n({...e,description:s.target.value}),placeholder:"Describe the event, rules, and objectives...",rows:4})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"startDate",children:"Start Date & Time *"}),o.jsx(pe,{id:"startDate",type:"datetime-local",value:e.startDate,onChange:s=>n({...e,startDate:s.target.value}),required:!0})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"endDate",children:"End Date & Time *"}),o.jsx(pe,{id:"endDate",type:"datetime-local",value:e.endDate,onChange:s=>n({...e,endDate:s.target.value}),required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"type",children:"Event Type"}),o.jsxs("select",{id:"type",value:e.type,onChange:s=>n({...e,type:s.target.value}),className:"w-full p-2 border rounded",children:[o.jsx("option",{value:"ctf",children:"CTF Competition"}),o.jsx("option",{value:"workshop",children:"Workshop"}),o.jsx("option",{value:"training",children:"Training Session"}),o.jsx("option",{value:"jeopardy",children:"Jeopardy Style"})]})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"maxParticipants",children:"Max Participants"}),o.jsx(pe,{id:"maxParticipants",type:"number",value:e.maxParticipants,onChange:s=>n({...e,maxParticipants:parseInt(s.target.value)}),min:"1"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"checkbox",id:"isPublic",checked:e.isPublic,onChange:s=>n({...e,isPublic:s.target.checked}),className:"rounded"}),o.jsx(G,{htmlFor:"isPublic",children:"Public Event (Visible to all users)"})]}),o.jsxs("div",{className:"flex gap-2 pt-4",children:[o.jsx(Y,{type:"submit",children:"Schedule Event"}),o.jsx(Y,{type:"button",variant:"outline",onClick:t,children:"Cancel"})]})]})})]})},lz=({onBack:t})=>{const e=[{id:"1",user:"john_doe",challenge:"SQL Injection Master",submittedAt:"2024-01-15",status:"pending",content:"This is a mock write-up content...",rating:0},{id:"2",user:"jane_smith",challenge:"Crypto Challenge 1",submittedAt:"2024-01-14",status:"approved",content:"Another mock write-up...",rating:4}],n=i=>{console.log("Approving writeup:",i),alert(`Write-up ${i} approved!`)},r=i=>{console.log("Rejecting writeup:",i),alert(`Write-up ${i} rejected!`)},s=i=>{switch(i){case"pending":return o.jsx(Ue,{variant:"secondary",children:"Pending"});case"approved":return o.jsx(Ue,{variant:"default",children:"Approved"});case"rejected":return o.jsx(Ue,{variant:"destructive",children:"Rejected"});default:return o.jsx(Ue,{variant:"secondary",children:i})}};return o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Review Write-ups"}),o.jsxs(Ht,{children:["Review and approve user write-ups for challenges (",e.length," total)"]})]}),o.jsx(oe,{children:o.jsxs("div",{className:"space-y-6",children:[e.map(i=>o.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:i.challenge}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Submitted by ",i.user," on ",i.submittedAt]})]}),s(i.status)]}),o.jsxs("div",{children:[o.jsx(G,{children:"Write-up Content"}),o.jsx("div",{className:"mt-1 p-3 border rounded bg-muted/50",children:i.content})]}),i.status==="pending"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx(G,{htmlFor:`feedback-${i.id}`,children:"Feedback (Optional)"}),o.jsx(Sa,{id:`feedback-${i.id}`,placeholder:"Provide feedback for the user...",rows:3}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Y,{onClick:()=>n(i.id),className:"bg-green-600 hover:bg-green-700",children:"Approve"}),o.jsx(Y,{variant:"outline",onClick:()=>r(i.id),children:"Request Changes"}),o.jsx(Y,{variant:"destructive",onClick:()=>r(i.id),children:"Reject"})]})]}),i.status!=="pending"&&o.jsxs("div",{className:"text-sm text-muted-foreground",children:["Write-up has been ",i.status,". ",i.rating>0&&`Rating: ${i.rating}/5`]})]},i.id)),e.length===0&&o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No write-ups to review at this time."})]})})]})},cz=({onBack:t})=>{const e={totalUsers:150,activeUsers:47,totalChallenges:25,solvedChallenges:189,averageSolveTime:"2h 15m",popularCategory:"Web Security"},n=[{title:"Total Users",value:e.totalUsers,description:"Registered users",icon:nn,color:"text-blue-600"},{title:"Active Users (30d)",value:e.activeUsers,description:"Recently active users",icon:nn,color:"text-green-600"},{title:"Total Challenges",value:e.totalChallenges,description:"Available challenges",icon:Xe,color:"text-purple-600"},{title:"Challenge Solves",value:e.solvedChallenges,description:"Total solutions submitted",icon:Jn,color:"text-orange-600"},{title:"Avg Solve Time",value:e.averageSolveTime,description:"Average time to solve challenges",icon:Na,color:"text-red-600"},{title:"Popular Category",value:e.popularCategory,description:"Most solved category",icon:IC,color:"text-indigo-600"}];return o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Platform Analytics"}),o.jsx(Ht,{children:"Comprehensive overview of platform performance and user engagement"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:n.map((r,s)=>o.jsx(ie,{children:o.jsx(oe,{className:"pt-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:r.title}),o.jsx("p",{className:"text-2xl font-bold mt-1",children:r.value}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r.description})]}),o.jsx("div",{className:`p-3 rounded-full bg-muted ${r.color}`,children:o.jsx(r.icon,{className:"w-6 h-6"})})]})})},s))}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{className:"text-lg",children:"User Growth"}),o.jsx(Ht,{children:"Last 30 days"})]}),o.jsx(oe,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"User growth chart will be displayed here"})})]}),o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{className:"text-lg",children:"Challenge Performance"}),o.jsx(Ht,{children:"Solve rates by category"})]}),o.jsx(oe,{children:o.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Challenge performance chart will be displayed here"})})]})]}),o.jsxs("div",{className:"flex gap-2 mt-6",children:[o.jsx(Y,{variant:"outline",onClick:t,children:"Back to Dashboard"}),o.jsx(Y,{children:"Export Analytics"})]})]})]})},uz=({onBack:t})=>{const[e,n]=g.useState({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1}),[r,s]=g.useState(!1),i=async()=>{s(!0),setTimeout(()=>{alert("Settings saved successfully!"),s(!1)},1e3)},a=()=>{confirm("Are you sure you want to reset all settings to default?")&&n({siteName:"CTF Platform",siteDescription:"Capture The Flag Platform for cybersecurity enthusiasts",contactEmail:"admin@ctfplatform.com",requireEmailVerification:!0,allowRegistrations:!0,maxLoginAttempts:5,sessionTimeout:24,defaultPoints:100,allowWriteups:!0,writeupRequired:!1,smtpServer:"",smtpPort:587,smtpUsername:"",smtpPassword:"",maintenanceMode:!1})},l=(c,d)=>{n(h=>({...h,[c]:d}))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"General Settings"}),o.jsx(Ht,{children:"Basic platform configuration"})]}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"siteName",children:"Site Name"}),o.jsx(pe,{id:"siteName",value:e.siteName,onChange:c=>l("siteName",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"siteDescription",children:"Site Description"}),o.jsx(Sa,{id:"siteDescription",value:e.siteDescription,onChange:c=>l("siteDescription",c.target.value)})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"contactEmail",children:"Contact Email"}),o.jsx(pe,{id:"contactEmail",type:"email",value:e.contactEmail,onChange:c=>l("contactEmail",c.target.value)})]})]})]}),o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Security Settings"}),o.jsx(Ht,{children:"Authentication and security configuration"})]}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"requireEmailVerification",children:"Require Email Verification"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must verify their email address before accessing the platform"})]}),o.jsx(Rt,{id:"requireEmailVerification",checked:e.requireEmailVerification,onCheckedChange:c=>l("requireEmailVerification",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"allowRegistrations",children:"Allow New Registrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register on the platform"})]}),o.jsx(Rt,{id:"allowRegistrations",checked:e.allowRegistrations,onCheckedChange:c=>l("allowRegistrations",c)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"maxLoginAttempts",children:"Max Login Attempts"}),o.jsx(pe,{id:"maxLoginAttempts",type:"number",value:e.maxLoginAttempts,onChange:c=>l("maxLoginAttempts",parseInt(c.target.value)),min:"1",max:"10"})]}),o.jsxs("div",{children:[o.jsx(G,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),o.jsx(pe,{id:"sessionTimeout",type:"number",value:e.sessionTimeout,onChange:c=>l("sessionTimeout",parseInt(c.target.value)),min:"1",max:"720"})]})]})]})]}),o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Challenge Settings"}),o.jsx(Ht,{children:"Challenge and write-up configuration"})]}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"defaultPoints",children:"Default Points for New Challenges"}),o.jsx(pe,{id:"defaultPoints",type:"number",value:e.defaultPoints,onChange:c=>l("defaultPoints",parseInt(c.target.value)),min:"1"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"allowWriteups",children:"Allow Write-ups"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users can submit write-ups for challenges"})]}),o.jsx(Rt,{id:"allowWriteups",checked:e.allowWriteups,onCheckedChange:c=>l("allowWriteups",c)})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"writeupRequired",children:"Write-ups Required"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Users must submit a write-up to get points"})]}),o.jsx(Rt,{id:"writeupRequired",checked:e.writeupRequired,onCheckedChange:c=>l("writeupRequired",c),disabled:!e.allowWriteups})]})]})]}),o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Maintenance Mode"}),o.jsx(Ht,{children:"Take the platform offline for maintenance"})]}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(G,{htmlFor:"maintenanceMode",children:"Enable Maintenance Mode"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform will be unavailable to regular users"})]}),o.jsx(Rt,{id:"maintenanceMode",checked:e.maintenanceMode,onCheckedChange:c=>l("maintenanceMode",c)})]}),e.maintenanceMode&&o.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-lg",children:o.jsx("p",{className:"text-sm text-yellow-800",children:" Maintenance mode is enabled. Only administrators can access the platform."})})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Y,{onClick:i,disabled:r,children:r?"Saving...":"Save Settings"}),o.jsx(Y,{variant:"outline",onClick:a,children:"Reset to Defaults"}),o.jsx(Y,{variant:"outline",onClick:t,children:"Back to Dashboard"})]})]})},dz=()=>{const{isAdmin:t,isModerator:e}=Kh(),n=zn(),[r,s]=g.useState("overview"),[i,a]=g.useState(null);if(!t&&!e)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen",children:o.jsx("div",{className:"container px-4 mx-auto text-center",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsx(Xe,{className:"w-16 h-16 text-destructive mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-muted-foreground mb-6",children:"You don't have permission to access the admin dashboard."}),o.jsx(Y,{onClick:()=>n("/dashboard"),children:"Return to Dashboard"})]})})}),o.jsx(ht,{})]});const l=()=>{switch(r){case"users":return o.jsx(F9,{onBack:()=>s("overview")});case"challenge-management":return o.jsx(iz,{onBack:()=>s("overview"),onCreateNew:()=>s("create-challenge"),onEditChallenge:d=>{a(d),s("edit-challenge")}});case"create-challenge":return o.jsx(sz,{onBack:()=>s("challenge-management")});case"edit-challenge":return o.jsx(oz,{challengeId:i.id,onBack:()=>s("challenge-management"),onSave:()=>s("challenge-management")});case"schedule-event":return o.jsx(az,{onBack:()=>s("overview")});case"review-writeups":return o.jsx(lz,{onBack:()=>s("overview")});case"analytics":return o.jsx(cz,{onBack:()=>s("overview")});case"settings":return o.jsx(uz,{onBack:()=>s("overview")});default:return c()}},c=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[o.jsxs(ie,{children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium",children:"Total Users"}),o.jsx(nn,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"2"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),o.jsxs(ie,{children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium",children:"Active Challenges"}),o.jsx(Xe,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No challenges yet"})]})]}),o.jsxs(ie,{children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium",children:"Live Events"}),o.jsx(ia,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No events yet"})]})]}),o.jsxs(ie,{children:[o.jsxs(je,{className:"flex flex-row items-center justify-between pb-2",children:[o.jsx(Ae,{className:"text-sm font-medium",children:"Pending Write-ups"}),o.jsx(oc,{className:"w-4 h-4 text-muted-foreground"})]}),o.jsxs(oe,{children:[o.jsx("div",{className:"text-2xl font-bold",children:"0"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"No write-ups yet"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"Content Management"}),o.jsx(Ht,{children:"Create and manage platform content"})]}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("create-challenge"),children:[o.jsx(ei,{className:"w-4 h-4"}),"Create New Challenge"]}),o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("challenge-management"),children:[o.jsx(tg,{className:"w-4 h-4"}),"Manage Challenges"]}),o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("schedule-event"),children:[o.jsx(ei,{className:"w-4 h-4"}),"Schedule New Event"]}),o.jsxs(Y,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("review-writeups"),children:[o.jsx(oc,{className:"w-4 h-4"}),"Review Write-ups"]})]})]}),o.jsxs(ie,{children:[o.jsxs(je,{children:[o.jsx(Ae,{children:"User Management"}),o.jsx(Ht,{children:"Manage users and permissions"})]}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs(Y,{className:"w-full justify-start gap-2",onClick:()=>s("users"),children:[o.jsx(nn,{className:"w-4 h-4"}),"View All Users"]}),t&&o.jsxs(Y,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("analytics"),children:[o.jsx(IC,{className:"w-4 h-4"}),"Platform Analytics"]}),o.jsxs(Y,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>s("settings"),children:[o.jsx(PC,{className:"w-4 h-4"}),"System Settings"]})]})]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("section",{className:"pt-24 pb-16 min-h-screen bg-background",children:o.jsxs("div",{className:"container px-4 mx-auto",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-4xl font-bold mb-2",children:r==="overview"?"Admin Dashboard":r==="users"?"User Management":r==="challenge-management"?"Challenge Management":r==="create-challenge"?"Create Challenge":r==="edit-challenge"?"Edit Challenge":r==="schedule-event"?"Schedule Event":r==="review-writeups"?"Review Write-ups":r==="analytics"?"Platform Analytics":r==="settings"?"System Settings":"Admin Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:r==="overview"?"Manage your CTF platform, users, challenges, and events":"Admin management panel"})]}),r!=="overview"&&o.jsx(Y,{variant:"outline",onClick:()=>{s(r==="create-challenge"||r==="edit-challenge"?"challenge-management":"overview")},children:r==="create-challenge"||r==="edit-challenge"?"Back to Challenges":"Back to Dashboard"})]}),o.jsx("div",{className:"flex items-center gap-2 mt-2",children:o.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${t?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t?"Administrator":"Moderator"})})]}),l()]})}),o.jsx(ht,{})]})},hz=()=>{var ae,ee,le,O,q,se,V,z,fe,ve;const{challengeId:t}=ER(),e=zn(),{user:n}=Wn(),[r,s]=g.useState(null),[i,a]=g.useState(!0),[l,c]=g.useState(!1),[d,h]=g.useState(""),[f,p]=g.useState(null),[v,I]=g.useState([]),[_,S]=g.useState([]),[b,w]=g.useState("description");g.useEffect(()=>{if(t){C(),R();const Q=ze(ye,"challenges",t),J=YS(Q,W=>{if(W.exists()){const ue={id:W.id,...W.data()};s(ue)}});return()=>J()}},[t]);const C=async()=>{try{a(!0),console.log(" Fetching challenge:",t);const Q=await sa(ze(ye,"challenges",t));if(Q.exists()){const J={id:Q.id,...Q.data()};console.log(" Challenge found:",J),s(J),J.hints&&I(new Array(J.hints.length).fill(!1))}else console.log(" Challenge not found in Firestore"),p({type:"error",text:"Challenge not found"})}catch(Q){console.error(" Error fetching challenge:",Q),p({type:"error",text:"Failed to load challenge"})}finally{a(!1)}},R=async()=>{if(!(!n||!t))try{const Q=Nr(St(ye,"submissions"),cn("challengeId","==",t),cn("userId","==",n.uid),Ws("submittedAt","desc")),W=(await Vn(Q)).docs.map(ue=>({id:ue.id,...ue.data()}));S(W)}catch(Q){console.error("Error fetching submissions:",Q)}},L=async(Q,J)=>{try{const W=Nr(St(ye,"submissions"),cn("challengeId","==",J),cn("userId","==",Q),cn("isCorrect","==",!0),cn("pointsAwarded",">",0));return!(await Vn(W)).empty}catch(W){return console.error("Error checking user solve status:",W),!1}},A=async()=>{var Q,J;if(!(!r||!n||!d.trim())){c(!0),p(null);try{let W=!1;r.hasMultipleQuestions&&r.questions?W=!!r.questions.find(Ce=>Ce.flag&&Ce.flag.trim()===d.trim()):W=((Q=r.flag)==null?void 0:Q.trim())===d.trim();const ue=await L(n.uid,r.id);let Pe=0;W&&!ue&&(Pe=r.points||0);const Se={challengeId:r.id,challengeTitle:r.title,userId:n.uid,userName:n.displayName||n.email,flag:d,isCorrect:W,submittedAt:new Date,pointsAwarded:Pe};await QS(St(ye,"submissions"),Se),W?((J=r.solvedBy)!=null&&J.includes(n.uid)||await hn(ze(ye,"challenges",r.id),{solvedBy:Xm(n.uid)}),Pe>0&&await hn(ze(ye,"users",n.uid),{totalPoints:O6(Pe),challengesSolved:Xm(r.id)}),p({type:"success",text:Pe>0?`Congratulations! Flag is correct! +${Pe} points awarded!`:"Congratulations! Flag is correct! (No additional points - already solved)"}),h(""),R()):p({type:"error",text:"Incorrect flag. Please try again."})}catch(W){console.error("Error submitting flag:",W),p({type:"error",text:"Failed to submit flag. Please try again."})}finally{c(!1)}}},N=Q=>{const J=[...v];J[Q]=!J[Q],I(J)},y=()=>{e("/practice")},T=Q=>{navigator.clipboard.writeText(Q)},E=(ae=r==null?void 0:r.solvedBy)==null?void 0:ae.includes((n==null?void 0:n.uid)||"");if(i)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Loading challenge..."})]})})}),o.jsx(ht,{})]});if(!r)return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsx("div",{className:"container mx-auto px-4 py-6",children:o.jsx(ie,{className:"max-w-md mx-auto border",children:o.jsxs(oe,{className:"p-6 text-center",children:[o.jsx(Xe,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3 opacity-50"}),o.jsx("h2",{className:"text-lg font-bold mb-2",children:"Challenge Not Found"}),o.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"The challenge you're looking for doesn't exist or you don't have permission to view it."}),o.jsxs(Y,{onClick:y,variant:"terminal",size:"sm",children:[o.jsx(G_,{className:"w-3 h-3 mr-1"}),"Back to Practice"]})]})})})}),o.jsx(ht,{})]});const j=Q=>{switch(Q){case"easy":return"bg-green-500/20 text-green-600 border-green-200";case"medium":return"bg-yellow-500/20 text-yellow-600 border-yellow-200";case"hard":return"bg-red-500/20 text-red-600 border-red-200";case"expert":return"bg-purple-500/20 text-purple-600 border-purple-200";default:return"bg-gray-500/20 text-gray-600 border-gray-200"}},k=Q=>({web:"bg-blue-500/20 text-blue-600 border-blue-200",crypto:"bg-purple-500/20 text-purple-600 border-purple-200",forensics:"bg-orange-500/20 text-orange-600 border-orange-200",pwn:"bg-red-500/20 text-red-600 border-red-200",reversing:"bg-indigo-500/20 text-indigo-600 border-indigo-200",misc:"bg-gray-500/20 text-gray-600 border-gray-200"})[Q]||"bg-gray-500/20 text-gray-600 border-gray-200",P=()=>{if(!r.description)return null;const Q=r.description.split(`
`),J=[];for(let W=0;W<Q.length;W++){const ue=Q[W].trim();if(ue.startsWith("n =")||ue.startsWith("e =")||ue.startsWith("c =")){const[Pe,...Se]=ue.split("="),be=Se.join("=").trim();J.push(o.jsxs("div",{className:"mb-3 p-3 bg-muted/30 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("span",{className:"font-mono font-semibold text-xs",children:[Pe,"="]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>T(be),className:"h-6 px-2",children:o.jsx(Q_,{className:"w-3 h-3"})})]}),o.jsx("div",{className:"font-mono text-xs bg-background p-2 rounded border break-all",children:be})]},W))}else if(ue.includes("=")&&ue.length>50){const[Pe,...Se]=ue.split("="),be=Se.join("=").trim();J.push(o.jsxs("div",{className:"mb-2",children:[o.jsxs("strong",{className:"text-sm",children:[Pe,"="]}),o.jsx("div",{className:"font-mono text-xs bg-muted/30 p-2 rounded border break-all mt-1",children:be})]},W))}else ue?J.push(o.jsx("p",{className:"mb-2 text-sm leading-relaxed",children:ue},W)):J.push(o.jsx("div",{className:"mb-2"},W))}return J},H=_.some(Q=>Q.isCorrect&&Q.pointsAwarded&&Q.pointsAwarded>0);return o.jsxs(o.Fragment,{children:[o.jsx(dt,{}),o.jsx("div",{className:"min-h-screen bg-background pt-16",children:o.jsxs("div",{className:"container mx-auto px-4 py-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Y,{variant:"ghost",onClick:y,size:"sm",className:"h-8 px-2 sm:px-3 -ml-2",children:[o.jsx(G_,{className:"w-3 h-3 mr-1"}),o.jsx("span",{className:"hidden sm:inline",children:"Back to Practice"}),o.jsx("span",{className:"sm:hidden",children:"Back"})]}),o.jsx("h1",{className:"text-lg sm:text-xl font-bold truncate",children:r.title})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[E&&o.jsxs(Ue,{className:"bg-green-500/20 text-green-600 border-green-200 text-xs",children:[o.jsx(Ur,{className:"w-3 h-3 mr-1"}),H?"Solved + Points":"Solved"]}),r.featuredOnPractice&&o.jsxs(Ue,{className:"bg-yellow-500/20 text-yellow-600 border-yellow-200 text-xs",children:[o.jsx(Nv,{className:"w-3 h-3 mr-1"}),"Featured"]})]})]}),o.jsx(ie,{className:"mb-4 border",children:o.jsxs(oe,{className:"p-3 sm:p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[o.jsx(Ue,{className:`${j(r.difficulty)} text-xs`,children:r.difficulty}),o.jsx(Ue,{className:`${k(r.finalCategory||r.category)} text-xs`,children:r.finalCategory||r.category}),o.jsxs(Ue,{variant:"outline",className:"font-mono font-semibold text-xs",children:[r.totalPoints||r.points," pts"]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(nn,{className:"w-3 h-3"}),o.jsxs("span",{children:[((ee=r.solvedBy)==null?void 0:ee.length)||0," solves"]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[o.jsx(Na,{className:"w-3 h-3"}),o.jsx("span",{className:"hidden sm:inline",children:((q=(O=(le=r.createdAt)==null?void 0:le.toDate)==null?void 0:O.call(le))==null?void 0:q.toLocaleDateString())||new Date(r.createdAt).toLocaleDateString()}),o.jsx("span",{className:"sm:hidden",children:((z=(V=(se=r.createdAt)==null?void 0:se.toDate)==null?void 0:V.call(se))==null?void 0:z.toLocaleDateString("en-US",{month:"short",day:"numeric"}))||new Date(r.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-3 mt-2 text-xs text-muted-foreground",children:[o.jsxs("div",{children:["By: ",r.createdByName||"Unknown"]}),r.originalCreator&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{children:"Original: "}),r.originalCreator.url?o.jsxs("a",{href:r.originalCreator.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-primary hover:underline",children:[r.originalCreator.name,o.jsx(Wd,{className:"w-3 h-3"})]}):o.jsx("span",{children:r.originalCreator.name})]})]})]})}),o.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-4",children:[o.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"flex overflow-x-auto scrollbar-hide mb-4 bg-muted/30 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>w("description"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${b==="description"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Description"}),o.jsxs("button",{onClick:()=>w("hints"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${b==="hints"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Hints (",((fe=r.hints)==null?void 0:fe.length)||0,")"]}),o.jsxs("button",{onClick:()=>w("files"),className:`flex-1 min-w-0 px-3 py-2 text-xs font-medium rounded-md transition-colors whitespace-nowrap ${b==="files"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:["Files (",((ve=r.files)==null?void 0:ve.length)||0,")"]})]}),o.jsxs("div",{className:"space-y-4",children:[b==="description"&&o.jsx(ie,{className:"border",children:o.jsx(oe,{className:"p-4 sm:p-6",children:o.jsx("div",{className:"space-y-3",children:r.hasMultipleQuestions&&r.questions?o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),r.questions.map((Q,J)=>{var W;return o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("h4",{className:"font-semibold text-sm mb-1",children:["Question ",J+1]}),o.jsx("p",{className:"mb-2 text-xs text-muted-foreground",children:Q.question}),o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"font-mono font-semibold",children:[Q.points," points"]}),((W=r.solvedBy)==null?void 0:W.includes((n==null?void 0:n.uid)||""))&&o.jsxs(Ue,{variant:"outline",className:"font-mono text-xs",children:["Flag: ",Q.flag]})]})]},Q.id)})]}):o.jsxs("div",{className:"space-y-3",children:[P(),r.flagFormat&&o.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-200 rounded text-xs",children:o.jsxs("p",{className:"text-blue-600",children:[o.jsx("strong",{children:"Flag Format:"})," ",r.flagFormat]})}),E&&r.flag&&o.jsx("div",{className:"p-3 bg-green-500/10 border border-green-200 rounded",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsxs("p",{className:"text-xs text-green-600 font-mono break-all flex-1",children:[o.jsx("strong",{children:"Flag:"})," ",r.flag]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>T(r.flag),className:"h-6 px-2 flex-shrink-0",children:o.jsx(Q_,{className:"w-3 h-3"})})]})})]})})})}),b==="hints"&&o.jsx(ie,{className:"border",children:o.jsx(oe,{className:"p-4 sm:p-6",children:r.hints&&r.hints.length>0?o.jsx("div",{className:"space-y-3",children:r.hints.map((Q,J)=>o.jsx(ie,{className:"border",children:o.jsx(oe,{className:"p-3",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(iU,{className:"w-3 h-3 text-primary"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"font-semibold text-sm",children:["Hint ",J+1]}),o.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>N(J),className:"h-6 px-2 text-xs",children:v[J]?"Hide":"Reveal"})]}),v[J]&&o.jsx("p",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded border",children:Q})]})]})})},J))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No hints available."})})})}),b==="files"&&o.jsx(ie,{className:"border",children:o.jsx(oe,{className:"p-4 sm:p-6",children:r.files&&r.files.length>0?o.jsx("div",{className:"space-y-2",children:r.files.map((Q,J)=>o.jsxs("a",{href:Q.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 text-sm border rounded hover:bg-accent transition-colors",children:[Q.type==="file"?o.jsx(oc,{className:"w-4 h-4"}):o.jsx(aa,{className:"w-4 h-4"}),o.jsx("span",{className:"flex-1 truncate",children:Q.name}),o.jsx(Wd,{className:"w-3 h-3"})]},J))}):o.jsx("div",{className:"text-center py-4",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:"No files or links available."})})})})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs(ie,{className:"border lg:sticky lg:top-4",children:[o.jsx(je,{className:"p-4 pb-2",children:o.jsxs(Ae,{className:"flex items-center gap-2 text-base",children:[o.jsx(AC,{className:"w-4 h-4"}),"Submit Flag"]})}),o.jsxs(oe,{className:"p-4 pt-2 space-y-3",children:[f&&o.jsxs(jv,{className:`text-sm ${f.type==="success"?"bg-green-500/10 border-green-200":"bg-red-500/10 border-red-200"}`,children:[f.type==="success"?o.jsx(Ur,{className:"w-4 h-4 text-green-600"}):o.jsx(oa,{className:"w-4 h-4 text-red-600"}),o.jsx(Av,{className:f.type==="success"?"text-green-600":"text-red-600",children:f.text})]}),E?o.jsxs("div",{className:"text-center p-3 bg-green-500/10 border border-green-200 rounded",children:[o.jsx(Ur,{className:"w-8 h-8 text-green-600 mx-auto mb-1"}),o.jsx("p",{className:"text-green-600 font-semibold text-sm",children:"Challenge Solved!"}),o.jsx("p",{className:"text-green-600 text-xs mt-1",children:H?`+${r.totalPoints||r.points} points awarded`:"Already solved - no additional points"})]}):o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx(G,{htmlFor:"flag",className:"text-xs font-medium",children:"Enter Flag"}),o.jsx(pe,{id:"flag",placeholder:"CTF{...} or flag content",value:d,onChange:Q=>h(Q.target.value),onKeyPress:Q=>Q.key==="Enter"&&A(),className:"font-mono text-sm h-9"})]}),o.jsx(Y,{onClick:A,disabled:l||!d.trim(),className:"w-full h-9",variant:"terminal",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin w-3 h-3 border border-white border-t-transparent rounded-full mr-2"}),"Checking..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Xe,{className:"w-3 h-3 mr-1"}),"Submit Flag"]})})]})]})]}),_.length>0&&o.jsxs(ie,{className:"border",children:[o.jsx(je,{className:"p-4 pb-2",children:o.jsx(Ae,{className:"text-base",children:"Submission History"})}),o.jsx(oe,{className:"p-4 pt-2",children:o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:_.map(Q=>{var J,W,ue;return o.jsxs("div",{className:"flex items-center justify-between p-2 border rounded text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[Q.isCorrect?o.jsx(Ur,{className:"w-3 h-3 text-green-600 flex-shrink-0"}):o.jsx(oa,{className:"w-3 h-3 text-red-600 flex-shrink-0"}),o.jsx("code",{className:"truncate font-mono text-xs",children:Q.flag}),Q.pointsAwarded&&Q.pointsAwarded>0&&o.jsxs(Ue,{variant:"outline",className:"ml-1 text-xs bg-green-500/10 text-green-600",children:["+",Q.pointsAwarded]})]}),o.jsx("span",{className:"text-muted-foreground flex-shrink-0 ml-1 text-xs",children:((ue=(W=(J=Q.submittedAt)==null?void 0:J.toDate)==null?void 0:W.call(J))==null?void 0:ue.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||new Date(Q.submittedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Q.id)})})})]})]})]})]})}),o.jsx(ht,{})]})};function fz(){return o.jsx(gC,{children:o.jsx(ZF,{children:o.jsx(e5,{children:o.jsx(qR,{children:o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(dt,{}),o.jsx("main",{className:"flex-1",children:o.jsxs(FR,{children:[o.jsx(on,{path:"/",element:o.jsx(xU,{})}),o.jsx(on,{path:"/login",element:o.jsx(wU,{})}),o.jsx(on,{path:"/signup",element:o.jsx(_U,{})}),o.jsx(on,{path:"/auth/github/callback",element:o.jsx(NU,{})}),o.jsx(on,{path:"/dashboard",element:o.jsx(fs,{children:o.jsx(_i,{children:o.jsx(IU,{})})})}),o.jsx(on,{path:"/practice",element:o.jsx(fs,{children:o.jsx(_i,{children:o.jsx(AU,{})})})}),o.jsx(on,{path:"/live",element:o.jsx(fs,{children:o.jsx(_i,{children:o.jsx(kU,{})})})}),o.jsx(on,{path:"/leaderboard",element:o.jsx(fs,{children:o.jsx(_i,{children:o.jsx(XU,{})})})}),o.jsx(on,{path:"/writeups",element:o.jsx(fs,{children:o.jsx(_i,{children:o.jsx(bU,{})})})}),o.jsx(on,{path:"/writeups/create",element:o.jsx(fs,{children:o.jsx(_i,{children:o.jsx(EU,{})})})}),o.jsx(on,{path:"/challenge/:challengeId",element:o.jsx(fs,{children:o.jsx(_i,{children:o.jsx(hz,{})})})}),o.jsx(on,{path:"/admin",element:o.jsx(fs,{children:o.jsx(t5,{children:o.jsx(dz,{})})})}),o.jsx(on,{path:"*",element:o.jsx(TU,{})})]})}),o.jsx(ht,{})," "]})})})})})}zE(document.getElementById("root")).render(o.jsx(gC,{children:o.jsx(fz,{})}));
